{"version":3,"sources":["utils/ScrollToTop.js","pages/Landing/card-menu/Menu.js","pages/Landing/tigDataSources/DatasourceList.js","pages/Landing/tigDataSources/RecentActivity.js","components/tig/TigNav.js","components/tig/TigBreadcrumbs.js","components/tig/TigLayout.js","pages/Landing/index.js","pages/Landing/tigDataSources/DataSourceView.js","pages/Landing/admin.js","pages/Landing/NavBar/RightMenu.js","pages/Landing/NavBar/TopNavBar.js","pages/Landing/NavBar/logo/img.jpg","pages/404.js","pages/auth/index.js","components/avl-map/src/components/LayerPanel.js","components/avl-map/src/components/Sidebar.js","components/avl-map/src/components/LoadingLayer.js","components/avl-map/src/components/HoverCompContainer.js","components/avl-map/src/components/InfoBoxContainer.js","components/avl-map/src/components/DraggableModal.js","components/avl-map/src/components/MapAction.js","components/avl-map/src/avl-map.js","components/avl-map/src/components/DefaultHoverComp.js","components/avl-map/src/LayerContainer.js","pages/map/layers/layerHost.js","pages/map/wrappers/fetcher.js","pages/map/layers/tipLayer.js","pages/map/layers/SED2040CountyLevelForecastLayer.js","pages/map/layers/SED2040TazLevelForecastLayer.js","pages/map/layers/SED2050CountyLevelForecastLayer.js","pages/map/layers/SED2055CountyLevelForecastLayer.js","pages/map/layers/SED2055TazLevelForecastLayer.js","pages/map/config/acsCensusCategoryMappings.js","pages/map/layers/ACSCensusLayer.js","pages/map/layers/BPMPerformanceMeasuresLayer.js","pages/map/layers/HubBoundTravelDataLayer.js","pages/map/layers/RTPProjectDataLayer.js","pages/map/utils/color-ranges.js","pages/map/utils/legend.js","pages/map/map-styles/npmrds.js","pages/map/map-styles/traffic_signals.js","pages/map/layers/npmrds/filters.js","pages/map/layers/npmrds/index.js","pages/map/layers/index.js","pages/map/MapIndex.js","pages/map/index.js","Routes.js","App.js","store/index.js","theme/index.js","reportWebVitals.js","index.js","config.js"],"names":["ScrollToTop","pathname","useLocation","useEffect","arg","window","scrollTo","classNames","classes","filter","Boolean","join","MenuComponent","className","as","open","Button","show","Fragment","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Items","static","Item","active","SOURCES_ATTRIBUTES","DatasourceList","useFalcor","falcor","falcorCache","a","get","length","console","log","from","to","fetchData","sourcesList","React","useMemo","cache","data","Object","keys","map","item","id","value","state","name","description","Menu","processData","d","dI","link","TigNav","withAuth","LeftNav","style","height","alt","src","RightNav","TigBreadcrumbs","children","TigLayout","Pattern","width","viewBox","fill","x","y","patternUnits","Landing","RecentActivity","config","path","exact","component","title","shadowed","user","authLevel","layout","VIEWS_ATTRIBUTES","mainNav","dataSourceId","useParams","useState","activeId","setActiveId","location","sortIds","b","response","graph","sort","dataSource","navigation","href","icon","MapIcon","current","count","TableIcon","FolderIcon","ChartBarIcon","onClick","onClickView","layoutSettings","fixed","headerBar","logo","navBar","auth","RightMenu","type","customTheme","sidebarBg","topNavHeight","navitemTop","navitemTopActive","navItems","PublicNav","menuItems","rightMenu","class","props","showHeaders","wrappers","addToGroup","LayerPanel","layer","layersLoading","rest","setOpen","toggleOpen","useCallback","e","theme","useTheme","filters","values","i","layerId","bg","menuBg","display","legend","Icon","cursor","menuTextActive","LayerHeader","MapActions","isDynamic","removeDynamicLayer","removeLayer","marginTop","toolbar","tool","LegendControls","useSidebarContext","extendSidebar","passCompProps","closeExtension","range","types","useLegendReducer","toolState","dispatch","updateLegend","update","ref","useRef","rect","getBoundingClientRect","Comp","LegendSidebar","compProps","top","accent1","colors","small","LayerTool","Tool","tooltip","isVisible","action","toggleVisibility","checkDefaultTools","SidebarTabs","layers","Component","inactiveLayers","activeLayers","options","placeholder","accessor","multi","searchable","onChange","addLayer","styles","mapStyles","styleIndex","loading","setLoading","done","mapboxMap","once","off","updateStyle","index","setMapStyle","imageUrl","accent2","borderInfo","Sidebar","sidebarTabIndex","tabs","Tabs","tab","startOpen","placeBeside","setSidebarTab","LoadingLayer","progress","scale","color","getTranslate","pos","yMax","yTrans","getPinnedTranslate","orientation","getTransform","RemoveButton","transform","PinnedHoverComp","remove","project","lngLat","boxShadow","HoverCompContainer","InfoBoxContainer","padding","node","setNode","reduce","c","infoBoxes","aa","cc","push","Math","max","legendLayer","infoBoxLayers","infoBoxWidth","bool","box","ii","containerNode","InfoBox","Header","isOpen","LegendContainer","Title","marginBottom","DraggableModal","modalData","loadingLayers","modalKey","zIndex","bringModalToFront","onDragStart","closeModal","MapAction","actionFunc","menuText","menuTextHover","DefaultMapOptions","center","minZoom","zoom","preserveDrawingBuffer","attributionControl","logoPosition","idCounter","getUniqueId","DefaultStaticOptions","size","getStaticImageUrl","slice","mapboxgl","accessToken","InitialState","initializedLayers","dynamicLayers","hoverData","Map","pinnedHoverComps","pinnedMapMarkers","layerStates","Reducer","payload","HoverComp","set","delete","HoverComps","phc","marker","md","newState","EmptyArray","EmptyObject","DefaultSidebar","AvlMap","mapOptions","sidebar","layerProps","useReducer","updateHover","projectLngLat","updateFilter","filterName","prevValue","Promise","resolve","onFilterChange","then","render","addDynamicLayer","_onRemove","_onAdd","showModal","removePinnedHoverComp","addPinnedHoverComp","Marker","setLngLat","addTo","saveMapAsImage","fileName","canvas","getCanvas","document","createElement","download","toDataURL","click","Options","test","unshift","container","on","mapMoved","performance","now","includes","reverse","promise","dispatchUpdate","v","forEach","bind","mapActions","_init","setActive","pinHoverComp","hovering","result","sortOrder","onMapStyleChange","setStyle","receiveProps","useSetSize","Modals","modal","MapContainer","actions","bounds","key","pinned","styled","div","DefaultHoverComp","row","getLayerId","DefaultCallback","DefaultOptions","modals","sources","onHover","onBoxSelect","LayerContainer","this","layerVisibility","needsRender","callbacks","hoveredFeatures","updateState","init","source","getSource","addSource","getLayer","beneath","getLayoutProperty","_setVisibilityNone","addHover","addClick","selection","addBoxSelect","onAdd","point","features","callback","call","has","setFeatureState","hover","property","filterFunc","mousemove","hoverFeatures","sourceLayer","undefined","properties","prop","queryRenderedFeatures","hasValue","mouseleave","hoverLeave","start","canvasContainer","getCanvasContainer","getPos","Point","clientX","left","clientLeft","clientY","clientTop","preventDefault","appendChild","minX","min","maxX","minY","maxY","mouseup","finish","keyup","keyCode","which","code","bbox","removeEventListener","dragPan","enable","parentNode","removeChild","featureMap","feature","select","selectedValues","element","addEventListener","shiftKey","button","disable","boxZoom","pop","onRemove","_setVisibilityVisible","setLayoutProperty","visibility","newValue","HOST","fetcher","url","fetch","res","ok","Error","json","parse","require","TestTipLayer","viewId","dataset","domain","valueAccessor","tip_id","tip_ids","project_type","mpo_name","tip_mpos","agency","direction","acc","curr","toLowerCase","params","symbologies","color_scheme","preValue","removeSource","geojson","symbols_map","out","county","estimated_cost","cost","mpo","ptype","sponsor","symbols_geojson","line_geojson","setData","paint","symbol","layerID","SED2040CountyLevelForecastLayer","year","getColorRange","geoid","counties","area","data_counties","setTimeout","processedData","scaleQuantile","extent","scaleQuantize","scaleThreshold","scaleLinear","scaleOrdinal","setFilter","data_county","colorScale","getColorScale","setPaintProperty","SED2040TazLevelForecastLayer","area_id","format","taz_ids","SED2050CountyLevelForecastLayer","SED2055CountyLevelForecastLayer","SED2055TazLevelForecastLayer","acsCensusCategoryMappings","ACSCensusLayer","categoryName","column","tracts","viewid","categoryValue","data_tracts","data_tract","BPMPerformanceMeasuresLayer","HubBoundTravelDataLayer","mode","convertTime","coordinates","hub_bound","geometry","coord","extend","LngLatBounds","fitBounds","time","substring","parseInt","RTPProjectDataLayer","rtp_id","rtp_ids","plan_portion","rtp_sponsors","polygon_geojson","label","ColorRanges","colorbrewer","schemeGroups","group","toUpperCase","category","NpmrdsSources","npmrdsPaint","base","stops","NpmrdsLayers","TrafficSignalsSources","geography","month","hour","setActiveLayer","l","output","split","checkYear","NPMRDSLayer","latlng","k","activeStation","qaLevel","allMeasures","risAttributes","tmcAttributes","currentData","setActiveStation","localStorage","JSON","getItem","geographies","setItem","stringify","removeItem","getBounds","isEmpty","right","bottom","bearing","pitch","duration","offset","tr","nw","getNorthWest","se","getSouthEast","sub","scaleX","scaleY","unproject","add","scaleZoom","maxZoom","easeTo","geo","geolevel","geoname","bounding_box","zoomToGeography","saveToLocalStorage","ckmeans","d3scale","geoids","requests","filtered","getCache","val","collection","f","routes","MAPBOX_TOKEN","rtp_project_data","views","layerVal","routingConfig","Routes","Views","AdminLanding","Auth","TestMap","NoMatch","App","basename","process","route","menus","r","mapDispatchToProps","createBrowserHistory","connect","reducer","combineReducers","Reducers","messages","createStore","applyMiddleware","thunk","$compositions","Compositions","transparent","contentBg","accentColor","accentBg","borderColor","textColor","highlightColor","white","dark","gray","bright","sizes","compact","wrapper","sideItem","topItem","full","mini","micro","TDS_THEME_BASE","sidenavWrapper","menuIconSide","navitemSide","navitemSideActive","topnavWrapper","topnavContent","topnavMenu","menuIconTop","topmenuRightNavContainer","text","textContrast","border","textInfo","bgInfo","textSuccess","bgSuccess","borderSuccess","textDanger","bgDanger","borderDanger","textWarning","bgWarning","borderWarning","textLight","menuIcon","topMenuBorder","headerShadow","menuBgHover","menuBgActive","menuBgActiveHover","menuTextActiveHover","sidebarBorder","headerBg","headerBgHover","inputBg","inputBorder","inputBgDisabled","inputBorderDisabled","inputBgFocus","inputBorderFocus","textBase","textSmall","textLarge","paddingBase","paddingSmall","paddingLarge","accent3","accent4","highlight1","highlight2","highlight3","highlight4","contentWidth","contentPadding","sidebarW","transition","tableInfoBar","tableRow","tableRowStriped","tableCell","tableHeader","TDS_THEME","composeTheme","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","addComponents","AmsComponents","addWrappers","AmsWrappers","AuthEnabledApp","enableAuth","AUTH_HOST","PROJECT_NAME","CLIENT_HOST","ReactDOM","StrictMode","store","falcorGraph","Provider","getElementById"],"mappings":"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","file":"static/js/main.3581cf0d.chunk.js","sourcesContent":["import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nconst ScrollToTop = () => {\n  const { pathname } = useLocation();\n  useEffect((arg) => {\n    window.scrollTo(0, 0);\n  }, [pathname])\n  return null;\n}\n\nexport default ScrollToTop;\n","import React, {Fragment} from 'react'\nimport {DotsVerticalIcon,StarIcon} from \"@heroicons/react/solid\";\nimport {Menu,Transition} from \"@headlessui/react\";\n\nfunction classNames(...classes) {\n    return classes.filter(Boolean).join(' ')\n}\n\n\nconst MenuComponent = () =>{\n    return (\n        <div className=\"flex-shrink-0 self-center flex\">\n            <Menu as=\"div\" className=\"relative z-30 inline-block text-left\">\n                {({ open }) => (\n                    <>\n                        <div>\n                            <Menu.Button className=\"-m-2 p-2 rounded-full flex items-center text-gray-400 hover:text-gray-600\">\n                                <span className=\"sr-only\">Open options</span>\n                                <DotsVerticalIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\n                            </Menu.Button>\n                        </div>\n\n                        <Transition\n                            show={open}\n                            as={Fragment}\n                            enter=\"transition ease-out duration-100\"\n                            enterFrom=\"transform opacity-0 scale-95\"\n                            enterTo=\"transform opacity-100 scale-100\"\n                            leave=\"transition ease-in duration-75\"\n                            leaveFrom=\"transform opacity-100 scale-100\"\n                            leaveTo=\"transform opacity-0 scale-95\"\n                        >\n                            <Menu.Items\n                                static\n                                className=\"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none\"\n                            >\n                                <div className=\"py-1\">\n                                    <Menu.Item>\n                                        {({ active }) => (\n                                            <div\n                                                \n                                                className={classNames(\n                                                    active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',\n                                                    'flex px-4 py-2 text-sm'\n                                                )}\n                                            >\n                                                <StarIcon className=\"mr-3 h-5 w-5 text-gray-400\" aria-hidden=\"true\" />\n                                                <span>Add to favorites</span>\n                                            </div>\n                                        )}\n                                    </Menu.Item>\n                                    {/*<Menu.Item>*/}\n                                    {/*    {({ active }) => (*/}\n                                    {/*        <a*/}\n                                    {/*            href=\"#\"*/}\n                                    {/*            className={classNames(*/}\n                                    {/*                active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',*/}\n                                    {/*                'flex px-4 py-2 text-sm'*/}\n                                    {/*            )}*/}\n                                    {/*        >*/}\n                                    {/*            <CodeIcon className=\"mr-3 h-5 w-5 text-gray-400\" aria-hidden=\"true\" />*/}\n                                    {/*            <span>Embed</span>*/}\n                                    {/*        </a>*/}\n                                    {/*    )}*/}\n                                    {/*</Menu.Item>*/}\n                                    {/*<Menu.Item>*/}\n                                    {/*    {({ active }) => (*/}\n                                    {/*        <a*/}\n                                    {/*            href=\"#\"*/}\n                                    {/*            className={classNames(*/}\n                                    {/*                active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',*/}\n                                    {/*                'flex px-4 py-2 text-sm'*/}\n                                    {/*            )}*/}\n                                    {/*        >*/}\n                                    {/*            <FlagIcon className=\"mr-3 h-5 w-5 text-gray-400\" aria-hidden=\"true\" />*/}\n                                    {/*            <span>Report content</span>*/}\n                                    {/*        </a>*/}\n                                    {/*    )}*/}\n                                    {/*</Menu.Item>*/}\n                                </div>\n                            </Menu.Items>\n                        </Transition>\n                    </>\n                )}\n            </Menu>\n        </div>\n    )\n}\n\nexport default MenuComponent\n","import React, {useEffect} from 'react';\nimport {useFalcor} from '@availabs/avl-components'\nimport MenuComponent from \"../card-menu/Menu\";\nimport get from 'lodash.get'\nimport {Link} from \"react-router-dom\";\n\nconst SOURCES_ATTRIBUTES = [\n    'id',\n    'name',\n    'description',\n    'current_version',\n    'data_starts_at',\n    'data_ends_at',\n    'origin_url',\n    'user_id',\n    'rows_updated_at',\n    'rows_updated_by_id',\n    'topic_area',\n    'source_type'\n]\n\nconst DatasourceList = () => {\n    const {falcor, falcorCache} = useFalcor();\n\n    useEffect(() => {\n        async function fetchData() {\n            let length = await falcor.get([\"tig\", \"datasources\", \"length\"])\n            length = get(length, ['json', 'tig', 'datasources', 'length'], 0)\n\n            console.log('length', length)\n            if (length) {\n                return await falcor.get([\"tig\", \"datasources\", \"byIndex\", [{\n                    from: 0,\n                    to: length - 1\n                }], SOURCES_ATTRIBUTES])\n\n            }\n        }\n\n        return fetchData();\n    }, [])\n\n    const sourcesList = React.useMemo(() => {\n        console.log('Data source list process data')\n        let cache = get(falcorCache, ['tig', 'datasources', 'byId'], null)\n        let data = []\n        if (cache) {\n            data = Object.keys(cache).map(item => cache[item])\n        }\n        return data\n\n    },[falcorCache])\n\n\n    return (\n        <div className='border-t-2 border-teal-600'>\n            <div className='bg-tigGreen-100 text-xl w-28 py-3 pl-4 text-white mb-2'> Catalog </div>\n            {sourcesList.length > 0 ?\n                <ul className=\"\">\n                    {sourcesList.map((item) => (\n                        <li key={item.id.value} className=\"border-t py-13px\">\n                            <div className=\"flex space-x-3\">\n                                <div className=\"min-w-5xl flex-1\">\n                                    <p className=\"text-sm font-bold text-gray-900 mt-10px\">\n                                        <Link to={{\n                                            pathname: `/datasource/${item.id.value}`,\n                                            state: {name: item.name.value, description: item.description.value}\n                                        }} className=\"hover:underline py-6px px-12px border-1\">\n                                            {item.name.value}\n                                        </Link>\n                                    </p>\n                                </div>\n                                <MenuComponent/>\n                            </div>\n                            {/*<div className=\"opacity-50 py-4\">\n                                <p>{item.description.value}</p>\n                            </div>*/}\n                        </li>\n                    ))}\n                </ul>\n                :\n                <div>Loading ... </div>\n            }\n        </div>\n\n    )\n}\n\nexport default DatasourceList\n","import React, {useEffect} from 'react';\nimport {useFalcor} from '@availabs/avl-components'\nimport MenuComponent from \"../card-menu/Menu\";\nimport get from 'lodash.get'\nimport {Link} from \"react-router-dom\";\n\nconst SOURCES_ATTRIBUTES = [\n    'id',\n    'name',\n    'description',\n    'current_version',\n    'data_starts_at',\n    'data_ends_at',\n    'origin_url',\n    'user_id',\n    'rows_updated_at',\n    'rows_updated_by_id',\n    'topic_area',\n    'source_type'\n]\n\nconst DatasourceList = () => {\n    const {falcor, falcorCache} = useFalcor();\n\n    useEffect(() => {\n        async function fetchData() {\n            let length = await falcor.get([\"tig\", \"datasources\", \"length\"])\n            length = get(length, ['json', 'tig', 'datasources', 'length'], 0)\n\n            if (length) {\n                return await falcor.get([\"tig\", \"datasources\", \"byIndex\", [{\n                    from: 0,\n                    to: length - 1\n                }], SOURCES_ATTRIBUTES])\n\n            }\n        }\n\n        return fetchData();\n    }, [falcor])\n\n    const processData = () => {\n        return ['Activity 1', 'Activity 2'].map((d, dI) => ({id: dI, value: d, name:d, link: '#'}))\n\n    }\n\n\n    return (\n        <div className='border-t-2 border-teal-600'>\n            <div className='bg-tigGreen-100 text-l w-36 py-4 px-4 text-white mb-2 '> Recent Activity </div>\n            {processData() ?\n                <ul className=\"\">\n                    {processData().map((item) => (\n                        <li key={item.id} className=\"border-t py-13px\">\n                            <div className=\"flex space-x-3\">\n                                <div className=\"min-w-5xl flex-1\">\n                                    <p className=\"text-sm text-gray-700\">\n                                        <Link to={{\n                                            pathname: `/datasource/${item.value}`,\n                                            state: {name: item.name, description: item.description}\n                                        }} className=\"hover:underline py-6px px-12px border-1\">\n                                            {item.name}\n                                        </Link>\n                                    </p>\n                                </div>\n                                <MenuComponent/>\n                            </div>\n                        </li>\n                    ))}\n                    <li className={'float-right text-sm text-gray-700'}>\n                        <Link to={{\n                            pathname: '#'\n                        }} className=\"hover:underline py-6px px-12px border-1\">Show More</Link>\n                    </li>\n                </ul>\n                :\n                <div>Loading ... </div>\n            }\n        </div>\n\n    )\n}\n\nexport default DatasourceList\n","import React from \"react\"\nimport { withAuth, TopNav } from '@availabs/avl-components'\nimport { Link } from 'react-router-dom'\n\n\nconst TigNav = withAuth(() => {\n    \n\n\n    return (\n        <div className='w-full'>\n            <TopNav \n                LeftNav={\n                    () => (\n                        <Link to='/' className='bg-tigGray-200 hover:bg-tigGray-50' style={{height:'3.1rem'}}>\n                            <img alt='NYMTC Logo' style={{height:50}} src='/images/nymtc_logo.svg'/>\n                        </Link>\n                    )\n                }\n                RightNav={\n                    () => (\n                        <div className='flex h-12 flex-col md:flex-row'>\n                            <div className='p-3 h-full bg-tigGray-200 my-2 md:my-0 md:mr-2 text-sm font-bold'>Welcome!</div>\n                            <div className='p-3 h-full bg-tigGray-200 my-2 md:my-0 md:mr-2 text-sm font-light'>Sign up</div>\n                            <div className='p-3 h-full bg-tigGray-200 text-sm font-light'>Login</div>\n                        </div>\n                    )\n                }\n            />\n        </div>\n    )\n})\n\nexport default TigNav","import React from \"react\"\n//import { withAuth } from '@availabs/avl-components'\n//import \n\nconst TigBreadcrumbs = ({children}) => {\n    return (\n        <div className='w-full flex justify-between py-6 items-baseline'>\n            <div className='flex'>\n                <div className='bg-tigGray-100 py-1 px-3 text-sm text-gray-600'>\n                    Catalog\n                </div>\n            </div>\n            <div>\n                <span className='fa fa-question text-sm text-gray-600' />\n            </div>\n        </div>\n    )\n}\n\nexport default TigBreadcrumbs","import React from \"react\"\nimport { withAuth } from '@availabs/avl-components'\nimport TigNav from './TigNav'\nimport TigBreadcrumbs from './TigBreadcrumbs'\n\nconst TigLayout = withAuth(({children}) => {\n    return (\n        <div className='w-full max-w-6xl mx-auto'>\n            <div className='z-10'>\n                <TigNav />\n            </div>\n            <TigBreadcrumbs />\n            {/*<p className={'text-xs text-gray-700 mb-2'}>\n                You are currently viewing x of the y available data sources in the Gateway. Click on one of the following sources and associated views to see the data in Table, Map or Chart form. Create an account or log in to see more.\n            </p>*/}\n            <div className=''>\n                {children}\n            </div>\n        </div>\n    )\n})\n\nexport default TigLayout","import React from 'react';\nimport {Redirect} from 'react-router-dom'\nimport {withAuth} from '@availabs/avl-components'\nimport DataSourceList from \"./tigDataSources/DatasourceList\";\nimport RecentActivity from \"./tigDataSources/RecentActivity\";\n\n\nimport TigLayout from 'components/tig/TigLayout'\n\nexport const Pattern = () => \n  <div className=\"hidden sm:block sm:absolute sm:inset-0\" aria-hidden=\"true\">\n    <svg className=\"absolute bottom-0 right-0 transform translate-x-1/2 mb-48 text-gray-700 lg:top-0 lg:mt-28 lg:mb-0 xl:transform-none xl:translate-x-0\" width={364} height={384} viewBox=\"0 0 364 384\" fill=\"none\">\n      <defs>\n        <pattern id=\"eab71dd9-9d7a-47bd-8044-256344ee00d0\" x={0} y={0} width={20} height={20} patternUnits=\"userSpaceOnUse\">\n          <rect x={0} y={0} width={4} height={4} fill=\"currentColor\" />\n        </pattern>\n      </defs>\n      <rect width={364} height={384} fill=\"url(#eab71dd9-9d7a-47bd-8044-256344ee00d0)\" />\n    </svg>\n  </div>\n\nconst Landing = () =>\n  <TigLayout>\n    <div className='flex'>\n      <div className='flex-1'>\n        <DataSourceList />\n      </div>\n      <div className='flex-1 pl-10'>\n        <RecentActivity />\n      </div>\n    </div>  \n  </TigLayout>\n\n\nconst AuthedLanding = withAuth(({ title, shadowed = true, user, children }) => {\n  if(user && user.authLevel > 0) {\n    return <Redirect to=\"/admin\" />\n  }\n  return <Landing />\n})\n\nconst config = {\n  path: \"/\",\n  exact: true,\n  component: AuthedLanding,\n  layout: 'Simple',\n}\n\n\nexport default config;\n\n","import React, {useEffect, useState, useMemo} from 'react';\nimport {useParams, useLocation} from 'react-router-dom'\nimport {useFalcor} from '@availabs/avl-components'\nimport get from \"lodash.get\";\nimport MenuComponent from \"../card-menu/Menu\";\nimport {\n    MapIcon,\n    TableIcon,\n    ChartBarIcon,\n    FolderIcon,\n    MenuIcon,\n} from '@heroicons/react/outline'\n\n\nimport TigLayout from 'components/tig/TigLayout'\n\nconst VIEWS_ATTRIBUTES = [\n    'id',\n    'name',\n    'description',\n    'source_id',\n    'current_version',\n    'data_starts_at',\n    'data_ends_at',\n    'origin_url',\n    'user_id',\n    'rows_updated_at',\n    'rows_updated_by_id',\n    'topic_area',\n    'download_count',\n    'last_displayed_at',\n    'view_count',\n    'created_at',\n    'updated_at',\n    'columns',\n    'data_model',\n    'statistic_id',\n    'column_types',\n    'data_levels',\n    'value_name',\n    'column_labels',\n    'row_name',\n    'column_name',\n    'spatial_level',\n    'data_hierarchy',\n    'geometry_base_year',\n    'deleted_at',\n    'download_instructions',\n    'value_columns',\n    'short_description'\n]\n\nfunction classNames(...classes) {\n    return classes.filter(Boolean).join(' ')\n}\n\nconst Views = () => {\n    const {dataSourceId} = useParams()\n    const {falcor,falcorCache} = useFalcor()\n    const [activeId,setActiveId] = useState(null)\n\n    const location = useLocation()\n    //const [sidebarOpen, setSidebarOpen] = useState(false)\n\n    const sortIds = ((a,b) =>{\n        return a.id < b.id ? 1 : -1\n    })\n\n    useEffect(() =>{\n        async function fetchData() {\n\n            let length = await falcor.get([\"tig\",\"datasources\",\"views\",\"sourceId\",[dataSourceId],'length'])\n\n            length = get(length,['json','tig','datasources','views',\"sourceId\",dataSourceId,'length'],null)\n            if(length){\n                const response = await falcor.get([\"tig\",\"datasources\",\"views\",\"sourceId\",[dataSourceId],\"byIndex\",[{from:0,to:length-1}],VIEWS_ATTRIBUTES])\n                const graph = get(response,['json','tig','datasources','views',\"sourceId\",dataSourceId,\"byIndex\"],null)\n                let data = []\n                if(graph){\n                    data = Object.keys(graph).filter(d => d !== '$__path').map(item => graph[item]).sort(sortIds)\n                    console.log('data',data)\n                    setActiveId(data[0].id)\n                }\n            }\n        }\n\n        return fetchData();\n    },[falcor,dataSourceId])\n\n    const dataSource = useMemo(() => {\n        let cache = get(falcorCache,['tig','datasources','views',\"sourceId\",dataSourceId,\"byId\"],null)\n        return cache ? Object.keys(cache).map(item => cache[item]).sort(sortIds) : false\n    },[falcorCache,dataSourceId])\n\n    const onClickView = (item) =>{\n        setActiveId(item.id.value)\n    }\n\n    const navigation = [\n        { name: 'Map', href: `/v2/views/${activeId}/map`, icon: MapIcon, current: true, count: '5' },\n        { name: 'Table', href: '#', icon: TableIcon, current: false },\n        { name: 'View Meta data', href: '#', icon: FolderIcon, current: false, count: '19' },\n        { name: 'Charts', href: '#', icon: ChartBarIcon, current: false },\n    ]\n\n    return (\n        \n        <TigLayout>\n            <div className='border-t-2 border-teal-600'>\n            <div className='bg-teal-600 text-2xl w-28 p-4 text-white mb-2'> Catalog </div>\n                <div className=\"flex\">\n               \n                <div className=\"flex flex-col flex-1\">\n                    <div className=\"md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3\">\n                        <button\n                            className=\"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500\"\n                            /*onClick={() => setSidebarOpen(true)}*/\n                        >\n                            <span className=\"sr-only\">Open sidebar</span>\n                            <MenuIcon className=\"h-6 w-6\" aria-hidden=\"true\" />\n                        </button>\n                    </div>\n                    <main className=\"flex-1 relative z-0\">\n                        <div className=\"px-6\">\n                            <div className=\"border-b py-4\">\n                                {/*<h1 className=\"text-2xl tracking-tight font-extrabold text-gray-900 sm:text-2xl md:text-6xl\">\n                                    <span className=\"block text-indigo-600 xl:inline\">{location.state.name || ''}</span>\n                                </h1>*/}\n                                <p className=\"mt-3 text-base text-gray-700\">\n                                    {location.state.description || ''}\n                                </p>\n                            </div>\n                            <div className=\"px-6 \">\n                                \n                                    {dataSource ?\n                                        <ul className=\"pt-4\">\n                                            {dataSource.map((item) => (\n                                                <li key={item.id.value}\n                                                    className={\n                                                        activeId === item.id.value ? '  px-6 py-2 sm:px-6 ring-1 ring-offset-2 ring-indigo-500' :\n                                                            ' px-4 py-2 sm:px-6'\n                                                    }\n\n                                                >\n                                                    <div className=\"flex\">\n                                                        <div className=\"flex-1\">\n                                                            <p className=\"text-lg font-medium text-gray-900\">\n                                                                <div className=\"hover:underline cursor-pointer\" onClick={() => onClickView(item)}>\n                                                                    {item.name.value}\n                                                                </div>\n                                                            </p>\n                                                        </div>\n                                                        <MenuComponent/>\n                                                    </div>\n                                                    {/*<div className=\"opacity-50 py-4\">\n                                                        <p>{item.description.value || 'No Description'}</p>\n                                                    </div>*/}\n                                                </li>\n                                            ))}\n                                        </ul>\n                                        :<div>Loading ...</div>}\n                            </div>\n                        </div>\n                    </main>\n                </div>\n                 <div className=\" hidden md:flex md:flex-shrink-0\">\n                    <div className=\"flex flex-col w-64\">\n                        {/* Sidebar component, swap this element with another sidebar if you like */}\n                        <div className=\"flex flex-col h-0 flex-1 border-l border-gray-200 bg-white\">\n                            <div className=\"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto\">\n                                <nav className=\"mt-5 flex-1 px-2 bg-white space-y-1\">\n                                    {navigation.map((item) => (\n                                        <a\n                                            key={item.name}\n                                            href={item.href}\n                                            className={classNames(\n                                                item.current ? 'bg-gray-100 text-gray-900' : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900',\n                                                'group flex items-center px-2 py-2 text-sm font-medium rounded-md'\n                                            )}\n                                        >\n                                            <item.icon\n                                                className={classNames(\n                                                    item.current ? 'text-gray-500' : 'text-gray-400 group-hover:text-gray-500',\n                                                    'mr-3 flex-shrink-0 h-6 w-6'\n                                                )}\n                                                aria-hidden=\"true\"\n                                            />\n                                            {item.name}\n                                        </a>\n                                    ))}\n                                </nav>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            </div>\n        </TigLayout>\n    )\n}\n\n\n\nconst config = {\n    path: \"/datasource/:dataSourceId\",\n    exact: true,\n    mainNav: true,\n    name: 'Views Data Source',\n    component: Views,\n    layout: 'Simple',\n    layoutSettings: {\n        fixed: true,\n        headerBar: true,\n        logo: \"AVAIL\",\n        navBar: 'top',\n        auth: true\n    }\n}\n\n\n\nexport default config;\n","import React from 'react';\nimport { Pattern } from 'pages/Landing'\n\nconst Admin = () =>\n  <div className='h-screen flex-1 flex flex-col text-white bg-gray-800'>\n      <Pattern />\n      <div className=\"flex-1 flex items-center justify-center flex-col\">\n        <div className=\"text-6xl font-bold\">TDS</div>\n        <div className=\"text-xl\">Management</div>\n      </div>\n  </div>\n\nconst config = {\n  path: \"/subdir/admin\",\n  exact: true,\n  mainNav: true,\n  name: 'Home',\n  component: Admin,\n  layoutSettings: {\n    fixed: true,\n    headerBar: true,\n    logo: \"AVAIL\",\n    navBar: 'side'\n  }\n}\n\n\n\nexport default config;\n","import React from \"react\"\n\nimport { NavItem} from '@availabs/avl-components'\n\nexport const RightMenu = ()=> {\n    return (\n        <div className=\"h-full flex py-2\">\n            <NavItem to=\"/\" type='top' customTheme={{\n                sidebarBg: 'bg-gray-800',\n                topNavHeight: '12' ,\n                navitemTop: 'px-8 inline-flex items-center text-base font-normal text-white hover:text-gray-100 hover:pb-4 focus:outline-none  focus:border-gray-300 transition duration-150 ease-in-out',\n                navitemTopActive: 'px-8 inline-flex items-center text-base font-normal text-white hover:text-indigo-500 hover:pb-4 focus:outline-none  focus:border-gray-300 transition duration-100 ease-in-out'\n            }}>Welcome</NavItem>\n            {/*<NavMenu>\n                <NavMenuItem to=\"/\" className=\"text-white\">\n                    Logout\n                </NavMenuItem>\n            </NavMenu>*/}\n        </div>\n    )\n}\n\n\n","import {TopNav} from \"@availabs/avl-components\";\nimport {Link} from \"react-router-dom\";\nimport {RightMenu} from \"./RightMenu\";\nimport React from \"react\";\nimport logo from './logo/img.jpg'\n\nconst navItems = [\n    {\n      name: 'TIG Data Map',\n      path: `/map/`,\n      icon: 'fa fa-map',\n      className: 'font-medium text-lg'\n\n    },\n    // {\n    //     name: 'Traffic Stats',\n    //     path: `/short/`,\n    //     icon: 'fa fa-edit',\n    //     className: 'font-medium text-lg'\n    // },\n    // {\n    //     name: 'Documentation',\n    //     path: `/docs/`,\n    //     //icon: 'fa fa-edit',\n    //     className: 'font-medium text-lg'\n    // }\n]\n\nexport const PublicNav = () =>\n    <TopNav\n        menuItems={navItems}\n        open={true}\n        logo={<div className=\"mr-8\">\n            <Link to=\"/\">\n                <img  className=\"w-auto sm:h-14\" src={logo} alt='Logo' height=\"300\" width=\"200\"/>\n            </Link>\n        </div>\n\n        }\n        rightMenu={<RightMenu/>}\n        customTheme={{\n            sidebarBg: 'bg-gray-800',\n            topNavHeight: '12' ,\n            navitemTop: 'px-8 inline-flex items-center text-base font-normal  text-white hover:text-indigo-500 hover:pb-4 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out',\n            navitemTopActive: 'px-8 inline-flex items-center text-base font-normal text-white hover:text-indigo-500 hover:pb-4 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out'\n        }}\n    />\n","export default \"data:image/jpeg;base64,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\"","import React from 'react';\nimport { Pattern } from 'pages/Landing'\nimport {PublicNav} from \"./Landing/NavBar/TopNavBar\";\n\nconst NoMatch = () =>\n  <div className='h-screen flex-1 flex flex-col text-white bg-gray-800'>\n      <Pattern />\n      <div class=\"relative\">\n        <PublicNav />\n      </div>\n      <div className=\"flex-1 flex items-center justify-center flex-col\">\n        <div className=\"text-6xl font-bold\">404</div>\n        <div className=\"text-xl\">Page not Found</div>\n        <div className=\"text-xl\">Oops, Something went missing...</div>\n      </div>\n  </div>\n\nconst config = {\n  mainNav: false,\n  component: NoMatch,\n  layout: \"Simple\",\n  layoutSettings: {\n    fixed: true,\n    headerBar: true\n  }\n}\n\nexport default config;\n","\n\nconst AuthConfig = {\n  type: \"ams-manager\",\n  props: {\n    showHeaders: false\n  },\n  wrappers: [\n    // \"ams-manager\",\n    \"ams-redux\",\n    \"ams-router\"\n  ],\n  children: [\n    { type: \"ams-login\" },\n    { type: \"ams-reset-password\" },\n    { type: \"ams-logout\",\n// @props.redirectTo\n// Optional prop. Defaults to \"/\".\n// Redirects user to URL after logging out.\n      // props: { redirectTo: \"/\" }\n    },\n\n    { type: \"ams-signup\",\n// @props.addToGroup\n// Optional prop. Defaults to false.\n// Adds user to group (must have auth level 0 in all projects) instead of creating a request that must be accepted by admin.\n      props: { addToGroup: \"TDS Public\" }\n    },\n    { type: \"ams-verify-request\" }, // This is only required when addToGroup prop is included with ams-signup\n    // { type: \"ams-verify-email\" }, // This is only required when addToGroup prop is not included with ams-signup\n\n    { type: \"ams-set-password\" },\n\n    { type: \"ams-profile\" },\n    { type: \"ams-accept-invite\" },\n\n    { type: \"ams-directory\" },\n\n    { type: \"ams-project-management\"\n// @props.authLevel\n// Optional prop. This prop can be applied to any AMS child.\n// If set, users must have equal or higher authLevel to view this page.\n// Defaults to 5 for \"ams-project-management.\"\n      // props: { authLevel: 5 }\n    }\n  ]\n}\n\nconst auth = {\n  path: \"/auth\",\n  mainNav: false,\n  // layout: 'Simple',\n  layoutSettings: {\n    fixed: true,\n    navBar: 'top',\n    headerBar: false\n  },\n  component: AuthConfig\n}\nexport default auth;\n","import React from \"react\"\n\nimport get from \"lodash.get\"\n\nimport {\n  Select,\n  useTheme,\n  ColorBar,\n  useSidebarContext,\n  DummyLegendTools,\n  useLegendReducer\n} from \"@availabs/avl-components\"\n\nconst LayerPanel = ({ layer, layersLoading, ...rest }) => {\n\n  const [open, setOpen] = React.useState(true),\n    toggleOpen = React.useCallback(e => {\n      setOpen(!open);\n    }, [open, setOpen]);\n\n  const theme = useTheme();\n\n  const filters = React.useMemo(() => {\n    return Object.values(layer.filters)\n      .map(({ name, type, layerId, ...rest }, i) => {\n        switch (type) {\n          default:\n            return (\n              <div className={ `mt-1 ${ theme.bg } p-1 rounded` }\n                key={ `${ layerId }-${ name }` }>\n                <div className=\"text-base leading-4 mb-1\">\n                  { name }\n                </div>\n                <Select { ...rest }/>\n              </div>\n            )\n        }\n      });\n  }, [layer.filters, theme]);\n\n  return (\n    <div className={ `${ theme.menuBg } p-1 mb-1 rounded relative` }>\n\n      <div className={ `\n        absolute top-0 bottom-0 left-0 right-0 z-10 opacity-50\n        ${ Boolean(layersLoading[layer.id]) ? \"block\" : \"hidden\" }\n        ${ theme.sidebarBg }\n      ` }/>\n\n      <LayerHeader layer={ layer } { ...rest }\n        open={ open } toggleOpen={ toggleOpen }/>\n      <div style={ { display: open ? \"block\" : \"none\" } }>\n        { !layer.legend ? null :\n          <LegendControls layer={ layer } { ...rest }/>\n        }\n        { filters }\n      </div>\n    </div>\n  )\n}\nexport default LayerPanel;\n\nexport const Icon = ({ onClick, cursor=\"cursor-pointer\", className=\"\", style={}, children }) => {\n  const theme = useTheme();\n  return (\n    <div onClick={ onClick }\n      className={ `\n        ${ cursor } ${ className } transition h-6 w-6\n        hover:${ theme.menuTextActive } flex items-center justify-center\n      ` }\n      style={ { ...style } }>\n      { children }\n    </div>\n  )\n}\n\nconst LayerHeader = ({ layer, toggleOpen, open, MapActions }) => {\n  const theme = useTheme();\n  return (\n    <div className={ `flex flex-col px-1 ${ theme.bg } rounded` }>\n      <div className=\"flex items-center\">\n        <Icon cursor=\"cursor-move\">\n          <span className=\"fa fa-bars mr-1\"/>\n        </Icon>\n        <div className=\"font-semibold text-lg leading-5\">\n          { layer.name }\n        </div>\n        <div className=\"flex-1 flex justify-end\">\n          { !layer.isDynamic ? null :\n            <Icon onClick={ e => MapActions.removeDynamicLayer(layer) }>\n              <span className=\"fa fa-trash\"/>\n            </Icon>\n          }\n          <Icon onClick={ e => MapActions.removeLayer(layer) }>\n            <span className=\"fa fa-times\"/>\n          </Icon>\n          <Icon onClick={ toggleOpen }>\n            <span className={ `fa fa-sm ${ open ? 'fa-minus' : 'fa-plus' }` }/>\n          </Icon>\n        </div>\n      </div>\n      <div className=\"flex items-center\"\n        style={ { marginTop: \"-0.25rem\" } }>\n        { layer.toolbar.map((tool, i) =>\n            <LayerTool MapActions={ MapActions }\n              layer={ layer } tool={ tool } key={ i }/>\n          )\n        }\n      </div>\n    </div>\n  )\n}\n\nconst LegendControls = ({ layer, MapActions }) => {\n\n  const { extendSidebar, passCompProps, closeExtension, open } = useSidebarContext();\n\n  const { range, type, types } = get(layer, \"legend\", {});\n\n  const [toolState, dispatch] = useLegendReducer(range.length);\n\n  const updateLegend = React.useCallback(update => {\n    MapActions.updateLegend(layer, update);\n  }, [layer, MapActions]);\n\n  const theme = useTheme(),\n    ref = React.useRef();\n\n  const onClick = React.useCallback(e => {\n    if (open === 2) return closeExtension();\n\n    const rect = ref.current.getBoundingClientRect();\n    const compProps = { layer, range, updateLegend, dispatch, toolState };\n    extendSidebar({ Comp: LegendSidebar, compProps, top: `calc(${ rect.top }px - 0.5rem)` });\n  }, [ref, extendSidebar, closeExtension, open, layer, range, updateLegend, dispatch, toolState]);\n\n  React.useEffect(() => {\n    passCompProps({ layer, updateLegend, dispatch, toolState, range, type, types });\n  }, [layer, range, type, types, updateLegend, toolState, passCompProps, dispatch]);\n\n  return (\n    <div ref={ ref } className={ `\n      mt-1 ${ theme.bg } hover:${ theme.accent1 }\n      px-1 pb-1 rounded transition relative cursor-pointer\n    ` } onClick={ onClick }>\n\n      <div>Legend Controls</div>\n      <ColorBar colors={ range } small/>\n\n    </div>\n  )\n}\nconst LegendSidebar = ({ toolState, ...props }) => {\n  const theme = useTheme();\n  return (\n    <div className={ `\n      p-1 rounded-r cursor-auto ${ theme.sidebarBg } w-full\n    ` }>\n      <div className={ `${ theme.menuBg } relative p-1 rounded` }>\n        <div className={ `rounded p-1 ${ theme.bg }` }>\n\n          <DummyLegendTools { ...props } { ...toolState }/>\n\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst checkDefaultTools = tool => {\n  if (typeof tool !== \"string\") return tool;\n\n  switch (tool) {\n    case \"toggle-visibility\":\n      return {\n        tooltip: \"Toogle Visibility\",\n        icon: layer => layer.isVisible ? \"fa-eye\" : \"fa-eye-slash\",\n        action: ({ toggleVisibility }, layer) => toggleVisibility(layer)\n      };\n    default:\n      return {\n        tooltip: `Unknown Tool \"${ tool }\"`,\n        icon: \"fa-thumbs-down\",\n        action: e => {}\n      };\n  }\n}\n\nconst LayerTool = ({ tool, MapActions, layer }) => {\n\n  const Tool = React.useMemo(() => {\n    return checkDefaultTools(tool);\n  }, [tool]);\n\n  const action = React.useCallback(e => {\n    Tool.action(MapActions, layer);\n  }, [Tool, MapActions, layer]);\n\n  const icon = typeof Tool.icon === \"function\" ? Tool.icon(layer) : Tool.icon;\n\n  return (\n    <Icon onClick={ action }>\n      <span className={ `fa fa-sm ${ icon }` }/>\n    </Icon>\n  )\n};\n","import React from \"react\"\n\nimport { Select, useTheme, CollapsibleSidebar } from \"@availabs/avl-components\"\n\nimport LayerPanel from \"./LayerPanel\"\n\nconst LayersTab = ({ inactiveLayers, activeLayers, MapActions, ...rest }) => {\n\n  const theme = useTheme();\n\n  return (\n    <>\n      { !inactiveLayers.length ? null :\n        <div className={ `mb-1 p-1 ${ theme.menuBg } rounded` }>\n          <div className={ `p-1 ${ theme.bg } rounded` }>\n            <Select options={ inactiveLayers }\n              placeholder=\"Add a Layer...\"\n              accessor={ ({ name }) => name }\n              value={ null } multi={ false }\n              searchable={ false }\n              onChange={ MapActions.addLayer }/>\n          </div>\n        </div>\n      }\n      { activeLayers.map(layer =>\n          <LayerPanel key={ layer.id } { ...rest }\n            layer={ layer } MapActions={ MapActions }/>\n        )\n      }\n    </>\n  )\n}\nconst StylesTab = ({ mapStyles, styleIndex, MapActions }) => {\n\n  const theme = useTheme();\n\n  const [loading, setLoading] = React.useState(false);\n  React.useEffect(() => {\n    if (loading) {\n      const done = () => setLoading(false);\n      MapActions.mapboxMap.once(\"style.load\", done);\n      return () => MapActions.mapboxMap.off(\"style.load\", done);\n    }\n  }, [loading, MapActions.mapboxMap]);\n\n  const updateStyle = React.useCallback(index => {\n    setLoading(true);\n    MapActions.setMapStyle(index);\n  }, [MapActions]);\n\n  return (\n    <div className={ `${ theme.menuBg } p-1 rounded` }>\n\n      <div className={ `\n        absolute top-0 bottom-0 left-0 right-0 opacity-50 z-10\n        ${ theme.sidebarBg } ${ loading ? \"block\" : \"hidden\" }\n      ` }/>\n\n      <div className={ `${ theme.bg } p-1 rounded relative` }>\n\n        { mapStyles.map(({ name, imageUrl }, i) =>\n            <div key={ i } className={ `\n              ${ i === 0 ? \"\" : \"mt-1\" } p-1 rounded hover:${ theme.menuTextActive }\n              flex items-center hover:${ theme.accent2 } transition\n              ${ i === styleIndex ?\n                `border-r-4 ${ theme.borderInfo } ${ theme.accent2 }` :\n                `${ theme.accent1 } cursor-pointer`\n              }\n            ` } onClick={ i === styleIndex ? null : e => updateStyle(i) }>\n              <img src={ imageUrl } alt={ name } className=\"rounded\"/>\n              <div className=\"ml-2\">{ name }</div>\n            </div>\n          )\n        }\n\n      </div>\n    </div>\n  )\n}\n\nconst SidebarTabs = {\n  layers: {\n    icon: \"fa fa-layer-group\",\n    Component: LayersTab\n  },\n  styles: {\n    icon: \"fa fa-map\",\n    Component: StylesTab\n  }\n}\n\nconst Sidebar = ({ open, sidebarTabIndex, MapActions, tabs, title, children, ...rest }) => {\n\n  const Tabs = React.useMemo(() => {\n    return tabs.map(tab => {\n      if (tab in SidebarTabs) {\n        return SidebarTabs[tab];\n      }\n      return tab;\n    })\n  }, [tabs]);\n\n  const theme = useTheme();\n\n  return (\n    <CollapsibleSidebar startOpen={ open }\n      placeBeside={ children }>\n\n      <div className={ `p-1 h-full ${ theme.sidebarBg } rounded` }>\n        { !title ? null :\n          <div className=\"text-xl font-bold ml-1\">\n            { title }\n          </div>\n        }\n        <div className=\"flex\">\n          { Tabs.map(({ icon }, i) => (\n              <div key={ i } onClick={ e => MapActions.setSidebarTab(i) }\n                className={ `\n                  p-1 rounded-t-lg mb-1 ${ i > 0 ? \"ml-1\" : \"\" }\n                  ${ theme.menuBg }\n                ` }>\n                <div className={ `\n                    w-10 h-9 hover:${ theme.bg } rounded-t-lg transition\n                    ${ i === sidebarTabIndex ?\n                      `${ theme.bg } ${ theme.menuTextActive }` :\n                      `${ theme.menuBg} cursor-pointer`\n                    } hover:${ theme.menuTextActive }\n                    flex items-center justify-center\n                  ` }>\n                  <span className={ `fa fa-lg ${ icon }` }/>\n                </div>\n              </div>\n            ))\n          }\n        </div>\n        { Tabs.map(({ Component }, i) => (\n            <div key={ i } className=\"relative z-10\"\n              style={ { display: i === sidebarTabIndex ? \"block\" : \"none\" } }>\n              <Component { ...rest } MapActions={ MapActions }/>\n            </div>\n          ))\n        }\n      </div>\n\n    </CollapsibleSidebar>\n  )\n}\nexport default Sidebar;\n","import React from \"react\"\n\nimport { ScalableLoading, useTheme } from \"@availabs/avl-components\"\n\nconst LoadingLayer = ({ layer, progress }) => {\n\n  const theme = useTheme();\n\n  return (\n    <div className={ `\n        ${ theme.sidebarBg } w-72 p-1 mt-2\n        rounded-tl rounded-bl rounded-tr-full rounded-br-full\n      ` }\n      style={ {\n      } }>\n      <div className={ `${ theme.menuBg } p-1 rounded rounded-tr-full rounded-br-full` }>\n        <div className={ `${ theme.bg } p-1 rounded rounded-tr-full rounded-br-full flex` }>\n          <div className=\"flex-1 text-xl font-bold flex items-center\">\n            { layer.name }\n          </div>\n          <div className={ `${ theme.menuTextActive }` }>\n            <ScalableLoading scale={ 0.35 } color=\"currentColor\"/>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default LoadingLayer;\n","import React from \"react\"\n\nimport { useTheme } from \"@availabs/avl-components\"\n\nimport { Icon } from \"./LayerPanel\"\n\nconst getTranslate = (pos, { width, height }) => {\n\n  const gap = 30, padding = 10, { x, y } = pos;\n\n  const yMax = height,\n    yTrans = `max(\n      ${ padding }px,\n      min(calc(${ y }px - 50%), calc(${ yMax - padding }px - 100%))\n    )`;\n  if (x < width * 0.5) {\n    return `translate(\n      ${ x + gap }px,\n      ${ yTrans }\n    )`\n  }\n  return `translate(\n    calc(-100% + ${ x - gap }px),\n    ${ yTrans }\n  )`\n}\n\n// const getPinnedTranslateOld = ({ x, y }) => {\n//   const gap = 30;\n//   return `translate(${ x + gap }px, calc(${ y - 20 }px - 50%))`;\n// }\n\nconst getPinnedTranslate = ({ x, y }, orientation) => {\n\n  const gap = 30;\n\n  const yTrans = `calc(${ y }px - 50%)`;\n\n  if (orientation === \"right\") {\n    return `translate(\n      ${ x + gap }px,\n      ${ yTrans }\n    )`\n  }\n  return `translate(\n    calc(-100% + ${ x - gap }px),\n    ${ yTrans }\n  )`\n}\nconst getTransform = ({ x }, orientation) => {\n  if (orientation === \"right\") {\n    return \"translate(-50%, -50%) rotate(45deg) skew(-15deg, -15deg)\"\n  }\n  return \"translate(50%, -50%) rotate(45deg) skew(-15deg, -15deg)\"\n}\n\nconst RemoveButton = ({ orientation, children,  }) => {\n  const theme = useTheme();\n  return (\n    <div style={ {\n        transform: orientation === \"left\" ?\n          \"translate(-1rem, -1rem)\" : \"translate(1rem, -1rem)\"\n      } }\n      className={ `\n        ${ theme.bg }\n        rounded absolute inline-block top-0 z-20\n        ${ orientation === \"left\" ? \"left-0\" : \"right-0\" }\n      ` }>\n      { children }\n    </div>\n  )\n}\n\nexport const PinnedHoverComp = ({ children, remove, id, project, lngLat, width }) => {\n\n  const pos = project(lngLat);\n\n  const orientation = React.useRef(pos.x < width * 0.5 ? \"right\" : \"left\");\n\n  const style = React.useMemo(() => {\n    return {\n      top: \"50%\",\n      transform: getTransform(pos, orientation.current)\n    };\n  }, [pos]);\n\n  const theme = useTheme();\n\n  return (\n    <div className={ `\n        absolute top-0 left-0 z-20 inline-block\n        rounded whitespace-nowrap hover-comp\n        pointer-events-auto\n        p-1 rounded ${ theme.sidebarBg }\n      ` }\n      style={ {\n        transform: getPinnedTranslate(pos, orientation.current),\n        boxShadow: \"2px 2px 8px 0px rgba(0, 0, 0, 0.75)\"\n      } }>\n\n      <div className={ `\n          absolute w-6 h-6 ${ theme.sidebarBg } rounded-bl rounded-tr\n          ${ orientation.current === \"left\" ? \"right-0\" : \"left-0\" }\n        ` }\n        style={ style }/>\n      <div className={ `${ theme.menuBg } p-1 rounded relative z-20` }>\n\n        <RemoveButton orientation={ orientation.current }>\n          <Icon onClick={ e => remove(id) }>\n            <span className=\"fa fa-times\"/>\n          </Icon>\n        </RemoveButton>\n\n\n          { children }\n\n      </div>\n    </div>\n  )\n}\n\nexport const HoverCompContainer = ({ show, children, lngLat, project, ...rest }) => {\n  const theme = useTheme();\n\n  const pos = project(lngLat);\n\n  return (\n    <div className={ `\n        absolute top-0 left-0 z-20\n        rounded whitespace-nowrap hover-comp\n        pointer-events-none\n        p-1 rounded ${ theme.sidebarBg }\n      ` }\n      style={ {\n        display: show ? \"inline-block\" : \"none\",\n        transform: getTranslate(pos, rest),\n        boxShadow: \"2px 2px 8px 0px rgba(0, 0, 0, 0.75)\",\n        // transition: \"transform 0.15s ease-out\"\n      } }>\n      <div className={ `${ theme.menuBg } p-1 rounded relative z-20` }>\n\n        { children }\n\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\n\nimport get from \"lodash.get\"\n\nimport { useTheme, Legend } from \"@availabs/avl-components\"\n\nimport { Icon } from \"./LayerPanel\"\n\nconst InfoBoxContainer = ({ activeLayers, width = 320, padding = 8, MapActions, ...props }) => {\n\n  const [node, setNode] = React.useState();\n\n  const [legendLayer, infoBoxLayers, infoBoxWidth] = activeLayers.reduce((a, c) => {\n      if (c.legend) {\n        a[0] = c;\n      }\n      if (c.infoBoxes.reduce((aa, cc) => {\n            let show = Boolean(cc.show);\n            if (typeof cc.show === \"function\") {\n              show = cc.show(c);\n            }\n            return aa || show;\n          }, false)\n      ) {\n        a[1].push(c);\n        a[2] = Math.max(a[2],\n          c.infoBoxes.reduce((aa, cc) => Math.max(aa, get(cc, \"width\", 0)), 0)\n        );\n      }\n      return a;\n    }, [null, [], width]);\n\n  const theme = useTheme();\n\n  return (\n    <div ref={ setNode }\n      className={ `\n        absolute right-0 top-0 bottom-0\n        flex flex-col items-end z-30\n        pointer-events-none\n      ` }\n      style={ { padding: `${ padding }px` } }>\n\n      { !legendLayer ? null :\n        legendLayer.legend.show ?\n        <LegendContainer { ...legendLayer.legend }\n          MapActions={ MapActions } layer={ legendLayer }\n          padding={ padding } infoBoxWidth={ infoBoxWidth }/>\n        : null\n      }\n\n      { !infoBoxLayers.length ? null :\n        <div className={ `\n            ${ theme.sidebarBg } p-1 rounded\n            scrollbar-sm overflow-y-auto overflow-x-visible\n            pointer-events-auto\n          ` }\n          style={ {\n            width: `${ infoBoxWidth - padding * 2 }px`\n          } }>\n          { infoBoxLayers.map((layer, i) =>\n              <div key={ layer.id }\n                className={ `\n                  ${ i === 0 ? \"\" : \"mt-1\" }\n                  ${ theme.menuBg } p-1 rounded\n                ` }>\n                { layer.infoBoxes\n                    .filter(({ show }) => {\n                      let bool = Boolean(show);\n                      if (typeof show === \"function\") {\n                        bool = show(layer);\n                      }\n                      return bool;\n                    })\n                    .map((box, ii) =>\n                      <InfoBox key={ ii } { ...props } { ...box }\n                        index={ ii } layer={ layer }\n                        MapActions={ MapActions }\n                        activeLayers={ activeLayers }\n                        containerNode={ node }/>\n                    )\n                }\n              </div>\n            )\n          }\n        </div>\n      }\n\n    </div>\n  )\n}\nexport default InfoBoxContainer;\n\nconst InfoBox = ({ layer, Header, Component, index, MapActions, open = true, ...props }) => {\n\n  const [isOpen, setOpen] = React.useState(open);\n\n  const theme = useTheme();\n\n  return (\n    <div className={ `\n      ${ theme.bg } px-1 ${ isOpen ? \"pb-1\" : \"\" } rounded\n      ${ index === 0 ? \"\" : \"mt-1\" }\n    ` }>\n      { !Header ? <div className=\"pt-1\"/> :\n          <div className={ `\n            rounded text-lg font-bold\n            flex items-center\n          ` }>\n            <div className={ `\n              flex-1 ${ isOpen ? \"opacity-100\" : \"opacity-50\" } transition\n            ` }>\n              { typeof Header === \"function\" ?\n                <Header layer={ layer }\n                  MapActions={ MapActions }/> :\n                Header\n              }\n            </div>\n            <div className=\"text-base\">\n              <Icon onClick={ e => setOpen(!isOpen) }>\n                <span className={ `fa fa-${ isOpen ? \"minus\" : \"plus\" }` }/>\n              </Icon>\n            </div>\n        </div>\n      }\n      { !Component || !isOpen ? null :\n        <div className={ `\n          ${ theme.accent1 } p-1 rounded\n        ` }>\n          { typeof Component === \"function\" ?\n            <Component layer={ layer }\n              MapActions={ MapActions }\n              { ...props }/> :\n            Component\n          }\n        </div>\n      }\n    </div>\n  )\n}\n\nconst LegendContainer = ({ infoBoxWidth, padding, width = 420, Title, MapActions, layer, ...props }) => {\n\n  const theme = useTheme();\n\n  return (\n    <div className={ `\n      ${ theme.sidebarBg } p-1 rounded pointer-events-auto\n    ` }\n    style={ {\n      width: `${ Math.max(infoBoxWidth, width) - padding * 2 }px`,\n      marginBottom: \"-0.25rem\"\n    } }>\n      <div className={ `${ theme.menuBg } p-1 rounded` }>\n        <div className={ `${ theme.bg } px-1 rounded` }>\n          { Title ?\n            <div className=\"font-bold text-xl\">\n              { typeof Title === \"function\" ?\n                <Title layer={ layer }\n                  MapActions={ MapActions }/> :\n                Title\n              }\n            </div> :\n            <div className=\"pt-1\"/>\n          }\n          <Legend { ...props }/>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\n\nimport { useTheme, Draggable } from \"@availabs/avl-components\"\n\nconst DraggableModal = ({ Header,\n                          Component,\n                          layer,\n                          MapActions,\n                          modalData,\n                          activeLayers,\n                          layersLoading,\n                          loadingLayers,\n                          inactiveLayers,\n                          ...props }) => {\n\n  const theme = useTheme();\n\n  const { layerId, modalKey, zIndex } = modalData;\n\n  return (\n    <Draggable { ...props } className=\"pointer-events-auto\"\n      onClick={ e => MapActions.bringModalToFront(layerId, modalKey) }\n      onDragStart={ e => MapActions.bringModalToFront(layerId, modalKey) }\n      style={ { zIndex } }\n      toolbar={ [\n        { icon: \"fa-times\",\n          onClick: e => MapActions.closeModal(layerId, modalKey)\n        }\n      ] }>\n      <div className=\"m-1\">\n        { !Header ? null :\n          <div className=\"font-bold text-xl ml-2\">\n            { typeof Header === \"function\" ?\n              <Header layer={ layer } MapActions={ MapActions }/> :\n              Header\n            }\n          </div>\n        }\n        <div className={ `p-1 rounded ${ theme.menuBg }` }>\n          <div className={ `p-1 rounded ${ theme.bg }` }>\n            { <Component layer={ layer }\n                MapActions={ MapActions }\n                activeLayers={ activeLayers }\n                layersLoading={ layersLoading }\n                loadingLayers={ loadingLayers }\n                inactiveLayers={ inactiveLayers }/>\n            }\n          </div>\n        </div>\n      </div>\n    </Draggable>\n  )\n}\nexport default DraggableModal;\n","import React from \"react\"\n\nimport { useTheme } from \"@availabs/avl-components\"\n\nconst MapAction = ({ icon, tooltip, actionFunc,\n                      MapActions, layer,\n                      ...rest }) => {\n  const theme = useTheme();\n  return (\n    <div className={ `${ theme.sidebarBg } p-1 rounded-2xl mb-2` }>\n      <div className={ `${ theme.menuBg } p-1 rounded-2xl` }>\n        <div className={ `\n            ${ theme.bg } hover:${ theme.accent1 }\n            ${ theme.menuText } ${ theme.menuTextHover }\n            w-10 h-10 rounded-2xl cursor-pointer text-lg\n            flex items-center justify-center\n          ` }\n          onClick={ e => actionFunc(MapActions, layer, rest) }>\n          <span className={ `fa ${ icon }` }/>\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default MapAction;\n","import React from \"react\"\n\nimport mapboxgl from \"mapbox-gl\"\n\nimport get from \"lodash.get\"\nimport styled from \"styled-components\"\n\nimport { useFalcor, useSetSize } from \"@availabs/avl-components\"\n\nimport Sidebar from \"./components/Sidebar\"\nimport LoadingLayer from \"./components/LoadingLayer\"\nimport {\n  HoverCompContainer,\n  PinnedHoverComp\n} from \"./components/HoverCompContainer\"\nimport InfoBoxes from \"./components/InfoBoxContainer\"\nimport DraggableModal from \"./components/DraggableModal\"\nimport MapAction from \"./components/MapAction\"\n\nexport const DefaultStyles = [\n  { name: \"Dark\",\n    style: 'mapbox://styles/am3081/ckm85o7hq6d8817nr0y6ute5v' },\n  { name: \"Light\",\n    style: 'mapbox://styles/am3081/ckm86j4bw11tj18o5zf8y9pou' },\n  { name: \"Satellite\",\n    style: 'mapbox://styles/am3081/cjya6wla3011q1ct52qjcatxg' },\n  { name: \"Satellite Streets\",\n    style: 'mapbox://styles/am3081/cjya70364016g1cpmbetipc8u' }\n]\n\nconst DefaultMapOptions = {\n  center: [-74.180647, 42.58],\n  minZoom: 2,\n  zoom: 10,\n  preserveDrawingBuffer: true,\n  // style: \"mapbox://styles/am3081/cjqqukuqs29222sqwaabcjy29\",\n  styles: DefaultStyles,\n  attributionControl: false,\n  logoPosition: \"bottom-right\"\n}\n\nlet idCounter = 0;\nconst getUniqueId = () => `unique-id-${ ++idCounter }`;\n\nconst DefaultStaticOptions = {\n  size: [80, 50],\n  center: [-74.180647, 42.58],\n  zoom: 2.5\n}\nconst getStaticImageUrl = (style, options = {}) => {\n  const {\n    size, center, zoom\n  } = { ...DefaultStaticOptions, ...options };\n  return `https://api.mapbox.com/styles/v1/${ style.slice(16) }/static/` +\n    `${ center },${ zoom }/${ size.join(\"x\") }` +\n    `?attribution=false&logo=false&access_token=${ mapboxgl.accessToken }`\n}\n\nconst InitialState = {\n  map: null,\n  initializedLayers: [],\n  activeLayers: [],\n  dynamicLayers: [],\n  layersLoading: {},\n  hoverData: {\n    data: new Map(),\n    pos: [0, 0],\n    lngLat: {}\n  },\n  pinnedHoverComps: [],\n  pinnedMapMarkers: [],\n  mapStyles: [],\n  styleIndex: 0,\n  sidebarTabIndex: 0,\n  modalData: [],\n  layerStates: {}\n}\nconst Reducer = (state, action) => {\n  const { type, ...payload } = action;\n  switch (type) {\n    case \"init-layer\":\n      return {\n        ...state,\n        initializedLayers: [\n          ...state.initializedLayers,\n          payload.layer.id\n        ]\n        // activeLayers: [\n        //   payload.layer.id,\n        //   ...state.activeLayers\n        // ],\n        // layerStates: {\n        //   ...state.layerStates,\n        //   [payload.layer.id]: payload.layer.state\n        // }\n      };\n    case \"loading-start\":\n      return {\n        ...state,\n        layersLoading: {\n          ...state.layersLoading,\n          [payload.layerId]: get(state, [\"layersLoading\", payload.layerId], 0) + 1\n        }\n      };\n    case \"loading-stop\":\n      return {\n        ...state,\n        // activeLayers: [...state.activeLayers],\n        layersLoading: {\n          ...state.layersLoading,\n          [payload.layerId]: Math.max(0, state.layersLoading[payload.layerId] - 1)\n        }\n      };\n    case \"activate-layer\":\n      return {\n        ...state,\n        activeLayers: [\n          payload.layer.id,\n          ...state.activeLayers\n        ],\n        layerStates: {\n          ...state.layerStates,\n          [payload.layer.id]: payload.layer.state\n        }\n      };\n    case \"deactivate-layer\":\n      return {\n        ...state,\n        activeLayers: state.activeLayers.filter(id => id !== payload.layerId)\n      };\n    case \"hover-layer-move\": {\n      const { data, layer, HoverComp, ...rest } = payload;\n      state.hoverData.data.set(layer.id, { data, HoverComp, layer });\n      return {\n        ...state,\n        hoverData: {\n          ...state.hoverData,\n          ...rest\n        }\n      }\n    }\n    case \"hover-layer-leave\": {\n      const { layer } = payload;\n      state.hoverData.data.delete(layer.id);\n      return {\n        ...state,\n        hoverData: {\n          ...state.hoverData\n        }\n      }\n    }\n    // case \"update-hover\":\n    //   return {\n    //     ...state,\n    //     hoverData: {\n    //       ...state.hoverData,\n    //       ...payload.hoverData\n    //     }\n    //   };\n    case \"pin-hover-comp\":\n      if (!state.hoverData.data.size) return state;\n\n      return {\n        ...state,\n        pinnedHoverComps: [\n          ...state.pinnedHoverComps,\n          { id: getUniqueId(),\n            HoverComps: [...state.hoverData.data.values()],\n            ...payload,\n            // marker: new mapboxgl.Marker()\n              // .setLngLat(payload.lngLat)\n              // .addTo(state.map)\n          }\n        ]\n      };\n    case \"remove-pinned\":\n      return {\n        ...state,\n        pinnedHoverComps: state.pinnedHoverComps\n          .filter(phc => {\n            if (phc.id !== payload.id) return true;\n            phc.marker.remove();\n            return false;\n          })\n      };\n    case \"add-dynamic-layer\":\n      return {\n        ...state,\n        dynamicLayers: [\n          ...state.dynamicLayers,\n          payload.layer\n        ]\n      }\n    case \"remove-dynamic-layer\":\n      return {\n        ...state,\n        dynamicLayers: state.dynamicLayers.filter(({ id }) => id !== payload.layer.id)\n      }\n    case \"show-modal\": {\n      const { layerId, modalKey } = payload;\n      if (state.modalData.reduce((a, c) => (\n        a || ((c.layerId === layerId) && (c.modalKey === modalKey))\n      ), false)) return state;\n      return {\n        ...state,\n        modalData: [\n          ...state.modalData,\n          { layerId, modalKey, zIndex: 0 }\n        ]\n      }\n    }\n    case \"bring-modal-to-front\": {\n      const { layerId, modalKey } = payload;\n      return {\n        ...state,\n        modalData: state.modalData.map(md => ({\n          ...md, zIndex: ((md.layerId === layerId) && (md.modalKey === modalKey)) ? 10 : 0\n        }))\n      }\n    };\n    // case \"update-modal-data\": {\n    //   const { layerId, modalKey, data } = payload;\n    //   return {\n    //     ...state,\n    //     modalData: state.modalData.map(md => {\n    //       if ((md.layerId === layerId) && (md.modalKey === modalKey)) {\n    //         return { ...md, data };\n    //       }\n    //       return md;\n    //     })\n    //   }\n    // }\n    case \"close-modal\":\n      return {\n        ...state,\n        modalData: state.modalData.filter(({ layerId, modalKey }) =>\n          !((layerId === payload.layerId) && (modalKey === payload.modalKey))\n        )\n      }\n    case \"layer-update\": {\n      const { layer, newState } = payload;\n      return {\n        ...state,\n        layerStates: {\n          ...state.layerStates,\n          [layer.id]: newState\n        }\n      }\n    }\n    case \"set-map-style\":\n    case \"switch-tab\":\n    case \"map-loaded\":\n    case \"update-state\":\n      return {\n        ...state,\n        ...payload\n      };\n    default:\n      return state;\n  }\n}\n\nconst EmptyArray = [];\nconst EmptyObject = {};\n\nconst DefaultSidebar = {\n  tabs: [\"layers\", \"styles\"],\n  title: \"\"\n}\n\n// const toolbarFuncRunner = args => {\n//   if (!args.length) return [];\n//   const [arg, ...rest] = args;\n//   if (typeof arg === \"function\") {\n//     return [arg(...toolbarFuncRunner(rest))];\n//   }\n//   return [arg, ...toolbarFuncRunner(rest)];\n// }\n// const toolbarFuncArgs = ({ action }, layer, MapActions, map) => (\n//   action.map(action => {\n//     if (typeof action === \"function\") return action;\n//     if (typeof action === \"string\") {\n//       const [arg1, arg2] = action.split(\".\");\n//       if (arg1 === \"map\") {\n//         return arg2 ? MapActions[arg2] : map;\n//       }\n//       else if ((arg1 === \"this\") && arg2) {\n//         return layer[arg2].bind(layer);\n//       }\n//     }\n//     return action;\n//   })\n// )\n\nconst AvlMap = props => {\n\n  const id = React.useMemo(() => {\n    return props.id || getUniqueId();\n  }, [props.id]);\n\n  const {\n    accessToken,\n    mapOptions = EmptyObject,\n    layers = EmptyArray,\n    sidebar = EmptyObject,\n    layerProps = EmptyObject,\n    // singleLayer = false\n  } = props;\n\n  const { falcor, falcorCache } = useFalcor();\n\n  const [state, dispatch] = React.useReducer(Reducer, InitialState);\n\n  const updateHover = React.useCallback(hoverData => {\n    dispatch(hoverData);\n  }, []);\n\n  const projectLngLat = React.useCallback(lngLat => {\n    return state.map.project(lngLat);\n  }, [state.map]);\n\n  const updateFilter = React.useCallback((layer, filterName, value) => {\n    if (!get(layer, [\"filters\", filterName], null)) return;\n\n    dispatch({ type: \"loading-start\", layerId: layer.id });\n\n    const prevValue = layer.filters[filterName].value;\n\n    layer.filters = {\n      ...layer.filters,\n      [filterName]: {\n        ...layer.filters[filterName],\n        prevValue,\n        value\n      }\n    };\n\n    Promise.resolve(layer.onFilterChange(filterName, value, prevValue))\n      .then(() => layer.fetchData(falcor))\n      .then(() => layer.render(state.map, falcor))\n      .then(() => {\n        dispatch({ type: \"loading-stop\", layerId: layer.id });\n      });\n\n  }, [state.map, falcor]);\n\n  const updateLegend = React.useCallback((layer, update) => {\n    if (!get(layer, \"legend\", null)) return;\n\n    layer.legend = {\n      ...layer.legend,\n      ...update\n    }\n    layer.render(state.map, falcor);\n\n    dispatch({ type: \"update-state\" });\n  }, [state.map, falcor])\n\n  const addDynamicLayer = React.useCallback(layer => {\n\n    layer.isDynamic = true;\n\n    dispatch({\n      type: \"add-dynamic-layer\",\n      layer\n    });\n  }, []);\n  const removeDynamicLayer = React.useCallback(layer => {\n\n    layer._onRemove(state.map);\n\n    dispatch({\n      type: \"remove-dynamic-layer\",\n      layer\n    });\n  }, [state.map]);\n  const toggleVisibility = React.useCallback(layer => {\n\n    layer.toggleVisibility(state.map);\n\n    dispatch({ type: \"update-state\" });\n  }, [state.map]);\n  const addLayer = React.useCallback(layer => {\n\n    layer._onAdd(state.map, falcor, updateHover)\n      .then(() => layer.render(state.map, falcor));\n\n    dispatch({\n      type: \"activate-layer\",\n      layer\n    });\n  }, [state.map, falcor, updateHover/*, singleLayer*/]);\n  const removeLayer = React.useCallback(layer => {\n\n    layer._onRemove(state.map);\n\n    dispatch({\n      type: \"deactivate-layer\",\n      layerId: layer.id\n    });\n  }, [state.map]);\n  const setSidebarTab = React.useCallback(sidebarTabIndex => {\n    dispatch({\n      type: \"switch-tab\",\n      sidebarTabIndex\n    });\n  }, []);\n\n  const showModal = React.useCallback((layerId, modalKey) => {\n    dispatch({\n      type: \"show-modal\",\n      layerId,\n      modalKey\n    });\n  }, []);\n  const closeModal = React.useCallback((layerId, modalKey) => {\n    dispatch({\n      type: \"close-modal\",\n      layerId,\n      modalKey\n    });\n  }, []);\n  const bringModalToFront = React.useCallback((layerId, modalKey) => {\n    dispatch({\n      type: \"bring-modal-to-front\",\n      layerId,\n      modalKey\n    });\n  }, []);\n\n  const removePinnedHoverComp = React.useCallback(id => {\n    dispatch({\n      type: \"remove-pinned\",\n      id\n    });\n  }, []);\n  const addPinnedHoverComp = React.useCallback(({ lngLat, hoverData, id }) => {\n    const marker = new mapboxgl.Marker()\n      .setLngLat(lngLat)\n      .addTo(state.map);\n    dispatch({\n      type: \"pin-hover-comp\",\n      marker,\n      lngLat\n    });\n  }, [state.map]);\n\n  const saveMapAsImage = React.useCallback((fileName = \"map.png\") => {\n    const canvas = state.map.getCanvas();\n    const a = document.createElement(\"a\");\n    a.download = fileName;\n    a.href = canvas.toDataURL();\n    a.click();\n  }, [state.map]);\n\n// LOAD MAPBOX GL MAP\n  React.useEffect(() => {\n    if (!accessToken) return;\n\n    mapboxgl.accessToken = accessToken;\n\n    const regex = /^mapbox:\\/\\/styles\\//;\n\n    const {\n      style, styles, ...Options\n    } = { ...DefaultMapOptions, ...mapOptions };\n\n    const mapStyles = styles.map(style => ({\n      ...style, imageUrl: getStaticImageUrl(style.style, { center: Options.center })\n    }));\n\n    if (regex.test(style)) {\n      if (!styles.reduce((a, c) => a || c.style === style, false)) {\n        mapStyles.unshift({\n          name: \"Unspecified Style\",\n          style,\n          imageUrl: getStaticImageUrl(style, Options)\n        })\n      }\n    }\n\n    const map = new mapboxgl.Map({\n      container: id,\n      ...Options,\n      style: mapStyles[0].style\n    });\n\n    map.on(\"move\", e => {\n      dispatch({ type: \"update-state\", mapMoved: performance.now() });\n    });\n\n    map.once(\"load\", e => {\n      dispatch({ type: \"map-loaded\", map, mapStyles });\n    });\n\n    return () => map.remove();\n\n  }, [accessToken, id, mapOptions]);\n\n// INITIALIZE LAYERS\n  React.useEffect(() => {\n    if (!state.map) return;\n\n    [...layers,\n      ...state.dynamicLayers\n    ].filter(({ id }) => !state.initializedLayers.includes(id)).reverse()\n      .reduce((promise, layer) => {\n\n        dispatch({ type: \"init-layer\", layer });\n\n        layer.dispatchUpdate = (layer, newState) => {\n          dispatch({\n            type: \"layer-update\",\n            newState,\n            layer\n          })\n        };\n\n        for (const filterName in layer.filters) {\n          layer.filters[filterName].onChange = v => updateFilter(layer, filterName, v);\n        }\n\n        layer.toolbar.forEach(tool => {\n          if (typeof tool.action === \"function\") {\n            tool.actionFunc = tool.action.bind(layer);\n          }\n        })\n\n        layer.mapActions.forEach(action => {\n          action.actionFunc = action.action.bind(layer);\n        })\n\n        dispatch({ type: \"loading-start\", layerId: layer.id });\n\n        return promise.then(() => layer._init(state.map, falcor))\n          .then(() => {\n            if (layer.setActive) {\n              return layer.fetchData(falcor)\n                .then(() => layer._onAdd(state.map, falcor, updateHover))\n                .then(() => layer.render(state.map, falcor))\n                .then(() => dispatch({ type: \"activate-layer\", layer }));\n            }\n          })\n          .then(() => {\n            dispatch({ type: \"loading-stop\", layerId: layer.id });\n          });\n      }, Promise.resolve());\n  }, [state.map, state.dynamicLayers, falcor, layers, updateFilter, updateHover, state.initializedLayers]);\n\n  const pinHoverComp = React.useCallback(({ lngLat }) => {\n    const marker = new mapboxgl.Marker()\n      .setLngLat(lngLat)\n      .addTo(state.map);\n    dispatch({\n      type: \"pin-hover-comp\",\n      marker,\n      lngLat\n    });\n  }, [state.map]);\n\n  const hovering = Boolean(state.hoverData.data.size);\n\n// APPLY CLICK LISTENER TO MAP TO ALLOW PINNED HOVER COMPS\n  React.useEffect(() => {\n    if (!hovering) return;\n\n    state.map.on(\"click\", pinHoverComp);\n\n    return () => state.map.off(\"click\", pinHoverComp);\n  }, [state.map, pinHoverComp, hovering]);\n\n  const loadingLayers = React.useMemo(() => {\n    return [\n      ...layers,\n      ...state.dynamicLayers\n    ].filter(layer => Boolean(state.layersLoading[layer.id]));\n  }, [layers, state.dynamicLayers, state.layersLoading]);\n\n  const { HoverComps, ...hoverData } = React.useMemo(() => {\n    const HoverComps = [...state.hoverData.data.values()];\n    return { ...state.hoverData, show: Boolean(HoverComps.length), HoverComps };\n  }, [state.hoverData]);\n\n// DETERMINE ACTIVE AND INACTIVE LAYERS\n  const [activeLayers, inactiveLayers] = React.useMemo(() => {\n    const result = [\n      ...layers,\n      ...state.dynamicLayers\n    ].filter(({ id }) => state.initializedLayers.includes(id))\n      .reduce((a, c) => {\n        if (state.activeLayers.includes(c.id)) {\n          a[0].push(c);\n        }\n        else {\n          a[1].push(c);\n        }\n        return a;\n      }, [[], []]);\n    const sortOrder = state.activeLayers.reduce((a, c, i) => {\n      a[c] = i;\n      return a;\n    }, {});\n    result[0].sort((a, b) => sortOrder[a.id] - sortOrder[b.id]);\n    return result;\n  }, [layers, state.dynamicLayers, state.initializedLayers, state.activeLayers]);\n\n  const setMapStyle = React.useCallback(styleIndex => {\n    state.map.once('style.load', e => {\n      activeLayers.slice().reverse().reduce((promise, layer) => {\n        return promise.then(() =>\n          layer.onMapStyleChange(state.map, falcor, updateHover)\n        );\n      }, Promise.resolve());\n    });\n    activeLayers.forEach(layer => {\n      layer._onRemove(state.map);\n    });\n    state.map.setStyle(state.mapStyles[styleIndex].style);\n    dispatch({\n      type: \"set-map-style\",\n      styleIndex\n    });\n  }, [state.map, state.mapStyles, activeLayers, updateHover, falcor]);\n\n  const MapActions = React.useMemo(() => ({\n    mapboxMap: state.map,\n    layerStates: state.layerStates,\n    toggleVisibility,\n    addLayer,\n    removeLayer,\n    addDynamicLayer,\n    removeDynamicLayer,\n    updateLegend,\n    setSidebarTab,\n    setMapStyle,\n    showModal,\n    closeModal,\n    updateFilter,\n    removePinnedHoverComp,\n    addPinnedHoverComp,\n    bringModalToFront,\n    projectLngLat,\n    saveMapAsImage\n  }), [\n    state.map, state.layerStates, toggleVisibility,\n    addLayer, removeLayer, addDynamicLayer, removeDynamicLayer,\n    updateLegend, setSidebarTab, setMapStyle,\n    showModal, closeModal, updateFilter,\n    removePinnedHoverComp, addPinnedHoverComp,\n    bringModalToFront, projectLngLat, saveMapAsImage\n  ]);\n\n// SEND PROPS TO ACTIVE LAYERS\n  React.useEffect(() => {\n    activeLayers.forEach(layer => {\n      const props = get(layerProps, layer.id, { falcorCache });\n      layer.receiveProps(props, state.map, falcor, MapActions);\n    });\n  }, [state.map, falcor, falcorCache, activeLayers, layerProps, MapActions]);\n\n  const ref = React.useRef(null),\n    size = useSetSize(ref);\n\n  const Modals = React.useMemo(() => {\n    return state.modalData.reduce((a, md) => {\n      const { modal, layer } = activeLayers\n        .reduce((a, c) => {\n          return c.id === md.layerId ?\n            { modal: get(c, [\"modals\", md.modalKey]), layer: c } : a; }, {});\n      if (modal) {\n        a.push({ ...modal, modalData: md, layer });\n      }\n      return a;\n    }, []);\n  }, [activeLayers, state.modalData]);\n\n  return (\n    <MapContainer ref={ ref } className=\"w-full h-full relative focus:outline-none\">\n\n      <div id={ id } className=\"w-full h-full relative\"/>\n\n      <Sidebar { ...DefaultSidebar } { ...sidebar }\n        sidebarTabIndex={ state.sidebarTabIndex }\n        mapStyles={ state.mapStyles }\n        styleIndex={ state.styleIndex }\n        layersLoading={ state.layersLoading }\n        inactiveLayers={ inactiveLayers }\n        activeLayers={ activeLayers }\n        loadingLayers={ loadingLayers }\n        MapActions={ MapActions }>\n\n        <div className=\"absolute bottom-0\">\n          { loadingLayers.map(layer => (\n              <LoadingLayer key={ layer.id } layer={ layer }/>\n            ))\n          }\n        </div>\n\n        <div className=\"absolute top-0\">\n          { activeLayers.reduce((a, c, i ) => {\n              const actions = get(c, \"mapActions\", [])\n                .map(action => ({ action, layer: c }))\n              return [...a, ...actions];\n            }, [])\n            .map(({ action, layer }, i) => (\n              <MapAction key={ `${ layer.id }-${ i }` }\n                layer={ layer } { ...action }\n                MapActions={ MapActions }\n                layersLoading={ state.layersLoading }\n                inactiveLayers={ inactiveLayers }\n                activeLayers={ activeLayers }\n                loadingLayers={ loadingLayers }/>\n            ))\n          }\n        </div>\n\n      </Sidebar>\n\n      <InfoBoxes activeLayers={ activeLayers }\n        layersLoading={ state.layersLoading }\n        loadingLayers={ loadingLayers }\n        inactiveLayers={ inactiveLayers }\n        MapActions={ MapActions }/>\n\n      <div className={ `\n        absolute top-0 bottom-0 left-0 right-0 z-50\n        pointer-events-none overflow-hidden\n      ` }>\n\n        { Modals.map(({ modalData, ...data }) => (\n            <DraggableModal key={ `${ modalData.layerId }-${ modalData.modalKey }` }\n              { ...data } bounds={ size }\n              modalData={ modalData }\n              MapActions={ MapActions }\n              activeLayers={ activeLayers }\n              layersLoading={ state.layersLoading }\n              loadingLayers={ loadingLayers }\n              inactiveLayers={ inactiveLayers }/>\n          ))\n        }\n\n        { state.pinnedHoverComps.map(({ HoverComps, data, id, ...hoverData }) => (\n            <PinnedHoverComp { ...hoverData } { ...size }\n              remove={ removePinnedHoverComp }\n              project={ projectLngLat }\n              key={ id } id={ id }>\n              { HoverComps.map(({ HoverComp, data, layer }, i) =>\n                  <div key={ layer.id }\n                    className={ `${ i > 0 ? \"mt-1\" : \"\" } relative` }>\n                    <HoverComp key={ layer.id } layer={ layer } data={ data }\n                      activeLayers={ activeLayers }\n                      layersLoading={ state.layersLoading }\n                      loadingLayers={ loadingLayers }\n                      inactiveLayers={ inactiveLayers }\n                      MapActions={ MapActions }\n                      pinned={ true }/>\n                  </div>\n                )\n              }\n            </PinnedHoverComp>\n          ))\n        }\n\n        { !Boolean(state.hoverData.data.size) ? null :\n          <HoverCompContainer { ...hoverData } { ...size }\n            project={ projectLngLat }>\n            { HoverComps.map(({ HoverComp, data, layer }, i) => (\n                <div key={ layer.id }\n                  className={ `${ i > 0 ? \"mt-1\" : \"\" } relative` }>\n                  <HoverComp layer={ layer } data={ data }\n                    activeLayers={ activeLayers }\n                    layersLoading={ state.layersLoading }\n                    loadingLayers={ loadingLayers }\n                    inactiveLayers={ inactiveLayers }\n                    MapActions={ MapActions }\n                    pinned={ false }/>\n                </div>\n              ))\n            }\n          </HoverCompContainer>\n        }\n\n      </div>\n\n    </MapContainer>\n  )\n}\nexport { AvlMap };\n\nconst MapContainer = styled.div`\n  .mapboxgl-map canvas {\n    display: block;\n  }\n  .mapboxgl-map canvas:focus {\n    outline: none;\n  }\n`\n","import React from \"react\"\n\nimport { useTheme } from \"@availabs/avl-components\"\n\nconst DefaultHoverComp = ({ data, layer }) => {\n  const theme = useTheme();\n  return (\n    <div className={ `${ theme.bg } rounded relative px-1` }>\n      { data.map((row, i) =>\n          <div key={ i } className=\"flex\">\n            { row.map((d, ii) =>\n                <div key={ ii }\n                  className={ `\n                    ${ ii === 0 ? \"flex-1 font-bold\" : \"flex-0\" }\n                    ${ row.length > 1 && ii === 0 ? \"mr-4\" : \"\" }\n                    ${ row.length === 1 && ii === 0 ? `border-b-2 text-lg ${ i > 0 ? \"mt-1\" : \"\" }` : \"\" }\n                  ` }>\n                  { d }\n                </div>\n              )\n            }\n          </div>\n        )\n      }\n    </div>\n  )\n}\nexport default DefaultHoverComp;\n","import mapboxgl from \"mapbox-gl\"\n\nimport { hasValue } from \"@availabs/avl-components\"\n\nimport DefaultHoverComp from \"./components/DefaultHoverComp\"\n\nimport get from \"lodash.get\"\n\nlet id = -1;\nconst getLayerId = () => `avl-layer-${ ++id }`;\n\nconst DefaultCallback = () => null;\n\nconst DefaultOptions = {\n  setActive: true,\n  isDynamic: false,\n  filters: {},\n  modals: {},\n  mapActions: [],\n  sources: [],\n  layers: [],\n  isVisible: true,\n  toolbar: [\"toggleVisibility\"],\n  legend: null,\n  infoBoxes: [],\n  state: {},\n  mapboxMap: null,\n  onHover: false,\n  onClick: false,\n  onBoxSelect: false\n}\n\nclass LayerContainer {\n  constructor(options = {}) {\n\n    const Options = { ...DefaultOptions, ...options };\n    for (const key in Options) {\n      this[key] = Options[key];\n    }\n\n    this.id = getLayerId();\n\n    this.layerVisibility = {};\n\n    this.needsRender = this.setActive;\n\n    this.callbacks = [];\n    this.hoveredFeatures = new Map();\n\n    this.dispatchUpdate = () => {};\n\n    this.updateState = this.updateState.bind(this);\n  }\n  _init(mapboxMap, falcor) {\n    this.mapboxMap = mapboxMap;\n    this.falcor = falcor;\n    return this.init(mapboxMap, falcor);\n  }\n  init(mapboxMap, falcor) {\n    return Promise.resolve();\n  }\n\n// Don't attach any state directly to layers.\n// Use this function to update layer state.\n// This function causes an update in React through the map component.\n// The React update will cause rerenders in layer components.\n// Layer components, modals, infoboxes, etc., should pull from layer.state.\n  updateState(newState) {\n    if (typeof newState === \"function\") {\n      this.state = newState(this.state);\n    }\n    else {\n      this.state = { ...this.state, ...newState };\n    }\n    this.dispatchUpdate(this, this.state);\n  }\n\n  _onAdd(mapboxMap, falcor, updateHover) {\n    this.sources.forEach(({ id, source }) => {\n      if (!mapboxMap.getSource(id)) {\n        mapboxMap.addSource(id, source);\n      }\n    });\n    this.layers.forEach(layer => {\n      if (!mapboxMap.getLayer(layer.id)) {\n        mapboxMap.addLayer(layer, layer.beneath);\n        if (!this.isVisible) {\n          this._setVisibilityNone(mapboxMap, layer.id);\n        }\n        else {\n          this.layerVisibility[layer.id] = mapboxMap.getLayoutProperty(layer.id, \"visibility\");\n        }\n      }\n    });\n    if (this.onHover) {\n      this.addHover(mapboxMap, updateHover);\n    }\n    if (this.onClick) {\n      this.addClick(mapboxMap);\n    }\n    if (this.onBoxSelect) {\n      this.state = {\n        ...this.state,\n        selection: []\n      };\n      this.addBoxSelect(mapboxMap);\n    }\n    return this.onAdd(mapboxMap, falcor);\n  }\n  onAdd(mapboxMap, falcor) {\n    return Promise.resolve();\n  }\n\n  addClick(mapboxMap) {\n    function click(layerId, { point, features, lngLat }) {\n      this.onClick.callback.call(this, layerId, features, lngLat, point);\n    };\n\n    this.onClick.layers.forEach(layerId => {\n      const callback = click.bind(this, layerId);\n      this.callbacks.push({\n        action: \"click\",\n        callback,\n        layerId\n      });\n      mapboxMap.on(\"click\", layerId, callback);\n    });\n  }\n\n  hoverLeave(mapboxMap, layerId) {\n    if (!this.hoveredFeatures.has(layerId)) return;\n\n    this.hoveredFeatures.get(layerId).forEach(value => {\n      mapboxMap.setFeatureState(value, { hover: false });\n    });\n    this.hoveredFeatures.delete(layerId);\n  }\n\n  addHover(mapboxMap, updateHover) {\n\n    const callback = get(this, [\"onHover\", \"callback\"], DefaultCallback).bind(this),\n      HoverComp = get(this, [\"onHover\", \"HoverComp\"], DefaultHoverComp),\n      property = get(this, [\"onHover\", \"property\"], null),\n      filterFunc = get(this, [\"onHover\", \"filterFunc\"], null);\n\n    const mousemove = (layerId, { point, features, lngLat }) => {\n\n      const hoveredFeatures = this.hoveredFeatures.get(layerId) || new Map();\n      this.hoveredFeatures.set(layerId, new Map());\n\n      const hoverFeatures = features => {\n        features.forEach(({ id, source, sourceLayer }) => {\n          if ((id === undefined) || (id === null)) return;\n\n          if (hoveredFeatures.has(id)) {\n            this.hoveredFeatures.get(layerId).set(id, hoveredFeatures.get(id));\n            hoveredFeatures.delete(id);\n          }\n          else {\n            const value = { id, source, sourceLayer };\n            this.hoveredFeatures.get(layerId).set(id, value);\n            mapboxMap.setFeatureState(value, { hover: true });\n          }\n        });\n      }\n\n      if (property) {\n        const properties = features.reduce((a, c) => {\n          const prop = get(c, [\"properties\", property], null);\n          if (prop) {\n            a[prop] = true;\n          }\n          return a;\n        }, {})\n        hoverFeatures(\n          mapboxMap.queryRenderedFeatures({\n            layers: [layerId],\n            filter: [\"in\", [\"get\", property], [\"literal\", Object.keys(properties)]]\n          })\n        );\n      }\n      if (filterFunc) {\n        const filter = filterFunc.call(this, layerId, features, lngLat, point);\n        if (filter) {\n          hoverFeatures(\n            mapboxMap.queryRenderedFeatures({ layers: [layerId], filter })\n          );\n        }\n      }\n\n      hoverFeatures(features);\n\n      hoveredFeatures.forEach(value => {\n        mapboxMap.setFeatureState(value, { hover: false });\n      })\n\n      const data = callback(layerId, features, lngLat, point);\n\n      if (hasValue(data)) {\n        updateHover({\n          pos: [point.x, point.y],\n          type: \"hover-layer-move\",\n          HoverComp,\n          layer: this,\n          lngLat,\n          data\n        });\n      }\n    };\n\n    const mouseleave = (layerId, e) => {\n      this.hoverLeave(mapboxMap, layerId);\n      updateHover({\n        type: \"hover-layer-leave\",\n        layer: this\n      });\n    };\n\n    this.onHover.layers.forEach(layerId => {\n      let callback = mousemove.bind(this, layerId);\n      this.callbacks.push({\n        action: \"mousemove\",\n        callback,\n        layerId\n      });\n      mapboxMap.on(\"mousemove\", layerId, callback);\n\n      callback = mouseleave.bind(this, layerId);\n      this.callbacks.push({\n        action: \"mouseleave\",\n        callback,\n        layerId\n      });\n      mapboxMap.on(\"mouseleave\", layerId, callback);\n    }, this);\n  }\n\n  addBoxSelect(mapboxMap) {\n    let start, current, box;\n\n    const canvasContainer = mapboxMap.getCanvasContainer();\n\n    const getPos = e => {\n      const rect = canvasContainer.getBoundingClientRect();\n      return new mapboxgl.Point(\n        e.clientX - rect.left - canvasContainer.clientLeft,\n        e.clientY - rect.top - canvasContainer.clientTop\n      )\n    }\n\n    const mousemove = e => {\n      e.preventDefault();\n\n      current = getPos(e);\n\n      if (!box) {\n        const className = get(this, [\"onBoxSelect\", \"className\"], \"bg-black bg-opacity-50 border-2 border-black\");\n        box = document.createElement(\"div\");\n        box.className = \"absolute top-0 left-0 w-0 h-0 \" + className;\n        canvasContainer.appendChild(box);\n      }\n\n      var minX = Math.min(start.x, current.x),\n        maxX = Math.max(start.x, current.x),\n        minY = Math.min(start.y, current.y),\n        maxY = Math.max(start.y, current.y);\n\n        box.style.transform = `translate( ${ minX }px, ${ minY }px)`;\n        box.style.width = `${ maxX - minX }px`;\n        box.style.height = `${ maxY - minY }px`;\n    }\n    const mouseup = e => {\n      finish([start, getPos(e)]);\n    }\n    const keyup = e => {\n      if ((e.keyCode === 27) || (e.which === 27) || (e.code === 'Escape')) {\n        finish();\n      }\n    }\n\n    const finish = bbox => {\n      document.removeEventListener('mousemove', mousemove);\n      document.removeEventListener('mouseup', mouseup);\n      document.removeEventListener('keydown', keyup);\n\n      mapboxMap.dragPan.enable();\n\n      if (box) {\n        box.parentNode.removeChild(box);\n        box = null;\n      }\n\n      if (bbox) {\n        const queriedFeatures = mapboxMap.queryRenderedFeatures(bbox, {\n          layers: get(this, [\"onBoxSelect\", \"layers\"]),\n          filter: get(this, [\"onBoxSelect\", \"filter\"])\n        })\n\n        const featureMap = queriedFeatures.reduce((a, c) => {\n          a[c.id] = c;\n          return a;\n        }, {});\n\n        const features = Object.values(featureMap);\n\n        const values = [];\n\n        features.forEach(feature => {\n          values.push({\n            id: feature.id,\n            source: feature.source,\n            sourceLayer: feature.sourceLayer\n          });\n        });\n\n        get(this, [\"onBoxSelect\", \"selectedValues\"], [])\n          .forEach(value => {\n            mapboxMap.setFeatureState(value, { select: false });\n          });\n\n        this.onBoxSelect.selectedValues = values;\n\n        values.forEach(value => {\n          mapboxMap.setFeatureState(value, { select: true });\n        });\n\n        this.updateState({ selection: features });\n      }\n    }\n\n    const mousedown = e => {\n      if (!(e.shiftKey && e.button === 0)) return;\n\n      document.addEventListener('mousemove', mousemove);\n      document.addEventListener('mouseup', mouseup);\n      document.addEventListener('keydown', keyup);\n\n      mapboxMap.dragPan.disable();\n\n      start = getPos(e);\n    }\n\n    this.callbacks.push({\n      action: \"mousemove\",\n      callback: mousemove,\n      element: canvasContainer\n    });\n    canvasContainer.addEventListener(\"mousedown\", mousedown, true);\n\n    mapboxMap.boxZoom.disable();\n\n    this.onBoxSelect.selectedValues = [];\n  }\n\n  _onRemove(mapboxMap) {\n    while (this.callbacks.length) {\n      const { action, layerId, callback, element } = this.callbacks.pop();\n      if (element) {\n        element.removeEventListener(action, callback);\n      }\n      else {\n        mapboxMap.off(action, layerId, callback);\n      }\n    }\n    this.layers.forEach(({ id }) => {\n      mapboxMap.removeLayer(id);\n    });\n    this.onRemove(mapboxMap);\n  }\n  onRemove(mapboxMap) {\n\n  }\n\n  fetchData(falcor) {\n    return Promise.resolve();\n  }\n  render(mapboxMap, falcor) {\n\n  }\n\n  receiveProps(props, mapboxMap, falcor) {\n\n  }\n\n  toggleVisibility(mapboxMap) {\n    this.isVisible = !this.isVisible;\n    this.layers.forEach(({ id }) => {\n      if (this.isVisible) {\n        this._setVisibilityVisible(mapboxMap, id);\n      }\n      else {\n        this._setVisibilityNone(mapboxMap, id);\n      }\n    });\n  }\n  _setVisibilityVisible(mapboxMap, layerId) {\n    if (this.layerVisibility[layerId] !== \"none\") {\n      mapboxMap.setLayoutProperty(layerId, \"visibility\", \"visible\");\n    }\n  }\n  _setVisibilityNone(mapboxMap, layerId) {\n    const visibility = mapboxMap.getLayoutProperty(layerId, \"visibility\");\n    if (visibility === \"none\") {\n      this.layerVisibility[layerId] = \"none\";\n    }\n    else {\n      mapboxMap.setLayoutProperty(layerId, \"visibility\", \"none\");\n    }\n  }\n  setLayerVisibility(mapboxMap, layer, visibility) {\n    const isVisible = this.isVisible && (visibility === \"visible\");\n    this.layerVisibility[layer.id] = visibility;\n\n    visibility = isVisible ? \"visible\" : \"none\";\n    mapboxMap.setLayoutProperty(layer.id, \"visibility\", visibility);\n  }\n\n  onFilterChange(filterName, newValue, prevValue) {\n\n  }\n\n  onMapStyleChange(mapboxMap, falcor, updateHover) {\n    this._onAdd(mapboxMap, falcor, updateHover)\n      .then(() => this.render(mapboxMap, falcor))\n  }\n}\nexport { LayerContainer };\n","export const HOST = 'https://tig.nymtc.org/'\n","const cache = new Map();\nconst fetcher = url => {\n    if (cache.has(url)) {\n        return Promise.resolve(cache.get(url));\n    }\n    return fetch(url)\n        .then(res => {\n            if (!res.ok) {\n                throw new Error(\"Network error\");\n            }\n            return res.json();\n        })\n        .then(json => {\n            cache.set(url, json);\n            return json;\n        })\n}\nexport default fetcher;\n","import {HOST} from './layerHost'\nimport {LayerContainer} from \"components/avl-map/src\"\nimport tip_ids from '../config/tip_ids.json'\nimport tip_mpos from '../config/tip_mpos.json'\nimport fetcher from \"../wrappers/fetcher\";\nvar parse = require('wellknown');\n\nclass TestTipLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n\n    }\n\n    setActive = !!this.viewId\n    name = 'TIP Mappable Projects'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value:'131', name:'2014-2018 TIP Mappable Projects'},\n                {value:'64', name:'2017-2021 TIP Mappable Projects'},\n                {value:'187',name:'2020-2024 TIP Mappable Projects'}\n            ],\n            value: this.viewId || '131',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        tip_id :{\n            name: 'Tip ID',\n            type:'dropdown',\n            domain: tip_ids,\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        project_type: {\n            name: 'Project Type',\n            type: 'dropdown',\n            domain: [\n                {name:'Select All',value:\"Select All\"},\n                {name: 'Study', value: '1'},\n                {name: 'Highway', value: '2'},\n                {name: 'Ferry', value: '3'},\n                {name: 'Transit', value: '4'},\n                {name: 'Rail', value: '5'},\n                {name: 'Truck', value: '6'},\n                {name: 'Pedestrian', value: '7'},\n                {name: 'Bike', value: '8'},\n                {name: 'Bus', value: '10'},\n                {name: 'ITS', value: '9'},\n                {name: 'Parking', value: '12'}\n            ],\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        mpo_name: {\n            name: 'MPO Name',\n            type:'dropdown',\n            domain: tip_mpos,\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        agency:{\n            name:'Agency',\n            type:'dropdown',\n            domain:['Select All'],\n            value:'Select All'\n        },\n\n    }\n    legend = {\n        type: \"ordinal\",\n        domain: [],\n        range: [],\n        height: 5,\n        width: 350,\n        direction: \"vertical\",\n        show:true,\n        Title:\"\"\n    }\n    onHover = {\n        layers: [\"tip_lines\", \"tip_symbols\", 'tip-rail', 'tip-rail-metro', 'tip-bus', 'tip-bicycle-share', 'tip-ferry', 'tip-au-national-highway-3', 'tip-pitch-11', 'tip-college-11','tip-parking-11'],\n        callback: (layerId, features, lngLat) => {\n\n            const feature = features.reduce((a, c) => {\n                a = this.data.data.reduce((acc, curr) => {\n                    if (curr['tip_id'] === c['properties']['tip_id']\n                        && curr['ptype'] === c['properties']['project_type']\n                        && curr['sponsor'] === c['properties']['sponsor']\n                        && curr['description'] === c['properties']['description']\n                    ) {\n                        acc = curr\n                    }\n                    return acc\n                },)\n                return a\n            }, {})\n\n\n            return [\n                ['TIP ID:', feature['tip_id']],\n                ['County:',feature['county']],\n                ['MPO:',feature['mpo']],\n                ['Sponsor:', feature['sponsor']],\n                ['Project Type:', feature['ptype']],\n                ['Cost:', feature['estimated_cost']],\n                ['Description:', feature['description'].toLowerCase()]\n            ]\n\n\n        }\n    }\n    sources = [\n        {\n            id: 'tip_symbols',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        },\n        {\n            id: 'tip_lines',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        },\n    ]\n\n    init(map){\n        const url = `${HOST}/views/${this.filters.dataset.value}/data_overlay`\n        const cost_lower = ''\n        const cost_upper = ''\n        const params = `?utf8=%E2%9C%93&tip_id=${this.filters.tip_id.value === 'Select All'? '':this.filters.tip_id.value}&ptype=${this.filters.project_type.value === 'Select All'? '':this.filters.project_type.value}&mpo=${this.filters.mpo_name.value === 'Select All'? '':this.filters.mpo_name.value}&sponsor=${this.filters.agency.value === 'Select All'? '':this.filters.agency.value}&cost_lower=${cost_lower}&cost_upper=${cost_upper}&commit=Filter`\n        return fetcher(url + params)\n            .then(response => {\n                this.data = response\n                this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n                this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n            })\n    }\n    fetchData() {\n        const url = `${HOST}/views/${this.filters.dataset.value}/data_overlay`\n        const cost_lower = ''\n        const cost_upper = ''\n        const params = `?utf8=%E2%9C%93&tip_id=${this.filters.tip_id.value === 'Select All'? '':this.filters.tip_id.value}&ptype=${this.filters.project_type.value === 'Select All'? '':this.filters.project_type.value}&mpo=${this.filters.mpo_name.value === 'Select All'? '':this.filters.mpo_name.value}&sponsor=${this.filters.agency.value === 'Select All'? '':this.filters.agency.value}&cost_lower=${cost_lower}&cost_upper=${cost_upper}&commit=Filter`\n\n        return fetcher(url + params)\n            .then(response => {\n                this.data = response\n                this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n                this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n            })\n    }\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"dataset\" : {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            case \"tip_id\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${value === 'Select All'? 'All':value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            case \"project_type\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            case \"mpo_name\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            case \"agency\": {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n    onRemove(mapboxMap) {\n\n        mapboxMap.removeLayer('tip-rail')\n        mapboxMap.removeLayer('tip-rail-metro')\n        mapboxMap.removeLayer('tip-bus')\n        mapboxMap.removeLayer('tip-bicycle-share')\n        mapboxMap.removeLayer('tip-ferry')\n        mapboxMap.removeLayer('tip-au-national-highway-3')\n        mapboxMap.removeLayer('tip-pitch-11')\n        mapboxMap.removeLayer('tip-college-11')\n        mapboxMap.removeLayer('tip-parking-11')\n        mapboxMap.removeLayer('tip_lines')\n        mapboxMap.removeSource('tip_symbols')\n        mapboxMap.removeSource('tip_lines')\n    }\n    render(map){\n        let geojson = {\n            type: \"FeatureCollection\",\n            features: []\n        }\n\n        const symbols_map = {\n            'Rail': 'rail',\n            'Transit': 'rail-metro',\n            'Bus': 'bus',\n            'Bike': 'bicycle-share',\n            'Ferry': 'ferry',\n            'Highway': 'au-national-highway-3',\n            'Pedestrian': 'pitch-11',\n            'Study': 'college-11',\n            'Parking':'parking-11'\n\n        }\n        let colors = this.data.symbologies[0].color_scheme.reduce( (out,curr) => {\n            out[curr.value] = curr.color\n            return out;\n        }, {})\n\n         geojson.features = this.data.data.map((d,i) => {\n            return {\n                \"type\": \"Feature\",\n                id: i,\n                \"properties\": {\n                    county: d.county,\n                    description: d.description,\n                    estimated_cost : d.cost,\n                    mpo: d.mpo,\n                    project_type: d.ptype,\n                    color: colors[d.ptype],\n                    sponsor: d.sponsor,\n                    tip_id: d.tip_id,\n                    icon: symbols_map[d['ptype']]\n                },\n                \"geometry\": parse(d['geography'])\n            }\n        })\n\n        const symbols_geojson =\n            {\n                type: 'FeatureCollection',\n                features: geojson.features.filter(d => {\n                    if (d['geometry'] && d['geometry'].type === 'Point') {\n                        return d\n                    }\n                    return false\n                })\n            }\n\n        const line_geojson = {\n            type: 'FeatureCollection',\n            features: geojson.features.filter(d => {\n                if (d['geometry'] && d['geometry'].type === 'MultiLineString') {\n                    return d\n                }\n                return false\n            })\n        }\n\n        if (map.getSource('tip_symbols')) {\n            map.getSource('tip_symbols').setData(symbols_geojson)\n        }\n\n        if(map.getSource('tip_lines')){\n            map.getSource('tip_lines').setData(line_geojson)\n        }\n\n        if(!map.getLayer('tip_lines')){\n            map.addLayer({\n                'id': 'tip_lines',\n                'type': 'line',\n                source: 'tip_lines',\n                paint: {\n                    'line-width': 3,\n                    'line-color': {\n                        type:'identity',\n                        property:'color'\n                    },\n                }\n            })\n        }\n\n\n        geojson.features.forEach(feature => {\n            if (feature.properties.icon) {\n                let symbol = feature.properties.icon\n                let layerID = 'tip-' + symbol;\n                if (!map.getLayer(layerID)) {\n                    map.addLayer({\n                        'id': layerID,\n                        'type': 'symbol',\n                        'source': 'tip_symbols',\n                        'layout': {\n                            'icon-image': symbol,\n                            'icon-allow-overlap': true\n                        },\n                        'filter': ['==', 'icon', symbol]\n                    })\n\n                }\n            }\n        })\n\n\n    }\n}\n\n\nexport const TestTipLayerFactory = (options = {}) => new TestTipLayer(options);\n\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport counties from '../config/counties.json'\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\n\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2040CountyLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n        //this.id = id\n    }\n\n    setActive = true\n    name = '2040 SED County Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '49', name: '2000-2040 Employment Labor Force'},\n                {value: '46', name: '2000-2040 Group Quarters Population'},\n                {value: '45', name: '2000-2040 Household Population'},\n                {value: '47', name: '2000-2040 Households'},\n                {value: '48', name: '2000-2040 Household Size'},\n                {value: '50', name: '2000-2040 Labor Force'},\n                {value: '43', name: '2000-2040 Payroll Employment - QCEW Based'},\n                {value: '44', name: '2000-2040 Proprietors Employment'},\n                {value: '42', name: '2000-2040 Total Employment'},\n                {value: '41', name: '2000-2040 Total Population'}\n            ],\n            value: this.viewId || '49',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [2000,2005,2010,2015,2020,2025,2030,2035,2040],\n            value: 2000,\n            multi: false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n\n    }\n\n    onHover = {\n        layers: [\"Counties\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','geoid'],'')\n                return a\n            },'')\n            const graph = counties.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')],\n                        [\"Year:\", this.filters.year.value],\n                        ['County:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.year.value]]\n                    )\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"counties\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.a8ndgl5n\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"Counties\",\n            filter: false,\n            \"source-layer\": \"counties\",\n            source: \"counties\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response => {\n                this.data = response\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name \n                    }\n                    return a \n                },'')}-${this.filters.year.value}`\n                this.data_counties = this.data.data.map(item =>{\n                    return counties.reduce((a,c) =>{\n                        if(item.area === c.name){\n                            a['name'] = c.name\n                            a['geoid'] = c.geoid\n                        }\n                        return a\n                    },{})\n                })\n                this.legend.domain = this.data.data.reduce((a,c) =>{\n                    a.push(c[this.filters.year.value])\n                    return a\n                },[])\n\n            })\n    }\n\n\n\n    fetchData() {\n\n        return new Promise(resolve =>{\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n            }\n\n\n        );\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_counties.length) {\n            map.setFilter(\"Counties\", [\"in\", [\"get\", \"geoid\"], [\"literal\", this.data_counties.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"Counties\", false);\n        }\n\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_counties.forEach(data_county =>{\n                if(curr.area === data_county.name){\n                    acc.push({\n                        id: data_county.geoid,\n                        value: curr[this.filters.year.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                if(c.value !== 0){\n                    a[c.id] = colorScale(c.value)\n                }\n                return a\n            },{});\n\n        map.setPaintProperty(\"Counties\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"geoid\"], [\"literal\", colors]]\n        ])\n    }\n\n\n}\n\nexport const SED2040CountyLevelForecastLayerFactory = (options = {}) => new SED2040CountyLevelForecastLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2040TazLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n    setActive = !!this.viewId\n    name = '2040 SED TAZ Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '37', name: '2010-2040 Earnings (Held constant in $ 2010)'},\n                {value: '34', name: '2010-2040 Employed Labor Force'},\n                {value: '30', name: '2010-2040 Group Quarters Homeless Population'},\n                {value: '29', name: '2010-2040 Group Quarters Institutional Population'},\n                {value: '31', name: '2010-2040 Group Quarters Other Population'},\n                {value: '28', name: '2010-2040 Group Quarters Population'},\n                {value: '26', name: '2010-2040 Household Income (Held constant in $ 2010)'},\n                {value: '27', name: '2010-2040 Household Population '},\n                {value: '32', name: '2010-2040 Households'},\n                {value: '33', name: '2010-2040 Household Size'},\n                {value: '36',name: '2010-2040 Office Employment'},\n                {value: '35',name: '2010-2040 Retail Employment'},\n                {value: '13',name: '2010-2040 School Enrollment'},\n                {value: '25',name: '2010-2040 Total Employment'},\n                {value: '24',name: '2010-2040 Total Population'},\n                {value: '38',name: '2010-2040 University Enrollment'}\n            ],\n            value: this.viewId || '37',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'select',\n            domain: [2010,2015,2020,2025,2030,2035,2040],\n            value: 2010,\n            multi: false\n        }\n    }\n    onHover = {\n        layers: [\"nymtc_taz_2005\"],\n        callback: (layerId, features, lngLat) => {\n\n            const area_id = features.reduce((a,c) => {\n                a = get(c,['properties','name'],'')\n                return a\n            },'')\n\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === area_id){\n\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')],\n                        [\"Year:\", this.filters.year.value],\n                        [\"Taz id:\",c.area],[\"Value:\",c[this.filters.year.value]]\n                    )\n                }\n\n                return a\n            },[])\n        }\n    }\n    sources = [\n        {\n            id: \"nymtc_taz_2005-93y4h2\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.dgujwhsd\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"nymtc_taz_2005\",\n            filter: false,\n            \"source-layer\": \"nymtc_taz_2005\",\n            source: \"nymtc_taz_2005-93y4h2\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        domain: [],\n        range: getColorRange(5, \"YlOrRd\", true),\n        show: true,\n        Title: \"\",\n        format: \",d\",\n\n    }\n\n\n    init(map){\n\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response => {\n                this.data = response\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.year.value}`\n                this.taz_ids = this.data.data.map(d => d.area).filter(d => d)\n            })\n    }\n\n    onFilterChange(filterName,value,preValue){\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                // do nothing\n            }\n        }\n\n    }\n\n    fetchData() {\n\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n        );\n    }\n\n    getColorScale(data) {\n        const { type, range, domain } = this.legend;\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                // do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.taz_ids.length) {\n            map.setFilter(\"nymtc_taz_2005\", [\"in\", [\"get\", \"name\"], [\"literal\", this.taz_ids]]);\n        }\n        else {\n            map.setFilter(\"nymtc_taz_2005\", false);\n        }\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            acc.push({\n                'id': curr['area'] || '',\n                'value': curr[this.filters.year.value]\n            })\n            return acc\n        },[])\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                a[c.id] = colorScale(c.value)\n                return a\n            },{})\n\n\n        map.setPaintProperty(\"nymtc_taz_2005\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"name\"], [\"literal\", colors]]\n        ])\n\n    }\n}\n\nexport const SED2040TazLevelForecastLayerFactory = (options = {}) => new SED2040TazLevelForecastLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport counties from '../config/counties.json'\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2050CountyLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        //console.log('id in 2040 ',id)\n        this.viewId = props.viewId\n        //this.id = id\n    }\n\n    setActive = !!this.viewId\n    name = '2050 SED County Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '113', name: '2010-2050 Employed Labor Force'},\n                {value: '110', name: '2010-2050 Group Quarters Population'},\n                {value: '109', name: '2010-2050 Household Population'},\n                {value: '111', name: '2010-2050 Households'},\n                {value: '112', name: '2010-2050 Household Size'},\n                {value: '114', name: '2010-2050 Labor Force'},\n                {value: '107', name: '2010-2050 Payroll Employment'},\n                {value: '108', name: '2010-2050 Proprietors Employment'},\n                {value: '106', name: '2010-2050 Total Employment'},\n                {value: '105', name: '2010-2050 Total Population'}\n            ],\n            value: this.viewId || '113',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [2010,2012,2015,2020,2025,2030,2035,2040,2045,2050],\n            value: 2010,\n            multi: false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n\n    }\n\n    onHover = {\n        layers: [\"Counties\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','geoid'],'')\n                return a\n            },'')\n            const graph = counties.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')],\n                        [\"Year:\", this.filters.year.value],\n                        ['County:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.year.value]])\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"counties\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.a8ndgl5n\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"Counties\",\n            filter: false,\n            \"source-layer\": \"counties\",\n            source: \"counties\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response => {\n                this.data = response\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.year.value}`\n                this.data_counties = this.data.data.map(item =>{\n                    return counties.reduce((a,c) =>{\n                        if(item.area === c.name){\n                            a['name'] = c.name\n                            a['geoid'] = c.geoid\n                        }\n                        return a\n                    },{})\n                })\n                this.legend.domain = this.data.data.reduce((a,c) =>{\n                    a.push(c[this.filters.year.value])\n                    return a\n                },[])\n\n            })\n    }\n\n    fetchData() {\n\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n        );\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_counties.length) {\n            map.setFilter(\"Counties\", [\"in\", [\"get\", \"geoid\"], [\"literal\", this.data_counties.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"Counties\", false);\n        }\n\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_counties.forEach(data_county =>{\n                if(curr.area === data_county.name){\n                    acc.push({\n                        id: data_county.geoid,\n                        value: curr[this.filters.year.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                if(c.value !== 0){\n                    a[c.id] = colorScale(c.value)\n                }\n                return a\n            },{});\n\n        map.setPaintProperty(\"Counties\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"geoid\"], [\"literal\", colors]]\n        ])\n    }\n\n\n}\n\nexport const SED2050CountyLevelForecastLayerFactory = (options = {}) => new SED2050CountyLevelForecastLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport counties from '../config/counties.json'\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\n\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2055CountyLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n    setActive = !!this.viewId\n    name = '2055 SED County Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '207', name: '2010-2055 Employed Labor Force'},\n                {value: '204', name: '2010-2055 Group Quarters Population'},\n                {value: '203', name: '2010-2055 Household Population'},\n                {value: '205', name: '2010-2055 Households'},\n                {value: '206', name: '2010-2055 Household Size'},\n                {value: '208', name: '2010-2055 Labor Force'},\n                {value: '201', name: '2010-2055 Payroll Employment'},\n                {value: '202', name: '2010-2055 Proprietors Employment'},\n                {value: '200', name: '2010-2055 Total Employment'},\n                {value: '199', name: '2010-2055 Total Population'}\n            ],\n            value: this.viewId || '207',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [2010,2015,2017,2020,2025,2030,2035,2040,2045,2050,2055],\n            value: 2010,\n            multi: false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n\n    }\n\n    onHover = {\n        layers: [\"Counties\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','geoid'],'')\n                return a\n            },'')\n            const graph = counties.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },''),],\n                        [\"Year:\", this.filters.year.value],\n                        ['County:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.year.value]])\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"counties\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.a8ndgl5n\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"Counties\",\n            filter: false,\n            \"source-layer\": \"counties\",\n            source: \"counties\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response => {\n                this.data = response\n                this.legend.Title =`${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.year.value}`\n                this.data_counties = this.data.data.map(item =>{\n                    return counties.reduce((a,c) =>{\n                        if(item.area === c.name){\n                            a['name'] = c.name\n                            a['geoid'] = c.geoid\n                        }\n                        return a\n                    },{})\n                })\n                this.legend.domain = this.data.data.reduce((a,c) =>{\n                    a.push(c[this.filters.year.value])\n                    return a\n                },[])\n\n            })\n    }\n\n    fetchData() {\n\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n        );\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_counties.length) {\n            map.setFilter(\"Counties\", [\"in\", [\"get\", \"geoid\"], [\"literal\", this.data_counties.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"Counties\", false);\n        }\n\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_counties.forEach(data_county =>{\n                if(curr.area === data_county.name){\n                    acc.push({\n                        id: data_county.geoid,\n                        value: curr[this.filters.year.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                if(c.value !== 0){\n                    a[c.id] = colorScale(c.value)\n                }\n                return a\n            },{});\n\n        map.setPaintProperty(\"Counties\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"geoid\"], [\"literal\", colors]]\n        ])\n    }\n\n\n}\n\nexport const SED2055CountyLevelForecastLayerFactory = (options = {}) => new SED2055CountyLevelForecastLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\n\n\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2055TazLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n    setActive = !!this.viewId\n    name = '2055 SED TAZ Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '169', name: '2010-2055 Earnings in $'},\n                {value: '166', name: '2010-2055 Employed Labor Force'},\n                {value: '162', name: '2010-2055 Group Quarters Homeless Population'},\n                {value: '161', name: '2010-2055 Group Quarters Institutional Population'},\n                {value: '163', name: '2010-2055 Group Quarters Other Population'},\n                {value: '160', name: '2010-2055 Group Quarters Population'},\n                {value: '158', name: '2010-2055 Household Income in $'},\n                {value: '159', name: '2010-2055 Household Population '},\n                {value: '164', name: '2010-2055 Households'},\n                {value: '165', name: '2010-2055 Household Size'},\n                {value: '168',name: '2010-2055 Office Employment'},\n                {value: '167',name: '2010-2055 Retail Employment'},\n                {value: '155',name: '2010-2055 School Enrollment'},\n                {value: '157',name: '2010-2055 Total Employment'},\n                {value: '156',name: '2010-2055 Total Population'},\n                {value: '170',name: '2010-2055 University Enrollment'}\n            ],\n            value: this.viewId || '169',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'select',\n            domain: [2010,2015,2020,2025,2030,2035,2040,2045,2050,2055],\n            value: 2010,\n            multi: false\n        }\n    }\n    onHover = {\n        layers: [\"nymtc_taz_2005\"],\n        callback: (layerId, features, lngLat) => {\n\n            const area_id = features.reduce((a,c) => {\n                a = get(c,['properties','name'],'')\n                return a\n            },'')\n\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === area_id){\n\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')],\n                        [\"Year:\", this.filters.year.value],\n                        [\"Taz id:\",c.area],[\"Value:\",c[this.filters.year.value]]\n                    )\n                }\n\n                return a\n            },[])\n        }\n    }\n    sources = [\n        {\n            id: \"nymtc_taz_2005-93y4h2\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.dgujwhsd\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"nymtc_taz_2005\",\n            filter: false,\n            \"source-layer\": \"nymtc_taz_2005\",\n            source: \"nymtc_taz_2005-93y4h2\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        domain: [],\n        range: getColorRange(5, \"YlOrRd\", true),\n        show: true,\n        Title: \"\",\n        format: \",d\",\n\n    }\n\n\n    init(map){\n\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response => {\n                this.data = response\n                this.legend.Title =`${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.year.value}`\n                this.taz_ids = this.data.data.map(d => d.area).filter(d => d)\n            })\n    }\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                // do nothing\n            }\n        }\n\n    }\n\n    fetchData() {\n\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n        );\n    }\n\n    getColorScale(data) {\n        const { type, range, domain } = this.legend;\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                // do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.taz_ids.length) {\n            map.setFilter(\"nymtc_taz_2005\", [\"in\", [\"get\", \"name\"], [\"literal\", this.taz_ids]]);\n        }\n        else {\n            map.setFilter(\"nymtc_taz_2005\", false);\n        }\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            acc.push({\n                'id': curr['area'] || '',\n                'value': curr[this.filters.year.value]\n            })\n            return acc\n        },[])\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                a[c.id] = colorScale(c.value)\n                return a\n            },{})\n\n\n        map.setPaintProperty(\"nymtc_taz_2005\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"name\"], [\"literal\", colors]]\n        ])\n\n    }\n}\n\nexport const SED2055TazLevelForecastLayerFactory = (options = {}) => new SED2055TazLevelForecastLayer(options);\n","export const acsCensusCategoryMappings = [\n    {value:'22',name:'Absolute and Relative Minority Population data',year:2013},\n    {value:'132',name:'Absolute and Relative Minority Population data',year:2014},\n    {value:'134',name:'Absolute and Relative Minority Population data',year:2015},\n    {value:'142',name:'Absolute and Relative Minority Population data',year:2016},\n    {value:'146',name:'Absolute and Relative Minority Population data',year:2017},\n    {value:'145',name:'Absolute and Relative Minority Population data',year:2018},\n    {value:'18',name: 'Absolute and Relative Population Below Poverty',year:2013},\n    {value:'128',name: 'Absolute and Relative Population Below Poverty',year:2014},\n    {value:'133',name: 'Absolute and Relative Population Below Poverty',year:2015},\n    {value:'143',name: 'Absolute and Relative Population Below Poverty',year:2016},\n    {value:'147',name: 'Absolute and Relative Population Below Poverty',year:2017},\n    {value:'144',name: 'Absolute and Relative Population Below Poverty',year:2018},\n]\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport tracts from '../config/tracts.json'\nimport {getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\nimport {acsCensusCategoryMappings} from \"../config/acsCensusCategoryMappings\";\nimport {scaleLinear, scaleOrdinal, scaleQuantile, scaleQuantize, scaleThreshold} from \"d3-scale\"\nimport {extent} from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass ACSCensusLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.categoryName = props.name\n        this.viewid = props.viewId\n\n    }\n\n    setActive = !!this.viewId\n    name = 'ACS Census Layer'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                'Absolute and Relative Minority Population data',\n                'Absolute and Relative Population Below Poverty'],\n            value:this.categoryName || 'Absolute and Relative Minority Population data',\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [\n                2013,2014,2015,2016,2017,2018\n            ],\n            value: 2013,\n            multi: false\n        },\n        column:{\n            name: 'Column',\n            type: 'dropdown',\n            domain: [\n                {name: 'Minority Population',value:'value'},\n                {name: 'Percentage Minority', value:'percent'}\n            ],\n            value: 'value',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n        format: ',d',\n\n    }\n\n    onHover = {\n        layers: [\"tracts\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','GEOID'],'')\n                return a\n            },'')\n            const graph = tracts.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [`${this.filters.dataset.value || this.categoryName}${this.filters.column.value === 'percent' ? 'in %': ''}`],\n                        [\"Year:\", this.filters.year.value],\n                        ['Tract:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.column.value]])\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"nymtc_census_tracts\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.3galhyzy\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"tracts\",\n            filter: false,\n            \"source-layer\": \"census_tracts\",\n            source: \"nymtc_census_tracts\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n\n        const categoryValue = acsCensusCategoryMappings.reduce((a,c ) =>{\n            if((c.name === this.categoryName || c.name === this.filters.dataset.value) && c.year === this.filters.year.value){\n                a = c.value\n            }\n            return a\n        },null)\n\n        if(categoryValue){\n            this.filters.dataset.value = this.categoryName ? this.categoryName : this.filters.dataset.value\n            return fetcher(`${HOST}views/${categoryValue}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    this.legend.Title = `${this.filters.dataset.value || this.categoryName}-${this.filters.year.value}`\n                    this.data_tracts = this.data.data.map(item =>{\n                        return tracts.reduce((a,c) =>{\n                            if(item.area === c.name){\n                                a['name'] = c.name\n                                a['geoid'] = c.geoid\n                            }\n                            return a\n                        },{})\n                    })\n                    this.legend.domain = this.data.data.reduce((a,c) =>{\n                        a.push(c.value)\n                        return a\n                    },[])\n                    return response\n                })\n        }\n\n\n\n    }\n\n    fetchData() {\n        const categoryValue = acsCensusCategoryMappings.reduce((a,c ) =>{\n            if(c.name === this.categoryName && c.year === this.filters.year.value){\n                a = c.value\n            }\n            return a\n        },null)\n        if(categoryValue){\n            return new Promise(resolve =>\n                fetcher(`${HOST}views/${categoryValue}/data_overlay`)\n                    .then(response =>{\n                        this.data = response\n                        setTimeout(resolve,1000)\n                    })\n            );\n        }\n\n\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = `${this.filters.dataset.value}-${value}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = `${value}-${this.filters.year.value}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"column\": {\n\n                this.legend.Title = `${this.filters.dataset.value} in %-${this.filters.year.value}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                if(value === 'percent'){\n                    this.legend.format = ',f'\n                }else{\n                    this.legend.format = ',d'\n                }\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n    getFormat(column){\n        return ',d' ? column === 'value' : ',f'\n    }\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_tracts.length) {\n            map.setFilter(\"tracts\", [\"in\", [\"get\", \"GEOID\"], [\"literal\", this.data_tracts.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"tracts\", false);\n        }\n    //\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_tracts.forEach(data_tract =>{\n                if(curr.area === data_tract.name){\n                    acc.push({\n                        id: data_tract.geoid,\n                        value: curr[this.filters.column.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                a[c.id] = colorScale(c.value)\n                return a\n            },{});\n\n        map.setPaintProperty(\"tracts\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"GEOID\"], [\"literal\", colors]]\n        ])\n    }\n\n}\n\nexport const ACSCensusLayerFactory = (options = {}) => new ACSCensusLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport {getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\nimport {scaleLinear, scaleOrdinal, scaleQuantile, scaleQuantize, scaleThreshold} from \"d3-scale\"\nimport {extent} from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\nimport counties from \"../config/counties.json\";\n\nclass BPMPerformanceMeasuresLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n\n    setActive = !!this.viewId\n    name = 'BPM Performance Measures'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value:'58',name:'2010 Base - Time period: All Day'},\n                {value:'62',name:'2040 Future - Time period: All Day'}\n            ],\n            value: this.viewId || '58',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        column:{\n            name: 'Column',\n            type: 'dropdown',\n            domain: [\n                {name: 'VMT (in Thousands)',value:'vehicle_miles_traveled'},\n                {name: 'VHT (in Thousands)', value:'vehicle_hours_traveled'},\n                {name: 'Avg Speed (Miles/Hr)',value:'avg_speed'},\n            ],\n            value: 'vehicle_miles_traveled',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n        format: ',d',\n\n    }\n\n    onHover = {\n        layers: [\"Counties\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','geoid'],'')\n                return a\n            },'')\n            const graph = counties.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [`${this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')}-${this.filters.column.domain.reduce((a,c) => {\n                           if(c.value === this.filters.column.value){\n                               a = c.name\n                           } \n                           return a \n                        },'')}`],\n                        ['County:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.column.value]])\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"counties\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.a8ndgl5n\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"Counties\",\n            filter: false,\n            \"source-layer\": \"counties\",\n            source: \"counties\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response =>{\n                this.data = response\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.column.domain.reduce((a,c) =>{\n                   if(c.value === this.filters.column.value){\n                       a = c.name\n                   } \n                   return a \n                },'')}`\n                this.data_counties = this.data.data.map(item =>{\n                    return counties.reduce((a,c) =>{\n                        if(item.area === c.name){\n                            a['name'] = c.name\n                            a['geoid'] = c.geoid\n                        }\n                        return a\n                    },{})\n                })\n                this.legend.domain = this.data.data.reduce((a,c) =>{\n                    a.push(c[this.filters.column.value])\n                    return a\n                },[])\n                return response\n            })\n\n    }\n\n    fetchData() {\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                })\n        );\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"dataset\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.column.domain.reduce((a,c) => {\n                    if(c.value === this.filters.column.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"column\": {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.column.domain.reduce((a,c) => {\n                    if(c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                if(value === 'avg_speed'){\n                    this.legend.format = ',f'\n                }else{\n                    this.legend.format = ',d'\n                }\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n    getFormat(column){\n        return ',d' ? column === 'value' : ',f'\n    }\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_counties.length) {\n            map.setFilter(\"Counties\", [\"in\", [\"get\", \"geoid\"], [\"literal\", this.data_counties.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"Counties\", false);\n        }\n        //\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_counties.forEach(data_county =>{\n                if(curr.area === data_county.name){\n                    acc.push({\n                        id: data_county.geoid,\n                        value: curr[this.filters.column.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                if(c.value !== 0){\n                    a[c.id] = colorScale(c.value)\n                }\n                return a\n            },{});\n\n        map.setPaintProperty(\"Counties\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"geoid\"], [\"literal\", colors]]\n        ])\n    }\n\n}\n\nexport const BPMPerformanceMeasuresLayerFactory = (options = {}) => new BPMPerformanceMeasuresLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport get from \"lodash.get\"\nimport fetcher from \"../wrappers/fetcher\";\nimport hub_bound from '../config/hub_bound.json'\nimport mapboxgl from 'mapbox-gl'\n\nclass HubBoundTravelDataLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n\n    setActive = !!this.viewId\n    name = 'Hub Bound Travel Data'\n    filters = {\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019],\n            value: 2019,\n            multi: false\n        },\n        from: {\n            name: 'From',\n            type: 'dropdown',\n            domain: ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'],\n            value: '12AM',\n            multi: false\n        },\n        to: {\n            name: 'To',\n            type: 'dropdown',\n            domain: ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'],\n            value: '12PM',\n            multi: false\n        },\n        mode: {\n            name: 'Mode',\n            type: 'dropdown',\n            domain: [\n                {name:'Bicycle',value:'9'},\n                {name:'Express Bus',value:'5'},\n                {name:'Local Bus',value:'4'},\n                {name:'Private Ferry',value:'8'},\n                {name:'Public Ferry',value:'7'},\n                {name:'Rail Rapid Transit - Express',value:'3'},\n                {name:'Rail Rapid Transit - Local',value:'2'},\n                {name:'Suburban Rail',value:'1'},\n                {name:'Tramway',value:'10'},\n                {name:'Vehicles (Auto+Taxi+Trucks+Comm. Vans)',value:'6'}\n            ],\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            value: '6',\n            multi: false\n        },\n        direction: {\n            name: 'Direction',\n            type: 'dropdown',\n            domain: ['Inbound', 'Outbound'],\n            value: 'Inbound',\n            multi: false\n        }\n    }\n    onHover = {\n        layers: [\"county_points\"],\n        callback: (layerId, features, lngLat) => {\n            const id = features.reduce((a,c)=>{\n                a = get(c,['id'],'')\n                return a\n            },0)\n            return this.data.data.reduce((a,c) =>{\n                if(c.id === id){\n\n                    a.push(\n                        ['Facility Name:',c['loc_name']],\n                        ['Sector:',c['sector_name']],\n                        ['Mode:',c['mode_name']],\n                        ['Route:',c['route_name']],\n                        [c['var_name'],c['count']],\n\n                    )\n                }\n                return a\n            },[])\n\n\n\n        }\n    }\n    legend = {\n        type: \"ordinal\",\n        domain: [],\n        range: [],\n        height: 5,\n        width: 320,\n        direction: \"vertical\",\n        show:true,\n        Title:\"\"\n    }\n    sources = [\n        {\n            id: \"county_points\",\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                },\n\n            }\n        }\n    ]\n    layers = [\n        {\n            id:\"county_points\",\n            source:'county_points',\n            type: 'circle',\n            paint:{\n                'circle-opacity':1\n            },\n            visibility: 'none',\n        }\n    ]\n\n    init(map) {\n        const from = this.convertTime(this.filters.from.value)\n        const to = this.convertTime(this.filters.to.value)\n        const url = `${HOST}/views/${this.viewId || '23'}/data_overlay?utf8=%E2%9C%93&`\n        const params = `year=${this.filters.year.value}&hour=${from}&upper_hour=${to}&transit_mode=${this.filters.mode.value}&transit_direction=${this.filters.direction.value}&lower=&upper=&commit=Filter`\n\n        return fetcher(url+params)\n            .then(response => {\n                this.data = response\n                this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n                this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === this.filters.mode.value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${this.filters.from.value} to ${this.filters.to.value}, \n                Direction: ${this.filters.direction.value}`\n\n            })\n\n    }\n\n    fetchData() {\n\n        const from = this.convertTime(this.filters.from.value)\n        const to = this.convertTime(this.filters.to.value)\n        const url = `${HOST}/views/23/data_overlay?utf8=%E2%9C%93&`\n        const params = `year=${this.filters.year.value}&hour=${from}&upper_hour=${to}&transit_mode=${this.filters.mode.value}&transit_direction=${this.filters.direction.value}&lower=&upper=&commit=Filter`\n        return fetcher(url+params)\n            .then(response => {\n\n                this.data = response\n            })\n    }\n\n    onAdd(mapboxMap, falcor) {\n        let coordinates = hub_bound.features[0].geometry.coordinates[0];\n        let bounds =coordinates.reduce(function (bounds, coord) {\n            return bounds.extend(coord);\n        }, new mapboxgl.LngLatBounds(coordinates[0], coordinates[0]));\n        mapboxMap.fitBounds(bounds,{\n            padding: 10\n        })\n        return Promise.resolve();\n    }\n\n    onRemove(mapboxMap){\n\n        mapboxMap.removeLayer('counties')\n        mapboxMap.removeSource('counties')\n        mapboxMap.fitBounds([\n            [-70.12161387603946,45.142811053355814],\n            [-78.23968012395866,39.90735688410206]\n        ])\n    }\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                        if(c.value === this.filters.mode.value){\n                            a = c.name \n                        }\n                        return a \n                    },'')},\n                Year:${value},From:${this.filters.from.value} to ${this.filters.to.value}, \n                Direction: ${this.filters.direction.value}`\n                break;\n            }\n            case \"from\":{\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === this.filters.mode.value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${value} to ${this.filters.to.value}, \n                Direction: ${this.filters.direction.value}`\n                break;\n            }\n            case \"to\":{\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === this.filters.mode.value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${this.filters.from.value} to ${value}, \n                Direction: ${this.filters.direction.value}`\n                break;\n            }\n            case \"mode\":{\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${this.filters.from.value} to ${this.filters.to.value}, \n                Direction: ${this.filters.direction.value}`\n                break;\n            }\n            case \"direction\":{\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === this.filters.mode.value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${this.filters.from.value} to ${this.filters.to.value}, \n                Direction: ${value}`\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n    convertTime(time){\n        let value = 0\n        if (time.includes('AM') && time !== '12AM'){\n            value = time.substring(0,time.length - 1)\n        }\n        else if(time.includes('PM') && time !== '12PM'){\n            value = 12 + parseInt(time.substring(0,time.length - 1))\n        }\n        else if(time === '12AM'){\n            value = 0\n        }else{\n            value = 12\n        }\n        return value\n    }\n\n    render(map){\n\n        let geojson = {\n            type: \"FeatureCollection\",\n            features : []\n        }\n\n        let line_geojson = {\n            type:'geojson',\n            data: {\n                type: 'Feature',\n                properties: {},\n                geometry : {\n                    type: 'LineString',\n                    coordinates: hub_bound.features[0].geometry.coordinates[0]\n                }\n            }\n        }\n\n        const colors = {}\n\n        this.data.data.forEach(d=>{\n        this.data.symbologies[0].color_scheme.forEach(item =>{\n            if (item.value === d['sector_name']){\n                    colors[d['sector_name']] = item.color\n                }\n            })\n        })\n\n        geojson.features = this.data.data.map(item =>{\n\n            return {\n                type: \"Feature\",\n                id:item['id'],\n                properties: {\n                    \"name\":item['loc_name'],\n                    \"sector\":item['sector_name'],\n\n                },\n                geometry: {\n                    type:\"Point\",\n                    \"coordinates\": [item[\"lng\"],item[\"lat\"]]\n                }\n            }\n        })\n\n\n        if(!map.getSource('counties') && !map.getLayer('counties')){\n            map.addSource('counties', line_geojson)\n            map.addLayer({\n                id: \"counties\",\n                source:'counties',\n                type: 'line',\n                paint:{\n                    'line-color': 'black',\n                    'line-width':1,\n                    'line-dasharray':[10,5]\n                }\n            })\n        }\n        if(map.getSource('county_points')){\n            map.getSource('county_points').setData(geojson)\n        }\n\n        if(map.getSource('county_points') && map.getLayer(\"county_points\")){\n            map.setPaintProperty(\n                'county_points',\n                'circle-color',\n                [\"get\", [\"to-string\", [\"get\", \"sector\"]], [\"literal\",colors]]\n            )\n        }\n    }\n\n\n}\n\n\n\nexport const HubBoundTravelDataLayerFactory = (options = {}) => new HubBoundTravelDataLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport fetcher from \"../wrappers/fetcher\";\nimport rtp_ids from '../config/rtp_ids.json'\nimport rtp_sponsors from '../config/rtp_sponsors.json'\nvar parse = require('wellknown');\n\n\nclass RTPProjectDataLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n\n    setActive = !!this.viewId\n    name = 'RTP Project Data'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {name: '2040 RTP Projects', value: '53'},\n                {name: '2045 RTP Projects', value: '141'}\n            ],\n            value: this.viewId || '53',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        rtp_id: {\n            name: 'RTP ID',\n            type: 'dropdown',\n            domain: rtp_ids.filter(d => d.name !== null),\n            value: \"Select All\",\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: ['Select All',2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025, 2026, 2027, 2028, 2029, 2030, 2031, 2032, 2040],\n            value: 'Select All'\n        },\n        project_type: {\n            name: 'Project Type',\n            type: 'dropdown',\n            domain: [\n                {name:'Select All',value:\"Select All\"},\n                {name: 'Study', value: '1'},\n                {name: 'Highway', value: '2'},\n                {name: 'Ferry', value: '3'},\n                {name: 'Transit', value: '4'},\n                {name: 'Rail', value: '5'},\n                {name: 'Truck', value: '6'},\n                {name: 'Pedestrian', value: '7'},\n                {name: 'Bike', value: '8'},\n                {name: 'Bus', value: '10'},\n                {name: 'ITS', value: '9'},\n                {name: 'Parking', value: '12'}\n            ],\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        plan_portion: {\n            name: 'Plan Portion',\n            type: 'dropdown',\n            domain: [\n                {name:'Select All',value:'Select All'},\n                {name: 'Constrained', value: '2'},\n                {name: 'Vision', value: '1'}\n            ],\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        sponsor: {\n            name: 'Sponsor',\n            type: 'dropdown',\n            domain: rtp_sponsors,\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        }\n    }\n    legend = {\n        type: \"ordinal\",\n        domain: [],\n        range: [],\n        height: 5,\n        width: 320,\n        direction: \"vertical\",\n        show:true,\n        Title:\"\"\n    }\n    sources = [\n        {\n            id: 'county_symbols',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        },\n        {\n            id: 'county_lines',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        },\n        {\n            id: 'county_polygons',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        }\n    ]\n    onHover = {\n        layers: [\"county_lines\", \"county_polygons\", 'poi-rail', 'poi-rail-metro', 'poi-us-interstate-truck-3', 'poi-bus', 'poi-bicycle-share', 'poi-ferry', 'poi-au-national-highway-3', 'poi-pitch-11', 'poi-college-11'],\n        callback: (layerId, features, lngLat) => {\n            const feature = features.reduce((a, c) => {\n                a = this.data.data.reduce((acc, curr) => {\n\n                    if (curr['rtp_id'] === c['properties']['rtp_id']\n                        && curr['ptype'] === c['properties']['project_type']\n                        && curr['plan_portion'] === c['properties']['plan_portion']\n                        && curr['sponsor'] === c['properties']['sponsor']\n                        && curr['description'] === c['properties']['description']\n                    ) {\n                        acc = curr\n                    }\n                    return acc\n                },)\n                return a\n            }, {})\n\n            return [\n                ['Project ID:', feature['rtp_id']],\n                ['Year:', this.filters.year.value],\n                ['Plan Portion:', feature['plan_portion']],\n                ['Sponsor:', feature['sponsor']],\n                ['Project Type:', feature['ptype']],\n                ['Cost:', feature['estimated_cost']],\n                ['Description:', feature['description'].toLowerCase()]\n            ]\n\n\n        }\n    }\n\n\n\n\n    init(map) {\n\n        const url = `${HOST}/views/${this.filters.dataset.value}/data_overlay`\n        const cost_lower = ''\n        const cost_upper = ''\n\n        const params = `?utf8=%E2%9C%93&rtp_id=${this.filters.rtp_id.value === 'Select All'? '':this.filters.rtp_id.value}&current_year=${this.filters.year.value === 'Select All'? '':this.filters.year.value}&cost_lower=${cost_lower}&cost_upper=${cost_upper}&ptype=${this.filters.project_type.value === 'Select All'? '':this.filters.project_type.value}&plan_portion=${this.filters.plan_portion.value === 'Select All'? '':this.filters.plan_portion.value}&sponsor=${this.filters.sponsor.value === 'Select All'? '':this.filters.sponsor.value}&commit=Filter`\n        return fetcher(url + params)\n            .then(response => {\n                this.data = response\n                this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n                this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n               Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n            })\n    }\n\n    fetchData() {\n        const url = `${HOST}/views/${this.filters.dataset.value}/data_overlay`\n        const cost_lower = ''\n        const cost_upper = ''\n        const params = `?utf8=%E2%9C%93&rtp_id=${this.filters.rtp_id.value === 'Select All'? '':this.filters.rtp_id.value}&current_year=${this.filters.year.value === 'Select All'? '':this.filters.year.value}&cost_lower=${cost_lower}&cost_upper=${cost_upper}&ptype=${this.filters.project_type.value === 'Select All'? '':this.filters.project_type.value}&plan_portion=${this.filters.plan_portion.value === 'Select All'? '':this.filters.plan_portion.value}&sponsor=${this.filters.sponsor.value === 'Select All'? '':this.filters.sponsor.value}&commit=Filter`\n\n        return fetcher(url + params)\n            .then(response => {\n                this.data = response\n                this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n                this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a \n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name \n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n            })\n    }\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"dataset\" : {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"year\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${value === 'Select All'? 'All':value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"rtp_id\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${value === 'Select All'? 'All':value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"project_type\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"plan_portion\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"sponsor\": {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n    onRemove(mapboxMap) {\n\n        mapboxMap.removeLayer('poi-rail')\n        mapboxMap.removeLayer('poi-rail-metro')\n        mapboxMap.removeLayer('poi-us-interstate-truck-3')\n        mapboxMap.removeLayer('poi-bus')\n        mapboxMap.removeLayer('poi-bicycle-share')\n        mapboxMap.removeLayer('poi-ferry')\n        mapboxMap.removeLayer('poi-au-national-highway-3')\n        mapboxMap.removeLayer('poi-pitch-11')\n        mapboxMap.removeLayer('poi-college-11')\n        mapboxMap.removeLayer('county_polygons')\n        mapboxMap.removeLayer('county_lines')\n        mapboxMap.removeSource('county_symbols')\n        mapboxMap.removeSource('county_polygons')\n        mapboxMap.removeSource('county_lines')\n    }\n\n    render(map) {\n\n        let geojson = {\n            type: \"FeatureCollection\",\n            features: []\n        }\n\n        const symbols_map = {\n            'Rail': 'rail',\n            'Transit': 'rail-metro',\n            'Truck': 'us-interstate-truck-3',\n            'Bus': 'bus',\n            'Bike': 'bicycle-share',\n            'Ferry': 'ferry',\n            'Highway': 'au-national-highway-3',\n            'Pedestrian': 'pitch-11',\n            'Study': 'college-11',\n\n        }\n\n        geojson.features = this.data.data.map((d, i) => {\n\n            return {\n                type: 'Feature',\n                id: i,\n                properties: {\n                    \"description\": d['description'],\n                    \"estimated_cost\": d['estimated_cost'],\n                    \"plan_portion\": d['plan_portion'],\n                    \"project_type\": d['ptype'],\n                    \"rtp_id\": d['rtp_id'],\n                    \"sponsor\": d['sponsor'],\n                    \"icon\": symbols_map[d['ptype']]\n                },\n                geometry: parse(d['geography'])\n            }\n        })\n\n        const symbols_geojson =\n            {\n                type: 'FeatureCollection',\n                features: geojson.features.filter(d => {\n                    if (d['geometry'] && d['geometry'].type === 'Point') {\n                        return d\n                    }\n                    return false\n                })\n            }\n\n        const polygon_geojson = {\n            type: 'FeatureCollection',\n            features: geojson.features.filter(d => {\n                if (d['geometry'] && d['geometry'].type === 'MultiPolygon') {\n                    return d\n                }\n                return false\n            })\n        }\n\n        polygon_geojson.features.forEach(feature =>{\n\n            feature.properties['color'] = this.data.symbologies[0].color_scheme.reduce((a,c) =>{\n                if(c.label === feature.properties.project_type){\n                    a = c.color\n                }\n                return a\n            },'')\n        })\n\n        const line_geojson = {\n            type: 'FeatureCollection',\n            features: geojson.features.filter(d => {\n                if (d['geometry'] && d['geometry'].type === 'MultiLineString') {\n                    return d\n                }\n                return false\n            })\n        }\n\n\n        line_geojson.features.forEach(feature =>{\n\n            feature.properties['color'] = this.data.symbologies[0].color_scheme.reduce((a,c) =>{\n                if(c.label === feature.properties.project_type){\n                    a = c.color\n                }\n                return a\n            },'')\n        })\n\n        if (map.getSource('county_lines')) {\n            map.getSource('county_lines').setData(line_geojson)\n        }\n\n        if (!map.getLayer('county_lines')) {\n            map.addLayer({\n                id: \"county_lines\",\n                source: 'county_lines',\n                type: 'line',\n                paint: {\n                    'line-color': {\n                        type:'identity',\n                        property:'color'\n                    },\n                    'line-width': 3,\n\n                }\n            })\n        }\n\n        if (map.getSource('county_polygons')) {\n            map.getSource('county_polygons').setData(polygon_geojson)\n        }\n\n        if (!map.getLayer('county_polygons')) {\n            map.addLayer({\n                id: 'county_polygons',\n                source: 'county_polygons',\n                type: 'fill',\n                paint: {\n                    \"fill-color\": {\n                        type:'identity',\n                        property:'color'\n                    },\n                    \"fill-opacity\": [\n                        \"interpolate\",\n                        [\"linear\"],\n                        [\"zoom\"],\n                        5, 0.5,\n                        20, 0.1\n                    ]\n                }\n            })\n        }\n        if (map.getSource('county_symbols')) {\n            map.getSource('county_symbols').setData(symbols_geojson)\n        }\n        geojson.features.forEach(feature => {\n            if (feature.properties.icon) {\n                let symbol = feature.properties.icon\n                let layerID = 'poi-' + symbol;\n                if (!map.getLayer(layerID)) {\n                    map.addLayer({\n                        'id': layerID,\n                        'type': 'symbol',\n                        'source': 'county_symbols',\n                        'layout': {\n                            'icon-image': symbol,\n                            'icon-allow-overlap': true\n                        },\n                        'filter': ['==', 'icon', symbol]\n                    })\n\n                }\n\n            }\n        })\n\n    }\n}\n\nexport const RTPProjectDataLayerFactory = (options = {}) => new RTPProjectDataLayer(options)\n","import React from \"react\"\n\nimport colorbrewer from \"colorbrewer\"\n\nimport styled from \"styled-components\"\nimport get from \"lodash.get\"\n\nconst ColorRanges = {}\n\nfor (const type in colorbrewer.schemeGroups) {\n\tcolorbrewer.schemeGroups[type].forEach(name => {\n\t\tconst group = colorbrewer[name];\n\t\tfor (const length in group) {\n\t\t\tif (!(length in ColorRanges)) {\n\t\t\t\tColorRanges[length] = [];\n\t\t\t}\n\t\t\tColorRanges[length].push({\n\t\t\t\ttype: `${ type[0].toUpperCase() }${ type.slice(1) }`,\n\t\t\t\tname,\n\t\t\t\tcategory: \"Colorbrewer\",\n\t\t\t\tcolors: group[length]\n\t\t\t})\n\t\t}\n\t})\n}\n\nexport { ColorRanges };\nconsole.log(\"ColorRanges\", ColorRanges);\n\nexport const getColorRange = (size, name) =>\n\tget(ColorRanges, [size], [])\n\t\t.reduce((a, c) => c.name === name ? c.colors : a, []).slice();\n\nconst ColorBarContainer =styled.div`\n  > *:first-child {\n    border-top-left-radius: 0.25rem;\n    border-bottom-left-radius: 0.25rem;\n  }\n  > *:last-child {\n    border-top-right-radius: 0.25rem;\n    border-bottom-right-radius: 0.25rem;\n  }\n`\nexport const ColorBar = ({ colors, small = false }) => {\n  return (\n    <ColorBarContainer className={ `grid grid-cols-${ colors.length }` }>\n      { colors.map((c, i) =>\n          <div key={ i }\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\tbackgroundColor: c,\n\t\t\t\t\t\t\ttransition: \"background-color 0.5s\"\n\t\t\t\t\t\t} }\n            className={ `col-span-1 ${ small ? \"h-2\" : \"h-3\" }` }/>\n        )\n      }\n    </ColorBarContainer>\n  )\n}\n","import React from \"react\"\n\nimport { BooleanInput, Select } from \"@availabs/avl-components\"\n\nimport deepequal from \"deep-equal\"\nimport get from \"lodash.get\"\nimport {\n  groups,\n  scaleLinear,\n  scaleOrdinal,\n  scaleQuantize,\n  scaleQuantile,\n  scaleThreshold,\n  extent as d3extent,\n  format as d3format\n} from \"d3\"\n\nimport { ColorBar, ColorRanges } from \"./color-ranges\"\n\nconst ColorSteps = Object.keys(ColorRanges).sort((a, b) => +a - +b);\n\nexport const Legend = ({ type, domain, range, format, ...props }) => {\n\n  const scale = React.useMemo(() => {\n    return getScale(type, domain, range);\n  }, [type, domain, range]);\n\n  const Format = React.useMemo(() => {\n    return getFormat(format);\n  }, [format]);\n\n  return (\n    <div>\n      { type === \"linear\" ?\n        <LinearScale scale={ scale } format={ Format } { ...props }/> :\n        type === \"ordinal\" ?\n        <OrdinalScale scale={ scale } format={ Format } { ...props }/> :\n        type === \"quantize\" || type === \"quantile\" || type === \"threshold\"  ?\n        <QuantizleScale scale={ scale } format={ Format } { ...props }/> :\n        <div>Unknown scale type \"{ type }.\"</div>\n      }\n    </div>\n  )\n}\n\nconst getScale = (type, domain, range) => {\n  switch (type) {\n    case \"linear\":\n      return scaleLinear()\n        .domain(domain)\n        .range(range);\n    case \"ordinal\":\n      return scaleOrdinal()\n        .domain(domain)\n        .range(range);\n    case \"quantize\":\n      return scaleQuantize()\n        .domain(d3extent(domain))\n        .range(range);\n    case \"quantile\":\n      return scaleQuantile()\n        .domain(domain)\n        .range(range);\n    case \"threshold\":\n      return scaleThreshold()\n        .domain(domain)\n        .range(range);\n    default:\n      return null;\n  }\n}\n\nconst Identity = i => i;\nconst getFormat = format => {\n  if (!format) return Identity;\n\n  if (typeof format === \"string\") {\n    return d3format(format);\n  }\n  return format;\n}\n\nconst InitialToolState = {\n  size: 5,\n  reverse: false,\n  opened: null\n}\nconst InitReducer = size => ({\n  ...InitialToolState,\n  size: size || 5\n})\nconst ToolReducer = (state, action) => {\n  const { type, ...payload } = action;\n  switch (type) {\n    case \"set-size\":\n    case \"set-reverse\":\n    case \"set-opened\":\n      return {\n        ...state,\n        ...payload\n      }\n    default:\n      return state;\n  }\n}\nexport const useLegendReducer = size => {\n  return React.useReducer(ToolReducer, size, InitReducer);;\n}\n\nexport const LegendTools = ({ layer, MapActions }) => {\n\n  const range = get(layer, [\"legend\", \"range\"], []);\n\n  const [toolState, dispatch] = useLegendReducer(range.length);\n\n  const updateLegend = React.useCallback(update => {\n    MapActions.updateLegend(layer, update);\n  }, [layer, MapActions]);\n\n  return (\n    <DummyLegendTools { ...toolState } layer={ layer } current={ range }\n      updateLegend={ updateLegend } dispatch={ dispatch }/>\n  )\n}\nexport const DummyLegendTools = ({ layer, current, updateLegend, dispatch, size, reverse, opened }) => {\n\n  const colorsByType = React.useMemo(() => {\n    return groups(get(ColorRanges, size, []), r => r.type);\n  }, [size]);\n\n  return (\n    <React.Fragment>\n      <div className=\"flex items-center mb-1\">\n        <div className=\"w-36\">Step Size</div>\n        <div className=\"flex-1\">\n          <Select options={ ColorSteps }\n            valueAccessor={ v => +v }\n            value={ size }\n            onChange={ v => dispatch({ type: \"set-size\", size: v }) }\n            multi={ false }\n            removable={ false }\n            searchable={ false }/>\n        </div>\n      </div>\n\n      <div className=\"flex items-center mb-1\">\n        <div className=\"w-36\">Reverse Colors</div>\n        <div className=\"flex-1\">\n          <BooleanInput value={ reverse }\n            onChange={ v => dispatch({ type: \"set-reverse\", reverse: v }) }/>\n        </div>\n      </div>\n\n      <div>\n        <div className=\"font-bold border-b mb-1\">\n          Color Range Types:\n        </div>\n        { colorsByType.map(([type, ranges]) =>\n            <ColorType key={ type } type={ type } ranges={ ranges }\n              opened={ opened } update={ updateLegend }\n              setOpen={ opened => dispatch({ type: \"set-opened\", opened }) }\n              current={ current } reverse={ reverse }/>\n          )\n        }\n      </div>\n    </React.Fragment>\n  )\n}\nconst ColorType = ({ type, ranges, current, opened, setOpen, reverse, update }) => (\n  <div className={ `\n      px-2 hover:border-current border-transparent border\n      cursor-pointer rounded transition\n    ` }\n    onClick={ e => { e.stopPropagation(); setOpen(type); } }>\n    { type }\n    <div className=\"pb-1\"\n      style={ { display: opened === type ? \"block\" : \"none\" } }>\n      { ranges.map(({ name, colors }) => {\n          if (reverse) {\n            colors = colors.slice().reverse();\n          }\n          const active = deepequal(colors, current);\n          return (\n            <div key={ name }\n              onClick={ e => update({ range: colors }) }\n              className={ `\n                p-1 border rounded-lg hover:border-current transition\n                ${ active ? \"border-current\" : \"border-transparent\" }\n              ` }>\n              <ColorBar key={ name } colors={ colors } small/>\n            </div>\n          )\n        })\n      }\n    </div>\n  </div>\n)\n\nconst LinearScale = ({ scale, format, ticks = 5 }) => {\n\n  const scaleTicks = scale.ticks(ticks);\n\n  return (\n    <div>\n      <ColorBar colors={ scaleTicks.map(t => scale(t)) }/>\n      <div className={ `text-sm grid grid-cols-${ scaleTicks.length }` }>\n        { scaleTicks.map(t =>\n            <div className=\"col-span-1 text-right pr-1\" key={ t }>\n              { format(t) }\n            </div>\n          )\n        }\n      </div>\n    </div>\n  )\n}\nconst OrdinalScale = ({ scale, format, height = 3, direction = \"vertical\" }) => {\n\n  const range = scale.range();\n\n  return (\n    <div>\n      { direction === \"horizontal\" ?\n        <>\n          <div className={ `grid grid-cols-${ range.length }` }>\n            { range.map(c =>\n                <div className=\"col-span-1 h-3 mx-2 rounded\" key={ c }\n                  style={ { backgroundColor: c } }/>\n              )\n            }\n          </div>\n          <div className={ `grid grid-cols-${ range.length }` }>\n            { scale.domain().map(d =>\n                <div className=\"col-span-1 text-center\" key={ d }>\n                  { format(d) }\n                </div>\n              )\n            }\n          </div>\n        </> :\n        <div className=\"flex\">\n          { scale.domain().reduce((a, c, i) => {\n              if (i % height === 0) {\n                a.push([]);\n              }\n              a[a.length - 1].push(c);\n              return a;\n            }, [])\n            .map((d, i) =>\n              <div key={ i }\n                className={ `${ i > 0 ? \"ml-6\" : \"\" } flex-1` }>\n                { d.map(dd =>\n                    <div className=\"flex items-center\" key={ dd }>\n                      <div className=\"h-6 w-6 rounded mr-1 mb-1\"\n                        style={ {\n                          backgroundColor: scale(dd)\n                        } }/>\n                      <div>{ format(dd) }</div>\n                    </div>\n                  )\n                }\n              </div>\n            )\n          }\n        </div>\n      }\n    </div>\n  )\n}\nconst QuantizleScale = ({ scale, format }) => {\n\n  const range = scale.range();\n\n  return (\n    <div>\n      <ColorBar colors={ range }/>\n      <div className={ `text-sm grid grid-cols-${ range.length }` }>\n        { range.map(r =>\n            <div className=\"col-span-1 text-right pr-1\" key={ r }>\n              { format(scale.invertExtent(r)[1]) }\n            </div>\n          )\n        }\n      </div>\n    </div>\n  )\n}\n","const NpmrdsSources = [\n\t{ id: \"npmrds\",\n\t  source: {\n\t    type: \"vector\",\n\t    url: \"https://tiles.availabs.org/data/npmrds.json\"\n\t  }\n\t}\n]\n\nconst npmrdsPaint = {\n  'line-color': 'rgba(0,0,0,0)',\n  'line-width': [\n    \"interpolate\",\n    [\"linear\"],\n    [\"zoom\"],\n    0,\n    [\n      \"match\",\n      [\"get\", \"n\"],\n      [1, 2],\n      2,\n      2\n    ],\n    13,\n    [\n      \"match\",\n      [\"get\", \"n\"],\n      [1, 2],\n      3,\n      3\n    ],\n    18,\n    [\n      \"match\",\n      [\"get\", \"n\"],\n      [1, 2],\n      8,\n      8\n    ]\n  ],\n  'line-opacity': [\n    \"case\",\n    [\"boolean\", [\"feature-state\", \"hover\"], false],\n    0.4,\n    1\n  ],\n  'line-offset': {\n    base: 1.5,\n    stops: [[5, 0], [9, 1], [15, 3], [18, 7]]\n  }\n}\n\nconst NpmrdsLayers = ['2016','2017','2018','2019','2020','2021']\n  .map(year => {\n    return {\n      id: `tmc-${year}`,\n      type: 'line',\n      source: 'npmrds',\n      beneath: 'road-label',\n      'source-layer': `npmrds_${year}`,\n      layout: {\n        'visibility': 'visible',\n        'line-join': 'round',\n        'line-cap': 'round'\n      },\n      paint: npmrdsPaint\n    }\n  })\n\n\n\n\nexport {\n\tNpmrdsSources,\n\tNpmrdsLayers\n}","const TrafficSignalsSources = [\n  { id: \"traffic_signals\",\n    source: {\n      type: \"vector\",\n      url: \"https://tiles.availabs.org/data/osm_traffic_signals.json\"\n    }\n  }\n]\n\nconst TrafficSignalsLayers = [{\n      'id': 'traffic_signals_layer',\n      'type': 'circle',\n      'source': 'traffic_signals',\n      'beneath': 'road-label',\n      'source-layer': \"osm_traffic_signals\",\n      'layout': {\n        'visibility': 'visible',\n      },\n      'filter': [\"==\",\"$type\",\"Point\"],\n      'minzoom': 13,\n      'paint': {\n        'circle-radius': 3,\n        'circle-color':' #B42222',\n        'circle-stroke-color': '#fefefe',\n        'circle-stroke-width': 1\n      }\n}]\n\nexport {\n\tTrafficSignalsSources,\n\tTrafficSignalsLayers\n}","import get from 'lodash.get'\nimport { getColorRange } from \"../../utils\"\nconst filters = {\n  geography: {\n    name: 'Geography',\n    type: 'select',\n    domain: [],\n    value: [],\n    searchable: true,\n    accessor: d => d.name,\n    valueAccessor: d => d.value,\n    multi: true,\n  },\n  year: {\n    name: 'Year',\n    type: \"select\",\n    multi: false,\n    domain: [2016, 2017, 2018, 2019,2020, 2021],\n    value: 2019\n  },\n  month: {\n    name: 'Month',\n    type: \"select\",\n    multi: false,\n    domain: [1,2,3,4,5,6,7,8,9,10,11,12],\n    value: 1\n  },\n  hour: {\n    name: \"Hour\",\n    type: \"select\",\n    multi: false,\n    domain: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],\n    value: 15\n  }\n \n \n}\n\n\nconst updateLegend = (filters, legend) => {\n  \n  //legend.type = \"threshold\";\n  legend.range = getColorRange(get(legend, 'range.length', 6), \"RdYlBu\", true).reverse()\n  legend.format = \",.2~f\";\n  \n}\n\n\nconst getNetwork = (filters) => {\n  if(filters.network.value == 'con') {\n    return filters.conflation.value\n  }\n  return filters.network.value\n}\n\n\n\nconst setActiveLayer = (layers, filters, mapboxMap) => {\n  // console.log('setLayers ', filters.network.value, filters.year.value)\n  return layers\n    .map(l => l.id)\n    .filter(l => l !== 'traffic_signals_layer')\n    .map(l => {\n      let output = null\n      let type = l.split('-')[0]\n      let year = l.split('-')[1]\n      let checkYear = filters.year.value\n      if(type === 'tmc' && +year === +checkYear) {\n        output = l\n        mapboxMap.setLayoutProperty(\n          l,'visibility','visible'\n        )\n      } else if(type !== 'geo'){\n        mapboxMap.setLayoutProperty(\n          l,'visibility','none'\n        )\n      }\n      return output\n    }).filter(d => d)\n   \n}\n\n// export filters\n// export updateSubMeasures\n// export getMeasure\n// export getMeasureName\nexport {\n  filters,\n  updateLegend,\n  setActiveLayer\n}"," import React from 'react'\nimport get from 'lodash.get'\n\nimport { getColorRange, /*Legend*/ } from \"../../utils\"\nimport { /*Select,*/ useFalcor } from '@availabs/avl-components'\nimport mapboxgl from \"mapbox-gl\"\nimport * as d3scale from \"d3-scale\"\nimport flatten from 'lodash.flatten'\n//import len from '@turf/length'\n// import flatten from 'lodash.flatten'\n\nimport { ckmeans } from 'simple-statistics'\n\n// import { RISSources, RISLayers } from 'pages/map/map-styles/ris'\n\n\nimport { \n  NpmrdsSources, \n  NpmrdsLayers\n} from '../../map-styles/npmrds'\n\nimport { \n  TrafficSignalsSources,\n  TrafficSignalsLayers\n} from '../../map-styles/traffic_signals'\n\nimport { \n  filters,\n  updateLegend,\n  setActiveLayer\n} from './filters'\n\nimport HoverComp from './HoverComp'\nimport { LayerContainer } from \"components/avl-map/src\"\n\n/* ---- To Do ----- \nX - Data Overview\nX - stop lights\nX - All Years Working\n1 - Get RIS with new IDS\n3 - Overview Graph through time\n4- test measures by geography\n   ---------------- */\n\n\nclass NPMRDSLayer extends LayerContainer {\n  name = \"NPMRDS speeds\"\n  sources = [\n    ...NpmrdsSources,\n    ...TrafficSignalsSources,\n    { id: \"geo-boundaries-source\",\n        source: {\n          type: \"geojson\",\n          data: {\n            type: \"FeatureCollection\",\n            features: []\n          }\n        }\n    },\n  ]\n  layers = [\n    // ...ConflationLayerCase,\n    ...NpmrdsLayers,\n    // ...TrafficSignalsLayers,\n    { id: \"geo-boundaries\",\n      type: \"line\",\n      source: \"geo-boundaries-source\",\n      paint: {\n        \"line-color\": \"#fff\"\n      }\n    }\n  ]\n\n  infoBoxes = [\n    {\n      Component: ({layer}) => (\n        <div className='w-full bg-npmrds-600 text-npmrds-100'>\n          \n        </div>\n      ),\n      show: true\n    },\n    \n  ]\n  toolbar = []\n  filters = filters\n  updateLegend = updateLegend\n  setActiveLayer = setActiveLayer\n  legend = {\n    type: \"quantile\",\n    domain: [0, 150],\n    range: getColorRange(9, \"RdYlBu\").reverse(),\n    format: \",.1f\",\n    show: true,\n    Title: ({ layer }) => {\n      if(!layer) return\n      return <div>Speed (mph)</div>\n    }\n  }\n  onHover = {\n    layers: [...NpmrdsLayers.map(d => d.id)],\n    filterFunc: function(layer, features, point, latlng) {\n\n        const key = 'tmc',\n          value = get(features, [0, \"properties\", key], \"none\"),\n          dir = get(features, [0, \"properties\", \"dir\"], \"none\");\n        return [\"in\", key, value] //[\"all\", [\"in\", key, value], [\"in\", \"dir\", dir]];\n    },\n    callback: (layerId, features, lngLat) => {\n      let feature = features[0]\n     \n      const key =  'tmc',\n      value = get(features, [0, \"properties\", key], \"none\")\n\n      let data = [\n        ...Object.keys(feature.properties).map(k=> [k, feature.properties[k]])        \n      ]\n      data.push(['hoverlayer', layerId])\n      return data\n    },\n    //HoverComp\n    \n  }\n  // onClick = {\n  //   layers: [...ConflationLayers.map(d => d.id)],\n  //   callback: (features, lngLat) => {\n  //     let feature = features[0]\n  //     console.log('click', feature, features)\n  //   } \n  // }\n\n  state = {\n    activeStation: null,\n    zoom: 6.6,\n    progress: 0,\n    qaLevel: 0.3,\n    allMeasures: [],\n    risAttributes: [],\n    tmcAttributes: [],\n    currentData: [],\n    activeLayers: []\n  }\n\n  \n  loadFromLocalStorage() {\n    return window.localStorage ?\n      JSON.parse(window.localStorage.getItem(\"macro-view-geographies\") || \"[]\")\n      : [];\n  }\n\n  saveToLocalStorage(geographies = this.filters.geography.value) {\n    if (window.localStorage) {\n      if (geographies.length) {\n        window.localStorage.setItem(\"macro-view-geographies\", JSON.stringify(geographies));\n      }\n      else {\n        window.localStorage.removeItem(\"macro-view-geographies\")\n      }\n    }\n  }\n\n\n\n  zoomToGeography(geographies = this.filters.geography.value) {\n    if (!this.mapboxMap) return;\n\n    const bounds = this.getBounds(geographies);\n\n    if (bounds.isEmpty()) return;\n\n    const options = {\n      padding: {\n        top: 25,\n        right: 200,\n        bottom: 25,\n        left: 200\n      },\n      bearing: 0,\n      pitch: 0,\n      duration: 2000\n    }\n\n    options.offset = [\n      (options.padding.left - options.padding.right) * 0.5,\n      (options.padding.top - options.padding.bottom) * 0.5\n    ];\n\n    const tr = this.mapboxMap.transform,\n      nw = tr.project(bounds.getNorthWest()),\n      se = tr.project(bounds.getSouthEast()),\n      size = se.sub(nw);\n\n    const scaleX = (tr.width - (options.padding.left + options.padding.right)) / size.x,\n      scaleY = (tr.height - (options.padding.top + options.padding.bottom)) / size.y;\n\n    options.center = tr.unproject(nw.add(se).div(2));\n    options.zoom = Math.min(tr.scaleZoom(tr.scale * Math.min(scaleX, scaleY)), tr.maxZoom);\n\n    this.mapboxMap.easeTo(options);\n  }\n\n  getBounds(geographies = this.filters.geography.value) {\n    return this.filters.geography.domain\n      .filter(d => geographies.includes(d.value))\n      .reduce((a, c) => a.extend(c.bounds), new mapboxgl.LngLatBounds())\n  }\n\n  setActiveStation = () => {\n\n  }\n  \n  init(map, falcor) {\n\n    return falcor\n      .get(\n        [\"geo\", \"36\", \"geoLevels\"],\n        \n      )\n      .then((res) => {\n        const mInfo = get(res, [\"json\", \"pm3\", \"measureInfo\"], {});\n        // console.log('measureInfo', res)\n        this.filters.geography.domain = get(\n              res,\n              [\"json\", \"geo\", \"36\", \"geoLevels\"],\n              []\n            ).map((geo) => ({\n              name: `${\n                geo.geolevel === \"STATE\"\n                  ? geo.geoname.toUpperCase()\n                  : geo.geoname\n              } ${\n                geo.geolevel === \"COUNTY\"\n                  ? \"County\"\n                  : geo.geolevel === \"STATE\"\n                  ? \"State\"\n                  : geo.geolevel\n              }`,\n              geolevel: geo.geolevel,\n              value: geo.geoid,\n              bounds: geo.bounding_box,\n            }));\n        //this.filters.geography.value = this.loadFromLocalStorage();\n        //console.log('where am i', this.filters.geography.value)\n        this.zoomToGeography();\n      })\n  }\n\n  onFilterChange(filterName, newValue, prevValue) {\n    switch (filterName) {\n     \n      case \"geography\":\n        this.zoomToGeography(newValue);\n        this.saveToLocalStorage();\n        break;\n      \n      default:\n        console.log(\"no case for filter\", filterName);\n        break;\n    }\n  }\n  \n  getColorScale(domain) {\n    if(this.legend.range.length > domain.length) {\n      this.legend.domain  = []\n      return false\n    }\n    this.legend.domain = ckmeans(domain,this.legend.range.length).map(d => Math.min(...d))\n    this.updateLegend(this.filters,this.legend)\n    return d3scale.scaleLinear()\n      .domain(this.legend.domain)\n      .range(this.legend.range);\n  }\n\n  fetchData(falcor) {\n    // console.log('fetchData')\n    let year = +this.filters.year.value,\n      month = +this.filters.month.value,\n      geoids = this.filters.geography.value,\n      filtered = this.filters.geography.domain\n        .filter(({ value }) => geoids.includes(value));\n    \n   // console.log('request', ['tig','npmrds',`${month}|${year}`,filtered.map(d => `${d.geolevel}|${d.value}`), 'data'])\n\n    let requests = filtered.reduce((a, c) => { \n      a.push(['tig','npmrds',`${month}|${year}`,`${c.geolevel}|${c.value}`, 'data'])\n      a.push([\"geo\", c.geolevel.toLowerCase(), c.value, \"geometry\"]);\n      return a;\n    },[])\n\n    return falcor.get(...requests)\n      // .then((data) => {\n      //   //console.log('fetchData gem requests',data)\n      //   console.log('got data', data)\n      //   return data\n      // })\n        \n  }\n\n  render(map) {\n    // console.log('render', this)\n    //console.log('testing', map.getStyle().layers)\n    let year = +this.filters.year.value,\n      month = +this.filters.month.value,\n      geoids = this.filters.geography.value,\n      hour = this.filters.hour.value,\n      filtered = this.filters.geography.domain\n        .filter(({ value }) => geoids.includes(value));\n\n    this.setActiveLayer(\n      this.layers,\n      this.filters,\n      this.mapboxMap\n    );\n\n    const falcorCache = this.falcor.getCache()\n    let data = filtered.map(d => get(falcorCache, ['tig','npmrds',`${month}|${year}`,`${d.geolevel}|${d.value}`, 'data','value'],[]))\n      .reduce((out,d) => {\n        return {...out, ...d}\n      }, {})\n\n    //console.log('data',data)\n      \n    let domain = Object.values(data).map(d => get(d, `s[${hour}]`, 0))\n    const scale = this.getColorScale(domain.sort((a, b) => a - b));\n    const colors = Object.keys(data).reduce((a, c) => {\n      let val = scale(get(data[c], `s[${hour}]`, 0))\n      a[c] = val ? val : 'hsla(185, 0%, 27%,0.8)'\n      return a;\n    }, {});\n\n    console.log('colors',colors)\n    \n    map.setPaintProperty(`tmc-${year}`, \"line-color\", [\n      \"case\",\n      [\"has\", [\"to-string\", [\"get\", 'tmc']], [\"literal\", colors]],\n      [\"get\", [\"to-string\", [\"get\", 'tmc']], [\"literal\", colors]],\n      \"hsla(185, 0%, 27%,0.0)\",\n    ]);\n    \n    const collection = {\n      type: \"FeatureCollection\",\n      features: filtered\n        .map((f) => ({\n          type: \"Feature\",\n          properties: { geoid: f.value },\n          geometry: get(\n            falcorCache,\n            [\"geo\", f.geolevel.toLowerCase(), f.value, \"geometry\", \"value\"],\n            null\n          ),\n        }))\n        .filter((f) => Boolean(f.geometry)),\n    };\n    map.getSource(\"geo-boundaries-source\").setData(collection);\n\n  }\n\n\n  \n\n}\n\nexport const NPMRDSLayerFactory = (options = {}) => new NPMRDSLayer(options);\n","import {TestTipLayerFactory} from \"./tipLayer\";\nimport {SED2040CountyLevelForecastLayerFactory} from \"./SED2040CountyLevelForecastLayer\";\nimport {SED2040TazLevelForecastLayerFactory} from \"./SED2040TazLevelForecastLayer\";\nimport {SED2050CountyLevelForecastLayerFactory} from \"./SED2050CountyLevelForecastLayer\";\nimport {SED2055CountyLevelForecastLayerFactory} from \"./SED2055CountyLevelForecastLayer\";\nimport {SED2055TazLevelForecastLayerFactory} from \"./SED2055TazLevelForecastLayer\";\nimport {ACSCensusLayerFactory} from \"./ACSCensusLayer\";\nimport {BPMPerformanceMeasuresLayerFactory} from \"./BPMPerformanceMeasuresLayer\";\nimport {HubBoundTravelDataLayerFactory} from \"./HubBoundTravelDataLayer\";\nimport {RTPProjectDataLayerFactory} from \"./RTPProjectDataLayer\";\nimport {NPMRDSLayerFactory} from './npmrds';\n\nexport const layers = {\n    \"tig\": TestTipLayerFactory,\n    \"sed_county_2040\": SED2040CountyLevelForecastLayerFactory,\n    \"sed_county_2050\": SED2050CountyLevelForecastLayerFactory,\n    \"sed_taz_2040\": SED2040TazLevelForecastLayerFactory,\n    \"sed_county_2055\": SED2055CountyLevelForecastLayerFactory,\n    \"sed_taz_2055\": SED2055TazLevelForecastLayerFactory,\n    \"acs_census\": ACSCensusLayerFactory,\n    'bpm_performance': BPMPerformanceMeasuresLayerFactory,\n    'hub_bound_travel_data': HubBoundTravelDataLayerFactory,\n    'rtp_project_data': RTPProjectDataLayerFactory,\n    'npmrds': NPMRDSLayerFactory\n}\n\n","import React from \"react\"\nimport { AvlMap } from \"components/avl-map/src\"\nimport config from \"config.json\"\nimport TigLayout from 'components/tig/TigLayout'\nimport {layers} from \"./layers\";\n\n//import { MacroLayerFactory } from \"./layers/NP/index\"\n\nconst Map = ({ mapOptions,layers}) => {\n\n\n    return (\n        <TigLayout>\n            <div className='w-full h-[918px]' style={{height: 900}}>\n                <div className='w-full h-full'>\n                    <AvlMap\n                        accessToken={ config.MAPBOX_TOKEN }\n                        mapOptions={ mapOptions }\n                        layers={ [] }\n                        sidebar={{\n                            title: \"Map Test\",\n                            tabs: [\"layers\", \"styles\"],\n                            open: true\n\n                        }}\n                    />\n                </div>\n            </div>\n        </TigLayout>\n    )\n}\n\n\n\nconst MapPage = {\n    path: \"/map\",\n    mainNav: false,\n    name: \"TIG Map\",\n    exact: true,\n    // authLevel: 0,\n    layout: 'Simple',\n    layoutSettings: {\n        fixed: true,\n        navBar: 'top',\n        headerBar: false\n    },\n    component: {\n        type: Map,\n        props: {\n            mapOptions: {\n                zoom: 6.6,\n                styles: [{name: \"Light\",\n                    style: 'mapbox://styles/am3081/ckm86j4bw11tj18o5zf8y9pou' }]\n            },\n            layers: [\n                layers.rtp_project_data(),\n                // layers.hub_bound_travel_data(),\n                // layers.bpm_performance(),\n                // layers.acs_census(),\n                // layers.sed_taz_2055(),\n                // layers.sed_county_2055(),\n                // layers.sed_taz_2040(),\n                // layers.sed_county_2040(),\n                // layers.sed_county_2050(),\n                // layers.tig()\n\n            ]\n        },\n        wrappers: [\n            \"avl-falcor\"\n        ]\n    }\n}\n\n\nconst routes = [\n    MapPage\n];\nexport default routes;\n","import React,{useMemo} from \"react\"\nimport { AvlMap } from \"../../components/avl-map/src\"\nimport config from \"config.json\"\nimport { withAuth } from '@availabs/avl-components'\nimport {layers} from \"./layers\";\nimport {useParams} from 'react-router-dom'\nimport routingConfig from './routing-config/routingConfig.json'\n\nimport TigLayout from 'components/tig/TigLayout'\n\nconst Map = withAuth(({ mapOptions,layers,views}) => {\n    const {viewId} = useParams()\n\n    const layer = useMemo(() => {\n        let layerVal = routingConfig.reduce((a, c) => {\n            if (c.value === viewId) {\n                a = [layers[0][c.layer]({name:c.name,viewId:viewId})]\n            }\n            return a\n        }, '')\n        console.log('layerVal', layerVal)\n        return layerVal\n    }, [viewId,layers])\n\n\n    return (\n        <TigLayout>\n            <div className='w-full h-[918px]' style={{height: 618}}>\n                <div className='w-full h-full'>\n                    view id : {viewId}\n                    <AvlMap\n                        accessToken={ config.MAPBOX_TOKEN }\n                        mapOptions={ mapOptions }\n                        layers={layer}\n                        sidebar={{\n                            title: \"\",\n                            tabs: [\"layers\", \"styles\"],\n                            open: true\n\n                        }}\n\n                    />\n                </div>\n            </div>\n        </TigLayout>\n    )\n})\n\n\nconst MapPage = {\n    path: `/views/:viewId/map`,\n    mainNav: false,\n    name: \"TIG Map\",\n    exact: true,\n    // authLevel: 0,\n    layout: 'Simple',\n    layoutSettings: {\n        fixed: true,\n        navBar: 'top',\n        headerBar: false\n    },\n    component: {\n        type: Map,\n        props: {\n            mapOptions: {\n                zoom: 10.6,\n                center: [-73.911895, 40.88],\n                styles: [\n                    {name: \"Streets\",\n                    style: 'mapbox://styles/am3081/ckt3271or0nnu17oikkvl0eme' },\n                    {name: \"Light\",\n                    style: 'mapbox://styles/am3081/ckm86j4bw11tj18o5zf8y9pou' }]\n            },\n            layers: [\n               layers\n            ]\n        },\n        wrappers: [\n            \"avl-falcor\"\n        ]\n    }\n}\n\n\nconst routes = [\n    MapPage\n];\nexport default routes;\n","import Landing from \"pages/Landing\"\nimport Views from \"pages/Landing/tigDataSources/DataSourceView\"\nimport AdminLanding from \"pages/Landing/admin\"\nimport NoMatch from \"pages/404\"\nimport Auth from \"pages/auth\"\nimport TestMap from \"pages/map/MapIndex\"\nimport Map from 'pages/map'\n\nconst Routes = [\n  Landing,\n  Views,\n  AdminLanding,\n  Auth,\n  ...Map,\n  ...TestMap,\n\n  NoMatch\n]\n\nexport default Routes\n","import React from 'react';\nimport { BrowserRouter, Switch } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport ScrollToTop from 'utils/ScrollToTop'\nimport { createBrowserHistory } from 'history';\nimport Routes from 'Routes';\n\nimport {\n  DefaultLayout,\n  Messages\n} from \"@availabs/avl-components\"\n\n//export const history = createBrowserHistory({basename: process.env.PUBLIC_URL});\n\nclass App extends React.Component {\n  render() {\n    return (\n      <BrowserRouter basename={process.env.REACT_APP_PUBLIC_URL}>\n        <ScrollToTop />\n        <Switch>\n          { Routes.map((route, i) =>\n              <DefaultLayout key={ i } { ...route } { ...this.props }\n                menus={ Routes.filter(r => r.mainNav) }/>\n            )\n          }\n        </Switch>\n        <Messages/>\n      </BrowserRouter>\n    );\n  }\n}\nconst mapStateToProps = state => {\n    return ({\n\n    });\n}\n\nconst mapDispatchToProps = { createBrowserHistory };\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(App);\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\n\nimport { messages } from \"@availabs/avl-components\"\n\nimport { Reducers } from \"@availabs/ams\"\n\nconst reducer = combineReducers({\n  ...Reducers,\n  messages\n});\n\nexport default createStore(reducer, applyMiddleware(thunk))\n","import { Compositions, composeTheme } from \"@availabs/avl-components\";\n\nconst { $compositions } = Compositions;\n\n$compositions.button[1][\"$default\"] = \"text-blueGray-200 disabled:text-blueGray-300\";\n$compositions.button[2][\"$default\"] = \"border-blueGray-200\";\n$compositions.button[3][\"$default\"] = \"hover:bg-blueGray-200 hover:text-blueGray-900\";\n\n$compositions.button[1][\"Dark\"] = \"bg-blueGray-900 text-current disabled:text-gray-300\";\n$compositions.button[2][\"Dark\"] = \"border-blueGray-900\";\n$compositions.button[3][\"Dark\"] = \"hover:bg-blueGray-800 hover:border-blueGray-800\";\n$compositions.button[4][\"Wide\"] = \"px-6 py-0 @textSmall\";\n\n//console.log(\"$compositions\",$compositions)\n\n// import {composeTheme} from \"@availabs/avl-components/dist/Themes/utils\";\n\nconst colors = {\n  transparent: {\n    contentBg: \"\",\n    accentColor: \"blue-600\",\n    accentBg: \"hover:bg-blue-600\",\n    borderColor: \"border-gray-200\",\n    textColor: \"text-gray-800\",\n    highlightColor: \"text-white\",\n  },\n  white: {\n    contentBg: \"bg-white\",\n    accentColor: \"blue-600\",\n    accentBg: \"hover:bg-blue-600\",\n    borderColor: \"border-gray-100\",\n    textColor: \"text-gray-600\",\n    highlightColor: \"text-white\",\n  },\n  dark: {\n    contentBg: \"bg-darkblue-600\",\n    accentColor: \"blue-600\",\n    accentBg: \"hover:bg-blue-600\",\n    borderColor: \"border-gray-700\",\n    textColor: \"text-gray-200\",\n    highlightColor: \"text-white\",\n  },\n  gray: {\n    contentBg: \"bg-gray-800\",\n    accentColor: \"gray-500\",\n    accentBg: \"hover:bg-gray-500\",\n    borderColor: \"border-gray-600\",\n    textColor: \"text-gray-300\",\n    highlightColor: \"text-gray-200\",\n  },\n  bright: {\n    contentBg: \"bg-blue-700\",\n    accentColor: \"blue-400\",\n    accentBg: \"hover:bg-blue-400\",\n    borderColor: \"border-blue-600\",\n    textColor: \"text-white\",\n    highlightColor: \"text-white\",\n  },\n};\n\nconst sizes = {\n  compact: {\n    wrapper: \"w-64\",\n    sideItem: \"flex mx-6 pr-4 py-2 text-sm font-light hover:pl-4\",\n    topItem: \"flex items-center text-sm px-4 border-r h-12\",\n    icon: \"mr-3 text-lg\",\n  },\n  full: {\n    wrapper: \"w-64\",\n    sideItem: \"flex mx-4 pr-4 py-4 text-base font-base border-b hover:pl-4\",\n    topItem: \"flex pr-4 py-2 text-sm font-light\",\n    icon: \"mr-4 text-2xl\",\n  },\n  mini: {\n    wrapper: \"w-20 overflow-x-hidden\",\n    sideItem: \"flex pr-4 py-4 text-base font-base border-b\",\n    topItem: \"flex px-4 items-center text-sm font-light \",\n    icon: \"w-20 mr-4 text-4xl\",\n  },\n  micro: {\n    wrapper: \"w-14 overflow-x-hidden\",\n    sideItem: \"flex pr-4 py-4 text-base font-base border-b\",\n    topItem: \"flex mx-6 pr-4 py-2 text-sm font-light\",\n    icon: \"w-14 mr-4 text-2xl\",\n  },\n};\n\nlet color = \"white\";\nlet size = \"compact\";\n\n\n\nconst TDS_THEME_BASE = {\n    /* ----- \n     Side Nav Theme Components Minimal \n  ------*/\n\n  sidenavWrapper: `${colors[color].contentBg} ${sizes[size].wrapper} border-r border-gray-200 h-full`,\n  menuIconSide: ` text-${colors[color].accentColor} ${sizes[size].icon} group-hover:${colors[color].highlightColor}`,\n  navitemSide: ` \n    group font-sans \n    ${sizes[size].sideItem} ${colors[color].textColor} ${colors[color].borderColor} \n    ${colors[color].accentBg} hover:${colors[color].highlightColor} \n    focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 \n    transition-all cursor-pointer\n  `,\n\n  navitemSideActive: `\n    group flex pl-8 pr-4 py-2 bg-${colors[color].highlightColor} text-base font-medium text-darkblue-500 focus:outline-none hover:text-indigo-800 focus:text-indigo-800 focus:bg-blue-200 focus:border-indigo-700 transition duration-150 ease-in-out`,\n\n  /* ----- \n     Top Nav Theme Components Minimal \n  ------*/\n  topnavWrapper: `w-full h-12 ${colors[color].contentBg}`,\n  topnavContent: `flex w-full h-full`,\n  topnavMenu: `hidden md:flex flex-1 h-full overflow-x-auto overflow-y-hidden scrollbar-sm`,\n  menuIconTop: `text-${colors[color].accentColor} ${sizes[size].icon} group-hover:${colors[color].highlightColor}`,\n\n  navitemTop: `\n    group font-sans w-full\n    ${sizes[size].topItem} ${colors[color].textColor} ${colors[color].borderColor} \n    ${colors[color].accentBg} hover:${colors[color].highlightColor} \n    focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 \n    transition cursor-pointer`,\n  //`px-4 text-sm font-medium tracking-widest uppercase inline-flex items-center  border-transparent  leading-5 text-white hover:bg-white hover:text-darkblue-500 border-gray-200 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out h-full`,\n  topmenuRightNavContainer: \"hidden md:block h-full\",\n  navitemTopActive: `group font-sans w-full\n    ${sizes[size].topItem} ${colors[color].textColor} ${colors[color].borderColor} \n    ${colors[color].accentBg} hover:${colors[color].highlightColor} \n    focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 \n    transition cursor-pointer`,\n\n  /* ------------------------- */\n\n  text: 'text-blueGray-100',\n  textContrast: \"text-white\",\n  border: \"border-blueGray-100\",\n\n\n\n  textInfo: \"text-cyan-400\",\n  bgInfo: \"bg-cyan-400\",\n  borderInfo: \"border-cyan-400\",\n\n  textSuccess: \"text-green-400\",\n  bgSuccess: \"bg-green-400\",\n  borderSuccess: \"border-green-400\",\n\n  textDanger: \"text-red-400\",\n  bgDanger: \"bg-red-400\",\n  borderDanger: \"border-red-400\",\n\n  textWarning: \"text-yellow-400\",\n  bgWarning: \"bg-yellow-400\",\n  borderWarning: \"border-yellow-400\",\n\n  textLight: \"text-blueGray-300\", // <-- for text styled like placeholder but can't be selected with ::placeholder\n  // these 2 should be equal\n  placeholder: 'placeholder-blueGray-300',\n\n  menuIcon: 'mr-3 h-6 w-6',\n  topMenuBorder: 'border-b border-blueGray-800',\n  headerShadow: '',\n\n  bg: 'bg-white',\n\n  menuBg: 'bg-white',\n  menuBgHover: 'hover:bg-blueGray-600',\n  menuBgActive: 'bg-blueGray-700',\n  menuBgActiveHover: 'hover:bg-blueGray-600',\n  menuText : \"text-blueGray-100\",\n  menuTextHover: \"hover:text-cyan-300\",\n  menuTextActive: \"text-cyan-300\",\n  menuTextActiveHover: \"hover:text-cyan-200\",\n\n  \n  sidebarBg: 'bg-white',\n  sidebarBorder: '',\n\n  headerBg: 'bg-blueGray-900',\n  headerBgHover: \"hover:bg-blueGray-700\",\n\n  inputBg: \"bg-white disabled:bg-gray-300 cursor-pointer focus:outline-none\",\n  inputBorder: \"rounded border border-transparent hover:border-blueGray-400 focus:border-blueGray-300 disabled:border-transparent\",\n  inputBgDisabled: \"bg-blueGray-300 cursor-not-allowed focus:outline-none\",\n  inputBorderDisabled: \"rounded border border-blueGray-400 hover:border-blueGray-400\",\n  inputBgFocus: \"bg-blue-200 cursor-pointer focus:outline-none\",\n  inputBorderFocus: \"rounded border hover:border-blueGray-300 focus:border-blueGray-300 border-blueGray-300\",\n\n  textBase: \"text-base\",\n  textSmall: \"text-sm\",\n  textLarge: \"text-lg\",\n  paddingBase: \"py-1 px-2\",\n  paddingSmall: \"py-0 px-1\",\n  paddingLarge: \"py-2 px-4\",\n\n  accent1: 'bg-gray-600',\n  accent2: 'bg-gray-500',\n  accent3: 'bg-gray-400',\n  accent4: 'bg-gray-300',\n\n  highlight1: \"bg-cyan-400\",\n  highlight2: \"bg-cyan-300\",\n  highlight3: \"bg-cyan-200\",\n  highlight4: \"bg-cyan-100\",\n\n  contentBg: 'bg-white',\n  contentWidth: 'w-full max-w-7xl',\n  contentPadding: \"py-8\",\n\n  sidebarW: '56',\n  transition: \"transition ease-in-out duration-150\",\n\n  tableInfoBar: \"bg-blueGray-700\",\n  tableRow: 'bg-blueGray-800 hover:bg-blueGray-600 @transition',\n  tableRowStriped: 'bg-blueGray-800 even:bg-blueGray-700 hover:bg-blueGray-600 @transition',\n\n  tableCell: 'px-4 py-1 whitespace-no-wrap',\n\n  tableHeader: \"px-4 py-2 pb-1 border-b-2 border-blueGray-900 bg-blueGray-900 text-left font-medium @text uppercase first:rounded-tl-md last:rounded-tr-md\",\n\n  $compositions\n}\nconst TDS_THEME = composeTheme(TDS_THEME_BASE);\n\nexport default TDS_THEME;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport { API_HOST } from 'config'\nimport { AUTH_HOST, PROJECT_NAME, CLIENT_HOST } from 'config'\n\nimport { Provider } from 'react-redux';\nimport store from 'store';\n\nimport TDS_THEME from \"./theme\"\nimport {\n  FalcorProvider,\n  ThemeContext,\n  falcorGraph,\n  addComponents,\n  addWrappers\n} from \"@availabs/avl-components\"\n\nimport reportWebVitals from './reportWebVitals';\n\n//\n// import DmsComponents from \"components/dms\"\n// import DmsWrappers from \"components/dms/wrappers\"\n\nimport {\n  Components as AmsComponents,\n  Wrappers as AmsWrappers,\n  enableAuth\n} from \"@availabs/ams\"\n\nimport 'styles/tailwind.css';\nimport 'styles/index.css';\nimport 'styles/os-icons.css';\nimport 'styles/font-awesome/css/all.css'\n\n// addComponents(DmsComponents);\n// addWrappers(DmsWrappers);\n\naddComponents(AmsComponents);\naddWrappers(AmsWrappers);\n\nconst AuthEnabledApp = enableAuth(App, { AUTH_HOST, PROJECT_NAME, CLIENT_HOST });\n\n\nReactDOM.render(\n  <React.StrictMode>\n   \t<Provider store={ store }>\n  \t\t<FalcorProvider falcor={ falcorGraph(API_HOST) }>\n        <ThemeContext.Provider value={TDS_THEME}>\n          <AuthEnabledApp />\n        </ThemeContext.Provider>\n      </FalcorProvider>\n  \t</Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\nreportWebVitals();\n","export const PROJECT_NAME = 'NPMRDS';\n\nlet API_HOST = 'https://graph.availabs.org';\nlet AUTH_HOST = 'https://availauth.availabs.org';\nlet CLIENT_HOST = 'https://npmrds.availabs.org';\n\nif (process.env.NODE_ENV === 'development') {\n  // API_HOST = 'http://localhost:4444';\n  // AUTH_HOST = 'http://localhost:3457';\n  CLIENT_HOST = 'http://localhost:3000';\n}\nexport { API_HOST, AUTH_HOST, CLIENT_HOST };\n"],"sourceRoot":""}