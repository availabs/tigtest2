{"version":3,"sources":["utils/ScrollToTop.js","pages/Landing/card-menu/Menu.js","pages/Landing/tigDataSources/DatasourceList.js","pages/Landing/tigDataSources/RecentActivity.js","components/tig/TigNav.js","components/tig/TigBreadcrumbs.js","components/tig/TigLayout.js","pages/Landing/index.js","pages/Landing/tigDataSources/DataSourceView.js","pages/Landing/admin.js","pages/Landing/NavBar/RightMenu.js","pages/Landing/NavBar/TopNavBar.js","pages/Landing/NavBar/logo/img.jpg","pages/404.js","pages/auth/index.js","components/avl-map/src/components/LayerPanel.js","components/avl-map/src/components/Sidebar.js","components/avl-map/src/components/LoadingLayer.js","components/avl-map/src/components/HoverCompContainer.js","components/avl-map/src/components/InfoBoxContainer.js","components/avl-map/src/components/DraggableModal.js","components/avl-map/src/components/MapAction.js","components/avl-map/src/avl-map.js","components/avl-map/src/components/DefaultHoverComp.js","components/avl-map/src/LayerContainer.js","pages/map/layers/layerHost.js","pages/map/wrappers/fetcher.js","pages/map/layers/tipLayer.js","pages/map/layers/SED2040CountyLevelForecastLayer.js","pages/map/layers/SED2040TazLevelForecastLayer.js","pages/map/layers/SED2050CountyLevelForecastLayer.js","pages/map/layers/SED2055CountyLevelForecastLayer.js","pages/map/layers/SED2055TazLevelForecastLayer.js","pages/map/config/acsCensusCategoryMappings.js","pages/map/layers/ACSCensusLayer.js","pages/map/layers/BPMPerformanceMeasuresLayer.js","pages/map/layers/HubBoundTravelDataLayer.js","pages/map/layers/RTPProjectDataLayer.js","pages/map/utils/color-ranges.js","pages/map/utils/legend.js","pages/map/map-styles/npmrds.js","pages/map/map-styles/traffic_signals.js","pages/map/layers/npmrds/filters.js","pages/map/layers/npmrds/index.js","pages/map/layers/index.js","pages/map/MapIndex.js","pages/map/index.js","Routes.js","App.js","store/index.js","theme/index.js","reportWebVitals.js","index.js","config.js"],"names":["ScrollToTop","pathname","useLocation","useEffect","arg","window","scrollTo","classNames","classes","filter","Boolean","join","MenuComponent","className","as","open","Button","show","Fragment","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Items","static","Item","active","SOURCES_ATTRIBUTES","DatasourceList","useFalcor","falcor","falcorCache","a","get","length","console","log","from","to","fetchData","sourcesList","React","useMemo","cache","data","Object","keys","map","item","id","value","state","name","description","Menu","processData","d","dI","link","TigNav","withAuth","leftMenu","alt","style","height","src","rightMenu","TigBreadcrumbs","children","useParams","href","TigLayout","Pattern","width","viewBox","fill","x","y","patternUnits","Landing","RecentActivity","config","path","exact","component","title","shadowed","user","authLevel","layout","VIEWS_ATTRIBUTES","mainNav","dataSourceId","useState","activeId","setActiveId","location","sortIds","b","response","graph","sort","dataSource","navigation","icon","MapIcon","current","count","TableIcon","FolderIcon","ChartBarIcon","onClick","onClickView","layoutSettings","fixed","headerBar","logo","navBar","auth","RightMenu","type","customTheme","sidebarBg","topNavHeight","navitemTop","navitemTopActive","navItems","PublicNav","menuItems","class","props","showHeaders","wrappers","addToGroup","LayerPanel","layer","layersLoading","rest","setOpen","toggleOpen","useCallback","e","theme","useTheme","filters","values","i","layerId","bg","removable","multi","menuBg","display","legend","Icon","cursor","menuTextActive","LayerHeader","MapActions","isDynamic","removeDynamicLayer","removeLayer","marginTop","toolbar","tool","LegendControls","useSidebarContext","extendSidebar","passCompProps","closeExtension","range","useLegendReducer","toolState","dispatch","updateLegend","update","ref","useRef","rect","getBoundingClientRect","Comp","LegendSidebar","compProps","top","accent1","colors","small","LayerTool","Tool","tooltip","isVisible","action","toggleVisibility","checkDefaultTools","SidebarTabs","layers","Component","inactiveLayers","activeLayers","rounded","options","placeholder","accessor","searchable","onChange","addLayer","styles","mapStyles","styleIndex","mapboxMap","loading","setLoading","done","once","off","updateStyle","index","setMapStyle","imageUrl","accent2","borderInfo","Sidebar","sidebarTabIndex","tabs","togglePosition","showSidebar","Tabs","tab","startOpen","showToggle","placeBeside","setSidebarTab","LoadingLayer","progress","scale","color","getTranslate","pos","yMax","yTrans","getPinnedTranslate","orientation","getTransform","RemoveButton","transform","PinnedHoverComp","remove","project","lngLat","boxShadow","HoverCompContainer","InfoBoxContainer","padding","reduce","c","bool","push","shownInfoBoxes","infoBoxes","Math","max","aa","cc","legendLayers","infoBoxLayers","infoBoxWidth","box","InfoBox","Header","isOpen","LegendContainer","Title","marginBottom","menuText","DraggableModal","modalData","loadingLayers","modalKey","zIndex","bringModalToFront","onDragStart","closeModal","MapAction","actionFunc","menuTextHover","DefaultMapOptions","center","minZoom","zoom","preserveDrawingBuffer","attributionControl","logoPosition","DefaultSidebar","idCounter","getUniqueId","DefaultStaticOptions","size","getStaticImageUrl","slice","mapboxgl","accessToken","InitialState","initializedLayers","dynamicLayers","hoverData","Map","pinnedHoverComps","pinnedMapMarkers","prevLayerStates","layerStates","Reducer","payload","HoverComp","pinnable","sortOrder","set","delete","newPinned","HoverComps","phc","marker","md","newState","EmptyArray","EmptyObject","AvlMap","mapOptions","sidebar","layerProps","navigationControl","sidebarProps","useReducer","updateHover","projectLngLat","updateFilter","filterName","prevValue","Promise","resolve","onFilterChange","then","render","addDynamicLayer","_onRemove","_onAdd","showModal","removePinnedHoverComp","addPinnedHoverComp","Marker","setLngLat","addTo","saveMapAsImage","fileName","canvas","getCanvas","document","createElement","download","toDataURL","click","reverse","promise","onMapStyleChange","forEach","setStyle","MapOptions","Options","test","unshift","container","addControl","NavigationControl","on","mapMoved","performance","now","includes","dispatchUpdate","v","bind","mapActions","_init","setActive","pinHoverComp","hovering","receiveProps","useSetSize","Modals","modal","AllMapActions","actions","bounds","key","pinned","DefaultHoverComp","groups","rows","g","row","ii","getLayerId","DefaultCallback","DefaultOptions","modals","sources","onHover","onBoxSelect","LayerContainer","this","layerVisibility","needsRender","callbacks","hoveredFeatures","updateState","init","source","getSource","addSource","getLayer","beneath","_setVisibilityNone","getLayoutProperty","addHover","addClick","selection","addBoxSelect","onAdd","point","features","callback","call","has","setFeatureState","hover","property","filterFunc","Infinity","mousemove","featuresMap","properties","prop","queryRenderedFeatures","feature","hasValue","sourceLayer","undefined","hoverFeatures","mouseleave","hoverLeave","start","canvasContainer","getCanvasContainer","getPos","Point","clientX","left","clientLeft","clientY","clientTop","preventDefault","appendChild","minX","min","maxX","minY","maxY","mouseup","finish","keyup","keyCode","which","code","bbox","removeEventListener","dragPan","enable","parentNode","removeChild","featureMap","select","selectedValues","element","addEventListener","shiftKey","button","disable","boxZoom","pop","onRemove","_setVisibilityVisible","setLayoutProperty","visibility","newValue","HOST","fetcher","url","fetch","res","ok","Error","json","parse","require","TestTipLayer","viewId","dataset","domain","valueAccessor","tip_id","tip_ids","project_type","mpo_name","tip_mpos","agency","direction","acc","curr","toLowerCase","params","symbologies","color_scheme","preValue","removeSource","geojson","symbols_map","out","county","estimated_cost","cost","mpo","ptype","sponsor","symbols_geojson","line_geojson","setData","paint","symbol","layerID","SED2040CountyLevelForecastLayer","year","getColorRange","geoid","counties","area","data_counties","setTimeout","processedData","scaleQuantile","extent","scaleQuantize","scaleThreshold","scaleLinear","scaleOrdinal","setFilter","data_county","colorScale","getColorScale","setPaintProperty","SED2040TazLevelForecastLayer","area_id","format","taz_ids","SED2050CountyLevelForecastLayer","SED2055CountyLevelForecastLayer","SED2055TazLevelForecastLayer","acsCensusCategoryMappings","ACSCensusLayer","categoryName","column","tracts","viewid","categoryValue","data_tracts","data_tract","BPMPerformanceMeasuresLayer","HubBoundTravelDataLayer","mode","convertTime","coordinates","hub_bound","geometry","coord","extend","LngLatBounds","fitBounds","time","substring","parseInt","RTPProjectDataLayer","rtp_id","rtp_ids","plan_portion","rtp_sponsors","polygon_geojson","label","ColorRanges","colorbrewer","schemeGroups","group","toUpperCase","category","styled","div","NpmrdsSources","npmrdsPaint","base","stops","NpmrdsLayers","TrafficSignalsSources","geography","month","hour","setActiveLayer","l","output","split","checkYear","NPMRDSLayer","latlng","k","activeStation","qaLevel","allMeasures","risAttributes","tmcAttributes","currentData","setActiveStation","localStorage","JSON","getItem","geographies","setItem","stringify","removeItem","getBounds","isEmpty","right","bottom","bearing","pitch","duration","offset","tr","nw","getNorthWest","se","getSouthEast","sub","scaleX","scaleY","unproject","add","scaleZoom","maxZoom","easeTo","geoids","states","geo","flatten","s","geoLevels","geoname","geolevel","bounding_box","zoomToGeography","saveToLocalStorage","ckmeans","d3scale","requests","filtered","getCache","val","collection","f","routes","MAPBOX_TOKEN","rtp_project_data","views","layerVal","routingConfig","Routes","Views","AdminLanding","Auth","TestMap","NoMatch","App","basename","process","route","menus","r","mapDispatchToProps","createBrowserHistory","connect","reducer","combineReducers","Reducers","messages","createStore","applyMiddleware","thunk","$compositions","Compositions","transparent","contentBg","accentColor","accentBg","borderColor","textColor","highlightColor","white","dark","gray","bright","sizes","compact","wrapper","sideItem","topItem","full","mini","micro","TDS_THEME_BASE","sidenavWrapper","menuIconSide","navitemSide","navitemSideActive","topnavWrapper","topnavContent","topnavMenu","menuIconTop","topmenuRightNavContainer","text","textContrast","border","textInfo","bgInfo","textSuccess","bgSuccess","borderSuccess","textDanger","bgDanger","borderDanger","textWarning","bgWarning","borderWarning","textLight","menuIcon","topMenuBorder","headerShadow","menuBgHover","menuBgActive","menuBgActiveHover","menuTextActiveHover","sidebarBorder","headerBg","headerBgHover","inputBg","inputBorder","inputBgDisabled","inputBorderDisabled","inputBgFocus","inputBorderFocus","textBase","textSmall","textLarge","paddingBase","paddingSmall","paddingLarge","accent3","accent4","highlight1","highlight2","highlight3","highlight4","contentWidth","contentPadding","sidebarW","transition","tableInfoBar","tableRow","tableRowStriped","tableCell","tableHeader","TDS_THEME","composeTheme","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","addComponents","AmsComponents","addWrappers","AmsWrappers","AuthEnabledApp","enableAuth","AUTH_HOST","PROJECT_NAME","CLIENT_HOST","ReactDOM","StrictMode","store","falcorGraph","Provider","getElementById"],"mappings":"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","file":"static/js/main.92195043.chunk.js","sourcesContent":["import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nconst ScrollToTop = () => {\n  const { pathname } = useLocation();\n  useEffect((arg) => {\n    window.scrollTo(0, 0);\n  }, [pathname])\n  return null;\n}\n\nexport default ScrollToTop;\n","import React, {Fragment} from 'react'\nimport {DotsVerticalIcon,StarIcon} from \"@heroicons/react/solid\";\nimport {Menu,Transition} from \"@headlessui/react\";\n\nfunction classNames(...classes) {\n    return classes.filter(Boolean).join(' ')\n}\n\n\nconst MenuComponent = () =>{\n    return (\n        <div className=\"flex-shrink-0 self-center flex\">\n            <Menu as=\"div\" className=\"relative z-30 inline-block text-left\">\n                {({ open }) => (\n                    <>\n                        <div>\n                            <Menu.Button className=\"-m-2 p-2 rounded-full flex items-center text-gray-400 hover:text-gray-600\">\n                                <span className=\"sr-only\">Open options</span>\n                                <DotsVerticalIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\n                            </Menu.Button>\n                        </div>\n\n                        <Transition\n                            show={open}\n                            as={Fragment}\n                            enter=\"transition ease-out duration-100\"\n                            enterFrom=\"transform opacity-0 scale-95\"\n                            enterTo=\"transform opacity-100 scale-100\"\n                            leave=\"transition ease-in duration-75\"\n                            leaveFrom=\"transform opacity-100 scale-100\"\n                            leaveTo=\"transform opacity-0 scale-95\"\n                        >\n                            <Menu.Items\n                                static\n                                className=\"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none\"\n                            >\n                                <div className=\"py-1\">\n                                    <Menu.Item>\n                                        {({ active }) => (\n                                            <div\n                                                \n                                                className={classNames(\n                                                    active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',\n                                                    'flex px-4 py-2 text-sm'\n                                                )}\n                                            >\n                                                <StarIcon className=\"mr-3 h-5 w-5 text-gray-400\" aria-hidden=\"true\" />\n                                                <span>Add to favorites</span>\n                                            </div>\n                                        )}\n                                    </Menu.Item>\n                                    {/*<Menu.Item>*/}\n                                    {/*    {({ active }) => (*/}\n                                    {/*        <a*/}\n                                    {/*            href=\"#\"*/}\n                                    {/*            className={classNames(*/}\n                                    {/*                active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',*/}\n                                    {/*                'flex px-4 py-2 text-sm'*/}\n                                    {/*            )}*/}\n                                    {/*        >*/}\n                                    {/*            <CodeIcon className=\"mr-3 h-5 w-5 text-gray-400\" aria-hidden=\"true\" />*/}\n                                    {/*            <span>Embed</span>*/}\n                                    {/*        </a>*/}\n                                    {/*    )}*/}\n                                    {/*</Menu.Item>*/}\n                                    {/*<Menu.Item>*/}\n                                    {/*    {({ active }) => (*/}\n                                    {/*        <a*/}\n                                    {/*            href=\"#\"*/}\n                                    {/*            className={classNames(*/}\n                                    {/*                active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',*/}\n                                    {/*                'flex px-4 py-2 text-sm'*/}\n                                    {/*            )}*/}\n                                    {/*        >*/}\n                                    {/*            <FlagIcon className=\"mr-3 h-5 w-5 text-gray-400\" aria-hidden=\"true\" />*/}\n                                    {/*            <span>Report content</span>*/}\n                                    {/*        </a>*/}\n                                    {/*    )}*/}\n                                    {/*</Menu.Item>*/}\n                                </div>\n                            </Menu.Items>\n                        </Transition>\n                    </>\n                )}\n            </Menu>\n        </div>\n    )\n}\n\nexport default MenuComponent\n","import React, {useEffect} from 'react';\nimport {useFalcor} from '@availabs/avl-components'\nimport MenuComponent from \"../card-menu/Menu\";\nimport get from 'lodash.get'\nimport {Link} from \"react-router-dom\";\n\nconst SOURCES_ATTRIBUTES = [\n    'id',\n    'name',\n    'description',\n    'current_version',\n    'data_starts_at',\n    'data_ends_at',\n    'origin_url',\n    'user_id',\n    'rows_updated_at',\n    'rows_updated_by_id',\n    'topic_area',\n    'source_type'\n]\n\nconst DatasourceList = () => {\n    const {falcor, falcorCache} = useFalcor();\n\n    useEffect(() => {\n        async function fetchData() {\n            let length = await falcor.get([\"tig\", \"datasources\", \"length\"])\n            length = get(length, ['json', 'tig', 'datasources', 'length'], 0)\n\n            console.log('length', length)\n            if (length) {\n                return await falcor.get([\"tig\", \"datasources\", \"byIndex\", [{\n                    from: 0,\n                    to: length - 1\n                }], SOURCES_ATTRIBUTES])\n\n            }\n        }\n\n        return fetchData();\n    }, [])\n\n    const sourcesList = React.useMemo(() => {\n        console.log('Data source list process data')\n        let cache = get(falcorCache, ['tig', 'datasources', 'byId'], null)\n        let data = []\n        if (cache) {\n            data = Object.keys(cache).map(item => cache[item])\n        }\n        return data\n\n    },[falcorCache])\n\n\n    return (\n        <div className='border-t-2 border-teal-600'>\n            <div className='bg-tigGreen-100 text-xl w-28 py-3 pl-4 text-white mb-2'> Catalog </div>\n            {sourcesList.length > 0 ?\n                <ul className=\"\">\n                    {sourcesList.map((item) => (\n                        <li key={item.id.value} className=\"border-t py-13px\">\n                            <div className=\"flex space-x-3\">\n                                <div className=\"min-w-5xl flex-1\">\n                                    <p className=\"text-sm font-bold text-gray-900 mt-10px\">\n                                        <Link to={{\n                                            pathname: `/datasource/${item.id.value}`,\n                                            state: {name: item.name.value, description: item.description.value}\n                                        }} className=\"hover:underline py-6px px-12px border-1\">\n                                            {item.name.value}\n                                        </Link>\n                                    </p>\n                                </div>\n                                <MenuComponent/>\n                            </div>\n                            {/*<div className=\"opacity-50 py-4\">\n                                <p>{item.description.value}</p>\n                            </div>*/}\n                        </li>\n                    ))}\n                </ul>\n                :\n                <div>Loading ... </div>\n            }\n        </div>\n\n    )\n}\n\nexport default DatasourceList\n","import React, {useEffect} from 'react';\nimport {useFalcor} from '@availabs/avl-components'\nimport MenuComponent from \"../card-menu/Menu\";\nimport get from 'lodash.get'\nimport {Link} from \"react-router-dom\";\n\nconst SOURCES_ATTRIBUTES = [\n    'id',\n    'name',\n    'description',\n    'current_version',\n    'data_starts_at',\n    'data_ends_at',\n    'origin_url',\n    'user_id',\n    'rows_updated_at',\n    'rows_updated_by_id',\n    'topic_area',\n    'source_type'\n]\n\nconst DatasourceList = () => {\n    const {falcor, falcorCache} = useFalcor();\n\n    useEffect(() => {\n        async function fetchData() {\n            let length = await falcor.get([\"tig\", \"datasources\", \"length\"])\n            length = get(length, ['json', 'tig', 'datasources', 'length'], 0)\n\n            if (length) {\n                return await falcor.get([\"tig\", \"datasources\", \"byIndex\", [{\n                    from: 0,\n                    to: length - 1\n                }], SOURCES_ATTRIBUTES])\n\n            }\n        }\n\n        return fetchData();\n    }, [falcor])\n\n    const processData = () => {\n        return ['Activity 1', 'Activity 2'].map((d, dI) => ({id: dI, value: d, name:d, link: '#'}))\n\n    }\n\n\n    return (\n        <div className='border-t-2 border-teal-600'>\n            <div className='bg-tigGreen-100 text-l w-36 py-4 px-4 text-white mb-2 '> Recent Activity </div>\n            {processData() ?\n                <ul className=\"\">\n                    {processData().map((item) => (\n                        <li key={item.id} className=\"border-t py-13px\">\n                            <div className=\"flex space-x-3\">\n                                <div className=\"min-w-5xl flex-1\">\n                                    <p className=\"text-sm text-gray-700\">\n                                        <Link to={{\n                                            pathname: `/datasource/${item.value}`,\n                                            state: {name: item.name, description: item.description}\n                                        }} className=\"hover:underline py-6px px-12px border-1\">\n                                            {item.name}\n                                        </Link>\n                                    </p>\n                                </div>\n                                <MenuComponent/>\n                            </div>\n                        </li>\n                    ))}\n                    <li className={'float-right text-sm text-gray-700'}>\n                        <Link to={{\n                            pathname: '#'\n                        }} className=\"hover:underline py-6px px-12px border-1\">Show More</Link>\n                    </li>\n                </ul>\n                :\n                <div>Loading ... </div>\n            }\n        </div>\n\n    )\n}\n\nexport default DatasourceList\n","import React from \"react\"\nimport { withAuth, TopNav } from '@availabs/avl-components'\nimport { Link } from 'react-router-dom'\n\n\nconst TigNav = withAuth(() => {\n    \n\n\n    return (\n        <div className='w-full'>\n            <TopNav \n                leftMenu={(\n                    <Link to='/' className={' hover:bg-tigGray-50 h-12'}>\n                        <img alt='NYMTC Logo' className={'bg-tigGray-200 hover:bg-tigGray-50'} style={{height:50}} src='/images/nymtc_logo.svg'/>\n                    </Link>)\n                }\n                rightMenu={\n                    \n                    <div className='flex h-12 flex-col md:flex-row'>\n                        <div className='p-3 h-full bg-tigGray-200 my-2 md:my-0 md:mr-2 text-sm font-bold'>Welcome!</div>\n                        <div className='p-3 h-full hover:bg-tigGray-50 hover:text-yellow-500 hover:cursor-pointer bg-tigGray-200 my-2 md:my-0 md:mr-2 text-sm font-light'>Sign up</div>\n                        <div className='p-3 h-full hover:bg-tigGray-50 hover:text-yellow-500 hover:cursor-pointer bg-tigGray-200 text-sm font-light'>Login</div>\n                    </div>\n                    \n                }\n            />\n        </div>\n    )\n})\n\nexport default TigNav","import React from \"react\"\nimport {Link} from 'react-router-dom'\nimport {useParams, useLocation} from 'react-router-dom'\n//import { withAuth } from '@availabs/avl-components'\n//import \n\nconst TigBreadcrumbs = ({children}) => {\n    let params = useParams()\n    let location = useLocation()\n    return (\n        <div className='w-full flex justify-between py-6 items-baseline'>\n            <div className='flex'>\n                <div>\n                    <Link to='/' className='bg-tigGray-100 hover:bg-tigGray-50 hover:text-orange-300 hover:cursor-pointer py-1 px-3 text-sm text-gray-600'>\n                        Catalog\n                    </Link>\n                </div>\n                <div>\n                    {/*<div className='bg-tigGray-100 hover:bg-tigGray-50 hover:text-orange-300 hover:cursor-pointer py-1 px-3 text-sm text-gray-600'>\n                        {JSON.stringify(location)}\n                    </div>*/}\n                </div>\n            </div>\n            <a href='/Gatewayhelp.htm'>\n                <span className='fa fa-question text-sm text-gray-600' />\n            </a>\n        </div>\n    )\n}\n\nexport default TigBreadcrumbs","import React from \"react\"\nimport { withAuth } from '@availabs/avl-components'\nimport TigNav from './TigNav'\nimport TigBreadcrumbs from './TigBreadcrumbs'\n\nconst TigLayout = withAuth(({children}) => {\n    return (\n        <div className='w-full max-w-6xl mx-auto'>\n            <div className='z-10'>\n                <TigNav />\n            </div>\n            <TigBreadcrumbs />\n            {/*<p className={'text-xs text-gray-700 mb-2'}>\n                You are currently viewing x of the y available data sources in the Gateway. Click on one of the following sources and associated views to see the data in Table, Map or Chart form. Create an account or log in to see more.\n            </p>*/}\n            <div className=''>\n                {children}\n            </div>\n        </div>\n    )\n})\n\nexport default TigLayout","import React from 'react';\nimport {Redirect} from 'react-router-dom'\nimport {withAuth} from '@availabs/avl-components'\nimport DataSourceList from \"./tigDataSources/DatasourceList\";\nimport RecentActivity from \"./tigDataSources/RecentActivity\";\n\n\nimport TigLayout from 'components/tig/TigLayout'\n\nexport const Pattern = () => \n  <div className=\"hidden sm:block sm:absolute sm:inset-0\" aria-hidden=\"true\">\n    <svg className=\"absolute bottom-0 right-0 transform translate-x-1/2 mb-48 text-gray-700 lg:top-0 lg:mt-28 lg:mb-0 xl:transform-none xl:translate-x-0\" width={364} height={384} viewBox=\"0 0 364 384\" fill=\"none\">\n      <defs>\n        <pattern id=\"eab71dd9-9d7a-47bd-8044-256344ee00d0\" x={0} y={0} width={20} height={20} patternUnits=\"userSpaceOnUse\">\n          <rect x={0} y={0} width={4} height={4} fill=\"currentColor\" />\n        </pattern>\n      </defs>\n      <rect width={364} height={384} fill=\"url(#eab71dd9-9d7a-47bd-8044-256344ee00d0)\" />\n    </svg>\n  </div>\n\nconst Landing = () =>\n  <TigLayout>\n    <div className='flex'>\n      <div className='flex-1'>\n        <DataSourceList />\n      </div>\n      <div className='flex-1 pl-10'>\n        <RecentActivity />\n      </div>\n    </div>  \n  </TigLayout>\n\n\nconst AuthedLanding = withAuth(({ title, shadowed = true, user, children }) => {\n  if(user && user.authLevel > 0) {\n    return <Redirect to=\"/admin\" />\n  }\n  return <Landing />\n})\n\nconst config = {\n  path: \"/\",\n  exact: true,\n  component: AuthedLanding,\n  layout: 'Simple',\n}\n\n\nexport default config;\n\n","import React, {useEffect, useState, useMemo} from 'react';\nimport {useParams, useLocation} from 'react-router-dom'\nimport {useFalcor} from '@availabs/avl-components'\nimport get from \"lodash.get\";\nimport MenuComponent from \"../card-menu/Menu\";\nimport {\n    MapIcon,\n    TableIcon,\n    ChartBarIcon,\n    FolderIcon,\n    MenuIcon,\n} from '@heroicons/react/outline'\n\n\nimport TigLayout from 'components/tig/TigLayout'\n\nconst VIEWS_ATTRIBUTES = [\n    'id',\n    'name',\n    'description',\n    'source_id',\n    'current_version',\n    'data_starts_at',\n    'data_ends_at',\n    'origin_url',\n    'user_id',\n    'rows_updated_at',\n    'rows_updated_by_id',\n    'topic_area',\n    'download_count',\n    'last_displayed_at',\n    'view_count',\n    'created_at',\n    'updated_at',\n    'columns',\n    'data_model',\n    'statistic_id',\n    'column_types',\n    'data_levels',\n    'value_name',\n    'column_labels',\n    'row_name',\n    'column_name',\n    'spatial_level',\n    'data_hierarchy',\n    'geometry_base_year',\n    'deleted_at',\n    'download_instructions',\n    'value_columns',\n    'short_description'\n]\n\nfunction classNames(...classes) {\n    return classes.filter(Boolean).join(' ')\n}\n\nconst Views = () => {\n    const {dataSourceId} = useParams()\n    const {falcor,falcorCache} = useFalcor()\n    const [activeId,setActiveId] = useState(null)\n\n    const location = useLocation()\n    //const [sidebarOpen, setSidebarOpen] = useState(false)\n\n    const sortIds = ((a,b) =>{\n        return a.id < b.id ? 1 : -1\n    })\n\n    useEffect(() =>{\n        async function fetchData() {\n\n            let length = await falcor.get([\"tig\",\"datasources\",\"views\",\"sourceId\",[dataSourceId],'length'])\n\n            length = get(length,['json','tig','datasources','views',\"sourceId\",dataSourceId,'length'],null)\n            if(length){\n                const response = await falcor.get([\"tig\",\"datasources\",\"views\",\"sourceId\",[dataSourceId],\"byIndex\",[{from:0,to:length-1}],VIEWS_ATTRIBUTES])\n                const graph = get(response,['json','tig','datasources','views',\"sourceId\",dataSourceId,\"byIndex\"],null)\n                let data = []\n                if(graph){\n                    data = Object.keys(graph).filter(d => d !== '$__path').map(item => graph[item]).sort(sortIds)\n                    console.log('data',data)\n                    setActiveId(data[0].id)\n                }\n            }\n        }\n\n        return fetchData();\n    },[falcor,dataSourceId])\n\n    const dataSource = useMemo(() => {\n        let cache = get(falcorCache,['tig','datasources','views',\"sourceId\",dataSourceId,\"byId\"],null)\n        return cache ? Object.keys(cache).map(item => cache[item]).sort(sortIds) : false\n    },[falcorCache,dataSourceId])\n\n    const onClickView = (item) =>{\n        setActiveId(item.id.value)\n    }\n\n    const navigation = [\n        { name: 'Map', href: `/v2/views/${activeId}/map`, icon: MapIcon, current: true, count: '5' },\n        { name: 'Table', href: `/v2/views/${activeId}/table`, icon: TableIcon, current: false },\n        { name: 'View Meta data', href: '#', icon: FolderIcon, current: false, count: '19' },\n        { name: 'Charts', href: '#', icon: ChartBarIcon, current: false },\n    ]\n\n    return (\n        \n        <TigLayout>\n            <div className='border-t-2 border-teal-600'>\n            <div className='bg-teal-600 text-2xl w-28 p-4 text-white mb-2'> Catalog </div>\n                <div className=\"flex\">\n               \n                <div className=\"flex flex-col flex-1\">\n                    <div className=\"md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3\">\n                        <button\n                            className=\"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500\"\n                            /*onClick={() => setSidebarOpen(true)}*/\n                        >\n                            <span className=\"sr-only\">Open sidebar</span>\n                            <MenuIcon className=\"h-6 w-6\" aria-hidden=\"true\" />\n                        </button>\n                    </div>\n                    <main className=\"flex-1 relative z-0\">\n                        <div className=\"px-6\">\n                            <div className=\"border-b py-4\">\n                                {/*<h1 className=\"text-2xl tracking-tight font-extrabold text-gray-900 sm:text-2xl md:text-6xl\">\n                                    <span className=\"block text-indigo-600 xl:inline\">{location.state.name || ''}</span>\n                                </h1>*/}\n                                <p className=\"mt-3 text-base text-gray-700\">\n                                    {location.state.description || ''}\n                                </p>\n                            </div>\n                            <div className=\"px-6 \">\n                                \n                                    {dataSource ?\n                                        <ul className=\"pt-4\">\n                                            {dataSource.map((item) => (\n                                                <li key={item.id.value}\n                                                    className={\n                                                        activeId === item.id.value ? '  px-6 py-2 sm:px-6 ring-1 ring-offset-2 ring-indigo-500' :\n                                                            ' px-4 py-2 sm:px-6'\n                                                    }\n\n                                                >\n                                                    <div className=\"flex\">\n                                                        <div className=\"flex-1\">\n                                                            <p className=\"text-lg font-medium text-gray-900\">\n                                                                <div className=\"hover:underline cursor-pointer\" onClick={() => onClickView(item)}>\n                                                                    {item.name.value}\n                                                                </div>\n                                                            </p>\n                                                        </div>\n                                                        <MenuComponent/>\n                                                    </div>\n                                                    {/*<div className=\"opacity-50 py-4\">\n                                                        <p>{item.description.value || 'No Description'}</p>\n                                                    </div>*/}\n                                                </li>\n                                            ))}\n                                        </ul>\n                                        :<div>Loading ...</div>}\n                            </div>\n                        </div>\n                    </main>\n                </div>\n                 <div className=\" hidden md:flex md:flex-shrink-0\">\n                    <div className=\"flex flex-col w-64\">\n                        {/* Sidebar component, swap this element with another sidebar if you like */}\n                        <div className=\"flex flex-col h-0 flex-1 border-l border-gray-200 bg-white\">\n                            <div className=\"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto\">\n                                <nav className=\"mt-5 flex-1 px-2 bg-white space-y-1\">\n                                    {navigation.map((item) => (\n                                        <a\n                                            key={item.name}\n                                            href={item.href}\n                                            className={classNames(\n                                                item.current ? 'bg-gray-100 text-gray-900' : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900',\n                                                'group flex items-center px-2 py-2 text-sm font-medium rounded-md'\n                                            )}\n                                        >\n                                            <item.icon\n                                                className={classNames(\n                                                    item.current ? 'text-gray-500' : 'text-gray-400 group-hover:text-gray-500',\n                                                    'mr-3 flex-shrink-0 h-6 w-6'\n                                                )}\n                                                aria-hidden=\"true\"\n                                            />\n                                            {item.name}\n                                        </a>\n                                    ))}\n                                </nav>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            </div>\n        </TigLayout>\n    )\n}\n\n\n\nconst config = {\n    path: \"/datasource/:dataSourceId\",\n    exact: true,\n    mainNav: true,\n    name: 'Views Data Source',\n    component: Views,\n    layout: 'Simple',\n    layoutSettings: {\n        fixed: true,\n        headerBar: true,\n        logo: \"AVAIL\",\n        navBar: 'top',\n        auth: true\n    }\n}\n\n\n\nexport default config;\n","import React from 'react';\nimport { Pattern } from 'pages/Landing'\n\nconst Admin = () =>\n  <div className='h-screen flex-1 flex flex-col text-white bg-gray-800'>\n      <Pattern />\n      <div className=\"flex-1 flex items-center justify-center flex-col\">\n        <div className=\"text-6xl font-bold\">TDS</div>\n        <div className=\"text-xl\">Management</div>\n      </div>\n  </div>\n\nconst config = {\n  path: \"/subdir/admin\",\n  exact: true,\n  mainNav: true,\n  name: 'Home',\n  component: Admin,\n  layoutSettings: {\n    fixed: true,\n    headerBar: true,\n    logo: \"AVAIL\",\n    navBar: 'side'\n  }\n}\n\n\n\nexport default config;\n","import React from \"react\"\n\nimport { NavItem} from '@availabs/avl-components'\n\nexport const RightMenu = ()=> {\n    return (\n        <div className=\"h-full flex py-2\">\n            <NavItem to=\"/\" type='top' customTheme={{\n                sidebarBg: 'bg-gray-800',\n                topNavHeight: '12' ,\n                navitemTop: 'px-8 inline-flex items-center text-base font-normal text-white hover:text-gray-100 hover:pb-4 focus:outline-none  focus:border-gray-300 transition duration-150 ease-in-out',\n                navitemTopActive: 'px-8 inline-flex items-center text-base font-normal text-white hover:text-indigo-500 hover:pb-4 focus:outline-none  focus:border-gray-300 transition duration-100 ease-in-out'\n            }}>Welcome</NavItem>\n            {/*<NavMenu>\n                <NavMenuItem to=\"/\" className=\"text-white\">\n                    Logout\n                </NavMenuItem>\n            </NavMenu>*/}\n        </div>\n    )\n}\n\n\n","import {TopNav} from \"@availabs/avl-components\";\nimport {Link} from \"react-router-dom\";\nimport {RightMenu} from \"./RightMenu\";\nimport React from \"react\";\nimport logo from './logo/img.jpg'\n\nconst navItems = [\n    {\n      name: 'TIG Data Map',\n      path: `/map/`,\n      icon: 'fa fa-map',\n      className: 'font-medium text-lg'\n\n    },\n    // {\n    //     name: 'Traffic Stats',\n    //     path: `/short/`,\n    //     icon: 'fa fa-edit',\n    //     className: 'font-medium text-lg'\n    // },\n    // {\n    //     name: 'Documentation',\n    //     path: `/docs/`,\n    //     //icon: 'fa fa-edit',\n    //     className: 'font-medium text-lg'\n    // }\n]\n\nexport const PublicNav = () =>\n    <TopNav\n        menuItems={navItems}\n        open={true}\n        logo={<div className=\"mr-8\">\n            <Link to=\"/\">\n                <img  className=\"w-auto sm:h-14\" src={logo} alt='Logo' height=\"300\" width=\"200\"/>\n            </Link>\n        </div>\n\n        }\n        rightMenu={<RightMenu/>}\n        customTheme={{\n            sidebarBg: 'bg-gray-800',\n            topNavHeight: '12' ,\n            navitemTop: 'px-8 inline-flex items-center text-base font-normal  text-white hover:text-indigo-500 hover:pb-4 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out',\n            navitemTopActive: 'px-8 inline-flex items-center text-base font-normal text-white hover:text-indigo-500 hover:pb-4 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out'\n        }}\n    />\n","export default \"data:image/jpeg;base64,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\"","import React from 'react';\nimport { Pattern } from 'pages/Landing'\nimport {PublicNav} from \"./Landing/NavBar/TopNavBar\";\n\nconst NoMatch = () =>\n  <div className='h-screen flex-1 flex flex-col text-white bg-gray-800'>\n      <Pattern />\n      <div class=\"relative\">\n        <PublicNav />\n      </div>\n      <div className=\"flex-1 flex items-center justify-center flex-col\">\n        <div className=\"text-6xl font-bold\">404</div>\n        <div className=\"text-xl\">Page not Found</div>\n        <div className=\"text-xl\">Oops, Something went missing...</div>\n      </div>\n  </div>\n\nconst config = {\n  mainNav: false,\n  component: NoMatch,\n  layout: \"Simple\",\n  layoutSettings: {\n    fixed: true,\n    headerBar: true\n  }\n}\n\nexport default config;\n","\n\nconst AuthConfig = {\n  type: \"ams-manager\",\n  props: {\n    showHeaders: false\n  },\n  wrappers: [\n    // \"ams-manager\",\n    \"ams-redux\",\n    \"ams-router\"\n  ],\n  children: [\n    { type: \"ams-login\" },\n    { type: \"ams-reset-password\" },\n    { type: \"ams-logout\",\n// @props.redirectTo\n// Optional prop. Defaults to \"/\".\n// Redirects user to URL after logging out.\n      // props: { redirectTo: \"/\" }\n    },\n\n    { type: \"ams-signup\",\n// @props.addToGroup\n// Optional prop. Defaults to false.\n// Adds user to group (must have auth level 0 in all projects) instead of creating a request that must be accepted by admin.\n      props: { addToGroup: \"TDS Public\" }\n    },\n    { type: \"ams-verify-request\" }, // This is only required when addToGroup prop is included with ams-signup\n    // { type: \"ams-verify-email\" }, // This is only required when addToGroup prop is not included with ams-signup\n\n    { type: \"ams-set-password\" },\n\n    { type: \"ams-profile\" },\n    { type: \"ams-accept-invite\" },\n\n    { type: \"ams-directory\" },\n\n    { type: \"ams-project-management\"\n// @props.authLevel\n// Optional prop. This prop can be applied to any AMS child.\n// If set, users must have equal or higher authLevel to view this page.\n// Defaults to 5 for \"ams-project-management.\"\n      // props: { authLevel: 5 }\n    }\n  ]\n}\n\nconst auth = {\n  path: \"/auth\",\n  mainNav: false,\n  // layout: 'Simple',\n  layoutSettings: {\n    fixed: true,\n    navBar: 'top',\n    headerBar: false\n  },\n  component: AuthConfig\n}\nexport default auth;\n","import React from \"react\";\n\nimport get from \"lodash.get\";\n\nimport {\n  Select,\n  useTheme,\n  ColorBar,\n  useSidebarContext,\n  DummyLegendTools,\n  useLegendReducer,\n} from \"@availabs/avl-components\";\n\nconst LayerPanel = ({ layer, layersLoading, ...rest }) => {\n  const [open, setOpen] = React.useState(true),\n    toggleOpen = React.useCallback(\n      (e) => {\n        setOpen(!open);\n      },\n      [open, setOpen]\n    );\n\n  const theme = useTheme();\n\n  const filters = React.useMemo(() => {\n    return Object.values(layer.filters).map(\n      ({ name, type, layerId, active = true, ...rest }, i) => {\n        if (!active) return;\n        switch (type) {\n          default:\n            return (\n              <div\n                className={`pt-2 ${theme.bg} p-1 rounded`}\n                key={`${layerId}-${name}`}\n              >\n                <div className=\"text-base leading-4 mb-1\">{name}</div>\n                <Select {...rest} removable={rest.multi ? true : false} />\n              </div>\n            );\n        }\n      }\n    );\n  }, [layer.filters, theme]);\n\n  return (\n    <div className={`${theme.menuBg} p-1 mb-1 rounded relative`}>\n      <div\n        className={`\n        absolute top-0 bottom-0 left-0 right-0 z-10 opacity-50\n        ${Boolean(layersLoading[layer.id]) ? \"block\" : \"hidden\"}\n        ${theme.sidebarBg}\n      `}\n      />\n\n      <LayerHeader\n        layer={layer}\n        {...rest}\n        open={open}\n        toggleOpen={toggleOpen}\n      />\n\n      <div style={{ display: open ? \"block\" : \"none\" }}>\n        {!layer.legend ? null : <LegendControls layer={layer} {...rest} />}\n        {filters}\n      </div>\n    </div>\n  );\n};\nexport default LayerPanel;\n\nexport const Icon = ({\n  onClick,\n  cursor = \"cursor-pointer\",\n  className = \"\",\n  style = {},\n  children,\n}) => {\n  const theme = useTheme();\n  return (\n    <div\n      onClick={onClick}\n      className={`\n        ${cursor} ${className} transition h-6 w-6\n        hover:${theme.menuTextActive} flex items-center justify-center\n      `}\n      style={{ ...style }}\n    >\n      {children}\n    </div>\n  );\n};\nconst LayerHeader = ({ layer, toggleOpen, open, MapActions }) => {\n  const theme = useTheme();\n\n  return (\n    <div className={`flex flex-col px-1 ${theme.bg} rounded`}>\n      <div className=\"flex items-center\">\n        <Icon cursor=\"cursor-move\">\n          <span className=\"fa fa-bars mr-1\" />\n        </Icon>\n        <div className=\"font-semibold text-lg leading-5\">{layer.name}</div>\n        <div className=\"flex-1 flex justify-end\">\n          {!layer.isDynamic ? null : (\n            <Icon onClick={(e) => MapActions.removeDynamicLayer(layer)}>\n              <span className=\"fa fa-trash\" />\n            </Icon>\n          )}\n          <Icon onClick={(e) => MapActions.removeLayer(layer)}>\n            <span className=\"fa fa-times\" />\n          </Icon>\n          <Icon onClick={toggleOpen}>\n            <span className={`fa fa-sm ${open ? \"fa-minus\" : \"fa-plus\"}`} />\n          </Icon>\n        </div>\n      </div>\n      <div className=\"flex items-center\" style={{ marginTop: \"-0.25rem\" }}>\n        {layer.toolbar.map((tool, i) => (\n          <LayerTool\n            MapActions={MapActions}\n            layer={layer}\n            tool={tool}\n            key={i}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nconst LegendControls = ({ layer, MapActions }) => {\n  const theme = useTheme();\n\n  const {\n    extendSidebar,\n    passCompProps,\n    closeExtension,\n    open,\n  } = useSidebarContext();\n\n  const range = get(layer, [\"legend\", \"range\"], []);\n\n  const [toolState, dispatch] = useLegendReducer(range.length);\n\n  const updateLegend = React.useCallback(\n    (update) => {\n      MapActions.updateLegend(layer, update);\n    },\n    [layer, MapActions]\n  );\n\n  const ref = React.useRef();\n\n  const onClick = React.useCallback(\n    (e) => {\n      if (open === 2) return closeExtension();\n\n      const rect = ref.current.getBoundingClientRect();\n      const compProps = { layer, range, updateLegend, dispatch, toolState };\n      extendSidebar({\n        Comp: LegendSidebar,\n        compProps,\n        top: `calc(${rect.top}px - 0.5rem)`,\n      });\n    },\n    [\n      ref,\n      extendSidebar,\n      closeExtension,\n      open,\n      layer,\n      range,\n      updateLegend,\n      dispatch,\n      toolState,\n    ]\n  );\n\n  React.useEffect(() => {\n    passCompProps({ layer, range, updateLegend, dispatch, toolState });\n  }, [layer, range, updateLegend, toolState, passCompProps, dispatch]);\n\n  return (\n    <div\n      ref={ref}\n      className={`\n      mt-1 ${theme.bg} hover:${theme.accent1}\n      px-1 pb-1 rounded transition relative cursor-pointer\n    `}\n      onClick={onClick}\n    >\n      <div>Legend Controls</div>\n      <ColorBar colors={range} small />\n    </div>\n  );\n};\nconst LegendSidebar = ({ layer, range, updateLegend, dispatch, toolState }) => {\n  const theme = useTheme();\n  return (\n    <div\n      className={`\n        p-1 rounded-r cursor-auto ${theme.sidebarBg} w-full\n      `}\n    >\n      <div className={`${theme.menuBg} relative p-1 rounded`}>\n        <div className={`rounded p-1 ${theme.bg}`}>\n          <DummyLegendTools\n            layer={layer}\n            current={range}\n            updateLegend={updateLegend}\n            dispatch={dispatch}\n            {...toolState}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst checkDefaultTools = (tool) => {\n  if (typeof tool !== \"string\") return tool;\n\n  switch (tool) {\n    case \"toggle-visibility\":\n      return {\n        tooltip: \"Toogle Visibility\",\n        icon: (layer) => (layer.isVisible ? \"fa-eye\" : \"fa-eye-slash\"),\n        action: ({ toggleVisibility }, layer) => toggleVisibility(layer),\n      };\n    default:\n      return {\n        tooltip: `Unknown Tool \"${tool}\"`,\n        icon: \"fa-frown\",\n        action: (e) => {},\n      };\n  }\n};\n\nconst LayerTool = ({ tool, MapActions, layer }) => {\n  const Tool = React.useMemo(() => {\n    return checkDefaultTools(tool);\n  }, [tool]);\n\n  const action = React.useCallback(\n    (e) => {\n      Tool.action(MapActions, layer);\n    },\n    [Tool, MapActions, layer]\n  );\n\n  const icon = typeof Tool.icon === \"function\" ? Tool.icon(layer) : Tool.icon;\n\n  return (\n    <Icon onClick={action}>\n      <span className={`fa fa-sm ${icon}`} />\n    </Icon>\n  );\n};\n","import React from \"react\"\n\nimport { Select, useTheme, CollapsibleSidebar } from \"@availabs/avl-components\"\n\nimport LayerPanel from \"./LayerPanel\"\n\nconst LayersTab = ({ inactiveLayers, activeLayers, MapActions, ...rest }) => {\n\n  const theme = useTheme();\n\n  return (\n    <>\n      { !inactiveLayers.length ? null :\n        <div className={ `mb-1 p-1 ${ theme.menuBg } ${theme.rounded}` }>\n          <div className={ `p-1 ${ theme.bg } ${theme.rounded}` }>\n            <Select options={ inactiveLayers }\n              placeholder=\"Add a Layer...\"\n              accessor={ ({ name }) => name }\n              value={ null } multi={ false }\n              searchable={ false }\n              onChange={ MapActions.addLayer }/>\n          </div>\n        </div>\n      }\n      { activeLayers.map(layer =>\n          <LayerPanel\n            key={ layer.id } { ...rest }\n            layer={ layer } MapActions={ MapActions }/>\n        )\n      }\n    </>\n  )\n}\nconst StylesTab = ({ mapStyles, styleIndex, MapActions, mapboxMap }) => {\n\n  const theme = useTheme();\n\n  const [loading, setLoading] = React.useState(false);\n  React.useEffect(() => {\n    if (loading) {\n      const done = () => setLoading(false);\n      mapboxMap.once(\"style.load\", done);\n      return () => mapboxMap.off(\"style.load\", done);\n    }\n  }, [loading, mapboxMap]);\n\n  const updateStyle = React.useCallback(index => {\n    setLoading(true);\n    MapActions.setMapStyle(index);\n  }, [MapActions]);\n\n  return (\n    <div className={ `${ theme.menuBg } ${theme.rounded}` }>\n\n      <div className={ `\n        absolute top-0 bottom-0 left-0 right-0 opacity-50 z-10\n        ${ theme.sidebarBg } ${ loading ? \"block\" : \"hidden\" }\n      ` }/>\n\n      <div className={ `${ theme.bg } p-1 ${theme.rounded} relative` }>\n\n        { mapStyles.map(({ name, imageUrl }, i) =>\n            <div key={ i } className={ `\n              ${ i === 0 ? \"\" : \"mt-1\" } p-1 ${theme.rounded} hover:${ theme.menuTextActive }\n              flex items-center hover:${ theme.accent2 } transition\n              ${ i === styleIndex ?\n                `border-r-4 ${ theme.borderInfo } ${ theme.accent2 }` :\n                `${ theme.accent1 } cursor-pointer`\n              }\n            ` } onClick={ i === styleIndex ? null : e => updateStyle(i) }>\n              <img src={ imageUrl } alt={ name } className={`${theme.rounded}`}/>\n              <div className=\"ml-2\">{ name }</div>\n            </div>\n          )\n        }\n\n      </div>\n    </div>\n  )\n}\n\nconst SidebarTabs = {\n  layers: {\n    icon: \"fa fa-layer-group\",\n    Component: LayersTab\n  },\n  styles: {\n    icon: \"fa fa-map\",\n    Component: StylesTab\n  }\n}\n\nconst Sidebar = ({ open, sidebarTabIndex, MapActions, tabs, title, children, togglePosition, showSidebar, ...rest }) => {\n\n  const Tabs = React.useMemo(() => {\n    return tabs.map(tab => {\n      if (tab in SidebarTabs) {\n        return SidebarTabs[tab];\n      }\n      return tab;\n    })\n  }, [tabs]);\n\n  const theme = { ...useTheme() };\n\n  return (\n    <CollapsibleSidebar\n      togglePosition={ togglePosition }\n      startOpen={ Boolean(open) && Boolean(showSidebar) }\n      showToggle={ showSidebar }\n      placeBeside={ children }>\n\n      { !showSidebar ? null :\n        <div className={ `p-1 h-full ${ theme.sidebarBg } rounded` }>\n          { !title ? null :\n            <div className=\"text-xl font-bold ml-1\">\n              { title }\n            </div>\n          }\n          <div className=\"mb-1\">\n            { Tabs.map(({ icon }, i) => (\n                <div key={ i } onClick={ e => MapActions.setSidebarTab(i) }\n                  className={ `\n                    p-1 rounded-t-lg ${ i === 0 ? \"\" : \"ml-1\" }\n                    ${ theme.menuBg } inline-block\n                  ` }>\n                  <div className={ `\n                      w-10 h-9 hover:${ theme.bg } rounded-t-lg transition\n                      ${ i === sidebarTabIndex ?\n                        `${ theme.bg } ${ theme.menuTextActive }` :\n                        `${ theme.menuBg} cursor-pointer`\n                      } hover:${ theme.menuTextActive }\n                      flex items-center justify-center\n                    ` }>\n                      <span className={ `fa fa-lg ${ icon }` }/>\n                    </div>\n                  </div>\n                ))\n              }\n          </div>\n          <div>\n            { Tabs.map(({ Component }, i) => (\n                <div key={ i } className=\"relative z-10\"\n                  style={ { display: i === sidebarTabIndex ? \"block\" : \"none\" } }>\n                  <Component { ...rest } MapActions={ MapActions }/>\n                </div>\n              ))\n            }\n          </div>\n        </div>\n      }\n\n    </CollapsibleSidebar>\n  )\n}\nexport default Sidebar;\n","import React from \"react\"\n\nimport { ScalableLoading, useTheme } from \"@availabs/avl-components\"\n\nconst LoadingLayer = ({ layer, progress }) => {\n\n  const theme = useTheme();\n\n  return (\n    <div className={ `\n        ${ theme.sidebarBg } w-72 p-1 mt-2\n        rounded-tl rounded-bl rounded-tr-full rounded-br-full\n      ` }\n      style={ {\n      } }>\n      <div className={ `${ theme.menuBg } p-1 rounded-tr-full rounded-br-full` }>\n        <div className={ `${ theme.bg } p-1 rounded-tr-full rounded-br-full flex` }>\n          <div className=\"flex-1 text-lg font-medium flex items-center\">\n            <div className='flex-1'>{ layer.name }</div>\n            <div className={`font-light px-2`}>\n              {layer.state.progress ? `${layer.state.progress}%` : '' }\n            </div>\n          </div>\n          <div className={ `${ theme.menuTextActive }` }>\n            <ScalableLoading scale={ 0.35 } color=\"currentColor\"/>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default LoadingLayer;\n","import React from \"react\"\n\nimport { useTheme } from \"@availabs/avl-components\"\n\nimport { Icon } from \"./LayerPanel\"\n\nconst getTranslate = (pos, { width, height }) => {\n\n  const gap = 30, padding = 10, { x, y } = pos;\n\n  const yMax = height,\n    yTrans = `max(\n      ${ padding }px,\n      min(calc(${ y }px - 50%), calc(${ yMax - padding }px - 100%))\n    )`;\n  if (x < width * 0.5) {\n    return `translate(\n      ${ x + gap }px,\n      ${ yTrans }\n    )`\n  }\n  return `translate(\n    calc(-100% + ${ x - gap }px),\n    ${ yTrans }\n  )`\n}\n\n// const getPinnedTranslateOld = ({ x, y }) => {\n//   const gap = 30;\n//   return `translate(${ x + gap }px, calc(${ y - 20 }px - 50%))`;\n// }\n\nconst getPinnedTranslate = ({ x, y }, orientation) => {\n\n  const gap = 30;\n\n  const yTrans = `calc(${ y }px - 50%)`;\n\n  if (orientation === \"right\") {\n    return `translate(\n      ${ x + gap }px,\n      ${ yTrans }\n    )`\n  }\n  return `translate(\n    calc(-100% + ${ x - gap }px),\n    ${ yTrans }\n  )`\n}\nconst getTransform = ({ x }, orientation) => {\n  if (orientation === \"right\") {\n    return \"translate(-50%, -50%) rotate(45deg) skew(-15deg, -15deg)\"\n  }\n  return \"translate(50%, -50%) rotate(45deg) skew(-15deg, -15deg)\"\n}\n\nconst RemoveButton = ({ orientation, children }) => {\n  const theme = useTheme();\n  return (\n    <div style={ {\n        transform: orientation === \"left\" ?\n          \"translate(-0.75rem, -0.75rem)\" : \"translate(0.75rem, -0.75rem)\"\n      } }\n      className={ `\n        ${ theme.bg }\n        rounded absolute inline-block top-0 z-20\n        ${ orientation === \"left\" ? \"left-0\" : \"right-0\" }\n      ` }>\n      { children }\n    </div>\n  )\n}\n\nexport const PinnedHoverComp = ({ children, remove, id, project, lngLat, width }) => {\n\n  const pos = project(lngLat);\n\n  const orientation = React.useRef(pos.x < width * 0.5 ? \"right\" : \"left\");\n\n  const style = React.useMemo(() => {\n    return {\n      top: \"50%\",\n      transform: getTransform(pos, orientation.current)\n    };\n  }, [pos]);\n\n  const theme = useTheme();\n\n  return (\n    <div className={ `\n        absolute top-0 left-0 z-20 inline-block\n        rounded whitespace-nowrap hover-comp\n        pointer-events-auto\n        p-1 rounded ${ theme.sidebarBg }\n        grid grid-cols-1 gap-1\n      ` }\n      style={ {\n        transform: getPinnedTranslate(pos, orientation.current),\n        boxShadow: \"2px 2px 8px 0px rgba(0, 0, 0, 0.75)\"\n      } }>\n\n      <div className={ `\n          absolute w-6 h-6 ${ theme.sidebarBg } rounded-bl rounded-tr\n          ${ orientation.current === \"left\" ? \"right-0\" : \"left-0\" }\n        ` }\n        style={ style }/>\n\n        { children }\n\n        <RemoveButton orientation={ orientation.current }>\n          <Icon onClick={ e => remove(id) }>\n            <span className=\"fa fa-times\"/>\n          </Icon>\n        </RemoveButton>\n\n    </div>\n  )\n}\n\nexport const HoverCompContainer = ({ show, children, lngLat, project, ...rest }) => {\n  const theme = useTheme();\n\n  const pos = project(lngLat);\n\n  return (\n    <div className={ `\n        absolute top-0 left-0 z-20\n        rounded whitespace-nowrap hover-comp\n        pointer-events-none\n        p-1 rounded ${ theme.sidebarBg }\n        grid grid-cols-1 gap-1\n      ` }\n      style={ {\n        display: show ? \"grid\" : \"none\",\n        transform: getTranslate(pos, rest),\n        boxShadow: \"2px 2px 8px 0px rgba(0, 0, 0, 0.75)\",\n        // transition: \"transform 0.15s ease-out\"\n      } }>\n\n      { children }\n\n    </div>\n  )\n}\n","import React from \"react\";\n\nimport get from \"lodash.get\";\n\nimport { useTheme, Legend } from \"@availabs/avl-components\";\n\nimport { Icon } from \"./LayerPanel\";\n\nconst InfoBoxContainer = ({\n  activeLayers,\n  width = 320,\n  padding = 8,\n  MapActions,\n  ...props\n}) => {\n  const [legendLayers, infoBoxLayers, infoBoxWidth] = activeLayers.reduce(\n    (a, c) => {\n      if (c.legend) {\n        const { show = true } = c.legend;\n        let bool = show;\n        if (typeof show === \"function\") {\n          bool = show(c);\n        }\n        if (bool) {\n          a[0].push(c);\n        }\n      }\n      const shownInfoBoxes = c.infoBoxes.filter(({ show = true }) => {\n        let bool = show;\n        if (typeof show === \"function\") {\n          bool = show(c);\n        }\n        return bool;\n      });\n      if (shownInfoBoxes.length) {\n        a[1].push([c, shownInfoBoxes]);\n        a[2] = Math.max(\n          a[2],\n          c.infoBoxes.reduce((aa, cc) => Math.max(aa, get(cc, \"width\", 0)), 0)\n        );\n      }\n      return a;\n    },\n    [[], [], width]\n  );\n\n  const theme = useTheme();\n\n  return (\n    <div\n      className={`\n        absolute right-0 top-0 bottom-0\n        flex flex-col items-end z-30\n        pointer-events-none\n      `}\n      style={{ padding: `${padding}px` }}\n    >\n      {legendLayers.map((layer) => (\n        <LegendContainer\n          key={layer.id}\n          {...layer.legend}\n          MapActions={MapActions}\n          layer={layer}\n          padding={padding}\n          infoBoxWidth={infoBoxWidth}\n        />\n      ))}\n\n      {!infoBoxLayers.length ? null : (\n        <div\n          className={`\n            ${theme.sidebarBg} p-1 rounded\n            grid grid-cols-1 gap-1\n            pointer-events-auto overflow-y-auto scrollbar-sm\n          `}\n          style={{\n            width: `${infoBoxWidth - padding * 2}px`,\n          }}\n        >\n          {infoBoxLayers.map(([layer, infoBoxes]) => (\n            <div\n              key={layer.id}\n              className={`\n                  grid grid-cols-1 gap-1\n                  ${theme.menuBg} p-1 rounded\n                `}\n            >\n              {infoBoxes.map((box, i) => (\n                <InfoBox\n                  key={i}\n                  {...props}\n                  {...box}\n                  layer={layer}\n                  MapActions={MapActions}\n                  activeLayers={activeLayers}\n                />\n              ))}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\nexport default InfoBoxContainer;\n\nconst InfoBox = ({\n  layer,\n  Header,\n  Component,\n  MapActions,\n  open = true,\n  ...props\n}) => {\n  const [isOpen, setOpen] = React.useState(open);\n\n  const theme = useTheme();\n\n  return (\n    <div\n      className={`\n      ${theme.bg} px-1 rounded\n    `}\n    >\n      {!Header ? (\n        <div className=\"pt-1\" />\n      ) : (\n        <div\n          className={`\n            rounded text-lg font-bold\n            flex items-center\n          `}\n        >\n          <div\n            className={`\n              flex-1 ${isOpen ? \"opacity-100\" : \"opacity-50\"} transition\n            `}\n          >\n            {typeof Header === \"function\" ? <Header layer={layer} /> : Header}\n          </div>\n          <div className=\"text-base\">\n            <Icon onClick={(e) => setOpen(!isOpen)}>\n              <span className={`fa fa-${isOpen ? \"minus\" : \"plus\"}`} />\n            </Icon>\n          </div>\n        </div>\n      )}\n      {!Component ? null : (\n        <div className={`${isOpen ? \"block\" : \"hidden\"}`}>\n          {typeof Component === \"function\" ? (\n            <Component layer={layer} MapActions={MapActions} {...props} />\n          ) : (\n            Component\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst LegendContainer = ({\n  infoBoxWidth,\n  padding,\n  width = 420,\n  Title,\n  MapActions,\n  layer,\n  ...props\n}) => {\n  const theme = useTheme();\n\n  return (\n    <div\n      className={`\n      ${theme.sidebarBg} p-1 rounded pointer-events-auto\n    `}\n      style={{\n        width: `${Math.max(infoBoxWidth, width) - padding * 2}px`,\n        marginBottom: \"-0.25rem\",\n      }}\n    >\n      <div className={`${theme.menuBg} p-1 rounded`}>\n        <div className={`${theme.bg} px-1 rounded`}>\n          {Title ? (\n            <div className={`font-medium text-lg ${theme.menuText} py-1`}>\n              {typeof Title === \"function\" ? (\n                <Title layer={layer} MapActions={MapActions} />\n              ) : (\n                Title\n              )}\n            </div>\n          ) : (\n            <div className=\"pt-1\" />\n          )}\n          <Legend {...props} />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\"\n\nimport { useTheme, Draggable } from \"@availabs/avl-components\"\n\nconst DraggableModal = ({ Header,\n                          Component,\n                          layer,\n                          MapActions,\n                          modalData,\n                          activeLayers,\n                          layersLoading,\n                          loadingLayers,\n                          inactiveLayers,\n                          ...props }) => {\n\n  const theme = useTheme();\n\n  const { layerId, modalKey, zIndex } = modalData;\n\n  return (\n    <Draggable { ...props } className=\"pointer-events-auto\"\n      onClick={ e => MapActions.bringModalToFront(layerId, modalKey) }\n      onDragStart={ e => MapActions.bringModalToFront(layerId, modalKey) }\n      style={ { zIndex } }\n      toolbar={ [\n        { icon: \"fa-times\",\n          onClick: e => MapActions.closeModal(layerId, modalKey)\n        }\n      ] }>\n      <div className=\"m-1\">\n        { !Header ? null :\n          <div className=\"font-bold text-xl ml-2\">\n            { typeof Header === \"function\" ?\n              <Header layer={ layer } MapActions={ MapActions }/> :\n              Header\n            }\n          </div>\n        }\n        <div className={ `p-1 rounded ${ theme.menuBg }` }>\n          <div className={ `p-1 rounded ${ theme.bg }` }>\n            { <Component layer={ layer }\n                MapActions={ MapActions }\n                activeLayers={ activeLayers }\n                layersLoading={ layersLoading }\n                loadingLayers={ loadingLayers }\n                inactiveLayers={ inactiveLayers }/>\n            }\n          </div>\n        </div>\n      </div>\n    </Draggable>\n  )\n}\nexport default DraggableModal;\n","import React from \"react\"\n\nimport { useTheme } from \"@availabs/avl-components\"\n\nconst MapAction = ({ icon, tooltip, actionFunc,\n                      MapActions, layer,\n                      ...rest }) => {\n  const theme = useTheme();\n  return (\n    <div className={ `${ theme.sidebarBg } p-1 rounded-2xl mb-2` }>\n      <div className={ `${ theme.menuBg } p-1 rounded-2xl` }>\n        <div className={ `\n            ${ theme.bg } hover:${ theme.accent1 }\n            ${ theme.menuText } ${ theme.menuTextHover }\n            w-10 h-10 rounded-2xl cursor-pointer text-lg\n            flex items-center justify-center\n          ` }\n          onClick={ e => actionFunc(MapActions, layer, rest) }>\n          <span className={ `fa ${ icon }` }/>\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default MapAction;\n","import React from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport get from \"lodash.get\";\n\nimport { useSetSize, useFalcor } from \"@availabs/avl-components\";\n// import {  } from 'modules/avl-components/src'\n\nimport Sidebar from \"./components/Sidebar\";\nimport LoadingLayer from \"./components/LoadingLayer\";\nimport {\n  HoverCompContainer,\n  PinnedHoverComp,\n} from \"./components/HoverCompContainer\";\nimport InfoBoxes from \"./components/InfoBoxContainer\";\nimport DraggableModal from \"./components/DraggableModal\";\nimport MapAction from \"./components/MapAction\";\n\nexport const DefaultStyles = [\n  { name: \"Dark\", style: \"mapbox://styles/am3081/ckm85o7hq6d8817nr0y6ute5v\" },\n  { name: \"Light\", style: \"mapbox://styles/am3081/ckm86j4bw11tj18o5zf8y9pou\" },\n  {\n    name: \"Satellite\",\n    style: \"mapbox://styles/am3081/cjya6wla3011q1ct52qjcatxg\",\n  },\n  {\n    name: \"Satellite Streets\",\n    style: \"mapbox://styles/am3081/cjya70364016g1cpmbetipc8u\",\n  },\n];\n\nconst DefaultMapOptions = {\n  center: [-74.180647, 42.58],\n  minZoom: 2,\n  zoom: 10,\n  preserveDrawingBuffer: true,\n  // style: \"mapbox://styles/am3081/cjqqukuqs29222sqwaabcjy29\",\n  styles: DefaultStyles,\n  attributionControl: false,\n  logoPosition: \"bottom-right\",\n};\n\nconst DefaultSidebar = {\n  tabs: [\"layers\", \"styles\"],\n  title: \"\",\n  togglePosition: \"top\",\n};\n\nlet idCounter = 0;\nconst getUniqueId = () => `unique-id-${++idCounter}`;\n\nconst DefaultStaticOptions = {\n  size: [80, 50],\n  center: [-74.180647, 42.58],\n  zoom: 2.5,\n};\nconst getStaticImageUrl = (style, options = {}) => {\n  const { size, center, zoom } = { ...DefaultStaticOptions, ...options };\n  return (\n    `https://api.mapbox.com/styles/v1/${style.slice(16)}/static/` +\n    `${center},${zoom}/${size.join(\"x\")}` +\n    `?attribution=false&logo=false&access_token=${mapboxgl.accessToken}`\n  );\n};\n\nconst InitialState = {\n  map: null,\n  initializedLayers: [],\n  activeLayers: [],\n  dynamicLayers: [],\n  layersLoading: {},\n  hoverData: {\n    data: new Map(),\n    pos: [0, 0],\n    lngLat: {},\n  },\n  pinnedHoverComps: [],\n  pinnedMapMarkers: [],\n  mapStyles: [],\n  styleIndex: 0,\n  sidebarTabIndex: 0,\n  modalData: [],\n  prevLayerStates: {},\n  layerStates: {},\n};\nconst Reducer = (state, action) => {\n  const { type, ...payload } = action;\n  switch (type) {\n    case \"init-layer\":\n      return {\n        ...state,\n        initializedLayers: [...state.initializedLayers, payload.layer.id],\n        // activeLayers: [\n        //   payload.layer.id,\n        //   ...state.activeLayers\n        // ],\n        // layerStates: {\n        //   ...state.layerStates,\n        //   [payload.layer.id]: payload.layer.state\n        // }\n      };\n    case \"loading-start\":\n      return {\n        ...state,\n        layersLoading: {\n          ...state.layersLoading,\n          [payload.layerId]:\n            get(state, [\"layersLoading\", payload.layerId], 0) + 1,\n        },\n      };\n    case \"loading-stop\":\n      return {\n        ...state,\n        // activeLayers: [...state.activeLayers],\n        layersLoading: {\n          ...state.layersLoading,\n          [payload.layerId]: Math.max(\n            0,\n            state.layersLoading[payload.layerId] - 1\n          ),\n        },\n      };\n    case \"activate-layer\":\n      return {\n        ...state,\n        activeLayers: [payload.layer, ...state.activeLayers],\n        layerStates: {\n          ...state.layerStates,\n          [payload.layer.id]: payload.layer.state,\n        },\n        /*prevLayerStates: {\n          ...state.prevLayerStates,\n          [payload.layer.id]: payload.layer.state,\n        },*/\n      };\n    case \"deactivate-layer\":\n      return {\n        ...state,\n        activeLayers: state.activeLayers.filter(\n          ({ id }) => id !== payload.layerId\n        ),\n      };\n    case \"hover-layer-move\": {\n      const { data, layer, HoverComp, pinnable, sortOrder, ...rest } = payload;\n      state.hoverData.data.set(layer.id, {\n        data,\n        HoverComp,\n        layer,\n        pinnable,\n        sortOrder,\n      });\n      return {\n        ...state,\n        hoverData: {\n          ...state.hoverData,\n          ...rest,\n        },\n      };\n    }\n    case \"hover-layer-leave\": {\n      const { layer } = payload;\n      state.hoverData.data.delete(layer.id);\n      return {\n        ...state,\n        hoverData: {\n          ...state.hoverData,\n        },\n      };\n    }\n    case \"pin-hover-comp\": {\n      if (!state.hoverData.data.size) return state;\n\n      const newPinned = {\n        id: getUniqueId(),\n        HoverComps: [...state.hoverData.data.values()]\n          .filter(({ pinnable }) => pinnable)\n          .sort((a, b) => a.sortOrder - b.sortOrder),\n        ...payload,\n      };\n      if (newPinned.HoverComps.length) {\n        return {\n          ...state,\n          pinnedHoverComps: [...state.pinnedHoverComps, newPinned],\n        };\n      }\n      return state;\n    }\n\n    case \"remove-pinned\":\n      return {\n        ...state,\n        pinnedHoverComps: state.pinnedHoverComps.filter((phc) => {\n          if (phc.id !== payload.id) return true;\n          phc.marker.remove();\n          return false;\n        }),\n      };\n    case \"add-dynamic-layer\":\n      return {\n        ...state,\n        dynamicLayers: [...state.dynamicLayers, payload.layer],\n      };\n    case \"remove-dynamic-layer\":\n      return {\n        ...state,\n        dynamicLayers: state.dynamicLayers.filter(\n          ({ id }) => id !== payload.layer.id\n        ),\n      };\n    case \"show-modal\": {\n      const { layerId, modalKey } = payload;\n      if (\n        state.modalData.reduce(\n          (a, c) => a || (c.layerId === layerId && c.modalKey === modalKey),\n          false\n        )\n      )\n        return state;\n      return {\n        ...state,\n        modalData: [...state.modalData, { layerId, modalKey, zIndex: 0 }],\n      };\n    }\n    case \"bring-modal-to-front\": {\n      const { layerId, modalKey } = payload;\n      return {\n        ...state,\n        modalData: state.modalData.map((md) => ({\n          ...md,\n          zIndex: md.layerId === layerId && md.modalKey === modalKey ? 10 : 0,\n        })),\n      };\n    }\n    // case \"update-modal-data\": {\n    //   const { layerId, modalKey, data } = payload;\n    //   return {\n    //     ...state,\n    //     modalData: state.modalData.map(md => {\n    //       if ((md.layerId === layerId) && (md.modalKey === modalKey)) {\n    //         return { ...md, data };\n    //       }\n    //       return md;\n    //     })\n    //   }\n    // }\n    case \"close-modal\":\n      return {\n        ...state,\n        modalData: state.modalData.filter(\n          ({ layerId, modalKey }) =>\n            !(layerId === payload.layerId && modalKey === payload.modalKey)\n        ),\n      };\n    case \"layer-update\": {\n      const { layer, newState } = payload;\n      return {\n        ...state,\n        layerStates: {\n          ...state.layerStates,\n          [layer.id]: newState,\n        },\n      };\n    }\n    case \"layer-updated\": {\n      const { layer } = payload;\n      return {\n        ...state,\n        // prevLayerStates: {\n        //   ...state.prevLayerStates,\n        //   [layer.id]: state.layerStates[layer.id],\n        // },\n      };\n    }\n    case \"set-map-style\":\n    case \"switch-tab\":\n    case \"map-loaded\":\n    case \"update-state\":\n      return {\n        ...state,\n        ...payload,\n      };\n    default:\n      return state;\n  }\n};\n\nconst EmptyArray = [];\nconst EmptyObject = {};\n\n// const toolbarFuncRunner = args => {\n//   if (!args.length) return [];\n//   const [arg, ...rest] = args;\n//   if (typeof arg === \"function\") {\n//     return [arg(...toolbarFuncRunner(rest))];\n//   }\n//   return [arg, ...toolbarFuncRunner(rest)];\n// }\n// const toolbarFuncArgs = ({ action }, layer, MapActions, map) => (\n//   action.map(action => {\n//     if (typeof action === \"function\") return action;\n//     if (typeof action === \"string\") {\n//       const [arg1, arg2] = action.split(\".\");\n//       if (arg1 === \"map\") {\n//         return arg2 ? MapActions[arg2] : map;\n//       }\n//       else if ((arg1 === \"this\") && arg2) {\n//         return layer[arg2].bind(layer);\n//       }\n//     }\n//     return action;\n//   })\n// )\n\nconst AvlMap = (props) => {\n  const {\n    accessToken,\n    mapOptions = EmptyObject,\n    layers = EmptyArray,\n    sidebar = EmptyObject,\n    layerProps = EmptyObject,\n    navigationControl = \"bottom-right\",\n  } = props;\n\n  const sidebarProps = React.useMemo(() => {\n    if (typeof sidebar !== \"object\") {\n      return {\n        showSidebar: Boolean(sidebar),\n      };\n    }\n    return {\n      showSidebar: true,\n      ...sidebar,\n    };\n  }, [sidebar]);\n\n  const { falcor, falcorCache } = useFalcor();\n\n  const [state, dispatch] = React.useReducer(Reducer, InitialState);\n\n  const updateHover = React.useCallback((hoverData) => {\n    dispatch(hoverData);\n  }, []);\n\n  const projectLngLat = React.useCallback(\n    (lngLat) => {\n      return state.map.project(lngLat);\n    },\n    [state.map]\n  );\n\n  const updateFilter = React.useCallback(\n    (layer, filterName, value) => {\n      if (!get(layer, [\"filters\", filterName], null)) return;\n\n      dispatch({ type: \"loading-start\", layerId: layer.id });\n\n      const prevValue = layer.filters[filterName].value;\n\n      layer.filters = {\n        ...layer.filters,\n        [filterName]: {\n          ...layer.filters[filterName],\n          prevValue,\n          value,\n        },\n      };\n\n      Promise.resolve(layer.onFilterChange(filterName, value, prevValue))\n        .then(() => layer.fetchData(falcor))\n        .then(() => layer.render(state.map, falcor))\n        .then(() => {\n          dispatch({ type: \"loading-stop\", layerId: layer.id });\n        });\n    },\n    [state.map, falcor]\n  );\n\n  const fetchData = React.useCallback(\n    (layer) => {\n      dispatch({ type: \"loading-start\", layerId: layer.id });\n\n      Promise.resolve(layer.fetchData(falcor))\n        .then(() => layer.render(state.map, falcor))\n        .then(() => {\n          dispatch({ type: \"loading-stop\", layerId: layer.id });\n        });\n    },\n    [state.map, falcor]\n  );\n\n  const updateLegend = React.useCallback(\n    (layer, update) => {\n      if (!get(layer, \"legend\", null)) return;\n\n      console.log(\"update Legend\", layer.legend, update);\n      layer.legend = {\n        ...layer.legend,\n        ...update,\n      };\n      layer.render(state.map, falcor);\n\n      dispatch({ type: \"update-state\" });\n    },\n    [state.map, falcor]\n  );\n\n  const addDynamicLayer = React.useCallback((layer) => {\n    layer.isDynamic = true;\n\n    dispatch({\n      type: \"add-dynamic-layer\",\n      layer,\n    });\n  }, []);\n  const removeDynamicLayer = React.useCallback(\n    (layer) => {\n      layer._onRemove(state.map);\n\n      dispatch({\n        type: \"remove-dynamic-layer\",\n        layer,\n      });\n    },\n    [state.map]\n  );\n  const toggleVisibility = React.useCallback(\n    (layer) => {\n      layer.toggleVisibility(state.map);\n\n      dispatch({ type: \"update-state\" });\n    },\n    [state.map]\n  );\n  const addLayer = React.useCallback(\n    (layer) => {\n      layer\n        ._onAdd(state.map, falcor, updateHover)\n        .then(() => layer.render(state.map, falcor));\n\n      dispatch({\n        type: \"activate-layer\",\n        layer,\n      });\n    },\n    [state.map, falcor, updateHover /*, singleLayer*/]\n  );\n  const removeLayer = React.useCallback(\n    (layer) => {\n      layer._onRemove(state.map);\n\n      dispatch({\n        type: \"deactivate-layer\",\n        layerId: layer.id,\n      });\n    },\n    [state.map]\n  );\n  const setSidebarTab = React.useCallback((sidebarTabIndex) => {\n    dispatch({\n      type: \"switch-tab\",\n      sidebarTabIndex,\n    });\n  }, []);\n\n  const showModal = React.useCallback((layerId, modalKey) => {\n    dispatch({\n      type: \"show-modal\",\n      layerId,\n      modalKey,\n    });\n  }, []);\n  const closeModal = React.useCallback((layerId, modalKey) => {\n    dispatch({\n      type: \"close-modal\",\n      layerId,\n      modalKey,\n    });\n  }, []);\n  const bringModalToFront = React.useCallback((layerId, modalKey) => {\n    dispatch({\n      type: \"bring-modal-to-front\",\n      layerId,\n      modalKey,\n    });\n  }, []);\n\n  const removePinnedHoverComp = React.useCallback((id) => {\n    dispatch({\n      type: \"remove-pinned\",\n      id,\n    });\n  }, []);\n  const addPinnedHoverComp = React.useCallback(\n    ({ lngLat, hoverData }) => {\n      const marker = new mapboxgl.Marker().setLngLat(lngLat).addTo(state.map);\n      dispatch({\n        type: \"pin-hover-comp\",\n        marker,\n        lngLat,\n      });\n    },\n    [state.map]\n  );\n\n  const saveMapAsImage = React.useCallback(\n    (fileName = \"map.png\") => {\n      const canvas = state.map.getCanvas();\n      const a = document.createElement(\"a\");\n      a.download = fileName;\n      a.href = canvas.toDataURL();\n      a.click();\n    },\n    [state.map]\n  );\n\n  const setMapStyle = React.useCallback(\n    (styleIndex) => {\n      state.map.once(\"style.load\", (e) => {\n        state.activeLayers\n          .slice()\n          .reverse()\n          .reduce((promise, layer) => {\n            return promise.then(() =>\n              layer.onMapStyleChange(state.map, falcor, updateHover)\n            );\n          }, Promise.resolve());\n      });\n      state.activeLayers.forEach((layer) => {\n        layer._onRemove(state.map);\n      });\n      state.map.setStyle(state.mapStyles[styleIndex].style);\n      dispatch({\n        type: \"set-map-style\",\n        styleIndex,\n      });\n    },\n    [state.map, state.mapStyles, state.activeLayers, updateHover, falcor]\n  );\n\n  const MapActions = React.useMemo(\n    () => ({\n      toggleVisibility,\n      addLayer,\n      removeLayer,\n      addDynamicLayer,\n      removeDynamicLayer,\n      updateLegend,\n      setSidebarTab,\n      showModal,\n      closeModal,\n      updateFilter,\n      fetchData,\n      removePinnedHoverComp,\n      addPinnedHoverComp,\n      bringModalToFront,\n      projectLngLat,\n      saveMapAsImage,\n    }),\n    [\n      toggleVisibility,\n      addLayer,\n      removeLayer,\n      addDynamicLayer,\n      removeDynamicLayer,\n      updateLegend,\n      setSidebarTab,\n      fetchData,\n      saveMapAsImage,\n      showModal,\n      closeModal,\n      updateFilter,\n      bringModalToFront,\n      removePinnedHoverComp,\n      addPinnedHoverComp,\n      projectLngLat,\n    ]\n  );\n\n  const MapOptions = React.useRef({ ...DefaultMapOptions, ...mapOptions });\n\n  const id = React.useRef(props.id || getUniqueId());\n\n  // LOAD MAPBOX GL MAP\n  React.useEffect(() => {\n    if (!accessToken) return;\n\n    mapboxgl.accessToken = accessToken;\n\n    const regex = /^mapbox:\\/\\/styles\\//;\n\n    const { style, styles, ...Options } = MapOptions.current;\n\n    const mapStyles = styles.map((style) => ({\n      ...style,\n      imageUrl: getStaticImageUrl(style.style, { center: Options.center }),\n    }));\n    let styleIndex = 0;\n\n    if (regex.test(style)) {\n      const index = mapStyles.reduce((a, c, i) => {\n        return c.style === style ? i : a;\n      }, -1);\n      if (index === -1) {\n        mapStyles.unshift({\n          name: \"Unspecified Style\",\n          style,\n          imageUrl: getStaticImageUrl(style, Options),\n        });\n      } else {\n        styleIndex = index;\n      }\n    }\n\n    const map = new mapboxgl.Map({\n      container: id.current,\n      ...Options,\n      style: mapStyles[styleIndex].style,\n    });\n\n    if (navigationControl) {\n      map.addControl(new mapboxgl.NavigationControl(), navigationControl);\n    }\n\n    map.on(\"move\", (e) => {\n      dispatch({ type: \"update-state\", mapMoved: performance.now() });\n    });\n\n    map.once(\"load\", (e) => {\n      dispatch({ type: \"map-loaded\", map, mapStyles, styleIndex });\n    });\n\n    return () => map.remove();\n  }, [accessToken]);\n\n  // INITIALIZE LAYERS\n  React.useEffect(() => {\n    if (!state.map) return;\n\n    [...layers, ...state.dynamicLayers]\n      .filter(({ id }) => !state.initializedLayers.includes(id))\n      .reverse()\n      .reduce((promise, layer) => {\n        dispatch({ type: \"init-layer\", layer });\n\n        layer.dispatchUpdate = (layer, newState) => {\n          dispatch({\n            type: \"layer-update\",\n            newState,\n            layer,\n          });\n        };\n\n        for (const filterName in layer.filters) {\n          layer.filters[filterName].onChange = (v) =>\n            updateFilter(layer, filterName, v);\n        }\n\n        layer.toolbar.forEach((tool) => {\n          if (typeof tool.action === \"function\") {\n            tool.actionFunc = tool.action.bind(layer);\n          }\n        });\n\n        layer.mapActions.forEach((action) => {\n          action.actionFunc = action.action.bind(layer);\n        });\n\n        dispatch({ type: \"loading-start\", layerId: layer.id });\n\n        return promise\n          .then(() => layer._init(state.map, falcor, MapActions))\n          .then(() => {\n            if (layer.setActive) {\n              return layer\n                .fetchData(falcor)\n                .then(() => layer._onAdd(state.map, falcor, updateHover))\n                .then(() => layer.render(state.map, falcor))\n                .then(() => dispatch({ type: \"activate-layer\", layer }));\n            }\n          })\n          .then(() => {\n            dispatch({ type: \"loading-stop\", layerId: layer.id });\n          });\n      }, Promise.resolve());\n  }, [\n    state.map,\n    state.dynamicLayers,\n    falcor,\n    layers,\n    MapActions,\n    updateFilter,\n    updateHover,\n    state.initializedLayers,\n  ]);\n\n  const pinHoverComp = React.useCallback(\n    ({ lngLat }) => {\n      const marker = new mapboxgl.Marker().setLngLat(lngLat).addTo(state.map);\n      dispatch({\n        type: \"pin-hover-comp\",\n        marker,\n        lngLat,\n      });\n    },\n    [state.map]\n  );\n\n  const hovering = Boolean(state.hoverData.data.size);\n\n  // APPLY CLICK LISTENER TO MAP TO ALLOW PINNED HOVER COMPS\n  React.useEffect(() => {\n    if (!hovering) return;\n\n    state.map.on(\"click\", pinHoverComp);\n\n    return () => state.map.off(\"click\", pinHoverComp);\n  }, [state.map, pinHoverComp, hovering]);\n\n  const loadingLayers = React.useMemo(() => {\n    return [...layers, ...state.dynamicLayers].filter((layer) =>\n      Boolean(state.layersLoading[layer.id])\n    );\n  }, [layers, state.dynamicLayers, state.layersLoading]);\n\n  const { HoverComps, ...hoverData } = React.useMemo(() => {\n    const HoverComps = [...state.hoverData.data.values()].sort(\n      (a, b) => a.sortOrder - b.sortOrder\n    );\n    return { ...state.hoverData, show: Boolean(HoverComps.length), HoverComps };\n  }, [state.hoverData]);\n\n  // DETERMINE ACTIVE AND INACTIVE LAYERS\n  const inactiveLayers = React.useMemo(() => {\n    return [...layers, ...state.dynamicLayers].filter((layer) => {\n      return (\n        !state.initializedLayers.includes(layer.id) ||\n        !state.activeLayers.includes(layer)\n      );\n    });\n  }, [\n    layers,\n    state.dynamicLayers,\n    state.initializedLayers,\n    state.activeLayers,\n  ]);\n\n  // SEND PROPS TO ACTIVE LAYERS\n  React.useEffect(() => {\n    state.activeLayers.forEach((layer) => {\n      const props = get(layerProps, layer.id, {});\n      layer.receiveProps(props, state.map, falcor, MapActions);\n    });\n  }, [state.map, falcor, state.activeLayers, layerProps, MapActions]);\n\n  // CHECK FOR LAYER STATE UPDATE\n  // React.useEffect(() => {\n  //   state.activeLayers.forEach((layer) => {\n  //     const layerState = get(state.layerStates, layer.id, {}),\n  //       prevLayerState = get(state.prevLayerStates, layer.id, {});\n  //     if (layerState !== prevLayerState) {\n  //       dispatch({\n  //         type: \"layer-updated\",\n  //         layer,\n  //       });\n  //       fetchData(layer);\n  //     }\n  //   });\n  // }, [state.layerStates, state.prevLayerStates, fetchData]);\n\n  const ref = React.useRef(null),\n    size = useSetSize(ref);\n\n  const Modals = React.useMemo(() => {\n    return state.modalData.reduce((a, md) => {\n      const { modal, layer } = state.activeLayers.reduce((a, c) => {\n        return c.id === md.layerId\n          ? { modal: get(c, [\"modals\", md.modalKey]), layer: c }\n          : a;\n      }, {});\n      if (modal) {\n        a.push({ ...modal, modalData: md, layer });\n      }\n      return a;\n    }, []);\n  }, [state.activeLayers, state.modalData]);\n\n  const AllMapActions = React.useMemo(() => {\n    return { ...MapActions, setMapStyle };\n  }, [MapActions, setMapStyle]);\n\n  const mapActions = React.useMemo(() => {\n    return state.activeLayers.reduce((a, c) => {\n      const actions = get(c, \"mapActions\", []).map((action) => ({\n        action,\n        layer: c,\n      }));\n      return [...a, ...actions];\n    }, []);\n  }, [state.activeLayers]);\n\n  return (\n    <div ref={ref} className=\"w-full h-full relative focus:outline-none\">\n      <div id={id.current} className=\"w-full h-full relative\" />\n\n      <Sidebar\n        {...DefaultSidebar}\n        {...sidebarProps}\n        togglePosition={\n          mapActions.length ? \"middle\" : sidebarProps.togglePosition\n        }\n        mapboxMap={state.map}\n        layerStates={state.layerStates}\n        sidebarTabIndex={state.sidebarTabIndex}\n        mapStyles={state.mapStyles}\n        styleIndex={state.styleIndex}\n        layersLoading={state.layersLoading}\n        inactiveLayers={inactiveLayers}\n        activeLayers={state.activeLayers}\n        loadingLayers={loadingLayers}\n        MapActions={AllMapActions}\n      >\n        <div className=\"absolute top-0\">\n          {mapActions.map(({ action, layer }, i) => (\n            <MapAction\n              key={`${layer.id}-${i}`}\n              layer={layer}\n              {...action}\n              MapActions={AllMapActions}\n              mapboxMap={state.map}\n              layerStates={state.layerStates}\n              layersLoading={state.layersLoading}\n              inactiveLayers={inactiveLayers}\n              activeLayers={state.activeLayers}\n              loadingLayers={loadingLayers}\n            />\n          ))}\n        </div>\n\n        <div className=\"absolute bottom-0\">\n          {loadingLayers.map((layer) => (\n            <LoadingLayer key={layer.id} layer={layer} />\n          ))}\n        </div>\n      </Sidebar>\n\n      <InfoBoxes\n        activeLayers={state.activeLayers}\n        layersLoading={state.layersLoading}\n        loadingLayers={loadingLayers}\n        inactiveLayers={inactiveLayers}\n        MapActions={AllMapActions}\n        mapboxMap={state.map}\n        layerStates={state.layerStates}\n      />\n\n      <div\n        className={`\n        absolute top-0 bottom-0 left-0 right-0 z-50\n        pointer-events-none overflow-hidden\n      `}\n      >\n        {Modals.map(({ modalData, ...data }) => (\n          <DraggableModal\n            key={`${modalData.layerId}-${modalData.modalKey}`}\n            {...data}\n            bounds={size}\n            modalData={modalData}\n            MapActions={AllMapActions}\n            mapboxMap={state.map}\n            layerStates={state.layerStates}\n            activeLayers={state.activeLayers}\n            layersLoading={state.layersLoading}\n            loadingLayers={loadingLayers}\n            inactiveLayers={inactiveLayers}\n          />\n        ))}\n\n        {state.pinnedHoverComps.map(\n          ({ HoverComps, data, id, ...hoverData }) => (\n            <PinnedHoverComp\n              {...hoverData}\n              {...size}\n              remove={removePinnedHoverComp}\n              project={projectLngLat}\n              key={id}\n              id={id}\n            >\n              {HoverComps.map(({ HoverComp, data, layer }, i) => (\n                <HoverComp\n                  key={layer.id}\n                  layer={layer}\n                  data={data}\n                  activeLayers={state.activeLayers}\n                  layersLoading={state.layersLoading}\n                  loadingLayers={loadingLayers}\n                  inactiveLayers={inactiveLayers}\n                  MapActions={AllMapActions}\n                  mapboxMap={state.map}\n                  layerStates={state.layerStates}\n                  pinned={true}\n                />\n              ))}\n            </PinnedHoverComp>\n          )\n        )}\n\n        {!Boolean(state.hoverData.data.size) ? null : (\n          <HoverCompContainer {...hoverData} {...size} project={projectLngLat}>\n            {HoverComps.map(({ HoverComp, data, layer }, i) => (\n              <HoverComp\n                key={layer.id}\n                layer={layer}\n                data={data}\n                activeLayers={state.activeLayers}\n                layersLoading={state.layersLoading}\n                loadingLayers={loadingLayers}\n                inactiveLayers={inactiveLayers}\n                MapActions={AllMapActions}\n                mapboxMap={state.map}\n                layerStates={state.layerStates}\n                pinned={false}\n              />\n            ))}\n          </HoverCompContainer>\n        )}\n      </div>\n    </div>\n  );\n};\nexport { AvlMap };\n","import React from \"react\"\n\nimport { useTheme } from \"@availabs/avl-components\"\n\nconst DefaultHoverComp = ({ data, layer }) => {\n  const theme = useTheme();\n\n  const groups = data.reduce((a, c, i) => {\n    if ((i === 0) || (c.length === 1)) {\n      a.push([]);\n    }\n    const ii = a.length - 1;\n    a[ii].push(c);\n    return a;\n  }, []);\n\n  return (\n    <div className={ `\n      ${ theme.menuBg } p-1 rounded relative z-20 grid grid-cols-1 gap-1\n    ` }>\n      { groups.map((rows, g) => (\n          <div key={ g } className={ `rounded relative px-1 ${ theme.bg }` }>\n            { rows.map((row, i) => (\n                <div key={ i } className=\"flex\">\n                  { row.map((d, ii) =>\n                      <div key={ ii }\n                        className={ `\n                          ${ ii === 0 ? \"flex-1 font-bold\" : \"flex-0\" }\n                          ${ row.length > 1 && ii === 0 ? \"mr-4\" : \"\" }\n                          ${ row.length === 1 && ii === 0 ? `border-b-2 text-lg ${ i > 0 ? \"mt-1\" : \"\" }` : \"\" }\n                        ` }>\n                        { d }\n                      </div>\n                    )\n                  }\n                </div>\n              ))\n            }\n          </div>\n        ))\n      }\n    </div>\n  )\n}\nexport default DefaultHoverComp;\n","import mapboxgl from \"mapbox-gl\"\n\nimport { hasValue } from \"@availabs/avl-components\"\n\nimport DefaultHoverComp from \"./components/DefaultHoverComp\"\n\nimport get from \"lodash.get\"\n\nlet id = -1;\nconst getLayerId = () => `avl-layer-${ ++id }`;\n\nconst DefaultCallback = () => null;\n\nconst DefaultOptions = {\n  setActive: true,\n  isDynamic: false,\n  filters: {},\n  modals: {},\n  mapActions: [],\n  sources: [],\n  layers: [],\n  isVisible: true,\n  toolbar: [\"toggle-visibility\"],\n  legend: null,\n  infoBoxes: [],\n  state: {},\n  mapboxMap: null,\n  onHover: false,\n  onClick: false,\n  onBoxSelect: false\n}\n\nclass LayerContainer {\n  constructor(options = {}) {\n\n    const Options = { ...DefaultOptions, ...options };\n    for (const key in Options) {\n      this[key] = Options[key];\n    }\n\n    this.id = getLayerId();\n\n    this.layerVisibility = {};\n\n    this.needsRender = this.setActive;\n\n    this.callbacks = [];\n    this.hoveredFeatures = new Map();\n\n    this.dispatchUpdate = () => {};\n\n    this.updateState = this.updateState.bind(this);\n  }\n  _init(mapboxMap, falcor) {\n    this.mapboxMap = mapboxMap;\n    this.falcor = falcor;\n    return this.init(mapboxMap, falcor);\n  }\n  init(mapboxMap, falcor) {\n    return Promise.resolve();\n  }\n\n// Don't attach any state directly to layers.\n// Use this function to update layer state.\n// This function causes an update in React through the map component.\n// The React update will cause rerenders in layer components.\n// Layer components, modals, infoboxes, etc., should pull from layer.state.\n  updateState(newState) {\n    if (typeof newState === \"function\") {\n      this.state = newState(this.state);\n    }\n    else {\n      this.state = { ...this.state, ...newState };\n    }\n    this.dispatchUpdate(this, this.state);\n  }\n\n  _onAdd(mapboxMap, falcor, updateHover) {\n    this.sources.forEach(({ id, source }) => {\n      if (!mapboxMap.getSource(id)) {\n        mapboxMap.addSource(id, source);\n      }\n    });\n    this.layers.forEach(layer => {\n      if (!mapboxMap.getLayer(layer.id)) {\n        if (layer.beneath && mapboxMap.getLayer(layer.beneath)) {\n          mapboxMap.addLayer(layer, layer.beneath);\n        }\n        else {\n          mapboxMap.addLayer(layer);\n        }\n        if (!this.isVisible) {\n          this._setVisibilityNone(mapboxMap, layer.id);\n        }\n        this.layerVisibility[layer.id] = mapboxMap.getLayoutProperty(layer.id, \"visibility\");\n      }\n    });\n    if (this.onHover) {\n      this.addHover(mapboxMap, updateHover);\n    }\n    if (this.onClick) {\n      this.addClick(mapboxMap);\n    }\n    if (this.onBoxSelect) {\n      this.state = {\n        ...this.state,\n        selection: []\n      };\n      this.addBoxSelect(mapboxMap);\n    }\n    return this.onAdd(mapboxMap, falcor);\n  }\n  onAdd(mapboxMap, falcor) {\n    return Promise.resolve();\n  }\n\n  addClick(mapboxMap) {\n    function click(layerId, { point, features, lngLat }) {\n      this.onClick.callback.call(this, layerId, features, lngLat, point);\n    };\n\n    this.onClick.layers.forEach(layerId => {\n      if (layerId === \"mapboxMap\") {\n        const callback = click.bind(this, layerId);\n        this.callbacks.push({\n          action: \"click\",\n          callback\n        });\n        mapboxMap.on(\"click\", callback);\n      }\n      else {\n        const callback = click.bind(this, layerId);\n        this.callbacks.push({\n          action: \"click\",\n          callback,\n          layerId\n        });\n        mapboxMap.on(\"click\", layerId, callback);\n      }\n    });\n  }\n\n  hoverLeave(mapboxMap, layerId) {\n    if (!this.hoveredFeatures.has(layerId)) return;\n\n    this.hoveredFeatures.get(layerId).forEach(value => {\n      mapboxMap.setFeatureState(value, { hover: false });\n    });\n    this.hoveredFeatures.delete(layerId);\n  }\n\n  addHover(mapboxMap, updateHover) {\n\n    const callback = get(this, [\"onHover\", \"callback\"], DefaultCallback).bind(this),\n      HoverComp = get(this, [\"onHover\", \"HoverComp\"], DefaultHoverComp),\n      property = get(this, [\"onHover\", \"property\"], null),\n      filterFunc = get(this, [\"onHover\", \"filterFunc\"], null),\n      pinnable = get(this, [\"onHover\", \"pinnable\"], true),\n      sortOrder = get(this, [\"onHover\", \"sortOrder\"], Infinity);\n\n    const mousemove = (layerId, { point, features, lngLat }) => {\n\n      const hoveredFeatures = this.hoveredFeatures.get(layerId) || new Map();\n      this.hoveredFeatures.set(layerId, new Map());\n\n      const hoverFeatures = features => {\n        features.forEach(({ id, source, sourceLayer }) => {\n          if ((id === undefined) || (id === null)) return;\n\n          if (hoveredFeatures.has(id)) {\n            this.hoveredFeatures.get(layerId).set(id, hoveredFeatures.get(id));\n            hoveredFeatures.delete(id);\n          }\n          else {\n            const value = { id, source, sourceLayer };\n            this.hoveredFeatures.get(layerId).set(id, value);\n            mapboxMap.setFeatureState(value, { hover: true });\n          }\n        });\n      }\n\n      const featuresMap = new Map();\n\n      if (property) {\n        const properties = features.reduce((a, c) => {\n          const prop = get(c, [\"properties\", property], null);\n          if (prop) {\n            a[prop] = true;\n          }\n          return a;\n        }, {});\n        mapboxMap.queryRenderedFeatures({\n            layers: [layerId],\n            filter: [\"in\", [\"get\", property], [\"literal\", Object.keys(properties)]]\n          })\n          .forEach(feature => {\n            featuresMap.set(feature.id, feature);\n          })\n      }\n      if (filterFunc) {\n        const filter = filterFunc.call(this, layerId, features, lngLat, point);\n        if (hasValue(filter)) {\n          mapboxMap.queryRenderedFeatures({ layers: [layerId], filter })\n            .forEach(feature => {\n              featuresMap.set(feature.id, feature);\n            });\n        }\n      }\n      features.forEach(feature => {\n        featuresMap.set(feature.id, feature);\n      });\n\n      hoverFeatures([...featuresMap.values()]);\n\n      hoveredFeatures.forEach(value => {\n        mapboxMap.setFeatureState(value, { hover: false });\n      })\n\n      const data = callback(layerId, features, lngLat, point);\n\n      if (hasValue(data)) {\n        updateHover({\n          pos: [point.x, point.y],\n          type: \"hover-layer-move\",\n          HoverComp,\n          layer: this,\n          pinnable,\n          sortOrder,\n          lngLat,\n          data\n        });\n      }\n    };\n\n    const mouseleave = (layerId, e) => {\n      this.hoverLeave(mapboxMap, layerId);\n      updateHover({\n        type: \"hover-layer-leave\",\n        layer: this\n      });\n    };\n\n    this.onHover.layers.forEach(layerId => {\n      let callback = mousemove.bind(this, layerId);\n      this.callbacks.push({\n        action: \"mousemove\",\n        callback,\n        layerId\n      });\n      mapboxMap.on(\"mousemove\", layerId, callback);\n\n      callback = mouseleave.bind(this, layerId);\n      this.callbacks.push({\n        action: \"mouseleave\",\n        callback,\n        layerId\n      });\n      mapboxMap.on(\"mouseleave\", layerId, callback);\n    }, this);\n  }\n\n  addBoxSelect(mapboxMap) {\n    let start, current, box;\n\n    const canvasContainer = mapboxMap.getCanvasContainer();\n\n    const getPos = e => {\n      const rect = canvasContainer.getBoundingClientRect();\n      return new mapboxgl.Point(\n        e.clientX - rect.left - canvasContainer.clientLeft,\n        e.clientY - rect.top - canvasContainer.clientTop\n      )\n    }\n\n    const mousemove = e => {\n      e.preventDefault();\n\n      current = getPos(e);\n\n      if (!box) {\n        const className = get(this, [\"onBoxSelect\", \"className\"], \"bg-black bg-opacity-50 border-2 border-black\");\n        box = document.createElement(\"div\");\n        box.className = \"absolute top-0 left-0 w-0 h-0 \" + className;\n        canvasContainer.appendChild(box);\n      }\n\n      var minX = Math.min(start.x, current.x),\n        maxX = Math.max(start.x, current.x),\n        minY = Math.min(start.y, current.y),\n        maxY = Math.max(start.y, current.y);\n\n        box.style.transform = `translate( ${ minX }px, ${ minY }px)`;\n        box.style.width = `${ maxX - minX }px`;\n        box.style.height = `${ maxY - minY }px`;\n    }\n    const mouseup = e => {\n      finish([start, getPos(e)]);\n    }\n    const keyup = e => {\n      if ((e.keyCode === 27) || (e.which === 27) || (e.code === 'Escape')) {\n        finish();\n      }\n    }\n\n    const finish = bbox => {\n      document.removeEventListener('mousemove', mousemove);\n      document.removeEventListener('mouseup', mouseup);\n      document.removeEventListener('keydown', keyup);\n\n      mapboxMap.dragPan.enable();\n\n      if (box) {\n        box.parentNode.removeChild(box);\n        box = null;\n      }\n\n      if (bbox) {\n        const queriedFeatures = mapboxMap.queryRenderedFeatures(bbox, {\n          layers: get(this, [\"onBoxSelect\", \"layers\"]),\n          filter: get(this, [\"onBoxSelect\", \"filter\"])\n        })\n\n        const featureMap = queriedFeatures.reduce((a, c) => {\n          a[c.id] = c;\n          return a;\n        }, {});\n\n        const features = Object.values(featureMap);\n\n        const values = [];\n\n        features.forEach(feature => {\n          values.push({\n            id: feature.id,\n            source: feature.source,\n            sourceLayer: feature.sourceLayer\n          });\n        });\n\n        get(this, [\"onBoxSelect\", \"selectedValues\"], [])\n          .forEach(value => {\n            mapboxMap.setFeatureState(value, { select: false });\n          });\n\n        this.onBoxSelect.selectedValues = values;\n\n        values.forEach(value => {\n          mapboxMap.setFeatureState(value, { select: true });\n        });\n\n        this.updateState({ selection: features });\n      }\n    }\n\n    const mousedown = e => {\n      if (!(e.shiftKey && e.button === 0)) return;\n\n      document.addEventListener('mousemove', mousemove);\n      document.addEventListener('mouseup', mouseup);\n      document.addEventListener('keydown', keyup);\n\n      mapboxMap.dragPan.disable();\n\n      start = getPos(e);\n    }\n\n    this.callbacks.push({\n      action: \"mousemove\",\n      callback: mousemove,\n      element: canvasContainer\n    });\n    canvasContainer.addEventListener(\"mousedown\", mousedown, true);\n\n    mapboxMap.boxZoom.disable();\n\n    this.onBoxSelect.selectedValues = [];\n  }\n\n  _onRemove(mapboxMap) {\n    while (this.callbacks.length) {\n      const { action, layerId, callback, element } = this.callbacks.pop();\n      if (element) {\n        element.removeEventListener(action, callback);\n      }\n      else if (layerId) {\n        mapboxMap.off(action, layerId, callback);\n      }\n      else {\n        mapboxMap.off(action, callback);\n      }\n    }\n    this.layers.forEach(({ id }) => {\n      mapboxMap.removeLayer(id);\n    });\n    this.onRemove(mapboxMap);\n  }\n  onRemove(mapboxMap) {\n\n  }\n\n  fetchData(falcor) {\n    return Promise.resolve();\n  }\n  render(mapboxMap, falcor) {\n\n  }\n\n  receiveProps(props, mapboxMap, falcor, MapActions) {\n\n  }\n\n  toggleVisibility(mapboxMap) {\n    this.isVisible = !this.isVisible;\n    this.layers.forEach(({ id }) => {\n      if (this.isVisible) {\n        this._setVisibilityVisible(mapboxMap, id);\n      }\n      else {\n        this._setVisibilityNone(mapboxMap, id);\n      }\n    });\n  }\n  _setVisibilityVisible(mapboxMap, layerId) {\n    if (this.layerVisibility[layerId] !== \"none\") {\n      mapboxMap.setLayoutProperty(layerId, \"visibility\", \"visible\");\n    }\n  }\n  _setVisibilityNone(mapboxMap, layerId) {\n    const visibility = mapboxMap.getLayoutProperty(layerId, \"visibility\");\n    if (visibility === \"none\") {\n      this.layerVisibility[layerId] = \"none\";\n    }\n    else {\n      mapboxMap.setLayoutProperty(layerId, \"visibility\", \"none\");\n    }\n  }\n  setLayerVisibility(mapboxMap, layer, visibility) {\n    const isVisible = this.isVisible && (visibility === \"visible\");\n    this.layerVisibility[layer.id] = visibility;\n\n    visibility = isVisible ? \"visible\" : \"none\";\n    mapboxMap.setLayoutProperty(layer.id, \"visibility\", visibility);\n  }\n\n  onFilterChange(filterName, newValue, prevValue) {\n\n  }\n\n  onMapStyleChange(mapboxMap, falcor, updateHover) {\n    this._onAdd(mapboxMap, falcor, updateHover)\n      .then(() => this.render(mapboxMap, falcor))\n  }\n}\nexport { LayerContainer };\n","export const HOST = 'https://tig.nymtc.org/'\n","const cache = new Map();\nconst fetcher = url => {\n    if (cache.has(url)) {\n        return Promise.resolve(cache.get(url));\n    }\n    return fetch(url)\n        .then(res => {\n            if (!res.ok) {\n                throw new Error(\"Network error\");\n            }\n            return res.json();\n        })\n        .then(json => {\n            cache.set(url, json);\n            return json;\n        })\n}\nexport default fetcher;\n","import {HOST} from './layerHost'\nimport {LayerContainer} from \"components/avl-map/src\"\nimport tip_ids from '../config/tip_ids.json'\nimport tip_mpos from '../config/tip_mpos.json'\nimport fetcher from \"../wrappers/fetcher\";\nvar parse = require('wellknown');\n\nclass TestTipLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n\n    }\n\n    setActive = !!this.viewId\n    name = 'TIP Mappable Projects'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value:'131', name:'2014-2018 TIP Mappable Projects'},\n                {value:'64', name:'2017-2021 TIP Mappable Projects'},\n                {value:'187',name:'2020-2024 TIP Mappable Projects'}\n            ],\n            value: this.viewId || '131',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        tip_id :{\n            name: 'Tip ID',\n            type:'dropdown',\n            domain: tip_ids,\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        project_type: {\n            name: 'Project Type',\n            type: 'dropdown',\n            domain: [\n                {name:'Select All',value:\"Select All\"},\n                {name: 'Study', value: '1'},\n                {name: 'Highway', value: '2'},\n                {name: 'Ferry', value: '3'},\n                {name: 'Transit', value: '4'},\n                {name: 'Rail', value: '5'},\n                {name: 'Truck', value: '6'},\n                {name: 'Pedestrian', value: '7'},\n                {name: 'Bike', value: '8'},\n                {name: 'Bus', value: '10'},\n                {name: 'ITS', value: '9'},\n                {name: 'Parking', value: '12'}\n            ],\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        mpo_name: {\n            name: 'MPO Name',\n            type:'dropdown',\n            domain: tip_mpos,\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        agency:{\n            name:'Agency',\n            type:'dropdown',\n            domain:['Select All'],\n            value:'Select All'\n        },\n\n    }\n    legend = {\n        type: \"ordinal\",\n        domain: [],\n        range: [],\n        height: 5,\n        width: 350,\n        direction: \"vertical\",\n        show:true,\n        Title:\"\"\n    }\n    onHover = {\n        layers: [\"tip_lines\", \"tip_symbols\", 'tip-rail', 'tip-rail-metro', 'tip-bus', 'tip-bicycle-share', 'tip-ferry', 'tip-au-national-highway-3', 'tip-pitch-11', 'tip-college-11','tip-parking-11'],\n        callback: (layerId, features, lngLat) => {\n\n            const feature = features.reduce((a, c) => {\n                a = this.data.data.reduce((acc, curr) => {\n                    if (curr['tip_id'] === c['properties']['tip_id']\n                        && curr['ptype'] === c['properties']['project_type']\n                        && curr['sponsor'] === c['properties']['sponsor']\n                        && curr['description'] === c['properties']['description']\n                    ) {\n                        acc = curr\n                    }\n                    return acc\n                },)\n                return a\n            }, {})\n\n\n            return [\n                ['TIP ID:', feature['tip_id']],\n                ['County:',feature['county']],\n                ['MPO:',feature['mpo']],\n                ['Sponsor:', feature['sponsor']],\n                ['Project Type:', feature['ptype']],\n                ['Cost:', feature['estimated_cost']],\n                ['Description:', feature['description'].toLowerCase()]\n            ]\n\n\n        }\n    }\n    sources = [\n        {\n            id: 'tip_symbols',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        },\n        {\n            id: 'tip_lines',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        },\n    ]\n\n    init(map){\n        const url = `${HOST}/views/${this.filters.dataset.value}/data_overlay`\n        const cost_lower = ''\n        const cost_upper = ''\n        const params = `?utf8=%E2%9C%93&tip_id=${this.filters.tip_id.value === 'Select All'? '':this.filters.tip_id.value}&ptype=${this.filters.project_type.value === 'Select All'? '':this.filters.project_type.value}&mpo=${this.filters.mpo_name.value === 'Select All'? '':this.filters.mpo_name.value}&sponsor=${this.filters.agency.value === 'Select All'? '':this.filters.agency.value}&cost_lower=${cost_lower}&cost_upper=${cost_upper}&commit=Filter`\n        return fetcher(url + params)\n            .then(response => {\n                this.data = response\n                this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n                this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n            })\n    }\n    fetchData() {\n        const url = `${HOST}/views/${this.filters.dataset.value}/data_overlay`\n        const cost_lower = ''\n        const cost_upper = ''\n        const params = `?utf8=%E2%9C%93&tip_id=${this.filters.tip_id.value === 'Select All'? '':this.filters.tip_id.value}&ptype=${this.filters.project_type.value === 'Select All'? '':this.filters.project_type.value}&mpo=${this.filters.mpo_name.value === 'Select All'? '':this.filters.mpo_name.value}&sponsor=${this.filters.agency.value === 'Select All'? '':this.filters.agency.value}&cost_lower=${cost_lower}&cost_upper=${cost_upper}&commit=Filter`\n\n        return fetcher(url + params)\n            .then(response => {\n                this.data = response\n                this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n                this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n            })\n    }\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"dataset\" : {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            case \"tip_id\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${value === 'Select All'? 'All':value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            case \"project_type\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            case \"mpo_name\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            case \"agency\": {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n    onRemove(mapboxMap) {\n\n        mapboxMap.removeLayer('tip-rail')\n        mapboxMap.removeLayer('tip-rail-metro')\n        mapboxMap.removeLayer('tip-bus')\n        mapboxMap.removeLayer('tip-bicycle-share')\n        mapboxMap.removeLayer('tip-ferry')\n        mapboxMap.removeLayer('tip-au-national-highway-3')\n        mapboxMap.removeLayer('tip-pitch-11')\n        mapboxMap.removeLayer('tip-college-11')\n        mapboxMap.removeLayer('tip-parking-11')\n        mapboxMap.removeLayer('tip_lines')\n        mapboxMap.removeSource('tip_symbols')\n        mapboxMap.removeSource('tip_lines')\n    }\n    render(map){\n        let geojson = {\n            type: \"FeatureCollection\",\n            features: []\n        }\n\n        const symbols_map = {\n            'Rail': 'rail',\n            'Transit': 'rail-metro',\n            'Bus': 'bus',\n            'Bike': 'bicycle-share',\n            'Ferry': 'ferry',\n            'Highway': 'au-national-highway-3',\n            'Pedestrian': 'pitch-11',\n            'Study': 'college-11',\n            'Parking':'parking-11'\n\n        }\n        let colors = this.data.symbologies[0].color_scheme.reduce( (out,curr) => {\n            out[curr.value] = curr.color\n            return out;\n        }, {})\n\n         geojson.features = this.data.data.map((d,i) => {\n            return {\n                \"type\": \"Feature\",\n                id: i,\n                \"properties\": {\n                    county: d.county,\n                    description: d.description,\n                    estimated_cost : d.cost,\n                    mpo: d.mpo,\n                    project_type: d.ptype,\n                    color: colors[d.ptype],\n                    sponsor: d.sponsor,\n                    tip_id: d.tip_id,\n                    icon: symbols_map[d['ptype']]\n                },\n                \"geometry\": parse(d['geography'])\n            }\n        })\n\n        const symbols_geojson =\n            {\n                type: 'FeatureCollection',\n                features: geojson.features.filter(d => {\n                    if (d['geometry'] && d['geometry'].type === 'Point') {\n                        return d\n                    }\n                    return false\n                })\n            }\n\n        const line_geojson = {\n            type: 'FeatureCollection',\n            features: geojson.features.filter(d => {\n                if (d['geometry'] && d['geometry'].type === 'MultiLineString') {\n                    return d\n                }\n                return false\n            })\n        }\n\n        if (map.getSource('tip_symbols')) {\n            map.getSource('tip_symbols').setData(symbols_geojson)\n        }\n\n        if(map.getSource('tip_lines')){\n            map.getSource('tip_lines').setData(line_geojson)\n        }\n\n        if(!map.getLayer('tip_lines')){\n            map.addLayer({\n                'id': 'tip_lines',\n                'type': 'line',\n                source: 'tip_lines',\n                paint: {\n                    'line-width': 3,\n                    'line-color': {\n                        type:'identity',\n                        property:'color'\n                    },\n                }\n            })\n        }\n\n\n        geojson.features.forEach(feature => {\n            if (feature.properties.icon) {\n                let symbol = feature.properties.icon\n                let layerID = 'tip-' + symbol;\n                if (!map.getLayer(layerID)) {\n                    map.addLayer({\n                        'id': layerID,\n                        'type': 'symbol',\n                        'source': 'tip_symbols',\n                        'layout': {\n                            'icon-image': symbol,\n                            'icon-allow-overlap': true\n                        },\n                        'filter': ['==', 'icon', symbol]\n                    })\n\n                }\n            }\n        })\n\n\n    }\n}\n\n\nexport const TestTipLayerFactory = (options = {}) => new TestTipLayer(options);\n\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport counties from '../config/counties.json'\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\n\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2040CountyLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n        //this.id = id\n    }\n\n    setActive = true\n    name = '2040 SED County Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '49', name: '2000-2040 Employment Labor Force'},\n                {value: '46', name: '2000-2040 Group Quarters Population'},\n                {value: '45', name: '2000-2040 Household Population'},\n                {value: '47', name: '2000-2040 Households'},\n                {value: '48', name: '2000-2040 Household Size'},\n                {value: '50', name: '2000-2040 Labor Force'},\n                {value: '43', name: '2000-2040 Payroll Employment - QCEW Based'},\n                {value: '44', name: '2000-2040 Proprietors Employment'},\n                {value: '42', name: '2000-2040 Total Employment'},\n                {value: '41', name: '2000-2040 Total Population'}\n            ],\n            value: this.viewId || '49',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [2000,2005,2010,2015,2020,2025,2030,2035,2040],\n            value: 2000,\n            multi: false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n\n    }\n\n    onHover = {\n        layers: [\"Counties\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','geoid'],'')\n                return a\n            },'')\n            const graph = counties.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')],\n                        [\"Year:\", this.filters.year.value],\n                        ['County:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.year.value]]\n                    )\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"counties\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.a8ndgl5n\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"Counties\",\n            filter: false,\n            \"source-layer\": \"counties\",\n            source: \"counties\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response => {\n                this.data = response\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name \n                    }\n                    return a \n                },'')}-${this.filters.year.value}`\n                this.data_counties = this.data.data.map(item =>{\n                    return counties.reduce((a,c) =>{\n                        if(item.area === c.name){\n                            a['name'] = c.name\n                            a['geoid'] = c.geoid\n                        }\n                        return a\n                    },{})\n                })\n                this.legend.domain = this.data.data.reduce((a,c) =>{\n                    a.push(c[this.filters.year.value])\n                    return a\n                },[])\n\n            })\n    }\n\n\n\n    fetchData() {\n\n        return new Promise(resolve =>{\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n            }\n\n\n        );\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_counties.length) {\n            map.setFilter(\"Counties\", [\"in\", [\"get\", \"geoid\"], [\"literal\", this.data_counties.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"Counties\", false);\n        }\n\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_counties.forEach(data_county =>{\n                if(curr.area === data_county.name){\n                    acc.push({\n                        id: data_county.geoid,\n                        value: curr[this.filters.year.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                if(c.value !== 0){\n                    a[c.id] = colorScale(c.value)\n                }\n                return a\n            },{});\n\n        map.setPaintProperty(\"Counties\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"geoid\"], [\"literal\", colors]]\n        ])\n    }\n\n\n}\n\nexport const SED2040CountyLevelForecastLayerFactory = (options = {}) => new SED2040CountyLevelForecastLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2040TazLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n    setActive = !!this.viewId\n    name = '2040 SED TAZ Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '37', name: '2010-2040 Earnings (Held constant in $ 2010)'},\n                {value: '34', name: '2010-2040 Employed Labor Force'},\n                {value: '30', name: '2010-2040 Group Quarters Homeless Population'},\n                {value: '29', name: '2010-2040 Group Quarters Institutional Population'},\n                {value: '31', name: '2010-2040 Group Quarters Other Population'},\n                {value: '28', name: '2010-2040 Group Quarters Population'},\n                {value: '26', name: '2010-2040 Household Income (Held constant in $ 2010)'},\n                {value: '27', name: '2010-2040 Household Population '},\n                {value: '32', name: '2010-2040 Households'},\n                {value: '33', name: '2010-2040 Household Size'},\n                {value: '36',name: '2010-2040 Office Employment'},\n                {value: '35',name: '2010-2040 Retail Employment'},\n                {value: '13',name: '2010-2040 School Enrollment'},\n                {value: '25',name: '2010-2040 Total Employment'},\n                {value: '24',name: '2010-2040 Total Population'},\n                {value: '38',name: '2010-2040 University Enrollment'}\n            ],\n            value: this.viewId || '37',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'select',\n            domain: [2010,2015,2020,2025,2030,2035,2040],\n            value: 2010,\n            multi: false\n        }\n    }\n    onHover = {\n        layers: [\"nymtc_taz_2005\"],\n        callback: (layerId, features, lngLat) => {\n\n            const area_id = features.reduce((a,c) => {\n                a = get(c,['properties','name'],'')\n                return a\n            },'')\n\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === area_id){\n\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')],\n                        [\"Year:\", this.filters.year.value],\n                        [\"Taz id:\",c.area],[\"Value:\",c[this.filters.year.value]]\n                    )\n                }\n\n                return a\n            },[])\n        }\n    }\n    sources = [\n        {\n            id: \"nymtc_taz_2005-93y4h2\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.dgujwhsd\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"nymtc_taz_2005\",\n            filter: false,\n            \"source-layer\": \"nymtc_taz_2005\",\n            source: \"nymtc_taz_2005-93y4h2\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        domain: [],\n        range: getColorRange(5, \"YlOrRd\", true),\n        show: true,\n        Title: \"\",\n        format: \",d\",\n\n    }\n\n\n    init(map){\n\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response => {\n                this.data = response\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.year.value}`\n                this.taz_ids = this.data.data.map(d => d.area).filter(d => d)\n            })\n    }\n\n    onFilterChange(filterName,value,preValue){\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                // do nothing\n            }\n        }\n\n    }\n\n    fetchData() {\n\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n        );\n    }\n\n    getColorScale(data) {\n        const { type, range, domain } = this.legend;\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                // do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.taz_ids.length) {\n            map.setFilter(\"nymtc_taz_2005\", [\"in\", [\"get\", \"name\"], [\"literal\", this.taz_ids]]);\n        }\n        else {\n            map.setFilter(\"nymtc_taz_2005\", false);\n        }\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            acc.push({\n                'id': curr['area'] || '',\n                'value': curr[this.filters.year.value]\n            })\n            return acc\n        },[])\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                a[c.id] = colorScale(c.value)\n                return a\n            },{})\n\n\n        map.setPaintProperty(\"nymtc_taz_2005\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"name\"], [\"literal\", colors]]\n        ])\n\n    }\n}\n\nexport const SED2040TazLevelForecastLayerFactory = (options = {}) => new SED2040TazLevelForecastLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport counties from '../config/counties.json'\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2050CountyLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        //console.log('id in 2040 ',id)\n        this.viewId = props.viewId\n        //this.id = id\n    }\n\n    setActive = !!this.viewId\n    name = '2050 SED County Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '113', name: '2010-2050 Employed Labor Force'},\n                {value: '110', name: '2010-2050 Group Quarters Population'},\n                {value: '109', name: '2010-2050 Household Population'},\n                {value: '111', name: '2010-2050 Households'},\n                {value: '112', name: '2010-2050 Household Size'},\n                {value: '114', name: '2010-2050 Labor Force'},\n                {value: '107', name: '2010-2050 Payroll Employment'},\n                {value: '108', name: '2010-2050 Proprietors Employment'},\n                {value: '106', name: '2010-2050 Total Employment'},\n                {value: '105', name: '2010-2050 Total Population'}\n            ],\n            value: this.viewId || '113',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [2010,2012,2015,2020,2025,2030,2035,2040,2045,2050],\n            value: 2010,\n            multi: false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n\n    }\n\n    onHover = {\n        layers: [\"Counties\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','geoid'],'')\n                return a\n            },'')\n            const graph = counties.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')],\n                        [\"Year:\", this.filters.year.value],\n                        ['County:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.year.value]])\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"counties\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.a8ndgl5n\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"Counties\",\n            filter: false,\n            \"source-layer\": \"counties\",\n            source: \"counties\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response => {\n                this.data = response\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.year.value}`\n                this.data_counties = this.data.data.map(item =>{\n                    return counties.reduce((a,c) =>{\n                        if(item.area === c.name){\n                            a['name'] = c.name\n                            a['geoid'] = c.geoid\n                        }\n                        return a\n                    },{})\n                })\n                this.legend.domain = this.data.data.reduce((a,c) =>{\n                    a.push(c[this.filters.year.value])\n                    return a\n                },[])\n\n            })\n    }\n\n    fetchData() {\n\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n        );\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_counties.length) {\n            map.setFilter(\"Counties\", [\"in\", [\"get\", \"geoid\"], [\"literal\", this.data_counties.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"Counties\", false);\n        }\n\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_counties.forEach(data_county =>{\n                if(curr.area === data_county.name){\n                    acc.push({\n                        id: data_county.geoid,\n                        value: curr[this.filters.year.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                if(c.value !== 0){\n                    a[c.id] = colorScale(c.value)\n                }\n                return a\n            },{});\n\n        map.setPaintProperty(\"Counties\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"geoid\"], [\"literal\", colors]]\n        ])\n    }\n\n\n}\n\nexport const SED2050CountyLevelForecastLayerFactory = (options = {}) => new SED2050CountyLevelForecastLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport counties from '../config/counties.json'\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\n\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2055CountyLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n    setActive = !!this.viewId\n    name = '2055 SED County Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '207', name: '2010-2055 Employed Labor Force'},\n                {value: '204', name: '2010-2055 Group Quarters Population'},\n                {value: '203', name: '2010-2055 Household Population'},\n                {value: '205', name: '2010-2055 Households'},\n                {value: '206', name: '2010-2055 Household Size'},\n                {value: '208', name: '2010-2055 Labor Force'},\n                {value: '201', name: '2010-2055 Payroll Employment'},\n                {value: '202', name: '2010-2055 Proprietors Employment'},\n                {value: '200', name: '2010-2055 Total Employment'},\n                {value: '199', name: '2010-2055 Total Population'}\n            ],\n            value: this.viewId || '207',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [2010,2015,2017,2020,2025,2030,2035,2040,2045,2050,2055],\n            value: 2010,\n            multi: false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n\n    }\n\n    onHover = {\n        layers: [\"Counties\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','geoid'],'')\n                return a\n            },'')\n            const graph = counties.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },''),],\n                        [\"Year:\", this.filters.year.value],\n                        ['County:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.year.value]])\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"counties\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.a8ndgl5n\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"Counties\",\n            filter: false,\n            \"source-layer\": \"counties\",\n            source: \"counties\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response => {\n                this.data = response\n                this.legend.Title =`${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.year.value}`\n                this.data_counties = this.data.data.map(item =>{\n                    return counties.reduce((a,c) =>{\n                        if(item.area === c.name){\n                            a['name'] = c.name\n                            a['geoid'] = c.geoid\n                        }\n                        return a\n                    },{})\n                })\n                this.legend.domain = this.data.data.reduce((a,c) =>{\n                    a.push(c[this.filters.year.value])\n                    return a\n                },[])\n\n            })\n    }\n\n    fetchData() {\n\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n        );\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_counties.length) {\n            map.setFilter(\"Counties\", [\"in\", [\"get\", \"geoid\"], [\"literal\", this.data_counties.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"Counties\", false);\n        }\n\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_counties.forEach(data_county =>{\n                if(curr.area === data_county.name){\n                    acc.push({\n                        id: data_county.geoid,\n                        value: curr[this.filters.year.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                if(c.value !== 0){\n                    a[c.id] = colorScale(c.value)\n                }\n                return a\n            },{});\n\n        map.setPaintProperty(\"Counties\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"geoid\"], [\"literal\", colors]]\n        ])\n    }\n\n\n}\n\nexport const SED2055CountyLevelForecastLayerFactory = (options = {}) => new SED2055CountyLevelForecastLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\n\n\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2055TazLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n    setActive = !!this.viewId\n    name = '2055 SED TAZ Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '169', name: '2010-2055 Earnings in $'},\n                {value: '166', name: '2010-2055 Employed Labor Force'},\n                {value: '162', name: '2010-2055 Group Quarters Homeless Population'},\n                {value: '161', name: '2010-2055 Group Quarters Institutional Population'},\n                {value: '163', name: '2010-2055 Group Quarters Other Population'},\n                {value: '160', name: '2010-2055 Group Quarters Population'},\n                {value: '158', name: '2010-2055 Household Income in $'},\n                {value: '159', name: '2010-2055 Household Population '},\n                {value: '164', name: '2010-2055 Households'},\n                {value: '165', name: '2010-2055 Household Size'},\n                {value: '168',name: '2010-2055 Office Employment'},\n                {value: '167',name: '2010-2055 Retail Employment'},\n                {value: '155',name: '2010-2055 School Enrollment'},\n                {value: '157',name: '2010-2055 Total Employment'},\n                {value: '156',name: '2010-2055 Total Population'},\n                {value: '170',name: '2010-2055 University Enrollment'}\n            ],\n            value: this.viewId || '169',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'select',\n            domain: [2010,2015,2020,2025,2030,2035,2040,2045,2050,2055],\n            value: 2010,\n            multi: false\n        }\n    }\n    onHover = {\n        layers: [\"nymtc_taz_2005\"],\n        callback: (layerId, features, lngLat) => {\n\n            const area_id = features.reduce((a,c) => {\n                a = get(c,['properties','name'],'')\n                return a\n            },'')\n\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === area_id){\n\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')],\n                        [\"Year:\", this.filters.year.value],\n                        [\"Taz id:\",c.area],[\"Value:\",c[this.filters.year.value]]\n                    )\n                }\n\n                return a\n            },[])\n        }\n    }\n    sources = [\n        {\n            id: \"nymtc_taz_2005-93y4h2\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.dgujwhsd\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"nymtc_taz_2005\",\n            filter: false,\n            \"source-layer\": \"nymtc_taz_2005\",\n            source: \"nymtc_taz_2005-93y4h2\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        domain: [],\n        range: getColorRange(5, \"YlOrRd\", true),\n        show: true,\n        Title: \"\",\n        format: \",d\",\n\n    }\n\n\n    init(map){\n\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response => {\n                this.data = response\n                this.legend.Title =`${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.year.value}`\n                this.taz_ids = this.data.data.map(d => d.area).filter(d => d)\n            })\n    }\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                // do nothing\n            }\n        }\n\n    }\n\n    fetchData() {\n\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n        );\n    }\n\n    getColorScale(data) {\n        const { type, range, domain } = this.legend;\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                // do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.taz_ids.length) {\n            map.setFilter(\"nymtc_taz_2005\", [\"in\", [\"get\", \"name\"], [\"literal\", this.taz_ids]]);\n        }\n        else {\n            map.setFilter(\"nymtc_taz_2005\", false);\n        }\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            acc.push({\n                'id': curr['area'] || '',\n                'value': curr[this.filters.year.value]\n            })\n            return acc\n        },[])\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                a[c.id] = colorScale(c.value)\n                return a\n            },{})\n\n\n        map.setPaintProperty(\"nymtc_taz_2005\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"name\"], [\"literal\", colors]]\n        ])\n\n    }\n}\n\nexport const SED2055TazLevelForecastLayerFactory = (options = {}) => new SED2055TazLevelForecastLayer(options);\n","export const acsCensusCategoryMappings = [\n    {value:'22',name:'Absolute and Relative Minority Population data',year:2013},\n    {value:'132',name:'Absolute and Relative Minority Population data',year:2014},\n    {value:'134',name:'Absolute and Relative Minority Population data',year:2015},\n    {value:'142',name:'Absolute and Relative Minority Population data',year:2016},\n    {value:'146',name:'Absolute and Relative Minority Population data',year:2017},\n    {value:'145',name:'Absolute and Relative Minority Population data',year:2018},\n    {value:'18',name: 'Absolute and Relative Population Below Poverty',year:2013},\n    {value:'128',name: 'Absolute and Relative Population Below Poverty',year:2014},\n    {value:'133',name: 'Absolute and Relative Population Below Poverty',year:2015},\n    {value:'143',name: 'Absolute and Relative Population Below Poverty',year:2016},\n    {value:'147',name: 'Absolute and Relative Population Below Poverty',year:2017},\n    {value:'144',name: 'Absolute and Relative Population Below Poverty',year:2018},\n]\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport tracts from '../config/tracts.json'\nimport {getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\nimport {acsCensusCategoryMappings} from \"../config/acsCensusCategoryMappings\";\nimport {scaleLinear, scaleOrdinal, scaleQuantile, scaleQuantize, scaleThreshold} from \"d3-scale\"\nimport {extent} from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass ACSCensusLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.categoryName = props.name\n        this.viewid = props.viewId\n\n    }\n\n    setActive = !!this.viewId\n    name = 'ACS Census Layer'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                'Absolute and Relative Minority Population data',\n                'Absolute and Relative Population Below Poverty'],\n            value:this.categoryName || 'Absolute and Relative Minority Population data',\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [\n                2013,2014,2015,2016,2017,2018\n            ],\n            value: 2013,\n            multi: false\n        },\n        column:{\n            name: 'Column',\n            type: 'dropdown',\n            domain: [\n                {name: 'Minority Population',value:'value'},\n                {name: 'Percentage Minority', value:'percent'}\n            ],\n            value: 'value',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n        format: ',d',\n\n    }\n\n    onHover = {\n        layers: [\"tracts\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','GEOID'],'')\n                return a\n            },'')\n            const graph = tracts.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [`${this.filters.dataset.value || this.categoryName}${this.filters.column.value === 'percent' ? 'in %': ''}`],\n                        [\"Year:\", this.filters.year.value],\n                        ['Tract:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.column.value]])\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"nymtc_census_tracts\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.3galhyzy\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"tracts\",\n            filter: false,\n            \"source-layer\": \"census_tracts\",\n            source: \"nymtc_census_tracts\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n\n        const categoryValue = acsCensusCategoryMappings.reduce((a,c ) =>{\n            if((c.name === this.categoryName || c.name === this.filters.dataset.value) && c.year === this.filters.year.value){\n                a = c.value\n            }\n            return a\n        },null)\n\n        if(categoryValue){\n            this.filters.dataset.value = this.categoryName ? this.categoryName : this.filters.dataset.value\n            return fetcher(`${HOST}views/${categoryValue}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    this.legend.Title = `${this.filters.dataset.value || this.categoryName}-${this.filters.year.value}`\n                    this.data_tracts = this.data.data.map(item =>{\n                        return tracts.reduce((a,c) =>{\n                            if(item.area === c.name){\n                                a['name'] = c.name\n                                a['geoid'] = c.geoid\n                            }\n                            return a\n                        },{})\n                    })\n                    this.legend.domain = this.data.data.reduce((a,c) =>{\n                        a.push(c.value)\n                        return a\n                    },[])\n                    return response\n                })\n        }\n\n\n\n    }\n\n    fetchData() {\n        const categoryValue = acsCensusCategoryMappings.reduce((a,c ) =>{\n            if(c.name === this.categoryName && c.year === this.filters.year.value){\n                a = c.value\n            }\n            return a\n        },null)\n        if(categoryValue){\n            return new Promise(resolve =>\n                fetcher(`${HOST}views/${categoryValue}/data_overlay`)\n                    .then(response =>{\n                        this.data = response\n                        setTimeout(resolve,1000)\n                    })\n            );\n        }\n\n\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = `${this.filters.dataset.value}-${value}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = `${value}-${this.filters.year.value}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"column\": {\n\n                this.legend.Title = `${this.filters.dataset.value} in %-${this.filters.year.value}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                if(value === 'percent'){\n                    this.legend.format = ',f'\n                }else{\n                    this.legend.format = ',d'\n                }\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n    getFormat(column){\n        return ',d' ? column === 'value' : ',f'\n    }\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_tracts.length) {\n            map.setFilter(\"tracts\", [\"in\", [\"get\", \"GEOID\"], [\"literal\", this.data_tracts.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"tracts\", false);\n        }\n    //\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_tracts.forEach(data_tract =>{\n                if(curr.area === data_tract.name){\n                    acc.push({\n                        id: data_tract.geoid,\n                        value: curr[this.filters.column.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                a[c.id] = colorScale(c.value)\n                return a\n            },{});\n\n        map.setPaintProperty(\"tracts\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"GEOID\"], [\"literal\", colors]]\n        ])\n    }\n\n}\n\nexport const ACSCensusLayerFactory = (options = {}) => new ACSCensusLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport {getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\nimport {scaleLinear, scaleOrdinal, scaleQuantile, scaleQuantize, scaleThreshold} from \"d3-scale\"\nimport {extent} from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\nimport counties from \"../config/counties.json\";\n\nclass BPMPerformanceMeasuresLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n\n    setActive = !!this.viewId\n    name = 'BPM Performance Measures'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value:'58',name:'2010 Base - Time period: All Day'},\n                {value:'62',name:'2040 Future - Time period: All Day'}\n            ],\n            value: this.viewId || '58',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        column:{\n            name: 'Column',\n            type: 'dropdown',\n            domain: [\n                {name: 'VMT (in Thousands)',value:'vehicle_miles_traveled'},\n                {name: 'VHT (in Thousands)', value:'vehicle_hours_traveled'},\n                {name: 'Avg Speed (Miles/Hr)',value:'avg_speed'},\n            ],\n            value: 'vehicle_miles_traveled',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n        format: ',d',\n\n    }\n\n    onHover = {\n        layers: [\"Counties\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','geoid'],'')\n                return a\n            },'')\n            const graph = counties.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [`${this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')}-${this.filters.column.domain.reduce((a,c) => {\n                           if(c.value === this.filters.column.value){\n                               a = c.name\n                           } \n                           return a \n                        },'')}`],\n                        ['County:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.column.value]])\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"counties\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.a8ndgl5n\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"Counties\",\n            filter: false,\n            \"source-layer\": \"counties\",\n            source: \"counties\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response =>{\n                this.data = response\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.column.domain.reduce((a,c) =>{\n                   if(c.value === this.filters.column.value){\n                       a = c.name\n                   } \n                   return a \n                },'')}`\n                this.data_counties = this.data.data.map(item =>{\n                    return counties.reduce((a,c) =>{\n                        if(item.area === c.name){\n                            a['name'] = c.name\n                            a['geoid'] = c.geoid\n                        }\n                        return a\n                    },{})\n                })\n                this.legend.domain = this.data.data.reduce((a,c) =>{\n                    a.push(c[this.filters.column.value])\n                    return a\n                },[])\n                return response\n            })\n\n    }\n\n    fetchData() {\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                })\n        );\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"dataset\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.column.domain.reduce((a,c) => {\n                    if(c.value === this.filters.column.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"column\": {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.column.domain.reduce((a,c) => {\n                    if(c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                if(value === 'avg_speed'){\n                    this.legend.format = ',f'\n                }else{\n                    this.legend.format = ',d'\n                }\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n    getFormat(column){\n        return ',d' ? column === 'value' : ',f'\n    }\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_counties.length) {\n            map.setFilter(\"Counties\", [\"in\", [\"get\", \"geoid\"], [\"literal\", this.data_counties.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"Counties\", false);\n        }\n        //\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_counties.forEach(data_county =>{\n                if(curr.area === data_county.name){\n                    acc.push({\n                        id: data_county.geoid,\n                        value: curr[this.filters.column.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                if(c.value !== 0){\n                    a[c.id] = colorScale(c.value)\n                }\n                return a\n            },{});\n\n        map.setPaintProperty(\"Counties\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"geoid\"], [\"literal\", colors]]\n        ])\n    }\n\n}\n\nexport const BPMPerformanceMeasuresLayerFactory = (options = {}) => new BPMPerformanceMeasuresLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport get from \"lodash.get\"\nimport fetcher from \"../wrappers/fetcher\";\nimport hub_bound from '../config/hub_bound.json'\nimport mapboxgl from 'mapbox-gl'\n\nclass HubBoundTravelDataLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n\n    setActive = !!this.viewId\n    name = 'Hub Bound Travel Data'\n    filters = {\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019],\n            value: 2019,\n            multi: false\n        },\n        from: {\n            name: 'From',\n            type: 'dropdown',\n            domain: ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'],\n            value: '12AM',\n            multi: false\n        },\n        to: {\n            name: 'To',\n            type: 'dropdown',\n            domain: ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'],\n            value: '12PM',\n            multi: false\n        },\n        mode: {\n            name: 'Mode',\n            type: 'dropdown',\n            domain: [\n                {name:'Bicycle',value:'9'},\n                {name:'Express Bus',value:'5'},\n                {name:'Local Bus',value:'4'},\n                {name:'Private Ferry',value:'8'},\n                {name:'Public Ferry',value:'7'},\n                {name:'Rail Rapid Transit - Express',value:'3'},\n                {name:'Rail Rapid Transit - Local',value:'2'},\n                {name:'Suburban Rail',value:'1'},\n                {name:'Tramway',value:'10'},\n                {name:'Vehicles (Auto+Taxi+Trucks+Comm. Vans)',value:'6'}\n            ],\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            value: '6',\n            multi: false\n        },\n        direction: {\n            name: 'Direction',\n            type: 'dropdown',\n            domain: ['Inbound', 'Outbound'],\n            value: 'Inbound',\n            multi: false\n        }\n    }\n    onHover = {\n        layers: [\"county_points\"],\n        callback: (layerId, features, lngLat) => {\n            const id = features.reduce((a,c)=>{\n                a = get(c,['id'],'')\n                return a\n            },0)\n            return this.data.data.reduce((a,c) =>{\n                if(c.id === id){\n\n                    a.push(\n                        ['Facility Name:',c['loc_name']],\n                        ['Sector:',c['sector_name']],\n                        ['Mode:',c['mode_name']],\n                        ['Route:',c['route_name']],\n                        [c['var_name'],c['count']],\n\n                    )\n                }\n                return a\n            },[])\n\n\n\n        }\n    }\n    legend = {\n        type: \"ordinal\",\n        domain: [],\n        range: [],\n        height: 5,\n        width: 320,\n        direction: \"vertical\",\n        show:true,\n        Title:\"\"\n    }\n    sources = [\n        {\n            id: \"county_points\",\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                },\n\n            }\n        }\n    ]\n    layers = [\n        {\n            id:\"county_points\",\n            source:'county_points',\n            type: 'circle',\n            paint:{\n                'circle-opacity':1\n            },\n            visibility: 'none',\n        }\n    ]\n\n    init(map) {\n        const from = this.convertTime(this.filters.from.value)\n        const to = this.convertTime(this.filters.to.value)\n        const url = `${HOST}/views/${this.viewId || '23'}/data_overlay?utf8=%E2%9C%93&`\n        const params = `year=${this.filters.year.value}&hour=${from}&upper_hour=${to}&transit_mode=${this.filters.mode.value}&transit_direction=${this.filters.direction.value}&lower=&upper=&commit=Filter`\n\n        return fetcher(url+params)\n            .then(response => {\n                this.data = response\n                this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n                this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === this.filters.mode.value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${this.filters.from.value} to ${this.filters.to.value}, \n                Direction: ${this.filters.direction.value}`\n\n            })\n\n    }\n\n    fetchData() {\n\n        const from = this.convertTime(this.filters.from.value)\n        const to = this.convertTime(this.filters.to.value)\n        const url = `${HOST}/views/23/data_overlay?utf8=%E2%9C%93&`\n        const params = `year=${this.filters.year.value}&hour=${from}&upper_hour=${to}&transit_mode=${this.filters.mode.value}&transit_direction=${this.filters.direction.value}&lower=&upper=&commit=Filter`\n        return fetcher(url+params)\n            .then(response => {\n\n                this.data = response\n            })\n    }\n\n    onAdd(mapboxMap, falcor) {\n        let coordinates = hub_bound.features[0].geometry.coordinates[0];\n        let bounds =coordinates.reduce(function (bounds, coord) {\n            return bounds.extend(coord);\n        }, new mapboxgl.LngLatBounds(coordinates[0], coordinates[0]));\n        mapboxMap.fitBounds(bounds,{\n            padding: 10\n        })\n        return Promise.resolve();\n    }\n\n    onRemove(mapboxMap){\n\n        mapboxMap.removeLayer('counties')\n        mapboxMap.removeSource('counties')\n        mapboxMap.fitBounds([\n            [-70.12161387603946,45.142811053355814],\n            [-78.23968012395866,39.90735688410206]\n        ])\n    }\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                        if(c.value === this.filters.mode.value){\n                            a = c.name \n                        }\n                        return a \n                    },'')},\n                Year:${value},From:${this.filters.from.value} to ${this.filters.to.value}, \n                Direction: ${this.filters.direction.value}`\n                break;\n            }\n            case \"from\":{\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === this.filters.mode.value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${value} to ${this.filters.to.value}, \n                Direction: ${this.filters.direction.value}`\n                break;\n            }\n            case \"to\":{\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === this.filters.mode.value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${this.filters.from.value} to ${value}, \n                Direction: ${this.filters.direction.value}`\n                break;\n            }\n            case \"mode\":{\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${this.filters.from.value} to ${this.filters.to.value}, \n                Direction: ${this.filters.direction.value}`\n                break;\n            }\n            case \"direction\":{\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === this.filters.mode.value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${this.filters.from.value} to ${this.filters.to.value}, \n                Direction: ${value}`\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n    convertTime(time){\n        let value = 0\n        if (time.includes('AM') && time !== '12AM'){\n            value = time.substring(0,time.length - 1)\n        }\n        else if(time.includes('PM') && time !== '12PM'){\n            value = 12 + parseInt(time.substring(0,time.length - 1))\n        }\n        else if(time === '12AM'){\n            value = 0\n        }else{\n            value = 12\n        }\n        return value\n    }\n\n    render(map){\n\n        let geojson = {\n            type: \"FeatureCollection\",\n            features : []\n        }\n\n        let line_geojson = {\n            type:'geojson',\n            data: {\n                type: 'Feature',\n                properties: {},\n                geometry : {\n                    type: 'LineString',\n                    coordinates: hub_bound.features[0].geometry.coordinates[0]\n                }\n            }\n        }\n\n        const colors = {}\n\n        this.data.data.forEach(d=>{\n        this.data.symbologies[0].color_scheme.forEach(item =>{\n            if (item.value === d['sector_name']){\n                    colors[d['sector_name']] = item.color\n                }\n            })\n        })\n\n        geojson.features = this.data.data.map(item =>{\n\n            return {\n                type: \"Feature\",\n                id:item['id'],\n                properties: {\n                    \"name\":item['loc_name'],\n                    \"sector\":item['sector_name'],\n\n                },\n                geometry: {\n                    type:\"Point\",\n                    \"coordinates\": [item[\"lng\"],item[\"lat\"]]\n                }\n            }\n        })\n\n\n        if(!map.getSource('counties') && !map.getLayer('counties')){\n            map.addSource('counties', line_geojson)\n            map.addLayer({\n                id: \"counties\",\n                source:'counties',\n                type: 'line',\n                paint:{\n                    'line-color': 'black',\n                    'line-width':1,\n                    'line-dasharray':[10,5]\n                }\n            })\n        }\n        if(map.getSource('county_points')){\n            map.getSource('county_points').setData(geojson)\n        }\n\n        if(map.getSource('county_points') && map.getLayer(\"county_points\")){\n            map.setPaintProperty(\n                'county_points',\n                'circle-color',\n                [\"get\", [\"to-string\", [\"get\", \"sector\"]], [\"literal\",colors]]\n            )\n        }\n    }\n\n\n}\n\n\n\nexport const HubBoundTravelDataLayerFactory = (options = {}) => new HubBoundTravelDataLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport fetcher from \"../wrappers/fetcher\";\nimport rtp_ids from '../config/rtp_ids.json'\nimport rtp_sponsors from '../config/rtp_sponsors.json'\nvar parse = require('wellknown');\n\n\nclass RTPProjectDataLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n\n    setActive = !!this.viewId\n    name = 'RTP Project Data'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {name: '2040 RTP Projects', value: '53'},\n                {name: '2045 RTP Projects', value: '141'}\n            ],\n            value: this.viewId || '53',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        rtp_id: {\n            name: 'RTP ID',\n            type: 'dropdown',\n            domain: rtp_ids.filter(d => d.name !== null),\n            value: \"Select All\",\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: ['Select All',2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025, 2026, 2027, 2028, 2029, 2030, 2031, 2032, 2040],\n            value: 'Select All'\n        },\n        project_type: {\n            name: 'Project Type',\n            type: 'dropdown',\n            domain: [\n                {name:'Select All',value:\"Select All\"},\n                {name: 'Study', value: '1'},\n                {name: 'Highway', value: '2'},\n                {name: 'Ferry', value: '3'},\n                {name: 'Transit', value: '4'},\n                {name: 'Rail', value: '5'},\n                {name: 'Truck', value: '6'},\n                {name: 'Pedestrian', value: '7'},\n                {name: 'Bike', value: '8'},\n                {name: 'Bus', value: '10'},\n                {name: 'ITS', value: '9'},\n                {name: 'Parking', value: '12'}\n            ],\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        plan_portion: {\n            name: 'Plan Portion',\n            type: 'dropdown',\n            domain: [\n                {name:'Select All',value:'Select All'},\n                {name: 'Constrained', value: '2'},\n                {name: 'Vision', value: '1'}\n            ],\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        sponsor: {\n            name: 'Sponsor',\n            type: 'dropdown',\n            domain: rtp_sponsors,\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        }\n    }\n    legend = {\n        type: \"ordinal\",\n        domain: [],\n        range: [],\n        height: 5,\n        width: 320,\n        direction: \"vertical\",\n        show:true,\n        Title:\"\"\n    }\n    sources = [\n        {\n            id: 'county_symbols',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        },\n        {\n            id: 'county_lines',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        },\n        {\n            id: 'county_polygons',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        }\n    ]\n    onHover = {\n        layers: [\"county_lines\", \"county_polygons\", 'poi-rail', 'poi-rail-metro', 'poi-us-interstate-truck-3', 'poi-bus', 'poi-bicycle-share', 'poi-ferry', 'poi-au-national-highway-3', 'poi-pitch-11', 'poi-college-11'],\n        callback: (layerId, features, lngLat) => {\n            const feature = features.reduce((a, c) => {\n                a = this.data.data.reduce((acc, curr) => {\n\n                    if (curr['rtp_id'] === c['properties']['rtp_id']\n                        && curr['ptype'] === c['properties']['project_type']\n                        && curr['plan_portion'] === c['properties']['plan_portion']\n                        && curr['sponsor'] === c['properties']['sponsor']\n                        && curr['description'] === c['properties']['description']\n                    ) {\n                        acc = curr\n                    }\n                    return acc\n                },)\n                return a\n            }, {})\n\n            return [\n                ['Project ID:', feature['rtp_id']],\n                ['Year:', this.filters.year.value],\n                ['Plan Portion:', feature['plan_portion']],\n                ['Sponsor:', feature['sponsor']],\n                ['Project Type:', feature['ptype']],\n                ['Cost:', feature['estimated_cost']],\n                ['Description:', feature['description'].toLowerCase()]\n            ]\n\n\n        }\n    }\n\n\n\n\n    init(map) {\n\n        const url = `${HOST}/views/${this.filters.dataset.value}/data_overlay`\n        const cost_lower = ''\n        const cost_upper = ''\n\n        const params = `?utf8=%E2%9C%93&rtp_id=${this.filters.rtp_id.value === 'Select All'? '':this.filters.rtp_id.value}&current_year=${this.filters.year.value === 'Select All'? '':this.filters.year.value}&cost_lower=${cost_lower}&cost_upper=${cost_upper}&ptype=${this.filters.project_type.value === 'Select All'? '':this.filters.project_type.value}&plan_portion=${this.filters.plan_portion.value === 'Select All'? '':this.filters.plan_portion.value}&sponsor=${this.filters.sponsor.value === 'Select All'? '':this.filters.sponsor.value}&commit=Filter`\n        return fetcher(url + params)\n            .then(response => {\n                this.data = response\n                this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n                this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n               Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n            })\n    }\n\n    fetchData() {\n        const url = `${HOST}/views/${this.filters.dataset.value}/data_overlay`\n        const cost_lower = ''\n        const cost_upper = ''\n        const params = `?utf8=%E2%9C%93&rtp_id=${this.filters.rtp_id.value === 'Select All'? '':this.filters.rtp_id.value}&current_year=${this.filters.year.value === 'Select All'? '':this.filters.year.value}&cost_lower=${cost_lower}&cost_upper=${cost_upper}&ptype=${this.filters.project_type.value === 'Select All'? '':this.filters.project_type.value}&plan_portion=${this.filters.plan_portion.value === 'Select All'? '':this.filters.plan_portion.value}&sponsor=${this.filters.sponsor.value === 'Select All'? '':this.filters.sponsor.value}&commit=Filter`\n\n        return fetcher(url + params)\n            .then(response => {\n                this.data = response\n                this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n                this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a \n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name \n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n            })\n    }\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"dataset\" : {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"year\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${value === 'Select All'? 'All':value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"rtp_id\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${value === 'Select All'? 'All':value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"project_type\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"plan_portion\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"sponsor\": {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n    onRemove(mapboxMap) {\n\n        mapboxMap.removeLayer('poi-rail')\n        mapboxMap.removeLayer('poi-rail-metro')\n        mapboxMap.removeLayer('poi-us-interstate-truck-3')\n        mapboxMap.removeLayer('poi-bus')\n        mapboxMap.removeLayer('poi-bicycle-share')\n        mapboxMap.removeLayer('poi-ferry')\n        mapboxMap.removeLayer('poi-au-national-highway-3')\n        mapboxMap.removeLayer('poi-pitch-11')\n        mapboxMap.removeLayer('poi-college-11')\n        mapboxMap.removeLayer('county_polygons')\n        mapboxMap.removeLayer('county_lines')\n        mapboxMap.removeSource('county_symbols')\n        mapboxMap.removeSource('county_polygons')\n        mapboxMap.removeSource('county_lines')\n    }\n\n    render(map) {\n\n        let geojson = {\n            type: \"FeatureCollection\",\n            features: []\n        }\n\n        const symbols_map = {\n            'Rail': 'rail',\n            'Transit': 'rail-metro',\n            'Truck': 'us-interstate-truck-3',\n            'Bus': 'bus',\n            'Bike': 'bicycle-share',\n            'Ferry': 'ferry',\n            'Highway': 'au-national-highway-3',\n            'Pedestrian': 'pitch-11',\n            'Study': 'college-11',\n\n        }\n\n        geojson.features = this.data.data.map((d, i) => {\n\n            return {\n                type: 'Feature',\n                id: i,\n                properties: {\n                    \"description\": d['description'],\n                    \"estimated_cost\": d['estimated_cost'],\n                    \"plan_portion\": d['plan_portion'],\n                    \"project_type\": d['ptype'],\n                    \"rtp_id\": d['rtp_id'],\n                    \"sponsor\": d['sponsor'],\n                    \"icon\": symbols_map[d['ptype']]\n                },\n                geometry: parse(d['geography'])\n            }\n        })\n\n        const symbols_geojson =\n            {\n                type: 'FeatureCollection',\n                features: geojson.features.filter(d => {\n                    if (d['geometry'] && d['geometry'].type === 'Point') {\n                        return d\n                    }\n                    return false\n                })\n            }\n\n        const polygon_geojson = {\n            type: 'FeatureCollection',\n            features: geojson.features.filter(d => {\n                if (d['geometry'] && d['geometry'].type === 'MultiPolygon') {\n                    return d\n                }\n                return false\n            })\n        }\n\n        polygon_geojson.features.forEach(feature =>{\n\n            feature.properties['color'] = this.data.symbologies[0].color_scheme.reduce((a,c) =>{\n                if(c.label === feature.properties.project_type){\n                    a = c.color\n                }\n                return a\n            },'')\n        })\n\n        const line_geojson = {\n            type: 'FeatureCollection',\n            features: geojson.features.filter(d => {\n                if (d['geometry'] && d['geometry'].type === 'MultiLineString') {\n                    return d\n                }\n                return false\n            })\n        }\n\n\n        line_geojson.features.forEach(feature =>{\n\n            feature.properties['color'] = this.data.symbologies[0].color_scheme.reduce((a,c) =>{\n                if(c.label === feature.properties.project_type){\n                    a = c.color\n                }\n                return a\n            },'')\n        })\n\n        if (map.getSource('county_lines')) {\n            map.getSource('county_lines').setData(line_geojson)\n        }\n\n        if (!map.getLayer('county_lines')) {\n            map.addLayer({\n                id: \"county_lines\",\n                source: 'county_lines',\n                type: 'line',\n                paint: {\n                    'line-color': {\n                        type:'identity',\n                        property:'color'\n                    },\n                    'line-width': 3,\n\n                }\n            })\n        }\n\n        if (map.getSource('county_polygons')) {\n            map.getSource('county_polygons').setData(polygon_geojson)\n        }\n\n        if (!map.getLayer('county_polygons')) {\n            map.addLayer({\n                id: 'county_polygons',\n                source: 'county_polygons',\n                type: 'fill',\n                paint: {\n                    \"fill-color\": {\n                        type:'identity',\n                        property:'color'\n                    },\n                    \"fill-opacity\": [\n                        \"interpolate\",\n                        [\"linear\"],\n                        [\"zoom\"],\n                        5, 0.5,\n                        20, 0.1\n                    ]\n                }\n            })\n        }\n        if (map.getSource('county_symbols')) {\n            map.getSource('county_symbols').setData(symbols_geojson)\n        }\n        geojson.features.forEach(feature => {\n            if (feature.properties.icon) {\n                let symbol = feature.properties.icon\n                let layerID = 'poi-' + symbol;\n                if (!map.getLayer(layerID)) {\n                    map.addLayer({\n                        'id': layerID,\n                        'type': 'symbol',\n                        'source': 'county_symbols',\n                        'layout': {\n                            'icon-image': symbol,\n                            'icon-allow-overlap': true\n                        },\n                        'filter': ['==', 'icon', symbol]\n                    })\n\n                }\n\n            }\n        })\n\n    }\n}\n\nexport const RTPProjectDataLayerFactory = (options = {}) => new RTPProjectDataLayer(options)\n","import React from \"react\"\n\nimport colorbrewer from \"colorbrewer\"\n\nimport styled from \"styled-components\"\nimport get from \"lodash.get\"\n\nconst ColorRanges = {}\n\nfor (const type in colorbrewer.schemeGroups) {\n\tcolorbrewer.schemeGroups[type].forEach(name => {\n\t\tconst group = colorbrewer[name];\n\t\tfor (const length in group) {\n\t\t\tif (!(length in ColorRanges)) {\n\t\t\t\tColorRanges[length] = [];\n\t\t\t}\n\t\t\tColorRanges[length].push({\n\t\t\t\ttype: `${ type[0].toUpperCase() }${ type.slice(1) }`,\n\t\t\t\tname,\n\t\t\t\tcategory: \"Colorbrewer\",\n\t\t\t\tcolors: group[length]\n\t\t\t})\n\t\t}\n\t})\n}\n\nexport { ColorRanges };\nconsole.log(\"ColorRanges\", ColorRanges);\n\nexport const getColorRange = (size, name) =>\n\tget(ColorRanges, [size], [])\n\t\t.reduce((a, c) => c.name === name ? c.colors : a, []).slice();\n\nconst ColorBarContainer =styled.div`\n  > *:first-child {\n    border-top-left-radius: 0.25rem;\n    border-bottom-left-radius: 0.25rem;\n  }\n  > *:last-child {\n    border-top-right-radius: 0.25rem;\n    border-bottom-right-radius: 0.25rem;\n  }\n`\nexport const ColorBar = ({ colors, small = false }) => {\n  return (\n    <ColorBarContainer className={ `grid grid-cols-${ colors.length }` }>\n      { colors.map((c, i) =>\n          <div key={ i }\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\tbackgroundColor: c,\n\t\t\t\t\t\t\ttransition: \"background-color 0.5s\"\n\t\t\t\t\t\t} }\n            className={ `col-span-1 ${ small ? \"h-2\" : \"h-3\" }` }/>\n        )\n      }\n    </ColorBarContainer>\n  )\n}\n","import React from \"react\"\n\nimport { BooleanInput, Select } from \"@availabs/avl-components\"\n\nimport deepequal from \"deep-equal\"\nimport get from \"lodash.get\"\nimport {\n  groups,\n  scaleLinear,\n  scaleOrdinal,\n  scaleQuantize,\n  scaleQuantile,\n  scaleThreshold,\n  extent as d3extent,\n  format as d3format\n} from \"d3\"\n\nimport { ColorBar, ColorRanges } from \"./color-ranges\"\n\nconst ColorSteps = Object.keys(ColorRanges).sort((a, b) => +a - +b);\n\nexport const Legend = ({ type, domain, range, format, ...props }) => {\n\n  const scale = React.useMemo(() => {\n    return getScale(type, domain, range);\n  }, [type, domain, range]);\n\n  const Format = React.useMemo(() => {\n    return getFormat(format);\n  }, [format]);\n\n  return (\n    <div>\n      { type === \"linear\" ?\n        <LinearScale scale={ scale } format={ Format } { ...props }/> :\n        type === \"ordinal\" ?\n        <OrdinalScale scale={ scale } format={ Format } { ...props }/> :\n        type === \"quantize\" || type === \"quantile\" || type === \"threshold\"  ?\n        <QuantizleScale scale={ scale } format={ Format } { ...props }/> :\n        <div>Unknown scale type \"{ type }.\"</div>\n      }\n    </div>\n  )\n}\n\nconst getScale = (type, domain, range) => {\n  switch (type) {\n    case \"linear\":\n      return scaleLinear()\n        .domain(domain)\n        .range(range);\n    case \"ordinal\":\n      return scaleOrdinal()\n        .domain(domain)\n        .range(range);\n    case \"quantize\":\n      return scaleQuantize()\n        .domain(d3extent(domain))\n        .range(range);\n    case \"quantile\":\n      return scaleQuantile()\n        .domain(domain)\n        .range(range);\n    case \"threshold\":\n      return scaleThreshold()\n        .domain(domain)\n        .range(range);\n    default:\n      return null;\n  }\n}\n\nconst Identity = i => i;\nconst getFormat = format => {\n  if (!format) return Identity;\n\n  if (typeof format === \"string\") {\n    return d3format(format);\n  }\n  return format;\n}\n\nconst InitialToolState = {\n  size: 5,\n  reverse: false,\n  opened: null\n}\nconst InitReducer = size => ({\n  ...InitialToolState,\n  size: size || 5\n})\nconst ToolReducer = (state, action) => {\n  const { type, ...payload } = action;\n  switch (type) {\n    case \"set-size\":\n    case \"set-reverse\":\n    case \"set-opened\":\n      return {\n        ...state,\n        ...payload\n      }\n    default:\n      return state;\n  }\n}\nexport const useLegendReducer = size => {\n  return React.useReducer(ToolReducer, size, InitReducer);;\n}\n\nexport const LegendTools = ({ layer, MapActions }) => {\n\n  const range = get(layer, [\"legend\", \"range\"], []);\n\n  const [toolState, dispatch] = useLegendReducer(range.length);\n\n  const updateLegend = React.useCallback(update => {\n    MapActions.updateLegend(layer, update);\n  }, [layer, MapActions]);\n\n  return (\n    <DummyLegendTools { ...toolState } layer={ layer } current={ range }\n      updateLegend={ updateLegend } dispatch={ dispatch }/>\n  )\n}\nexport const DummyLegendTools = ({ layer, current, updateLegend, dispatch, size, reverse, opened }) => {\n\n  const colorsByType = React.useMemo(() => {\n    return groups(get(ColorRanges, size, []), r => r.type);\n  }, [size]);\n\n  return (\n    <React.Fragment>\n      <div className=\"flex items-center mb-1\">\n        <div className=\"w-36\">Step Size</div>\n        <div className=\"flex-1\">\n          <Select options={ ColorSteps }\n            valueAccessor={ v => +v }\n            value={ size }\n            onChange={ v => dispatch({ type: \"set-size\", size: v }) }\n            multi={ false }\n            removable={ false }\n            searchable={ false }/>\n        </div>\n      </div>\n\n      <div className=\"flex items-center mb-1\">\n        <div className=\"w-36\">Reverse Colors</div>\n        <div className=\"flex-1\">\n          <BooleanInput value={ reverse }\n            onChange={ v => dispatch({ type: \"set-reverse\", reverse: v }) }/>\n        </div>\n      </div>\n\n      <div>\n        <div className=\"font-bold border-b mb-1\">\n          Color Range Types:\n        </div>\n        { colorsByType.map(([type, ranges]) =>\n            <ColorType key={ type } type={ type } ranges={ ranges }\n              opened={ opened } update={ updateLegend }\n              setOpen={ opened => dispatch({ type: \"set-opened\", opened }) }\n              current={ current } reverse={ reverse }/>\n          )\n        }\n      </div>\n    </React.Fragment>\n  )\n}\nconst ColorType = ({ type, ranges, current, opened, setOpen, reverse, update }) => (\n  <div className={ `\n      px-2 hover:border-current border-transparent border\n      cursor-pointer rounded transition\n    ` }\n    onClick={ e => { e.stopPropagation(); setOpen(type); } }>\n    { type }\n    <div className=\"pb-1\"\n      style={ { display: opened === type ? \"block\" : \"none\" } }>\n      { ranges.map(({ name, colors }) => {\n          if (reverse) {\n            colors = colors.slice().reverse();\n          }\n          const active = deepequal(colors, current);\n          return (\n            <div key={ name }\n              onClick={ e => update({ range: colors }) }\n              className={ `\n                p-1 border rounded-lg hover:border-current transition\n                ${ active ? \"border-current\" : \"border-transparent\" }\n              ` }>\n              <ColorBar key={ name } colors={ colors } small/>\n            </div>\n          )\n        })\n      }\n    </div>\n  </div>\n)\n\nconst LinearScale = ({ scale, format, ticks = 5 }) => {\n\n  const scaleTicks = scale.ticks(ticks);\n\n  return (\n    <div>\n      <ColorBar colors={ scaleTicks.map(t => scale(t)) }/>\n      <div className={ `text-sm grid grid-cols-${ scaleTicks.length }` }>\n        { scaleTicks.map(t =>\n            <div className=\"col-span-1 text-right pr-1\" key={ t }>\n              { format(t) }\n            </div>\n          )\n        }\n      </div>\n    </div>\n  )\n}\nconst OrdinalScale = ({ scale, format, height = 3, direction = \"vertical\" }) => {\n\n  const range = scale.range();\n\n  return (\n    <div>\n      { direction === \"horizontal\" ?\n        <>\n          <div className={ `grid grid-cols-${ range.length }` }>\n            { range.map(c =>\n                <div className=\"col-span-1 h-3 mx-2 rounded\" key={ c }\n                  style={ { backgroundColor: c } }/>\n              )\n            }\n          </div>\n          <div className={ `grid grid-cols-${ range.length }` }>\n            { scale.domain().map(d =>\n                <div className=\"col-span-1 text-center\" key={ d }>\n                  { format(d) }\n                </div>\n              )\n            }\n          </div>\n        </> :\n        <div className=\"flex\">\n          { scale.domain().reduce((a, c, i) => {\n              if (i % height === 0) {\n                a.push([]);\n              }\n              a[a.length - 1].push(c);\n              return a;\n            }, [])\n            .map((d, i) =>\n              <div key={ i }\n                className={ `${ i > 0 ? \"ml-6\" : \"\" } flex-1` }>\n                { d.map(dd =>\n                    <div className=\"flex items-center\" key={ dd }>\n                      <div className=\"h-6 w-6 rounded mr-1 mb-1\"\n                        style={ {\n                          backgroundColor: scale(dd)\n                        } }/>\n                      <div>{ format(dd) }</div>\n                    </div>\n                  )\n                }\n              </div>\n            )\n          }\n        </div>\n      }\n    </div>\n  )\n}\nconst QuantizleScale = ({ scale, format }) => {\n\n  const range = scale.range();\n\n  return (\n    <div>\n      <ColorBar colors={ range }/>\n      <div className={ `text-sm grid grid-cols-${ range.length }` }>\n        { range.map(r =>\n            <div className=\"col-span-1 text-right pr-1\" key={ r }>\n              { format(scale.invertExtent(r)[1]) }\n            </div>\n          )\n        }\n      </div>\n    </div>\n  )\n}\n","const NpmrdsSources = [\n  { id: \"npmrds\",\n    source: {\n      type: \"vector\",\n      url: \"https://tiles.availabs.org/data/npmrds.json\"\n    }\n  }\n]\n\nconst npmrdsPaint = {\n  'line-color': '#ccc',\n  'line-width': [\n    \"interpolate\",\n    [\"linear\"],\n    [\"zoom\"],\n    0,\n    [\n      \"match\",\n      [\"get\", \"n\"],\n      [1, 2],\n      0.5,\n      0\n    ],\n    13,\n    [\n      \"match\",\n      [\"get\", \"n\"],\n      [1, 2],\n      1.5,\n      1\n    ],\n    18,\n    [\n      \"match\",\n      [\"get\", \"n\"],\n      [1, 2],\n      8,\n      5\n    ]\n  ],\n  'line-opacity': [\n    \"case\",\n    [\"boolean\", [\"feature-state\", \"hover\"], false],\n    0.4,\n    1\n  ],\n  'line-offset': {\n    base: 1.5,\n    stops: [[5, 0], [9, 1], [15, 3], [18, 7]]\n  }\n}\n\nconst NpmrdsLayers = ['2016','2017','2018','2019','2020','2021']\n  .map(year => {\n    return {\n      id: `tmc-${year}`,\n      type: 'line',\n      source: 'npmrds',\n      beneath: 'waterway-label',\n      'source-layer': `npmrds_${year}`,\n      layout: {\n        'visibility': 'visible',\n        'line-join': 'round',\n        'line-cap': 'round'\n      },\n      paint: npmrdsPaint\n    }\n  })\n\n\n\n\nexport {\n  NpmrdsSources,\n  NpmrdsLayers\n}","const TrafficSignalsSources = [\n  { id: \"traffic_signals\",\n    source: {\n      type: \"vector\",\n      url: \"https://tiles.availabs.org/data/osm_traffic_signals.json\"\n    }\n  }\n]\n\nconst TrafficSignalsLayers = [{\n      'id': 'traffic_signals_layer',\n      'type': 'circle',\n      'source': 'traffic_signals',\n      'beneath': 'road-label',\n      'source-layer': \"osm_traffic_signals\",\n      'layout': {\n        'visibility': 'visible',\n      },\n      'filter': [\"==\",\"$type\",\"Point\"],\n      'minzoom': 13,\n      'paint': {\n        'circle-radius': 3,\n        'circle-color':' #B42222',\n        'circle-stroke-color': '#fefefe',\n        'circle-stroke-width': 1\n      }\n}]\n\nexport {\n\tTrafficSignalsSources,\n\tTrafficSignalsLayers\n}","import get from 'lodash.get'\nimport { getColorRange } from \"../../utils\"\nconst filters = {\n  geography: {\n    name: 'Geography',\n    type: 'select',\n    domain: [\n      { \n        name: 'All',\n        value: ['36061', '36005', '36047', '36081', '36085','09001', '09005', '09009','36111', '36027', '36071', '36105', '36087', '36119', '36079','36059', '36103','34003', '34019', '34017', '34021', '34023', '34025', '34027', '34029', '34031', '34035', '34037', '34039', '36113', '34013']\n      }, \n      {\n        name: 'NYBPM Counties',\n        value: ['36061', '36005', '36047', '36081', '36085','09001', '09005', '09009','36111', '36027', '36071', '36105', '36087', '36119', '36079','36059', '36103','34003', '34019', '34017', '34021', '34023', '34025', '34027', '34029', '34031', '34035', '34037', '34039', '36113', '34013']\n      },\n      {\n        name: 'Connecticut',\n        value:  ['09001', '09005', '09009']\n      },\n      {\n        name: 'Long Island',\n        value:  ['36059', '36103']\n      },\n      {\n        name: 'Mid Hudson',\n        value:  ['36111', '36027', '36071', '36105', '36087', '36119', '36079']\n      },\n      {\n        name: 'Mid Hudson South',\n        value:  ['36079', '36119', '36087']\n      },\n      {\n        name: 'New Jersey',\n        value: ['34003', '34019', '34017', '34021', '34023', '34025', '34027', '34029', '34031', '34035', '34037', '34039', '36113', '34013'] \n      },{\n        name: 'New York City',\n        value:  ['36061', '36005', '36047', '36081', '36085']\n      }\n    ],\n    value: \"All\",\n    searchable: true,\n    accessor: d => d.name,\n    valueAccessor: d => d.name,\n    multi: false,\n  },\n  year: {\n    name: 'Year',\n    type: \"select\",\n    multi: false,\n    domain: [2016, 2017, 2018, 2019,2020, 2021],\n    value: 2019\n  },\n  month: {\n    name: 'Month',\n    type: \"select\",\n    multi: false,\n    domain: [1,2,3,4,5,6,7,8,9,10,11,12],\n    value: 1\n  },\n  hour: {\n    name: \"Hour\",\n    type: \"select\",\n    multi: false,\n    domain: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],\n    value: 15\n  }\n \n \n}\n\n\nconst updateLegend = (filters, legend) => {\n  \n  //legend.type = \"threshold\";\n  legend.range = getColorRange(get(legend, 'range.length', 6), \"RdYlBu\", true).reverse()\n  legend.format = \",.2~f\";\n  \n}\n\n\nconst getNetwork = (filters) => {\n  if(filters.network.value == 'con') {\n    return filters.conflation.value\n  }\n  return filters.network.value\n}\n\n\n\nconst setActiveLayer = (layers, filters, mapboxMap) => {\n  // console.log('setLayers ', filters.network.value, filters.year.value)\n  return layers\n    .map(l => l.id)\n    .filter(l => l !== 'traffic_signals_layer')\n    .map(l => {\n      let output = null\n      let type = l.split('-')[0]\n      let year = l.split('-')[1]\n      let checkYear = filters.year.value\n      if(type === 'tmc' && +year === +checkYear) {\n        output = l\n        mapboxMap.setLayoutProperty(\n          l,'visibility','visible'\n        )\n      } else if(type !== 'geo'){\n        mapboxMap.setLayoutProperty(\n          l,'visibility','none'\n        )\n      }\n      return output\n    }).filter(d => d)\n   \n}\n\n// export filters\n// export updateSubMeasures\n// export getMeasure\n// export getMeasureName\nexport {\n  filters,\n  updateLegend,\n  setActiveLayer\n}"," import React from 'react'\nimport get from 'lodash.get'\n\nimport { getColorRange, /*Legend*/ } from \"../../utils\"\nimport { /*Select,*/ useFalcor } from '@availabs/avl-components'\nimport mapboxgl from \"mapbox-gl\"\nimport * as d3scale from \"d3-scale\"\nimport flatten from 'lodash.flatten'\n//import len from '@turf/length'\n// import flatten from 'lodash.flatten'\n\nimport { ckmeans } from 'simple-statistics'\n\nimport { \n  NpmrdsSources, \n  NpmrdsLayers\n} from '../../map-styles/npmrds'\n\nimport { \n  TrafficSignalsSources,\n  TrafficSignalsLayers\n} from '../../map-styles/traffic_signals'\n\nimport { \n  filters,\n  updateLegend,\n  setActiveLayer\n} from './filters'\n\nimport HoverComp from './HoverComp'\nimport { LayerContainer } from \"components/avl-map/src\"\n\n/* ---- To Do ----- \nX - Data Overview\nX - stop lights\nX - All Years Working\n1 - Get RIS with new IDS\n3 - Overview Graph through time\n4- test measures by geography\n   ---------------- */\n\n\nclass NPMRDSLayer extends LayerContainer {\n  name = \"NPMRDS speeds\"\n  sources = [\n    ...NpmrdsSources,\n    ...TrafficSignalsSources,\n    { id: \"geo-boundaries-source\",\n        source: {\n          type: \"geojson\",\n          data: {\n            type: \"FeatureCollection\",\n            features: []\n          }\n        }\n    },\n  ]\n  layers = [\n    // ...ConflationLayerCase,\n    ...NpmrdsLayers,\n    // ...TrafficSignalsLayers,\n    { id: \"geo-boundaries\",\n      type: \"line\",\n      source: \"geo-boundaries-source\",\n      paint: {\n        \"line-color\": \"#fff\"\n      }\n    }\n  ]\n\n  infoBoxes = [\n    {\n      Component: ({layer}) => (\n        <div className='w-full bg-npmrds-600 text-npmrds-100'>\n          \n        </div>\n      ),\n      show: true\n    },\n    \n  ]\n  toolbar = []\n  filters = filters\n  updateLegend = updateLegend\n  setActiveLayer = setActiveLayer\n  legend = {\n    type: \"quantile\",\n    domain: [0, 150],\n    range: getColorRange(9, \"RdYlBu\").reverse(),\n    format: \",.1f\",\n    show: true,\n    Title: ({ layer }) => {\n      if(!layer) return\n      return <div>Speed (mph)</div>\n    }\n  }\n  onHover = {\n    layers: [...NpmrdsLayers.map(d => d.id)],\n    filterFunc: function(layer, features, point, latlng) {\n\n        const key = 'tmc',\n          value = get(features, [0, \"properties\", key], \"none\"),\n          dir = get(features, [0, \"properties\", \"dir\"], \"none\");\n        return [\"in\", key, value] //[\"all\", [\"in\", key, value], [\"in\", \"dir\", dir]];\n    },\n    callback: (layerId, features, lngLat) => {\n      let feature = features[0]\n     \n      const key =  'tmc',\n      value = get(features, [0, \"properties\", key], \"none\")\n\n      let data = [\n        ...Object.keys(feature.properties).map(k=> [k, feature.properties[k]])        \n      ]\n      data.push(['hoverlayer', layerId])\n      return data\n    },\n    //HoverComp\n    \n  }\n  // onClick = {\n  //   layers: [...ConflationLayers.map(d => d.id)],\n  //   callback: (features, lngLat) => {\n  //     let feature = features[0]\n  //     console.log('click', feature, features)\n  //   } \n  // }\n\n  state = {\n    activeStation: null,\n    zoom: 6.6,\n    progress: 0,\n    qaLevel: 0.3,\n    allMeasures: [],\n    risAttributes: [],\n    tmcAttributes: [],\n    currentData: [],\n    activeLayers: []\n  }\n\n  \n  loadFromLocalStorage() {\n    return window.localStorage ?\n      JSON.parse(window.localStorage.getItem(\"macro-view-geographies\") || \"[]\")\n      : [];\n  }\n\n  saveToLocalStorage(geographies = this.filters.geography.value) {\n    if (window.localStorage) {\n      if (geographies.length) {\n        window.localStorage.setItem(\"macro-view-geographies\", JSON.stringify(geographies));\n      }\n      else {\n        window.localStorage.removeItem(\"macro-view-geographies\")\n      }\n    }\n  }\n\n\n\n  zoomToGeography() {\n    if (!this.mapboxMap) return;\n\n    const bounds = this.getBounds();\n\n    if (bounds.isEmpty()) return;\n\n    const options = {\n      padding: {\n        top: 25,\n        right: 200,\n        bottom: 25,\n        left: 200\n      },\n      bearing: 0,\n      pitch: 0,\n      duration: 2000\n    }\n\n    options.offset = [\n      (options.padding.left - options.padding.right) * 0.5,\n      (options.padding.top - options.padding.bottom) * 0.5\n    ];\n\n    const tr = this.mapboxMap.transform,\n      nw = tr.project(bounds.getNorthWest()),\n      se = tr.project(bounds.getSouthEast()),\n      size = se.sub(nw);\n\n    const scaleX = (tr.width - (options.padding.left + options.padding.right)) / size.x,\n      scaleY = (tr.height - (options.padding.top + options.padding.bottom)) / size.y;\n\n    options.center = tr.unproject(nw.add(se).div(2));\n    options.zoom = Math.min(tr.scaleZoom(tr.scale * Math.min(scaleX, scaleY)), tr.maxZoom);\n\n    this.mapboxMap.easeTo(options);\n  }\n\n  getBounds() {\n    let geoids = this.filters.geography.domain.filter(d => d.name === this.filters.geography.value)[0].value,\n      filtered = this.geographies\n        .filter(({ value }) => geoids.includes(value));\n    \n    return filtered\n      .reduce((a, c) => a.extend(c.bounds), new mapboxgl.LngLatBounds())\n  }\n\n  setActiveStation = () => {\n\n  }\n  \n  init(map, falcor) {\n\n    let states = [\"36\",\"34\",\"09\",\"42\"]\n    return falcor\n      .get(\n        [\"geo\", states, \"geoLevels\"],\n        \n      )\n      .then((res) => {\n        // const mInfo = get(res, [\"json\", \"pm3\", \"measureInfo\"], {});\n        // console.log('measureInfo', res)\n        let geo = get(res,'json.geo',{})\n        const geographies = flatten(states.map(s => geo[s].geoLevels));\n\n        this.geographies = \n         geographies.map(geo => ({\n            name: `${geo.geoname.toUpperCase()} ${geo.geolevel}`,\n            geolevel: geo.geolevel,\n            value: geo.geoid,\n            bounding_box: geo.bounding_box\n        }));\n        //this.filters.geography.value = this.loadFromLocalStorage();\n        //console.log('where am i', this.filters.geography.value)\n        this.zoomToGeography();\n      })\n  }\n\n  onFilterChange(filterName, newValue, prevValue) {\n    switch (filterName) {\n     \n\n      case \"geography\":\n        console.log('new geography', newValue)\n        this.zoomToGeography(newValue);\n        this.saveToLocalStorage();\n        break;\n      \n      default:\n        console.log(\"no case for filter\", filterName);\n        break;\n    }\n  }\n  \n  getColorScale(domain) {\n    if(this.legend.range.length > domain.length) {\n      this.legend.domain  = []\n      return false\n    }\n    this.legend.domain = ckmeans(domain,this.legend.range.length).map(d => Math.min(...d))\n    this.updateLegend(this.filters,this.legend)\n    return d3scale.scaleLinear()\n      .domain(this.legend.domain)\n      .range(this.legend.range);\n  }\n\n  fetchData(falcor) {\n    // console.log('fetchData')\n    let year = +this.filters.year.value,\n      month = +this.filters.month.value,\n      geoids = this.filters.geography.domain.filter(d => d.name === this.filters.geography.value)[0].value,\n      filtered = this.geographies\n        .filter(({ value }) => geoids.includes(value));\n    \n   // console.log('request', ['tig','npmrds',`${month}|${year}`,filtered.map(d => `${d.geolevel}|${d.value}`), 'data'])\n\n    let requests = filtered.reduce((a, c) => { \n      a.push(['tig','npmrds',`${month}|${year}`,`${c.geolevel}|${c.value}`, 'data'])\n      a.push([\"geo\", c.geolevel.toLowerCase(), c.value, \"geometry\"]);\n      return a;\n    },[])\n\n    return falcor.get(...requests)\n      // .then((data) => {\n      //   //console.log('fetchData gem requests',data)\n      //   console.log('got data', data)\n      //   return data\n      // })\n        \n  }\n\n  render(map) {\n    // console.log('render', this)\n    //console.log('testing', map.getStyle().layers)\n    let year = +this.filters.year.value,\n      month = +this.filters.month.value,\n      geoids = this.filters.geography.domain.filter(d => d.name === this.filters.geography.value)[0].value,\n      hour = this.filters.hour.value,\n      filtered = this.geographies\n        .filter(({ value }) => geoids.includes(value));\n\n    this.setActiveLayer(\n      this.layers,\n      this.filters,\n      this.mapboxMap\n    );\n\n    const falcorCache = this.falcor.getCache()\n    let data = filtered.map(d => get(falcorCache, ['tig','npmrds',`${month}|${year}`,`${d.geolevel}|${d.value}`, 'data','value'],[]))\n      .reduce((out,d) => {\n        return {...out, ...d}\n      }, {})\n\n    //console.log('data',data)\n      \n    let domain = Object.values(data).map(d => get(d, `s[${hour}]`, 0))\n    const scale = this.getColorScale(domain.sort((a, b) => a - b));\n    const colors = Object.keys(data).reduce((a, c) => {\n      let val = scale(get(data[c], `s[${hour}]`, 0))\n      a[c] = val ? val : 'hsla(185, 0%, 27%,0.8)'\n      return a;\n    }, {});\n\n    console.log('colors',colors)\n    \n    map.setPaintProperty(`tmc-${year}`, \"line-color\", [\n      \"case\",\n      [\"has\", [\"to-string\", [\"get\", 'tmc']], [\"literal\", colors]],\n      [\"get\", [\"to-string\", [\"get\", 'tmc']], [\"literal\", colors]],\n      \"hsla(185, 0%, 27%,0.0)\",\n    ]);\n    \n    const collection = {\n      type: \"FeatureCollection\",\n      features: filtered\n        .map((f) => ({\n          type: \"Feature\",\n          properties: { geoid: f.value },\n          geometry: get(\n            falcorCache,\n            [\"geo\", f.geolevel.toLowerCase(), f.value, \"geometry\", \"value\"],\n            null\n          ),\n        }))\n        .filter((f) => Boolean(f.geometry)),\n    };\n    map.getSource(\"geo-boundaries-source\").setData(collection);\n\n  }\n\n\n  \n\n}\n\nexport const NPMRDSLayerFactory = (options = {}) => new NPMRDSLayer(options);\n","import {TestTipLayerFactory} from \"./tipLayer\";\nimport {SED2040CountyLevelForecastLayerFactory} from \"./SED2040CountyLevelForecastLayer\";\nimport {SED2040TazLevelForecastLayerFactory} from \"./SED2040TazLevelForecastLayer\";\nimport {SED2050CountyLevelForecastLayerFactory} from \"./SED2050CountyLevelForecastLayer\";\nimport {SED2055CountyLevelForecastLayerFactory} from \"./SED2055CountyLevelForecastLayer\";\nimport {SED2055TazLevelForecastLayerFactory} from \"./SED2055TazLevelForecastLayer\";\nimport {ACSCensusLayerFactory} from \"./ACSCensusLayer\";\nimport {BPMPerformanceMeasuresLayerFactory} from \"./BPMPerformanceMeasuresLayer\";\nimport {HubBoundTravelDataLayerFactory} from \"./HubBoundTravelDataLayer\";\nimport {RTPProjectDataLayerFactory} from \"./RTPProjectDataLayer\";\nimport {NPMRDSLayerFactory} from './npmrds';\n\nexport const layers = {\n    \"tig\": TestTipLayerFactory,\n    \"sed_county_2040\": SED2040CountyLevelForecastLayerFactory,\n    \"sed_county_2050\": SED2050CountyLevelForecastLayerFactory,\n    \"sed_taz_2040\": SED2040TazLevelForecastLayerFactory,\n    \"sed_county_2055\": SED2055CountyLevelForecastLayerFactory,\n    \"sed_taz_2055\": SED2055TazLevelForecastLayerFactory,\n    \"acs_census\": ACSCensusLayerFactory,\n    'bpm_performance': BPMPerformanceMeasuresLayerFactory,\n    'hub_bound_travel_data': HubBoundTravelDataLayerFactory,\n    'rtp_project_data': RTPProjectDataLayerFactory,\n    'npmrds': NPMRDSLayerFactory\n}\n\n","import React from \"react\"\nimport { AvlMap } from \"components/avl-map/src\"\nimport config from \"config.json\"\nimport TigLayout from 'components/tig/TigLayout'\nimport {layers} from \"./layers\";\n\n//import { MacroLayerFactory } from \"./layers/NP/index\"\n\nconst Map = ({ mapOptions,layers}) => {\n\n\n    return (\n        <TigLayout>\n            <div className='w-full h-[918px]' style={{height: 900}}>\n                <div className='w-full h-full'>\n                    <AvlMap\n                        accessToken={ config.MAPBOX_TOKEN }\n                        mapOptions={ mapOptions }\n                        layers={ [] }\n                        sidebar={{\n                            title: \"Map Test\",\n                            tabs: [\"layers\", \"styles\"],\n                            open: true\n\n                        }}\n                    />\n                </div>\n            </div>\n        </TigLayout>\n    )\n}\n\n\n\nconst MapPage = {\n    path: \"/map\",\n    mainNav: false,\n    name: \"TIG Map\",\n    exact: true,\n    // authLevel: 0,\n    layout: 'Simple',\n    layoutSettings: {\n        fixed: true,\n        navBar: 'top',\n        headerBar: false\n    },\n    component: {\n        type: Map,\n        props: {\n            mapOptions: {\n                zoom: 6.6,\n                styles: [{name: \"Light\",\n                    style: 'mapbox://styles/am3081/ckm86j4bw11tj18o5zf8y9pou' }]\n            },\n            layers: [\n                layers.rtp_project_data(),\n                // layers.hub_bound_travel_data(),\n                // layers.bpm_performance(),\n                // layers.acs_census(),\n                // layers.sed_taz_2055(),\n                // layers.sed_county_2055(),\n                // layers.sed_taz_2040(),\n                // layers.sed_county_2040(),\n                // layers.sed_county_2050(),\n                // layers.tig()\n\n            ]\n        },\n        wrappers: [\n            \"avl-falcor\"\n        ]\n    }\n}\n\n\nconst routes = [\n    MapPage\n];\nexport default routes;\n","import React,{useMemo} from \"react\"\nimport { AvlMap } from \"../../components/avl-map/src\"\nimport config from \"config.json\"\nimport { withAuth } from '@availabs/avl-components'\nimport {layers} from \"./layers\";\nimport {useParams} from 'react-router-dom'\nimport routingConfig from './routing-config/routingConfig.json'\n\nimport TigLayout from 'components/tig/TigLayout'\n\nconst Map = withAuth(({ mapOptions,layers,views}) => {\n    const {viewId} = useParams()\n\n    const layer = useMemo(() => {\n        let layerVal = routingConfig.reduce((a, c) => {\n            if (c.value === viewId) {\n                a = [layers[0][c.layer]({name:c.name,viewId:viewId})]\n            }\n            return a\n        }, '')\n        console.log('layerVal', layerVal)\n        return layerVal\n    }, [viewId,layers])\n\n\n    return (\n        <TigLayout>\n            <div className='w-full h-[918px]' style={{height: 918}}>\n                <div className='w-full h-full'>\n                    view id : {viewId}\n                    <AvlMap\n                        accessToken={ config.MAPBOX_TOKEN }\n                        mapOptions={ mapOptions }\n                        layers={layer}\n                        sidebar={{\n                            title: \"\",\n                            tabs: [\"layers\", \"styles\"],\n                            open: true\n\n                        }}\n\n                    />\n                </div>\n            </div>\n        </TigLayout>\n    )\n})\n\n\nconst MapPage = {\n    path: `/views/:viewId/map`,\n    mainNav: false,\n    name: \"TIG Map\",\n    exact: true,\n    // authLevel: 0,\n    layout: 'Simple',\n    layoutSettings: {\n        fixed: true,\n        navBar: 'top',\n        headerBar: false\n    },\n    component: {\n        type: Map,\n        props: {\n            mapOptions: {\n                zoom: 10.6,\n                center: [-73.911895, 40.88],\n                styles: [\n                    {name: \"Streets\",\n                    style: 'mapbox://styles/am3081/ckt3271or0nnu17oikkvl0eme' },\n                    {name: \"Light\",\n                    style: 'mapbox://styles/am3081/ckm86j4bw11tj18o5zf8y9pou' }]\n            },\n            layers: [\n               layers\n            ]\n        },\n        wrappers: [\n            \"avl-falcor\"\n        ]\n    }\n}\n\n\nconst routes = [\n    MapPage\n];\nexport default routes;\n","import Landing from \"pages/Landing\"\nimport Views from \"pages/Landing/tigDataSources/DataSourceView\"\nimport AdminLanding from \"pages/Landing/admin\"\nimport NoMatch from \"pages/404\"\nimport Auth from \"pages/auth\"\nimport TestMap from \"pages/map/MapIndex\"\nimport Map from 'pages/map'\n\nconst Routes = [\n  Landing,\n  Views,\n  AdminLanding,\n  Auth,\n  ...Map,\n  ...TestMap,\n\n  NoMatch\n]\n\nexport default Routes\n","import React from 'react';\nimport { BrowserRouter, Switch } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport ScrollToTop from 'utils/ScrollToTop'\nimport { createBrowserHistory } from 'history';\nimport Routes from 'Routes';\n\nimport {\n  DefaultLayout,\n  Messages\n} from \"@availabs/avl-components\"\n\n//export const history = createBrowserHistory({basename: process.env.PUBLIC_URL});\n\nclass App extends React.Component {\n  render() {\n    return (\n      <BrowserRouter basename={process.env.REACT_APP_PUBLIC_URL}>\n        <ScrollToTop />\n        <Switch>\n          { Routes.map((route, i) =>\n              <DefaultLayout key={ i } { ...route } { ...this.props }\n                menus={ Routes.filter(r => r.mainNav) }/>\n            )\n          }\n        </Switch>\n        <Messages/>\n      </BrowserRouter>\n    );\n  }\n}\nconst mapStateToProps = state => {\n    return ({\n\n    });\n}\n\nconst mapDispatchToProps = { createBrowserHistory };\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(App);\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\n\nimport { messages } from \"@availabs/avl-components\"\n\nimport { Reducers } from \"@availabs/ams\"\n\nconst reducer = combineReducers({\n  ...Reducers,\n  messages\n});\n\nexport default createStore(reducer, applyMiddleware(thunk))\n","import { Compositions, composeTheme } from \"@availabs/avl-components\";\n\nconst { $compositions } = Compositions;\n\n$compositions.button[1][\"$default\"] = \"text-blueGray-200 disabled:text-blueGray-300\";\n$compositions.button[2][\"$default\"] = \"border-blueGray-200\";\n$compositions.button[3][\"$default\"] = \"hover:bg-blueGray-200 hover:text-blueGray-900\";\n\n$compositions.button[1][\"Dark\"] = \"bg-blueGray-900 text-current disabled:text-gray-300\";\n$compositions.button[2][\"Dark\"] = \"border-blueGray-900\";\n$compositions.button[3][\"Dark\"] = \"hover:bg-blueGray-800 hover:border-blueGray-800\";\n$compositions.button[4][\"Wide\"] = \"px-6 py-0 @textSmall\";\n\n//console.log(\"$compositions\",$compositions)\n\n// import {composeTheme} from \"@availabs/avl-components/dist/Themes/utils\";\n\nconst colors = {\n  transparent: {\n    contentBg: \"\",\n    accentColor: \"blue-600\",\n    accentBg: \"hover:bg-blue-600\",\n    borderColor: \"border-gray-200\",\n    textColor: \"text-gray-800\",\n    highlightColor: \"text-white\",\n  },\n  white: {\n    contentBg: \"bg-white\",\n    accentColor: \"blue-600\",\n    accentBg: \"hover:bg-blue-600\",\n    borderColor: \"border-gray-100\",\n    textColor: \"text-gray-600\",\n    highlightColor: \"text-white\",\n  },\n  dark: {\n    contentBg: \"bg-darkblue-600\",\n    accentColor: \"blue-600\",\n    accentBg: \"hover:bg-blue-600\",\n    borderColor: \"border-gray-700\",\n    textColor: \"text-gray-200\",\n    highlightColor: \"text-white\",\n  },\n  gray: {\n    contentBg: \"bg-gray-800\",\n    accentColor: \"gray-500\",\n    accentBg: \"hover:bg-gray-500\",\n    borderColor: \"border-gray-600\",\n    textColor: \"text-gray-300\",\n    highlightColor: \"text-gray-200\",\n  },\n  bright: {\n    contentBg: \"bg-blue-700\",\n    accentColor: \"blue-400\",\n    accentBg: \"hover:bg-blue-400\",\n    borderColor: \"border-blue-600\",\n    textColor: \"text-white\",\n    highlightColor: \"text-white\",\n  },\n};\n\nconst sizes = {\n  compact: {\n    wrapper: \"w-64\",\n    sideItem: \"flex mx-6 pr-4 py-2 text-sm font-light hover:pl-4\",\n    topItem: \"flex items-center text-sm px-4 border-r h-12\",\n    icon: \"mr-3 text-lg\",\n  },\n  full: {\n    wrapper: \"w-64\",\n    sideItem: \"flex mx-4 pr-4 py-4 text-base font-base border-b hover:pl-4\",\n    topItem: \"flex pr-4 py-2 text-sm font-light\",\n    icon: \"mr-4 text-2xl\",\n  },\n  mini: {\n    wrapper: \"w-20 overflow-x-hidden\",\n    sideItem: \"flex pr-4 py-4 text-base font-base border-b\",\n    topItem: \"flex px-4 items-center text-sm font-light \",\n    icon: \"w-20 mr-4 text-4xl\",\n  },\n  micro: {\n    wrapper: \"w-14 overflow-x-hidden\",\n    sideItem: \"flex pr-4 py-4 text-base font-base border-b\",\n    topItem: \"flex mx-6 pr-4 py-2 text-sm font-light\",\n    icon: \"w-14 mr-4 text-2xl\",\n  },\n};\n\nlet color = \"white\";\nlet size = \"compact\";\n\n\n\nconst TDS_THEME_BASE = {\n    /* ----- \n     Side Nav Theme Components Minimal \n  ------*/\n\n  sidenavWrapper: `${colors[color].contentBg} ${sizes[size].wrapper} border-r border-gray-200 h-full`,\n  menuIconSide: ` text-${colors[color].accentColor} ${sizes[size].icon} group-hover:${colors[color].highlightColor}`,\n  navitemSide: ` \n    group font-sans \n    ${sizes[size].sideItem} ${colors[color].textColor} ${colors[color].borderColor} \n    ${colors[color].accentBg} hover:${colors[color].highlightColor} \n    focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 \n    transition-all cursor-pointer\n  `,\n\n  navitemSideActive: `\n    group flex pl-8 pr-4 py-2 bg-${colors[color].highlightColor} text-base font-medium text-darkblue-500 focus:outline-none hover:text-indigo-800 focus:text-indigo-800 focus:bg-blue-200 focus:border-indigo-700 transition duration-150 ease-in-out`,\n\n  /* ----- \n     Top Nav Theme Components Minimal \n  ------*/\n  topnavWrapper: `w-full h-12 ${colors[color].contentBg}`,\n  topnavContent: `flex w-full h-full`,\n  topnavMenu: `hidden md:flex flex-1 h-full overflow-x-auto overflow-y-hidden scrollbar-sm`,\n  menuIconTop: `text-${colors[color].accentColor} ${sizes[size].icon} group-hover:${colors[color].highlightColor}`,\n\n  navitemTop: `\n    group font-sans w-full\n    ${sizes[size].topItem} ${colors[color].textColor} ${colors[color].borderColor} \n    ${colors[color].accentBg} hover:${colors[color].highlightColor} \n    focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 \n    transition cursor-pointer`,\n  //`px-4 text-sm font-medium tracking-widest uppercase inline-flex items-center  border-transparent  leading-5 text-white hover:bg-white hover:text-darkblue-500 border-gray-200 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out h-full`,\n  topmenuRightNavContainer: \"hidden md:block h-full\",\n  navitemTopActive: `group font-sans w-full\n    ${sizes[size].topItem} ${colors[color].textColor} ${colors[color].borderColor} \n    ${colors[color].accentBg} hover:${colors[color].highlightColor} \n    focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 \n    transition cursor-pointer`,\n\n  /* ------------------------- */\n\n  text: 'text-blueGray-100',\n  textContrast: \"text-white\",\n  border: \"border-blueGray-100\",\n\n\n\n  textInfo: \"text-cyan-400\",\n  bgInfo: \"bg-cyan-400\",\n  borderInfo: \"border-cyan-400\",\n\n  textSuccess: \"text-green-400\",\n  bgSuccess: \"bg-green-400\",\n  borderSuccess: \"border-green-400\",\n\n  textDanger: \"text-red-400\",\n  bgDanger: \"bg-red-400\",\n  borderDanger: \"border-red-400\",\n\n  textWarning: \"text-yellow-400\",\n  bgWarning: \"bg-yellow-400\",\n  borderWarning: \"border-yellow-400\",\n\n  textLight: \"text-blueGray-300\", // <-- for text styled like placeholder but can't be selected with ::placeholder\n  // these 2 should be equal\n  placeholder: 'placeholder-blueGray-300',\n\n  menuIcon: 'mr-3 h-6 w-6',\n  topMenuBorder: 'border-b border-blueGray-800',\n  headerShadow: '',\n\n  bg: 'bg-white',\n\n  menuBg: 'bg-white',\n  menuBgHover: 'hover:bg-blueGray-600',\n  menuBgActive: 'bg-blueGray-700',\n  menuBgActiveHover: 'hover:bg-blueGray-600',\n  menuText : \"text-blueGray-100\",\n  menuTextHover: \"hover:text-cyan-300\",\n  menuTextActive: \"text-cyan-300\",\n  menuTextActiveHover: \"hover:text-cyan-200\",\n\n  \n  sidebarBg: 'bg-white',\n  sidebarBorder: '',\n\n  headerBg: 'bg-blueGray-900',\n  headerBgHover: \"hover:bg-blueGray-700\",\n\n  inputBg: \"bg-white disabled:bg-gray-300 cursor-pointer focus:outline-none\",\n  inputBorder: \"rounded border border-transparent hover:border-blueGray-400 focus:border-blueGray-300 disabled:border-transparent\",\n  inputBgDisabled: \"bg-blueGray-300 cursor-not-allowed focus:outline-none\",\n  inputBorderDisabled: \"rounded border border-blueGray-400 hover:border-blueGray-400\",\n  inputBgFocus: \"bg-blue-200 cursor-pointer focus:outline-none\",\n  inputBorderFocus: \"rounded border hover:border-blueGray-300 focus:border-blueGray-300 border-blueGray-300\",\n\n  textBase: \"text-base\",\n  textSmall: \"text-sm\",\n  textLarge: \"text-lg\",\n  paddingBase: \"py-1 px-2\",\n  paddingSmall: \"py-0 px-1\",\n  paddingLarge: \"py-2 px-4\",\n\n  accent1: 'bg-gray-600',\n  accent2: 'bg-gray-500',\n  accent3: 'bg-gray-400',\n  accent4: 'bg-gray-300',\n\n  highlight1: \"bg-cyan-400\",\n  highlight2: \"bg-cyan-300\",\n  highlight3: \"bg-cyan-200\",\n  highlight4: \"bg-cyan-100\",\n\n  contentBg: 'bg-white',\n  contentWidth: 'w-full max-w-7xl',\n  contentPadding: \"py-8\",\n\n  sidebarW: '56',\n  transition: \"transition ease-in-out duration-150\",\n\n  tableInfoBar: \"bg-blueGray-700\",\n  tableRow: 'bg-blueGray-800 hover:bg-blueGray-600 @transition',\n  tableRowStriped: 'bg-blueGray-800 even:bg-blueGray-700 hover:bg-blueGray-600 @transition',\n\n  tableCell: 'px-4 py-1 whitespace-no-wrap',\n\n  tableHeader: \"px-4 py-2 pb-1 border-b-2 border-blueGray-900 bg-blueGray-900 text-left font-medium @text uppercase first:rounded-tl-md last:rounded-tr-md\",\n\n  $compositions\n}\nconst TDS_THEME = composeTheme(TDS_THEME_BASE);\n\nexport default TDS_THEME;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport { API_HOST } from 'config'\nimport { AUTH_HOST, PROJECT_NAME, CLIENT_HOST } from 'config'\n\nimport { Provider } from 'react-redux';\nimport store from 'store';\n\nimport TDS_THEME from \"./theme\"\nimport {\n  FalcorProvider,\n  ThemeContext,\n  falcorGraph,\n  addComponents,\n  addWrappers\n} from \"@availabs/avl-components\"\n\nimport reportWebVitals from './reportWebVitals';\n\n//\n// import DmsComponents from \"components/dms\"\n// import DmsWrappers from \"components/dms/wrappers\"\n\nimport {\n  Components as AmsComponents,\n  Wrappers as AmsWrappers,\n  enableAuth\n} from \"@availabs/ams\"\n\nimport 'styles/tailwind.css';\nimport 'styles/index.css';\nimport 'styles/os-icons.css';\nimport 'styles/font-awesome/css/all.css'\n\n// addComponents(DmsComponents);\n// addWrappers(DmsWrappers);\n\naddComponents(AmsComponents);\naddWrappers(AmsWrappers);\n\nconst AuthEnabledApp = enableAuth(App, { AUTH_HOST, PROJECT_NAME, CLIENT_HOST });\n\n\nReactDOM.render(\n  <React.StrictMode>\n   \t<Provider store={ store }>\n  \t\t<FalcorProvider falcor={ falcorGraph(API_HOST) }>\n        <ThemeContext.Provider value={TDS_THEME}>\n          <AuthEnabledApp />\n        </ThemeContext.Provider>\n      </FalcorProvider>\n  \t</Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\nreportWebVitals();\n","export const PROJECT_NAME = 'NPMRDS';\n\nlet API_HOST = 'https://graph.availabs.org';\nlet AUTH_HOST = 'https://availauth.availabs.org';\nlet CLIENT_HOST = 'https://npmrds.availabs.org';\n\nif (process.env.NODE_ENV === 'development') {\n  API_HOST = 'http://localhost:4444';\n  // AUTH_HOST = 'http://localhost:3457';\n  CLIENT_HOST = 'http://localhost:3000';\n}\nexport { API_HOST, AUTH_HOST, CLIENT_HOST };\n"],"sourceRoot":""}