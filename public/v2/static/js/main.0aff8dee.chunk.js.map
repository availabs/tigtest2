{"version":3,"sources":["utils/shp-write/src/types.js","utils/shp-write/src/extent.js","utils/shp-write/src/zip.js","utils/shp-write/src/write.js","utils/shp-write/src/prj.js","utils/shp-write/index.js","utils/shp-write/src/download.js","utils/shp-write/src/fields.js","utils/shp-write/src/points.js","utils/shp-write/src/poly.js","utils/shp-write/src/geojson.js","utils/ScrollToTop.js","pages/catalog/card-menu/Menu.js","pages/catalog/tigDataSources/DatasourceList.js","pages/catalog/tigDataSources/RecentActivity.js","components/tig/TigNav.js","components/tig/TigBreadcrumbs.js","components/tig/TigLayout.js","pages/catalog/index.js","pages/catalog/tigDataSources/DataSourceView.js","pages/catalog/admin.js","pages/404.js","pages/auth/index.js","components/avl-map/src/components/CollapsibleSidebar.js","components/avl-map/src/components/LayerPanel.js","components/avl-map/src/components/Sidebar.js","components/avl-map/src/components/LoadingLayer.js","components/avl-map/src/components/HoverCompContainer.js","components/avl-map/src/components/InfoBoxContainer.js","components/avl-map/src/components/DraggableModal.js","components/avl-map/src/components/MapAction.js","components/avl-map/src/avl-map.js","components/avl-map/src/components/DefaultHoverComp.js","components/avl-map/src/LayerContainer.js","pages/map/layers/layerHost.js","pages/map/wrappers/fetcher.js","pages/map/layers/tipLayer.js","pages/map/layers/SED2040CountyLevelForecastLayer.js","pages/map/layers/SED2040TazLevelForecastLayer.js","pages/map/layers/SED2050CountyLevelForecastLayer.js","pages/map/layers/SED2055CountyLevelForecastLayer.js","pages/map/layers/SED2055TazLevelForecastLayer.js","pages/map/config/acsCensusCategoryMappings.js","pages/map/layers/ACSCensusLayer.js","pages/map/layers/BPMPerformanceMeasuresLayer.js","pages/map/layers/HubBoundTravelDataLayer.js","pages/map/layers/RTPProjectDataLayer.js","pages/map/utils/color-ranges.js","pages/map/utils/legend.js","pages/map/map-styles/npmrds.js","pages/map/map-styles/traffic_signals.js","pages/map/layers/npmrds/filters.js","pages/map/layers/npmrds/HoverComp.js","pages/map/layers/npmrds/index.js","pages/map/layers/index.js","pages/map/MapIndex.js","pages/map/components/LegendSidebar.js","pages/map/components/AddLayers.js","pages/map/components/Download.js","pages/map/components/Attribution.js","pages/map/index.js","pages/chart/index.js","pages/table/tables/npmrdsTable.js","pages/table/tables/index.js","pages/table/index.js","pages/metadata/index.js","Routes.js","App.js","store/index.js","theme/index.js","reportWebVitals.js","index.js","config.js"],"names":["module","exports","geometries","NULL","POINT","POLYLINE","POLYGON","MULTIPOINT","POINTZ","POLYLINEZ","POLYGONZ","MULTIPOINTZ","POINTM","POLYLINEM","POLYGONM","MULTIPOINTM","MULTIPATCH","enlarge","extent","pt","xmin","xmax","ymin","ymax","enlargeExtent","ext","blank","Number","MAX_VALUE","write","require","geojson","prj","JSZip","gj","options","aliasString","tmcMetaString","zip","layers","folder","point","line","multiline","polygon","forEach","l","length","properties","type","map","d","err","files","fileName","types","toLowerCase","file","shp","buffer","binary","shx","dbf","fileAliasName","fileTmcMetaName","generateAsync","undefined","process","browser","compression","pointWriter","polyWriter","writers","writeHeader","view","TYPE","setInt32","writeExtent","setFloat64","rows","geometry_type","callback","writer","shpLength","parts","shxLength","shpBuffer","ArrayBuffer","shpView","DataView","shxBuffer","shxView","dbfBuf","structure","download","saveAs","then","blob","jstypes","obj","_","fields","o","p","n","push","name","features","f","a","b","i","inherit","coordinates","fileLength","shpI","shxI","coords","reduce","no","Array","isArray","rings","justCoords","memo","c","concat","shxOffset","flattened","noParts","contentLength","featureExtent","onlyParts","arr","idx","justType","t","oftype","filter","geometry","justProps","ScrollToTop","pathname","useLocation","useEffect","arg","window","scrollTo","classNames","classes","Boolean","join","MenuComponent","className","as","open","Button","show","Fragment","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Items","static","Item","active","SOURCES_ATTRIBUTES","DatasourceList","useFalcor","falcor","falcorCache","get","from","to","fetchData","sourcesList","React","useMemo","console","log","sourcesById","data","Object","keys","id","item","state","description","Menu","processData","dI","value","link","TigNav","withAuth","leftMenu","href","alt","style","height","src","rightMenu","TigBreadcrumbs","children","useParams","viewId","dataSourceId","location","history","useHistory","getLength","getDatasources","dsdata","datasourcesIds","k","getDsLengths","viewGet","datasourceId","sources","ds","dataSourceIds","datasources","out","dsId","bySource","views","source_id","byView","selected","activeSource","actions","path","activeAction","split","pop","background","onChange","e","url","Options","personIdx","Option","TigLayout","Landing","RecentActivity","config","exact","component","title","shadowed","user","authLevel","layout","VIEWS_ATTRIBUTES","mainNav","useState","activeId","setActiveId","sortIds","response","graph","sort","dataSource","cache","navigation","icon","MapIcon","current","count","TableIcon","FolderIcon","ChartBarIcon","onClick","onClickView","layoutSettings","fixed","headerBar","logo","navBar","auth","props","showHeaders","wrappers","addToGroup","SidebarContext","createContext","useSidebarContext","useContext","InitialState","Comp","top","compProps","transitioning","InitState","Reducer","action","payload","Shift","unit","Toggle","togglePosition","position","doToggle","dir","theme","padding","textInfo","sidebarBg","menuBg","transform","transition","CollapsibleSidebar","placeBeside","width","startOpen","customTheme","minWidth","showToggle","shift","useReducer","dispatch","setOpen","useCallback","timeout","setTimeout","useRef","clearTimeout","node","setNode","extendSidebar","sidebarTop","getBoundingClientRect","passCompProps","closeExtension","contextValue","useTheme","styleWidth","Provider","Expandable","ref","forwardRef","heightFull","hFull","ExtendedSidebar","remMinWidth","left","LayerPanel","layer","layersLoading","rest","toggleOpen","filters","values","layerId","bg","removable","multi","display","Icon","cursor","menuTextActive","LayerHeader","MapActions","isDynamic","removeDynamicLayer","removeLayer","marginTop","toolbar","tool","LayerTool","Tool","tooltip","isVisible","toggleVisibility","checkDefaultTools","SidebarTabs","Component","inactiveLayers","activeLayers","rounded","placeholder","accessor","searchable","addLayer","styles","mapStyles","styleIndex","mapboxMap","loading","setLoading","done","once","off","updateStyle","index","setMapStyle","imageUrl","accent2","borderInfo","accent1","Tab","sidebarTabIndex","setSidebarTab","Sidebar","tabs","showSidebar","sidebarTabPosition","Tabs","tab","LoadingLayer","progress","scale","color","getTranslate","pos","x","y","yMax","yTrans","getPinnedTranslate","orientation","getTransform","RemoveButton","PinnedHoverComp","remove","project","lngLat","boxShadow","HoverCompContainer","InfoBoxContainer","legend","bool","shownInfoBoxes","infoBoxes","Math","max","aa","cc","legendLayers","infoBoxLayers","infoBoxWidth","box","InfoBox","Header","isOpen","LegendContainer","Title","hide","marginBottom","menuText","DraggableModal","modalData","loadingLayers","modalKey","zIndex","bringModalToFront","onDragStart","closeModal","MapAction","actionFunc","menuTextHover","DefaultMapOptions","center","minZoom","zoom","preserveDrawingBuffer","attributionControl","logoPosition","DefaultSidebar","idCounter","getUniqueId","DefaultStaticOptions","size","getStaticImageUrl","slice","mapboxgl","accessToken","initializedLayers","dynamicLayers","hoverData","Map","pinnedHoverComps","pinnedMapMarkers","prevLayerStates","layerStates","HoverComp","pinnable","sortOrder","set","delete","newPinned","HoverComps","phc","marker","md","newState","EmptyArray","EmptyObject","AvlMap","mapOptions","sidebar","layerProps","navigationControl","sidebarProps","updateHover","projectLngLat","updateFilter","filterName","prevValue","Promise","resolve","onFilterChange","render","updateLegend","update","addDynamicLayer","_onRemove","_onAdd","showModal","removePinnedHoverComp","addPinnedHoverComp","Marker","setLngLat","addTo","saveMapAsImage","canvas","getCanvas","document","createElement","toDataURL","click","reverse","promise","onMapStyleChange","setStyle","MapOptions","test","unshift","container","addControl","NavigationControl","on","mapMoved","performance","now","includes","dispatchUpdate","v","bind","mapActions","_init","setActive","pinHoverComp","hovering","receiveProps","useSetSize","Modals","modal","AllMapActions","bounds","key","pinned","DefaultHoverComp","groups","g","row","ii","getLayerId","DefaultCallback","DefaultOptions","modals","onHover","onBoxSelect","LayerContainer","this","layerVisibility","needsRender","callbacks","hoveredFeatures","updateState","init","source","getSource","addSource","getLayer","beneath","_setVisibilityNone","getLayoutProperty","addHover","addClick","selection","addBoxSelect","onAdd","call","has","setFeatureState","hover","property","filterFunc","Infinity","mousemove","featuresMap","prop","queryRenderedFeatures","feature","hasValue","sourceLayer","hoverFeatures","mouseleave","hoverLeave","start","canvasContainer","getCanvasContainer","getPos","rect","Point","clientX","clientLeft","clientY","clientTop","preventDefault","appendChild","minX","min","maxX","minY","maxY","mouseup","finish","keyup","keyCode","which","code","bbox","removeEventListener","dragPan","enable","parentNode","removeChild","featureMap","select","selectedValues","element","addEventListener","shiftKey","button","disable","boxZoom","onRemove","_setVisibilityVisible","setLayoutProperty","visibility","newValue","HOST","fetcher","fetch","res","ok","Error","json","catch","parse","TestTipLayer","dataset","domain","valueAccessor","tip_id","tip_ids","project_type","mpo_name","tip_mpos","agency","range","direction","acc","curr","params","symbologies","color_scheme","preValue","removeSource","symbols_map","colors","county","estimated_cost","cost","mpo","ptype","sponsor","symbols_geojson","line_geojson","setData","paint","symbol","layerID","SED2040CountyLevelForecastLayer","year","getColorRange","geoid","counties","area","processedData","scaleQuantile","scaleQuantize","scaleThreshold","scaleLinear","scaleOrdinal","data_counties","setFilter","data_county","colorScale","getColorScale","setPaintProperty","SED2040TazLevelForecastLayer","area_id","format","taz_ids","SED2050CountyLevelForecastLayer","SED2055CountyLevelForecastLayer","SED2055TazLevelForecastLayer","acsCensusCategoryMappings","ACSCensusLayer","categoryName","column","tracts","viewid","categoryValue","data_tracts","data_tract","BPMPerformanceMeasuresLayer","HubBoundTravelDataLayer","mode","convertTime","hub_bound","coord","extend","LngLatBounds","fitBounds","time","substring","parseInt","RTPProjectDataLayer","rtp_id","rtp_ids","plan_portion","rtp_sponsors","polygon_geojson","label","ColorRanges","colorbrewer","schemeGroups","group","toUpperCase","category","styled","div","NpmrdsSources","npmrdsPaint","base","stops","NpmrdsLayers","TrafficSignalsSources","geography","month","hour","dow","vehicles","setActiveLayer","output","checkYear","TmcComp","tmc","TmcInfo","seg","roadname","target","toLocaleString","NPMRDSLayer","attribution","units","latlng","activeStation","qaLevel","allMeasures","risAttributes","tmcAttributes","currentData","setActiveStation","localStorage","JSON","getItem","geographies","setItem","stringify","removeItem","getBounds","isEmpty","right","bottom","bearing","pitch","duration","offset","tr","nw","getNorthWest","se","getSouthEast","sub","scaleX","scaleY","unproject","add","scaleZoom","maxZoom","easeTo","geoids","states","geo","flatten","s","geoLevels","geoname","geolevel","bounding_box","zoomToGeography","saveToLocalStorage","d3scale","requests","filtered","getCache","chunk","shpDownload","polyline","val","collection","routes","MAPBOX_TOKEN","rtp_project_data","LegendComp","backgroundColor","LayersTab","Download","Attribution","activelayers","routingConfig","AddLayersComp","ChartPage","RenderTable","pageSize","columns","align","initialPageSize","striped","tables","npmrds","setGeography","setYear","setMonth","setHour","setDow","setVehicles","setPageSize","speedFrom","setSpeedFrom","speedTo","setSpeedTo","getterSetters","fetchGeo","allGeo","d1","find","s1","accHours","fI","TablePage","CurrTable","layerVal","MetaDataPage","Routes","Catalog","Views","AdminLanding","Auth","Table","Chart","Metadata","TestMap","NoMatch","App","basename","route","menus","r","mapDispatchToProps","createBrowserHistory","connect","reducer","combineReducers","Reducers","messages","createStore","applyMiddleware","thunk","$compositions","Compositions","transparent","contentBg","accentColor","accentBg","borderColor","textColor","highlightColor","white","dark","gray","bright","sizes","compact","wrapper","sideItem","topItem","full","mini","micro","TDS_THEME_BASE","sidenavWrapper","menuIconSide","navitemSide","navitemSideActive","topnavWrapper","topnavContent","topnavMenu","menuIconTop","navitemTop","topmenuRightNavContainer","navitemTopActive","text","textContrast","border","bgInfo","textSuccess","bgSuccess","borderSuccess","textDanger","bgDanger","borderDanger","textWarning","bgWarning","borderWarning","textLight","menuIcon","topMenuBorder","headerShadow","menuBgHover","menuBgActive","menuBgActiveHover","menuTextActiveHover","sidebarBorder","headerBg","headerBgHover","inputBg","inputBorder","inputBgDisabled","inputBorderDisabled","inputBgFocus","inputBorderFocus","textBase","textSmall","textLarge","paddingBase","paddingSmall","paddingLarge","accent3","accent4","highlight1","highlight2","highlight3","highlight4","contentWidth","contentPadding","sidebarW","tableInfoBar","tableRow","tableRowStriped","tableCell","tableHeader","TDS_THEME","composeTheme","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","addComponents","AmsComponents","addWrappers","AmsWrappers","AuthEnabledApp","enableAuth","AUTH_HOST","PROJECT_NAME","CLIENT_HOST","ReactDOM","StrictMode","store","falcorGraph","getElementById"],"mappings":"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","file":"static/js/main.0aff8dee.chunk.js","sourcesContent":["module.exports.geometries = {\n    NULL: 0,\n    POINT: 1,\n    POLYLINE: 3,\n    POLYGON: 5,\n    MULTIPOINT: 8,\n    POINTZ: 11,\n    POLYLINEZ: 13,\n    POLYGONZ: 15,\n    MULTIPOINTZ: 18,\n    POINTM: 21,\n    POLYLINEM: 23,\n    POLYGONM: 25,\n    MULTIPOINTM: 28,\n    MULTIPATCH: 31,\n};\n","module.exports.enlarge = function enlargeExtent(extent, pt) {\n    if (pt[0] < extent.xmin) extent.xmin = pt[0];\n    if (pt[0] > extent.xmax) extent.xmax = pt[0];\n    if (pt[1] < extent.ymin) extent.ymin = pt[1];\n    if (pt[1] > extent.ymax) extent.ymax = pt[1];\n    return extent;\n};\n\nmodule.exports.enlargeExtent = function enlargeExtent(extent, ext) {\n    if (ext.xmax > extent.xmax) extent.xmax = ext.xmax;\n    if (ext.xmin < extent.xmin) extent.xmin = ext.xmin;\n    if (ext.ymax > extent.ymax) extent.ymax = ext.ymax;\n    if (ext.ymin < extent.ymin) extent.ymin = ext.ymin;\n    return extent;\n};\n\nmodule.exports.blank = function() {\n    return {\n        xmin: Number.MAX_VALUE,\n        ymin: Number.MAX_VALUE,\n        xmax: -Number.MAX_VALUE,\n        ymax: -Number.MAX_VALUE\n    };\n};\n","var write = require('./write'),\n    geojson = require('./geojson'),\n    prj = require('./prj'),\n    JSZip = require('jszip');\n\nmodule.exports = function(gj, options, aliasString, tmcMetaString) {\n    var zip = new JSZip(),\n        layers = zip.folder(options && options.folder ? options.folder : 'layers');\n\n    [geojson.point(gj), geojson.line(gj), geojson.multiline(gj), geojson.polygon(gj)]\n        .forEach(function(l) {\n        if (l.geometries.length && l.geometries[0].length) {\n            // console.log('l.geo',l.geometries)\n            write(\n                // field definitions\n                l.properties,\n                // geometry type\n                l.type,\n                // geometries\n                l.geometries[0].map(d => [d]),\n                function(err, files) {\n                    var fileName = options && options.types[l.type.toLowerCase()] ? options.types[l.type.toLowerCase()] : l.type;\n                    layers.file(fileName + '.shp', files.shp.buffer, { binary: true });\n                    layers.file(fileName + '.shx', files.shx.buffer, { binary: true });\n                    layers.file(fileName + '.dbf', files.dbf.buffer, { binary: true });\n                    layers.file(fileName + '.prj', prj);\n                });\n        }\n    });\n    if (aliasString) {\n      const fileAliasName = options && options.file ? options.file + '_alias_meta' : 'alias_meta';\n      layers.file(fileAliasName + '.txt', aliasString);\n    }\n    if (tmcMetaString) {\n      const fileTmcMetaName = options && options.file ? options.file + '_tmc_meta' : 'tmc_meta';\n      layers.file(fileTmcMetaName + '.txt', tmcMetaString);\n    }\n\n    return zip.generateAsync({\n        type: process.browser === undefined ? 'nodebuffer' : 'blob',\n        compression: 'STORE'\n    });\n};\n","var types = require('./types'),\n    dbf = require('dbf'),\n    prj = require('./prj'),\n    ext = require('./extent'),\n    getFields = require('./fields'),\n    assert = require('assert'),\n    pointWriter = require('./points'),\n    polyWriter = require('./poly');\n\nvar writers = {\n    1: pointWriter,\n    5: polyWriter,\n    3: polyWriter\n};\n\nvar recordHeaderLength = 8;\n\nmodule.exports = write;\n\n// Low-level writing interface\nfunction write(rows, geometry_type, geometries, callback) {\n\n    var TYPE = types.geometries[geometry_type],\n        writer = writers[TYPE],\n        parts = writer.parts(geometries, TYPE),\n        shpLength = 100 + (parts - geometries.length) * 4 + writer.shpLength(geometries),\n        shxLength = 100 + writer.shxLength(geometries),\n        shpBuffer = new ArrayBuffer(shpLength),\n        shpView = new DataView(shpBuffer),\n        shxBuffer = new ArrayBuffer(shxLength),\n        shxView = new DataView(shxBuffer),\n        extent = writer.extent(geometries);\n\n    writeHeader(shpView, TYPE);\n    writeHeader(shxView, TYPE);\n    writeExtent(extent, shpView);\n    writeExtent(extent, shxView);\n\n    writer.write(geometries, extent,\n        new DataView(shpBuffer, 100),\n        new DataView(shxBuffer, 100),\n        TYPE);\n\n    shpView.setInt32(24, shpLength / 2);\n    shxView.setInt32(24, (50 + geometries.length * 4));\n\n    var dbfBuf = dbf.structure(rows);\n\n    callback(null, {\n        shp: shpView,\n        shx: shxView,\n        dbf: dbfBuf,\n        prj: prj\n    });\n}\n\nfunction writeHeader(view, TYPE) {\n    view.setInt32(0, 9994);\n    view.setInt32(28, 1000, true);\n    view.setInt32(32, TYPE, true);\n}\n\nfunction writeExtent(extent, view) {\n    view.setFloat64(36, extent.xmin, true);\n    view.setFloat64(44, extent.ymin, true);\n    view.setFloat64(52, extent.xmax, true);\n    view.setFloat64(60, extent.ymax, true);\n}\n","module.exports = 'GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137,298.257223563]],PRIMEM[\"Greenwich\",0],UNIT[\"Degree\",0.017453292519943295]]';\n","module.exports.download = require('./src/download')\nmodule.exports.write = require('./src/write')\nmodule.exports.zip = require('./src/zip')\n","var zip = require('./zip');\nvar saveAs = require(\"file-saver\").saveAs;\n\nmodule.exports = function(gj, options, aliasString, tmcMetaString) {\n    zip(gj, options, aliasString, tmcMetaString).then(function(blob) { saveAs(blob, options.file + '.zip'); });\n};\n","var types = require('./types').jstypes;\n\nmodule.exports.geojson = geojson;\nmodule.exports.obj = obj;\n\nfunction geojson(features) {\n    var fields = {};\n    features.forEach(collect);\n    function collect(f) { inherit(fields, f.properties); }\n    return obj(fields);\n}\n\nfunction inherit(a, b) {\n    for (var i in b) { a[i] = b[i]; }\n    return a;\n}\n\nfunction obj(_) {\n    var fields = {}, o = [];\n    for (var p in _) fields[p] = typeof _[p];\n    for (var n in fields) {\n        o.push({\n            name: n,\n            type: types[fields[n]]\n        });\n    }\n    return o;\n}\n","var ext = require('./extent');\n\nmodule.exports.write = function writePoints(coordinates, extent, shpView, shxView) {\n\n    var contentLength = 28, // 8 header, 20 content\n        fileLength = 100,\n        shpI = 0,\n        shxI = 0;\n\n    coordinates.forEach(function writePoint(coords, i) {\n        // HEADER\n        // 4 record number\n        // 4 content length in 16-bit words (20/2)\n        shpView.setInt32(shpI, i);\n        shpView.setInt32(shpI + 4, 10);\n\n        // record\n        // (8 + 8) + 4 = 20 content length\n        shpView.setInt32(shpI + 8, 1, true); // POINT=1\n        shpView.setFloat64(shpI + 12, coords[0], true); // X\n        shpView.setFloat64(shpI + 20, coords[1], true); // Y\n\n        // index\n        shxView.setInt32(shxI, fileLength / 2); // length in 16-bit words\n        shxView.setInt32(shxI + 4, 10);\n\n        shxI += 8;\n        shpI += contentLength;\n        fileLength += contentLength;\n    });\n};\n\nmodule.exports.extent = function(coordinates) {\n    return coordinates.reduce(function(extent, coords) {\n        return ext.enlarge(extent, coords);\n    }, ext.blank());\n};\n\nmodule.exports.parts = function parts(geometries, TYPE) {\n    return geometries.length;\n};\n\nmodule.exports.shxLength = function(coordinates) {\n    return coordinates.length * 8;\n};\n\nmodule.exports.shpLength = function(coordinates) {\n    return coordinates.length * 28;\n};\n","var ext = require('./extent'),\n    types = require('./types');\n\nmodule.exports.write = function writePoints(geometries, extent, shpView, shxView, TYPE) {\n\n    var shpI = 0,\n        shxI = 0,\n        shxOffset = 100;\n\n    geometries.forEach(writePolyLine);\n\n    function writePolyLine(coordinates, i) {\n\n        var flattened = justCoords(coordinates),\n            noParts = parts([coordinates], TYPE),\n            contentLength = (flattened.length * 16) + 48 + (noParts - 1) * 4;\n\n        var featureExtent = flattened.reduce(function(extent, c) {\n            return ext.enlarge(extent, c);\n        }, ext.blank());\n\n        // INDEX\n        shxView.setInt32(shxI, shxOffset / 2); // offset\n        shxView.setInt32(shxI + 4, contentLength / 2); // offset length\n\n        shxI += 8;\n        shxOffset += contentLength + 8;\n\n        shpView.setInt32(shpI, i + 1); // record number\n        shpView.setInt32(shpI + 4, contentLength / 2); // length\n        shpView.setInt32(shpI + 8, TYPE, true); // POLYLINE=3\n        shpView.setFloat64(shpI + 12, featureExtent.xmin, true); // EXTENT\n        shpView.setFloat64(shpI + 20, featureExtent.ymin, true);\n        shpView.setFloat64(shpI + 28, featureExtent.xmax, true);\n        shpView.setFloat64(shpI + 36, featureExtent.ymax, true);\n        shpView.setInt32(shpI + 44, noParts, true);\n        shpView.setInt32(shpI + 48, flattened.length, true); // POINTS\n        shpView.setInt32(shpI + 52, 0, true); // The first part - index zero\n\n        var onlyParts = coordinates.reduce(function (arr, coords) {\n            if (Array.isArray(coords[0][0])) {\n                arr = arr.concat(coords);\n            } else {\n                arr.push(coords);\n            }\n            return arr;\n        }, []);\n        for (var p = 1; p < noParts; p++) {\n            shpView.setInt32( // set part index\n                shpI + 52 + (p * 4),\n                onlyParts.reduce(function (a, b, idx) {\n                    return idx < p ? a + b.length : a;\n                }, 0),\n                true\n            );\n        }\n\n        flattened.forEach(function writeLine(coords, i) {\n            shpView.setFloat64(shpI + 56 + (i * 16) + (noParts - 1) * 4, coords[0], true); // X\n            shpView.setFloat64(shpI + 56 + (i * 16) + (noParts - 1) * 4 + 8, coords[1], true); // Y\n        });\n\n        shpI += contentLength + 8;\n    }\n};\n\nmodule.exports.shpLength = function(geometries) {\n    return (geometries.length * 56) +\n        // points\n        (justCoords(geometries).length * 16);\n};\n\nmodule.exports.shxLength = function(geometries) {\n    return geometries.length * 8;\n};\n\nmodule.exports.extent = function(coordinates) {\n    return justCoords(coordinates).reduce(function(extent, c) {\n        return ext.enlarge(extent, c);\n    }, ext.blank());\n};\n\nfunction parts(geometries, TYPE) {\n    var no = 1;\n    if (TYPE === types.geometries.POLYGON || TYPE === types.geometries.POLYLINE)  {\n        no = geometries.reduce(function (no, coords) {\n            no += coords.length;\n            if (Array.isArray(coords[0][0][0])) { // multi\n                no += coords.reduce(function (no, rings) {\n                    return no + rings.length - 1; // minus outer\n                }, 0);\n            }\n            return no;\n        }, 0);\n    }\n    return no;\n}\n\nmodule.exports.parts = parts;\n\nfunction totalPoints(geometries) {\n    var sum = 0;\n    geometries.forEach(function(g) { sum += g.length; });\n    return sum;\n}\n\nfunction justCoords(coords, l) {\n    if (l === undefined) l = [];\n    if (typeof coords[0][0] == 'object') {\n        return coords.reduce(function(memo, c) {\n            return memo.concat(justCoords(c));\n        }, l);\n    } else {\n        return coords;\n    }\n}\n\n","module.exports.point = justType('Point', 'POINT');\nmodule.exports.multiline = justType('MultiLineString', 'POLYLINE');\nmodule.exports.line = justType('LineString', 'POLYLINE');\nmodule.exports.polygon = justType('Polygon', 'POLYGON');\n\nfunction justType(type, TYPE) {\n    return function(gj) {\n        var oftype = gj.features.filter(isType(type));\n        return {\n            geometries: (TYPE === 'POLYGON' || TYPE === 'POLYLINE') ? [oftype.map(justCoords)] : oftype.map(justCoords),\n            properties: oftype.map(justProps),\n            type: TYPE\n        };\n    };\n}\n\nfunction justCoords(t) {\n    if (t.geometry.coordinates[0] !== undefined &&\n        t.geometry.coordinates[0][0] !== undefined &&\n        t.geometry.coordinates[0][0][0] !== undefined) {\n        return t.geometry.coordinates[0];\n    } else {\n        return t.geometry.coordinates;\n    }\n}\n\nfunction justProps(t) {\n    return t.properties;\n}\n\nfunction isType(t) {\n    return function(f) { return f.geometry.type === t; };\n}\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nconst ScrollToTop = () => {\n  const { pathname } = useLocation();\n  useEffect((arg) => {\n    window.scrollTo(0, 0);\n  }, [pathname])\n  return null;\n}\n\nexport default ScrollToTop;\n","import React, {Fragment} from 'react'\nimport {DotsVerticalIcon,StarIcon} from \"@heroicons/react/solid\";\nimport {Menu,Transition} from \"@headlessui/react\";\n\nfunction classNames(...classes) {\n    return classes.filter(Boolean).join(' ')\n}\n\n\nconst MenuComponent = () =>{\n    return (\n        <div className=\"flex-shrink-0 self-center flex\">\n            <Menu as=\"div\" className=\"relative z-30 inline-block text-left\">\n                {({ open }) => (\n                    <>\n                        <div>\n                            <Menu.Button className=\"-m-2 p-2 rounded-full flex items-center text-gray-400 hover:text-gray-600\">\n                                <span className=\"sr-only\">Open options</span>\n                                <DotsVerticalIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\n                            </Menu.Button>\n                        </div>\n\n                        <Transition\n                            show={open}\n                            as={Fragment}\n                            enter=\"transition ease-out duration-100\"\n                            enterFrom=\"transform opacity-0 scale-95\"\n                            enterTo=\"transform opacity-100 scale-100\"\n                            leave=\"transition ease-in duration-75\"\n                            leaveFrom=\"transform opacity-100 scale-100\"\n                            leaveTo=\"transform opacity-0 scale-95\"\n                        >\n                            <Menu.Items\n                                static\n                                className=\"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none\"\n                            >\n                                <div className=\"py-1\">\n                                    <Menu.Item>\n                                        {({ active }) => (\n                                            <div\n                                                \n                                                className={classNames(\n                                                    active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',\n                                                    'flex px-4 py-2 text-sm'\n                                                )}\n                                            >\n                                                <StarIcon className=\"mr-3 h-5 w-5 text-gray-400\" aria-hidden=\"true\" />\n                                                <span>Add to favorites</span>\n                                            </div>\n                                        )}\n                                    </Menu.Item>\n                                    {/*<Menu.Item>*/}\n                                    {/*    {({ active }) => (*/}\n                                    {/*        <a*/}\n                                    {/*            href=\"#\"*/}\n                                    {/*            className={classNames(*/}\n                                    {/*                active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',*/}\n                                    {/*                'flex px-4 py-2 text-sm'*/}\n                                    {/*            )}*/}\n                                    {/*        >*/}\n                                    {/*            <CodeIcon className=\"mr-3 h-5 w-5 text-gray-400\" aria-hidden=\"true\" />*/}\n                                    {/*            <span>Embed</span>*/}\n                                    {/*        </a>*/}\n                                    {/*    )}*/}\n                                    {/*</Menu.Item>*/}\n                                    {/*<Menu.Item>*/}\n                                    {/*    {({ active }) => (*/}\n                                    {/*        <a*/}\n                                    {/*            href=\"#\"*/}\n                                    {/*            className={classNames(*/}\n                                    {/*                active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',*/}\n                                    {/*                'flex px-4 py-2 text-sm'*/}\n                                    {/*            )}*/}\n                                    {/*        >*/}\n                                    {/*            <FlagIcon className=\"mr-3 h-5 w-5 text-gray-400\" aria-hidden=\"true\" />*/}\n                                    {/*            <span>Report content</span>*/}\n                                    {/*        </a>*/}\n                                    {/*    )}*/}\n                                    {/*</Menu.Item>*/}\n                                </div>\n                            </Menu.Items>\n                        </Transition>\n                    </>\n                )}\n            </Menu>\n        </div>\n    )\n}\n\nexport default MenuComponent\n","import React, {useEffect} from 'react';\nimport {useFalcor} from '@availabs/avl-components'\nimport MenuComponent from \"../card-menu/Menu\";\nimport get from 'lodash.get'\nimport {Link} from \"react-router-dom\";\n\nconst SOURCES_ATTRIBUTES = [\n    'id',\n    'name',\n    'description',\n    'current_version',\n    'data_starts_at',\n    'data_ends_at',\n    'origin_url',\n    'user_id',\n    'rows_updated_at',\n    'rows_updated_by_id',\n    'topic_area',\n    'source_type'\n]\n\nconst DatasourceList = () => {\n    const {falcor, falcorCache} = useFalcor();\n\n    useEffect(() => {\n        async function fetchData() {\n            let length = await falcor.get([\"tig\", \"datasources\", \"length\"])\n            length = get(length, ['json', 'tig', 'datasources', 'length'], 0)\n\n            if (length) {\n                return await falcor.get([\"tig\", \"datasources\", \"byIndex\", [{\n                    from: 0,\n                    to: length - 1\n                }], SOURCES_ATTRIBUTES])\n            }\n        }\n\n        return fetchData();\n    }, [])\n\n    const sourcesList = React.useMemo(() => {\n        console.log('Data source list process data')\n        let sourcesById = get(falcorCache, ['tig', 'datasources', 'byId'], null)\n        let data = []\n        if (sourcesById) {\n            data = Object.keys(sourcesById).map(id => sourcesById[id])\n        }\n        console.log('sourcesList', data)\n        return data\n\n    },[falcorCache])\n\n\n    return (\n        <div className='border-t-2 border-teal-600'>\n            <div className='bg-tigGreen-100 text-xl w-28 py-3 pl-4 text-white mb-2'> Catalog </div>\n            {sourcesList.length > 0 ?\n                <ul className=\"\">\n                    {sourcesList.map((item,i) => (\n                        <li key={i} className=\"border-t py-13px\">\n                            <div className=\"flex space-x-3\">\n                                <div className=\"min-w-5xl flex-1\">\n                                    <p className=\"text-sm font-bold text-gray-900 mt-10px\">\n                                        <Link to={{\n                                            pathname: `/datasource/${get(item,['id','value'],'')}`,\n                                            state: {name: get(item,['name','value'],''), description: get(item,['description','value'],'')}\n                                        }} className=\"hover:underline py-6px px-12px border-1\">\n                                            {get(item,['name','value'],'')}\n                                        </Link>\n                                    </p>\n                                </div>\n                                <MenuComponent/>\n                            </div>\n                           \n                        </li>\n                    ))}\n                </ul>\n                :\n                <div>Loading ... </div>\n            }\n        </div>\n\n    )\n}\n\nexport default DatasourceList\n","import React, {useEffect} from 'react';\nimport {useFalcor} from '@availabs/avl-components'\nimport MenuComponent from \"../card-menu/Menu\";\nimport get from 'lodash.get'\nimport {Link} from \"react-router-dom\";\n\nconst SOURCES_ATTRIBUTES = [\n    'id',\n    'name',\n    'description',\n    'current_version',\n    'data_starts_at',\n    'data_ends_at',\n    'origin_url',\n    'user_id',\n    'rows_updated_at',\n    'rows_updated_by_id',\n    'topic_area',\n    'source_type'\n]\n\nconst DatasourceList = () => {\n    const {falcor, falcorCache} = useFalcor();\n\n    useEffect(() => {\n        async function fetchData() {\n            let length = await falcor.get([\"tig\", \"datasources\", \"length\"])\n            length = get(length, ['json', 'tig', 'datasources', 'length'], 0)\n\n            if (length) {\n                return await falcor.get([\"tig\", \"datasources\", \"byIndex\", [{\n                    from: 0,\n                    to: length - 1\n                }], SOURCES_ATTRIBUTES])\n\n            }\n        }\n\n        return fetchData();\n    }, [falcor])\n\n    const processData = () => {\n        return ['Activity 1', 'Activity 2'].map((d, dI) => ({id: dI, value: d, name:d, link: '#'}))\n\n    }\n\n\n    return (\n        <div className='border-t-2 border-teal-600'>\n            <div className='bg-tigGreen-100 text-l w-36 py-4 px-4 text-white mb-2 '> Recent Activity </div>\n            {processData() ?\n                <ul className=\"\">\n                    {processData().map((item) => (\n                        <li key={item.id} className=\"border-t py-13px\">\n                            <div className=\"flex space-x-3\">\n                                <div className=\"min-w-5xl flex-1\">\n                                    <p className=\"text-sm text-gray-700\">\n                                        <Link to={{\n                                            pathname: `/datasource/${item.value}`,\n                                            state: {name: item.name, description: item.description}\n                                        }} className=\"hover:underline py-6px px-12px border-1\">\n                                            {item.name}\n                                        </Link>\n                                    </p>\n                                </div>\n                                <MenuComponent/>\n                            </div>\n                        </li>\n                    ))}\n                    <li className={'float-right text-sm text-gray-700'}>\n                        <Link to={{\n                            pathname: '#'\n                        }} className=\"hover:underline py-6px px-12px border-1\">Show More</Link>\n                    </li>\n                </ul>\n                :\n                <div>Loading ... </div>\n            }\n        </div>\n\n    )\n}\n\nexport default DatasourceList\n","import React from \"react\"\nimport { withAuth, TopNav } from '@availabs/avl-components'\nimport { Link } from 'react-router-dom'\n\n\nconst TigNav = withAuth(() => {\n    \n\n\n    return (\n        <div className='w-full'>\n            <TopNav \n                leftMenu={(\n                    <a href='/' className={' hover:bg-tigGray-50 h-12'}>\n                        <img alt='NYMTC Logo' className={'bg-tigGray-200 hover:bg-tigGray-50'} style={{height:50}} src='/images/nymtc_logo.svg'/>\n                    </a>)\n                }\n                rightMenu={\n                    \n                    <div className='flex h-12 flex-col md:flex-row'>\n                        <div className='p-3 h-full bg-tigGray-200 my-2 md:my-0 md:mr-2 text-sm font-bold'>Welcome!</div>\n                        <div className='p-3 h-full hover:bg-tigGray-50 hover:text-yellow-500 hover:cursor-pointer bg-tigGray-200 my-2 md:my-0 md:mr-2 text-sm font-light'>Sign up</div>\n                        <div className='p-3 h-full hover:bg-tigGray-50 hover:text-yellow-500 hover:cursor-pointer bg-tigGray-200 text-sm font-light'>Login</div>\n                    </div>\n                    \n                }\n            />\n        </div>\n    )\n})\n\nexport default TigNav","import React, {Fragment} from \"react\"\nimport { Link, useHistory } from 'react-router-dom'\nimport {useParams, useLocation} from 'react-router-dom'\nimport { Listbox, Transition } from '@headlessui/react'\nimport { useFalcor } from '@availabs/avl-components'\nimport get from 'lodash.get' \n\nconst TigBreadcrumbs = ({children}) => {\n    let {viewId,dataSourceId} = useParams()\n    let {falcor, falcorCache} = useFalcor()\n    let location = useLocation()\n    const history = useHistory();\n\n    React.useEffect(() =>{\n        async function fetchData() {\n            let getLength = await falcor.get([\"tig\", \"datasources\", \"length\"])\n            let length = get(getLength, ['json', 'tig', 'datasources', 'length'], 0)\n\n            let getDatasources = await falcor\n                    .get([\"tig\", \"datasources\", \"byIndex\", [{from: 0, to: length - 1}], ['id','name']])\n            let dsdata = get(getDatasources, [\"json\",\"tig\", \"datasources\", \"byIndex\"], {})\n            let datasourcesIds = Object.keys(dsdata)\n                .map(k => get(dsdata, `${k}.id`, null))\n                .filter(d => d)\n\n            let getDsLengths  = await falcor.get([\"tig\",\"datasources\",\"views\",\"sourceId\",datasourcesIds,'length'])\n\n            let viewGet = datasourcesIds.map(datasourceId => {\n                let dsLength = +get(getDsLengths,[\"json\",\"tig\",\"datasources\",\"views\",\"sourceId\",datasourceId,'length'],1)\n                let output  = [\"tig\",\"datasources\",\"views\",\"sourceId\",datasourceId,\"byIndex\",[{from:0,to:(dsLength-1)}],['id','name', 'source_id']]\n                return output\n            })\n            return await falcor.get(...viewGet)    \n        }\n        return fetchData();\n    },[falcor,viewId])\n\n    let sources = React.useMemo(() => {\n        let ds = get(falcorCache,[\"tig\",\"datasources\",\"byId\"], {})\n        let dataSourceIds = Object.keys(get(falcorCache,[\"tig\",\"datasources\",\"views\",\"sourceId\"], {}))\n        let datasources = dataSourceIds.reduce((out, dsId) => {\n           out[dsId] = {\n                id: get(ds[dsId],['id','value'],''),\n                name: get(ds[dsId],['name','value'],'')\n            }\n            return out\n        },{})\n        let bySource = dataSourceIds.reduce((out, dsId) => {\n            let views = get(falcorCache, [\"tig\",\"datasources\",\"views\",\"sourceId\",dsId,\"byIndex\"], {})\n            out[dsId] = Object.keys(views).map(k => {\n                let view = get(falcorCache,views[k].value, null)\n                return {\n                    id: get(view,['id','value'],''),\n                    source_id: get(view,['source_id','value'],''),\n                    name: get(view,['name','value'],''),\n                }\n            }).filter(d => d)\n            return out\n        },{})\n        let byView = Object.keys(bySource).reduce((out,dsId) => {\n            bySource[dsId].forEach(view => {\n                out[view.id] = view \n            })\n            return out\n        },{})\n        return {\n            byView,bySource,datasources\n        }\n    },[falcorCache])\n    let selected = get(sources,['byView',viewId],{})\n    let views = get(sources,['bySource', selected.source_id], [])\n    let activeSource = get(sources, ['datasources',selected.source_id], {})\n    let actions = [\n        {\n            path: 'map',\n            name: 'Map'\n        },\n         {\n            path: 'table',\n            name: 'Table'\n        },\n        {\n            path: 'chart',\n            name: 'Chart'\n        },\n         {\n            path: 'metadata',\n            name: 'View Metadata'\n        }\n    ]\n    let activeAction = actions.filter(d => d.path === location.pathname.split('/').pop().toLowerCase()).pop()\n    \n\n    return (\n        <div className='w-full flex justify-between py-6 items-baseline z-10'>\n            <div className='flex items-stretch'>\n                \n                <a href='/' \n                    className='bg-tigGray-100 hover:bg-tigGray-50 hover:text-orange-300 hover:cursor-pointer py-1 px-3 text-sm text-gray-600'>\n                    Catalog\n                </a>\n                {viewId ?\n                <>\n                <div \n                className='ml-2 bg-tigGray-100 hover:bg-tigGray-50 hover:text-orange-300 hover:cursor-pointer text-sm text-gray-600' style={{background: '#bbd4cb'}}>\n                    <Listbox value={selected} onChange={(e) => {\n                        console.log('on change', )\n                        let url = `/views/${e.id}/${activeAction.path}`\n                        history.push(url)\n                    }}>\n                        <div className=\"relative\">\n                            <Listbox.Button className=\"py-1 px-3 relative w-full text-left cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm\">\n                                <span className=\" truncate\">{activeSource.name}</span>\n                                <span className='pl-2 fa fa-caret-down'/>\n                            </Listbox.Button>\n                            <Transition\n                                as={Fragment}\n                                leave=\"transition ease-in duration-100\"\n                                leaveFrom=\"opacity-100\"\n                                leaveTo=\"opacity-0\"\n                            >\n                                <Listbox.Options className=\"z-50 absolute py-1 mt-1 overflow-auto text-xs shadow-lg max-h-96 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm\" style={{background: '#bbd4cb'}}>\n                                  {views.map((view, personIdx) => (\n                                    <Listbox.Option\n                                      key={personIdx}\n                                      className={({ active }) =>\n                                        `${active ? 'text-amber-900 bg-white' : 'text-gray-900'}\n                                              cursor-default select-none relative `\n                                      }\n                                      value={view}\n                                    >\n                                      {({ selected, active }) => (\n                                        <>\n                                          <span\n                                            className={`${\n                                              selected ? 'font-medium' : 'font-thin'\n                                            } block px-6 truncate`}\n                                          >\n                                            {view.name}\n                                          </span>\n                                          {selected ? (\n                                            <span\n                                              className={`${\n                                                active ? 'text-amber-600' : 'text-amber-600'\n                                              }\n                                              absolute inset-y-0 left-0 flex items-center pl-3`}\n                                            >\n                                              {/*<CheckIcon className=\"w-5 h-5\" aria-hidden=\"true\" />*/}\n                                            </span>\n                                          ) : null}\n                                        </>\n                                      )}\n                                    </Listbox.Option>\n                                  ))}\n                                </Listbox.Options>\n                              </Transition>\n                        </div>\n                    </Listbox>\n                </div> \n                <div \n                className='ml-2 bg-tigGray-100 hover:bg-tigGray-50 hover:text-orange-300 hover:cursor-pointer text-sm text-gray-600' style={{background: '#bbd4cb'}}>\n                   <Listbox value={activeAction} onChange={(e) => {\n                        let url = `/views/${viewId}/${e.path}`\n                        console.log('url', url)\n                        history.push(url)\n                    }}>\n                        <div className=\"relative\">\n                            <Listbox.Button className=\"py-1 px-3 relative w-full text-left cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm\">\n                                <span className=\" truncate\">{activeAction.name}</span>\n                                <span className='pl-2 fa fa-caret-down'/>\n                            </Listbox.Button>\n                            <Transition\n                                as={Fragment}\n                                leave=\"transition ease-in duration-100\"\n                                leaveFrom=\"opacity-100\"\n                                leaveTo=\"opacity-0\"\n                            >\n                                <Listbox.Options className=\"z-50 absolute py-1 mt-1 overflow-auto text-xs shadow-lg max-h-96 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm\" style={{background: '#bbd4cb'}}>\n                                  {actions.map((view, personIdx) => (\n                                    <Listbox.Option\n                                      key={personIdx}\n                                      className={({ active }) =>\n                                        `${active ? 'text-amber-900 bg-white' : 'text-gray-900'}\n                                              cursor-default select-none relative `\n                                      }\n                                      value={view}\n                                    >\n                                      {({ selected, active }) => (\n                                        <>\n                                          <span\n                                            className={`${\n                                              selected ? 'font-medium' : 'font-thin'\n                                            } block px-6 truncate`}\n                                          >\n                                            {view.name}\n                                          </span>\n                                          {selected ? (\n                                            <span\n                                              className={`${\n                                                active ? 'text-amber-600' : 'text-amber-600'\n                                              }\n                                              absolute inset-y-0 left-0 flex items-center pl-3`}\n                                            >\n                                              {/*<CheckIcon className=\"w-5 h-5\" aria-hidden=\"true\" />*/}\n                                            </span>\n                                          ) : null}\n                                        </>\n                                      )}\n                                    </Listbox.Option>\n                                  ))}\n                                </Listbox.Options>\n                              </Transition>\n                        </div>\n                    </Listbox>\n                </div>\n                </>\n                : ''\n                }\n\n            </div>\n            <a href='/Gatewayhelp.htm'>\n                <span className='fa fa-question text-sm text-gray-600' />\n            </a>\n        </div>\n    )\n}\n\nexport default TigBreadcrumbs","import React from \"react\"\nimport { withAuth } from '@availabs/avl-components'\nimport TigNav from './TigNav'\nimport TigBreadcrumbs from './TigBreadcrumbs'\n\nconst TigLayout = withAuth(({children}) => {\n    return (\n        <div className='w-full max-w-6xl mx-auto min-h-screen flex flex-col z-10'>\n            <div className='z-10'>\n                <TigNav />\n            </div>\n            <TigBreadcrumbs />\n            <div className='flex-1'>\n                {children}\n            </div>\n        </div>\n    )\n})\n\nexport default TigLayout","import React from 'react';\nimport {Redirect} from 'react-router-dom'\nimport {withAuth} from '@availabs/avl-components'\nimport DataSourceList from \"./tigDataSources/DatasourceList\";\nimport RecentActivity from \"./tigDataSources/RecentActivity\";\n\n\nimport TigLayout from 'components/tig/TigLayout'\n\nconst Landing = () =>\n  <TigLayout>\n    <div className='flex'>\n      <div className='flex-1'>\n        <DataSourceList />\n      </div>\n      <div className='flex-1 pl-10'>\n        <RecentActivity />\n      </div>\n    </div>  \n  </TigLayout>\n\n\nconst AuthedLanding = withAuth(({ title, shadowed = true, user, children }) => {\n  if(user && user.authLevel > 0) {\n    return <Redirect to=\"/admin\" />\n  }\n  return <Landing />\n})\n\nconst config = {\n  path: \"/\",\n  exact: true,\n  component: AuthedLanding,\n  layout: 'Simple',\n}\n\n\nexport default config;\n\n","import React, {useEffect, useState, useMemo} from 'react';\nimport {useParams, useLocation} from 'react-router-dom'\nimport {useFalcor} from '@availabs/avl-components'\nimport get from \"lodash.get\";\nimport MenuComponent from \"../card-menu/Menu\";\nimport {\n    MapIcon,\n    TableIcon,\n    ChartBarIcon,\n    FolderIcon,\n    MenuIcon,\n} from '@heroicons/react/outline'\n\n\nimport TigLayout from 'components/tig/TigLayout'\n\nconst VIEWS_ATTRIBUTES = [\n    'id',\n    'name',\n    'description',\n    'source_id',\n    'current_version',\n    'data_starts_at',\n    'data_ends_at',\n    'origin_url',\n    'user_id',\n    'rows_updated_at',\n    'rows_updated_by_id',\n    'topic_area',\n    'download_count',\n    'last_displayed_at',\n    'view_count',\n    'created_at',\n    'updated_at',\n    'columns',\n    'data_model',\n    'statistic_id',\n    'column_types',\n    'data_levels',\n    'value_name',\n    'column_labels',\n    'row_name',\n    'column_name',\n    'spatial_level',\n    'data_hierarchy',\n    'geometry_base_year',\n    'deleted_at',\n    'download_instructions',\n    'value_columns',\n    'short_description'\n]\n\nfunction classNames(...classes) {\n    return classes.filter(Boolean).join(' ')\n}\n\nconst Views = () => {\n    const {dataSourceId} = useParams()\n    const {falcor,falcorCache} = useFalcor()\n    const [activeId,setActiveId] = useState(null)\n\n    const location = useLocation()\n    //const [sidebarOpen, setSidebarOpen] = useState(false)\n\n    const sortIds = ((a,b) =>{\n        return a.id < b.id ? 1 : -1\n    })\n\n    useEffect(() =>{\n        async function fetchData() {\n\n            let length = await falcor.get([\"tig\",\"datasources\",\"views\",\"sourceId\",[dataSourceId],'length'])\n\n            length = get(length,['json','tig','datasources','views',\"sourceId\",dataSourceId,'length'],null)\n            if(length){\n                const response = await falcor.get([\"tig\",\"datasources\",\"views\",\"sourceId\",[dataSourceId],\"byIndex\",[{from:0,to:length-1}],VIEWS_ATTRIBUTES])\n                const graph = get(response,['json','tig','datasources','views',\"sourceId\",dataSourceId,\"byIndex\"],null)\n                let data = []\n                if(graph){\n                    data = Object.keys(graph).filter(d => d !== '$__path').map(item => graph[item]).sort(sortIds)\n                    console.log('data',data)\n                    setActiveId(data[0].id)\n                }\n            }\n        }\n\n        return fetchData();\n    },[falcor,dataSourceId])\n\n    const dataSource = useMemo(() => {\n        let cache = get(falcorCache,['tig','datasources','views',\"sourceId\",dataSourceId,\"byId\"],null)\n        return cache ? Object.keys(cache).map(item => cache[item]).sort(sortIds) : false\n    },[falcorCache,dataSourceId])\n\n    const onClickView = (item) =>{\n        setActiveId(item.id.value)\n    }\n\n    const navigation = [\n        { name: 'Map', href: `/v2/views/${activeId}/map`, icon: MapIcon, current: true, count: '5' },\n        { name: 'Table', href: `/v2/views/${activeId}/table`, icon: TableIcon, current: false },\n        { name: 'View Meta data', href: '#', icon: FolderIcon, current: false, count: '19' },\n        { name: 'Charts', href: '#', icon: ChartBarIcon, current: false },\n    ]\n\n    return (\n        \n        <TigLayout>\n            <div className='border-t-2 border-teal-600'>\n            <div className='bg-teal-600 text-2xl w-28 p-4 text-white mb-2'> Catalog </div>\n                <div className=\"flex\">\n               \n                <div className=\"flex flex-col flex-1\">\n                    <div className=\"md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3\">\n                        <button\n                            className=\"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500\"\n                            /*onClick={() => setSidebarOpen(true)}*/\n                        >\n                            <span className=\"sr-only\">Open sidebar</span>\n                            <MenuIcon className=\"h-6 w-6\" aria-hidden=\"true\" />\n                        </button>\n                    </div>\n                    <main className=\"flex-1 relative z-0\">\n                        <div className=\"px-6\">\n                            <div className=\"border-b py-4\">\n                                {/*<h1 className=\"text-2xl tracking-tight font-extrabold text-gray-900 sm:text-2xl md:text-6xl\">\n                                    <span className=\"block text-indigo-600 xl:inline\">{location.state.name || ''}</span>\n                                </h1>*/}\n                                <p className=\"mt-3 text-base text-gray-700\">\n                                    {location.state.description || ''}\n                                </p>\n                            </div>\n                            <div className=\"px-6 \">\n                                \n                                    {dataSource ?\n                                        <ul className=\"pt-4\">\n                                            {dataSource.map((item) => (\n                                                <li key={item.id.value}\n                                                    className={\n                                                        activeId === item.id.value ? '  px-6 py-2 sm:px-6 ring-1 ring-offset-2 ring-indigo-500' :\n                                                            ' px-4 py-2 sm:px-6'\n                                                    }\n\n                                                >\n                                                    <div className=\"flex\">\n                                                        <div className=\"flex-1\">\n                                                            \n                                                                <div className=\"hover:underline cursor-pointer\" onClick={() => onClickView(item)}>\n                                                                    <p className=\"text-lg font-medium text-gray-900\">\n                                                                    {item.name.value}\n                                                                     </p>\n                                                                </div>\n                                                           \n                                                        </div>\n                                                        <MenuComponent/>\n                                                    </div>\n                                                    {/*<div className=\"opacity-50 py-4\">\n                                                        <p>{item.description.value || 'No Description'}</p>\n                                                    </div>*/}\n                                                </li>\n                                            ))}\n                                        </ul>\n                                        :<div>Loading ...</div>}\n                            </div>\n                        </div>\n                    </main>\n                </div>\n                 <div className=\" hidden md:flex md:flex-shrink-0\">\n                    <div className=\"flex flex-col w-64\">\n                        {/* Sidebar component, swap this element with another sidebar if you like */}\n                        <div className=\"flex flex-col h-0 flex-1 border-l border-gray-200 bg-white\">\n                            <div className=\"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto\">\n                                <nav className=\"mt-5 flex-1 px-2 bg-white space-y-1\">\n                                    {navigation.map((item) => (\n                                        <a\n                                            key={item.name}\n                                            href={item.href}\n                                            className={classNames(\n                                                item.current ? 'bg-gray-100 text-gray-900' : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900',\n                                                'group flex items-center px-2 py-2 text-sm font-medium rounded-md'\n                                            )}\n                                        >\n                                            <item.icon\n                                                className={classNames(\n                                                    item.current ? 'text-gray-500' : 'text-gray-400 group-hover:text-gray-500',\n                                                    'mr-3 flex-shrink-0 h-6 w-6'\n                                                )}\n                                                aria-hidden=\"true\"\n                                            />\n                                            {item.name}\n                                        </a>\n                                    ))}\n                                </nav>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            </div>\n        </TigLayout>\n    )\n}\n\n\n\nconst config = {\n    path: \"/datasource/:dataSourceId\",\n    exact: true,\n    mainNav: true,\n    name: 'Views Data Source',\n    component: Views,\n    layout: 'Simple',\n    layoutSettings: {\n        fixed: true,\n        headerBar: true,\n        logo: \"AVAIL\",\n        navBar: 'top',\n        auth: true\n    }\n}\n\n\n\nexport default config;\n","import React from 'react';\n\nconst Admin = () =>\n  <div className='h-screen flex-1 flex flex-col text-white bg-gray-800'>\n      <div className=\"flex-1 flex items-center justify-center flex-col\">\n        <div className=\"text-6xl font-bold\">TDS</div>\n        <div className=\"text-xl\">Management</div>\n      </div>\n  </div>\n\nconst config = {\n  path: \"/subdir/admin\",\n  exact: true,\n  mainNav: true,\n  name: 'Home',\n  component: Admin,\n  layoutSettings: {\n    fixed: true,\n    headerBar: true,\n    logo: \"AVAIL\",\n    navBar: 'side'\n  }\n}\n\n\n\nexport default config;\n","import React from 'react';\nimport TigLayout from 'components/tig/TigLayout'\n\nconst NoMatch = () =>\n  <TigLayout>\n    <div className='h-screen -mt-24 flex-1 flex flex-col text-gray-900 bg-white'>\n        <div className=\"flex-1 flex items-center justify-center flex-col\">\n          <div className=\"text-6xl font-bold\">404</div>\n          <div className=\"text-xl\">Page not Found</div>\n          <div className=\"text-xl\">Oops, Something went missing...</div>\n        </div>\n    </div>\n  </TigLayout>\n\nconst config = {\n  mainNav: false,\n  component: NoMatch,\n  layout: \"Simple\",\n  layoutSettings: {\n    fixed: true,\n    headerBar: true\n  }\n}\n\nexport default config;\n","\n\nconst AuthConfig = {\n  type: \"ams-manager\",\n  props: {\n    showHeaders: false\n  },\n  wrappers: [\n    // \"ams-manager\",\n    \"ams-redux\",\n    \"ams-router\"\n  ],\n  children: [\n    { type: \"ams-login\" },\n    { type: \"ams-reset-password\" },\n    { type: \"ams-logout\",\n// @props.redirectTo\n// Optional prop. Defaults to \"/\".\n// Redirects user to URL after logging out.\n      // props: { redirectTo: \"/\" }\n    },\n\n    { type: \"ams-signup\",\n// @props.addToGroup\n// Optional prop. Defaults to false.\n// Adds user to group (must have auth level 0 in all projects) instead of creating a request that must be accepted by admin.\n      props: { addToGroup: \"TDS Public\" }\n    },\n    { type: \"ams-verify-request\" }, // This is only required when addToGroup prop is included with ams-signup\n    // { type: \"ams-verify-email\" }, // This is only required when addToGroup prop is not included with ams-signup\n\n    { type: \"ams-set-password\" },\n\n    { type: \"ams-profile\" },\n    { type: \"ams-accept-invite\" },\n\n    { type: \"ams-directory\" },\n\n    { type: \"ams-project-management\"\n// @props.authLevel\n// Optional prop. This prop can be applied to any AMS child.\n// If set, users must have equal or higher authLevel to view this page.\n// Defaults to 5 for \"ams-project-management.\"\n      // props: { authLevel: 5 }\n    }\n  ]\n}\n\nconst auth = {\n  path: \"/auth\",\n  mainNav: false,\n  // layout: 'Simple',\n  layoutSettings: {\n    fixed: true,\n    navBar: 'top',\n    headerBar: false\n  },\n  component: AuthConfig\n}\nexport default auth;\n","import React from \"react\"\n\nimport { useTheme } from \"@availabs/avl-components\"\n\nexport const SidebarContext = React.createContext({})\n\nexport const useSidebarContext = () => {\n  return React.useContext(SidebarContext);\n}\n\nconst InitialState = {\n  Comp: null,\n  top: 0,\n  compProps: {},\n  open: true,\n  transitioning: false\n}\nconst InitState = open => ({\n  ...InitialState,\n  open\n})\nconst Reducer = (state, action) => {\n  const { type, ...payload } = action;\n  switch (type) {\n    case \"update-state\":\n      return {\n        ...state,\n        ...payload\n      }\n    default:\n      return state;\n  }\n}\n\nconst Shift = {\n  value: 0.25,\n  unit: \"rem\"\n}\n\nconst Toggle = ({ togglePosition, position, doToggle, open, dir, theme, padding }) => {\n  switch (togglePosition) {\n    case \"middle\":\n      return (\n        <div className={ `\n            rounded z-10 py-1 absolute hover:${ theme.textInfo }\n            ${ theme.sidebarBg } cursor-pointer flex flex-col\n            hover:${ theme.menuBg } transition ${ position }-0\n          ` }\n          style={ {\n            transform: `translateY(-50%)`,\n            top: \"50%\"\n          } }\n          onClick={ doToggle }>\n\n          <div className=\"fa fa-caret-left text-2xl pl-1 pr-2\"\n            style={ {\n              transform: `scaleX(${ (open ? 1 : -1) * dir }`,\n              transition: \"transform 500ms\"\n            } }/>\n          <div className=\"fa fa-caret-left text-2xl pl-1 pr-2\"\n            style={ {\n              transform: `scaleX(${ (open ? 1 : -1) * dir }`,\n              transition: \"transform 500ms ease 250ms\"\n            } }/>\n          <div className=\"fa fa-caret-left text-2xl pl-1 pr-2\"\n            style={ {\n              transform: `scaleX(${ (open ? 1 : -1) * dir }`,\n              transition: \"transform 500ms ease 500ms\"\n            } }/>\n        </div>\n      )\n    default:\n      return (\n        <div onClick={ doToggle }\n          style={ {\n            transform: `translateX(${ open ? `-${ padding }px` : \"52px\" })`,\n            transition: \"all 500ms\"\n          } }\n          className={ `\n            ${ theme.sidebarBg } py-1 px-2\n            hover:${ theme.menuBg } hover:${ theme.textInfo }\n            z-10 cursor-pointer\n            absolute ${ position }-0 top-0\n          ` }>\n          <div className=\"fa fa-caret-left text-lg\"\n            style={ {\n              transform: `scaleX(${ (open ? 1 : -1) * dir })`,\n              transition: \"transform 500ms\"\n            } }/>\n        </div>\n      )\n  }\n}\n\n\nexport const CollapsibleSidebar = ({ placeBeside,\n                                      width = 320,\n                                      padding = 8,\n                                      children,\n                                      startOpen = true,\n                                      position = \"left\",\n                                      customTheme= {},\n                                      togglePosition,\n                                      minWidth='w-0',\n                                      showToggle = true,\n                                      shift = Shift }) => {\n\n  const [state, dispatch] = React.useReducer(Reducer, startOpen, InitState);\n\n  const { open, transitioning } = state;\n\n  const setOpen = React.useCallback(open => {\n    dispatch({ type: \"update-state\", open, transitioning: true });\n    timeout.current = setTimeout(dispatch, 0, { type: \"update-state\", transitioning: false });\n  }, []);\n\n  const dir = position === \"left\" ? 1 : -1;\n\n  const timeout = React.useRef();\n\n  React.useEffect(() => {\n    return () => clearTimeout(timeout.current);\n  }, []);\n\n  const doToggle = React.useCallback(e => {\n    setOpen(open > 0 ? open - 1 : 1);\n  }, [open, setOpen]);\n\n  const [node, setNode] = React.useState();\n\n  const extendSidebar = React.useCallback(({ Comp, top = 0, compProps = {} }) => {\n    if (open === 0) return;\n    setOpen(2);\n    const sidebarTop = node ? node.getBoundingClientRect().top : 0;\n    if (typeof top === \"string\") {\n      top = `calc(${ top } - ${ sidebarTop }px)`;\n    }\n    else {\n      top -= sidebarTop;\n    }\n    dispatch({ type: \"update-state\", Comp, compProps, top });\n  }, [open, setOpen, node]);\n  const passCompProps = React.useCallback(compProps => {\n    if (open !== 2) return;\n    dispatch({ type: \"update-state\", compProps });\n  }, [open]);\n  const closeExtension = React.useCallback(() => {\n    if (open !== 2) return;\n    setOpen(1);\n  }, [open, setOpen]);\n\n  const contextValue = React.useMemo(() => {\n    return { ...state, extendSidebar, passCompProps, closeExtension, open, doToggle };\n  }, [extendSidebar, passCompProps, closeExtension, state, open, doToggle]);\n\n  const theme = {...useTheme(),...customTheme};\n\n  const styleWidth = `calc(${ (width - padding * 2) * open }px - ${ open > 1 ? `${ shift.value * (open - 1) }${ shift.unit }` : \"0rem\" })`;\n\n  return (\n    <div className={ `absolute ${ position }-0 top-0 bottom-0 z-30` }\n      style={ { padding: `${ padding }px` } }>\n\n      <SidebarContext.Provider value={ contextValue }>\n\n        <div className=\"h-full relative\"\n          style={ {\n            transition: \"width 500ms\",\n            width: styleWidth\n          } }>\n\n          <div className=\"absolute top-0 bottom-0\"\n            style={ {\n              [position]: `calc(100% + ${ padding }px - ${ open ? 0 : padding }px)`,\n              transition: `${ position } 500ms`\n            } }>\n\n            { placeBeside }\n\n            { !showToggle ? null :\n              <Toggle togglePosition={ togglePosition }\n                position={ position }\n                doToggle={ doToggle }\n                open={ open } dir={ dir }\n                theme={ theme }\n                padding={ padding }/>\n            }\n\n          </div>\n\n          <ExtendedSidebar top={ state.top } open={ open === 2 }\n            transitioning={ transitioning }\n            width={ width} padding={ padding }>\n\n            { typeof state.Comp !== \"function\" ? state.Comp :\n              <state.Comp { ...state.compProps }/>\n            }\n\n          </ExtendedSidebar>\n\n          <Expandable open={ open } ref={ setNode }\n            transitioning={ transitioning }\n            position\n            minWidth={minWidth}\n            width={ width } padding={ padding }>\n\n            { children }\n\n          </Expandable>\n\n        </div>\n\n      </SidebarContext.Provider>\n    </div>\n  )\n}\n\nexport const Expandable = React.forwardRef(({ open, transitioning, width, minWidth='w-0',padding, children, heightFull = true }, ref) => {\n\n  // const theme = useTheme();\n\n  const hFull = heightFull ? \"h-full\" : \"\";\n\n  return (\n    <div className={ `${ hFull } ${open && !transitioning ? 'w-full' : minWidth}` } ref={ ref }\n      style={ {\n        //overflow: open && !transitioning ? \"visible\" : 'visible'\n      } }>\n      <div className={ `${ hFull } scrollbar-sm overflow-y-auto overflow-x-hidden ${open && !transitioning ? 'w-full' : minWidth}`}\n        style={ { transition: \"width 500ms\" } }\n       >\n\n        <div className={ `\n          absolute top-0 right-0 bottom-0 left-0 pointer-events-none z-10 \n          opacity-0` } />\n        { children }\n\n      </div>\n    </div>\n  )\n})\n\nconst ExtendedSidebar = ({ width, minWidth='w-0', padding, open, top = 0, children, ...props }) => {\n  let remMinWidth = minWidth.split('-')[1] * .25\n  return (\n    <div className=\"absolute\"\n      style={ {\n        width: `${ open ? `${(width - padding * 2)}px` : `${remMinWidth}rem`}` ,\n        left: `calc(${ width - padding * 2 }px - 0.25rem)`,\n        transition: \"width 500ms\",\n        top: typeof top === \"string\" ? top : `${ top }px`\n      } }>\n\n      <Expandable { ...props } heightFull={ false }\n        width={ width } minWidth={minWidth} padding={ padding } open={ open }\n        >\n\n        { children }\n\n      </Expandable>\n\n    </div>\n  )\n}\n","import React from \"react\";\n\nimport get from \"lodash.get\";\n\nimport {\n  Select,\n  useTheme,\n  ColorBar,\n  DummyLegendTools,\n  useLegendReducer,\n} from \"@availabs/avl-components\";\n\nimport {\n  useSidebarContext,\n} from './CollapsibleSidebar'\n\nconst LayerPanel = ({ layer, layersLoading, ...rest }) => {\n  const [open, setOpen] = React.useState(true),\n    toggleOpen = React.useCallback(\n      (e) => {\n        setOpen(!open);\n      },\n      [open, setOpen]\n    );\n\n  const theme = useTheme();\n\n  const filters = React.useMemo(() => {\n    return Object.values(layer.filters).map(\n      ({ name, type, layerId, active = true, ...rest }, i) => {\n        if (!active) return;\n        switch (type) {\n          default:\n            return (\n              <div\n                className={`pt-2 ${theme.bg} p-1 rounded`}\n                key={`${layerId}-${name}`}\n              >\n                <div className=\"text-base leading-4 mb-1\">{name}</div>\n                <Select {...rest} removable={rest.multi ? true : false} />\n              </div>\n            );\n        }\n      }\n    );\n  }, [layer.filters, theme]);\n\n  return (\n    <div className={`${theme.menuBg} p-1 mb-1 rounded relative`}>\n      <div\n        className={`\n        absolute top-0 bottom-0 left-0 right-0 z-10 opacity-50\n        ${Boolean(layersLoading[layer.id]) ? \"block\" : \"hidden\"}\n        ${theme.sidebarBg}\n      `}\n      />\n\n      <LayerHeader\n        layer={layer}\n        {...rest}\n        open={open}\n        toggleOpen={toggleOpen}\n      />\n\n      <div style={{ display: open ? \"block\" : \"none\" }}>\n       {/* {!layer.legend ? null : <LegendControls layer={layer} {...rest} />}*/}\n        {filters}\n      </div>\n    </div>\n  );\n};\nexport default LayerPanel;\n\nexport const Icon = ({\n  onClick,\n  cursor = \"cursor-pointer\",\n  className = \"\",\n  style = {},\n  children,\n}) => {\n  const theme = useTheme();\n  return (\n    <div\n      onClick={onClick}\n      className={`\n        ${cursor} ${className} transition h-6 w-6\n        hover:${theme.menuTextActive} flex items-center justify-center\n      `}\n      style={{ ...style }}\n    >\n      {children}\n    </div>\n  );\n};\nconst LayerHeader = ({ layer, toggleOpen, open, MapActions }) => {\n  const theme = useTheme();\n\n  return (\n    <div className={`flex flex-col px-1 ${theme.bg} rounded`}>\n      <div className=\"flex items-center\">\n        <Icon cursor=\"cursor-move\">\n          <span className=\"fa fa-bars mr-1\" />\n        </Icon>\n        <div className=\"font-semibold text-lg leading-5\">{layer.name}</div>\n        <div className=\"flex-1 flex justify-end\">\n          {!layer.isDynamic ? null : (\n            <Icon onClick={(e) => MapActions.removeDynamicLayer(layer)}>\n              <span className=\"fa fa-trash\" />\n            </Icon>\n          )}\n          <Icon onClick={(e) => MapActions.removeLayer(layer)}>\n            <span className=\"fa fa-times\" />\n          </Icon>\n          <Icon onClick={toggleOpen}>\n            <span className={`fa fa-sm ${open ? \"fa-minus\" : \"fa-plus\"}`} />\n          </Icon>\n        </div>\n      </div>\n      <div className=\"flex items-center\" style={{ marginTop: \"-0.25rem\" }}>\n        {layer.toolbar.map((tool, i) => (\n          <LayerTool\n            MapActions={MapActions}\n            layer={layer}\n            tool={tool}\n            key={i}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nconst LegendControls = ({ layer, MapActions }) => {\n  const theme = useTheme();\n\n  const {\n    extendSidebar,\n    passCompProps,\n    closeExtension,\n    open,\n  } = useSidebarContext();\n\n  const range = get(layer, [\"legend\", \"range\"], []);\n\n  const [toolState, dispatch] = useLegendReducer(range.length);\n\n  const updateLegend = React.useCallback(\n    (update) => {\n      MapActions.updateLegend(layer, update);\n    },\n    [layer, MapActions]\n  );\n\n  const ref = React.useRef();\n\n  const onClick = React.useCallback(\n    (e) => {\n      if (open === 2) return closeExtension();\n\n      const rect = ref.current.getBoundingClientRect();\n      const compProps = { layer, range, updateLegend, dispatch, toolState };\n      extendSidebar({\n        Comp: LegendSidebar,\n        compProps,\n        top: `calc(${rect.top}px - 0.5rem)`,\n      });\n    },\n    [\n      ref,\n      extendSidebar,\n      closeExtension,\n      open,\n      layer,\n      range,\n      updateLegend,\n      dispatch,\n      toolState,\n    ]\n  );\n\n  React.useEffect(() => {\n    passCompProps({ layer, range, updateLegend, dispatch, toolState });\n  }, [layer, range, updateLegend, toolState, passCompProps, dispatch]);\n\n  return (\n    <div\n      ref={ref}\n      className={`\n      mt-1 ${theme.bg} hover:${theme.accent1}\n      px-1 pb-1 rounded transition relative cursor-pointer\n    `}\n      onClick={onClick}\n    >\n      <div>Legend Controls</div>\n      <ColorBar colors={range} small />\n    </div>\n  );\n};\nconst LegendSidebar = ({ layer, range, updateLegend, dispatch, toolState }) => {\n  const theme = useTheme();\n  return (\n    <div\n      className={`\n        p-1 rounded-r cursor-auto ${theme.sidebarBg} w-full\n      `}\n    >\n      <div className={`${theme.menuBg} relative p-1 rounded`}>\n        <div className={`rounded p-1 ${theme.bg}`}>\n          <DummyLegendTools\n            layer={layer}\n            current={range}\n            updateLegend={updateLegend}\n            dispatch={dispatch}\n            {...toolState}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst checkDefaultTools = (tool) => {\n  if (typeof tool !== \"string\") return tool;\n\n  switch (tool) {\n    case \"toggle-visibility\":\n      return {\n        tooltip: \"Toogle Visibility\",\n        icon: (layer) => (layer.isVisible ? \"fa-eye\" : \"fa-eye-slash\"),\n        action: ({ toggleVisibility }, layer) => toggleVisibility(layer),\n      };\n    default:\n      return {\n        tooltip: `Unknown Tool \"${tool}\"`,\n        icon: \"fa-frown\",\n        action: (e) => {},\n      };\n  }\n};\n\nconst LayerTool = ({ tool, MapActions, layer }) => {\n  const Tool = React.useMemo(() => {\n    return checkDefaultTools(tool);\n  }, [tool]);\n\n  const action = React.useCallback(\n    (e) => {\n      Tool.action(MapActions, layer);\n    },\n    [Tool, MapActions, layer]\n  );\n\n  const icon = typeof Tool.icon === \"function\" ? Tool.icon(layer) : Tool.icon;\n\n  return (\n    <Icon onClick={action}>\n      <span className={`fa fa-sm ${icon}`} />\n    </Icon>\n  );\n};\n","import React from \"react\"\n\nimport { Select, useTheme,/*CollapsibleSidebar*/ } from \"@availabs/avl-components\"\n\nimport { CollapsibleSidebar, useSidebarContext } from './CollapsibleSidebar'\n\nimport LayerPanel from \"./LayerPanel\"\n\nconst LayersTab = ({ inactiveLayers, activeLayers, MapActions, ...rest }) => {\n\n  const theme = useTheme();\n\n  return (\n    <>\n      { !inactiveLayers.length ? null :\n        <div className={ `mb-1 p-1 ${ theme.menuBg } ${theme.rounded}` }>\n          <div className={ `p-1 ${ theme.bg } ${theme.rounded}` }>\n            <Select options={ inactiveLayers }\n              placeholder=\"Add a Layer...\"\n              accessor={ ({ name }) => name }\n              value={ null } multi={ false }\n              searchable={ false }\n              onChange={ MapActions.addLayer }/>\n          </div>\n        </div>\n      }\n      { activeLayers.map(layer =>\n          <LayerPanel\n            key={ layer.id } { ...rest }\n            layer={ layer } MapActions={ MapActions }/>\n        )\n      }\n    </>\n  )\n}\nconst StylesTab = ({ mapStyles, styleIndex, MapActions, mapboxMap }) => {\n\n  const theme = useTheme();\n\n  const [loading, setLoading] = React.useState(false);\n  React.useEffect(() => {\n    if (loading) {\n      const done = () => setLoading(false);\n      mapboxMap.once(\"style.load\", done);\n      return () => mapboxMap.off(\"style.load\", done);\n    }\n  }, [loading, mapboxMap]);\n\n  const updateStyle = React.useCallback(index => {\n    setLoading(true);\n    MapActions.setMapStyle(index);\n  }, [MapActions]);\n\n  return (\n    <div className={ `${ theme.menuBg } ${theme.rounded}` }>\n\n      <div className={ `\n        absolute top-0 bottom-0 left-0 right-0 opacity-50 z-10\n        ${ theme.sidebarBg } ${ loading ? \"block\" : \"hidden\" }\n      ` }/>\n\n      <div className={ `${ theme.bg } p-1 ${theme.rounded} relative` }>\n\n        { mapStyles.map(({ name, imageUrl }, i) =>\n            <div key={ i } className={ `\n              ${ i === 0 ? \"\" : \"mt-1\" } p-1 ${theme.rounded} hover:${ theme.menuTextActive }\n              flex items-center hover:${ theme.accent2 } transition\n              ${ i === styleIndex ?\n                `border-r-4 ${ theme.borderInfo } ${ theme.accent2 }` :\n                `${ theme.accent1 } cursor-pointer`\n              }\n            ` } onClick={ i === styleIndex ? null : e => updateStyle(i) }>\n              <img src={ imageUrl } alt={ name } className={`${theme.rounded}`}/>\n              <div className=\"ml-2\">{ name }</div>\n            </div>\n          )\n        }\n\n      </div>\n    </div>\n  )\n}\n\nconst SidebarTabs = {\n  layers: {\n    icon: \"fa fa-filter\",\n    Component: LayersTab\n  },\n  styles: {\n    icon: \"fa fa-layer-group\",\n    Component: StylesTab\n  }\n}\n\nconst Tab = ({i, icon, MapActions, sidebarTabIndex}) => {\n    const {open, doToggle} = useSidebarContext();\n    const theme = { ...useTheme() };\n    return (\n      <div key={ i } onClick={ e => {\n        //console.log('onclick', open, doToggle)\n        if((!open) || (open && i === sidebarTabIndex)  ) {\n          doToggle()\n        }\n\n        MapActions.setSidebarTab(i) \n      }}\n        className={ `\n           rounded-t-lg \n           inline-block\n        ` }>\n        <div className={ `\n            w-10 h-11 hover:text-yellow-600 text-xs\n            ${i === 0 ? 'rounded-tl-lg ' : '' }\n            ${ open && i === sidebarTabIndex ?\n              'bg-blue-500 text-white' :\n              ` cursor-pointer hover:bg-gray-200`\n            } \n            flex items-center justify-center\n          ` }>\n            <span className={ `fa fa-lg ${ icon }` }/>\n          </div>\n          \n        </div>\n    )\n}\n\nconst Sidebar = ({ open, sidebarTabIndex, MapActions, tabs, title, children, togglePosition, showSidebar, sidebarTabPosition, ...rest }) => {\n\n  const c = useSidebarContext();\n  const Tabs = React.useMemo(() => {\n    return tabs.map(tab => {\n      if (tab in SidebarTabs) {\n        return SidebarTabs[tab];\n      }\n      return tab;\n    })\n  }, [tabs]);\n\n  const theme = { ...useTheme() };\n\n  return (\n    <CollapsibleSidebar\n      togglePosition={ togglePosition }\n      minWidth={'w-10'}\n      startOpen={ Boolean(open) && Boolean(showSidebar) }\n      showToggle={ false }\n      placeBeside={ children }>\n\n      { !showSidebar ? null :\n        <div className={ `h-full rounded flex ${sidebarTabPosition === 'top' ? 'flex-col' : '' }`}  style={{background: 'rgba(255,255,255, 0.5)'}}>\n          \n          <div className={`mb-1 rounded-t-lg flex ${sidebarTabPosition === 'top' ? '' : 'flex-col items-center'}`} style={{background: 'rgba(255,255,255, 0.7)'}}>\n            { Tabs.map(({ icon }, i) => (\n              <Tab icon={icon} key={i} i={i} MapActions={ MapActions } sidebarTabIndex={ sidebarTabIndex}/>)\n            )\n          }\n          </div>\n\n          <div className='flex-1 p-2'>\n            { \n              !title ? null :\n              <div className=\"text-xl font-bold ml-1\">\n                { title }\n              </div>\n            }\n            { Tabs.map(({ Component }, i) => (\n                <div key={ i } className=\"relative z-10\"\n                  style={ { display: i === sidebarTabIndex ? \"block\" : \"none\" } }>\n                  <Component { ...rest } MapActions={ MapActions }/>\n                </div>\n              ))\n            }\n          </div>\n        </div>\n      }\n\n    </CollapsibleSidebar>\n  )\n}\nexport default Sidebar;\n","import React from \"react\"\n\nimport { ScalableLoading, useTheme } from \"@availabs/avl-components\"\n\nconst LoadingLayer = ({ layer, progress }) => {\n\n  const theme = useTheme();\n\n  return (\n    <div className={ `\n        ${ theme.sidebarBg } w-72 p-1 mt-2\n        rounded-tl rounded-bl rounded-tr-full rounded-br-full\n      ` }\n      style={ {\n      } }>\n      <div className={ `${ theme.menuBg } p-1 rounded-tr-full rounded-br-full` }>\n        <div className={ `${ theme.bg } p-1 rounded-tr-full rounded-br-full flex` }>\n          <div className=\"flex-1 text-lg font-medium flex items-center\">\n            <div className='flex-1'>{ layer.name }</div>\n            <div className={`font-light px-2`}>\n              {layer.state.progress ? `${layer.state.progress}%` : '' }\n            </div>\n          </div>\n          <div className={ `${ theme.menuTextActive }` }>\n            <ScalableLoading scale={ 0.35 } color=\"currentColor\"/>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default LoadingLayer;\n","import React from \"react\"\n\nimport { useTheme } from \"@availabs/avl-components\"\n\nimport { Icon } from \"./LayerPanel\"\n\nconst getTranslate = (pos, { width, height }) => {\n\n  const gap = 30, padding = 10, { x, y } = pos;\n\n  const yMax = height,\n    yTrans = `max(\n      ${ padding }px,\n      min(calc(${ y }px - 50%), calc(${ yMax - padding }px - 100%))\n    )`;\n  if (x < width * 0.5) {\n    return `translate(\n      ${ x + gap }px,\n      ${ yTrans }\n    )`\n  }\n  return `translate(\n    calc(-100% + ${ x - gap }px),\n    ${ yTrans }\n  )`\n}\n\n// const getPinnedTranslateOld = ({ x, y }) => {\n//   const gap = 30;\n//   return `translate(${ x + gap }px, calc(${ y - 20 }px - 50%))`;\n// }\n\nconst getPinnedTranslate = ({ x, y }, orientation) => {\n\n  const gap = 30;\n\n  const yTrans = `calc(${ y }px - 50%)`;\n\n  if (orientation === \"right\") {\n    return `translate(\n      ${ x + gap }px,\n      ${ yTrans }\n    )`\n  }\n  return `translate(\n    calc(-100% + ${ x - gap }px),\n    ${ yTrans }\n  )`\n}\nconst getTransform = ({ x }, orientation) => {\n  if (orientation === \"right\") {\n    return \"translate(-50%, -50%) rotate(45deg) skew(-15deg, -15deg)\"\n  }\n  return \"translate(50%, -50%) rotate(45deg) skew(-15deg, -15deg)\"\n}\n\nconst RemoveButton = ({ orientation, children }) => {\n  const theme = useTheme();\n  return (\n    <div style={ {\n        transform: orientation === \"left\" ?\n          \"translate(-0.75rem, -0.75rem)\" : \"translate(0.75rem, -0.75rem)\"\n      } }\n      className={ `\n        ${ theme.bg }\n        rounded absolute inline-block top-0 z-20\n        ${ orientation === \"left\" ? \"left-0\" : \"right-0\" }\n      ` }>\n      { children }\n    </div>\n  )\n}\n\nexport const PinnedHoverComp = ({ children, remove, id, project, lngLat, width }) => {\n\n  const pos = project(lngLat);\n\n  const orientation = React.useRef(pos.x < width * 0.5 ? \"right\" : \"left\");\n\n  const style = React.useMemo(() => {\n    return {\n      top: \"50%\",\n      transform: getTransform(pos, orientation.current)\n    };\n  }, [pos]);\n\n  const theme = useTheme();\n\n  return (\n    <div className={ `\n        absolute top-0 left-0 z-20 inline-block\n        rounded whitespace-nowrap hover-comp\n        pointer-events-auto\n        p-1 rounded ${ theme.sidebarBg }\n        grid grid-cols-1 gap-1\n      ` }\n      style={ {\n        transform: getPinnedTranslate(pos, orientation.current),\n        boxShadow: \"2px 2px 8px 0px rgba(0, 0, 0, 0.75)\"\n      } }>\n\n      <div className={ `\n          absolute w-6 h-6 ${ theme.sidebarBg } rounded-bl rounded-tr\n          ${ orientation.current === \"left\" ? \"right-0\" : \"left-0\" }\n        ` }\n        style={ style }/>\n\n        { children }\n\n        <RemoveButton orientation={ orientation.current }>\n          <Icon onClick={ e => remove(id) }>\n            <span className=\"fa fa-times\"/>\n          </Icon>\n        </RemoveButton>\n\n    </div>\n  )\n}\n\nexport const HoverCompContainer = ({ show, children, lngLat, project, ...rest }) => {\n  const theme = useTheme();\n\n  const pos = project(lngLat);\n\n  return (\n    <div className={ `\n        absolute top-0 left-0 z-20\n        rounded whitespace-nowrap hover-comp\n        pointer-events-none\n        p-1 rounded ${ theme.sidebarBg }\n        grid grid-cols-1 gap-1\n      ` }\n      style={ {\n        display: show ? \"grid\" : \"none\",\n        transform: getTranslate(pos, rest),\n        boxShadow: \"2px 2px 8px 0px rgba(0, 0, 0, 0.75)\",\n        // transition: \"transform 0.15s ease-out\"\n      } }>\n\n      { children }\n\n    </div>\n  )\n}\n","import React from \"react\";\n\nimport get from \"lodash.get\";\n\nimport { useTheme, Legend } from \"@availabs/avl-components\";\n\nimport { Icon } from \"./LayerPanel\";\n\nconst InfoBoxContainer = ({\n  activeLayers,\n  width = 320,\n  padding = 8,\n  MapActions,\n  ...props\n}) => {\n  const [legendLayers, infoBoxLayers, infoBoxWidth] = activeLayers.reduce(\n    (a, c) => {\n      if (c.legend) {\n        const { show = true } = c.legend;\n        let bool = show;\n        if (typeof show === \"function\") {\n          bool = show(c);\n        }\n        if (bool) {\n          a[0].push(c);\n        }\n      }\n      const shownInfoBoxes = c.infoBoxes.filter(({ show = true }) => {\n        let bool = show;\n        if (typeof show === \"function\") {\n          bool = show(c);\n        }\n        return bool;\n      });\n      if (shownInfoBoxes.length) {\n        a[1].push([c, shownInfoBoxes]);\n        a[2] = Math.max(\n          a[2],\n          c.infoBoxes.reduce((aa, cc) => Math.max(aa, get(cc, \"width\", 0)), 0)\n        );\n      }\n      return a;\n    },\n    [[], [], width]\n  );\n\n  const theme = useTheme();\n\n  return (\n    <div\n      className={`\n        absolute right-0 top-0 bottom-0\n        flex flex-col items-end z-30\n        pointer-events-none\n      `}\n      style={{ padding: `${padding}px` }}\n    >\n      {legendLayers.map((layer) => (\n        <LegendContainer\n          key={layer.id}\n          {...layer.legend}\n          MapActions={MapActions}\n          layer={layer}\n          padding={padding}\n          infoBoxWidth={infoBoxWidth}\n        />\n      ))}\n\n      {!infoBoxLayers.length ? null : (\n        <div\n          className={`\n            ${theme.sidebarBg} p-1 rounded\n            grid grid-cols-1 gap-1\n            pointer-events-auto overflow-y-auto scrollbar-sm\n          `}\n          style={{\n            width: `${infoBoxWidth - padding * 2}px`,\n          }}\n        >\n          {infoBoxLayers.map(([layer, infoBoxes]) => (\n            <div\n              key={layer.id}\n              className={`\n                  grid grid-cols-1 gap-1\n                  ${theme.menuBg} p-1 rounded\n                `}\n            >\n              {infoBoxes.map((box, i) => (\n                <InfoBox\n                  key={i}\n                  {...props}\n                  {...box}\n                  layer={layer}\n                  MapActions={MapActions}\n                  activeLayers={activeLayers}\n                />\n              ))}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\nexport default InfoBoxContainer;\n\nconst InfoBox = ({\n  layer,\n  Header,\n  Component,\n  MapActions,\n  open = true,\n  ...props\n}) => {\n  const [isOpen, setOpen] = React.useState(open);\n\n  const theme = useTheme();\n\n  return (\n    <div\n      className={`\n      ${theme.bg} px-1 rounded\n    `}\n    >\n      {!Header ? (\n        <div className=\"pt-1\" />\n      ) : (\n        <div\n          className={`\n            rounded text-lg font-bold\n            flex items-center\n          `}\n        >\n          <div\n            className={`\n              flex-1 ${isOpen ? \"opacity-100\" : \"opacity-50\"} transition\n            `}\n          >\n            {typeof Header === \"function\" ? <Header layer={layer} /> : Header}\n          </div>\n          <div className=\"text-base\">\n            <Icon onClick={(e) => setOpen(!isOpen)}>\n              <span className={`fa fa-${isOpen ? \"minus\" : \"plus\"}`} />\n            </Icon>\n          </div>\n        </div>\n      )}\n      {!Component ? null : (\n        <div className={`${isOpen ? \"block\" : \"hidden\"}`}>\n          {typeof Component === \"function\" ? (\n            <Component layer={layer} MapActions={MapActions} {...props} />\n          ) : (\n            Component\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst LegendContainer = ({\n  infoBoxWidth,\n  padding,\n  width = 420,\n  Title,\n  MapActions,\n  layer,\n  ...props\n}) => {\n  const theme = useTheme();\n  if(props.hide) {\n    return ''\n  }\n  return (\n    <div\n      className={`\n      ${theme.sidebarBg} p-1 rounded pointer-events-auto\n    `}\n      style={{\n        width: `${Math.max(infoBoxWidth, width) - padding * 2}px`,\n        marginBottom: \"-0.25rem\",\n      }}\n    >\n      <div className={`${theme.menuBg} p-1 rounded`}>\n        <div className={`${theme.bg} px-1 rounded`}>\n          {Title ? (\n            <div className={`font-medium text-lg ${theme.menuText} py-1`}>\n              {typeof Title === \"function\" ? (\n                <Title layer={layer} MapActions={MapActions} />\n              ) : (\n                Title\n              )}\n            </div>\n          ) : (\n            <div className=\"pt-1\" />\n          )}\n          {/*<Legend {...props} />*/}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\"\n\nimport { useTheme, Draggable } from \"@availabs/avl-components\"\n\nconst DraggableModal = ({ Header,\n                          Component,\n                          layer,\n                          MapActions,\n                          modalData,\n                          activeLayers,\n                          layersLoading,\n                          loadingLayers,\n                          inactiveLayers,\n                          ...props }) => {\n\n  const theme = useTheme();\n\n  const { layerId, modalKey, zIndex } = modalData;\n\n  return (\n    <Draggable { ...props } className=\"pointer-events-auto\"\n      onClick={ e => MapActions.bringModalToFront(layerId, modalKey) }\n      onDragStart={ e => MapActions.bringModalToFront(layerId, modalKey) }\n      style={ { zIndex } }\n      toolbar={ [\n        { icon: \"fa-times\",\n          onClick: e => MapActions.closeModal(layerId, modalKey)\n        }\n      ] }>\n      <div className=\"m-1\">\n        { !Header ? null :\n          <div className=\"font-bold text-xl ml-2\">\n            { typeof Header === \"function\" ?\n              <Header layer={ layer } MapActions={ MapActions }/> :\n              Header\n            }\n          </div>\n        }\n        <div className={ `p-1 rounded ${ theme.menuBg }` }>\n          <div className={ `p-1 rounded ${ theme.bg }` }>\n            { <Component layer={ layer }\n                MapActions={ MapActions }\n                activeLayers={ activeLayers }\n                layersLoading={ layersLoading }\n                loadingLayers={ loadingLayers }\n                inactiveLayers={ inactiveLayers }/>\n            }\n          </div>\n        </div>\n      </div>\n    </Draggable>\n  )\n}\nexport default DraggableModal;\n","import React from \"react\"\n\nimport { useTheme } from \"@availabs/avl-components\"\n\nconst MapAction = ({ icon, tooltip, actionFunc,\n                      MapActions, layer,\n                      ...rest }) => {\n  const theme = useTheme();\n  return (\n    <div className={ `${ theme.sidebarBg } p-1 rounded-2xl mb-2` }>\n      <div className={ `${ theme.menuBg } p-1 rounded-2xl` }>\n        <div className={ `\n            ${ theme.bg } hover:${ theme.accent1 }\n            ${ theme.menuText } ${ theme.menuTextHover }\n            w-10 h-10 rounded-2xl cursor-pointer text-lg\n            flex items-center justify-center\n          ` }\n          onClick={ e => actionFunc(MapActions, layer, rest) }>\n          <span className={ `fa ${ icon }` }/>\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default MapAction;\n","import React from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport get from \"lodash.get\";\n\nimport { useSetSize, useFalcor } from \"@availabs/avl-components\";\n// import {  } from 'modules/avl-components/src'\n\nimport Sidebar from \"./components/Sidebar\";\nimport LoadingLayer from \"./components/LoadingLayer\";\nimport {\n  HoverCompContainer,\n  PinnedHoverComp,\n} from \"./components/HoverCompContainer\";\nimport InfoBoxes from \"./components/InfoBoxContainer\";\nimport DraggableModal from \"./components/DraggableModal\";\nimport MapAction from \"./components/MapAction\";\n\nexport const DefaultStyles = [\n  { name: \"Dark\", style: \"mapbox://styles/am3081/ckm85o7hq6d8817nr0y6ute5v\" },\n  { name: \"Light\", style: \"mapbox://styles/am3081/ckm86j4bw11tj18o5zf8y9pou\" },\n  {\n    name: \"Satellite\",\n    style: \"mapbox://styles/am3081/cjya6wla3011q1ct52qjcatxg\",\n  },\n  {\n    name: \"Satellite Streets\",\n    style: \"mapbox://styles/am3081/cjya70364016g1cpmbetipc8u\",\n  },\n];\n\nconst DefaultMapOptions = {\n  center: [-74.180647, 42.58],\n  minZoom: 2,\n  zoom: 10,\n  preserveDrawingBuffer: true,\n  // style: \"mapbox://styles/am3081/cjqqukuqs29222sqwaabcjy29\",\n  styles: DefaultStyles,\n  attributionControl: false,\n  logoPosition: \"bottom-left\",\n};\n\nconst DefaultSidebar = {\n  tabs: [\"layers\", \"styles\"],\n  title: \"\",\n  togglePosition: \"top\",\n};\n\nlet idCounter = 0;\nconst getUniqueId = () => `unique-id-${++idCounter}`;\n\nconst DefaultStaticOptions = {\n  size: [80, 50],\n  center: [-74.180647, 42.58],\n  zoom: 2.5,\n};\nconst getStaticImageUrl = (style, options = {}) => {\n  const { size, center, zoom } = { ...DefaultStaticOptions, ...options };\n  return (\n    `https://api.mapbox.com/styles/v1/${style.slice(16)}/static/` +\n    `${center},${zoom}/${size.join(\"x\")}` +\n    `?attribution=false&logo=false&access_token=${mapboxgl.accessToken}`\n  );\n};\n\nconst InitialState = {\n  map: null,\n  initializedLayers: [],\n  activeLayers: [],\n  dynamicLayers: [],\n  layersLoading: {},\n  hoverData: {\n    data: new Map(),\n    pos: [0, 0],\n    lngLat: {},\n  },\n  pinnedHoverComps: [],\n  pinnedMapMarkers: [],\n  mapStyles: [],\n  styleIndex: 0,\n  sidebarTabIndex: 0,\n  modalData: [],\n  prevLayerStates: {},\n  layerStates: {},\n};\nconst Reducer = (state, action) => {\n  const { type, ...payload } = action;\n  switch (type) {\n    case \"init-layer\":\n      return {\n        ...state,\n        initializedLayers: [...state.initializedLayers, payload.layer.id],\n        // activeLayers: [\n        //   payload.layer.id,\n        //   ...state.activeLayers\n        // ],\n        // layerStates: {\n        //   ...state.layerStates,\n        //   [payload.layer.id]: payload.layer.state\n        // }\n      };\n    case \"loading-start\":\n      return {\n        ...state,\n        layersLoading: {\n          ...state.layersLoading,\n          [payload.layerId]:\n            get(state, [\"layersLoading\", payload.layerId], 0) + 1,\n        },\n      };\n    case \"loading-stop\":\n      return {\n        ...state,\n        // activeLayers: [...state.activeLayers],\n        layersLoading: {\n          ...state.layersLoading,\n          [payload.layerId]: Math.max(\n            0,\n            state.layersLoading[payload.layerId] - 1\n          ),\n        },\n      };\n    case \"activate-layer\":\n      return {\n        ...state,\n        activeLayers: [payload.layer, ...state.activeLayers],\n        layerStates: {\n          ...state.layerStates,\n          [payload.layer.id]: payload.layer.state,\n        },\n        /*prevLayerStates: {\n          ...state.prevLayerStates,\n          [payload.layer.id]: payload.layer.state,\n        },*/\n      };\n    case \"deactivate-layer\":\n      return {\n        ...state,\n        activeLayers: state.activeLayers.filter(\n          ({ id }) => id !== payload.layerId\n        ),\n      };\n    case \"hover-layer-move\": {\n      const { data, layer, HoverComp, pinnable, sortOrder, ...rest } = payload;\n      state.hoverData.data.set(layer.id, {\n        data,\n        HoverComp,\n        layer,\n        pinnable,\n        sortOrder,\n      });\n      return {\n        ...state,\n        hoverData: {\n          ...state.hoverData,\n          ...rest,\n        },\n      };\n    }\n    case \"hover-layer-leave\": {\n      const { layer } = payload;\n      state.hoverData.data.delete(layer.id);\n      return {\n        ...state,\n        hoverData: {\n          ...state.hoverData,\n        },\n      };\n    }\n    case \"pin-hover-comp\": {\n      if (!state.hoverData.data.size) return state;\n\n      const newPinned = {\n        id: getUniqueId(),\n        HoverComps: [...state.hoverData.data.values()]\n          .filter(({ pinnable }) => pinnable)\n          .sort((a, b) => a.sortOrder - b.sortOrder),\n        ...payload,\n      };\n      if (newPinned.HoverComps.length) {\n        return {\n          ...state,\n          pinnedHoverComps: [...state.pinnedHoverComps, newPinned],\n        };\n      }\n      return state;\n    }\n\n    case \"remove-pinned\":\n      return {\n        ...state,\n        pinnedHoverComps: state.pinnedHoverComps.filter((phc) => {\n          if (phc.id !== payload.id) return true;\n          phc.marker.remove();\n          return false;\n        }),\n      };\n    case \"add-dynamic-layer\":\n      return {\n        ...state,\n        dynamicLayers: [...state.dynamicLayers, payload.layer],\n      };\n    case \"remove-dynamic-layer\":\n      return {\n        ...state,\n        dynamicLayers: state.dynamicLayers.filter(\n          ({ id }) => id !== payload.layer.id\n        ),\n      };\n    case \"show-modal\": {\n      const { layerId, modalKey } = payload;\n      if (\n        state.modalData.reduce(\n          (a, c) => a || (c.layerId === layerId && c.modalKey === modalKey),\n          false\n        )\n      )\n        return state;\n      return {\n        ...state,\n        modalData: [...state.modalData, { layerId, modalKey, zIndex: 0 }],\n      };\n    }\n    case \"bring-modal-to-front\": {\n      const { layerId, modalKey } = payload;\n      return {\n        ...state,\n        modalData: state.modalData.map((md) => ({\n          ...md,\n          zIndex: md.layerId === layerId && md.modalKey === modalKey ? 10 : 0,\n        })),\n      };\n    }\n    // case \"update-modal-data\": {\n    //   const { layerId, modalKey, data } = payload;\n    //   return {\n    //     ...state,\n    //     modalData: state.modalData.map(md => {\n    //       if ((md.layerId === layerId) && (md.modalKey === modalKey)) {\n    //         return { ...md, data };\n    //       }\n    //       return md;\n    //     })\n    //   }\n    // }\n    case \"close-modal\":\n      return {\n        ...state,\n        modalData: state.modalData.filter(\n          ({ layerId, modalKey }) =>\n            !(layerId === payload.layerId && modalKey === payload.modalKey)\n        ),\n      };\n    case \"layer-update\": {\n      const { layer, newState } = payload;\n      return {\n        ...state,\n        layerStates: {\n          ...state.layerStates,\n          [layer.id]: newState,\n        },\n      };\n    }\n    case \"layer-updated\": {\n      const { layer } = payload;\n      return {\n        ...state,\n        // prevLayerStates: {\n        //   ...state.prevLayerStates,\n        //   [layer.id]: state.layerStates[layer.id],\n        // },\n      };\n    }\n    case \"set-map-style\":\n    case \"switch-tab\":\n    case \"map-loaded\":\n    case \"update-state\":\n      return {\n        ...state,\n        ...payload,\n      };\n    default:\n      return state;\n  }\n};\n\nconst EmptyArray = [];\nconst EmptyObject = {};\n\n// const toolbarFuncRunner = args => {\n//   if (!args.length) return [];\n//   const [arg, ...rest] = args;\n//   if (typeof arg === \"function\") {\n//     return [arg(...toolbarFuncRunner(rest))];\n//   }\n//   return [arg, ...toolbarFuncRunner(rest)];\n// }\n// const toolbarFuncArgs = ({ action }, layer, MapActions, map) => (\n//   action.map(action => {\n//     if (typeof action === \"function\") return action;\n//     if (typeof action === \"string\") {\n//       const [arg1, arg2] = action.split(\".\");\n//       if (arg1 === \"map\") {\n//         return arg2 ? MapActions[arg2] : map;\n//       }\n//       else if ((arg1 === \"this\") && arg2) {\n//         return layer[arg2].bind(layer);\n//       }\n//     }\n//     return action;\n//   })\n// )\n\nconst AvlMap = (props) => {\n  const {\n    accessToken,\n    mapOptions = EmptyObject,\n    layers = EmptyArray,\n    sidebar = EmptyObject,\n    layerProps = EmptyObject,\n    navigationControl = \"bottom-right\",\n  } = props;\n\n  const sidebarProps = React.useMemo(() => {\n    if (typeof sidebar !== \"object\") {\n      return {\n        showSidebar: Boolean(sidebar),\n      };\n    }\n    return {\n      showSidebar: true,\n      ...sidebar,\n    };\n  }, [sidebar]);\n\n  const { falcor, falcorCache } = useFalcor();\n\n  const [state, dispatch] = React.useReducer(Reducer, InitialState);\n\n  const updateHover = React.useCallback((hoverData) => {\n    dispatch(hoverData);\n  }, []);\n\n  const projectLngLat = React.useCallback(\n    (lngLat) => {\n      return state.map.project(lngLat);\n    },\n    [state.map]\n  );\n\n  const updateFilter = React.useCallback(\n    (layer, filterName, value) => {\n      if (!get(layer, [\"filters\", filterName], null)) return;\n\n      dispatch({ type: \"loading-start\", layerId: layer.id });\n\n      const prevValue = layer.filters[filterName].value;\n\n      layer.filters = {\n        ...layer.filters,\n        [filterName]: {\n          ...layer.filters[filterName],\n          prevValue,\n          value,\n        },\n      };\n\n      Promise.resolve(layer.onFilterChange(filterName, value, prevValue))\n        .then(() => layer.fetchData(falcor))\n        .then(() => layer.render(state.map, falcor))\n        .then(() => {\n          dispatch({ type: \"loading-stop\", layerId: layer.id });\n        });\n    },\n    [state.map, falcor]\n  );\n\n  const fetchData = React.useCallback(\n    (layer) => {\n      dispatch({ type: \"loading-start\", layerId: layer.id });\n\n      Promise.resolve(layer.fetchData(falcor))\n        .then(() => layer.render(state.map, falcor))\n        .then(() => {\n          dispatch({ type: \"loading-stop\", layerId: layer.id });\n        });\n    },\n    [state.map, falcor]\n  );\n\n  const updateLegend = React.useCallback(\n    (layer, update) => {\n      if (!get(layer, \"legend\", null)) return;\n\n      //console.log(\"update Legend\", layer.legend, update);\n      layer.legend = {\n        ...layer.legend,\n        ...update,\n      };\n      layer.render(state.map, falcor);\n\n      dispatch({ type: \"update-state\" });\n    },\n    [state.map, falcor]\n  );\n\n  const addDynamicLayer = React.useCallback((layer) => {\n    layer.isDynamic = true;\n\n    dispatch({\n      type: \"add-dynamic-layer\",\n      layer,\n    });\n  }, []);\n  const removeDynamicLayer = React.useCallback(\n    (layer) => {\n      layer._onRemove(state.map);\n\n      dispatch({\n        type: \"remove-dynamic-layer\",\n        layer,\n      });\n    },\n    [state.map]\n  );\n  const toggleVisibility = React.useCallback(\n    (layer) => {\n      layer.toggleVisibility(state.map);\n\n      dispatch({ type: \"update-state\" });\n    },\n    [state.map]\n  );\n  const addLayer = React.useCallback(\n    (layer) => {\n      layer\n        ._onAdd(state.map, falcor, updateHover)\n        .then(() => layer.render(state.map, falcor));\n\n      dispatch({\n        type: \"activate-layer\",\n        layer,\n      });\n    },\n    [state.map, falcor, updateHover /*, singleLayer*/]\n  );\n  const removeLayer = React.useCallback(\n    (layer) => {\n      layer._onRemove(state.map);\n\n      dispatch({\n        type: \"deactivate-layer\",\n        layerId: layer.id,\n      });\n    },\n    [state.map]\n  );\n  const setSidebarTab = React.useCallback((sidebarTabIndex) => {\n    dispatch({\n      type: \"switch-tab\",\n      sidebarTabIndex,\n    });\n  }, []);\n\n  const showModal = React.useCallback((layerId, modalKey) => {\n    dispatch({\n      type: \"show-modal\",\n      layerId,\n      modalKey,\n    });\n  }, []);\n  const closeModal = React.useCallback((layerId, modalKey) => {\n    dispatch({\n      type: \"close-modal\",\n      layerId,\n      modalKey,\n    });\n  }, []);\n  const bringModalToFront = React.useCallback((layerId, modalKey) => {\n    dispatch({\n      type: \"bring-modal-to-front\",\n      layerId,\n      modalKey,\n    });\n  }, []);\n\n  const removePinnedHoverComp = React.useCallback((id) => {\n    dispatch({\n      type: \"remove-pinned\",\n      id,\n    });\n  }, []);\n  const addPinnedHoverComp = React.useCallback(\n    ({ lngLat, hoverData }) => {\n      const marker = new mapboxgl.Marker().setLngLat(lngLat).addTo(state.map);\n      dispatch({\n        type: \"pin-hover-comp\",\n        marker,\n        lngLat,\n      });\n    },\n    [state.map]\n  );\n\n  const saveMapAsImage = React.useCallback(\n    (fileName = \"map.png\") => {\n      const canvas = state.map.getCanvas();\n      const a = document.createElement(\"a\");\n      a.download = fileName;\n      a.href = canvas.toDataURL();\n      a.click();\n    },\n    [state.map]\n  );\n\n  const setMapStyle = React.useCallback(\n    (styleIndex) => {\n      state.map.once(\"style.load\", (e) => {\n        state.activeLayers\n          .slice()\n          .reverse()\n          .reduce((promise, layer) => {\n            return promise.then(() =>\n              layer.onMapStyleChange(state.map, falcor, updateHover)\n            );\n          }, Promise.resolve());\n      });\n      state.activeLayers.forEach((layer) => {\n        layer._onRemove(state.map);\n      });\n      state.map.setStyle(state.mapStyles[styleIndex].style);\n      dispatch({\n        type: \"set-map-style\",\n        styleIndex,\n      });\n    },\n    [state.map, state.mapStyles, state.activeLayers, updateHover, falcor]\n  );\n\n  const MapActions = React.useMemo(\n    () => ({\n      toggleVisibility,\n      addLayer,\n      removeLayer,\n      addDynamicLayer,\n      removeDynamicLayer,\n      updateLegend,\n      setSidebarTab,\n      showModal,\n      closeModal,\n      updateFilter,\n      fetchData,\n      removePinnedHoverComp,\n      addPinnedHoverComp,\n      bringModalToFront,\n      projectLngLat,\n      saveMapAsImage,\n    }),\n    [\n      toggleVisibility,\n      addLayer,\n      removeLayer,\n      addDynamicLayer,\n      removeDynamicLayer,\n      updateLegend,\n      setSidebarTab,\n      fetchData,\n      saveMapAsImage,\n      showModal,\n      closeModal,\n      updateFilter,\n      bringModalToFront,\n      removePinnedHoverComp,\n      addPinnedHoverComp,\n      projectLngLat,\n    ]\n  );\n\n  const MapOptions = React.useRef({ ...DefaultMapOptions, ...mapOptions });\n\n  const id = React.useRef(props.id || getUniqueId());\n\n  // LOAD MAPBOX GL MAP\n  React.useEffect(() => {\n    if (!accessToken) return;\n\n    mapboxgl.accessToken = accessToken;\n\n    const regex = /^mapbox:\\/\\/styles\\//;\n\n    const { style, styles, ...Options } = MapOptions.current;\n\n    const mapStyles = styles.map((style) => ({\n      ...style,\n      imageUrl: getStaticImageUrl(style.style, { center: Options.center }),\n    }));\n    let styleIndex = 0;\n\n    if (regex.test(style)) {\n      const index = mapStyles.reduce((a, c, i) => {\n        return c.style === style ? i : a;\n      }, -1);\n      if (index === -1) {\n        mapStyles.unshift({\n          name: \"Unspecified Style\",\n          style,\n          imageUrl: getStaticImageUrl(style, Options),\n        });\n      } else {\n        styleIndex = index;\n      }\n    }\n\n    const map = new mapboxgl.Map({\n      container: id.current,\n      ...Options,\n      style: mapStyles[styleIndex].style,\n    });\n\n    if (navigationControl) {\n      map.addControl(new mapboxgl.NavigationControl(), navigationControl);\n    }\n\n    map.on(\"move\", (e) => {\n      dispatch({ type: \"update-state\", mapMoved: performance.now() });\n    });\n\n    map.once(\"load\", (e) => {\n      dispatch({ type: \"map-loaded\", map, mapStyles, styleIndex });\n    });\n\n    return () => map.remove();\n  }, [accessToken]);\n\n  // INITIALIZE LAYERS\n  React.useEffect(() => {\n    if (!state.map) return;\n\n    [...layers, ...state.dynamicLayers]\n      .filter(({ id }) => !state.initializedLayers.includes(id))\n      .reverse()\n      .reduce((promise, layer) => {\n        dispatch({ type: \"init-layer\", layer });\n\n        layer.dispatchUpdate = (layer, newState) => {\n          dispatch({\n            type: \"layer-update\",\n            newState,\n            layer,\n          });\n        };\n\n        for (const filterName in layer.filters) {\n          layer.filters[filterName].onChange = (v) =>\n            updateFilter(layer, filterName, v);\n        }\n\n        console.log('testing layers', layer.name)\n        layer.toolbar.forEach((tool) => {\n          if (typeof tool.action === \"function\") {\n            tool.actionFunc = tool.action.bind(layer);\n          }\n        });\n\n        layer.mapActions.forEach((action) => {\n          action.actionFunc = action.action.bind(layer);\n        });\n\n        dispatch({ type: \"loading-start\", layerId: layer.id });\n\n        return promise\n          .then(() => layer._init(state.map, falcor, MapActions))\n          .then(() => {\n            if (layer.setActive) {\n              return layer\n                .fetchData(falcor)\n                .then(() => layer._onAdd(state.map, falcor, updateHover))\n                .then(() => layer.render(state.map, falcor))\n                .then(() => dispatch({ type: \"activate-layer\", layer }));\n            }\n          })\n          .then(() => {\n            dispatch({ type: \"loading-stop\", layerId: layer.id });\n          });\n      }, Promise.resolve());\n  }, [\n    state.map,\n    state.dynamicLayers,\n    falcor,\n    layers,\n    MapActions,\n    updateFilter,\n    updateHover,\n    state.initializedLayers,\n  ]);\n\n  const pinHoverComp = React.useCallback(\n    ({ lngLat }) => {\n      const marker = new mapboxgl.Marker().setLngLat(lngLat).addTo(state.map);\n      dispatch({\n        type: \"pin-hover-comp\",\n        marker,\n        lngLat,\n      });\n    },\n    [state.map]\n  );\n\n  const hovering = Boolean(state.hoverData.data.size);\n\n  // APPLY CLICK LISTENER TO MAP TO ALLOW PINNED HOVER COMPS\n  React.useEffect(() => {\n    if (!hovering) return;\n\n    state.map.on(\"click\", pinHoverComp);\n\n    return () => state.map.off(\"click\", pinHoverComp);\n  }, [state.map, pinHoverComp, hovering]);\n\n  const loadingLayers = React.useMemo(() => {\n    return [...layers, ...state.dynamicLayers].filter((layer) =>\n      Boolean(state.layersLoading[layer.id])\n    );\n  }, [layers, state.dynamicLayers, state.layersLoading]);\n\n  const { HoverComps, ...hoverData } = React.useMemo(() => {\n    const HoverComps = [...state.hoverData.data.values()].sort(\n      (a, b) => a.sortOrder - b.sortOrder\n    );\n    return { ...state.hoverData, show: Boolean(HoverComps.length), HoverComps };\n  }, [state.hoverData]);\n\n  // DETERMINE ACTIVE AND INACTIVE LAYERS\n  const inactiveLayers = React.useMemo(() => {\n    return [...layers, ...state.dynamicLayers].filter((layer) => {\n      return (\n        !state.initializedLayers.includes(layer.id) ||\n        !state.activeLayers.includes(layer)\n      );\n    });\n  }, [\n    layers,\n    state.dynamicLayers,\n    state.initializedLayers,\n    state.activeLayers,\n  ]);\n\n  // SEND PROPS TO ACTIVE LAYERS\n  React.useEffect(() => {\n    state.activeLayers.forEach((layer) => {\n      const props = get(layerProps, layer.id, {});\n      layer.receiveProps(props, state.map, falcor, MapActions);\n    });\n  }, [state.map, falcor, state.activeLayers, layerProps, MapActions]);\n\n  // CHECK FOR LAYER STATE UPDATE\n  // React.useEffect(() => {\n  //   state.activeLayers.forEach((layer) => {\n  //     const layerState = get(state.layerStates, layer.id, {}),\n  //       prevLayerState = get(state.prevLayerStates, layer.id, {});\n  //     if (layerState !== prevLayerState) {\n  //       dispatch({\n  //         type: \"layer-updated\",\n  //         layer,\n  //       });\n  //       fetchData(layer);\n  //     }\n  //   });\n  // }, [state.layerStates, state.prevLayerStates, fetchData]);\n\n  const ref = React.useRef(null),\n    size = useSetSize(ref);\n\n  const Modals = React.useMemo(() => {\n    return state.modalData.reduce((a, md) => {\n      const { modal, layer } = state.activeLayers.reduce((a, c) => {\n        return c.id === md.layerId\n          ? { modal: get(c, [\"modals\", md.modalKey]), layer: c }\n          : a;\n      }, {});\n      if (modal) {\n        a.push({ ...modal, modalData: md, layer });\n      }\n      return a;\n    }, []);\n  }, [state.activeLayers, state.modalData]);\n\n  const AllMapActions = React.useMemo(() => {\n    return { ...MapActions, setMapStyle };\n  }, [MapActions, setMapStyle]);\n\n  const mapActions = React.useMemo(() => {\n    return state.activeLayers.reduce((a, c) => {\n      const actions = get(c, \"mapActions\", []).map((action) => ({\n        action,\n        layer: c,\n      }));\n      return [...a, ...actions];\n    }, []);\n  }, [state.activeLayers]);\n\n  return (\n    <div ref={ref} className=\"w-full h-full relative focus:outline-none\">\n      <div id={id.current} className=\"w-full h-full relative\" />\n\n      <Sidebar\n        {...DefaultSidebar}\n        {...sidebarProps}\n        togglePosition={\n          mapActions.length ? \"middle\" : sidebarProps.togglePosition\n        }\n        mapboxMap={state.map}\n        layerStates={state.layerStates}\n        sidebarTabIndex={state.sidebarTabIndex}\n        mapStyles={state.mapStyles}\n        styleIndex={state.styleIndex}\n        layersLoading={state.layersLoading}\n        inactiveLayers={inactiveLayers}\n        activeLayers={state.activeLayers}\n        loadingLayers={loadingLayers}\n        MapActions={AllMapActions}\n      >\n        <div className=\"absolute top-0\">\n          {mapActions.map(({ action, layer }, i) => (\n            <MapAction\n              key={`${layer.id}-${i}`}\n              layer={layer}\n              {...action}\n              MapActions={AllMapActions}\n              mapboxMap={state.map}\n              layerStates={state.layerStates}\n              layersLoading={state.layersLoading}\n              inactiveLayers={inactiveLayers}\n              activeLayers={state.activeLayers}\n              loadingLayers={loadingLayers}\n            />\n          ))}\n        </div>\n\n        <div className=\"absolute bottom-0\">\n          {loadingLayers.map((layer) => (\n            <LoadingLayer key={layer.id} layer={layer} />\n          ))}\n        </div>\n      </Sidebar>\n\n      <InfoBoxes\n        activeLayers={state.activeLayers}\n        layersLoading={state.layersLoading}\n        loadingLayers={loadingLayers}\n        inactiveLayers={inactiveLayers}\n        MapActions={AllMapActions}\n        mapboxMap={state.map}\n        layerStates={state.layerStates}\n      />\n\n      <div\n        className={`\n        absolute top-0 bottom-0 left-0 right-0 z-50\n        pointer-events-none overflow-hidden\n      `}\n      >\n        {Modals.map(({ modalData, ...data }) => (\n          <DraggableModal\n            key={`${modalData.layerId}-${modalData.modalKey}`}\n            {...data}\n            bounds={size}\n            modalData={modalData}\n            MapActions={AllMapActions}\n            mapboxMap={state.map}\n            layerStates={state.layerStates}\n            activeLayers={state.activeLayers}\n            layersLoading={state.layersLoading}\n            loadingLayers={loadingLayers}\n            inactiveLayers={inactiveLayers}\n          />\n        ))}\n\n        {state.pinnedHoverComps.map(\n          ({ HoverComps, data, id, ...hoverData }) => (\n            <PinnedHoverComp\n              {...hoverData}\n              {...size}\n              remove={removePinnedHoverComp}\n              project={projectLngLat}\n              key={id}\n              id={id}\n            >\n              {HoverComps.map(({ HoverComp, data, layer }, i) => (\n                <HoverComp\n                  key={layer.id}\n                  layer={layer}\n                  data={data}\n                  activeLayers={state.activeLayers}\n                  layersLoading={state.layersLoading}\n                  loadingLayers={loadingLayers}\n                  inactiveLayers={inactiveLayers}\n                  MapActions={AllMapActions}\n                  mapboxMap={state.map}\n                  layerStates={state.layerStates}\n                  pinned={true}\n                />\n              ))}\n            </PinnedHoverComp>\n          )\n        )}\n\n        {!Boolean(state.hoverData.data.size) ? null : (\n          <HoverCompContainer {...hoverData} {...size} project={projectLngLat}>\n            {HoverComps.map(({ HoverComp, data, layer }, i) => (\n              <HoverComp\n                key={layer.id}\n                layer={layer}\n                data={data}\n                activeLayers={state.activeLayers}\n                layersLoading={state.layersLoading}\n                loadingLayers={loadingLayers}\n                inactiveLayers={inactiveLayers}\n                MapActions={AllMapActions}\n                mapboxMap={state.map}\n                layerStates={state.layerStates}\n                pinned={false}\n              />\n            ))}\n          </HoverCompContainer>\n        )}\n      </div>\n    </div>\n  );\n};\nexport { AvlMap };\n","import React from \"react\"\n\nimport { useTheme } from \"@availabs/avl-components\"\n\nconst DefaultHoverComp = ({ data, layer }) => {\n  const theme = useTheme();\n\n  const groups = data.reduce((a, c, i) => {\n    if ((i === 0) || (c.length === 1)) {\n      a.push([]);\n    }\n    const ii = a.length - 1;\n    a[ii].push(c);\n    return a;\n  }, []);\n\n  return (\n    <div className={ `\n      ${ theme.menuBg } p-1 rounded relative z-20 grid grid-cols-1 gap-1\n    ` }>\n      { groups.map((rows, g) => (\n          <div key={ g } className={ `rounded relative px-1 ${ theme.bg }` }>\n            { rows.map((row, i) => (\n                <div key={ i } className=\"flex\">\n                  { row.map((d, ii) =>\n                      <div key={ ii }\n                        className={ `\n                          ${ ii === 0 ? \"flex-1 font-bold\" : \"flex-0\" }\n                          ${ row.length > 1 && ii === 0 ? \"mr-4\" : \"\" }\n                          ${ row.length === 1 && ii === 0 ? `border-b-2 text-lg ${ i > 0 ? \"mt-1\" : \"\" }` : \"\" }\n                        ` }>\n                        { d }\n                      </div>\n                    )\n                  }\n                </div>\n              ))\n            }\n          </div>\n        ))\n      }\n    </div>\n  )\n}\nexport default DefaultHoverComp;\n","import mapboxgl from \"mapbox-gl\"\n\nimport { hasValue } from \"@availabs/avl-components\"\n\nimport DefaultHoverComp from \"./components/DefaultHoverComp\"\n\nimport get from \"lodash.get\"\n\nlet id = -1;\nconst getLayerId = () => `avl-layer-${ ++id }`;\n\nconst DefaultCallback = () => null;\n\nconst DefaultOptions = {\n  setActive: true,\n  isDynamic: false,\n  filters: {},\n  modals: {},\n  mapActions: [],\n  sources: [],\n  layers: [],\n  isVisible: true,\n  toolbar: [\"toggle-visibility\"],\n  legend: null,\n  infoBoxes: [],\n  state: {},\n  mapboxMap: null,\n  onHover: false,\n  onClick: false,\n  onBoxSelect: false\n}\n\nclass LayerContainer {\n  constructor(options = {}) {\n\n    const Options = { ...DefaultOptions, ...options };\n    for (const key in Options) {\n      this[key] = Options[key];\n    }\n\n    this.id = getLayerId();\n\n    this.layerVisibility = {};\n\n    this.needsRender = this.setActive;\n\n    this.callbacks = [];\n    this.hoveredFeatures = new Map();\n\n    this.dispatchUpdate = () => {};\n\n    this.updateState = this.updateState.bind(this);\n  }\n  _init(mapboxMap, falcor) {\n    this.mapboxMap = mapboxMap;\n    this.falcor = falcor;\n    return this.init(mapboxMap, falcor);\n  }\n  init(mapboxMap, falcor) {\n    return Promise.resolve();\n  }\n\n// Don't attach any state directly to layers.\n// Use this function to update layer state.\n// This function causes an update in React through the map component.\n// The React update will cause rerenders in layer components.\n// Layer components, modals, infoboxes, etc., should pull from layer.state.\n  updateState(newState) {\n    if (typeof newState === \"function\") {\n      this.state = newState(this.state);\n    }\n    else {\n      this.state = { ...this.state, ...newState };\n    }\n    this.dispatchUpdate(this, this.state);\n  }\n\n  _onAdd(mapboxMap, falcor, updateHover) {\n    this.sources.forEach(({ id, source }) => {\n      if (mapboxMap && !mapboxMap.getSource(id)) {\n        mapboxMap.addSource(id, source);\n      }\n    });\n    this.layers.forEach(layer => {\n      if (mapboxMap && !mapboxMap.getLayer(layer.id)) {\n        if (layer.beneath && mapboxMap.getLayer(layer.beneath)) {\n          mapboxMap.addLayer(layer, layer.beneath);\n        }\n        else {\n          mapboxMap.addLayer(layer);\n        }\n        if (!this.isVisible) {\n          this._setVisibilityNone(mapboxMap, layer.id);\n        }\n        this.layerVisibility[layer.id] = mapboxMap.getLayoutProperty(layer.id, \"visibility\");\n      }\n    });\n    if (this.onHover) {\n      this.addHover(mapboxMap, updateHover);\n    }\n    if (this.onClick) {\n      this.addClick(mapboxMap);\n    }\n    if (this.onBoxSelect) {\n      this.state = {\n        ...this.state,\n        selection: []\n      };\n      this.addBoxSelect(mapboxMap);\n    }\n    return this.onAdd(mapboxMap, falcor);\n  }\n  onAdd(mapboxMap, falcor) {\n    return Promise.resolve();\n  }\n\n  addClick(mapboxMap) {\n    function click(layerId, { point, features, lngLat }) {\n      this.onClick.callback.call(this, layerId, features, lngLat, point);\n    };\n\n    this.onClick.layers.forEach(layerId => {\n      if (layerId === \"mapboxMap\") {\n        const callback = click.bind(this, layerId);\n        this.callbacks.push({\n          action: \"click\",\n          callback\n        });\n        mapboxMap.on(\"click\", callback);\n      }\n      else {\n        const callback = click.bind(this, layerId);\n        this.callbacks.push({\n          action: \"click\",\n          callback,\n          layerId\n        });\n        mapboxMap.on(\"click\", layerId, callback);\n      }\n    });\n  }\n\n  hoverLeave(mapboxMap, layerId) {\n    if (!this.hoveredFeatures.has(layerId)) return;\n\n    this.hoveredFeatures.get(layerId).forEach(value => {\n      mapboxMap.setFeatureState(value, { hover: false });\n    });\n    this.hoveredFeatures.delete(layerId);\n  }\n\n  addHover(mapboxMap, updateHover) {\n\n    const callback = get(this, [\"onHover\", \"callback\"], DefaultCallback).bind(this),\n      HoverComp = get(this, [\"onHover\", \"HoverComp\"], DefaultHoverComp),\n      property = get(this, [\"onHover\", \"property\"], null),\n      filterFunc = get(this, [\"onHover\", \"filterFunc\"], null),\n      pinnable = get(this, [\"onHover\", \"pinnable\"], true),\n      sortOrder = get(this, [\"onHover\", \"sortOrder\"], Infinity);\n\n    const mousemove = (layerId, { point, features, lngLat }) => {\n\n      const hoveredFeatures = this.hoveredFeatures.get(layerId) || new Map();\n      this.hoveredFeatures.set(layerId, new Map());\n\n      const hoverFeatures = features => {\n        features.forEach(({ id, source, sourceLayer }) => {\n          if ((id === undefined) || (id === null)) return;\n\n          if (hoveredFeatures.has(id)) {\n            this.hoveredFeatures.get(layerId).set(id, hoveredFeatures.get(id));\n            hoveredFeatures.delete(id);\n          }\n          else {\n            const value = { id, source, sourceLayer };\n            this.hoveredFeatures.get(layerId).set(id, value);\n            mapboxMap.setFeatureState(value, { hover: true });\n          }\n        });\n      }\n\n      const featuresMap = new Map();\n\n      if (property) {\n        const properties = features.reduce((a, c) => {\n          const prop = get(c, [\"properties\", property], null);\n          if (prop) {\n            a[prop] = true;\n          }\n          return a;\n        }, {});\n        mapboxMap.queryRenderedFeatures({\n            layers: [layerId],\n            filter: [\"in\", [\"get\", property], [\"literal\", Object.keys(properties)]]\n          })\n          .forEach(feature => {\n            featuresMap.set(feature.id, feature);\n          })\n      }\n      if (filterFunc) {\n        const filter = filterFunc.call(this, layerId, features, lngLat, point);\n        if (hasValue(filter)) {\n          mapboxMap.queryRenderedFeatures({ layers: [layerId], filter })\n            .forEach(feature => {\n              featuresMap.set(feature.id, feature);\n            });\n        }\n      }\n      features.forEach(feature => {\n        featuresMap.set(feature.id, feature);\n      });\n\n      hoverFeatures([...featuresMap.values()]);\n\n      hoveredFeatures.forEach(value => {\n        mapboxMap.setFeatureState(value, { hover: false });\n      })\n\n      const data = callback(layerId, features, lngLat, point);\n\n      if (hasValue(data)) {\n        updateHover({\n          pos: [point.x, point.y],\n          type: \"hover-layer-move\",\n          HoverComp,\n          layer: this,\n          pinnable,\n          sortOrder,\n          lngLat,\n          data\n        });\n      }\n    };\n\n    const mouseleave = (layerId, e) => {\n      this.hoverLeave(mapboxMap, layerId);\n      updateHover({\n        type: \"hover-layer-leave\",\n        layer: this\n      });\n    };\n\n    this.onHover.layers.forEach(layerId => {\n      let callback = mousemove.bind(this, layerId);\n      this.callbacks.push({\n        action: \"mousemove\",\n        callback,\n        layerId\n      });\n      mapboxMap.on(\"mousemove\", layerId, callback);\n\n      callback = mouseleave.bind(this, layerId);\n      this.callbacks.push({\n        action: \"mouseleave\",\n        callback,\n        layerId\n      });\n      mapboxMap.on(\"mouseleave\", layerId, callback);\n    }, this);\n  }\n\n  addBoxSelect(mapboxMap) {\n    let start, current, box;\n\n    const canvasContainer = mapboxMap.getCanvasContainer();\n\n    const getPos = e => {\n      const rect = canvasContainer.getBoundingClientRect();\n      return new mapboxgl.Point(\n        e.clientX - rect.left - canvasContainer.clientLeft,\n        e.clientY - rect.top - canvasContainer.clientTop\n      )\n    }\n\n    const mousemove = e => {\n      e.preventDefault();\n\n      current = getPos(e);\n\n      if (!box) {\n        const className = get(this, [\"onBoxSelect\", \"className\"], \"bg-black bg-opacity-50 border-2 border-black\");\n        box = document.createElement(\"div\");\n        box.className = \"absolute top-0 left-0 w-0 h-0 \" + className;\n        canvasContainer.appendChild(box);\n      }\n\n      var minX = Math.min(start.x, current.x),\n        maxX = Math.max(start.x, current.x),\n        minY = Math.min(start.y, current.y),\n        maxY = Math.max(start.y, current.y);\n\n        box.style.transform = `translate( ${ minX }px, ${ minY }px)`;\n        box.style.width = `${ maxX - minX }px`;\n        box.style.height = `${ maxY - minY }px`;\n    }\n    const mouseup = e => {\n      finish([start, getPos(e)]);\n    }\n    const keyup = e => {\n      if ((e.keyCode === 27) || (e.which === 27) || (e.code === 'Escape')) {\n        finish();\n      }\n    }\n\n    const finish = bbox => {\n      document.removeEventListener('mousemove', mousemove);\n      document.removeEventListener('mouseup', mouseup);\n      document.removeEventListener('keydown', keyup);\n\n      mapboxMap.dragPan.enable();\n\n      if (box) {\n        box.parentNode.removeChild(box);\n        box = null;\n      }\n\n      if (bbox) {\n        const queriedFeatures = mapboxMap.queryRenderedFeatures(bbox, {\n          layers: get(this, [\"onBoxSelect\", \"layers\"]),\n          filter: get(this, [\"onBoxSelect\", \"filter\"])\n        })\n\n        const featureMap = queriedFeatures.reduce((a, c) => {\n          a[c.id] = c;\n          return a;\n        }, {});\n\n        const features = Object.values(featureMap);\n\n        const values = [];\n\n        features.forEach(feature => {\n          values.push({\n            id: feature.id,\n            source: feature.source,\n            sourceLayer: feature.sourceLayer\n          });\n        });\n\n        get(this, [\"onBoxSelect\", \"selectedValues\"], [])\n          .forEach(value => {\n            mapboxMap.setFeatureState(value, { select: false });\n          });\n\n        this.onBoxSelect.selectedValues = values;\n\n        values.forEach(value => {\n          mapboxMap.setFeatureState(value, { select: true });\n        });\n\n        this.updateState({ selection: features });\n      }\n    }\n\n    const mousedown = e => {\n      if (!(e.shiftKey && e.button === 0)) return;\n\n      document.addEventListener('mousemove', mousemove);\n      document.addEventListener('mouseup', mouseup);\n      document.addEventListener('keydown', keyup);\n\n      mapboxMap.dragPan.disable();\n\n      start = getPos(e);\n    }\n\n    this.callbacks.push({\n      action: \"mousemove\",\n      callback: mousemove,\n      element: canvasContainer\n    });\n    canvasContainer.addEventListener(\"mousedown\", mousedown, true);\n\n    mapboxMap.boxZoom.disable();\n\n    this.onBoxSelect.selectedValues = [];\n  }\n\n  _onRemove(mapboxMap) {\n    while (this.callbacks.length) {\n      const { action, layerId, callback, element } = this.callbacks.pop();\n      if (element) {\n        element.removeEventListener(action, callback);\n      }\n      else if (layerId) {\n        mapboxMap.off(action, layerId, callback);\n      }\n      else {\n        mapboxMap.off(action, callback);\n      }\n    }\n    this.layers.forEach(({ id }) => {\n      mapboxMap.removeLayer(id);\n    });\n    this.onRemove(mapboxMap);\n  }\n  onRemove(mapboxMap) {\n\n  }\n\n  fetchData(falcor) {\n    return Promise.resolve();\n  }\n  render(mapboxMap, falcor) {\n\n  }\n\n  receiveProps(props, mapboxMap, falcor, MapActions) {\n\n  }\n\n  toggleVisibility(mapboxMap) {\n    this.isVisible = !this.isVisible;\n    this.layers.forEach(({ id }) => {\n      if (this.isVisible) {\n        this._setVisibilityVisible(mapboxMap, id);\n      }\n      else {\n        this._setVisibilityNone(mapboxMap, id);\n      }\n    });\n  }\n  _setVisibilityVisible(mapboxMap, layerId) {\n    if (this.layerVisibility[layerId] !== \"none\") {\n      mapboxMap.setLayoutProperty(layerId, \"visibility\", \"visible\");\n    }\n  }\n  _setVisibilityNone(mapboxMap, layerId) {\n    const visibility = mapboxMap.getLayoutProperty(layerId, \"visibility\");\n    if (visibility === \"none\") {\n      this.layerVisibility[layerId] = \"none\";\n    }\n    else {\n      mapboxMap.setLayoutProperty(layerId, \"visibility\", \"none\");\n    }\n  }\n  setLayerVisibility(mapboxMap, layer, visibility) {\n    const isVisible = this.isVisible && (visibility === \"visible\");\n    this.layerVisibility[layer.id] = visibility;\n\n    visibility = isVisible ? \"visible\" : \"none\";\n    mapboxMap.setLayoutProperty(layer.id, \"visibility\", visibility);\n  }\n\n  onFilterChange(filterName, newValue, prevValue) {\n\n  }\n\n  onMapStyleChange(mapboxMap, falcor, updateHover) {\n    this._onAdd(mapboxMap, falcor, updateHover)\n      .then(() => this.render(mapboxMap, falcor))\n  }\n}\nexport { LayerContainer };\n","export const HOST = 'https://tig.nymtc.org/'\n","const cache = new Map();\nconst fetcher = url => {\n    if (cache.has(url)) {\n        return Promise.resolve(cache.get(url));\n    }\n    return fetch(url)\n        .then(res => {\n            if (!res.ok) {\n                throw new Error(\"Network error\");\n            }\n            return res.json();\n        })\n        .then(json => {\n            cache.set(url, json);\n            return json;\n        })\n        .catch(e => {\n            console.log('failed to fetch')\n        })\n}\nexport default fetcher;\n","import {HOST} from './layerHost'\nimport {LayerContainer} from \"components/avl-map/src\"\nimport tip_ids from '../config/tip_ids.json'\nimport tip_mpos from '../config/tip_mpos.json'\nimport fetcher from \"../wrappers/fetcher\";\nvar parse = require('wellknown');\n\nclass TestTipLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n\n    }\n\n    setActive = !!this.viewId\n    name = 'TIP Mappable Projects'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value:'131', name:'2014-2018 TIP Mappable Projects'},\n                {value:'64', name:'2017-2021 TIP Mappable Projects'},\n                {value:'187',name:'2020-2024 TIP Mappable Projects'}\n            ],\n            value: this.viewId || '131',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        tip_id :{\n            name: 'Tip ID',\n            type:'dropdown',\n            domain: tip_ids,\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        project_type: {\n            name: 'Project Type',\n            type: 'dropdown',\n            domain: [\n                {name:'Select All',value:\"Select All\"},\n                {name: 'Study', value: '1'},\n                {name: 'Highway', value: '2'},\n                {name: 'Ferry', value: '3'},\n                {name: 'Transit', value: '4'},\n                {name: 'Rail', value: '5'},\n                {name: 'Truck', value: '6'},\n                {name: 'Pedestrian', value: '7'},\n                {name: 'Bike', value: '8'},\n                {name: 'Bus', value: '10'},\n                {name: 'ITS', value: '9'},\n                {name: 'Parking', value: '12'}\n            ],\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        mpo_name: {\n            name: 'MPO Name',\n            type:'dropdown',\n            domain: tip_mpos,\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        agency:{\n            name:'Agency',\n            type:'dropdown',\n            domain:['Select All'],\n            value:'Select All'\n        },\n\n    }\n    legend = {\n        type: \"ordinal\",\n        domain: [],\n        range: [],\n        height: 5,\n        width: 350,\n        direction: \"vertical\",\n        show:true,\n        Title:\"\"\n    }\n    onHover = {\n        layers: [\"tip_lines\", \"tip_symbols\", 'tip-rail', 'tip-rail-metro', 'tip-bus', 'tip-bicycle-share', 'tip-ferry', 'tip-au-national-highway-3', 'tip-pitch-11', 'tip-college-11','tip-parking-11'],\n        callback: (layerId, features, lngLat) => {\n\n            const feature = features.reduce((a, c) => {\n                a = this.data.data.reduce((acc, curr) => {\n                    if (curr['tip_id'] === c['properties']['tip_id']\n                        && curr['ptype'] === c['properties']['project_type']\n                        && curr['sponsor'] === c['properties']['sponsor']\n                        && curr['description'] === c['properties']['description']\n                    ) {\n                        acc = curr\n                    }\n                    return acc\n                },)\n                return a\n            }, {})\n\n\n            return [\n                ['TIP ID:', feature['tip_id']],\n                ['County:',feature['county']],\n                ['MPO:',feature['mpo']],\n                ['Sponsor:', feature['sponsor']],\n                ['Project Type:', feature['ptype']],\n                ['Cost:', feature['estimated_cost']],\n                ['Description:', feature['description'].toLowerCase()]\n            ]\n\n\n        }\n    }\n    sources = [\n        {\n            id: 'tip_symbols',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        },\n        {\n            id: 'tip_lines',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        },\n    ]\n\n    init(map){\n        const url = `${HOST}/views/${this.filters.dataset.value}/data_overlay`\n        const cost_lower = ''\n        const cost_upper = ''\n        const params = `?utf8=%E2%9C%93&tip_id=${this.filters.tip_id.value === 'Select All'? '':this.filters.tip_id.value}&ptype=${this.filters.project_type.value === 'Select All'? '':this.filters.project_type.value}&mpo=${this.filters.mpo_name.value === 'Select All'? '':this.filters.mpo_name.value}&sponsor=${this.filters.agency.value === 'Select All'? '':this.filters.agency.value}&cost_lower=${cost_lower}&cost_upper=${cost_upper}&commit=Filter`\n        // return fetcher(url + params)\n        //     .then(response => {\n        //         this.data = response\n        //         this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n        //         this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n        //         this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n        //             if(c.value === this.filters.dataset.value){\n        //                 a = c.name\n        //             }\n        //             return a\n        //         },'')}\n        //         TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n        //         Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n        //             if(c.value === this.filters.project_type.value){\n        //                 a = c.name === 'Select All' ? 'All': c.name\n        //             }\n        //             return a\n        //         },'')},\n        //         MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n        //             if(c.value === this.filters.mpo_name.value){\n        //                 a = c.name === 'Select All' ? 'All': c.name\n        //             }\n        //             return a\n        //         },'')},\n        //        Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n        //         `\n        //     })\n    }\n    fetchData() {\n        const url = `${HOST}/views/${this.filters.dataset.value}/data_overlay`\n        const cost_lower = ''\n        const cost_upper = ''\n        const params = `?utf8=%E2%9C%93&tip_id=${this.filters.tip_id.value === 'Select All'? '':this.filters.tip_id.value}&ptype=${this.filters.project_type.value === 'Select All'? '':this.filters.project_type.value}&mpo=${this.filters.mpo_name.value === 'Select All'? '':this.filters.mpo_name.value}&sponsor=${this.filters.agency.value === 'Select All'? '':this.filters.agency.value}&cost_lower=${cost_lower}&cost_upper=${cost_upper}&commit=Filter`\n\n        return fetcher(url + params)\n            .then(response => {\n                this.data = response\n                this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n                this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n                this.render()\n            })\n    }\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"dataset\" : {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            case \"tip_id\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${value === 'Select All'? 'All':value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            case \"project_type\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            case \"mpo_name\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            case \"agency\": {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n    onRemove(mapboxMap) {\n\n        mapboxMap.removeLayer('tip-rail')\n        mapboxMap.removeLayer('tip-rail-metro')\n        mapboxMap.removeLayer('tip-bus')\n        mapboxMap.removeLayer('tip-bicycle-share')\n        mapboxMap.removeLayer('tip-ferry')\n        mapboxMap.removeLayer('tip-au-national-highway-3')\n        mapboxMap.removeLayer('tip-pitch-11')\n        mapboxMap.removeLayer('tip-college-11')\n        mapboxMap.removeLayer('tip-parking-11')\n        mapboxMap.removeLayer('tip_lines')\n        mapboxMap.removeSource('tip_symbols')\n        mapboxMap.removeSource('tip_lines')\n    }\n    render(map){\n        if(!this.data) {\n\n            return this.fetchData()\n        }\n        let geojson = {\n            type: \"FeatureCollection\",\n            features: []\n        }\n\n        const symbols_map = {\n            'Rail': 'rail',\n            'Transit': 'rail-metro',\n            'Bus': 'bus',\n            'Bike': 'bicycle-share',\n            'Ferry': 'ferry',\n            'Highway': 'au-national-highway-3',\n            'Pedestrian': 'pitch-11',\n            'Study': 'college-11',\n            'Parking':'parking-11'\n\n        }\n        let colors = this.data.symbologies[0].color_scheme.reduce( (out,curr) => {\n            out[curr.value] = curr.color\n            return out;\n        }, {})\n\n         geojson.features = this.data.data.map((d,i) => {\n            return {\n                \"type\": \"Feature\",\n                id: i,\n                \"properties\": {\n                    county: d.county,\n                    description: d.description,\n                    estimated_cost : d.cost,\n                    mpo: d.mpo,\n                    project_type: d.ptype,\n                    color: colors[d.ptype],\n                    sponsor: d.sponsor,\n                    tip_id: d.tip_id,\n                    icon: symbols_map[d['ptype']]\n                },\n                \"geometry\": parse(d['geography'])\n            }\n        })\n\n        const symbols_geojson =\n            {\n                type: 'FeatureCollection',\n                features: geojson.features.filter(d => {\n                    if (d['geometry'] && d['geometry'].type === 'Point') {\n                        return d\n                    }\n                    return false\n                })\n            }\n\n        const line_geojson = {\n            type: 'FeatureCollection',\n            features: geojson.features.filter(d => {\n                if (d['geometry'] && d['geometry'].type === 'MultiLineString') {\n                    return d\n                }\n                return false\n            })\n        }\n\n        if (this.mapboxMap.getSource('tip_symbols')) {\n            this.mapboxMap.getSource('tip_symbols').setData(symbols_geojson)\n        }\n\n        if(this.mapboxMap.getSource('tip_lines')){\n            this.mapboxMap.getSource('tip_lines').setData(line_geojson)\n        }\n\n        if(!this.mapboxMap.getLayer('tip_lines')){\n            this.mapboxMap.addLayer({\n                'id': 'tip_lines',\n                'type': 'line',\n                source: 'tip_lines',\n                paint: {\n                    'line-width': 3,\n                    'line-color': {\n                        type:'identity',\n                        property:'color'\n                    },\n                }\n            })\n        }\n\n\n        geojson.features.forEach(feature => {\n            if (feature.properties.icon) {\n                let symbol = feature.properties.icon\n                let layerID = 'tip-' + symbol;\n                if (!this.mapboxMap.getLayer(layerID)) {\n                    this.mapboxMap.addLayer({\n                        'id': layerID,\n                        'type': 'symbol',\n                        'source': 'tip_symbols',\n                        'layout': {\n                            'icon-image': symbol,\n                            'icon-allow-overlap': true\n                        },\n                        'filter': ['==', 'icon', symbol]\n                    })\n\n                }\n            }\n        })\n\n\n    }\n}\n\n\nexport const TestTipLayerFactory = (options = {}) => new TestTipLayer(options);\n\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport counties from '../config/counties.json'\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\n\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2040CountyLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n        //this.id = id\n    }\n\n    \n    name = '2040 SED County Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '49', name: '2000-2040 Employment Labor Force'},\n                {value: '46', name: '2000-2040 Group Quarters Population'},\n                {value: '45', name: '2000-2040 Household Population'},\n                {value: '47', name: '2000-2040 Households'},\n                {value: '48', name: '2000-2040 Household Size'},\n                {value: '50', name: '2000-2040 Labor Force'},\n                {value: '43', name: '2000-2040 Payroll Employment - QCEW Based'},\n                {value: '44', name: '2000-2040 Proprietors Employment'},\n                {value: '42', name: '2000-2040 Total Employment'},\n                {value: '41', name: '2000-2040 Total Population'}\n            ],\n            value: this.viewId || '49',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [2000,2005,2010,2015,2020,2025,2030,2035,2040],\n            value: 2000,\n            multi: false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n\n    }\n\n    onHover = {\n        layers: [\"Counties\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','geoid'],'')\n                return a\n            },'')\n            const graph = counties.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')],\n                        [\"Year:\", this.filters.year.value],\n                        ['County:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.year.value]]\n                    )\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"counties\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.a8ndgl5n\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"Counties\",\n            filter: false,\n            \"source-layer\": \"counties\",\n            source: \"counties\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n\n        // return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n        //     .then(response => {\n        //         this.data = response\n        //         this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n        //             if (c.value === this.filters.dataset.value){\n        //                 a = c.name \n        //             }\n        //             return a \n        //         },'')}-${this.filters.year.value}`\n        //         this.data_counties = this.data.data.map(item =>{\n        //             return counties.reduce((a,c) =>{\n        //                 if(item.area === c.name){\n        //                     a['name'] = c.name\n        //                     a['geoid'] = c.geoid\n        //                 }\n        //                 return a\n        //             },{})\n        //         })\n        //         this.legend.domain = this.data.data.reduce((a,c) =>{\n        //             a.push(c[this.filters.year.value])\n        //             return a\n        //         },[])\n\n        //     })\n    }\n\n\n\n    fetchData() {\n\n        return new Promise(resolve =>{\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n            }\n\n\n        );\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_counties.length) {\n            map.setFilter(\"Counties\", [\"in\", [\"get\", \"geoid\"], [\"literal\", this.data_counties.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"Counties\", false);\n        }\n\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_counties.forEach(data_county =>{\n                if(curr.area === data_county.name){\n                    acc.push({\n                        id: data_county.geoid,\n                        value: curr[this.filters.year.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                if(c.value !== 0){\n                    a[c.id] = colorScale(c.value)\n                }\n                return a\n            },{});\n\n        map.setPaintProperty(\"Counties\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"geoid\"], [\"literal\", colors]]\n        ])\n    }\n\n\n}\n\nexport const SED2040CountyLevelForecastLayerFactory = (options = {}) => new SED2040CountyLevelForecastLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2040TazLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n    setActive = !!this.viewId\n    name = '2040 SED TAZ Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '37', name: '2010-2040 Earnings (Held constant in $ 2010)'},\n                {value: '34', name: '2010-2040 Employed Labor Force'},\n                {value: '30', name: '2010-2040 Group Quarters Homeless Population'},\n                {value: '29', name: '2010-2040 Group Quarters Institutional Population'},\n                {value: '31', name: '2010-2040 Group Quarters Other Population'},\n                {value: '28', name: '2010-2040 Group Quarters Population'},\n                {value: '26', name: '2010-2040 Household Income (Held constant in $ 2010)'},\n                {value: '27', name: '2010-2040 Household Population '},\n                {value: '32', name: '2010-2040 Households'},\n                {value: '33', name: '2010-2040 Household Size'},\n                {value: '36',name: '2010-2040 Office Employment'},\n                {value: '35',name: '2010-2040 Retail Employment'},\n                {value: '13',name: '2010-2040 School Enrollment'},\n                {value: '25',name: '2010-2040 Total Employment'},\n                {value: '24',name: '2010-2040 Total Population'},\n                {value: '38',name: '2010-2040 University Enrollment'}\n            ],\n            value: this.viewId || '37',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'select',\n            domain: [2010,2015,2020,2025,2030,2035,2040],\n            value: 2010,\n            multi: false\n        }\n    }\n    onHover = {\n        layers: [\"nymtc_taz_2005\"],\n        callback: (layerId, features, lngLat) => {\n\n            const area_id = features.reduce((a,c) => {\n                a = get(c,['properties','name'],'')\n                return a\n            },'')\n\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === area_id){\n\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')],\n                        [\"Year:\", this.filters.year.value],\n                        [\"Taz id:\",c.area],[\"Value:\",c[this.filters.year.value]]\n                    )\n                }\n\n                return a\n            },[])\n        }\n    }\n    sources = [\n        {\n            id: \"nymtc_taz_2005-93y4h2\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.dgujwhsd\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"nymtc_taz_2005\",\n            filter: false,\n            \"source-layer\": \"nymtc_taz_2005\",\n            source: \"nymtc_taz_2005-93y4h2\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        domain: [],\n        range: getColorRange(5, \"YlOrRd\", true),\n        show: true,\n        Title: \"\",\n        format: \",d\",\n\n    }\n\n\n    init(map){\n\n        // return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n        //     .then(response => {\n        //         this.data = response\n        //         this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n        //             if (c.value === this.filters.dataset.value){\n        //                 a = c.name\n        //             }\n        //             return a\n        //         },'')}-${this.filters.year.value}`\n        //         this.taz_ids = this.data.data.map(d => d.area).filter(d => d)\n        //     })\n    }\n\n    onFilterChange(filterName,value,preValue){\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                // do nothing\n            }\n        }\n\n    }\n\n    fetchData() {\n\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n        );\n    }\n\n    getColorScale(data) {\n        const { type, range, domain } = this.legend;\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                // do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.taz_ids.length) {\n            map.setFilter(\"nymtc_taz_2005\", [\"in\", [\"get\", \"name\"], [\"literal\", this.taz_ids]]);\n        }\n        else {\n            map.setFilter(\"nymtc_taz_2005\", false);\n        }\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            acc.push({\n                'id': curr['area'] || '',\n                'value': curr[this.filters.year.value]\n            })\n            return acc\n        },[])\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                a[c.id] = colorScale(c.value)\n                return a\n            },{})\n\n\n        map.setPaintProperty(\"nymtc_taz_2005\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"name\"], [\"literal\", colors]]\n        ])\n\n    }\n}\n\nexport const SED2040TazLevelForecastLayerFactory = (options = {}) => new SED2040TazLevelForecastLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport counties from '../config/counties.json'\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2050CountyLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        //console.log('id in 2040 ',id)\n        this.viewId = props.viewId\n        //this.id = id\n    }\n\n    setActive = !!this.viewId\n    name = '2050 SED County Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '113', name: '2010-2050 Employed Labor Force'},\n                {value: '110', name: '2010-2050 Group Quarters Population'},\n                {value: '109', name: '2010-2050 Household Population'},\n                {value: '111', name: '2010-2050 Households'},\n                {value: '112', name: '2010-2050 Household Size'},\n                {value: '114', name: '2010-2050 Labor Force'},\n                {value: '107', name: '2010-2050 Payroll Employment'},\n                {value: '108', name: '2010-2050 Proprietors Employment'},\n                {value: '106', name: '2010-2050 Total Employment'},\n                {value: '105', name: '2010-2050 Total Population'}\n            ],\n            value: this.viewId || '113',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [2010,2012,2015,2020,2025,2030,2035,2040,2045,2050],\n            value: 2010,\n            multi: false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n\n    }\n\n    onHover = {\n        layers: [\"Counties\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','geoid'],'')\n                return a\n            },'')\n            const graph = counties.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')],\n                        [\"Year:\", this.filters.year.value],\n                        ['County:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.year.value]])\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"counties\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.a8ndgl5n\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"Counties\",\n            filter: false,\n            \"source-layer\": \"counties\",\n            source: \"counties\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n        // return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n        //     .then(response => {\n        //         this.data = response\n        //         this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n        //             if (c.value === this.filters.dataset.value){\n        //                 a = c.name\n        //             }\n        //             return a\n        //         },'')}-${this.filters.year.value}`\n        //         this.data_counties = this.data.data.map(item =>{\n        //             return counties.reduce((a,c) =>{\n        //                 if(item.area === c.name){\n        //                     a['name'] = c.name\n        //                     a['geoid'] = c.geoid\n        //                 }\n        //                 return a\n        //             },{})\n        //         })\n        //         this.legend.domain = this.data.data.reduce((a,c) =>{\n        //             a.push(c[this.filters.year.value])\n        //             return a\n        //         },[])\n\n        //     })\n    }\n\n    fetchData() {\n\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n        );\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_counties.length) {\n            map.setFilter(\"Counties\", [\"in\", [\"get\", \"geoid\"], [\"literal\", this.data_counties.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"Counties\", false);\n        }\n\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_counties.forEach(data_county =>{\n                if(curr.area === data_county.name){\n                    acc.push({\n                        id: data_county.geoid,\n                        value: curr[this.filters.year.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                if(c.value !== 0){\n                    a[c.id] = colorScale(c.value)\n                }\n                return a\n            },{});\n\n        map.setPaintProperty(\"Counties\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"geoid\"], [\"literal\", colors]]\n        ])\n    }\n\n\n}\n\nexport const SED2050CountyLevelForecastLayerFactory = (options = {}) => new SED2050CountyLevelForecastLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport counties from '../config/counties.json'\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\n\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2055CountyLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n    setActive = !!this.viewId\n    name = '2055 SED County Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '207', name: '2010-2055 Employed Labor Force'},\n                {value: '204', name: '2010-2055 Group Quarters Population'},\n                {value: '203', name: '2010-2055 Household Population'},\n                {value: '205', name: '2010-2055 Households'},\n                {value: '206', name: '2010-2055 Household Size'},\n                {value: '208', name: '2010-2055 Labor Force'},\n                {value: '201', name: '2010-2055 Payroll Employment'},\n                {value: '202', name: '2010-2055 Proprietors Employment'},\n                {value: '200', name: '2010-2055 Total Employment'},\n                {value: '199', name: '2010-2055 Total Population'}\n            ],\n            value: this.viewId || '207',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [2010,2015,2017,2020,2025,2030,2035,2040,2045,2050,2055],\n            value: 2010,\n            multi: false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n\n    }\n\n    onHover = {\n        layers: [\"Counties\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','geoid'],'')\n                return a\n            },'')\n            const graph = counties.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },''),],\n                        [\"Year:\", this.filters.year.value],\n                        ['County:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.year.value]])\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"counties\",\n            source: {\n                type: \"vector\",\n                url: \"https://tigtest2.nymtc.org/tiles/data/nymtc_2020_taz\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"Counties\",\n            filter: false,\n            \"source-layer\": \"counties\",\n            source: \"counties\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n        // return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n        //     .then(response => {\n        //         this.data = response\n        //         this.legend.Title =`${this.filters.dataset.domain.reduce((a,c) =>{\n        //             if (c.value === this.filters.dataset.value){\n        //                 a = c.name\n        //             }\n        //             return a\n        //         },'')}-${this.filters.year.value}`\n        //         this.data_counties = this.data.data.map(item =>{\n        //             return counties.reduce((a,c) =>{\n        //                 if(item.area === c.name){\n        //                     a['name'] = c.name\n        //                     a['geoid'] = c.geoid\n        //                 }\n        //                 return a\n        //             },{})\n        //         })\n        //         this.legend.domain = this.data.data.reduce((a,c) =>{\n        //             a.push(c[this.filters.year.value])\n        //             return a\n        //         },[])\n\n        //     })\n    }\n\n    fetchData() {\n\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n        );\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_counties.length) {\n            map.setFilter(\"Counties\", [\"in\", [\"get\", \"geoid\"], [\"literal\", this.data_counties.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"Counties\", false);\n        }\n\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_counties.forEach(data_county =>{\n                if(curr.area === data_county.name){\n                    acc.push({\n                        id: data_county.geoid,\n                        value: curr[this.filters.year.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                if(c.value !== 0){\n                    a[c.id] = colorScale(c.value)\n                }\n                return a\n            },{});\n\n        map.setPaintProperty(\"Counties\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"geoid\"], [\"literal\", colors]]\n        ])\n    }\n\n\n}\n\nexport const SED2055CountyLevelForecastLayerFactory = (options = {}) => new SED2055CountyLevelForecastLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\n\n\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2055TazLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n    setActive = !!this.viewId\n    name = '2055 SED TAZ Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '169', name: '2010-2055 Earnings in $'},\n                {value: '166', name: '2010-2055 Employed Labor Force'},\n                {value: '162', name: '2010-2055 Group Quarters Homeless Population'},\n                {value: '161', name: '2010-2055 Group Quarters Institutional Population'},\n                {value: '163', name: '2010-2055 Group Quarters Other Population'},\n                {value: '160', name: '2010-2055 Group Quarters Population'},\n                {value: '158', name: '2010-2055 Household Income in $'},\n                {value: '159', name: '2010-2055 Household Population '},\n                {value: '164', name: '2010-2055 Households'},\n                {value: '165', name: '2010-2055 Household Size'},\n                {value: '168',name: '2010-2055 Office Employment'},\n                {value: '167',name: '2010-2055 Retail Employment'},\n                {value: '155',name: '2010-2055 School Enrollment'},\n                {value: '157',name: '2010-2055 Total Employment'},\n                {value: '156',name: '2010-2055 Total Population'},\n                {value: '170',name: '2010-2055 University Enrollment'}\n            ],\n            value: this.viewId || '169',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'select',\n            domain: [2010,2015,2020,2025,2030,2035,2040,2045,2050,2055],\n            value: 2010,\n            multi: false\n        }\n    }\n    onHover = {\n        layers: [\"nymtc_taz_2005\"],\n        callback: (layerId, features, lngLat) => {\n\n            const area_id = features.reduce((a,c) => {\n                a = get(c,['properties','name'],'')\n                return a\n            },'')\n\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === area_id){\n\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')],\n                        [\"Year:\", this.filters.year.value],\n                        [\"Taz id:\",c.area],[\"Value:\",c[this.filters.year.value]]\n                    )\n                }\n\n                return a\n            },[])\n        }\n    }\n    sources = [\n        {\n            id: \"nymtc_taz_2005-93y4h2\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.dgujwhsd\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"nymtc_taz_2005\",\n            filter: false,\n            \"source-layer\": \"nymtc_taz_2005\",\n            source: \"nymtc_taz_2005-93y4h2\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        domain: [],\n        range: getColorRange(5, \"YlOrRd\", true),\n        show: true,\n        Title: \"\",\n        format: \",d\",\n\n    }\n\n\n    init(map){\n\n        // return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n        //     .then(response => {\n        //         this.data = response\n        //         this.legend.Title =`${this.filters.dataset.domain.reduce((a,c) =>{\n        //             if (c.value === this.filters.dataset.value){\n        //                 a = c.name\n        //             }\n        //             return a\n        //         },'')}-${this.filters.year.value}`\n        //         this.taz_ids = this.data.data.map(d => d.area).filter(d => d)\n        //     })\n    }\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                // do nothing\n            }\n        }\n\n    }\n\n    fetchData() {\n\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n        );\n    }\n\n    getColorScale(data) {\n        const { type, range, domain } = this.legend;\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                // do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.taz_ids.length) {\n            map.setFilter(\"nymtc_taz_2005\", [\"in\", [\"get\", \"name\"], [\"literal\", this.taz_ids]]);\n        }\n        else {\n            map.setFilter(\"nymtc_taz_2005\", false);\n        }\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            acc.push({\n                'id': curr['area'] || '',\n                'value': curr[this.filters.year.value]\n            })\n            return acc\n        },[])\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                a[c.id] = colorScale(c.value)\n                return a\n            },{})\n\n\n        map.setPaintProperty(\"nymtc_taz_2005\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"name\"], [\"literal\", colors]]\n        ])\n\n    }\n}\n\nexport const SED2055TazLevelForecastLayerFactory = (options = {}) => new SED2055TazLevelForecastLayer(options);\n","export const acsCensusCategoryMappings = [\n    {value:'22',name:'Absolute and Relative Minority Population data',year:2013},\n    {value:'132',name:'Absolute and Relative Minority Population data',year:2014},\n    {value:'134',name:'Absolute and Relative Minority Population data',year:2015},\n    {value:'142',name:'Absolute and Relative Minority Population data',year:2016},\n    {value:'146',name:'Absolute and Relative Minority Population data',year:2017},\n    {value:'145',name:'Absolute and Relative Minority Population data',year:2018},\n    {value:'18',name: 'Absolute and Relative Population Below Poverty',year:2013},\n    {value:'128',name: 'Absolute and Relative Population Below Poverty',year:2014},\n    {value:'133',name: 'Absolute and Relative Population Below Poverty',year:2015},\n    {value:'143',name: 'Absolute and Relative Population Below Poverty',year:2016},\n    {value:'147',name: 'Absolute and Relative Population Below Poverty',year:2017},\n    {value:'144',name: 'Absolute and Relative Population Below Poverty',year:2018},\n]\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport tracts from '../config/tracts.json'\nimport {getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\nimport {acsCensusCategoryMappings} from \"../config/acsCensusCategoryMappings\";\nimport {scaleLinear, scaleOrdinal, scaleQuantile, scaleQuantize, scaleThreshold} from \"d3-scale\"\nimport {extent} from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass ACSCensusLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.categoryName = props.name\n        this.viewid = props.viewId\n\n    }\n\n    setActive = !!this.viewId\n    name = 'ACS Census Layer'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                'Absolute and Relative Minority Population data',\n                'Absolute and Relative Population Below Poverty'],\n            value:this.categoryName || 'Absolute and Relative Minority Population data',\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [\n                2013,2014,2015,2016,2017,2018\n            ],\n            value: 2013,\n            multi: false\n        },\n        column:{\n            name: 'Column',\n            type: 'dropdown',\n            domain: [\n                {name: 'Minority Population',value:'value'},\n                {name: 'Percentage Minority', value:'percent'}\n            ],\n            value: 'value',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n        format: ',d',\n\n    }\n\n    onHover = {\n        layers: [\"tracts\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','GEOID'],'')\n                return a\n            },'')\n            const graph = tracts.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [`${this.filters.dataset.value || this.categoryName}${this.filters.column.value === 'percent' ? 'in %': ''}`],\n                        [\"Year:\", this.filters.year.value],\n                        ['Tract:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.column.value]])\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"nymtc_census_tracts\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.3galhyzy\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"tracts\",\n            filter: false,\n            \"source-layer\": \"census_tracts\",\n            source: \"nymtc_census_tracts\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n\n        \n\n\n\n    }\n\n    fetchData() {\n        const categoryValue = acsCensusCategoryMappings.reduce((a,c ) =>{\n            if((c.name === this.categoryName || c.name === this.filters.dataset.value) && c.year === this.filters.year.value){\n                a = c.value\n            }\n            return a\n        },null)\n\n        if(categoryValue){\n            this.filters.dataset.value = this.categoryName ? this.categoryName : this.filters.dataset.value\n            return fetcher(`${HOST}views/${categoryValue}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    this.legend.Title = `${this.filters.dataset.value || this.categoryName}-${this.filters.year.value}`\n                    this.data_tracts = this.data.data.map(item =>{\n                        return tracts.reduce((a,c) =>{\n                            if(item.area === c.name){\n                                a['name'] = c.name\n                                a['geoid'] = c.geoid\n                            }\n                            return a\n                        },{})\n                    })\n                    this.legend.domain = this.data.data.reduce((a,c) =>{\n                        a.push(c.value)\n                        return a\n                    },[])\n                    this.render()\n                    return response\n                })\n        }\n\n\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n        if(!this.processedData) {\n            return\n        }\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = `${this.filters.dataset.value}-${value}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = `${value}-${this.filters.year.value}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"column\": {\n\n                this.legend.Title = `${this.filters.dataset.value} in %-${this.filters.year.value}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                if(value === 'percent'){\n                    this.legend.format = ',f'\n                }else{\n                    this.legend.format = ',d'\n                }\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n    getFormat(column){\n        return ',d' ? column === 'value' : ',f'\n    }\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if(!this.data) {\n            return this.fetchData()\n        }\n        if (this.data_tracts.length) {\n            map.setFilter(\"tracts\", [\"in\", [\"get\", \"GEOID\"], [\"literal\", this.data_tracts.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"tracts\", false);\n        }\n    //\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_tracts.forEach(data_tract =>{\n                if(curr.area === data_tract.name){\n                    acc.push({\n                        id: data_tract.geoid,\n                        value: curr[this.filters.column.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                a[c.id] = colorScale(c.value)\n                return a\n            },{});\n\n        map.setPaintProperty(\"tracts\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"GEOID\"], [\"literal\", colors]]\n        ])\n    }\n\n}\n\nexport const ACSCensusLayerFactory = (options = {}) => new ACSCensusLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport {getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\nimport {scaleLinear, scaleOrdinal, scaleQuantile, scaleQuantize, scaleThreshold} from \"d3-scale\"\nimport {extent} from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\nimport counties from \"../config/counties.json\";\n\nclass BPMPerformanceMeasuresLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n\n    setActive = !!this.viewId\n    name = 'BPM Performance Measures'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value:'58',name:'2010 Base - Time period: All Day'},\n                {value:'62',name:'2040 Future - Time period: All Day'}\n            ],\n            value: this.viewId || '58',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        column:{\n            name: 'Column',\n            type: 'dropdown',\n            domain: [\n                {name: 'VMT (in Thousands)',value:'vehicle_miles_traveled'},\n                {name: 'VHT (in Thousands)', value:'vehicle_hours_traveled'},\n                {name: 'Avg Speed (Miles/Hr)',value:'avg_speed'},\n            ],\n            value: 'vehicle_miles_traveled',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n        format: ',d',\n\n    }\n\n    onHover = {\n        layers: [\"Counties\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','geoid'],'')\n                return a\n            },'')\n            const graph = counties.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [`${this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')}-${this.filters.column.domain.reduce((a,c) => {\n                           if(c.value === this.filters.column.value){\n                               a = c.name\n                           } \n                           return a \n                        },'')}`],\n                        ['County:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.column.value]])\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"counties\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.a8ndgl5n\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"Counties\",\n            filter: false,\n            \"source-layer\": \"counties\",\n            source: \"counties\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n\n        // return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n        //     .then(response =>{\n        //         this.data = response\n        //         this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n        //             if (c.value === this.filters.dataset.value){\n        //                 a = c.name\n        //             }\n        //             return a\n        //         },'')}-${this.filters.column.domain.reduce((a,c) =>{\n        //            if(c.value === this.filters.column.value){\n        //                a = c.name\n        //            } \n        //            return a \n        //         },'')}`\n        //         this.data_counties = this.data.data.map(item =>{\n        //             return counties.reduce((a,c) =>{\n        //                 if(item.area === c.name){\n        //                     a['name'] = c.name\n        //                     a['geoid'] = c.geoid\n        //                 }\n        //                 return a\n        //             },{})\n        //         })\n        //         this.legend.domain = this.data.data.reduce((a,c) =>{\n        //             a.push(c[this.filters.column.value])\n        //             return a\n        //         },[])\n        //         return response\n        //     })\n\n    }\n\n    fetchData() {\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                })\n        );\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"dataset\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.column.domain.reduce((a,c) => {\n                    if(c.value === this.filters.column.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"column\": {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.column.domain.reduce((a,c) => {\n                    if(c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                if(value === 'avg_speed'){\n                    this.legend.format = ',f'\n                }else{\n                    this.legend.format = ',d'\n                }\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n    getFormat(column){\n        return ',d' ? column === 'value' : ',f'\n    }\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_counties.length) {\n            map.setFilter(\"Counties\", [\"in\", [\"get\", \"geoid\"], [\"literal\", this.data_counties.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"Counties\", false);\n        }\n        //\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_counties.forEach(data_county =>{\n                if(curr.area === data_county.name){\n                    acc.push({\n                        id: data_county.geoid,\n                        value: curr[this.filters.column.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                if(c.value !== 0){\n                    a[c.id] = colorScale(c.value)\n                }\n                return a\n            },{});\n\n        map.setPaintProperty(\"Counties\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"geoid\"], [\"literal\", colors]]\n        ])\n    }\n\n}\n\nexport const BPMPerformanceMeasuresLayerFactory = (options = {}) => new BPMPerformanceMeasuresLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport get from \"lodash.get\"\nimport fetcher from \"../wrappers/fetcher\";\nimport hub_bound from '../config/hub_bound.json'\nimport mapboxgl from 'mapbox-gl'\n\nclass HubBoundTravelDataLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n\n    setActive = !!this.viewId\n    name = 'Hub Bound Travel Data'\n    filters = {\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019],\n            value: 2019,\n            multi: false\n        },\n        from: {\n            name: 'From',\n            type: 'dropdown',\n            domain: ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'],\n            value: '12AM',\n            multi: false\n        },\n        to: {\n            name: 'To',\n            type: 'dropdown',\n            domain: ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'],\n            value: '12PM',\n            multi: false\n        },\n        mode: {\n            name: 'Mode',\n            type: 'dropdown',\n            domain: [\n                {name:'Bicycle',value:'9'},\n                {name:'Express Bus',value:'5'},\n                {name:'Local Bus',value:'4'},\n                {name:'Private Ferry',value:'8'},\n                {name:'Public Ferry',value:'7'},\n                {name:'Rail Rapid Transit - Express',value:'3'},\n                {name:'Rail Rapid Transit - Local',value:'2'},\n                {name:'Suburban Rail',value:'1'},\n                {name:'Tramway',value:'10'},\n                {name:'Vehicles (Auto+Taxi+Trucks+Comm. Vans)',value:'6'}\n            ],\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            value: '6',\n            multi: false\n        },\n        direction: {\n            name: 'Direction',\n            type: 'dropdown',\n            domain: ['Inbound', 'Outbound'],\n            value: 'Inbound',\n            multi: false\n        }\n    }\n    onHover = {\n        layers: [\"county_points\"],\n        callback: (layerId, features, lngLat) => {\n            const id = features.reduce((a,c)=>{\n                a = get(c,['id'],'')\n                return a\n            },0)\n            return this.data.data.reduce((a,c) =>{\n                if(c.id === id){\n\n                    a.push(\n                        ['Facility Name:',c['loc_name']],\n                        ['Sector:',c['sector_name']],\n                        ['Mode:',c['mode_name']],\n                        ['Route:',c['route_name']],\n                        [c['var_name'],c['count']],\n\n                    )\n                }\n                return a\n            },[])\n\n\n\n        }\n    }\n    legend = {\n        type: \"ordinal\",\n        domain: [],\n        range: [],\n        height: 5,\n        width: 320,\n        direction: \"vertical\",\n        show:true,\n        Title:\"\"\n    }\n    sources = [\n        {\n            id: \"county_points\",\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                },\n\n            }\n        }\n    ]\n    layers = [\n        {\n            id:\"county_points\",\n            source:'county_points',\n            type: 'circle',\n            paint:{\n                'circle-opacity':1\n            },\n            visibility: 'none',\n        }\n    ]\n\n    init(map) {\n        const from = this.convertTime(this.filters.from.value)\n        const to = this.convertTime(this.filters.to.value)\n        const url = `${HOST}/views/${this.viewId || '23'}/data_overlay?utf8=%E2%9C%93&`\n        const params = `year=${this.filters.year.value}&hour=${from}&upper_hour=${to}&transit_mode=${this.filters.mode.value}&transit_direction=${this.filters.direction.value}&lower=&upper=&commit=Filter`\n\n        // return fetcher(url+params)\n        //     .then(response => {\n        //         this.data = response\n        //         this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n        //         this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n        //         this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n        //             if(c.value === this.filters.mode.value){\n        //                 a = c.name\n        //             }\n        //             return a\n        //         },'')},\n        //         Year:${this.filters.year.value},From:${this.filters.from.value} to ${this.filters.to.value}, \n        //         Direction: ${this.filters.direction.value}`\n\n        //     })\n\n    }\n\n    fetchData() {\n\n        const from = this.convertTime(this.filters.from.value)\n        const to = this.convertTime(this.filters.to.value)\n        const url = `${HOST}/views/23/data_overlay?utf8=%E2%9C%93&`\n        const params = `year=${this.filters.year.value}&hour=${from}&upper_hour=${to}&transit_mode=${this.filters.mode.value}&transit_direction=${this.filters.direction.value}&lower=&upper=&commit=Filter`\n        return fetcher(url+params)\n            .then(response => {\n\n                this.data = response\n            })\n    }\n\n    onAdd(mapboxMap, falcor) {\n        let coordinates = hub_bound.features[0].geometry.coordinates[0];\n        let bounds =coordinates.reduce(function (bounds, coord) {\n            return bounds.extend(coord);\n        }, new mapboxgl.LngLatBounds(coordinates[0], coordinates[0]));\n        mapboxMap.fitBounds(bounds,{\n            padding: 10\n        })\n        return Promise.resolve();\n    }\n\n    onRemove(mapboxMap){\n\n        mapboxMap.removeLayer('counties')\n        mapboxMap.removeSource('counties')\n        mapboxMap.fitBounds([\n            [-70.12161387603946,45.142811053355814],\n            [-78.23968012395866,39.90735688410206]\n        ])\n    }\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                        if(c.value === this.filters.mode.value){\n                            a = c.name \n                        }\n                        return a \n                    },'')},\n                Year:${value},From:${this.filters.from.value} to ${this.filters.to.value}, \n                Direction: ${this.filters.direction.value}`\n                break;\n            }\n            case \"from\":{\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === this.filters.mode.value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${value} to ${this.filters.to.value}, \n                Direction: ${this.filters.direction.value}`\n                break;\n            }\n            case \"to\":{\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === this.filters.mode.value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${this.filters.from.value} to ${value}, \n                Direction: ${this.filters.direction.value}`\n                break;\n            }\n            case \"mode\":{\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${this.filters.from.value} to ${this.filters.to.value}, \n                Direction: ${this.filters.direction.value}`\n                break;\n            }\n            case \"direction\":{\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === this.filters.mode.value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${this.filters.from.value} to ${this.filters.to.value}, \n                Direction: ${value}`\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n    convertTime(time){\n        let value = 0\n        if (time.includes('AM') && time !== '12AM'){\n            value = time.substring(0,time.length - 1)\n        }\n        else if(time.includes('PM') && time !== '12PM'){\n            value = 12 + parseInt(time.substring(0,time.length - 1))\n        }\n        else if(time === '12AM'){\n            value = 0\n        }else{\n            value = 12\n        }\n        return value\n    }\n\n    render(map){\n\n        let geojson = {\n            type: \"FeatureCollection\",\n            features : []\n        }\n\n        let line_geojson = {\n            type:'geojson',\n            data: {\n                type: 'Feature',\n                properties: {},\n                geometry : {\n                    type: 'LineString',\n                    coordinates: hub_bound.features[0].geometry.coordinates[0]\n                }\n            }\n        }\n\n        const colors = {}\n\n        this.data.data.forEach(d=>{\n        this.data.symbologies[0].color_scheme.forEach(item =>{\n            if (item.value === d['sector_name']){\n                    colors[d['sector_name']] = item.color\n                }\n            })\n        })\n\n        geojson.features = this.data.data.map(item =>{\n\n            return {\n                type: \"Feature\",\n                id:item['id'],\n                properties: {\n                    \"name\":item['loc_name'],\n                    \"sector\":item['sector_name'],\n\n                },\n                geometry: {\n                    type:\"Point\",\n                    \"coordinates\": [item[\"lng\"],item[\"lat\"]]\n                }\n            }\n        })\n\n\n        if(!map.getSource('counties') && !map.getLayer('counties')){\n            map.addSource('counties', line_geojson)\n            map.addLayer({\n                id: \"counties\",\n                source:'counties',\n                type: 'line',\n                paint:{\n                    'line-color': 'black',\n                    'line-width':1,\n                    'line-dasharray':[10,5]\n                }\n            })\n        }\n        if(map.getSource('county_points')){\n            map.getSource('county_points').setData(geojson)\n        }\n\n        if(map.getSource('county_points') && map.getLayer(\"county_points\")){\n            map.setPaintProperty(\n                'county_points',\n                'circle-color',\n                [\"get\", [\"to-string\", [\"get\", \"sector\"]], [\"literal\",colors]]\n            )\n        }\n    }\n\n\n}\n\n\n\nexport const HubBoundTravelDataLayerFactory = (options = {}) => new HubBoundTravelDataLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport fetcher from \"../wrappers/fetcher\";\nimport rtp_ids from '../config/rtp_ids.json'\nimport rtp_sponsors from '../config/rtp_sponsors.json'\nvar parse = require('wellknown');\n\n\nclass RTPProjectDataLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n    active = false\n    setActive = !!this.viewId\n    name = 'RTP Project Data'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {name: '2040 RTP Projects', value: '53'},\n                {name: '2045 RTP Projects', value: '141'}\n            ],\n            value: this.viewId || '53',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        rtp_id: {\n            name: 'RTP ID',\n            type: 'dropdown',\n            domain: rtp_ids.filter(d => d.name !== null),\n            value: \"Select All\",\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: ['Select All',2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025, 2026, 2027, 2028, 2029, 2030, 2031, 2032, 2040],\n            value: 'Select All'\n        },\n        project_type: {\n            name: 'Project Type',\n            type: 'dropdown',\n            domain: [\n                {name:'Select All',value:\"Select All\"},\n                {name: 'Study', value: '1'},\n                {name: 'Highway', value: '2'},\n                {name: 'Ferry', value: '3'},\n                {name: 'Transit', value: '4'},\n                {name: 'Rail', value: '5'},\n                {name: 'Truck', value: '6'},\n                {name: 'Pedestrian', value: '7'},\n                {name: 'Bike', value: '8'},\n                {name: 'Bus', value: '10'},\n                {name: 'ITS', value: '9'},\n                {name: 'Parking', value: '12'}\n            ],\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        plan_portion: {\n            name: 'Plan Portion',\n            type: 'dropdown',\n            domain: [\n                {name:'Select All',value:'Select All'},\n                {name: 'Constrained', value: '2'},\n                {name: 'Vision', value: '1'}\n            ],\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        sponsor: {\n            name: 'Sponsor',\n            type: 'dropdown',\n            domain: rtp_sponsors,\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        }\n    }\n    legend = {\n        type: \"ordinal\",\n        domain: [],\n        range: [],\n        height: 5,\n        width: 320,\n        direction: \"vertical\",\n        show:true,\n        Title:\"\"\n    }\n    sources = [\n        {\n            id: 'county_symbols',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        },\n        {\n            id: 'county_lines',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        },\n        {\n            id: 'county_polygons',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        }\n    ]\n    onHover = {\n        layers: [\"county_lines\", \"county_polygons\", 'poi-rail', 'poi-rail-metro', 'poi-us-interstate-truck-3', 'poi-bus', 'poi-bicycle-share', 'poi-ferry', 'poi-au-national-highway-3', 'poi-pitch-11', 'poi-college-11'],\n        callback: (layerId, features, lngLat) => {\n            const feature = features.reduce((a, c) => {\n                a = this.data.data.reduce((acc, curr) => {\n\n                    if (curr['rtp_id'] === c['properties']['rtp_id']\n                        && curr['ptype'] === c['properties']['project_type']\n                        && curr['plan_portion'] === c['properties']['plan_portion']\n                        && curr['sponsor'] === c['properties']['sponsor']\n                        && curr['description'] === c['properties']['description']\n                    ) {\n                        acc = curr\n                    }\n                    return acc\n                },)\n                return a\n            }, {})\n\n            return [\n                ['Project ID:', feature['rtp_id']],\n                ['Year:', this.filters.year.value],\n                ['Plan Portion:', feature['plan_portion']],\n                ['Sponsor:', feature['sponsor']],\n                ['Project Type:', feature['ptype']],\n                ['Cost:', feature['estimated_cost']],\n                ['Description:', feature['description'].toLowerCase()]\n            ]\n\n\n        }\n    }\n\n\n\n\n    init(map) {\n\n        // const url = `${HOST}/views/${this.filters.dataset.value}/data_overlay`\n        // const cost_lower = ''\n        // const cost_upper = ''\n\n        // const params = `?utf8=%E2%9C%93&rtp_id=${this.filters.rtp_id.value === 'Select All'? '':this.filters.rtp_id.value}&current_year=${this.filters.year.value === 'Select All'? '':this.filters.year.value}&cost_lower=${cost_lower}&cost_upper=${cost_upper}&ptype=${this.filters.project_type.value === 'Select All'? '':this.filters.project_type.value}&plan_portion=${this.filters.plan_portion.value === 'Select All'? '':this.filters.plan_portion.value}&sponsor=${this.filters.sponsor.value === 'Select All'? '':this.filters.sponsor.value}&commit=Filter`\n        // return fetcher(url + params)\n        //     .then(response => {\n        //         this.data = response\n        //         this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n        //         this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n        //         this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n        //             if(c.value === this.filters.dataset.value){\n        //                 a = c.name\n        //             }\n        //             return a\n        //         },'')}\n        //        Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n        //         RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n        //         Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n        //             if(c.value === this.filters.project_type.value){\n        //                 a = c.name === 'Select All' ? 'All': c.name\n        //             }\n        //             return a\n        //         },'')},\n        //         Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n        //             if(c.value === this.filters.plan_portion.value){\n        //                 a = c.name === 'Select All' ? 'All': c.name\n        //             }\n        //             return a\n        //         },'')},\n        //        Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n        //             if(c.value === this.filters.sponsor.value){\n        //                 a = c.name === 'Select All' ? 'All': c.name\n        //             }\n        //             return a\n        //         },'')}\n        //         `\n        //     })\n    }\n\n    fetchData() {\n        const url = `${HOST}/views/${this.filters.dataset.value}/data_overlay`\n        const cost_lower = ''\n        const cost_upper = ''\n        const params = `?utf8=%E2%9C%93&rtp_id=${this.filters.rtp_id.value === 'Select All'? '':this.filters.rtp_id.value}&current_year=${this.filters.year.value === 'Select All'? '':this.filters.year.value}&cost_lower=${cost_lower}&cost_upper=${cost_upper}&ptype=${this.filters.project_type.value === 'Select All'? '':this.filters.project_type.value}&plan_portion=${this.filters.plan_portion.value === 'Select All'? '':this.filters.plan_portion.value}&sponsor=${this.filters.sponsor.value === 'Select All'? '':this.filters.sponsor.value}&commit=Filter`\n\n        return fetcher(url + params)\n            .then(response => {\n                this.data = response\n                this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n                this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a \n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name \n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n            })\n    }\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"dataset\" : {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"year\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${value === 'Select All'? 'All':value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"rtp_id\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${value === 'Select All'? 'All':value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"project_type\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"plan_portion\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"sponsor\": {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n    onRemove(mapboxMap) {\n\n        mapboxMap.removeLayer('poi-rail')\n        mapboxMap.removeLayer('poi-rail-metro')\n        mapboxMap.removeLayer('poi-us-interstate-truck-3')\n        mapboxMap.removeLayer('poi-bus')\n        mapboxMap.removeLayer('poi-bicycle-share')\n        mapboxMap.removeLayer('poi-ferry')\n        mapboxMap.removeLayer('poi-au-national-highway-3')\n        mapboxMap.removeLayer('poi-pitch-11')\n        mapboxMap.removeLayer('poi-college-11')\n        mapboxMap.removeLayer('county_polygons')\n        mapboxMap.removeLayer('county_lines')\n        mapboxMap.removeSource('county_symbols')\n        mapboxMap.removeSource('county_polygons')\n        mapboxMap.removeSource('county_lines')\n    }\n\n    render(map) {\n\n        let geojson = {\n            type: \"FeatureCollection\",\n            features: []\n        }\n\n        const symbols_map = {\n            'Rail': 'rail',\n            'Transit': 'rail-metro',\n            'Truck': 'us-interstate-truck-3',\n            'Bus': 'bus',\n            'Bike': 'bicycle-share',\n            'Ferry': 'ferry',\n            'Highway': 'au-national-highway-3',\n            'Pedestrian': 'pitch-11',\n            'Study': 'college-11',\n\n        }\n\n        geojson.features = this.data.data.map((d, i) => {\n\n            return {\n                type: 'Feature',\n                id: i,\n                properties: {\n                    \"description\": d['description'],\n                    \"estimated_cost\": d['estimated_cost'],\n                    \"plan_portion\": d['plan_portion'],\n                    \"project_type\": d['ptype'],\n                    \"rtp_id\": d['rtp_id'],\n                    \"sponsor\": d['sponsor'],\n                    \"icon\": symbols_map[d['ptype']]\n                },\n                geometry: parse(d['geography'])\n            }\n        })\n\n        const symbols_geojson =\n            {\n                type: 'FeatureCollection',\n                features: geojson.features.filter(d => {\n                    if (d['geometry'] && d['geometry'].type === 'Point') {\n                        return d\n                    }\n                    return false\n                })\n            }\n\n        const polygon_geojson = {\n            type: 'FeatureCollection',\n            features: geojson.features.filter(d => {\n                if (d['geometry'] && d['geometry'].type === 'MultiPolygon') {\n                    return d\n                }\n                return false\n            })\n        }\n\n        polygon_geojson.features.forEach(feature =>{\n\n            feature.properties['color'] = this.data.symbologies[0].color_scheme.reduce((a,c) =>{\n                if(c.label === feature.properties.project_type){\n                    a = c.color\n                }\n                return a\n            },'')\n        })\n\n        const line_geojson = {\n            type: 'FeatureCollection',\n            features: geojson.features.filter(d => {\n                if (d['geometry'] && d['geometry'].type === 'MultiLineString') {\n                    return d\n                }\n                return false\n            })\n        }\n\n\n        line_geojson.features.forEach(feature =>{\n\n            feature.properties['color'] = this.data.symbologies[0].color_scheme.reduce((a,c) =>{\n                if(c.label === feature.properties.project_type){\n                    a = c.color\n                }\n                return a\n            },'')\n        })\n\n        if (map.getSource('county_lines')) {\n            map.getSource('county_lines').setData(line_geojson)\n        }\n\n        if (!map.getLayer('county_lines')) {\n            map.addLayer({\n                id: \"county_lines\",\n                source: 'county_lines',\n                type: 'line',\n                paint: {\n                    'line-color': {\n                        type:'identity',\n                        property:'color'\n                    },\n                    'line-width': 3,\n\n                }\n            })\n        }\n\n        if (map.getSource('county_polygons')) {\n            map.getSource('county_polygons').setData(polygon_geojson)\n        }\n\n        if (!map.getLayer('county_polygons')) {\n            map.addLayer({\n                id: 'county_polygons',\n                source: 'county_polygons',\n                type: 'fill',\n                paint: {\n                    \"fill-color\": {\n                        type:'identity',\n                        property:'color'\n                    },\n                    \"fill-opacity\": [\n                        \"interpolate\",\n                        [\"linear\"],\n                        [\"zoom\"],\n                        5, 0.5,\n                        20, 0.1\n                    ]\n                }\n            })\n        }\n        if (map.getSource('county_symbols')) {\n            map.getSource('county_symbols').setData(symbols_geojson)\n        }\n        geojson.features.forEach(feature => {\n            if (feature.properties.icon) {\n                let symbol = feature.properties.icon\n                let layerID = 'poi-' + symbol;\n                if (!map.getLayer(layerID)) {\n                    map.addLayer({\n                        'id': layerID,\n                        'type': 'symbol',\n                        'source': 'county_symbols',\n                        'layout': {\n                            'icon-image': symbol,\n                            'icon-allow-overlap': true\n                        },\n                        'filter': ['==', 'icon', symbol]\n                    })\n\n                }\n\n            }\n        })\n\n    }\n}\n\nexport const RTPProjectDataLayerFactory = (options = {}) => new RTPProjectDataLayer(options)\n","import React from \"react\"\n\nimport colorbrewer from \"colorbrewer\"\n\nimport styled from \"styled-components\"\nimport get from \"lodash.get\"\n\nconst ColorRanges = {}\n\nfor (const type in colorbrewer.schemeGroups) {\n\tcolorbrewer.schemeGroups[type].forEach(name => {\n\t\tconst group = colorbrewer[name];\n\t\tfor (const length in group) {\n\t\t\tif (!(length in ColorRanges)) {\n\t\t\t\tColorRanges[length] = [];\n\t\t\t}\n\t\t\tColorRanges[length].push({\n\t\t\t\ttype: `${ type[0].toUpperCase() }${ type.slice(1) }`,\n\t\t\t\tname,\n\t\t\t\tcategory: \"Colorbrewer\",\n\t\t\t\tcolors: group[length]\n\t\t\t})\n\t\t}\n\t})\n}\n\nexport { ColorRanges };\nconsole.log(\"ColorRanges\", ColorRanges);\n\nexport const getColorRange = (size, name) =>\n\tget(ColorRanges, [size], [])\n\t\t.reduce((a, c) => c.name === name ? c.colors : a, []).slice();\n\nconst ColorBarContainer =styled.div`\n  > *:first-child {\n    border-top-left-radius: 0.25rem;\n    border-bottom-left-radius: 0.25rem;\n  }\n  > *:last-child {\n    border-top-right-radius: 0.25rem;\n    border-bottom-right-radius: 0.25rem;\n  }\n`\nexport const ColorBar = ({ colors, small = false }) => {\n  return (\n    <ColorBarContainer className={ `grid grid-cols-${ colors.length }` }>\n      { colors.map((c, i) =>\n          <div key={ i }\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\tbackgroundColor: c,\n\t\t\t\t\t\t\ttransition: \"background-color 0.5s\"\n\t\t\t\t\t\t} }\n            className={ `col-span-1 ${ small ? \"h-2\" : \"h-3\" }` }/>\n        )\n      }\n    </ColorBarContainer>\n  )\n}\n","import React from \"react\"\n\nimport { BooleanInput, Select } from \"@availabs/avl-components\"\n\nimport deepequal from \"deep-equal\"\nimport get from \"lodash.get\"\nimport {\n  groups,\n  scaleLinear,\n  scaleOrdinal,\n  scaleQuantize,\n  scaleQuantile,\n  scaleThreshold,\n  extent as d3extent,\n  format as d3format\n} from \"d3\"\n\nimport { ColorBar, ColorRanges } from \"./color-ranges\"\n\nconst ColorSteps = Object.keys(ColorRanges).sort((a, b) => +a - +b);\n\nexport const Legend = ({ type, domain, range, format, ...props }) => {\n\n  const scale = React.useMemo(() => {\n    return getScale(type, domain, range);\n  }, [type, domain, range]);\n\n  const Format = React.useMemo(() => {\n    return getFormat(format);\n  }, [format]);\n\n  return (\n    <div>\n      { type === \"linear\" ?\n        <LinearScale scale={ scale } format={ Format } { ...props }/> :\n        type === \"ordinal\" ?\n        <OrdinalScale scale={ scale } format={ Format } { ...props }/> :\n        type === \"quantize\" || type === \"quantile\" || type === \"threshold\"  ?\n        <QuantizleScale scale={ scale } format={ Format } { ...props }/> :\n        <div>Unknown scale type \"{ type }.\"</div>\n      }\n    </div>\n  )\n}\n\nconst getScale = (type, domain, range) => {\n  switch (type) {\n    case \"linear\":\n      return scaleLinear()\n        .domain(domain)\n        .range(range);\n    case \"ordinal\":\n      return scaleOrdinal()\n        .domain(domain)\n        .range(range);\n    case \"quantize\":\n      return scaleQuantize()\n        .domain(d3extent(domain))\n        .range(range);\n    case \"quantile\":\n      return scaleQuantile()\n        .domain(domain)\n        .range(range);\n    case \"threshold\":\n      return scaleThreshold()\n        .domain(domain)\n        .range(range);\n    default:\n      return null;\n  }\n}\n\nconst Identity = i => i;\nconst getFormat = format => {\n  if (!format) return Identity;\n\n  if (typeof format === \"string\") {\n    return d3format(format);\n  }\n  return format;\n}\n\nconst InitialToolState = {\n  size: 5,\n  reverse: false,\n  opened: null\n}\nconst InitReducer = size => ({\n  ...InitialToolState,\n  size: size || 5\n})\nconst ToolReducer = (state, action) => {\n  const { type, ...payload } = action;\n  switch (type) {\n    case \"set-size\":\n    case \"set-reverse\":\n    case \"set-opened\":\n      return {\n        ...state,\n        ...payload\n      }\n    default:\n      return state;\n  }\n}\nexport const useLegendReducer = size => {\n  return React.useReducer(ToolReducer, size, InitReducer);;\n}\n\nexport const LegendTools = ({ layer, MapActions }) => {\n\n  const range = get(layer, [\"legend\", \"range\"], []);\n\n  const [toolState, dispatch] = useLegendReducer(range.length);\n\n  const updateLegend = React.useCallback(update => {\n    MapActions.updateLegend(layer, update);\n  }, [layer, MapActions]);\n\n  return (\n    <DummyLegendTools { ...toolState } layer={ layer } current={ range }\n      updateLegend={ updateLegend } dispatch={ dispatch }/>\n  )\n}\nexport const DummyLegendTools = ({ layer, current, updateLegend, dispatch, size, reverse, opened }) => {\n\n  const colorsByType = React.useMemo(() => {\n    return groups(get(ColorRanges, size, []), r => r.type);\n  }, [size]);\n\n  return (\n    <React.Fragment>\n      <div className=\"flex items-center mb-1\">\n        <div className=\"w-36\">Step Size</div>\n        <div className=\"flex-1\">\n          <Select options={ ColorSteps }\n            valueAccessor={ v => +v }\n            value={ size }\n            onChange={ v => dispatch({ type: \"set-size\", size: v }) }\n            multi={ false }\n            removable={ false }\n            searchable={ false }/>\n        </div>\n      </div>\n\n      <div className=\"flex items-center mb-1\">\n        <div className=\"w-36\">Reverse Colors</div>\n        <div className=\"flex-1\">\n          <BooleanInput value={ reverse }\n            onChange={ v => dispatch({ type: \"set-reverse\", reverse: v }) }/>\n        </div>\n      </div>\n\n      <div>\n        <div className=\"font-bold border-b mb-1\">\n          Color Range Types:\n        </div>\n        { colorsByType.map(([type, ranges]) =>\n            <ColorType key={ type } type={ type } ranges={ ranges }\n              opened={ opened } update={ updateLegend }\n              setOpen={ opened => dispatch({ type: \"set-opened\", opened }) }\n              current={ current } reverse={ reverse }/>\n          )\n        }\n      </div>\n    </React.Fragment>\n  )\n}\nconst ColorType = ({ type, ranges, current, opened, setOpen, reverse, update }) => (\n  <div className={ `\n      px-2 hover:border-current border-transparent border\n      cursor-pointer rounded transition\n    ` }\n    onClick={ e => { e.stopPropagation(); setOpen(type); } }>\n    { type }\n    <div className=\"pb-1\"\n      style={ { display: opened === type ? \"block\" : \"none\" } }>\n      { ranges.map(({ name, colors }) => {\n          if (reverse) {\n            colors = colors.slice().reverse();\n          }\n          const active = deepequal(colors, current);\n          return (\n            <div key={ name }\n              onClick={ e => update({ range: colors }) }\n              className={ `\n                p-1 border rounded-lg hover:border-current transition\n                ${ active ? \"border-current\" : \"border-transparent\" }\n              ` }>\n              <ColorBar key={ name } colors={ colors } small/>\n            </div>\n          )\n        })\n      }\n    </div>\n  </div>\n)\n\nconst LinearScale = ({ scale, format, ticks = 5 }) => {\n\n  const scaleTicks = scale.ticks(ticks);\n\n  return (\n    <div>\n      <ColorBar colors={ scaleTicks.map(t => scale(t)) }/>\n      <div className={ `text-sm grid grid-cols-${ scaleTicks.length }` }>\n        { scaleTicks.map(t =>\n            <div className=\"col-span-1 text-right pr-1\" key={ t }>\n              { format(t) }\n            </div>\n          )\n        }\n      </div>\n    </div>\n  )\n}\nconst OrdinalScale = ({ scale, format, height = 3, direction = \"vertical\" }) => {\n\n  const range = scale.range();\n\n  return (\n    <div>\n      { direction === \"horizontal\" ?\n        <>\n          <div className={ `grid grid-cols-${ range.length }` }>\n            { range.map(c =>\n                <div className=\"col-span-1 h-3 mx-2 rounded\" key={ c }\n                  style={ { backgroundColor: c } }/>\n              )\n            }\n          </div>\n          <div className={ `grid grid-cols-${ range.length }` }>\n            { scale.domain().map(d =>\n                <div className=\"col-span-1 text-center\" key={ d }>\n                  { format(d) }\n                </div>\n              )\n            }\n          </div>\n        </> :\n        <div className=\"flex\">\n          { scale.domain().reduce((a, c, i) => {\n              if (i % height === 0) {\n                a.push([]);\n              }\n              a[a.length - 1].push(c);\n              return a;\n            }, [])\n            .map((d, i) =>\n              <div key={ i }\n                className={ `${ i > 0 ? \"ml-6\" : \"\" } flex-1` }>\n                { d.map(dd =>\n                    <div className=\"flex items-center\" key={ dd }>\n                      <div className=\"h-6 w-6 rounded mr-1 mb-1\"\n                        style={ {\n                          backgroundColor: scale(dd)\n                        } }/>\n                      <div>{ format(dd) }</div>\n                    </div>\n                  )\n                }\n              </div>\n            )\n          }\n        </div>\n      }\n    </div>\n  )\n}\nconst QuantizleScale = ({ scale, format }) => {\n\n  const range = scale.range();\n\n  return (\n    <div>\n      <ColorBar colors={ range }/>\n      <div className={ `text-sm grid grid-cols-${ range.length }` }>\n        { range.map(r =>\n            <div className=\"col-span-1 text-right pr-1\" key={ r }>\n              { format(scale.invertExtent(r)[1]) }\n            </div>\n          )\n        }\n      </div>\n    </div>\n  )\n}\n","const NpmrdsSources = [\n  { id: \"npmrds\",\n    source: {\n      type: \"vector\",\n      url: \"https://tiles.availabs.org/data/npmrds.json\"\n    }\n  }\n]\n\nconst npmrdsPaint = {\n  'line-color': '#ccc',\n  'line-width': [\n    \"interpolate\",\n    [\"linear\"],\n    [\"zoom\"],\n    0,\n    [\n      \"match\",\n      [\"get\", \"n\"],\n      [1, 2],\n      0.5,\n      0\n    ],\n    13,\n    [\n      \"match\",\n      [\"get\", \"n\"],\n      [1, 2],\n      1.5,\n      1\n    ],\n    18,\n    [\n      \"match\",\n      [\"get\", \"n\"],\n      [1, 2],\n      8,\n      5\n    ]\n  ],\n  'line-opacity': [\n    \"case\",\n    [\"boolean\", [\"feature-state\", \"hover\"], false],\n    0.4,\n    1\n  ],\n  'line-offset': {\n    base: 1.5,\n    stops: [[5, 0], [9, 1], [15, 3], [18, 7]]\n  }\n}\n\nconst NpmrdsLayers = ['2016','2017','2018','2019','2020','2021']\n  .map(year => {\n    return {\n      id: `tmc-${year}`,\n      type: 'line',\n      source: 'npmrds',\n      beneath: 'waterway-label',\n      'source-layer': `npmrds_${year}`,\n      layout: {\n        'visibility': 'visible',\n        'line-join': 'round',\n        'line-cap': 'round'\n      },\n      paint: npmrdsPaint\n    }\n  })\n\n\n\n\nexport {\n  NpmrdsSources,\n  NpmrdsLayers\n}","const TrafficSignalsSources = [\n  { id: \"traffic_signals\",\n    source: {\n      type: \"vector\",\n      url: \"https://tiles.availabs.org/data/osm_traffic_signals.json\"\n    }\n  }\n]\n\nconst TrafficSignalsLayers = [{\n      'id': 'traffic_signals_layer',\n      'type': 'circle',\n      'source': 'traffic_signals',\n      'beneath': 'road-label',\n      'source-layer': \"osm_traffic_signals\",\n      'layout': {\n        'visibility': 'visible',\n      },\n      'filter': [\"==\",\"$type\",\"Point\"],\n      'minzoom': 13,\n      'paint': {\n        'circle-radius': 3,\n        'circle-color':' #B42222',\n        'circle-stroke-color': '#fefefe',\n        'circle-stroke-width': 1\n      }\n}]\n\nexport {\n\tTrafficSignalsSources,\n\tTrafficSignalsLayers\n}","import get from 'lodash.get'\nimport { getColorRange } from \"../../utils\"\nconst filters = {\n  geography: {\n    name: 'Geography',\n    type: 'select',\n    domain: [\n      { \n        name: 'All',\n        value: ['36061', '36005', '36047', '36081', '36085','09001', '09005', '09009','36111', '36027', '36071', '36105', '36087', '36119', '36079','36059', '36103','34003', '34019', '34017', '34021', '34023', '34025', '34027', '34029', '34031', '34035', '34037', '34039', '36113', '34013']\n      }, \n      {\n        name: 'NYBPM Counties',\n        value: ['36061', '36005', '36047', '36081', '36085','09001', '09005', '09009','36111', '36027', '36071', '36105', '36087', '36119', '36079','36059', '36103','34003', '34019', '34017', '34021', '34023', '34025', '34027', '34029', '34031', '34035', '34037', '34039', '36113', '34013']\n      },\n      {\n        name: 'Connecticut',\n        value:  ['09001', '09005', '09009']\n      },\n      {\n        name: 'Long Island',\n        value:  ['36059', '36103']\n      },\n      {\n        name: 'Mid Hudson',\n        value:  ['36111', '36027', '36071', '36105', '36087', '36119', '36079']\n      },\n      {\n        name: 'Mid Hudson South',\n        value:  ['36079', '36119', '36087']\n      },\n      {\n        name: 'New Jersey',\n        value: ['34003', '34019', '34017', '34021', '34023', '34025', '34027', '34029', '34031', '34035', '34037', '34039', '36113', '34013'] \n      },{\n        name: 'New York City',\n        value:  ['36061', '36005', '36047', '36081', '36085']\n      }\n    ],\n    value: \"All\",\n    searchable: true,\n    accessor: d => d.name,\n    valueAccessor: d => d.name,\n    multi: false,\n  },\n  year: {\n    name: 'Year',\n    type: \"select\",\n    multi: false,\n    domain: [2016, 2017, 2018, 2019,2020, 2021],\n    value: 2019\n  },\n  month: {\n    name: 'Month',\n    type: \"select\",\n    multi: false,\n    domain: [1,2,3,4,5,6,7,8,9,10,11,12],\n    value: 1\n  },\n  hour: {\n    name: \"Hour\",\n    type: \"select\",\n    multi: false,\n    domain: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],\n    value: 15\n  },\n  dow: {\n    name: \"Day of Week\",\n    type: \"select\",\n    multi: false,\n    domain: ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\n    value: 'Thursday'\n  },\n  vehicles: {\n    name: \"Vehicle Class\",\n    type: \"select\",\n    multi: false,\n    domain: ['All Vehicles', 'Freight Trucks Only', 'Passenger Vehicles Only'],\n    value: 'All Vehicles'\n  }\n \n \n}\n\n\nconst updateLegend = (filters, legend) => {\n  \n  //legend.type = \"threshold\";\n  //legend.range = getColorRange(get(legend, 'range.length', 6), \"RdYlBu\", true).reverse()\n  //legend.format = \",.2~f\";\n  \n}\n\n\nconst getNetwork = (filters) => {\n  if(filters.network.value == 'con') {\n    return filters.conflation.value\n  }\n  return filters.network.value\n}\n\n\n\nconst setActiveLayer = (layers, filters, mapboxMap) => {\n  // console.log('setLayers ', filters.network.value, filters.year.value)\n  return layers\n    .map(l => l.id)\n    .filter(l => l !== 'traffic_signals_layer')\n    .map(l => {\n      let output = null\n      let type = l.split('-')[0]\n      let year = l.split('-')[1]\n      let checkYear = filters.year.value\n      if(type === 'tmc' && +year === +checkYear) {\n        output = l\n        mapboxMap.setLayoutProperty(\n          l,'visibility','visible'\n        )\n      } else if(type !== 'geo'){\n        mapboxMap.setLayoutProperty(\n          l,'visibility','none'\n        )\n      }\n      return output\n    }).filter(d => d)\n   \n}\n\n// export filters\n// export updateSubMeasures\n// export getMeasure\n// export getMeasureName\nexport {\n  filters,\n  updateLegend,\n  setActiveLayer\n}","import React from 'react'\nimport get from 'lodash.get'\n// import {Link} from 'react-router-dom'\n import { useFalcor } from '@availabs/avl-components'\n\n// const f_system_meta = {\n//   \"1\": \"Interstate\",\n//   \"2\": \"Principal Arterial  Freeways and Expressways\",\n//   \"3\": \"Principal Arterial  Other\",\n//   \"4\": \"Minor Arterial\",\n//   \"5\": \"Major Collector\",\n//   \"6\": \"Minor Collector\",\n//   \"7\": \"Local\"\n// }\n\n\nconst HoverComp = ({ data, layer }) => {\n \n\n  // const network = layer.getNetwork(layer.filters)\n  // const key = get(data.filter(d => d[0] === network),'[0][1]', false)\n  // const hoverLayer = get(data.filter(d => d[0] === 'hoverlayer'),'[0][1]', 'tmc')\n\n  return <TmcComp data={data} layer={layer} tmc={data[0][1]} />\n  \n\n  //return <DefaultHoverComp data={data} layer={layer} />\n}\n\nconst TmcComp = ({ data, layer, tmc }) => {\n  const { falcor, falcorCache } = useFalcor();\n\n  React.useEffect(() => {\n    if (tmc === null) return;\n    // console.log('hover fetch')\n    return falcor.get(\n      [\n        \"tmc\",\n        tmc,\n        \"meta\",\n        layer.filters.year.value,\n        [\"miles\", \"roadname\", \"aadt\", \"f_system\", \"nhs\", \"frc\"],\n      ]\n    );\n  }, [falcor, tmc]);\n\n  const TmcInfo = React.useMemo(() => {\n    return get(falcorCache, [\"tmc\", tmc, \"meta\", layer.filters.year.value], {});\n  }, [tmc, falcorCache]);\n\n  const n = React.useMemo(() => {\n    return data.filter((d) => d[0] === \"n\")[0][1];\n  }, [data]);\n\n  const MeasureInfo = React.useMemo(() => {\n    return get(\n      falcorCache,\n      [\"conflation\", \"tmc\", tmc, \"data\", layer.filters.year.value],\n      {}\n    );\n  }, [tmc, falcorCache]);\n\n  const currentData = get(layer, 'state.currentData', []).reduce((out, seg) => {\n    out[seg.id] = seg\n    return out\n  },{})\n\n  //console.log('MeasureInfo', currentData[tmc][layer.getMeasure(layer.filters)])\n\n  return (\n    <div className=\"p-1 w-44 overflow-hidden\">\n      <div className=\" px-2\">\n        <div className=\"text-center text-lg\">{TmcInfo.roadname}</div>\n        <div className=\"flex  \">\n          <div className=\"text-xs flex-1 font-bold\">TMC</div>\n          <div className=\"flex-0\">\n            <a target=\"_blank\" href={`/tmc/${tmc}`}>\n              {tmc}\n            </a>\n          </div>\n        </div>\n        <div className=\"flex  \">\n          <div className=\"text-xs flex-1 font-bold\">Functional Class</div>\n          <div className=\"flex-0\">\n           {n}\n          </div>\n        </div>\n        \n        <div className=\"flex \">\n          <div className=\"text-xs flex-1 font-bold\">AADT</div>\n          <div className=\"flex-0\">\n            {(get(TmcInfo, \"aadt\", 0) || 0).toLocaleString()}\n          </div>\n        </div>\n        <div className=\"flex pb-1\">\n          <div className=\"text-xs flex-1 font-bold\">Length</div>\n          <div className=\"flex-0\">\n            {get(TmcInfo, \"miles\", 0).toLocaleString()} mi\n          </div>\n        {/*<div className=\"\">\n          <div className=\"text-xs flex-1 font-bold text-center\">\n            {layer.getMeasureName(\n              layer.falcor,\n              layer.getMeasure(layer.filters)\n            )}\n          </div>\n          <div className=\"flex-0 text-lg text-center\">\n            {(\n              get(currentData,`${tmc}.${layer.getMeasure(layer.filters)}`,0)\n            ).toLocaleString()}\n          </div>\n        </div>*/}\n       \n      </div>\n    </div>\n    </div>\n  );\n};\n\n\nconst DefaultHoverComp = ({ data, layer }) => {\n  //const theme = useTheme();\n  return (\n    <div className={ `rounded relative px-1` }>\n      { data.map((row, i) =>\n          <div key={ i } className=\"flex\">\n            { row.map((d, ii) =>\n                <div key={ ii }\n                  className={ `\n                    ${ ii === 0 ? \"flex-1 font-bold\" : \"flex-0\" }\n                    ${ row.length > 1 && ii === 0 ? \"mr-4\" : \"\" }\n                    ${ row.length === 1 && ii === 0 ? `border-b-2 text-lg ${ i > 0 ? \"mt-1\" : \"\" }` : \"\" }\n                  ` }>\n                  { d }\n                </div>\n              )\n            }\n          </div>\n        )\n      }\n    </div>\n  )\n}\n\n\nexport default HoverComp"," import React from 'react'\nimport get from 'lodash.get'\n\nimport { getColorRange, /*Legend*/ } from \"../../utils\"\nimport { /*Select,*/ useFalcor } from '@availabs/avl-components'\nimport mapboxgl from \"mapbox-gl\"\nimport * as d3scale from \"d3-scale\"\nimport flatten from 'lodash.flatten'\nimport { download as shpDownload } from 'utils/shp-write';\n//import len from '@turf/length'\n// import flatten from 'lodash.flatten'\n\nimport { ckmeans } from 'simple-statistics'\n\nimport { \n  NpmrdsSources, \n  NpmrdsLayers\n} from '../../map-styles/npmrds'\n\nimport { \n  TrafficSignalsSources,\n  TrafficSignalsLayers\n} from '../../map-styles/traffic_signals'\n\nimport { \n  filters,\n  updateLegend,\n  setActiveLayer\n} from './filters'\n\nimport HoverComp from './HoverComp'\nimport { LayerContainer } from \"components/avl-map/src\"\n\n/* ---- To Do ----- \nX - Data Overview\nX - stop lights\nX - All Years Working\n1 - Get RIS with new IDS\n3 - Overview Graph through time\n4- test measures by geography\n   ---------------- */\nconsole.log('what text', getColorRange(6, \"RdYlBu\") ,getColorRange(6, \"RdYlBu\").reverse())\nconst getMonths = {\n  1 : 'January',\n  2 : 'February',\n  3 : 'March',\n}\n\nclass NPMRDSLayer extends LayerContainer {\n  name = \"NPMRDS speeds\"\n  attribution = \"TMC map data  HERE\"\n  sources = [\n    ...NpmrdsSources,\n    ...TrafficSignalsSources,\n    { id: \"geo-boundaries-source\",\n        source: {\n          type: \"geojson\",\n          data: {\n            type: \"FeatureCollection\",\n            features: []\n          }\n        }\n    },\n  ]\n  layers = [\n    // ...ConflationLayerCase,\n    ...NpmrdsLayers,\n    // ...TrafficSignalsLayers,\n    { id: \"geo-boundaries\",\n      type: \"line\",\n      source: \"geo-boundaries-source\",\n      paint: {\n        \"line-color\": \"#fff\"\n      }\n    }\n  ]\n\n  infoBoxes = [\n    {\n      Component: ({layer}) => (\n        <div className='w-full bg-npmrds-600 w-full text-npmrds-100'>\n          \n        </div>\n      ),\n      show: false\n    },\n    \n  ]\n  toolbar = []\n  filters = filters\n  updateLegend = updateLegend\n  setActiveLayer = setActiveLayer\n  legend = {\n    type: \"threshold\",\n    domain: [10,20,30,40,55],\n    range: ['rgb(255,0,0)', 'rgb(255,100,0)','rgb(255,255,0)','rgb(0,100,255)','rgb(0,0,255)','rgb(0,255,255)','rgb(0,255,0)'],//['#d73027', '#fc8d59', '#fee090', '#e0f3f8', '#91bfdb', '#4575b4'],//['#4575b4', '#91bfdb', '#e0f3f8', '#fee090', '#fc8d59', '#d73027'],\n    format: \",.1f\",\n    direction: 'horizontal',\n    show: true,\n    Title: ({ layer }) => {\n      if(!layer) return\n      return (<div className='text-gray-800'>\n        <div>NPMRDS - {this.filters.vehicles.value}</div>\n        <div className='text-sm font-light'> {this.filters.month.value} / {this.filters.year.value} {this.filters.hour.value}:00 - {this.filters.hour.value+1}:00 {this.filters.dow.value}</div> \n      </div>)\n    },\n    units: \"Average Speed (mph)\"\n  }\n  onHover = {\n    layers: [...NpmrdsLayers.map(d => d.id)],\n    filterFunc: function(layer, features, point, latlng) {\n\n        const key = 'tmc',\n          value = get(features, [0, \"properties\", key], \"none\"),\n          dir = get(features, [0, \"properties\", \"dir\"], \"none\");\n        return [\"in\", key, value] //[\"all\", [\"in\", key, value], [\"in\", \"dir\", dir]];\n    },\n    callback: (layerId, features, lngLat) => {\n      let feature = features[0]\n     \n      const key =  'tmc',\n      value = get(features, [0, \"properties\", key], \"none\")\n\n      let data = [\n        ...Object.keys(feature.properties).map(k=> [k, feature.properties[k]])        \n      ]\n      data.push(['hoverlayer', layerId])\n      return data\n    },\n    HoverComp\n    \n  }\n  // onClick = {\n  //   layers: [...ConflationLayers.map(d => d.id)],\n  //   callback: (features, lngLat) => {\n  //     let feature = features[0]\n  //     console.log('click', feature, features)\n  //   } \n  // }\n\n\n  state = {\n    activeStation: null,\n    zoom: 6.6,\n    progress: 0,\n    qaLevel: 0.3,\n    allMeasures: [],\n    risAttributes: [],\n    tmcAttributes: [],\n    currentData: [],\n    activeLayers: []\n  }\n\n  \n  loadFromLocalStorage() {\n    return window.localStorage ?\n      JSON.parse(window.localStorage.getItem(\"macro-view-geographies\") || \"[]\")\n      : [];\n  }\n\n  saveToLocalStorage(geographies = this.filters.geography.value) {\n    if (window.localStorage) {\n      if (geographies.length) {\n        window.localStorage.setItem(\"macro-view-geographies\", JSON.stringify(geographies));\n      }\n      else {\n        window.localStorage.removeItem(\"macro-view-geographies\")\n      }\n    }\n  }\n\n\n\n  zoomToGeography() {\n    if (!this.mapboxMap) return;\n\n    const bounds = this.getBounds();\n\n    console.log('got bounds', bounds)\n\n    if (bounds.isEmpty()) return;\n\n    const options = {\n      padding: {\n        top: 25,\n        right: 200,\n        bottom: 25,\n        left: 200\n      },\n      bearing: 0,\n      pitch: 0,\n      duration: 2000\n    }\n\n    options.offset = [\n      (options.padding.left - options.padding.right) * 0.5,\n      (options.padding.top - options.padding.bottom) * 0.5\n    ];\n\n    const tr = this.mapboxMap.transform,\n      nw = tr.project(bounds.getNorthWest()),\n      se = tr.project(bounds.getSouthEast()),\n      size = se.sub(nw);\n\n    const scaleX = (tr.width - (options.padding.left + options.padding.right)) / size.x,\n      scaleY = (tr.height - (options.padding.top + options.padding.bottom)) / size.y;\n\n    options.center = tr.unproject(nw.add(se).div(2));\n    options.zoom = Math.min(tr.scaleZoom(tr.scale * Math.min(scaleX, scaleY)), tr.maxZoom);\n\n    this.mapboxMap.easeTo(options);\n  }\n\n  getBounds() {\n    let geoids = this.filters.geography.domain.filter(d => d.name === this.filters.geography.value)[0].value,\n      filtered = this.geographies\n        .filter(({ value }) => geoids.includes(value));\n    \n    return filtered\n      .reduce((a, c) => a.extend(c.bounds), new mapboxgl.LngLatBounds())\n  }\n\n  setActiveStation = () => {\n\n  }\n  \n  init(map, falcor) {\n\n    let states = [\"36\",\"34\",\"09\",\"42\"]\n    return falcor\n      .get(\n        [\"geo\", states, \"geoLevels\"],\n        \n      )\n      .then((res) => {\n        // const mInfo = get(res, [\"json\", \"pm3\", \"measureInfo\"], {});\n        // console.log('measureInfo', res)\n        let geo = get(res,'json.geo',{})\n        const geographies = flatten(states.map(s => geo[s].geoLevels));\n\n        this.geographies = \n         geographies.map(geo => ({\n            name: `${geo.geoname.toUpperCase()} ${geo.geolevel}`,\n            geolevel: geo.geolevel,\n            value: geo.geoid,\n            bounding_box: geo.bounding_box\n        }));\n        //this.filters.geography.value = this.loadFromLocalStorage();\n        //console.log('where am i', this.filters.geography.value)\n        this.zoomToGeography();\n      })\n  }\n\n  onFilterChange(filterName, newValue, prevValue) {\n    switch (filterName) {\n     \n\n      case \"geography\":\n        //console.log('new geography', newValue)\n        this.zoomToGeography(newValue);\n        this.saveToLocalStorage();\n        break;\n      \n      default:\n        console.log(\"no case for filter\", filterName);\n        break;\n    }\n  }\n  \n  getColorScale(domain) {\n    if(this.legend.range.length > domain.length) {\n      this.legend.domain  = []\n      return false\n    }\n    this.legend.domain = [0,10,20,30,40,50,55]\n    //ckmeans(domain,this.legend.range.length).map(d => Math.min(...d))\n    this.updateLegend(this.filters,this.legend)\n    return d3scale.scaleThreshold()\n      .domain(this.legend.domain)\n      .range(this.legend.range);\n  }\n\n  fetchData(falcor) {\n    // console.log('fetchData')\n    let year = +this.filters.year.value,\n      month = +this.filters.month.value,\n      geoids = this.filters.geography.domain.filter(d => d.name === this.filters.geography.value)[0].value,\n      filtered = this.geographies\n        .filter(({ value }) => geoids.includes(value));\n    \n   // console.log('request', ['tig','npmrds',`${month}|${year}`,filtered.map(d => `${d.geolevel}|${d.value}`), 'data'])\n\n    let requests = filtered.reduce((a, c) => { \n      a.push(['tig','npmrds',`${month}|${year}`,`${c.geolevel}|${c.value}`, 'data'])\n      a.push([\"geo\", c.geolevel.toLowerCase(), c.value, \"geometry\"]);\n      return a;\n    },[])\n\n    return falcor.get(...requests)\n      // .then((data) => {\n      //   //console.log('fetchData gem requests',data)\n      //   console.log('got data', data)\n      //   return data\n      // })\n        \n  }\n\n  async download() {\n    let year = +this.filters.year.value,\n      month = +this.filters.month.value,\n      geoids = this.filters.geography.domain.filter(d => d.name === this.filters.geography.value)[0].value,\n      hour = this.filters.hour.value,\n      vehicles = this.filters.vehicles.value,\n      filtered = this.geographies\n        .filter(({ value }) => geoids.includes(value));\n    \n    let falcorCache = this.falcor.getCache()\n    let data = filtered.map(d => get(falcorCache, ['tig','npmrds',`${month}|${year}`,`${d.geolevel}|${d.value}`, 'data','value'],[]))\n      .reduce((out,d) => {\n        return {...out, ...d}\n      }, {})  \n    let selection = Object.keys(data)\n    let geometries = await this.falcor.chunk([\"tmc\",selection,\"year\", year,\"geometries\"])\n    falcorCache = this.falcor.getCache()\n    let geojson =  {\n      type: \"FeatureCollection\",\n      features: selection.map(id => ({\n        type: \"Feature\",\n        geometry: get(falcorCache, [\"tmc\", id,\"year\", year,\"geometries\", \"value\"], \"FAILED\"),\n        properties: {tmc: id, roadname: data[id].roadname, length: data[id].length, ...data[id].s }\n      }))\n    }\n    console.log('Download clicked',geojson)    \n\n    console.log()\n    return shpDownload(geojson,\n          { file: `npmrds_${year}_${month}_${vehicles}`,\n            folder: `npmrds_${year}_${month}_${vehicles}`,\n            types: { \n              polyline: `npmrds_${year}_${month}_${vehicles}`,\n              line: `npmrds_${year}_${month}_${vehicles}`,\n            }\n          },\n          // aliasString,\n          // tmcMetaString\n        )\n  }\n  \n  render(map) {\n    // console.log('render', this)\n    //console.log('testing', map.getStyle().layers)\n    let year = +this.filters.year.value,\n      month = +this.filters.month.value,\n      geoids = this.filters.geography.domain.filter(d => d.name === this.filters.geography.value)[0].value,\n      hour = this.filters.hour.value,\n      filtered = this.geographies\n        .filter(({ value }) => geoids.includes(value));\n\n    this.setActiveLayer(\n      this.layers,\n      this.filters,\n      this.mapboxMap\n    );\n\n    const falcorCache = this.falcor.getCache()\n    let data = filtered.map(d => get(falcorCache, ['tig','npmrds',`${month}|${year}`,`${d.geolevel}|${d.value}`, 'data','value'],[]))\n      .reduce((out,d) => {\n        return {...out, ...d}\n      }, {})\n\n    //console.log('data',data)\n      \n    let domain = Object.values(data).map(d => get(d, `s[${hour}]`, 0))\n    const scale = this.getColorScale(domain.sort((a, b) => a - b));\n    const colors = Object.keys(data).reduce((a, c) => {\n      let val = scale(get(data[c], `s[${hour}]`, 0))\n      a[c] = val ? val : 'hsla(185, 0%, 27%,0.8)'\n      return a;\n    }, {});\n\n    console.log('colors',colors)\n    \n    map.setPaintProperty(`tmc-${year}`, \"line-color\", [\n      \"case\",\n      [\"has\", [\"to-string\", [\"get\", 'tmc']], [\"literal\", colors]],\n      [\"get\", [\"to-string\", [\"get\", 'tmc']], [\"literal\", colors]],\n      \"hsla(185, 0%, 27%,0.0)\",\n    ]);\n    \n    const collection = {\n      type: \"FeatureCollection\",\n      features: filtered\n        .map((f) => ({\n          type: \"Feature\",\n          properties: { geoid: f.value },\n          geometry: get(\n            falcorCache,\n            [\"geo\", f.geolevel.toLowerCase(), f.value, \"geometry\", \"value\"],\n            null\n          ),\n        }))\n        .filter((f) => Boolean(f.geometry)),\n    };\n    map.getSource(\"geo-boundaries-source\").setData(collection);\n\n  }\n\n\n  \n\n}\n\nexport const NPMRDSLayerFactory = (options = {}) => new NPMRDSLayer(options);\n","import {TestTipLayerFactory} from \"./tipLayer\";\nimport {SED2040CountyLevelForecastLayerFactory} from \"./SED2040CountyLevelForecastLayer\";\nimport {SED2040TazLevelForecastLayerFactory} from \"./SED2040TazLevelForecastLayer\";\nimport {SED2050CountyLevelForecastLayerFactory} from \"./SED2050CountyLevelForecastLayer\";\nimport {SED2055CountyLevelForecastLayerFactory} from \"./SED2055CountyLevelForecastLayer\";\nimport {SED2055TazLevelForecastLayerFactory} from \"./SED2055TazLevelForecastLayer\";\nimport {ACSCensusLayerFactory} from \"./ACSCensusLayer\";\nimport {BPMPerformanceMeasuresLayerFactory} from \"./BPMPerformanceMeasuresLayer\";\nimport {HubBoundTravelDataLayerFactory} from \"./HubBoundTravelDataLayer\";\nimport {RTPProjectDataLayerFactory} from \"./RTPProjectDataLayer\";\nimport {NPMRDSLayerFactory} from './npmrds';\n\nexport const layers = {\n    \"tig\": TestTipLayerFactory,\n    \"sed_county_2040\": SED2040CountyLevelForecastLayerFactory,\n    \"sed_county_2050\": SED2050CountyLevelForecastLayerFactory,\n    \"sed_taz_2040\": SED2040TazLevelForecastLayerFactory,\n    \"sed_county_2055\": SED2055CountyLevelForecastLayerFactory,\n    \"sed_taz_2055\": SED2055TazLevelForecastLayerFactory,\n    \"acs_census\": ACSCensusLayerFactory,\n    'bpm_performance': BPMPerformanceMeasuresLayerFactory,\n    'hub_bound_travel_data': HubBoundTravelDataLayerFactory,\n    'rtp_project_data': RTPProjectDataLayerFactory,\n    'npmrds': NPMRDSLayerFactory\n}\n\n","import React from \"react\"\nimport { AvlMap } from \"components/avl-map/src\"\nimport config from \"config.json\"\nimport TigLayout from 'components/tig/TigLayout'\nimport {layers} from \"./layers\";\n\n//import { MacroLayerFactory } from \"./layers/NP/index\"\n\nconst Map = ({ mapOptions,layers}) => {\n\n\n    return (\n        <TigLayout>\n            <div className='w-full flex-1'>\n                <div className='w-full h-full'>\n                    <AvlMap\n                        accessToken={ config.MAPBOX_TOKEN }\n                        mapOptions={ mapOptions }\n                        layers={ [] }\n                        sidebar={{\n                            title: \"Map Test\",\n                            tabs: [\"layers\", \"styles\"],\n                            open: true\n\n                        }}\n                    />\n                </div>\n            </div>\n        </TigLayout>\n    )\n}\n\n\n\nconst MapPage = {\n    path: \"/map\",\n    mainNav: false,\n    name: \"TIG Map\",\n    exact: true,\n    // authLevel: 0,\n    layout: 'Simple',\n    layoutSettings: {\n        fixed: true,\n        navBar: 'top',\n        headerBar: false\n    },\n    component: {\n        type: Map,\n        props: {\n            mapOptions: {\n                zoom: 6.6,\n                styles: [{name: \"Light\",\n                    style: 'mapbox://styles/am3081/ckm86j4bw11tj18o5zf8y9pou' }]\n            },\n            layers: [\n                layers.rtp_project_data(),\n                // layers.hub_bound_travel_data(),\n                // layers.bpm_performance(),\n                // layers.acs_census(),\n                // layers.sed_taz_2055(),\n                // layers.sed_county_2055(),\n                // layers.sed_taz_2040(),\n                // layers.sed_county_2040(),\n                // layers.sed_county_2050(),\n                // layers.tig()\n\n            ]\n        },\n        wrappers: [\n            \"avl-falcor\"\n        ]\n    }\n}\n\n\nconst routes = [\n    MapPage\n];\nexport default routes;\n","import React,{useMemo} from \"react\"\nimport { Legend } from \"@availabs/avl-components\";\n\nconst LegendContainer = ({activeLayers, ...props}) => {\n    return (\n        <div className=' w-full px-4'>\n            <h4 className='text-lg font-medium'>Legends</h4>\n            {\n                activeLayers.map((layer,i) => <LegendComp key={i} layer={layer} /> )\n            }\n        </div>\n    )\n}\n\nconst LegendComp = ({layer}) => {\n    const {legend} = layer\n    return (\n        <div className='bg-white p-2 rounded w-full my-1'>\n            <h4 className='text-lg font-medium'>{layer.name}</h4>\n            <h4 className='text-md font-medium'>{legend.units}</h4>\n            {\n                legend.domain.map((d,i) =>\n                    <div className=' flex align-baseline'>\n                        <div style={{backgroundColor: legend.range[i], width:20, height:20, display:'inline-block' }} className='m-1'/>\n                        <div className='flex-1 pl-2'>{d} - {legend.domain[i+1]}</div>\n                    </div>\n                )\n            }\n        </div> \n    )\n}\n\nexport default LegendContainer","import React from \"react\"\n\nimport { Select, useTheme,/*CollapsibleSidebar*/ } from \"@availabs/avl-components\"\n\n\n\nconst LayersTab = ({ inactiveLayers, activeLayers, MapActions, ...rest }) => {\n\n  const theme = useTheme();\n\n  return (\n    <>\n      { !inactiveLayers.length ? null :\n        <div className={ `mb-1 p-1 ${ theme.menuBg } ${theme.rounded}` }>\n          <div className={ `p-1 ${ theme.bg } ${theme.rounded}` }>\n            <Select options={ inactiveLayers }\n              placeholder=\"Add a Layer...\"\n              accessor={ ({ name }) => name }\n              value={ null } multi={ false }\n              searchable={ false }\n              onChange={ MapActions.addLayer }/>\n          </div>\n        </div>\n      }\n      <h4>Active Layers</h4>\n      { activeLayers.map(layer =>\n          <div>\n            {layer.name}\n          </div>\n        )\n      }\n    </>\n  )\n}\n\nexport default LayersTab","import React from \"react\"\n\nimport { Select, useTheme,/*CollapsibleSidebar*/ } from \"@availabs/avl-components\"\n\n\n\nconst Download = ({ inactiveLayers, activeLayers, MapActions, ...rest }) => {\n  const [loading, setLoading] = React.useState(false)\n  const theme = useTheme();\n\n  const download = (layer) => {\n      if(layer.download) {\n        setLoading(true)\n        layer\n          .download()\n          .then(d => {\n            console.log('done')\n            setLoading(false)\n          })\n      }\n  }\n\n  return (\n    <>\n      <h4>Download</h4>\n      { activeLayers.map(layer =>\n          <div key={layer.name}>\n            <div className='cursor-pointer' onClick={e => download(layer)}>\n            {layer.name}\n            </div>\n            {\n              loading ? <div> download processing ... </div> : ''\n            }\n          </div>\n        )\n      }\n    </>\n  )\n}\n\nexport default Download","import React from \"react\"\n\nimport { Select, useTheme,/*CollapsibleSidebar*/ } from \"@availabs/avl-components\"\n\n\n\nconst Attribution = ({ inactiveLayers, activeLayers, MapActions, ...rest }) => {\n\n  const theme = useTheme();\n\n \n  return (\n    <>\n      \n      <h4>Attribution</h4>\n      { activeLayers.map(layer =>\n          <div key={layer.name}>\n            <div>\n            {layer.name}\n            </div>\n            {layer.attribution}\n          </div>\n        )\n      }\n    </>\n  )\n}\n\nexport default Attribution","import React,{useMemo} from \"react\"\nimport { AvlMap } from \"../../components/avl-map/src\"\nimport config from \"config.json\"\nimport { withAuth } from '@availabs/avl-components'\nimport {layers} from \"./layers\";\nimport {useParams} from 'react-router-dom'\nimport routingConfig from './routing-config/routingConfig.json'\n\nimport TigLayout from 'components/tig/TigLayout'\n\nimport LegendComp from './components/LegendSidebar'\nimport AddLayersComp from './components/AddLayers'\nimport Download from './components/Download'\nimport Attribution from './components/Attribution'\n\nconst testComp = () => {\n    return (<div>hello</div>)\n}\n\n\n\nconst Map = withAuth(({ mapOptions,layers,views}) => {\n    const {viewId} = useParams()\n\n    let activelayers = []\n    const layer = useMemo(() => {\n        let layerVal = routingConfig.reduce((a, c) => {\n            if (c.value === viewId) {\n                a.push(layers[0][c.layer]({name:c.name, viewId:viewId, setActive: true}))\n                activelayers.push(c.layer)\n            }\n            else if (!activelayers.includes(c.layer)) {\n                a.push(layers[0][c.layer]({name:c.name, setActive: false}))\n                activelayers.push(c.layer)\n            }\n            \n            return a\n        }, [])\n        //console.log('layerVal', layerVal)\n        return layerVal\n    }, [viewId,layers])\n\n    \n\n    return (\n        <TigLayout>\n             <div className='w-full h-full' style={{height: '800px'}}>   \n                <AvlMap\n                    accessToken={ config.MAPBOX_TOKEN }\n                    mapOptions={ mapOptions }\n                    layers={layer}\n                    sidebarTabPosition='side'\n                    navigationControl=\"bottom-right\"\n                    sidebar={{\n                        title: \"\",\n                        tabs: [\n                            {\n                                icon: \"fa fa-bars\",\n                                Component: LegendComp\n                            },\n                            \"layers\", \n                            \"styles\",\n                            {\n                                icon: \"fa fa-plus\",\n                                Component: AddLayersComp\n                            },\n                            {\n                                icon: \"fa fa-download\",\n                                Component: Download\n                            },\n                            {\n                                icon: \"fa fa-info-circle\",\n                                Component: Attribution\n                            },\n                        ],\n                        open: false\n\n                    }}\n\n                />\n               \n            </div>\n        </TigLayout>\n    )\n})\n\n\nconst MapPage = {\n    path: `/views/:viewId/map`,\n    mainNav: false,\n    name: \"TIG Map\",\n    exact: true,\n    // authLevel: 0,\n    layout: 'Simple',\n    layoutSettings: {\n        fixed: true,\n        navBar: 'top',\n        headerBar: false\n    },\n    component: {\n        type: Map,\n        props: {\n            mapOptions: {\n                zoom: 8.5,\n                center: [-73.911895, 40.88],\n                styles: [\n                    {name: \"Streets\",\n                    style: 'mapbox://styles/am3081/ckt3271or0nnu17oikkvl0eme' },\n                    {\n                        name: \"Topgraphic\",\n                        style: 'mapbox://styles/am3081/ckidwyrw22uak19pboub25qix'\n                    },\n                     {name: \"Sattelite\",\n                    style: 'mapbox://styles/am3081/cjya6wla3011q1ct52qjcatxg' },\n                     {name: \"Sattelite Streets\",\n                    style: 'mapbox://styles/am3081/cjya70364016g1cpmbetipc8u' },\n                    {name: \"Light\",\n                    style: 'mapbox://styles/am3081/ckm86j4bw11tj18o5zf8y9pou' },\n                    {name: \"Dark\",\n                    style: 'mapbox://styles/am3081/ckm85o7hq6d8817nr0y6ute5v' }\n                    ]\n            },\n            layers: [\n               layers\n            ]\n        },\n        wrappers: [\n            \"avl-falcor\"\n        ]\n    }\n}\n\n\nconst routes = [\n    MapPage\n];\nexport default routes;\n","import React from \"react\"\nimport { withAuth } from '@availabs/avl-components'\n\n\nimport TigLayout from 'components/tig/TigLayout'\n\nconst Chart = withAuth(({ mapOptions,layers,views}) => {\n    return (\n        <TigLayout>\n            <div className='w-full flex-1 flex'>   \n                <h4>Chart Coming</h4>\n            </div>\n        </TigLayout>\n    )\n})\n\n\nconst ChartPage  = {\n    path: `/views/:viewId/Chart`,\n    mainNav: false,\n    name: \"TIG Chart\",\n    exact: true,\n    // authLevel: 0,\n    layout: 'Simple',\n    component: Chart\n}\n\nexport default ChartPage;\n","import {useState, useMemo, useEffect} from 'react'\nimport {Select, Input, Table, useFalcor} from '@availabs/avl-components'\nimport {filters} from 'pages/map/layers/npmrds/filters.js'\nimport get from \"lodash.get\";\nimport flatten from \"lodash.flatten\";\n\nconst fetchGeo = (falcor, states) => {\n    return falcor.get([\"geo\", states, \"geoLevels\"])\n}\n\nconst fetchData = (falcor, filtered, month, year, setLoading) => {\n    if (!filtered.length) return null;\n\n    setLoading(true)\n    let requests = filtered.reduce((a, c) => {\n        a.push(['tig','npmrds',`${month}|${year}`,`${c.geolevel}|${c.value}`, 'data'])\n        a.push([\"geo\", c.geolevel.toLowerCase(), c.value, \"geometry\"]);\n        return a;\n    },[])\n\n    return falcor.get(...requests).then(d => {\n        setLoading(false)\n    })\n}\n\nconst RenderTable = (data, pageSize) => useMemo(() =>\n    <Table\n        data={data}\n        columns={\n            Object.keys(data[0] || {}).map(c => ({\n                Header: c,\n                accessor: c,\n                align: 'center'\n            }))\n        }\n        initialPageSize={pageSize}\n        pageSize={pageSize}\n        striped={true}\n    />, [data, pageSize])\n\nconst NpmrdsTable = () => {\n    const {falcor, falcorCache} = useFalcor();\n    const [loading, setLoading] = useState(false)\n    const [geography, setGeography] = useState('All')\n    const [year, setYear] = useState(2019)\n    const [month, setMonth] = useState(1)\n    const [hour, setHour] = useState(15)\n    const [dow, setDow] = useState('Thursday')\n    const [vehicles, setVehicles] = useState('All Vehicles')\n    const [pageSize, setPageSize] = useState(50)\n    const [speedFrom, setSpeedFrom] = useState(0)\n    const [speedTo, setSpeedTo] = useState(100)\n\n    const getterSetters = {\n        geography: {get: geography, set: setGeography},\n        year: {get: year, set: setYear},\n        month: {get: month, set: setMonth},\n        hour: {get: hour, set: setHour},\n        dow: {get: dow, set: setDow},\n        vehicles: {get: vehicles, set: setVehicles},\n        pageSize: {get: pageSize, set: setPageSize},\n        speedFrom: {get: speedFrom, set: setSpeedFrom},\n        speedTo: {get: speedTo, set: setSpeedTo},\n    }\n\n    const states = [\"36\",\"34\",\"09\",\"42\"];\n\n    useEffect(() => fetchGeo(falcor, states), []);\n\n    const filtered = useMemo(() => {\n        let allGeo = get(falcorCache,['geo'],{})\n        if(!Object.keys(allGeo).length) return [];\n\n        let geographies =\n            flatten(states.map(s => allGeo[s].geoLevels.value))\n                .map(geo => ({\n                    name: `${geo.geoname.toUpperCase()} ${geo.geolevel}`,\n                    geolevel: geo.geolevel,\n                    value: geo.geoid\n                }));\n\n        let geoids = filters.geography.domain.filter(d => d.name === geography)[0].value\n\n        return geographies.filter(({ value }) => geoids.includes(value));\n    }, [falcorCache, geography, month, year]);\n\n    useEffect(() => fetchData(falcor, filtered, month, year,setLoading), [falcorCache, geography, month, year]);\n\n    let data = useMemo(() => {\n        return filtered.map(d => get(falcorCache, ['tig','npmrds',`${month}|${year}`,`${d.geolevel}|${d.value}`, 'data','value'],[]))\n            .reduce((out,d) => {\n                return [\n                    ...out,\n                    ...Object.keys(d)\n                        .filter(d1 =>\n                            (!speedFrom || d[d1].s.find(s1 => s1 >= speedFrom && (!speedTo || s1 <= speedTo))) &&\n                            (!speedTo || d[d1].s.find(s1 => s1 <= speedTo && (!speedFrom || s1 >= speedFrom)))\n                        )\n                        .map(d1 => (\n                        {\n                            tmc: d1,\n                            roadname: d[d1].roadname,\n                            // length: d[d1].length,\n                            ...d[d1].s.reduce((accHours, value, hour) => {\n                                if(\n                                    (!speedFrom || (value >= speedFrom && (!speedTo || value <= speedTo))) &&\n                                    (!speedTo || (value <= speedTo && (!speedFrom || value >= speedFrom)))\n                                ){\n                                    accHours[('0' + hour + ':00').slice(-5)] = value;\n                                }else{\n                                    accHours[('0' + hour + ':00').slice(-5)] = null\n                                }\n                                return accHours\n                            }, {})\n                        }))\n                ]\n            }, [])\n    }, [falcorCache, month, year, filtered, speedFrom, speedTo])\n\n    return (\n        <div className='w-full'>\n            <div> NPMRDS Speed (mph) </div>\n\n            <div className={`w-5 flex pb-1`}>\n                <label  className={`self-center px-1 font-bold text-sm`}>Area:</label>\n                <Select\n                    id={'geography'}\n                    {...filters.geography}\n                    onChange={e => getterSetters.geography.set(e)}\n                    value={getterSetters.geography.get}\n                /> <span  className={`self-center px-1 font-bold text-sm`}>Data</span>\n            </div>\n\n            <div className={'flex flex-row pb-5'}>\n                {\n                    Object.keys(filters)\n                        .filter(f => !['hour', 'geography'].includes(f))\n                        .map((f, fI) =>\n                            <>\n                                <label className={`self-center px-1 font-bold text-sm`}>{filters[f].name}:</label>\n                                <Select\n                                    id={f}\n                                    {...filters[f]}\n                                    onChange={e => getterSetters[f].set(e)}\n                                    value={getterSetters[f].get}\n                                />\n                            </>)\n                }\n            </div>\n\n            <div className={'flex flex-row pb-5 items-center w-1/2'}>\n                <label  className={`px-1 font-bold text-sm whitespace-nowrap`}>Speed (mph) from</label>\n                <Input\n                    id={'speedFrom'}\n                    value={speedFrom}\n                    onChange={e => getterSetters.speedFrom.set(e)}\n                    \n                />\n                <label  className={`px-1 font-bold text-sm`}>to</label>\n                <Input\n                    id={'speedTo'}\n                    value={speedTo}\n                    onChange={e => getterSetters.speedTo.set(e)}\n                    \n                />\n\n                <label  className={`px-1 font-bold text-sm`}>Show:</label>\n                <Select\n                    id={'pageSize'}\n                    domain={[10, 25, 50, 100]}\n                    onChange={e => getterSetters.pageSize.set(e)}\n                    value={pageSize}\n                    multi={false}\n                /><span  className={`px-1 font-bold text-sm`}>entries</span>\n            </div>\n            {loading ? <div>Processing...</div> : ''}\n            <div className='w-full overflow-x-scroll scrollbar font-sm'>\n                {RenderTable(data, pageSize)}\n            </div>\n        </div>\n    )\n}\n\nexport default NpmrdsTable","import NpmrdsTable from \"./npmrdsTable\";\n\nexport const tables = {\n    npmrds: NpmrdsTable\n}","import React, {useMemo} from \"react\"\nimport get from 'lodash.get'\nimport { withAuth } from '@availabs/avl-components'\nimport TigLayout from 'components/tig/TigLayout'\nimport {useParams} from \"react-router-dom\";\nimport routingConfig from \"../map/routing-config/routingConfig.json\";\nimport {tables} from \"./tables\";\n\nconst Table = withAuth(({ mapOptions,layers,views}) => {\n    const {viewId} = useParams();\n\n    const CurrTable = useMemo(() => {\n        let layerVal = get(routingConfig.filter(c => c.value === viewId), [0, 'layer'],  '')\n\n        return tables[layerVal]\n\n    }, [viewId,layers])\n\n    return (\n        <TigLayout>\n            <div className='w-full flex-1 flex'>   \n                <CurrTable />\n            </div>\n        </TigLayout>\n    )\n})\n\n\nconst TablePage  = {\n    path: `/views/:viewId/table`,\n    mainNav: false,\n    name: \"TIG Table\",\n    exact: true,\n    // authLevel: 0,\n    layout: 'Simple',\n    component: Table\n}\n\nexport default TablePage;\n","import React from \"react\"\nimport { withAuth } from '@availabs/avl-components'\n\n\nimport TigLayout from 'components/tig/TigLayout'\n\nconst MetaData = withAuth(({ mapOptions,layers,views}) => {\n  \n\n\n    return (\n        <TigLayout>\n            <div className='w-full flex-1 flex'>   \n                <h4>MetaData Coming</h4>\n               \n            </div>\n        </TigLayout>\n    )\n})\n\n\nconst MetaDataPage  = {\n    path: `/views/:viewId/metadata`,\n    name: \"TIG MetaData\",\n    exact: true,\n    // authLevel: 0,\n    layout: 'Simple',\n    component: MetaData\n}\n\nexport default MetaDataPage;\n","import Catalog from \"pages/catalog\"\nimport Views from \"pages/catalog/tigDataSources/DataSourceView\"\nimport AdminLanding from \"pages/catalog/admin\"\nimport NoMatch from \"pages/404\"\nimport Auth from \"pages/auth\"\nimport TestMap from \"pages/map/MapIndex\"\nimport Map from 'pages/map'\nimport Chart from 'pages/chart'\nimport Table from 'pages/table'\nimport Metadata from 'pages/metadata'\n\nconst Routes = [\n  Catalog,\n  Views,\n  AdminLanding,\n  Auth,\n  ...Map,\n  Table,\n  Chart,\n  Metadata,\n  ...TestMap,\n\n  NoMatch\n]\n\nexport default Routes\n","import React from 'react';\nimport { BrowserRouter, Switch } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport ScrollToTop from 'utils/ScrollToTop'\nimport { createBrowserHistory } from 'history';\nimport Routes from 'Routes';\n\nimport {\n  DefaultLayout,\n  Messages\n} from \"@availabs/avl-components\"\n\n//export const history = createBrowserHistory({basename: process.env.PUBLIC_URL});\n\nclass App extends React.Component {\n  render() {\n    return (\n      <BrowserRouter basename={process.env.REACT_APP_PUBLIC_URL}>\n        <ScrollToTop />\n        <Switch>\n          { Routes.map((route, i) =>\n              <DefaultLayout key={ i } { ...route } { ...this.props }\n                menus={ Routes.filter(r => r.mainNav) }/>\n            )\n          }\n        </Switch>\n        <Messages/>\n      </BrowserRouter>\n    );\n  }\n}\nconst mapStateToProps = state => {\n    return ({\n\n    });\n}\n\nconst mapDispatchToProps = { createBrowserHistory };\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(App);\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\n\nimport { messages } from \"@availabs/avl-components\"\n\nimport { Reducers } from \"@availabs/ams\"\n\nconst reducer = combineReducers({\n  ...Reducers,\n  messages\n});\n\nexport default createStore(reducer, applyMiddleware(thunk))\n","import { Compositions, composeTheme } from \"@availabs/avl-components\";\n\nconst { $compositions } = Compositions;\n\n$compositions.button[1][\"$default\"] = \"text-blueGray-200 disabled:text-blueGray-300\";\n$compositions.button[2][\"$default\"] = \"border-blueGray-200\";\n$compositions.button[3][\"$default\"] = \"hover:bg-blueGray-200 hover:text-blueGray-900\";\n\n$compositions.button[1][\"Dark\"] = \"bg-blueGray-900 text-current disabled:text-gray-300\";\n$compositions.button[2][\"Dark\"] = \"border-blueGray-900\";\n$compositions.button[3][\"Dark\"] = \"hover:bg-blueGray-800 hover:border-blueGray-800\";\n$compositions.button[4][\"Wide\"] = \"px-6 py-0 @textSmall\";\n\n//console.log(\"$compositions\",$compositions)\n\n// import {composeTheme} from \"@availabs/avl-components/dist/Themes/utils\";\n\nconst colors = {\n  transparent: {\n    contentBg: \"\",\n    accentColor: \"blue-600\",\n    accentBg: \"hover:bg-blue-600\",\n    borderColor: \"border-gray-200\",\n    textColor: \"text-gray-800\",\n    highlightColor: \"text-white\",\n  },\n  white: {\n    contentBg: \"bg-white\",\n    accentColor: \"blue-600\",\n    accentBg: \"hover:bg-blue-600\",\n    borderColor: \"border-gray-100\",\n    textColor: \"text-gray-600\",\n    highlightColor: \"text-white\",\n  },\n  dark: {\n    contentBg: \"bg-darkblue-600\",\n    accentColor: \"blue-600\",\n    accentBg: \"hover:bg-blue-600\",\n    borderColor: \"border-gray-700\",\n    textColor: \"text-gray-200\",\n    highlightColor: \"text-white\",\n  },\n  gray: {\n    contentBg: \"bg-gray-800\",\n    accentColor: \"gray-500\",\n    accentBg: \"hover:bg-gray-500\",\n    borderColor: \"border-gray-600\",\n    textColor: \"text-gray-300\",\n    highlightColor: \"text-gray-200\",\n  },\n  bright: {\n    contentBg: \"bg-blue-700\",\n    accentColor: \"blue-400\",\n    accentBg: \"hover:bg-blue-400\",\n    borderColor: \"border-blue-600\",\n    textColor: \"text-white\",\n    highlightColor: \"text-white\",\n  },\n};\n\nconst sizes = {\n  compact: {\n    wrapper: \"w-64\",\n    sideItem: \"flex mx-6 pr-4 py-2 text-sm font-light hover:pl-4\",\n    topItem: \"flex items-center text-sm px-4 border-r h-12\",\n    icon: \"mr-3 text-lg\",\n  },\n  full: {\n    wrapper: \"w-64\",\n    sideItem: \"flex mx-4 pr-4 py-4 text-base font-base border-b hover:pl-4\",\n    topItem: \"flex pr-4 py-2 text-sm font-light\",\n    icon: \"mr-4 text-2xl\",\n  },\n  mini: {\n    wrapper: \"w-20 overflow-x-hidden\",\n    sideItem: \"flex pr-4 py-4 text-base font-base border-b\",\n    topItem: \"flex px-4 items-center text-sm font-light \",\n    icon: \"w-20 mr-4 text-4xl\",\n  },\n  micro: {\n    wrapper: \"w-14 overflow-x-hidden\",\n    sideItem: \"flex pr-4 py-4 text-base font-base border-b\",\n    topItem: \"flex mx-6 pr-4 py-2 text-sm font-light\",\n    icon: \"w-14 mr-4 text-2xl\",\n  },\n};\n\nlet color = \"white\";\nlet size = \"compact\";\n\n\n\nconst TDS_THEME_BASE = {\n    /* ----- \n     Side Nav Theme Components Minimal \n  ------*/\n\n  sidenavWrapper: `${colors[color].contentBg} ${sizes[size].wrapper} border-r border-gray-200 h-full`,\n  menuIconSide: ` text-${colors[color].accentColor} ${sizes[size].icon} group-hover:${colors[color].highlightColor}`,\n  navitemSide: ` \n    group font-sans \n    ${sizes[size].sideItem} ${colors[color].textColor} ${colors[color].borderColor} \n    ${colors[color].accentBg} hover:${colors[color].highlightColor} \n    focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 \n    transition-all cursor-pointer\n  `,\n\n  navitemSideActive: `\n    group flex pl-8 pr-4 py-2 bg-${colors[color].highlightColor} text-base font-medium text-darkblue-500 focus:outline-none hover:text-indigo-800 focus:text-indigo-800 focus:bg-blue-200 focus:border-indigo-700 transition duration-150 ease-in-out`,\n\n  /* ----- \n     Top Nav Theme Components Minimal \n  ------*/\n  topnavWrapper: `w-full h-12 ${colors[color].contentBg}`,\n  topnavContent: `flex w-full h-full`,\n  topnavMenu: `hidden md:flex flex-1 h-full overflow-x-auto overflow-y-hidden scrollbar-sm`,\n  menuIconTop: `text-${colors[color].accentColor} ${sizes[size].icon} group-hover:${colors[color].highlightColor}`,\n\n  navitemTop: `\n    group font-sans w-full\n    ${sizes[size].topItem} ${colors[color].textColor} ${colors[color].borderColor} \n    ${colors[color].accentBg} hover:${colors[color].highlightColor} \n    focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 \n    transition cursor-pointer`,\n  //`px-4 text-sm font-medium tracking-widest uppercase inline-flex items-center  border-transparent  leading-5 text-white hover:bg-white hover:text-darkblue-500 border-gray-200 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out h-full`,\n  topmenuRightNavContainer: \"hidden md:block h-full\",\n  navitemTopActive: `group font-sans w-full\n    ${sizes[size].topItem} ${colors[color].textColor} ${colors[color].borderColor} \n    ${colors[color].accentBg} hover:${colors[color].highlightColor} \n    focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 \n    transition cursor-pointer`,\n\n  /* ------------------------- */\n\n  text: 'text-black-100',\n  textContrast: \"text-white\",\n  border: \"border-blueGray-100\",\n\n\n\n  textInfo: \"text-cyan-300\",\n  bgInfo: \"bg-cyan-400\",\n  borderInfo: \"border-cyan-400\",\n\n  textSuccess: \"text-green-400\",\n  bgSuccess: \"bg-green-400\",\n  borderSuccess: \"border-green-400\",\n\n  textDanger: \"text-red-400\",\n  bgDanger: \"bg-red-400\",\n  borderDanger: \"border-red-400\",\n\n  textWarning: \"text-yellow-400\",\n  bgWarning: \"bg-yellow-400\",\n  borderWarning: \"border-yellow-400\",\n\n  textLight: \"text-blueGray-300\", // <-- for text styled like placeholder but can't be selected with ::placeholder\n  // these 2 should be equal\n  placeholder: 'placeholder-blueGray-300',\n\n  menuIcon: 'mr-3 h-6 w-6',\n  topMenuBorder: 'border-b border-blueGray-800',\n  headerShadow: '',\n\n  bg: 'bg-white',\n\n  menuBg: 'bg-white',\n  menuBgHover: 'hover:bg-blueGray-600',\n  menuBgActive: 'bg-white',\n  menuBgActiveHover: 'hover:bg-blue-500',\n  menuText : \"text-gray-700\",\n  menuTextHover: \"hover:text-cyan-300\",\n  menuTextActive: \"text-cyan-300\",\n  menuTextActiveHover: \"hover:text-cyan-200\",\n\n  \n  sidebarBg: 'bg-white',\n  sidebarBorder: '',\n\n  headerBg: 'bg-blueGray-900',\n  headerBgHover: \"hover:bg-blueGray-700\",\n\n  inputBg: \"bg-white disabled:bg-gray-300 cursor-pointer focus:outline-none\",\n  inputBorder: \"rounded border border-gray-300 hover:border-blueGray-400 focus:border-blueGray-300 disabled:border-transparent\",\n  inputBgDisabled: \"bg-blueGray-300 cursor-not-allowed focus:outline-none\",\n  inputBorderDisabled: \"rounded border border-blueGray-400 hover:border-blueGray-400\",\n  inputBgFocus: \"bg-blue-200 cursor-pointer focus:outline-none\",\n  inputBorderFocus: \"rounded border hover:border-blueGray-300 focus:border-blueGray-300 border-blueGray-300\",\n\n  textBase: \"text-base\",\n  textSmall: \"text-sm\",\n  textLarge: \"text-lg\",\n  paddingBase: \"py-1 px-2\",\n  paddingSmall: \"py-0 px-1\",\n  paddingLarge: \"py-2 px-4\",\n\n  accent1: 'bg-gray-100',\n  accent2: 'bg-gray-200',\n  accent3: 'bg-gray-300',\n  accent4: 'bg-gray-400',\n\n  highlight1: \"bg-cyan-400\",\n  highlight2: \"bg-cyan-300\",\n  highlight3: \"bg-cyan-200\",\n  highlight4: \"bg-cyan-100\",\n\n  contentBg: 'bg-white',\n  contentWidth: 'w-full max-w-7xl',\n  contentPadding: \"py-8\",\n\n  sidebarW: '56',\n  transition: \"transition ease-in-out duration-150\",\n\n  tableInfoBar: \"bg-white border-2 border-gray-300\",\n  tableRow: 'bg-white hover:bg-gray-200 @transition',\n  tableRowStriped: 'odd:bg-white even:bg-gray-200 hover:bg-gray-200 @transition',\n\n  tableCell: 'px-4 py-1 whitespace-no-wrap border-2 border-gray-300',\n\n  tableHeader: \"px-4 py-2 pb-1 border-2 border-gray-300 text-left text-black font-medium uppercase first:rounded-tl-md last:rounded-tr-md\",\n\n  $compositions\n}\nconst TDS_THEME = composeTheme(TDS_THEME_BASE);\n\nexport default TDS_THEME;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport { API_HOST } from 'config'\nimport { AUTH_HOST, PROJECT_NAME, CLIENT_HOST } from 'config'\n\nimport { Provider } from 'react-redux';\nimport store from 'store';\n\nimport TDS_THEME from \"./theme\"\nimport {\n  FalcorProvider,\n  ThemeContext,\n  falcorGraph,\n  addComponents,\n  addWrappers\n} from \"@availabs/avl-components\"\n\nimport reportWebVitals from './reportWebVitals';\n\n//\n// import DmsComponents from \"components/dms\"\n// import DmsWrappers from \"components/dms/wrappers\"\n\nimport {\n  Components as AmsComponents,\n  Wrappers as AmsWrappers,\n  enableAuth\n} from \"@availabs/ams\"\n\nimport 'styles/tailwind.css';\nimport 'styles/index.css';\nimport 'styles/os-icons.css';\nimport 'styles/font-awesome/css/all.css'\n\n// addComponents(DmsComponents);\n// addWrappers(DmsWrappers);\n\naddComponents(AmsComponents);\naddWrappers(AmsWrappers);\n\nconst AuthEnabledApp = enableAuth(App, { AUTH_HOST, PROJECT_NAME, CLIENT_HOST });\n\n\nReactDOM.render(\n  <React.StrictMode>\n   \t<Provider store={ store }>\n  \t\t<FalcorProvider falcor={ falcorGraph(API_HOST) }>\n        <ThemeContext.Provider value={TDS_THEME}>\n          <AuthEnabledApp />\n        </ThemeContext.Provider>\n      </FalcorProvider>\n  \t</Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\nreportWebVitals();\n","export const PROJECT_NAME = 'NPMRDS';\n\nlet API_HOST = 'https://graph.availabs.org';\nlet AUTH_HOST = 'https://availauth.availabs.org';\nlet CLIENT_HOST = 'https://npmrds.availabs.org';\n\nif (process.env.NODE_ENV === 'development') {\n  //API_HOST = 'http://localhost:4444';\n  // AUTH_HOST = 'http://localhost:3457';\n  CLIENT_HOST = 'http://localhost:3000';\n}\nexport { API_HOST, AUTH_HOST, CLIENT_HOST };\n"],"sourceRoot":""}