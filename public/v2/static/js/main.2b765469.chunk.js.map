{"version":3,"sources":["utils/ScrollToTop.js","pages/catalog/card-menu/Menu.js","pages/catalog/tigDataSources/DatasourceList.js","pages/catalog/tigDataSources/RecentActivity.js","components/tig/TigNav.js","components/tig/TigBreadcrumbs.js","components/tig/TigLayout.js","pages/catalog/index.js","pages/catalog/tigDataSources/DataSourceView.js","pages/catalog/admin.js","pages/404.js","pages/auth/index.js","components/avl-map/src/components/CollapsibleSidebar.js","components/avl-map/src/components/LayerPanel.js","components/avl-map/src/components/Sidebar.js","components/avl-map/src/components/LoadingLayer.js","components/avl-map/src/components/HoverCompContainer.js","components/avl-map/src/components/InfoBoxContainer.js","components/avl-map/src/components/DraggableModal.js","components/avl-map/src/components/MapAction.js","components/avl-map/src/avl-map.js","components/avl-map/src/components/DefaultHoverComp.js","components/avl-map/src/LayerContainer.js","pages/map/layers/layerHost.js","pages/map/wrappers/fetcher.js","pages/map/layers/tipLayer.js","pages/map/layers/SED2040CountyLevelForecastLayer.js","pages/map/layers/SED2040TazLevelForecastLayer.js","pages/map/layers/SED2050CountyLevelForecastLayer.js","pages/map/layers/SED2055CountyLevelForecastLayer.js","pages/map/layers/SED2055TazLevelForecastLayer.js","pages/map/config/acsCensusCategoryMappings.js","pages/map/layers/ACSCensusLayer.js","pages/map/layers/BPMPerformanceMeasuresLayer.js","pages/map/layers/HubBoundTravelDataLayer.js","pages/map/layers/RTPProjectDataLayer.js","pages/map/utils/color-ranges.js","pages/map/utils/legend.js","pages/map/map-styles/npmrds.js","pages/map/map-styles/traffic_signals.js","pages/map/layers/npmrds/filters.js","pages/map/layers/npmrds/index.js","pages/map/layers/index.js","pages/map/MapIndex.js","pages/map/index.js","pages/chart/index.js","pages/table/index.js","pages/metadata/index.js","Routes.js","App.js","store/index.js","theme/index.js","reportWebVitals.js","index.js","config.js"],"names":["ScrollToTop","pathname","useLocation","useEffect","arg","window","scrollTo","classNames","classes","filter","Boolean","join","MenuComponent","className","as","open","Button","show","Fragment","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Items","static","Item","active","SOURCES_ATTRIBUTES","DatasourceList","useFalcor","falcor","falcorCache","a","get","length","from","to","fetchData","sourcesList","React","useMemo","console","log","sourcesById","data","Object","keys","map","id","item","i","state","name","description","Menu","processData","d","dI","value","link","TigNav","withAuth","leftMenu","alt","style","height","src","rightMenu","TigBreadcrumbs","children","useParams","viewId","dataSourceId","location","history","useHistory","getLength","getDatasources","dsdata","datasourcesIds","k","getDsLengths","viewGet","datasourceId","sources","ds","dataSourceIds","datasources","reduce","out","dsId","bySource","views","view","source_id","byView","forEach","selected","activeSource","actions","path","activeAction","split","pop","toLowerCase","background","onChange","e","url","push","Options","personIdx","Option","href","TigLayout","Landing","RecentActivity","config","exact","component","title","shadowed","user","authLevel","layout","VIEWS_ATTRIBUTES","mainNav","useState","activeId","setActiveId","sortIds","b","response","graph","sort","dataSource","cache","navigation","icon","MapIcon","current","count","TableIcon","FolderIcon","ChartBarIcon","onClick","onClickView","layoutSettings","fixed","headerBar","logo","navBar","auth","type","props","showHeaders","wrappers","addToGroup","SidebarContext","createContext","useSidebarContext","useContext","InitialState","Comp","top","compProps","transitioning","InitState","Reducer","action","payload","Shift","unit","Toggle","togglePosition","position","doToggle","dir","theme","padding","textInfo","sidebarBg","menuBg","transform","transition","CollapsibleSidebar","placeBeside","width","startOpen","customTheme","minWidth","showToggle","shift","useReducer","dispatch","setOpen","useCallback","timeout","setTimeout","useRef","clearTimeout","node","setNode","extendSidebar","sidebarTop","getBoundingClientRect","passCompProps","closeExtension","contextValue","useTheme","styleWidth","Provider","Expandable","ref","forwardRef","heightFull","hFull","ExtendedSidebar","remMinWidth","left","LayerPanel","layer","layersLoading","rest","toggleOpen","filters","values","layerId","bg","removable","multi","display","legend","Icon","cursor","menuTextActive","LayerHeader","MapActions","isDynamic","removeDynamicLayer","removeLayer","marginTop","toolbar","tool","LegendControls","range","useLegendReducer","toolState","updateLegend","update","rect","LegendSidebar","accent1","colors","small","LayerTool","Tool","tooltip","isVisible","toggleVisibility","checkDefaultTools","SidebarTabs","layers","Component","inactiveLayers","activeLayers","rounded","options","placeholder","accessor","searchable","addLayer","styles","mapStyles","styleIndex","mapboxMap","loading","setLoading","done","once","off","updateStyle","index","setMapStyle","imageUrl","accent2","borderInfo","Tab","sidebarTabIndex","setSidebarTab","Sidebar","tabs","showSidebar","sidebarTabPosition","Tabs","tab","LoadingLayer","progress","scale","color","getTranslate","pos","x","y","yMax","yTrans","getPinnedTranslate","orientation","getTransform","RemoveButton","PinnedHoverComp","remove","project","lngLat","boxShadow","HoverCompContainer","InfoBoxContainer","c","bool","shownInfoBoxes","infoBoxes","Math","max","aa","cc","legendLayers","infoBoxLayers","infoBoxWidth","box","InfoBox","Header","isOpen","LegendContainer","Title","marginBottom","menuText","DraggableModal","modalData","loadingLayers","modalKey","zIndex","bringModalToFront","onDragStart","closeModal","MapAction","actionFunc","menuTextHover","DefaultMapOptions","center","minZoom","zoom","preserveDrawingBuffer","attributionControl","logoPosition","DefaultSidebar","idCounter","getUniqueId","DefaultStaticOptions","size","getStaticImageUrl","slice","mapboxgl","accessToken","initializedLayers","dynamicLayers","hoverData","Map","pinnedHoverComps","pinnedMapMarkers","prevLayerStates","layerStates","HoverComp","pinnable","sortOrder","set","delete","newPinned","HoverComps","phc","marker","md","newState","EmptyArray","EmptyObject","AvlMap","mapOptions","sidebar","layerProps","navigationControl","sidebarProps","updateHover","projectLngLat","updateFilter","filterName","prevValue","Promise","resolve","onFilterChange","then","render","addDynamicLayer","_onRemove","_onAdd","showModal","removePinnedHoverComp","addPinnedHoverComp","Marker","setLngLat","addTo","saveMapAsImage","fileName","canvas","getCanvas","document","createElement","download","toDataURL","click","reverse","promise","onMapStyleChange","setStyle","MapOptions","test","unshift","container","addControl","NavigationControl","on","mapMoved","performance","now","includes","dispatchUpdate","v","bind","mapActions","_init","setActive","pinHoverComp","hovering","receiveProps","useSetSize","Modals","modal","AllMapActions","bounds","key","pinned","DefaultHoverComp","groups","rows","g","row","ii","getLayerId","DefaultCallback","DefaultOptions","modals","onHover","onBoxSelect","LayerContainer","this","layerVisibility","needsRender","callbacks","hoveredFeatures","updateState","init","source","getSource","addSource","getLayer","beneath","_setVisibilityNone","getLayoutProperty","addHover","addClick","selection","addBoxSelect","onAdd","point","features","callback","call","has","setFeatureState","hover","property","filterFunc","Infinity","mousemove","featuresMap","properties","prop","queryRenderedFeatures","feature","hasValue","sourceLayer","undefined","hoverFeatures","mouseleave","hoverLeave","start","canvasContainer","getCanvasContainer","getPos","Point","clientX","clientLeft","clientY","clientTop","preventDefault","appendChild","minX","min","maxX","minY","maxY","mouseup","finish","keyup","keyCode","which","code","bbox","removeEventListener","dragPan","enable","parentNode","removeChild","featureMap","select","selectedValues","element","addEventListener","shiftKey","button","disable","boxZoom","onRemove","_setVisibilityVisible","setLayoutProperty","visibility","newValue","HOST","fetcher","fetch","res","ok","Error","json","parse","require","TestTipLayer","dataset","domain","valueAccessor","tip_id","tip_ids","project_type","mpo_name","tip_mpos","agency","direction","acc","curr","params","symbologies","color_scheme","preValue","removeSource","geojson","symbols_map","county","estimated_cost","cost","mpo","ptype","sponsor","symbols_geojson","line_geojson","setData","paint","symbol","layerID","SED2040CountyLevelForecastLayer","year","getColorRange","geoid","counties","area","data_counties","processedData","scaleQuantile","extent","scaleQuantize","scaleThreshold","scaleLinear","scaleOrdinal","setFilter","data_county","colorScale","getColorScale","setPaintProperty","SED2040TazLevelForecastLayer","area_id","format","taz_ids","SED2050CountyLevelForecastLayer","SED2055CountyLevelForecastLayer","SED2055TazLevelForecastLayer","acsCensusCategoryMappings","ACSCensusLayer","categoryName","column","tracts","viewid","categoryValue","data_tracts","data_tract","BPMPerformanceMeasuresLayer","HubBoundTravelDataLayer","mode","convertTime","coordinates","hub_bound","geometry","coord","extend","LngLatBounds","fitBounds","time","substring","parseInt","RTPProjectDataLayer","rtp_id","rtp_ids","plan_portion","rtp_sponsors","polygon_geojson","label","ColorRanges","colorbrewer","schemeGroups","group","toUpperCase","category","styled","div","NpmrdsSources","npmrdsPaint","base","stops","NpmrdsLayers","TrafficSignalsSources","geography","month","hour","dow","vehicles","setActiveLayer","l","output","checkYear","NPMRDSLayer","latlng","activeStation","qaLevel","allMeasures","risAttributes","tmcAttributes","currentData","setActiveStation","localStorage","JSON","getItem","geographies","setItem","stringify","removeItem","getBounds","isEmpty","right","bottom","bearing","pitch","duration","offset","tr","nw","getNorthWest","se","getSouthEast","sub","scaleX","scaleY","unproject","add","scaleZoom","maxZoom","easeTo","geoids","states","geo","flatten","s","geoLevels","geoname","geolevel","bounding_box","zoomToGeography","saveToLocalStorage","d3scale","requests","filtered","getCache","val","collection","f","routes","MAPBOX_TOKEN","rtp_project_data","testComp","LegendComp","layerVal","routingConfig","ChartPage","TablePage","MetaDataPage","Routes","Catalog","Views","AdminLanding","Auth","Table","Chart","Metadata","TestMap","NoMatch","App","basename","process","route","menus","r","mapDispatchToProps","createBrowserHistory","connect","reducer","combineReducers","Reducers","messages","createStore","applyMiddleware","thunk","$compositions","Compositions","transparent","contentBg","accentColor","accentBg","borderColor","textColor","highlightColor","white","dark","gray","bright","sizes","compact","wrapper","sideItem","topItem","full","mini","micro","TDS_THEME_BASE","sidenavWrapper","menuIconSide","navitemSide","navitemSideActive","topnavWrapper","topnavContent","topnavMenu","menuIconTop","navitemTop","topmenuRightNavContainer","navitemTopActive","text","textContrast","border","bgInfo","textSuccess","bgSuccess","borderSuccess","textDanger","bgDanger","borderDanger","textWarning","bgWarning","borderWarning","textLight","menuIcon","topMenuBorder","headerShadow","menuBgHover","menuBgActive","menuBgActiveHover","menuTextActiveHover","sidebarBorder","headerBg","headerBgHover","inputBg","inputBorder","inputBgDisabled","inputBorderDisabled","inputBgFocus","inputBorderFocus","textBase","textSmall","textLarge","paddingBase","paddingSmall","paddingLarge","accent3","accent4","highlight1","highlight2","highlight3","highlight4","contentWidth","contentPadding","sidebarW","tableInfoBar","tableRow","tableRowStriped","tableCell","tableHeader","TDS_THEME","composeTheme","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","addComponents","AmsComponents","addWrappers","AmsWrappers","AuthEnabledApp","enableAuth","AUTH_HOST","PROJECT_NAME","CLIENT_HOST","ReactDOM","StrictMode","store","falcorGraph","getElementById"],"mappings":"w2jdAWeA,EARK,WAClB,IAAQC,EAAaC,wBAAbD,SAIR,OAHAE,qBAAU,SAACC,GACTC,OAAOC,SAAS,EAAG,KAClB,CAACL,IACG,M,kFCJT,SAASM,IAAwB,IAAD,uBAATC,EAAS,yBAATA,EAAS,gBAC5B,OAAOA,EAAQC,OAAOC,SAASC,KAAK,KAIxC,IAgFeC,EAhFO,WAClB,OACI,qBAAKC,UAAU,iCAAf,SACI,cAAC,IAAD,CAAMC,GAAG,MAAMD,UAAU,uCAAzB,SACK,gBAAGE,EAAH,EAAGA,KAAH,OACG,qCACI,8BACI,eAAC,IAAKC,OAAN,CAAaH,UAAU,4EAAvB,UACI,sBAAMA,UAAU,UAAhB,0BACA,cAAC,IAAD,CAAkBA,UAAU,UAAU,cAAY,cAI1D,cAAC,IAAD,CACII,KAAMF,EACND,GAAII,WACJC,MAAM,mCACNC,UAAU,+BACVC,QAAQ,kCACRC,MAAM,iCACNC,UAAU,kCACVC,QAAQ,+BARZ,SAUI,cAAC,IAAKC,MAAN,CACIC,QAAM,EACNb,UAAU,gIAFd,SAII,qBAAKA,UAAU,OAAf,SACI,cAAC,IAAKc,KAAN,UACK,gBAAGC,EAAH,EAAGA,OAAH,OACG,sBAEIf,UAAWN,EACPqB,EAAS,4BAA8B,gBACvC,0BAJR,UAOI,cAAC,IAAD,CAAUf,UAAU,6BAA6B,cAAY,SAC7D,yE,gBCzC1CgB,EAAqB,CACvB,KACA,OACA,cACA,kBACA,iBACA,eACA,aACA,UACA,kBACA,qBACA,aACA,eAmEWC,EAhEQ,WACnB,MAA8BC,sBAAvBC,EAAP,EAAOA,OAAQC,EAAf,EAAeA,YAEf9B,qBAAU,WAAM,4CACZ,4BAAA+B,EAAA,sEACuBF,EAAOG,IAAI,CAAC,MAAO,cAAe,WADzD,UACQC,EADR,SAEIA,EAASD,IAAIC,EAAQ,CAAC,OAAQ,MAAO,cAAe,UAAW,IAFnE,gCAKqBJ,EAAOG,IAAI,CAAC,MAAO,cAAe,UAAW,CAAC,CACvDE,KAAM,EACNC,GAAIF,EAAS,IACbP,IARZ,oFADY,sBAaZ,OAba,WAAD,+BAaLU,KACR,IAEH,IAAMC,EAAcC,IAAMC,SAAQ,WAC9BC,QAAQC,IAAI,iCACZ,IAAIC,EAAcV,IAAIF,EAAa,CAAC,MAAO,cAAe,QAAS,MAC/Da,EAAO,GAKX,OAJID,IACAC,EAAOC,OAAOC,KAAKH,GAAaI,KAAI,SAAAC,GAAE,OAAIL,EAAYK,OAE1DP,QAAQC,IAAI,cAAeE,GACpBA,IAET,CAACb,IAGH,OACI,sBAAKpB,UAAU,6BAAf,UACI,qBAAKA,UAAU,yDAAf,uBACC2B,EAAYJ,OAAS,EAClB,oBAAIvB,UAAU,GAAd,SACK2B,EAAYS,KAAI,SAACE,EAAKC,GAAN,OACb,oBAAYvC,UAAU,mBAAtB,SACI,sBAAKA,UAAU,iBAAf,UACI,qBAAKA,UAAU,mBAAf,SACI,mBAAGA,UAAU,0CAAb,SACI,cAAC,OAAD,CAAMyB,GAAI,CACNrC,SAAS,eAAD,OAAiBkC,IAAIgB,EAAK,CAAC,KAAK,SAAS,KACjDE,MAAO,CAACC,KAAMnB,IAAIgB,EAAK,CAAC,OAAO,SAAS,IAAKI,YAAapB,IAAIgB,EAAK,CAAC,cAAc,SAAS,MAC5FtC,UAAU,0CAHb,SAIKsB,IAAIgB,EAAK,CAAC,OAAO,SAAS,UAIvC,cAACK,EAAD,QAZCJ,QAmBjB,mDCxEVvB,EAAqB,CACvB,KACA,OACA,cACA,kBACA,iBACA,eACA,aACA,UACA,kBACA,qBACA,aACA,eAiEWC,EA9DQ,WACnB,MAA8BC,sBAAvBC,EAAP,EAAOA,OAAP,EAAeC,YAEf9B,qBAAU,WAAM,4CACZ,4BAAA+B,EAAA,sEACuBF,EAAOG,IAAI,CAAC,MAAO,cAAe,WADzD,UACQC,EADR,SAEIA,EAASD,IAAIC,EAAQ,CAAC,OAAQ,MAAO,cAAe,UAAW,IAFnE,gCAKqBJ,EAAOG,IAAI,CAAC,MAAO,cAAe,UAAW,CAAC,CACvDE,KAAM,EACNC,GAAIF,EAAS,IACbP,IARZ,oFADY,sBAcZ,OAda,WAAD,+BAcLU,KACR,CAACP,IAEJ,IAAMyB,EAAc,WAChB,MAAO,CAAC,aAAc,cAAcR,KAAI,SAACS,EAAGC,GAAJ,MAAY,CAACT,GAAIS,EAAIC,MAAOF,EAAGJ,KAAKI,EAAGG,KAAM,SAKzF,OACI,sBAAKhD,UAAU,6BAAf,UACI,qBAAKA,UAAU,yDAAf,+BACC4C,IACG,qBAAI5C,UAAU,GAAd,UACK4C,IAAcR,KAAI,SAACE,GAAD,OACf,oBAAkBtC,UAAU,mBAA5B,SACI,sBAAKA,UAAU,iBAAf,UACI,qBAAKA,UAAU,mBAAf,SACI,mBAAGA,UAAU,wBAAb,SACI,cAAC,OAAD,CAAMyB,GAAI,CACNrC,SAAS,eAAD,OAAiBkD,EAAKS,OAC9BP,MAAO,CAACC,KAAMH,EAAKG,KAAMC,YAAaJ,EAAKI,cAC5C1C,UAAU,0CAHb,SAIKsC,EAAKG,WAIlB,cAACE,EAAD,QAZCL,EAAKD,OAgBlB,oBAAIrC,UAAW,oCAAf,SACI,cAAC,OAAD,CAAMyB,GAAI,CACNrC,SAAU,KACXY,UAAU,0CAFb,4BAMR,mDC7CDiD,EA1BAC,oBAAS,WAIpB,OACI,qBAAKlD,UAAU,SAAf,SACI,cAAC,SAAD,CACImD,SACI,cAAC,OAAD,CAAM1B,GAAG,IAAIzB,UAAW,4BAAxB,SACI,qBAAKoD,IAAI,aAAapD,UAAW,qCAAsCqD,MAAO,CAACC,OAAO,IAAKC,IAAI,6BAGvGC,UAEI,sBAAKxD,UAAU,iCAAf,UACI,qBAAKA,UAAU,mEAAf,sBACA,qBAAKA,UAAU,mIAAf,qBACA,qBAAKA,UAAU,8GAAf,6B,SC6MTyD,EA5NQ,SAAC,GAAe,EAAdC,SAAe,IACpC,EAA4BC,sBAAvBC,EAAL,EAAKA,OACL,GADA,EAAYC,aACgB3C,uBAAvBC,EAAL,EAAKA,OAAQC,EAAb,EAAaA,YACT0C,EAAWzE,wBACT0E,EAAUC,uBAEhBpC,IAAMtC,WAAU,WAAK,4CACjB,wCAAA+B,EAAA,sEAC0BF,EAAOG,IAAI,CAAC,MAAO,cAAe,WAD5D,cACQ2C,EADR,OAEQ1C,EAASD,IAAI2C,EAAW,CAAC,OAAQ,MAAO,cAAe,UAAW,GAF1E,SAI+B9C,EAClBG,IAAI,CAAC,MAAO,cAAe,UAAW,CAAC,CAACE,KAAM,EAAGC,GAAIF,EAAS,IAAK,CAAC,KAAK,UALtF,cAIQ2C,EAJR,OAMQC,EAAS7C,IAAI4C,EAAgB,CAAC,OAAO,MAAO,cAAe,WAAY,IACvEE,EAAiBlC,OAAOC,KAAKgC,GAC5B/B,KAAI,SAAAiC,GAAC,OAAI/C,IAAI6C,EAAD,UAAYE,EAAZ,OAAoB,SAChCzE,QAAO,SAAAiD,GAAC,OAAIA,KATrB,UAW8B1B,EAAOG,IAAI,CAAC,MAAM,cAAc,QAAQ,WAAW8C,EAAe,WAXhG,eAWQE,EAXR,OAaQC,EAAUH,EAAehC,KAAI,SAAAoC,GAG7B,MADc,CAAC,MAAM,cAAc,QAAQ,WAAWA,EAAa,UAAU,CAAC,CAAChD,KAAK,EAAEC,IADtEH,IAAIgD,EAAa,CAAC,OAAO,MAAM,cAAc,QAAQ,WAAWE,EAAa,UAAU,GACJ,IAAK,CAAC,KAAK,OAAQ,iBAf9H,UAkBiBrD,EAAOG,IAAP,MAAAH,EAAM,YAAQoD,IAlB/B,sFADiB,sBAqBjB,OArBkB,WAAD,+BAqBV7C,KACT,CAACP,EAAOyC,IAEV,IAAIa,EAAU7C,IAAMC,SAAQ,WACxB,IAAI6C,EAAKpD,IAAIF,EAAY,CAAC,MAAM,cAAc,QAAS,IACnDuD,EAAgBzC,OAAOC,KAAKb,IAAIF,EAAY,CAAC,MAAM,cAAc,QAAQ,YAAa,KACtFwD,EAAcD,EAAcE,QAAO,SAACC,EAAKC,GAKzC,OAJDD,EAAIC,GAAQ,CACP1C,GAAIf,IAAIoD,EAAGK,GAAM,CAAC,KAAK,SAAS,IAChCtC,KAAMnB,IAAIoD,EAAGK,GAAM,CAAC,OAAO,SAAS,KAEjCD,IACT,IACEE,EAAWL,EAAcE,QAAO,SAACC,EAAKC,GACtC,IAAIE,EAAQ3D,IAAIF,EAAa,CAAC,MAAM,cAAc,QAAQ,WAAW2D,EAAK,WAAY,IAStF,OARAD,EAAIC,GAAQ7C,OAAOC,KAAK8C,GAAO7C,KAAI,SAAAiC,GAC/B,IAAIa,EAAO5D,IAAIF,EAAY6D,EAAMZ,GAAGtB,MAAO,MAC3C,MAAO,CACHV,GAAIf,IAAI4D,EAAK,CAAC,KAAK,SAAS,IAC5BC,UAAW7D,IAAI4D,EAAK,CAAC,YAAY,SAAS,IAC1CzC,KAAMnB,IAAI4D,EAAK,CAAC,OAAO,SAAS,QAErCtF,QAAO,SAAAiD,GAAC,OAAIA,KACRiC,IACT,IAOF,MAAO,CACHM,OAPSlD,OAAOC,KAAK6C,GAAUH,QAAO,SAACC,EAAIC,GAI3C,OAHAC,EAASD,GAAMM,SAAQ,SAAAH,GACnBJ,EAAII,EAAK7C,IAAM6C,KAEZJ,IACT,IAESE,WAASJ,iBAEtB,CAACxD,IACCkE,EAAWhE,IAAImD,EAAQ,CAAC,SAASb,GAAQ,IACzCqB,EAAQ3D,IAAImD,EAAQ,CAAC,WAAYa,EAASH,WAAY,IACtDI,EAAejE,IAAImD,EAAS,CAAC,cAAca,EAASH,WAAY,IAChEK,EAAU,CACV,CACIC,KAAM,MACNhD,KAAM,OAET,CACGgD,KAAM,QACNhD,KAAM,SAEV,CACIgD,KAAM,QACNhD,KAAM,SAET,CACGgD,KAAM,WACNhD,KAAM,kBAGViD,EAAeF,EAAQ5F,QAAO,SAAAiD,GAAC,OAAIA,EAAE4C,OAAS3B,EAAS1E,SAASuG,MAAM,KAAKC,MAAMC,iBAAeD,MAGpG,OACI,sBAAK5F,UAAU,uDAAf,UACI,sBAAKA,UAAU,qBAAf,UAEI,cAAC,OAAD,CAAMyB,GAAG,IACLzB,UAAU,gHADd,qBAIC4D,EACD,qCACA,qBACA5D,UAAU,2GAA2GqD,MAAO,CAACyC,WAAY,WADzI,SAEI,cAAC,IAAD,CAAS/C,MAAOuC,EAAUS,SAAU,SAACC,GACjClE,QAAQC,IAAI,aACZ,IAAIkE,EAAG,iBAAaD,EAAE3D,GAAf,YAAqBqD,EAAaD,MACzC1B,EAAQmC,KAAKD,IAHjB,SAKI,sBAAKjG,UAAU,WAAf,UACI,eAAC,IAAQG,OAAT,CAAgBH,UAAU,gQAA1B,UACI,sBAAMA,UAAU,YAAhB,SAA6BuF,EAAa9C,OAC1C,sBAAMzC,UAAU,6BAEpB,cAAC,IAAD,CACIC,GAAII,WACJI,MAAM,kCACNC,UAAU,cACVC,QAAQ,YAJZ,SAMI,cAAC,IAAQwF,QAAT,CAAiBnG,UAAU,kIAAkIqD,MAAO,CAACyC,WAAY,WAAjL,SACGb,EAAM7C,KAAI,SAAC8C,EAAMkB,GAAP,OACT,cAAC,IAAQC,OAAT,CAEErG,UAAW,gBAAGe,EAAH,EAAGA,OAAH,gBACNA,EAAS,0BAA4B,gBAD/B,yFAIXgC,MAAOmC,EANT,SAQG,gBAAGI,EAAH,EAAGA,SAAH,EAAavE,OAAb,OACC,qCACE,sBACEf,UAAS,UACPsF,EAAW,cAAgB,YADpB,wBADX,SAKGJ,EAAKzC,OAEP6C,EACC,sBACEtF,UAAS,UACE,iBADF,sGAOT,UAzBHoG,iBAmC3B,qBACApG,UAAU,2GAA2GqD,MAAO,CAACyC,WAAY,WADzI,SAEG,cAAC,IAAD,CAAS/C,MAAO2C,EAAcK,SAAU,SAACC,GACpC,IAAIC,EAAG,iBAAarC,EAAb,YAAuBoC,EAAEP,MAChC3D,QAAQC,IAAI,MAAOkE,GACnBlC,EAAQmC,KAAKD,IAHlB,SAKK,sBAAKjG,UAAU,WAAf,UACI,eAAC,IAAQG,OAAT,CAAgBH,UAAU,gQAA1B,UACI,sBAAMA,UAAU,YAAhB,SAA6B0F,EAAajD,OAC1C,sBAAMzC,UAAU,6BAEpB,cAAC,IAAD,CACIC,GAAII,WACJI,MAAM,kCACNC,UAAU,cACVC,QAAQ,YAJZ,SAMI,cAAC,IAAQwF,QAAT,CAAiBnG,UAAU,kIAAkIqD,MAAO,CAACyC,WAAY,WAAjL,SACGN,EAAQpD,KAAI,SAAC8C,EAAMkB,GAAP,OACX,cAAC,IAAQC,OAAT,CAEErG,UAAW,gBAAGe,EAAH,EAAGA,OAAH,gBACNA,EAAS,0BAA4B,gBAD/B,yFAIXgC,MAAOmC,EANT,SAQG,gBAAGI,EAAH,EAAGA,SAAH,EAAavE,OAAb,OACC,qCACE,sBACEf,UAAS,UACPsF,EAAW,cAAgB,YADpB,wBADX,SAKGJ,EAAKzC,OAEP6C,EACC,sBACEtF,UAAS,UACE,iBADF,sGAOT,UAzBHoG,oBAoCzB,MAIN,mBAAGE,KAAK,mBAAR,SACI,sBAAMtG,UAAU,+CC1MjBuG,EAdGrD,oBAAS,YAAiB,IAAfQ,EAAc,EAAdA,SACzB,OACI,sBAAK1D,UAAU,2DAAf,UACI,qBAAKA,UAAU,OAAf,SACI,cAAC,EAAD,MAEJ,cAAC,EAAD,IACA,qBAAKA,UAAU,SAAf,SACK0D,UCJX8C,EAAU,kBACd,cAAC,EAAD,UACE,sBAAKxG,UAAU,OAAf,UACE,qBAAKA,UAAU,SAAf,SACE,cAAC,EAAD,MAEF,qBAAKA,UAAU,eAAf,SACE,cAACyG,EAAD,YAqBOC,EARA,CACbjB,KAAM,IACNkB,OAAO,EACPC,UAVoB1D,oBAAS,YAAgD,EAA7C2D,MAA6C,EAAtCC,SAAuC,IAAtBC,EAAqB,EAArBA,KAAqB,EAAfrD,SAC9D,OAAGqD,GAAQA,EAAKC,UAAY,EACnB,cAAC,WAAD,CAAUvF,GAAG,WAEf,cAAC,EAAD,OAOPwF,OAAQ,U,gBCjBJC,EAAmB,CACrB,KACA,OACA,cACA,YACA,kBACA,iBACA,eACA,aACA,UACA,kBACA,qBACA,aACA,iBACA,oBACA,aACA,aACA,aACA,UACA,aACA,eACA,eACA,cACA,aACA,gBACA,WACA,cACA,gBACA,iBACA,qBACA,aACA,wBACA,gBACA,qBAGJ,SAASxH,IAAwB,IAAD,uBAATC,EAAS,yBAATA,EAAS,gBAC5B,OAAOA,EAAQC,OAAOC,SAASC,KAAK,KAGxC,I,EAuKe4G,EAlBA,CACXjB,KAAM,4BACNkB,OAAO,EACPQ,SAAS,EACT1E,KAAM,oBACNmE,UA1JU,WACV,IAAO/C,EAAgBF,sBAAhBE,aACP,EAA6B3C,sBAAtBC,EAAP,EAAOA,OAAOC,EAAd,EAAcA,YACd,EAA+BgG,mBAAS,MAAxC,mBAAOC,EAAP,KAAgBC,EAAhB,KAEMxD,EAAWzE,wBAGXkI,EAAW,SAAClG,EAAEmG,GAChB,OAAOnG,EAAEgB,GAAKmF,EAAEnF,GAAK,GAAK,GAG9B/C,qBAAU,WAAK,4CACX,kCAAA+B,EAAA,sEAEuBF,EAAOG,IAAI,CAAC,MAAM,cAAc,QAAQ,WAAW,CAACuC,GAAc,WAFzF,UAEQtC,EAFR,SAIIA,EAASD,IAAIC,EAAO,CAAC,OAAO,MAAM,cAAc,QAAQ,WAAWsC,EAAa,UAAU,OAJ9F,iCAM+B1C,EAAOG,IAAI,CAAC,MAAM,cAAc,QAAQ,WAAW,CAACuC,GAAc,UAAU,CAAC,CAACrC,KAAK,EAAEC,GAAGF,EAAO,IAAI2F,IANlI,OAMcO,EANd,OAOcC,EAAQpG,IAAImG,EAAS,CAAC,OAAO,MAAM,cAAc,QAAQ,WAAW5D,EAAa,WAAW,MAC9F5B,EAAO,GACRyF,IACCzF,EAAOC,OAAOC,KAAKuF,GAAO9H,QAAO,SAAAiD,GAAC,MAAU,YAANA,KAAiBT,KAAI,SAAAE,GAAI,OAAIoF,EAAMpF,MAAOqF,KAAKJ,GACrFzF,QAAQC,IAAI,OAAOE,GACnBqF,EAAYrF,EAAK,GAAGI,KAZhC,6CADW,sBAkBX,OAlBY,WAAD,+BAkBJX,KACT,CAACP,EAAO0C,IAEV,IAAM+D,EAAa/F,mBAAQ,WACvB,IAAIgG,EAAQvG,IAAIF,EAAY,CAAC,MAAM,cAAc,QAAQ,WAAWyC,EAAa,QAAQ,MACzF,QAAOgE,GAAQ3F,OAAOC,KAAK0F,GAAOzF,KAAI,SAAAE,GAAI,OAAIuF,EAAMvF,MAAOqF,KAAKJ,KAClE,CAACnG,EAAYyC,IAMTiE,EAAa,CACf,CAAErF,KAAM,MAAO6D,KAAK,aAAD,OAAee,EAAf,QAA+BU,KAAMC,IAASC,SAAS,EAAMC,MAAO,KACvF,CAAEzF,KAAM,QAAS6D,KAAK,aAAD,OAAee,EAAf,UAAiCU,KAAMI,IAAWF,SAAS,GAChF,CAAExF,KAAM,iBAAkB6D,KAAM,IAAKyB,KAAMK,IAAYH,SAAS,EAAOC,MAAO,MAC9E,CAAEzF,KAAM,SAAU6D,KAAM,IAAKyB,KAAMM,IAAcJ,SAAS,IAG9D,OAEI,cAAC,EAAD,UACI,sBAAKjI,UAAU,6BAAf,UACA,qBAAKA,UAAU,gDAAf,uBACI,sBAAKA,UAAU,OAAf,UAEA,sBAAKA,UAAU,uBAAf,UACI,qBAAKA,UAAU,sCAAf,SACI,yBACIA,UAAU,wLADd,UAII,sBAAMA,UAAU,UAAhB,0BACA,cAAC,IAAD,CAAUA,UAAU,UAAU,cAAY,cAGlD,sBAAMA,UAAU,sBAAhB,SACI,sBAAKA,UAAU,OAAf,UACI,qBAAKA,UAAU,gBAAf,SAII,mBAAGA,UAAU,+BAAb,SACK8D,EAAStB,MAAME,aAAe,OAGvC,qBAAK1C,UAAU,QAAf,SAES4H,EACG,oBAAI5H,UAAU,OAAd,SACK4H,EAAWxF,KAAI,SAACE,GAAD,OACZ,oBACItC,UACIqH,IAAa/E,EAAKD,GAAGU,MAAQ,2DACzB,qBAHZ,SAOI,sBAAK/C,UAAU,OAAf,UACI,qBAAKA,UAAU,SAAf,SAEQ,qBAAKA,UAAU,iCAAiCsI,QAAS,kBArDjG,SAAChG,GACjBgF,EAAYhF,EAAKD,GAAGU,OAoDmGwF,CAAYjG,IAA3E,SACI,mBAAGtC,UAAU,oCAAb,SACCsC,EAAKG,KAAKM,YAKvB,cAACJ,EAAD,QAjBCL,EAAKD,GAAGU,YAyBxB,wDAKxB,qBAAK/C,UAAU,mCAAf,SACG,qBAAKA,UAAU,qBAAf,SAEI,qBAAKA,UAAU,6DAAf,SACI,qBAAKA,UAAU,iDAAf,SACI,qBAAKA,UAAU,sCAAf,SACK8H,EAAW1F,KAAI,SAACE,GAAD,OACZ,oBAEIgE,KAAMhE,EAAKgE,KACXtG,UAAWN,EACP4C,EAAK2F,QAAU,4BAA8B,qDAC7C,oEALR,UAQI,cAAC3F,EAAKyF,KAAN,CACI/H,UAAWN,EACP4C,EAAK2F,QAAU,gBAAkB,0CACjC,8BAEJ,cAAY,SAEf3F,EAAKG,OAdDH,EAAKG,4BAoClDwE,OAAQ,SACRuB,eAAgB,CACZC,OAAO,EACPC,WAAW,EACXC,KAAM,QACNC,OAAQ,MACRC,MAAM,IC/LCnC,EAhBA,CACbjB,KAAM,gBACNkB,OAAO,EACPQ,SAAS,EACT1E,KAAM,OACNmE,UAbY,kBACZ,qBAAK5G,UAAU,uDAAf,SACI,sBAAKA,UAAU,mDAAf,UACE,qBAAKA,UAAU,qBAAf,iBACA,qBAAKA,UAAU,UAAf,8BAUNwI,eAAgB,CACdC,OAAO,EACPC,WAAW,EACXC,KAAM,QACNC,OAAQ,SCIGlC,EAVA,CACbS,SAAS,EACTP,UAbc,kBACd,cAAC,EAAD,UACE,qBAAK5G,UAAU,8DAAf,SACI,sBAAKA,UAAU,mDAAf,UACE,qBAAKA,UAAU,qBAAf,iBACA,qBAAKA,UAAU,UAAf,4BACA,qBAAKA,UAAU,UAAf,qDAQRiH,OAAQ,SACRuB,eAAgB,CACdC,OAAO,EACPC,WAAW,ICuCAG,EAXF,CACXpD,KAAM,QACN0B,SAAS,EAETqB,eAAgB,CACdC,OAAO,EACPG,OAAQ,MACRF,WAAW,GAEb9B,UAvDiB,CACjBkC,KAAM,cACNC,MAAO,CACLC,aAAa,GAEfC,SAAU,CAER,YACA,cAEFvF,SAAU,CACR,CAAEoF,KAAM,aACR,CAAEA,KAAM,sBACR,CAAEA,KAAM,cAOR,CAAEA,KAAM,aAINC,MAAO,CAAEG,WAAY,eAEvB,CAAEJ,KAAM,sBAGR,CAAEA,KAAM,oBAER,CAAEA,KAAM,eACR,CAAEA,KAAM,qBAER,CAAEA,KAAM,iBAER,CAAEA,KAAM,6B,sGClCCK,GAAiBvH,IAAMwH,cAAc,IAErCC,GAAoB,WAC/B,OAAOzH,IAAM0H,WAAWH,KAGpBI,GAAe,CACnBC,KAAM,KACNC,IAAK,EACLC,UAAW,GACXxJ,MAAM,EACNyJ,eAAe,GAEXC,GAAY,SAAA1J,GAAI,kCACjBqJ,IADiB,IAEpBrJ,UAEI2J,GAAU,SAACrH,EAAOsH,GACtB,IAAQhB,EAAqBgB,EAArBhB,KAASiB,EAAjB,YAA6BD,EAA7B,GACA,OAAQhB,GACN,IAAK,eACH,OAAO,2BACFtG,GACAuH,GAEP,QACE,OAAOvH,IAIPwH,GAAQ,CACZjH,MAAO,IACPkH,KAAM,OAGFC,GAAS,SAAC,GAAuE,IAArEC,EAAoE,EAApEA,eAAgBC,EAAoD,EAApDA,SAAUC,EAA0C,EAA1CA,SAAUnK,EAAgC,EAAhCA,KAAMoK,EAA0B,EAA1BA,IAAKC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,QACtE,OAAQL,GACN,IAAK,SACH,OACE,sBAAKnK,UAAS,yDAC0BuK,EAAME,SADhC,yBAEPF,EAAMG,UAFC,4DAGDH,EAAMI,OAHL,uBAG4BP,EAH5B,kBAKZ/G,MAAQ,CACNuH,UAAU,mBACVnB,IAAK,OAEPnB,QAAU+B,EATZ,UAWE,qBAAKrK,UAAU,sCACbqD,MAAQ,CACNuH,UAAU,UAAD,QAAc1K,EAAO,GAAK,GAAKoK,GACxCO,WAAY,qBAEhB,qBAAK7K,UAAU,sCACbqD,MAAQ,CACNuH,UAAU,UAAD,QAAc1K,EAAO,GAAK,GAAKoK,GACxCO,WAAY,gCAEhB,qBAAK7K,UAAU,sCACbqD,MAAQ,CACNuH,UAAU,UAAD,QAAc1K,EAAO,GAAK,GAAKoK,GACxCO,WAAY,mCAItB,QACE,OACE,qBAAKvC,QAAU+B,EACbhH,MAAQ,CACNuH,UAAU,cAAD,OAAiB1K,EAAI,WAAQsK,EAAR,MAAuB,OAA5C,KACTK,WAAY,aAEd7K,UAAS,wBACJuK,EAAMG,UADF,yCAEEH,EAAMI,OAFR,kBAE0BJ,EAAME,SAFhC,mEAIKL,EAJL,wBALX,SAWE,qBAAKpK,UAAU,2BACbqD,MAAQ,CACNuH,UAAU,UAAD,QAAc1K,EAAO,GAAK,GAAKoK,EAA/B,KACTO,WAAY,yBAQbC,GAAqB,SAAC,GAUwB,IAAD,EAVrBC,EAUqB,EAVrBA,YAUqB,IATpBC,aASoB,MATZ,IASY,MARpBR,eAQoB,MARV,EAQU,EAPpB9G,EAOoB,EAPpBA,SAOoB,IANpBuH,iBAMoB,aALpBb,gBAKoB,MALT,OAKS,MAJpBc,mBAIoB,MAJP,GAIO,EAHpBf,EAGoB,EAHpBA,eAGoB,IAFpBgB,gBAEoB,MAFX,MAEW,MADpBC,kBACoB,aAApBC,aAAoB,MAAZrB,GAAY,EAExD,EAA0BpI,IAAM0J,WAAWzB,GAASoB,EAAWrB,IAA/D,mBAAOpH,EAAP,KAAc+I,EAAd,KAEQrL,EAAwBsC,EAAxBtC,KAAMyJ,EAAkBnH,EAAlBmH,cAER6B,EAAU5J,IAAM6J,aAAY,SAAAvL,GAChCqL,EAAS,CAAEzC,KAAM,eAAgB5I,OAAMyJ,eAAe,IACtD+B,EAAQzD,QAAU0D,WAAWJ,EAAU,EAAG,CAAEzC,KAAM,eAAgBa,eAAe,MAChF,IAEGW,EAAmB,SAAbF,EAAsB,GAAK,EAEjCsB,EAAU9J,IAAMgK,SAEtBhK,IAAMtC,WAAU,WACd,OAAO,kBAAMuM,aAAaH,EAAQzD,YACjC,IAEH,IAAMoC,EAAWzI,IAAM6J,aAAY,SAAAzF,GACjCwF,EAAQtL,EAAO,EAAIA,EAAO,EAAI,KAC7B,CAACA,EAAMsL,IAEV,EAAwB5J,IAAMwF,WAA9B,mBAAO0E,EAAP,KAAaC,EAAb,KAEMC,EAAgBpK,IAAM6J,aAAY,YAAwC,IAArCjC,EAAoC,EAApCA,KAAoC,IAA9BC,WAA8B,MAAxB,EAAwB,MAArBC,iBAAqB,MAAT,GAAS,EAC7E,GAAa,IAATxJ,EAAJ,CACAsL,EAAQ,GACR,IAAMS,EAAaH,EAAOA,EAAKI,wBAAwBzC,IAAM,EAC1C,kBAARA,EACTA,EAAG,eAAYA,EAAZ,cAAuBwC,EAAvB,OAGHxC,GAAOwC,EAETV,EAAS,CAAEzC,KAAM,eAAgBU,OAAME,YAAWD,WACjD,CAACvJ,EAAMsL,EAASM,IACbK,EAAgBvK,IAAM6J,aAAY,SAAA/B,GACzB,IAATxJ,GACJqL,EAAS,CAAEzC,KAAM,eAAgBY,gBAChC,CAACxJ,IACEkM,EAAiBxK,IAAM6J,aAAY,WAC1B,IAATvL,GACJsL,EAAQ,KACP,CAACtL,EAAMsL,IAEJa,EAAezK,IAAMC,SAAQ,WACjC,OAAO,2BAAKW,GAAZ,IAAmBwJ,gBAAeG,gBAAeC,iBAAgBlM,OAAMmK,eACtE,CAAC2B,EAAeG,EAAeC,EAAgB5J,EAAOtC,EAAMmK,IAEzDE,EAAK,2BAAO+B,sBAAcpB,GAE1BqB,EAAU,gBAAavB,EAAkB,EAAVR,GAAetK,EAApC,gBAAkDA,EAAO,EAAP,UAAemL,EAAMtI,OAAS7C,EAAO,IAArC,OAA4CmL,EAAMpB,MAAU,OAA9G,KAEhB,OACE,qBAAKjK,UAAS,mBAAgBoK,EAAhB,0BACZ/G,MAAQ,CAAEmH,QAAQ,GAAD,OAAMA,EAAN,OADnB,SAGE,cAACrB,GAAeqD,SAAhB,CAAyBzJ,MAAQsJ,EAAjC,SAEE,sBAAKrM,UAAU,kBACbqD,MAAQ,CACNwH,WAAY,cACZG,MAAOuB,GAHX,UAME,sBAAKvM,UAAU,0BACbqD,OAAK,mBACF+G,EADE,sBACyBI,EADzB,gBAC0CtK,EAAO,EAAIsK,EADrD,6CAEaJ,EAFb,cADP,UAMIW,EAECK,EACD,cAAC,GAAD,CAAQjB,eAAiBA,EACvBC,SAAWA,EACXC,SAAWA,EACXnK,KAAOA,EAAOoK,IAAMA,EACpBC,MAAQA,EACRC,QAAUA,IANE,QAWlB,cAAC,GAAD,CAAiBf,IAAMjH,EAAMiH,IAAMvJ,KAAgB,IAATA,EACxCyJ,cAAgBA,EAChBqB,MAAQA,EAAOR,QAAUA,EAF3B,SAI0B,oBAAfhI,EAAMgH,KAAsBhH,EAAMgH,KACzC,cAAChH,EAAMgH,KAAP,eAAiBhH,EAAMkH,cAK3B,cAAC+C,GAAD,CAAYvM,KAAOA,EAAOwM,IAAMX,EAC9BpC,cAAgBA,EAChBS,UAAQ,EACRe,SAAUA,EACVH,MAAQA,EAAQR,QAAUA,EAJ5B,SAMI9G,YAWD+I,GAAa7K,IAAM+K,YAAW,WAAsFD,GAAS,IAA5FxM,EAA2F,EAA3FA,KAAMyJ,EAAqF,EAArFA,cAAqF,KAAtEqB,MAAsE,EAA/DG,iBAA+D,MAAtD,MAAsD,EAAvCzH,GAAuC,EAAhD8G,QAAgD,EAAvC9G,UAAuC,IAA7BkJ,kBAA6B,SAIjIC,GAFQP,qBAEAM,EAAa,SAAW,IAEtC,OACE,qBAAK5M,UAAS,UAAO6M,EAAP,YAAiB3M,IAASyJ,EAAgB,SAAWwB,GAAauB,IAAMA,EACpFrJ,MAAQ,GADV,SAIE,sBAAKrD,UAAS,UAAO6M,EAAP,2DAAgE3M,IAASyJ,EAAgB,SAAWwB,GAChH9H,MAAQ,CAAEwH,WAAY,eADxB,UAIE,qBAAK7K,UAAS,sGAGZ0D,UAOJoJ,GAAkB,SAAC,GAA2E,IAAzE9B,EAAwE,EAAxEA,MAAwE,IAAjEG,gBAAiE,MAAxD,MAAwD,EAAjDX,EAAiD,EAAjDA,QAAStK,EAAwC,EAAxCA,KAAwC,IAAlCuJ,WAAkC,MAA5B,EAA4B,EAAzB/F,EAAyB,EAAzBA,SAAaqF,EAAY,kBAC7FgE,EAAuC,IAAzB5B,EAASxF,MAAM,KAAK,GACtC,OACE,qBAAK3F,UAAU,WACbqD,MAAQ,CACN2H,MAAM,GAAD,OAAM9K,EAAI,UAAO8K,EAAkB,EAAVR,EAAf,gBAAqCuC,EAArC,QACfC,KAAK,QAAD,OAAWhC,EAAkB,EAAVR,EAAnB,iBACJK,WAAY,cACZpB,IAAoB,kBAARA,EAAmBA,EAA1B,UAAoCA,EAApC,OALT,SAQE,cAACgD,GAAD,2BAAiB1D,GAAjB,IAAyB6D,YAAa,EACpC5B,MAAQA,EAAQG,SAAUA,EAAUX,QAAUA,EAAUtK,KAAOA,EADjE,SAIIwD,Q,mEC1LKuJ,GAvDI,SAAC,GAAuC,IAArCC,EAAoC,EAApCA,MAAOC,EAA6B,EAA7BA,cAAkBC,EAAW,kBACxD,EAAwBxL,IAAMwF,UAAS,GAAvC,mBAAOlH,EAAP,KAAasL,EAAb,KACE6B,EAAazL,IAAM6J,aACjB,SAACzF,GACCwF,GAAStL,KAEX,CAACA,EAAMsL,IAGLjB,EAAQ+B,qBAERgB,EAAU1L,IAAMC,SAAQ,WAC5B,OAAOK,OAAOqL,OAAOL,EAAMI,SAASlL,KAClC,WAAkDG,GAAO,IAAtDE,EAAqD,EAArDA,KAAY+K,GAAyC,EAA/C1E,KAA+C,EAAzC0E,SAAyC,IAAhCzM,cAAgC,SAAdqM,EAAc,kBACtD,GAAKrM,EAGD,OACE,sBACEf,UAAS,eAAUuK,EAAMkD,GAAhB,gBADX,UAIE,qBAAKzN,UAAU,2BAAf,SAA2CyC,IAC3C,cAAC,SAAD,2BAAY2K,GAAZ,IAAkBM,YAAWN,EAAKO,WALpC,UAEUH,EAFV,YAEqB/K,SAS9B,CAACyK,EAAMI,QAAS/C,IAEnB,OACE,sBAAKvK,UAAS,UAAKuK,EAAMI,OAAX,8BAAd,UACE,qBACE3K,UAAS,oFAEPH,QAAQsN,EAAcD,EAAM7K,KAAO,QAAU,SAFtC,qBAGPkI,EAAMG,UAHC,cAOX,cAAC,GAAD,yBACEwC,MAAOA,GACHE,GAFN,IAGElN,KAAMA,EACNmN,WAAYA,KAGd,sBAAKhK,MAAO,CAAEuK,QAAS1N,EAAO,QAAU,QAAxC,UACIgN,EAAMW,OAAgB,cAAC,GAAD,aAAgBX,MAAOA,GAAWE,IAAzC,KAChBE,SAOIQ,GAAO,SAAC,GAMd,IALLxF,EAKI,EALJA,QAKI,IAJJyF,cAII,MAJK,iBAIL,MAHJ/N,iBAGI,MAHQ,GAGR,MAFJqD,aAEI,MAFI,GAEJ,EADJK,EACI,EADJA,SAEM6G,EAAQ+B,qBACd,OACE,qBACEhE,QAASA,EACTtI,UAAS,oBACL+N,EADK,YACK/N,EADL,8CAECuK,EAAMyD,eAFP,6CAIT3K,MAAK,eAAOA,GANd,SAQGK,KAIDuK,GAAc,SAAC,GAA6C,IAA3Cf,EAA0C,EAA1CA,MAAOG,EAAmC,EAAnCA,WAAYnN,EAAuB,EAAvBA,KAAMgO,EAAiB,EAAjBA,WACxC3D,EAAQ+B,qBAEd,OACE,sBAAKtM,UAAS,6BAAwBuK,EAAMkD,GAA9B,YAAd,UACE,sBAAKzN,UAAU,oBAAf,UACE,cAAC,GAAD,CAAM+N,OAAO,cAAb,SACE,sBAAM/N,UAAU,sBAElB,qBAAKA,UAAU,kCAAf,SAAkDkN,EAAMzK,OACxD,sBAAKzC,UAAU,0BAAf,UACIkN,EAAMiB,UACN,cAAC,GAAD,CAAM7F,QAAS,SAACtC,GAAD,OAAOkI,EAAWE,mBAAmBlB,IAApD,SACE,sBAAMlN,UAAU,kBAFA,KAKpB,cAAC,GAAD,CAAMsI,QAAS,SAACtC,GAAD,OAAOkI,EAAWG,YAAYnB,IAA7C,SACE,sBAAMlN,UAAU,kBAElB,cAAC,GAAD,CAAMsI,QAAS+E,EAAf,SACE,sBAAMrN,UAAS,mBAAcE,EAAO,WAAa,qBAIvD,qBAAKF,UAAU,oBAAoBqD,MAAO,CAAEiL,UAAW,YAAvD,SACGpB,EAAMqB,QAAQnM,KAAI,SAACoM,EAAMjM,GAAP,OACjB,cAAC,GAAD,CACE2L,WAAYA,EACZhB,MAAOA,EACPsB,KAAMA,GACDjM,YAQXkM,GAAiB,SAAC,GAA2B,IAAzBvB,EAAwB,EAAxBA,MAAOgB,EAAiB,EAAjBA,WACzB3D,EAAQ+B,qBAEd,EAKIjD,KAJF2C,EADF,EACEA,cACAG,EAFF,EAEEA,cACAC,EAHF,EAGEA,eACAlM,EAJF,EAIEA,KAGIwO,EAAQpN,IAAI4L,EAAO,CAAC,SAAU,SAAU,IAE9C,EAA8ByB,2BAAiBD,EAAMnN,QAArD,mBAAOqN,EAAP,KAAkBrD,EAAlB,KAEMsD,EAAejN,IAAM6J,aACzB,SAACqD,GACCZ,EAAWW,aAAa3B,EAAO4B,KAEjC,CAAC5B,EAAOgB,IAGJxB,EAAM9K,IAAMgK,SAEZtD,EAAU1G,IAAM6J,aACpB,SAACzF,GACC,GAAa,IAAT9F,EAAY,OAAOkM,IAEvB,IAAM2C,EAAOrC,EAAIzE,QAAQiE,wBAEzBF,EAAc,CACZxC,KAAMwF,GACNtF,UAHgB,CAAEwD,QAAOwB,QAAOG,eAActD,WAAUqD,aAIxDnF,IAAI,QAAD,OAAUsF,EAAKtF,IAAf,oBAGP,CACEiD,EACAV,EACAI,EACAlM,EACAgN,EACAwB,EACAG,EACAtD,EACAqD,IAQJ,OAJAhN,IAAMtC,WAAU,WACd6M,EAAc,CAAEe,QAAOwB,QAAOG,eAActD,WAAUqD,gBACrD,CAAC1B,EAAOwB,EAAOG,EAAcD,EAAWzC,EAAeZ,IAGxD,sBACEmB,IAAKA,EACL1M,UAAS,uBACFuK,EAAMkD,GADJ,kBACgBlD,EAAM0E,QADtB,sEAIT3G,QAASA,EANX,UAQE,kDACA,cAAC,WAAD,CAAU4G,OAAQR,EAAOS,OAAK,QAI9BH,GAAgB,SAAC,GAAyD,IAAvD9B,EAAsD,EAAtDA,MAAOwB,EAA+C,EAA/CA,MAAOG,EAAwC,EAAxCA,aAActD,EAA0B,EAA1BA,SAAUqD,EAAgB,EAAhBA,UACvDrE,EAAQ+B,qBACd,OACE,qBACEtM,UAAS,8CACqBuK,EAAMG,UAD3B,mBADX,SAKE,qBAAK1K,UAAS,UAAKuK,EAAMI,OAAX,yBAAd,SACE,qBAAK3K,UAAS,sBAAiBuK,EAAMkD,IAArC,SACE,cAAC,mBAAD,aACEP,MAAOA,EACPjF,QAASyG,EACTG,aAAcA,EACdtD,SAAUA,GACNqD,WA2BVQ,GAAY,SAAC,GAAiC,IAA/BZ,EAA8B,EAA9BA,KAAMN,EAAwB,EAAxBA,WAAYhB,EAAY,EAAZA,MAC/BmC,EAAOzN,IAAMC,SAAQ,WACzB,OArBsB,SAAC2M,GACzB,GAAoB,kBAATA,EAAmB,OAAOA,EAErC,OAAQA,GACN,IAAK,oBACH,MAAO,CACLc,QAAS,oBACTvH,KAAM,SAACmF,GAAD,OAAYA,EAAMqC,UAAY,SAAW,gBAC/CzF,OAAQ,WAAuBoD,GAAvB,OAAiCsC,EAAjC,EAAGA,kBAA+CtC,KAE9D,QACE,MAAO,CACLoC,QAAQ,iBAAD,OAAmBd,EAAnB,KACPzG,KAAM,WACN+B,OAAQ,SAAC9D,OAONyJ,CAAkBjB,KACxB,CAACA,IAEE1E,EAASlI,IAAM6J,aACnB,SAACzF,GACCqJ,EAAKvF,OAAOoE,EAAYhB,KAE1B,CAACmC,EAAMnB,EAAYhB,IAGfnF,EAA4B,oBAAdsH,EAAKtH,KAAsBsH,EAAKtH,KAAKmF,GAASmC,EAAKtH,KAEvE,OACE,cAAC,GAAD,CAAMO,QAASwB,EAAf,SACE,sBAAM9J,UAAS,mBAAc+H,Q,2KC7K7B2H,GAAc,CAClBC,OAAQ,CACN5H,KAAM,eACN6H,UA9Ec,SAAC,GAA2D,IAAzDC,EAAwD,EAAxDA,eAAgBC,EAAwC,EAAxCA,aAAc5B,EAA0B,EAA1BA,WAAed,EAAW,kBAErE7C,EAAQ+B,qBAEd,OACE,qCACKuD,EAAetO,OAChB,qBAAKvB,UAAS,mBAAgBuK,EAAMI,OAAtB,YAAiCJ,EAAMwF,SAArD,SACE,qBAAK/P,UAAS,cAAWuK,EAAMkD,GAAjB,YAAwBlD,EAAMwF,SAA5C,SACE,cAAC,SAAD,CAAQC,QAAUH,EAChBI,YAAY,iBACZC,SAAW,qBAAGzN,MACdM,MAAQ,KAAO4K,OAAQ,EACvBwC,YAAa,EACbpK,SAAWmI,EAAWkC,eARH,KAYzBN,EAAa1N,KAAI,SAAA8K,GAAK,OACpB,cAAC,GAAD,2BACwBE,GADxB,IAEEF,MAAQA,EAAQgB,WAAaA,IADvBhB,EAAM7K,YA4DtBgO,OAAQ,CACNtI,KAAM,oBACN6H,UAvDc,SAAC,GAAsD,IAApDU,EAAmD,EAAnDA,UAAWC,EAAwC,EAAxCA,WAAYrC,EAA4B,EAA5BA,WAAYsC,EAAgB,EAAhBA,UAEhDjG,EAAQ+B,qBAEd,EAA8B1K,IAAMwF,UAAS,GAA7C,mBAAOqJ,EAAP,KAAgBC,EAAhB,KACA9O,IAAMtC,WAAU,WACd,GAAImR,EAAS,CACX,IAAME,EAAO,kBAAMD,GAAW,IAE9B,OADAF,EAAUI,KAAK,aAAcD,GACtB,kBAAMH,EAAUK,IAAI,aAAcF,OAE1C,CAACF,EAASD,IAEb,IAAMM,EAAclP,IAAM6J,aAAY,SAAAsF,GACpCL,GAAW,GACXxC,EAAW8C,YAAYD,KACtB,CAAC7C,IAEJ,OACE,sBAAKlO,UAAS,UAAOuK,EAAMI,OAAb,YAAwBJ,EAAMwF,SAA5C,UAEE,qBAAK/P,UAAS,oFAETuK,EAAMG,UAFG,YAEY+F,EAAU,QAAU,SAFhC,cAKd,qBAAKzQ,UAAS,UAAOuK,EAAMkD,GAAb,gBAAwBlD,EAAMwF,QAA9B,aAAd,SAEIO,EAAUlO,KAAI,WAAqBG,GAArB,IAAGE,EAAH,EAAGA,KAAMwO,EAAT,EAASA,SAAT,OACZ,sBAAejR,UAAS,0BACb,IAANuC,EAAU,GAAK,OADI,gBACWgI,EAAMwF,QADjB,kBACmCxF,EAAMyD,eADzC,mDAEKzD,EAAM2G,QAFX,sCAGnB3O,IAAMgO,EAAN,qBACchG,EAAM4G,WADpB,YACoC5G,EAAM2G,SAD1C,UAEG3G,EAAM0E,QAFT,mBAHmB,kBAOpB3G,QAAU/F,IAAMgO,EAAa,KAAO,SAAAvK,GAAC,OAAI8K,EAAYvO,IAPzD,UAQE,qBAAKgB,IAAM0N,EAAW7N,IAAMX,EAAOzC,UAAS,UAAKuK,EAAMwF,WACvD,qBAAK/P,UAAU,OAAf,SAAwByC,MATfF,cA8BjB6O,GAAM,SAAC,GAA4C,IAA3C7O,EAA0C,EAA1CA,EAAGwF,EAAuC,EAAvCA,KAAMmG,EAAiC,EAAjCA,WAAYmD,EAAqB,EAArBA,gBAC/B,EAAyBhI,KAAlBnJ,EAAP,EAAOA,KAAMmK,EAAb,EAAaA,SACF,eAAQiC,sBACnB,OACE,qBAAehE,QAAU,SAAAtC,KAElB9F,GAAUA,GAAQqC,IAAM8O,IAC3BhH,IAGF6D,EAAWoD,cAAc/O,IAEzBvC,UAAS,gEARX,SAYE,qBAAKA,UAAS,6EAEF,IAANuC,EAAU,iBAAmB,GAFrB,yBAGPrC,GAAQqC,IAAM8O,EACf,yBADC,oCAHO,+DAAd,SASI,sBAAMrR,UAAS,mBAAgB+H,QArB1BxF,IAiFFgP,GArDC,SAAC,GAA4H,IAA1HrR,EAAyH,EAAzHA,KAAMmR,EAAmH,EAAnHA,gBAAiBnD,EAAkG,EAAlGA,WAAYsD,EAAsF,EAAtFA,KAAM3K,EAAgF,EAAhFA,MAAOnD,EAAyE,EAAzEA,SAAUyG,EAA+D,EAA/DA,eAAgBsH,EAA+C,EAA/CA,YAAaC,EAAkC,EAAlCA,mBAAuBtE,EAAW,kBAGpIuE,GADItI,KACGzH,IAAMC,SAAQ,WACzB,OAAO2P,EAAKpP,KAAI,SAAAwP,GACd,OAAIA,KAAOlC,GACFA,GAAYkC,GAEdA,OAER,CAACJ,KAEO,eAAQlF,sBAEnB,OACE,cAAC,GAAD,CACEnC,eAAiBA,EACjBgB,SAAU,OACVF,UAAYpL,QAAQK,IAASL,QAAQ4R,GACrCrG,YAAa,EACbL,YAAcrH,EALhB,SAOK+N,EACD,sBAAKzR,UAAS,8BAAiD,QAAvB0R,EAA+B,WAAa,IAAQrO,MAAO,CAACyC,WAAY,0BAAhH,UAEE,qBAAK9F,UAAS,iCAAmD,QAAvB0R,EAA+B,GAAK,yBAA2BrO,MAAO,CAACyC,WAAY,0BAA7H,SACI6L,EAAKvP,KAAI,WAAWG,GAAX,IAAGwF,EAAH,EAAGA,KAAH,OACT,cAAC,GAAD,CAAKA,KAAMA,EAAcxF,EAAGA,EAAG2L,WAAaA,EAAamD,gBAAkBA,GAArD9O,QAK1B,sBAAKvC,UAAU,aAAf,UAEK6G,EACD,qBAAK7G,UAAU,yBAAf,SACI6G,IAFK,KAKT8K,EAAKvP,KAAI,WAAgBG,GAAhB,IAAGqN,EAAH,EAAGA,UAAH,OACP,qBAAe5P,UAAU,gBACvBqD,MAAQ,CAAEuK,QAASrL,IAAM8O,EAAkB,QAAU,QADvD,SAEE,cAACzB,EAAD,2BAAgBxC,GAAhB,IAAuBc,WAAaA,MAF3B3L,YAlBJ,QCrHRsP,GA3BM,SAAC,GAAyB,IAAvB3E,EAAsB,EAAtBA,MAEhB3C,GAFsC,EAAfuH,SAEfxF,sBAEd,OACE,qBAAKtM,UAAS,oBACPuK,EAAMG,UADC,yFAIZrH,MAAQ,GAJV,SAME,qBAAKrD,UAAS,UAAOuK,EAAMI,OAAb,wCAAd,SACE,sBAAK3K,UAAS,UAAOuK,EAAMkD,GAAb,6CAAd,UACE,sBAAKzN,UAAU,+CAAf,UACE,qBAAKA,UAAU,SAAf,SAA0BkN,EAAMzK,OAChC,qBAAKzC,UAAS,kBAAd,SACGkN,EAAM1K,MAAMsP,SAAZ,UAA0B5E,EAAM1K,MAAMsP,SAAtC,KAAoD,QAGzD,qBAAK9R,UAAS,UAAOuK,EAAMyD,gBAA3B,SACE,cAAC,kBAAD,CAAiB+D,MAAQ,IAAOC,MAAM,2B,0CClB5CC,GAAe,SAACC,EAAD,GAA6B,IAArBlH,EAAoB,EAApBA,MAAO1H,EAAa,EAAbA,OAEF6O,EAASD,EAATC,EAAGC,EAAMF,EAANE,EAE7BC,EAAO/O,EACXgP,EAAM,sBAHkB,GAGlB,+BAEQF,EAFR,2BAE8BC,EALZ,GAGlB,sBAIR,OAAIF,EAAY,GAARnH,EACA,qBAAN,OACKmH,EATK,GAQV,sBAEKG,EAFL,WAKI,gCAAN,OACkBH,EAdN,GAaZ,qBAEKG,EAFL,UAWIC,GAAqB,SAAC,EAAUC,GAAiB,IAAzBL,EAAwB,EAAxBA,EAAGC,EAAqB,EAArBA,EAIzBE,EAAM,eAAYF,EAAZ,aAEZ,MAAoB,UAAhBI,EACI,qBAAN,OACKL,EANK,GAKV,sBAEKG,EAFL,WAKI,gCAAN,OACkBH,EAXN,GAUZ,qBAEKG,EAFL,UAKIG,GAAe,SAAC,EAAOD,GAAgB,EAArBL,EACtB,MAAoB,UAAhBK,EACK,2DAEF,2DAGHE,GAAe,SAAC,GAA+B,IAA7BF,EAA4B,EAA5BA,YAAa9O,EAAe,EAAfA,SAC7B6G,EAAQ+B,qBACd,OACE,qBAAKjJ,MAAQ,CACTuH,UAA2B,SAAhB4H,EACT,gCAAkC,gCAEtCxS,UAAS,oBACJuK,EAAMkD,GADF,uEAGY,SAAhB+E,EAAyB,SAAW,UAHhC,YAJX,SASI9O,KAKKiP,GAAkB,SAAC,GAAsD,IAApDjP,EAAmD,EAAnDA,SAAUkP,EAAyC,EAAzCA,OAAQvQ,EAAiC,EAAjCA,GAAIwQ,EAA6B,EAA7BA,QAASC,EAAoB,EAApBA,OAAQ9H,EAAY,EAAZA,MAEjEkH,EAAMW,EAAQC,GAEdN,EAAc5Q,IAAMgK,OAAOsG,EAAIC,EAAY,GAARnH,EAAc,QAAU,QAE3D3H,EAAQzB,IAAMC,SAAQ,WAC1B,MAAO,CACL4H,IAAK,MACLmB,UAAW6H,GAAaP,EAAKM,EAAYvK,YAE1C,CAACiK,IAEE3H,EAAQ+B,qBAEd,OACE,sBAAKtM,UAAS,4JAIKuK,EAAMG,UAJX,4CAOZrH,MAAQ,CACNuH,UAAW2H,GAAmBL,EAAKM,EAAYvK,SAC/C8K,UAAW,uCATf,UAYE,qBAAK/S,UAAS,uCACUuK,EAAMG,UADhB,6CAEiB,SAAxB8H,EAAYvK,QAAqB,UAAY,SAFtC,cAIZ5E,MAAQA,IAENK,EAEF,cAAC,GAAD,CAAc8O,YAAcA,EAAYvK,QAAxC,SACE,cAAC,GAAD,CAAMK,QAAU,SAAAtC,GAAC,OAAI4M,EAAOvQ,IAA5B,SACE,sBAAMrC,UAAU,wBAQfgT,GAAqB,SAAC,GAAkD,IAAhD5S,EAA+C,EAA/CA,KAAMsD,EAAyC,EAAzCA,SAAUoP,EAA+B,EAA/BA,OAAQD,EAAuB,EAAvBA,QAAYzF,EAAW,kBAC5E7C,EAAQ+B,qBAER4F,EAAMW,EAAQC,GAEpB,OACE,qBAAK9S,UAAS,+IAIKuK,EAAMG,UAJX,4CAOZrH,MAAQ,CACNuK,QAASxN,EAAO,OAAS,OACzBwK,UAAWqH,GAAaC,EAAK9E,GAC7B2F,UAAW,uCAVf,SAcIrP,K,4KCnCOuP,GAhGU,SAAC,GAMnB,IALLnD,EAKI,EALJA,aAKI,IAJJ9E,aAII,MAJI,IAIJ,MAHJR,eAGI,MAHM,EAGN,EAFJ0D,EAEI,EAFJA,WACGnF,EACC,kBACJ,EAAoD+G,EAAajL,QAC/D,SAACxD,EAAG6R,GACF,GAAIA,EAAErF,OAAQ,CACZ,MAAwBqF,EAAErF,OAAlBzN,YAAR,SACI+S,EAAO/S,EACS,oBAATA,IACT+S,EAAO/S,EAAK8S,IAEVC,GACF9R,EAAE,GAAG6E,KAAKgN,GAGd,IAAME,EAAiBF,EAAEG,UAAUzT,QAAO,YAAsB,IAAD,IAAlBQ,YAAkB,SACzD+S,EAAO/S,EAIX,MAHoB,oBAATA,IACT+S,EAAO/S,EAAK8S,IAEPC,KAST,OAPIC,EAAe7R,SACjBF,EAAE,GAAG6E,KAAK,CAACgN,EAAGE,IACd/R,EAAE,GAAKiS,KAAKC,IACVlS,EAAE,GACF6R,EAAEG,UAAUxO,QAAO,SAAC2O,EAAIC,GAAL,OAAYH,KAAKC,IAAIC,EAAIlS,IAAImS,EAAI,QAAS,MAAK,KAG/DpS,IAET,CAAC,GAAI,GAAI2J,IA5BX,mBAAO0I,EAAP,KAAqBC,EAArB,KAAoCC,EAApC,KA+BMrJ,EAAQ+B,qBAEd,OACE,sBACEtM,UAAS,uHAKTqD,MAAO,CAAEmH,QAAQ,GAAD,OAAKA,EAAL,OANlB,UAQGkJ,EAAatR,KAAI,SAAC8K,GAAD,OAChB,cAAC,GAAD,2BAEMA,EAAMW,QAFZ,IAGEK,WAAYA,EACZhB,MAAOA,EACP1C,QAASA,EACToJ,aAAcA,IALT1G,EAAM7K,OASbsR,EAAcpS,OACd,qBACEvB,UAAS,wBACLuK,EAAMG,UADD,8HAKTrH,MAAO,CACL2H,MAAM,GAAD,OAAK4I,EAAyB,EAAVpJ,EAApB,OAPT,SAUGmJ,EAAcvR,KAAI,mCAAE8K,EAAF,KAASmG,EAAT,YACjB,qBAEErT,UAAS,wEAEHuK,EAAMI,OAFH,kCAFX,SAOG0I,EAAUjR,KAAI,SAACyR,EAAKtR,GAAN,OACb,cAAC,GAAD,uCAEMwG,GACA8K,GAHN,IAIE3G,MAAOA,EACPgB,WAAYA,EACZ4B,aAAcA,IALTvN,OARJ2K,EAAM7K,SAbM,SAsCzByR,GAAU,SAAC,GAOV,IANL5G,EAMI,EANJA,MACA6G,EAKI,EALJA,OACAnE,EAII,EAJJA,UACA1B,EAGI,EAHJA,WAGI,IAFJhO,YAEI,SADD6I,EACC,kBACJ,EAA0BnH,IAAMwF,SAASlH,GAAzC,mBAAO8T,EAAP,KAAexI,EAAf,KAEMjB,EAAQ+B,qBAEd,OACE,sBACEtM,UAAS,kBACPuK,EAAMkD,GADC,uBADX,UAKIsG,EAGA,sBACE/T,UAAS,qFADX,UAME,qBACEA,UAAS,iCACEgU,EAAS,cAAgB,aAD3B,6BADX,SAKqB,oBAAXD,EAAwB,cAACA,EAAD,CAAQ7G,MAAOA,IAAY6G,IAE7D,qBAAK/T,UAAU,YAAf,SACE,cAAC,GAAD,CAAMsI,QAAS,SAACtC,GAAD,OAAOwF,GAASwI,IAA/B,SACE,sBAAMhU,UAAS,gBAAWgU,EAAS,QAAU,iBAjBnD,qBAAKhU,UAAU,SAsBf4P,EACA,qBAAK5P,UAAS,UAAKgU,EAAS,QAAU,UAAtC,SACwB,oBAAdpE,EACN,cAACA,EAAD,aAAW1C,MAAOA,EAAOgB,WAAYA,GAAgBnF,IAErD6G,IALQ,SAadqE,GAAkB,SAAC,GAQlB,IAPLL,EAOI,EAPJA,aACApJ,EAMI,EANJA,QAMI,IALJQ,aAKI,MALI,IAKJ,EAJJkJ,EAII,EAJJA,MACAhG,EAGI,EAHJA,WACAhB,EAEI,EAFJA,MACGnE,EACC,kBACEwB,EAAQ+B,qBAEd,OACE,qBACEtM,UAAS,kBACPuK,EAAMG,UADC,0CAGTrH,MAAO,CACL2H,MAAM,GAAD,OAAKsI,KAAKC,IAAIK,EAAc5I,GAAmB,EAAVR,EAArC,MACL2J,aAAc,YANlB,SASE,qBAAKnU,UAAS,UAAKuK,EAAMI,OAAX,gBAAd,SACE,sBAAK3K,UAAS,UAAKuK,EAAMkD,GAAX,iBAAd,UACGyG,EACC,qBAAKlU,UAAS,8BAAyBuK,EAAM6J,SAA/B,SAAd,SACoB,oBAAVF,EACN,cAACA,EAAD,CAAOhH,MAAOA,EAAOgB,WAAYA,IAEjCgG,IAIJ,qBAAKlU,UAAU,SAEjB,cAAC,SAAD,eAAY+I,Y,2HC7IPsL,GAjDQ,SAAC,GASkB,IAThBN,EASe,EATfA,OACAnE,EAQe,EARfA,UACA1C,EAOe,EAPfA,MACAgB,EAMe,EANfA,WACAoG,EAKe,EALfA,UACAxE,EAIe,EAJfA,aACA3C,EAGe,EAHfA,cACAoH,EAEe,EAFfA,cACA1E,EACe,EADfA,eACG9G,EAAY,kBAEjCwB,EAAQ+B,qBAENkB,EAA8B8G,EAA9B9G,QAASgH,EAAqBF,EAArBE,SAAUC,EAAWH,EAAXG,OAE3B,OACE,cAAC,YAAD,2BAAgB1L,GAAhB,IAAwB/I,UAAU,sBAChCsI,QAAU,SAAAtC,GAAC,OAAIkI,EAAWwG,kBAAkBlH,EAASgH,IACrDG,YAAc,SAAA3O,GAAC,OAAIkI,EAAWwG,kBAAkBlH,EAASgH,IACzDnR,MAAQ,CAAEoR,UACVlG,QAAU,CACR,CAAExG,KAAM,WACNO,QAAS,SAAAtC,GAAC,OAAIkI,EAAW0G,WAAWpH,EAASgH,MANnD,SASE,sBAAKxU,UAAU,MAAf,UACK+T,EACD,qBAAK/T,UAAU,yBAAf,SACsB,oBAAX+T,EACP,cAACA,EAAD,CAAQ7G,MAAQA,EAAQgB,WAAaA,IACrC6F,IAJM,KAQZ,qBAAK/T,UAAS,sBAAmBuK,EAAMI,QAAvC,SACE,qBAAK3K,UAAS,sBAAmBuK,EAAMkD,IAAvC,SACI,cAACmC,EAAD,CAAW1C,MAAQA,EACjBgB,WAAaA,EACb4B,aAAeA,EACf3C,cAAgBA,EAChBoH,cAAgBA,EAChB1E,eAAiBA,e,wDCrBlBgF,GApBG,SAAC,GAEkB,IAFhB9M,EAEe,EAFfA,KAAe+M,GAEA,EAFTxF,QAES,EAFAwF,YACd5G,EACc,EADdA,WAAYhB,EACE,EADFA,MACTE,EAAW,kBAC5B7C,EAAQ+B,qBACd,OACE,qBAAKtM,UAAS,UAAOuK,EAAMG,UAAb,yBAAd,SACE,qBAAK1K,UAAS,UAAOuK,EAAMI,OAAb,oBAAd,SACE,qBAAK3K,UAAS,wBACPuK,EAAMkD,GADC,kBACalD,EAAM0E,QADnB,yBAEP1E,EAAM6J,SAFC,YAEa7J,EAAMwK,cAFnB,wHAMZzM,QAAU,SAAAtC,GAAC,OAAI8O,EAAW5G,EAAYhB,EAAOE,IAN/C,SAOE,sBAAMpN,UAAS,aAAU+H,Y,0JCY7BiN,GAAoB,CACxBC,OAAQ,EAAE,UAAW,OACrBC,QAAS,EACTC,KAAM,GACNC,uBAAuB,EAEvB/E,OAnB2B,CAC3B,CAAE5N,KAAM,OAAQY,MAAO,oDACvB,CAAEZ,KAAM,QAASY,MAAO,oDACxB,CACEZ,KAAM,YACNY,MAAO,oDAET,CACEZ,KAAM,oBACNY,MAAO,qDAWTgS,oBAAoB,EACpBC,aAAc,gBAGVC,GAAiB,CACrB/D,KAAM,CAAC,SAAU,UACjB3K,MAAO,GACPsD,eAAgB,OAGdqL,GAAY,EACVC,GAAc,uCAAqBD,KAEnCE,GAAuB,CAC3BC,KAAM,CAAC,GAAI,IACXV,OAAQ,EAAE,UAAW,OACrBE,KAAM,KAEFS,GAAoB,SAACvS,GAAyB,IAAlB2M,EAAiB,uDAAP,GAC1C,6BAAoC0F,IAAyB1F,GAArD2F,EAAR,EAAQA,KAAMV,EAAd,EAAcA,OAAQE,EAAtB,EAAsBA,KACtB,MACE,2CAAoC9R,EAAMwS,MAAM,IAAhD,sBACGZ,EADH,YACaE,EADb,YACqBQ,EAAK7V,KAAK,MAD/B,qDAE8CgW,IAASC,cAIrDxM,GAAe,CACnBnH,IAAK,KACL4T,kBAAmB,GACnBlG,aAAc,GACdmG,cAAe,GACf9I,cAAe,GACf+I,UAAW,CACTjU,KAAM,IAAIkU,IACVjE,IAAK,CAAC,EAAG,GACTY,OAAQ,IAEVsD,iBAAkB,GAClBC,iBAAkB,GAClB/F,UAAW,GACXC,WAAY,EACZc,gBAAiB,EACjBiD,UAAW,GACXgC,gBAAiB,GACjBC,YAAa,IAET1M,GAAU,SAACrH,EAAOsH,GACtB,IAAQhB,EAAqBgB,EAArBhB,KAASiB,EAAjB,YAA6BD,EAA7B,IACA,OAAQhB,GACN,IAAK,aACH,OAAO,2BACFtG,GADL,IAEEwT,kBAAkB,GAAD,mBAAMxT,EAAMwT,mBAAZ,CAA+BjM,EAAQmD,MAAM7K,OAUlE,IAAK,gBACH,OAAO,2BACFG,GADL,IAEE2K,cAAc,2BACT3K,EAAM2K,eADE,kBAEVpD,EAAQyD,QACPlM,IAAIkB,EAAO,CAAC,gBAAiBuH,EAAQyD,SAAU,GAAK,MAG5D,IAAK,eACH,OAAO,2BACFhL,GADL,IAGE2K,cAAc,2BACT3K,EAAM2K,eADE,kBAEVpD,EAAQyD,QAAU8F,KAAKC,IACtB,EACA/Q,EAAM2K,cAAcpD,EAAQyD,SAAW,OAI/C,IAAK,iBACH,OAAO,2BACFhL,GADL,IAEEsN,aAAa,CAAE/F,EAAQmD,OAAX,mBAAqB1K,EAAMsN,eACvCyG,YAAY,2BACP/T,EAAM+T,aADA,kBAERxM,EAAQmD,MAAM7K,GAAK0H,EAAQmD,MAAM1K,UAOxC,IAAK,mBACH,OAAO,2BACFA,GADL,IAEEsN,aAActN,EAAMsN,aAAalQ,QAC/B,qBAAGyC,KAAgB0H,EAAQyD,aAGjC,IAAK,mBACH,IAAQvL,EAAyD8H,EAAzD9H,KAAMiL,EAAmDnD,EAAnDmD,MAAOsJ,EAA4CzM,EAA5CyM,UAAWC,EAAiC1M,EAAjC0M,SAAUC,EAAuB3M,EAAvB2M,UAActJ,EAAxD,YAAiErD,EAAjE,IAQA,OAPAvH,EAAM0T,UAAUjU,KAAK0U,IAAIzJ,EAAM7K,GAAI,CACjCJ,OACAuU,YACAtJ,QACAuJ,WACAC,cAEK,2BACFlU,GADL,IAEE0T,UAAU,2BACL1T,EAAM0T,WACN9I,KAIT,IAAK,oBACH,IAAQF,EAAUnD,EAAVmD,MAER,OADA1K,EAAM0T,UAAUjU,KAAK2U,OAAO1J,EAAM7K,IAC3B,2BACFG,GADL,IAEE0T,UAAU,eACL1T,EAAM0T,aAIf,IAAK,iBACH,IAAK1T,EAAM0T,UAAUjU,KAAK0T,KAAM,OAAOnT,EAEvC,IAAMqU,EAAS,aACbxU,GAAIoT,KACJqB,WAAY,YAAItU,EAAM0T,UAAUjU,KAAKsL,UAClC3N,QAAO,qBAAG6W,YACV9O,MAAK,SAACtG,EAAGmG,GAAJ,OAAUnG,EAAEqV,UAAYlP,EAAEkP,cAC/B3M,GAEL,OAAI8M,EAAUC,WAAWvV,OAChB,2BACFiB,GADL,IAEE4T,iBAAiB,GAAD,mBAAM5T,EAAM4T,kBAAZ,CAA8BS,MAG3CrU,EAGT,IAAK,gBACH,OAAO,2BACFA,GADL,IAEE4T,iBAAkB5T,EAAM4T,iBAAiBxW,QAAO,SAACmX,GAC/C,OAAIA,EAAI1U,KAAO0H,EAAQ1H,KACvB0U,EAAIC,OAAOpE,UACJ,QAGb,IAAK,oBACH,OAAO,2BACFpQ,GADL,IAEEyT,cAAc,GAAD,mBAAMzT,EAAMyT,eAAZ,CAA2BlM,EAAQmD,UAEpD,IAAK,uBACH,OAAO,2BACF1K,GADL,IAEEyT,cAAezT,EAAMyT,cAAcrW,QACjC,qBAAGyC,KAAgB0H,EAAQmD,MAAM7K,QAGvC,IAAK,aACH,IAAQmL,EAAsBzD,EAAtByD,QAASgH,EAAazK,EAAbyK,SACjB,OACEhS,EAAM8R,UAAUzP,QACd,SAACxD,EAAG6R,GAAJ,OAAU7R,GAAM6R,EAAE1F,UAAYA,GAAW0F,EAAEsB,WAAaA,KACxD,GAGKhS,EACF,2BACFA,GADL,IAEE8R,UAAU,GAAD,mBAAM9R,EAAM8R,WAAZ,CAAuB,CAAE9G,UAASgH,WAAUC,OAAQ,OAGjE,IAAK,uBACH,IAAQjH,EAAsBzD,EAAtByD,QAASgH,EAAazK,EAAbyK,SACjB,OAAO,2BACFhS,GADL,IAEE8R,UAAW9R,EAAM8R,UAAUlS,KAAI,SAAC6U,GAAD,mBAAC,eAC3BA,GAD0B,IAE7BxC,OAAQwC,EAAGzJ,UAAYA,GAAWyJ,EAAGzC,WAAaA,EAAW,GAAK,SAgBxE,IAAK,cACH,OAAO,2BACFhS,GADL,IAEE8R,UAAW9R,EAAM8R,UAAU1U,QACzB,gBAAG4N,EAAH,EAAGA,QAASgH,EAAZ,EAAYA,SAAZ,QACIhH,IAAYzD,EAAQyD,SAAWgH,IAAazK,EAAQyK,eAG9D,IAAK,eACH,IAAQtH,EAAoBnD,EAApBmD,MAAOgK,EAAanN,EAAbmN,SACf,OAAO,2BACF1U,GADL,IAEE+T,YAAY,2BACP/T,EAAM+T,aADA,kBAERrJ,EAAM7K,GAAK6U,MAIlB,IAAK,gBACenN,EAAVmD,MACR,OAAO,eACF1K,GAOP,IAAK,gBACL,IAAK,aACL,IAAK,aACL,IAAK,eACH,OAAO,2BACFA,GACAuH,GAEP,QACE,OAAOvH,IAIP2U,GAAa,GACbC,GAAc,GA0BdC,GAAS,SAACtO,GACd,IACEgN,EAMEhN,EANFgN,YADF,EAOIhN,EALFuO,kBAFF,MAEeF,GAFf,IAOIrO,EAJF4G,cAHF,MAGWwH,GAHX,IAOIpO,EAHFwO,eAJF,MAIYH,GAJZ,IAOIrO,EAFFyO,kBALF,MAKeJ,GALf,IAOIrO,EADF0O,yBANF,MAMsB,eANtB,EASMC,EAAe9V,IAAMC,SAAQ,WACjC,MAAuB,kBAAZ0V,EACF,CACL9F,YAAa5R,QAAQ0X,IAGlB,aACL9F,aAAa,GACV8F,KAEJ,CAACA,IAEJ,EAAgCrW,sBAAxBC,EAAR,EAAQA,OAER,GAFA,EAAgBC,YAEUQ,IAAM0J,WAAWzB,GAASN,KAApD,mBAAO/G,EAAP,KAAc+I,EAAd,KAEMoM,EAAc/V,IAAM6J,aAAY,SAACyK,GACrC3K,EAAS2K,KACR,IAEG0B,EAAgBhW,IAAM6J,aAC1B,SAACqH,GACC,OAAOtQ,EAAMJ,IAAIyQ,QAAQC,KAE3B,CAACtQ,EAAMJ,MAGHyV,EAAejW,IAAM6J,aACzB,SAACyB,EAAO4K,EAAY/U,GAClB,GAAKzB,IAAI4L,EAAO,CAAC,UAAW4K,GAAa,MAAzC,CAEAvM,EAAS,CAAEzC,KAAM,gBAAiB0E,QAASN,EAAM7K,KAEjD,IAAM0V,EAAY7K,EAAMI,QAAQwK,GAAY/U,MAE5CmK,EAAMI,QAAN,2BACKJ,EAAMI,SADX,kBAEGwK,EAFH,2BAGO5K,EAAMI,QAAQwK,IAHrB,IAIIC,YACAhV,YAIJiV,QAAQC,QAAQ/K,EAAMgL,eAAeJ,EAAY/U,EAAOgV,IACrDI,MAAK,kBAAMjL,EAAMxL,UAAUP,MAC3BgX,MAAK,kBAAMjL,EAAMkL,OAAO5V,EAAMJ,IAAKjB,MACnCgX,MAAK,WACJ5M,EAAS,CAAEzC,KAAM,eAAgB0E,QAASN,EAAM7K,WAGtD,CAACG,EAAMJ,IAAKjB,IAGRO,EAAYE,IAAM6J,aACtB,SAACyB,GACC3B,EAAS,CAAEzC,KAAM,gBAAiB0E,QAASN,EAAM7K,KAEjD2V,QAAQC,QAAQ/K,EAAMxL,UAAUP,IAC7BgX,MAAK,kBAAMjL,EAAMkL,OAAO5V,EAAMJ,IAAKjB,MACnCgX,MAAK,WACJ5M,EAAS,CAAEzC,KAAM,eAAgB0E,QAASN,EAAM7K,UAGtD,CAACG,EAAMJ,IAAKjB,IAGR0N,EAAejN,IAAM6J,aACzB,SAACyB,EAAO4B,GACDxN,IAAI4L,EAAO,SAAU,QAE1BpL,QAAQC,IAAI,gBAAiBmL,EAAMW,OAAQiB,GAC3C5B,EAAMW,OAAN,2BACKX,EAAMW,QACNiB,GAEL5B,EAAMkL,OAAO5V,EAAMJ,IAAKjB,GAExBoK,EAAS,CAAEzC,KAAM,oBAEnB,CAACtG,EAAMJ,IAAKjB,IAGRkX,EAAkBzW,IAAM6J,aAAY,SAACyB,GACzCA,EAAMiB,WAAY,EAElB5C,EAAS,CACPzC,KAAM,oBACNoE,YAED,IACGkB,EAAqBxM,IAAM6J,aAC/B,SAACyB,GACCA,EAAMoL,UAAU9V,EAAMJ,KAEtBmJ,EAAS,CACPzC,KAAM,uBACNoE,YAGJ,CAAC1K,EAAMJ,MAEHoN,EAAmB5N,IAAM6J,aAC7B,SAACyB,GACCA,EAAMsC,iBAAiBhN,EAAMJ,KAE7BmJ,EAAS,CAAEzC,KAAM,mBAEnB,CAACtG,EAAMJ,MAEHgO,EAAWxO,IAAM6J,aACrB,SAACyB,GACCA,EACGqL,OAAO/V,EAAMJ,IAAKjB,EAAQwW,GAC1BQ,MAAK,kBAAMjL,EAAMkL,OAAO5V,EAAMJ,IAAKjB,MAEtCoK,EAAS,CACPzC,KAAM,iBACNoE,YAGJ,CAAC1K,EAAMJ,IAAKjB,EAAQwW,IAEhBtJ,EAAczM,IAAM6J,aACxB,SAACyB,GACCA,EAAMoL,UAAU9V,EAAMJ,KAEtBmJ,EAAS,CACPzC,KAAM,mBACN0E,QAASN,EAAM7K,OAGnB,CAACG,EAAMJ,MAEHkP,EAAgB1P,IAAM6J,aAAY,SAAC4F,GACvC9F,EAAS,CACPzC,KAAM,aACNuI,sBAED,IAEGmH,EAAY5W,IAAM6J,aAAY,SAAC+B,EAASgH,GAC5CjJ,EAAS,CACPzC,KAAM,aACN0E,UACAgH,eAED,IACGI,EAAahT,IAAM6J,aAAY,SAAC+B,EAASgH,GAC7CjJ,EAAS,CACPzC,KAAM,cACN0E,UACAgH,eAED,IACGE,EAAoB9S,IAAM6J,aAAY,SAAC+B,EAASgH,GACpDjJ,EAAS,CACPzC,KAAM,uBACN0E,UACAgH,eAED,IAEGiE,EAAwB7W,IAAM6J,aAAY,SAACpJ,GAC/CkJ,EAAS,CACPzC,KAAM,gBACNzG,SAED,IACGqW,EAAqB9W,IAAM6J,aAC/B,YAA4B,IAAzBqH,EAAwB,EAAxBA,OACKkE,GADmB,EAAhBd,WACM,IAAIJ,IAAS6C,QAASC,UAAU9F,GAAQ+F,MAAMrW,EAAMJ,MACnEmJ,EAAS,CACPzC,KAAM,iBACNkO,SACAlE,aAGJ,CAACtQ,EAAMJ,MAGH0W,EAAiBlX,IAAM6J,aAC3B,WAA2B,IAA1BsN,EAAyB,uDAAd,UACJC,EAASxW,EAAMJ,IAAI6W,YACnB5X,EAAI6X,SAASC,cAAc,KACjC9X,EAAE+X,SAAWL,EACb1X,EAAEiF,KAAO0S,EAAOK,YAChBhY,EAAEiY,UAEJ,CAAC9W,EAAMJ,MAGH4O,EAAcpP,IAAM6J,aACxB,SAAC8E,GACC/N,EAAMJ,IAAIwO,KAAK,cAAc,SAAC5K,GAC5BxD,EAAMsN,aACH+F,QACA0D,UACA1U,QAAO,SAAC2U,EAAStM,GAChB,OAAOsM,EAAQrB,MAAK,kBAClBjL,EAAMuM,iBAAiBjX,EAAMJ,IAAKjB,EAAQwW,QAE3CK,QAAQC,cAEfzV,EAAMsN,aAAazK,SAAQ,SAAC6H,GAC1BA,EAAMoL,UAAU9V,EAAMJ,QAExBI,EAAMJ,IAAIsX,SAASlX,EAAM8N,UAAUC,GAAYlN,OAC/CkI,EAAS,CACPzC,KAAM,gBACNyH,iBAGJ,CAAC/N,EAAMJ,IAAKI,EAAM8N,UAAW9N,EAAMsN,aAAc6H,EAAaxW,IAG1D+M,EAAatM,IAAMC,SACvB,iBAAO,CACL2N,mBACAY,WACA/B,cACAgK,kBACAjK,qBACAS,eACAyC,gBACAkH,YACA5D,aACAiD,eACAnW,YACA+W,wBACAC,qBACAhE,oBACAkD,gBACAkB,oBAEF,CACEtJ,EACAY,EACA/B,EACAgK,EACAjK,EACAS,EACAyC,EACA5P,EACAoX,EACAN,EACA5D,EACAiD,EACAnD,EACA+D,EACAC,EACAd,IAIE+B,EAAa/X,IAAMgK,OAAN,2BAAkBoJ,IAAsBsC,IAErDjV,EAAKT,IAAMgK,OAAO7C,EAAM1G,IAAMoT,MAGpC7T,IAAMtC,WAAU,WACd,GAAKyW,EAAL,CAEAD,IAASC,YAAcA,EAEvB,IAEA,EAAsC4D,EAAW1R,QAAzC5E,EAAR,EAAQA,MAAOgN,EAAf,EAAeA,OAAWlK,EAA1B,kBAEMmK,EAAYD,EAAOjO,KAAI,SAACiB,GAAD,mBAAC,eACzBA,GADwB,IAE3B4N,SAAU2E,GAAkBvS,EAAMA,MAAO,CAAE4R,OAAQ9O,EAAQ8O,cAEzD1E,EAAa,EAEjB,GAVc,uBAUJqJ,KAAKvW,GAAQ,CACrB,IAAM0N,EAAQT,EAAUzL,QAAO,SAACxD,EAAG6R,EAAG3Q,GACpC,OAAO2Q,EAAE7P,QAAUA,EAAQd,EAAIlB,KAC7B,IACW,IAAX0P,EACFT,EAAUuJ,QAAQ,CAChBpX,KAAM,oBACNY,QACA4N,SAAU2E,GAAkBvS,EAAO8C,KAGrCoK,EAAaQ,EAIjB,IAAM3O,EAAM,IAAI0T,IAASK,IAAb,yBACV2D,UAAWzX,EAAG4F,SACX9B,GAFO,IAGV9C,MAAOiN,EAAUC,GAAYlN,SAe/B,OAZIoU,GACFrV,EAAI2X,WAAW,IAAIjE,IAASkE,kBAAqBvC,GAGnDrV,EAAI6X,GAAG,QAAQ,SAACjU,GACduF,EAAS,CAAEzC,KAAM,eAAgBoR,SAAUC,YAAYC,WAGzDhY,EAAIwO,KAAK,QAAQ,SAAC5K,GAChBuF,EAAS,CAAEzC,KAAM,aAAc1G,MAAKkO,YAAWC,kBAG1C,kBAAMnO,EAAIwQ,aAChB,CAACmD,IAGJnU,IAAMtC,WAAU,WACTkD,EAAMJ,KAEX,sBAAIuN,GAAJ,YAAenN,EAAMyT,gBAClBrW,QAAO,gBAAGyC,EAAH,EAAGA,GAAH,OAAaG,EAAMwT,kBAAkBqE,SAAShY,MACrDkX,UACA1U,QAAO,SAAC2U,EAAStM,GAChB3B,EAAS,CAAEzC,KAAM,aAAcoE,UAE/BA,EAAMoN,eAAiB,SAACpN,EAAOgK,GAC7B3L,EAAS,CACPzC,KAAM,eACNoO,WACAhK,WAPsB,eAWf4K,GACT5K,EAAMI,QAAQwK,GAAY/R,SAAW,SAACwU,GAAD,OACnC1C,EAAa3K,EAAO4K,EAAYyC,KAFpC,IAAK,IAAMzC,KAAc5K,EAAMI,QAAU,EAA9BwK,GAiBX,OAZA5K,EAAMqB,QAAQlJ,SAAQ,SAACmJ,GACM,oBAAhBA,EAAK1E,SACd0E,EAAKsG,WAAatG,EAAK1E,OAAO0Q,KAAKtN,OAIvCA,EAAMuN,WAAWpV,SAAQ,SAACyE,GACxBA,EAAOgL,WAAahL,EAAOA,OAAO0Q,KAAKtN,MAGzC3B,EAAS,CAAEzC,KAAM,gBAAiB0E,QAASN,EAAM7K,KAE1CmX,EACJrB,MAAK,kBAAMjL,EAAMwN,MAAMlY,EAAMJ,IAAKjB,EAAQ+M,MAC1CiK,MAAK,WACJ,GAAIjL,EAAMyN,UACR,OAAOzN,EACJxL,UAAUP,GACVgX,MAAK,kBAAMjL,EAAMqL,OAAO/V,EAAMJ,IAAKjB,EAAQwW,MAC3CQ,MAAK,kBAAMjL,EAAMkL,OAAO5V,EAAMJ,IAAKjB,MACnCgX,MAAK,kBAAM5M,EAAS,CAAEzC,KAAM,iBAAkBoE,gBAGpDiL,MAAK,WACJ5M,EAAS,CAAEzC,KAAM,eAAgB0E,QAASN,EAAM7K,UAEnD2V,QAAQC,aACZ,CACDzV,EAAMJ,IACNI,EAAMyT,cACN9U,EACAwO,EACAzB,EACA2J,EACAF,EACAnV,EAAMwT,oBAGR,IAAM4E,EAAehZ,IAAM6J,aACzB,YAAiB,IAAdqH,EAAa,EAAbA,OACKkE,GAAS,IAAIlB,IAAS6C,QAASC,UAAU9F,GAAQ+F,MAAMrW,EAAMJ,KACnEmJ,EAAS,CACPzC,KAAM,iBACNkO,SACAlE,aAGJ,CAACtQ,EAAMJ,MAGHyY,EAAWhb,QAAQ2C,EAAM0T,UAAUjU,KAAK0T,MAG9C/T,IAAMtC,WAAU,WACd,GAAKub,EAIL,OAFArY,EAAMJ,IAAI6X,GAAG,QAASW,GAEf,kBAAMpY,EAAMJ,IAAIyO,IAAI,QAAS+J,MACnC,CAACpY,EAAMJ,IAAKwY,EAAcC,IAE7B,IAAMtG,EAAgB3S,IAAMC,SAAQ,WAClC,MAAO,sBAAI8N,GAAJ,YAAenN,EAAMyT,gBAAerW,QAAO,SAACsN,GAAD,OAChDrN,QAAQ2C,EAAM2K,cAAcD,EAAM7K,UAEnC,CAACsN,EAAQnN,EAAMyT,cAAezT,EAAM2K,gBAEvC,GAAqCvL,IAAMC,SAAQ,WACjD,IAAMiV,EAAa,YAAItU,EAAM0T,UAAUjU,KAAKsL,UAAU5F,MACpD,SAACtG,EAAGmG,GAAJ,OAAUnG,EAAEqV,UAAYlP,EAAEkP,aAE5B,OAAO,2BAAKlU,EAAM0T,WAAlB,IAA6B9V,KAAMP,QAAQiX,EAAWvV,QAASuV,iBAC9D,CAACtU,EAAM0T,YALFY,GAAR,GAAQA,WAAeZ,GAAvB,mBAQMrG,GAAiBjO,IAAMC,SAAQ,WACnC,MAAO,sBAAI8N,GAAJ,YAAenN,EAAMyT,gBAAerW,QAAO,SAACsN,GACjD,OACG1K,EAAMwT,kBAAkBqE,SAASnN,EAAM7K,MACvCG,EAAMsN,aAAauK,SAASnN,QAGhC,CACDyC,EACAnN,EAAMyT,cACNzT,EAAMwT,kBACNxT,EAAMsN,eAIRlO,IAAMtC,WAAU,WACdkD,EAAMsN,aAAazK,SAAQ,SAAC6H,GAC1B,IAAMnE,EAAQzH,IAAIkW,EAAYtK,EAAM7K,GAAI,IACxC6K,EAAM4N,aAAa/R,EAAOvG,EAAMJ,IAAKjB,EAAQ+M,QAE9C,CAAC1L,EAAMJ,IAAKjB,EAAQqB,EAAMsN,aAAc0H,EAAYtJ,IAiBvD,IAAMxB,GAAM9K,IAAMgK,OAAO,MACvB+J,GAAOoF,qBAAWrO,IAEdsO,GAASpZ,IAAMC,SAAQ,WAC3B,OAAOW,EAAM8R,UAAUzP,QAAO,SAACxD,EAAG4V,GAChC,MAAyBzU,EAAMsN,aAAajL,QAAO,SAACxD,EAAG6R,GACrD,OAAOA,EAAE7Q,KAAO4U,EAAGzJ,QACf,CAAEyN,MAAO3Z,IAAI4R,EAAG,CAAC,SAAU+D,EAAGzC,WAAYtH,MAAOgG,GACjD7R,IACH,IAJK4Z,EAAR,EAAQA,MAAO/N,EAAf,EAAeA,MAQf,OAHI+N,GACF5Z,EAAE6E,KAAF,2BAAY+U,GAAZ,IAAmB3G,UAAW2C,EAAI/J,WAE7B7L,IACN,MACF,CAACmB,EAAMsN,aAActN,EAAM8R,YAExB4G,GAAgBtZ,IAAMC,SAAQ,WAClC,OAAO,2BAAKqM,GAAZ,IAAwB8C,kBACvB,CAAC9C,EAAY8C,IAEVyJ,GAAa7Y,IAAMC,SAAQ,WAC/B,OAAOW,EAAMsN,aAAajL,QAAO,SAACxD,EAAG6R,GACnC,IAAM1N,EAAUlE,IAAI4R,EAAG,aAAc,IAAI9Q,KAAI,SAAC0H,GAAD,MAAa,CACxDA,SACAoD,MAAOgG,MAET,MAAM,GAAN,mBAAW7R,GAAX,YAAiBmE,MAChB,MACF,CAAChD,EAAMsN,eAEV,OACE,sBAAKpD,IAAKA,GAAK1M,UAAU,4CAAzB,UACE,qBAAKqC,GAAIA,EAAG4F,QAASjI,UAAU,2BAE/B,eAAC,GAAD,uCACMuV,IACAmC,GAFN,IAGEvN,eACEsQ,GAAWlZ,OAAS,SAAWmW,EAAavN,eAE9CqG,UAAWhO,EAAMJ,IACjBmU,YAAa/T,EAAM+T,YACnBlF,gBAAiB7O,EAAM6O,gBACvBf,UAAW9N,EAAM8N,UACjBC,WAAY/N,EAAM+N,WAClBpD,cAAe3K,EAAM2K,cACrB0C,eAAgBA,GAChBC,aAActN,EAAMsN,aACpByE,cAAeA,EACfrG,WAAYgN,GAfd,UAiBE,qBAAKlb,UAAU,iBAAf,SACGya,GAAWrY,KAAI,WAAoBG,GAApB,IAAGuH,EAAH,EAAGA,OAAQoD,EAAX,EAAWA,MAAX,OACd,cAAC,GAAD,yBAEEA,MAAOA,GACHpD,GAHN,IAIEoE,WAAYgN,GACZ1K,UAAWhO,EAAMJ,IACjBmU,YAAa/T,EAAM+T,YACnBpJ,cAAe3K,EAAM2K,cACrB0C,eAAgBA,GAChBC,aAActN,EAAMsN,aACpByE,cAAeA,IAVjB,UACUrH,EAAM7K,GADhB,YACsBE,SAc1B,qBAAKvC,UAAU,oBAAf,SACGuU,EAAcnS,KAAI,SAAC8K,GAAD,OACjB,cAAC,GAAD,CAA6BA,MAAOA,GAAjBA,EAAM7K,aAK/B,cAAC,GAAD,CACEyN,aAActN,EAAMsN,aACpB3C,cAAe3K,EAAM2K,cACrBoH,cAAeA,EACf1E,eAAgBA,GAChB3B,WAAYgN,GACZ1K,UAAWhO,EAAMJ,IACjBmU,YAAa/T,EAAM+T,cAGrB,sBACEvW,UAAS,6GADX,UAMGgb,GAAO5Y,KAAI,gBAAGkS,EAAH,EAAGA,UAAcrS,EAAjB,yBACV,cAAC,GAAD,2BAEMA,GAFN,IAGEkZ,OAAQxF,GACRrB,UAAWA,EACXpG,WAAYgN,GACZ1K,UAAWhO,EAAMJ,IACjBmU,YAAa/T,EAAM+T,YACnBzG,aAActN,EAAMsN,aACpB3C,cAAe3K,EAAM2K,cACrBoH,cAAeA,EACf1E,eAAgBA,KAXlB,UACUyE,EAAU9G,QADpB,YAC+B8G,EAAUE,cAc1ChS,EAAM4T,iBAAiBhU,KACtB,gBAAG0U,EAAH,EAAGA,WAAkBzU,GAArB,EAAeJ,KAAf,EAAqBI,IAAO6T,EAA5B,yBACE,wBAAC,GAAD,uCACMA,GACAP,IAFN,IAGE/C,OAAQ6F,EACR5F,QAAS+E,EACTwD,IAAK/Y,EACLA,GAAIA,IAEHyU,EAAW1U,KAAI,WAA6BG,GAA7B,IAAGiU,EAAH,EAAGA,UAAWvU,EAAd,EAAcA,KAAMiL,EAApB,EAAoBA,MAApB,OACd,cAACsJ,EAAD,CAEEtJ,MAAOA,EACPjL,KAAMA,EACN6N,aAActN,EAAMsN,aACpB3C,cAAe3K,EAAM2K,cACrBoH,cAAeA,EACf1E,eAAgBA,GAChB3B,WAAYgN,GACZ1K,UAAWhO,EAAMJ,IACjBmU,YAAa/T,EAAM+T,YACnB8E,QAAQ,GAVHnO,EAAM7K,WAiBnBxC,QAAQ2C,EAAM0T,UAAUjU,KAAK0T,MAC7B,cAAC,GAAD,uCAAwBO,IAAeP,IAAvC,IAA6C9C,QAAS+E,EAAtD,SACGd,GAAW1U,KAAI,WAA6BG,GAA7B,IAAGiU,EAAH,EAAGA,UAAWvU,EAAd,EAAcA,KAAMiL,EAApB,EAAoBA,MAApB,OACd,cAACsJ,EAAD,CAEEtJ,MAAOA,EACPjL,KAAMA,EACN6N,aAActN,EAAMsN,aACpB3C,cAAe3K,EAAM2K,cACrBoH,cAAeA,EACf1E,eAAgBA,GAChB3B,WAAYgN,GACZ1K,UAAWhO,EAAMJ,IACjBmU,YAAa/T,EAAM+T,YACnB8E,QAAQ,GAVHnO,EAAM7K,UAJoB,YC71BhCiZ,GAxCU,SAAC,GAAqB,IAAnBrZ,EAAkB,EAAlBA,KACpBsI,GADsC,EAAZ2C,MAClBZ,sBAERiP,EAAStZ,EAAK4C,QAAO,SAACxD,EAAG6R,EAAG3Q,GAMhC,OALW,IAANA,GAA0B,IAAb2Q,EAAE3R,QAClBF,EAAE6E,KAAK,IAGT7E,EADWA,EAAEE,OAAS,GAChB2E,KAAKgN,GACJ7R,IACN,IAEH,OACE,qBAAKrB,UAAS,kBACTuK,EAAMI,OADG,2DAAd,SAGI4Q,EAAOnZ,KAAI,SAACoZ,EAAMC,GAAP,OACT,qBAAezb,UAAS,gCAA6BuK,EAAMkD,IAA3D,SACI+N,EAAKpZ,KAAI,SAACsZ,EAAKnZ,GAAN,OACP,qBAAevC,UAAU,OAAzB,SACI0b,EAAItZ,KAAI,SAACS,EAAG8Y,GAAJ,OACN,qBACE3b,UAAS,sCACG,IAAP2b,EAAW,mBAAqB,SAD5B,uCAEJD,EAAIna,OAAS,GAAY,IAAPoa,EAAW,OAAS,GAFlC,uCAGW,IAAfD,EAAIna,QAAuB,IAAPoa,EAApB,6BAAsDpZ,EAAI,EAAI,OAAS,IAAQ,GAH3E,8BADX,SAMIM,GANO8Y,OAFNpZ,OAFNkZ,SCbjBpZ,IAAM,EACJuZ,GAAa,uCAAsBvZ,KAEnCwZ,GAAkB,kBAAM,MAExBC,GAAiB,CACrBnB,WAAW,EACXxM,WAAW,EACXb,QAAS,GACTyO,OAAQ,GACRtB,WAAY,GACZhW,QAAS,GACTkL,OAAQ,GACRJ,WAAW,EACXhB,QAAS,CAAC,qBACVV,OAAQ,KACRwF,UAAW,GACX7Q,MAAO,GACPgO,UAAW,KACXwL,SAAS,EACT1T,SAAS,EACT2T,aAAa,GAGTC,G,WACJ,aAA2B,IAAflM,EAAc,uDAAJ,GAAI,oBAExB,IAAM7J,EAAO,2BAAQ2V,IAAmB9L,GACxC,IAAK,IAAMoL,KAAOjV,EAChBgW,KAAKf,GAAOjV,EAAQiV,GAGtBe,KAAK9Z,GAAKuZ,KAEVO,KAAKC,gBAAkB,GAEvBD,KAAKE,YAAcF,KAAKxB,UAExBwB,KAAKG,UAAY,GACjBH,KAAKI,gBAAkB,IAAIpG,IAE3BgG,KAAK7B,eAAiB,aAEtB6B,KAAKK,YAAcL,KAAKK,YAAYhC,KAAK2B,M,yCAE3C,SAAM3L,EAAWrP,GAGf,OAFAgb,KAAK3L,UAAYA,EACjB2L,KAAKhb,OAASA,EACPgb,KAAKM,KAAKjM,EAAWrP,K,kBAE9B,SAAKqP,EAAWrP,GACd,OAAO6W,QAAQC,Y,yBAQjB,SAAYf,GAERiF,KAAK3Z,MADiB,oBAAb0U,EACIA,EAASiF,KAAK3Z,OAG3B,2BAAkB2Z,KAAK3Z,OAAU0U,GAEnCiF,KAAK7B,eAAe6B,KAAMA,KAAK3Z,S,oBAGjC,SAAOgO,EAAWrP,EAAQwW,GAAc,IAAD,OAiCrC,OAhCAwE,KAAK1X,QAAQY,SAAQ,YAAqB,IAAlBhD,EAAiB,EAAjBA,GAAIqa,EAAa,EAAbA,OACtBlM,IAAcA,EAAUmM,UAAUta,IACpCmO,EAAUoM,UAAUva,EAAIqa,MAG5BP,KAAKxM,OAAOtK,SAAQ,SAAA6H,GACdsD,IAAcA,EAAUqM,SAAS3P,EAAM7K,MACrC6K,EAAM4P,SAAWtM,EAAUqM,SAAS3P,EAAM4P,SAC5CtM,EAAUJ,SAASlD,EAAOA,EAAM4P,SAGhCtM,EAAUJ,SAASlD,GAEhB,EAAKqC,WACR,EAAKwN,mBAAmBvM,EAAWtD,EAAM7K,IAE3C,EAAK+Z,gBAAgBlP,EAAM7K,IAAMmO,EAAUwM,kBAAkB9P,EAAM7K,GAAI,kBAGvE8Z,KAAKH,SACPG,KAAKc,SAASzM,EAAWmH,GAEvBwE,KAAK7T,SACP6T,KAAKe,SAAS1M,GAEZ2L,KAAKF,cACPE,KAAK3Z,MAAL,2BACK2Z,KAAK3Z,OADV,IAEE2a,UAAW,KAEbhB,KAAKiB,aAAa5M,IAEb2L,KAAKkB,MAAM7M,EAAWrP,K,mBAE/B,SAAMqP,EAAWrP,GACf,OAAO6W,QAAQC,Y,sBAGjB,SAASzH,GAAY,IAAD,OAClB,SAAS8I,EAAM9L,EAAf,GAAsD,IAA5B8P,EAA2B,EAA3BA,MAAOC,EAAoB,EAApBA,SAAUzK,EAAU,EAAVA,OACzCqJ,KAAK7T,QAAQkV,SAASC,KAAKtB,KAAM3O,EAAS+P,EAAUzK,EAAQwK,GAG9DnB,KAAK7T,QAAQqH,OAAOtK,SAAQ,SAAAmI,GAC1B,GAAgB,cAAZA,EAAyB,CAC3B,IAAMgQ,EAAWlE,EAAMkB,KAAK,EAAMhN,GAClC,EAAK8O,UAAUpW,KAAK,CAClB4D,OAAQ,QACR0T,aAEFhN,EAAUyJ,GAAG,QAASuD,OAEnB,CACH,IAAMA,EAAWlE,EAAMkB,KAAK,EAAMhN,GAClC,EAAK8O,UAAUpW,KAAK,CAClB4D,OAAQ,QACR0T,WACAhQ,YAEFgD,EAAUyJ,GAAG,QAASzM,EAASgQ,S,wBAKrC,SAAWhN,EAAWhD,GACf2O,KAAKI,gBAAgBmB,IAAIlQ,KAE9B2O,KAAKI,gBAAgBjb,IAAIkM,GAASnI,SAAQ,SAAAtC,GACxCyN,EAAUmN,gBAAgB5a,EAAO,CAAE6a,OAAO,OAE5CzB,KAAKI,gBAAgB3F,OAAOpJ,M,sBAG9B,SAASgD,EAAWmH,GAAc,IAAD,OAEzB6F,EAAWlc,IAAI6a,KAAM,CAAC,UAAW,YAAaN,IAAiBrB,KAAK2B,MACxE3F,EAAYlV,IAAI6a,KAAM,CAAC,UAAW,aAAcb,IAChDuC,EAAWvc,IAAI6a,KAAM,CAAC,UAAW,YAAa,MAC9C2B,EAAaxc,IAAI6a,KAAM,CAAC,UAAW,cAAe,MAClD1F,EAAWnV,IAAI6a,KAAM,CAAC,UAAW,aAAa,GAC9CzF,EAAYpV,IAAI6a,KAAM,CAAC,UAAW,aAAc4B,KAE5CC,EAAY,SAACxQ,EAAD,GAA2C,IAA/B8P,EAA8B,EAA9BA,MAAOC,EAAuB,EAAvBA,SAAUzK,EAAa,EAAbA,OAEvCyJ,EAAkB,EAAKA,gBAAgBjb,IAAIkM,IAAY,IAAI2I,IACjE,EAAKoG,gBAAgB5F,IAAInJ,EAAS,IAAI2I,KAEtC,IAgBM8H,EAAc,IAAI9H,IAExB,GAAI0H,EAAU,CACZ,IAAMK,EAAaX,EAAS1Y,QAAO,SAACxD,EAAG6R,GACrC,IAAMiL,EAAO7c,IAAI4R,EAAG,CAAC,aAAc2K,GAAW,MAI9C,OAHIM,IACF9c,EAAE8c,IAAQ,GAEL9c,IACN,IACHmP,EAAU4N,sBAAsB,CAC5BzO,OAAQ,CAACnC,GACT5N,OAAQ,CAAC,KAAM,CAAC,MAAOie,GAAW,CAAC,UAAW3b,OAAOC,KAAK+b,OAE3D7Y,SAAQ,SAAAgZ,GACPJ,EAAYtH,IAAI0H,EAAQhc,GAAIgc,MAGlC,GAAIP,EAAY,CACd,IAAMle,EAASke,EAAWL,KAAK,EAAMjQ,EAAS+P,EAAUzK,EAAQwK,GAC5DgB,mBAAS1e,IACX4Q,EAAU4N,sBAAsB,CAAEzO,OAAQ,CAACnC,GAAU5N,WAClDyF,SAAQ,SAAAgZ,GACPJ,EAAYtH,IAAI0H,EAAQhc,GAAIgc,MAIpCd,EAASlY,SAAQ,SAAAgZ,GACfJ,EAAYtH,IAAI0H,EAAQhc,GAAIgc,MA5CR,SAAAd,GACpBA,EAASlY,SAAQ,YAAkC,IAA/BhD,EAA8B,EAA9BA,GAAIqa,EAA0B,EAA1BA,OAAQ6B,EAAkB,EAAlBA,YAC9B,QAAYC,IAAPnc,GAA6B,OAAPA,EAE3B,GAAIka,EAAgBmB,IAAIrb,GACtB,EAAKka,gBAAgBjb,IAAIkM,GAASmJ,IAAItU,EAAIka,EAAgBjb,IAAIe,IAC9Dka,EAAgB3F,OAAOvU,OAEpB,CACH,IAAMU,EAAQ,CAAEV,KAAIqa,SAAQ6B,eAC5B,EAAKhC,gBAAgBjb,IAAIkM,GAASmJ,IAAItU,EAAIU,GAC1CyN,EAAUmN,gBAAgB5a,EAAO,CAAE6a,OAAO,QAoChDa,CAAc,YAAIR,EAAY1Q,WAE9BgP,EAAgBlX,SAAQ,SAAAtC,GACtByN,EAAUmN,gBAAgB5a,EAAO,CAAE6a,OAAO,OAG5C,IAAM3b,EAAOub,EAAShQ,EAAS+P,EAAUzK,EAAQwK,GAE7CgB,mBAASrc,IACX0V,EAAY,CACVzF,IAAK,CAACoL,EAAMnL,EAAGmL,EAAMlL,GACrBtJ,KAAM,mBACN0N,YACAtJ,MAAO,EACPuJ,WACAC,YACA5D,SACA7Q,UAKAyc,EAAa,SAAClR,EAASxH,GAC3B,EAAK2Y,WAAWnO,EAAWhD,GAC3BmK,EAAY,CACV7O,KAAM,oBACNoE,MAAO,KAIXiP,KAAKH,QAAQrM,OAAOtK,SAAQ,SAAAmI,GAC1B,IAAIgQ,EAAWQ,EAAUxD,KAAK,EAAMhN,GACpC,EAAK8O,UAAUpW,KAAK,CAClB4D,OAAQ,YACR0T,WACAhQ,YAEFgD,EAAUyJ,GAAG,YAAazM,EAASgQ,GAEnCA,EAAWkB,EAAWlE,KAAK,EAAMhN,GACjC,EAAK8O,UAAUpW,KAAK,CAClB4D,OAAQ,aACR0T,WACAhQ,YAEFgD,EAAUyJ,GAAG,aAAczM,EAASgQ,KACnCrB,Q,0BAGL,SAAa3L,GAAY,IACnBoO,EAAO3W,EAAS4L,EADE,OAGhBgL,EAAkBrO,EAAUsO,qBAE5BC,EAAS,SAAA/Y,GACb,IAAM+I,EAAO8P,EAAgB3S,wBAC7B,OAAO,IAAI4J,IAASkJ,MAClBhZ,EAAEiZ,QAAUlQ,EAAK/B,KAAO6R,EAAgBK,WACxClZ,EAAEmZ,QAAUpQ,EAAKtF,IAAMoV,EAAgBO,YAIrCpB,EAAY,SAAAhY,GAKhB,GAJAA,EAAEqZ,iBAEFpX,EAAU8W,EAAO/Y,IAEZ6N,EAAK,CACR,IAAM7T,EAAYsB,IAAI,EAAM,CAAC,cAAe,aAAc,iDAC1DuS,EAAMqF,SAASC,cAAc,QACzBnZ,UAAY,iCAAmCA,EACnD6e,EAAgBS,YAAYzL,GAG9B,IAAI0L,EAAOjM,KAAKkM,IAAIZ,EAAMzM,EAAGlK,EAAQkK,GACnCsN,EAAOnM,KAAKC,IAAIqL,EAAMzM,EAAGlK,EAAQkK,GACjCuN,EAAOpM,KAAKkM,IAAIZ,EAAMxM,EAAGnK,EAAQmK,GACjCuN,EAAOrM,KAAKC,IAAIqL,EAAMxM,EAAGnK,EAAQmK,GAEjCyB,EAAIxQ,MAAMuH,UAAV,qBAAqC2U,EAArC,eAAkDG,EAAlD,OACA7L,EAAIxQ,MAAM2H,MAAV,UAAsByU,EAAOF,EAA7B,MACA1L,EAAIxQ,MAAMC,OAAV,UAAuBqc,EAAOD,EAA9B,OAEEE,EAAU,SAAA5Z,GACd6Z,EAAO,CAACjB,EAAOG,EAAO/Y,MAElB8Z,EAAQ,SAAA9Z,GACO,KAAdA,EAAE+Z,SAAgC,KAAZ/Z,EAAEga,OAA6B,WAAXha,EAAEia,MAC/CJ,KAIEA,EAAS,SAAAK,GAYb,GAXAhH,SAASiH,oBAAoB,YAAanC,GAC1C9E,SAASiH,oBAAoB,UAAWP,GACxC1G,SAASiH,oBAAoB,UAAWL,GAExCtP,EAAU4P,QAAQC,SAEdxM,IACFA,EAAIyM,WAAWC,YAAY1M,GAC3BA,EAAM,MAGJqM,EAAM,CACR,IAKMM,EALkBhQ,EAAU4N,sBAAsB8B,EAAM,CAC5DvQ,OAAQrO,IAAI,EAAM,CAAC,cAAe,WAClC1B,OAAQ0B,IAAI,EAAM,CAAC,cAAe,aAGDuD,QAAO,SAACxD,EAAG6R,GAE5C,OADA7R,EAAE6R,EAAE7Q,IAAM6Q,EACH7R,IACN,IAEGkc,EAAWrb,OAAOqL,OAAOiT,GAEzBjT,EAAS,GAEfgQ,EAASlY,SAAQ,SAAAgZ,GACf9Q,EAAOrH,KAAK,CACV7D,GAAIgc,EAAQhc,GACZqa,OAAQ2B,EAAQ3B,OAChB6B,YAAaF,EAAQE,iBAIzBjd,IAAI,EAAM,CAAC,cAAe,kBAAmB,IAC1C+D,SAAQ,SAAAtC,GACPyN,EAAUmN,gBAAgB5a,EAAO,CAAE0d,QAAQ,OAG/C,EAAKxE,YAAYyE,eAAiBnT,EAElCA,EAAOlI,SAAQ,SAAAtC,GACbyN,EAAUmN,gBAAgB5a,EAAO,CAAE0d,QAAQ,OAG7C,EAAKjE,YAAY,CAAEW,UAAWI,MAgBlCpB,KAAKG,UAAUpW,KAAK,CAClB4D,OAAQ,YACR0T,SAAUQ,EACV2C,QAAS9B,IAEXA,EAAgB+B,iBAAiB,aAjBf,SAAA5a,GACVA,EAAE6a,UAAyB,IAAb7a,EAAE8a,SAEtB5H,SAAS0H,iBAAiB,YAAa5C,GACvC9E,SAAS0H,iBAAiB,UAAWhB,GACrC1G,SAAS0H,iBAAiB,UAAWd,GAErCtP,EAAU4P,QAAQW,UAElBnC,EAAQG,EAAO/Y,OAQwC,GAEzDwK,EAAUwQ,QAAQD,UAElB5E,KAAKF,YAAYyE,eAAiB,K,uBAGpC,SAAUlQ,GACR,KAAO2L,KAAKG,UAAU/a,QAAQ,CAC5B,MAA+C4a,KAAKG,UAAU1W,MAAtDkE,EAAR,EAAQA,OAAQ0D,EAAhB,EAAgBA,QAASgQ,EAAzB,EAAyBA,SAAUmD,EAAnC,EAAmCA,QAC/BA,EACFA,EAAQR,oBAAoBrW,EAAQ0T,GAE7BhQ,EACPgD,EAAUK,IAAI/G,EAAQ0D,EAASgQ,GAG/BhN,EAAUK,IAAI/G,EAAQ0T,GAG1BrB,KAAKxM,OAAOtK,SAAQ,YAAa,IAAVhD,EAAS,EAATA,GACrBmO,EAAUnC,YAAYhM,MAExB8Z,KAAK8E,SAASzQ,K,sBAEhB,SAASA,M,uBAIT,SAAUrP,GACR,OAAO6W,QAAQC,Y,oBAEjB,SAAOzH,EAAWrP,M,0BAIlB,SAAa4H,EAAOyH,EAAWrP,EAAQ+M,M,8BAIvC,SAAiBsC,GAAY,IAAD,OAC1B2L,KAAK5M,WAAa4M,KAAK5M,UACvB4M,KAAKxM,OAAOtK,SAAQ,YAAa,IAAVhD,EAAS,EAATA,GACjB,EAAKkN,UACP,EAAK2R,sBAAsB1Q,EAAWnO,GAGtC,EAAK0a,mBAAmBvM,EAAWnO,Q,mCAIzC,SAAsBmO,EAAWhD,GACO,SAAlC2O,KAAKC,gBAAgB5O,IACvBgD,EAAU2Q,kBAAkB3T,EAAS,aAAc,a,gCAGvD,SAAmBgD,EAAWhD,GAET,SADAgD,EAAUwM,kBAAkBxP,EAAS,cAEtD2O,KAAKC,gBAAgB5O,GAAW,OAGhCgD,EAAU2Q,kBAAkB3T,EAAS,aAAc,U,gCAGvD,SAAmBgD,EAAWtD,EAAOkU,GACnC,IAAM7R,EAAY4M,KAAK5M,WAA6B,YAAf6R,EACrCjF,KAAKC,gBAAgBlP,EAAM7K,IAAM+e,EAEjCA,EAAa7R,EAAY,UAAY,OACrCiB,EAAU2Q,kBAAkBjU,EAAM7K,GAAI,aAAc+e,K,4BAGtD,SAAetJ,EAAYuJ,EAAUtJ,M,8BAIrC,SAAiBvH,EAAWrP,EAAQwW,GAAc,IAAD,OAC/CwE,KAAK5D,OAAO/H,EAAWrP,EAAQwW,GAC5BQ,MAAK,kBAAM,EAAKC,OAAO5H,EAAWrP,U,eClc5BmgB,GAAO,yB,oBCAdzZ,GAAQ,IAAIsO,IAiBHoL,GAhBC,SAAAtb,GACZ,OAAI4B,GAAM6V,IAAIzX,GACH+R,QAAQC,QAAQpQ,GAAMvG,IAAI2E,IAE9Bub,MAAMvb,GACRkS,MAAK,SAAAsJ,GACF,IAAKA,EAAIC,GACL,MAAM,IAAIC,MAAM,iBAEpB,OAAOF,EAAIG,UAEdzJ,MAAK,SAAAyJ,GAEF,OADA/Z,GAAM8O,IAAI1Q,EAAK2b,GACRA,MCTfC,GAAQC,EAAQ,KAEdC,G,kDACF,WAAYhZ,GAAQ,IAAD,8BACf,cAAMA,IAKV4R,YAAc,EAAK/W,OANA,EAOnBnB,KAAO,wBAPY,EAQnB6K,QAAU,CACN0U,QAAS,CACLvf,KAAM,UACNqG,KAAM,WACNmZ,OAAQ,CACJ,CAAClf,MAAM,MAAON,KAAK,mCACnB,CAACM,MAAM,KAAMN,KAAK,mCAClB,CAACM,MAAM,MAAMN,KAAK,oCAEtBM,MAAO,EAAKa,QAAU,MACtBsM,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtB4K,OAAM,GAEVwU,OAAQ,CACJ1f,KAAM,SACNqG,KAAK,WACLmZ,OAAQG,GACRrf,MAAO,aACPmN,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtB4K,OAAM,GAEV0U,aAAc,CACV5f,KAAM,eACNqG,KAAM,WACNmZ,OAAQ,CACJ,CAACxf,KAAK,aAAaM,MAAM,cACzB,CAACN,KAAM,QAASM,MAAO,KACvB,CAACN,KAAM,UAAWM,MAAO,KACzB,CAACN,KAAM,QAASM,MAAO,KACvB,CAACN,KAAM,UAAWM,MAAO,KACzB,CAACN,KAAM,OAAQM,MAAO,KACtB,CAACN,KAAM,QAASM,MAAO,KACvB,CAACN,KAAM,aAAcM,MAAO,KAC5B,CAACN,KAAM,OAAQM,MAAO,KACtB,CAACN,KAAM,MAAOM,MAAO,MACrB,CAACN,KAAM,MAAOM,MAAO,KACrB,CAACN,KAAM,UAAWM,MAAO,OAE7BA,MAAO,aACPmN,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtB4K,OAAO,GAEX2U,SAAU,CACN7f,KAAM,WACNqG,KAAK,WACLmZ,OAAQM,GACRxf,MAAO,aACPmN,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtB4K,OAAM,GAEV6U,OAAO,CACH/f,KAAK,SACLqG,KAAK,WACLmZ,OAAO,CAAC,cACRlf,MAAM,eAlEK,EAsEnB8K,OAAS,CACL/E,KAAM,UACNmZ,OAAQ,GACRvT,MAAO,GACPpL,OAAQ,EACR0H,MAAO,IACPyX,UAAW,WACXriB,MAAK,EACL8T,MAAM,IA9ES,EAgFnB8H,QAAU,CACNrM,OAAQ,CAAC,YAAa,cAAe,WAAY,iBAAkB,UAAW,oBAAqB,YAAa,4BAA6B,eAAgB,iBAAiB,kBAC9K6N,SAAU,SAAChQ,EAAS+P,EAAUzK,GAE1B,IAAMuL,EAAUd,EAAS1Y,QAAO,SAACxD,EAAG6R,GAWhC,OAVI,EAAKjR,KAAKA,KAAK4C,QAAO,SAAC6d,EAAKC,GAQ5B,OAPIA,EAAI,SAAezP,EAAC,WAAD,QAChByP,EAAI,QAAczP,EAAC,WAAD,cAClByP,EAAI,UAAgBzP,EAAC,WAAD,SACpByP,EAAI,cAAoBzP,EAAC,WAAD,cAE3BwP,EAAMC,GAEHD,OAGZ,IAGH,MAAO,CACH,CAAC,UAAWrE,EAAO,QACnB,CAAC,UAAUA,EAAO,QAClB,CAAC,OAAOA,EAAO,KACf,CAAC,WAAYA,EAAO,SACpB,CAAC,gBAAiBA,EAAO,OACzB,CAAC,QAASA,EAAO,gBACjB,CAAC,eAAgBA,EAAO,YAAgBxY,kBA1GjC,EAgHnBpB,QAAU,CACN,CACIpC,GAAI,cACJqa,OAAQ,CACJ5T,KAAM,UACN7G,KAAM,CACF6G,KAAM,oBACNyU,SAAU,MAItB,CACIlb,GAAI,YACJqa,OAAQ,CACJ5T,KAAM,UACN7G,KAAM,CACF6G,KAAM,oBACNyU,SAAU,OA/HtB,EAAK3Z,OAASmF,EAAMnF,OAFL,E,wCAuInB,SAAKxB,GAAK,IAAD,OACC6D,EAAG,UAAMqb,GAAN,kBAAoBnF,KAAK7O,QAAQ0U,QAAQjf,MAAzC,iBAGH6f,EAAM,iCAA2D,eAA9BzG,KAAK7O,QAAQ6U,OAAOpf,MAAwB,GAAGoZ,KAAK7O,QAAQ6U,OAAOpf,MAAhG,kBAAmJ,eAApCoZ,KAAK7O,QAAQ+U,aAAatf,MAAwB,GAAGoZ,KAAK7O,QAAQ+U,aAAatf,MAA9L,gBAA2O,eAAhCoZ,KAAK7O,QAAQgV,SAASvf,MAAwB,GAAGoZ,KAAK7O,QAAQgV,SAASvf,MAAlR,oBAAiU,eAA9BoZ,KAAK7O,QAAQkV,OAAOzf,MAAwB,GAAGoZ,KAAK7O,QAAQkV,OAAOzf,MAAtW,uBAFO,GAEP,uBADO,GACP,kBACZ,OAAOwe,GAAQtb,EAAM2c,GAChBzK,MAAK,SAAA1Q,GACF,EAAKxF,KAAOwF,EACZ,EAAKoG,OAAOoU,OAAS,EAAKhgB,KAAK4gB,YAAY,GAAGC,aAAa1gB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SACtE,EAAK8K,OAAOa,MAAQ,EAAKzM,KAAK4gB,YAAY,GAAGC,aAAa1gB,KAAI,SAAAS,GAAC,OAAIA,EAAEmP,SACrE,EAAKnE,OAAOqG,MAAZ,UAAuB,EAAK5G,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,qCAMwC,eAA9B,EAAKiM,QAAQ6U,OAAOpf,MAAwB,MAAM,EAAKuK,QAAQ6U,OAAOpf,MANhF,4CAOgB,EAAKuK,QAAQ+U,aAAaJ,OAAOpd,QAAO,SAACxD,EAAE6R,GAIvD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ+U,aAAatf,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAZF,wCAaY,EAAKiM,QAAQgV,SAASL,OAAOpd,QAAO,SAACxD,EAAE6R,GAI/C,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQgV,SAASvf,QACjC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAlBF,qCAmBuC,eAA9B,EAAKiM,QAAQkV,OAAOzf,MAAwB,MAAM,GAnB3D,2B,uBAuBZ,WAAa,IAAD,OACFkD,EAAG,UAAMqb,GAAN,kBAAoBnF,KAAK7O,QAAQ0U,QAAQjf,MAAzC,iBAGH6f,EAAM,iCAA2D,eAA9BzG,KAAK7O,QAAQ6U,OAAOpf,MAAwB,GAAGoZ,KAAK7O,QAAQ6U,OAAOpf,MAAhG,kBAAmJ,eAApCoZ,KAAK7O,QAAQ+U,aAAatf,MAAwB,GAAGoZ,KAAK7O,QAAQ+U,aAAatf,MAA9L,gBAA2O,eAAhCoZ,KAAK7O,QAAQgV,SAASvf,MAAwB,GAAGoZ,KAAK7O,QAAQgV,SAASvf,MAAlR,oBAAiU,eAA9BoZ,KAAK7O,QAAQkV,OAAOzf,MAAwB,GAAGoZ,KAAK7O,QAAQkV,OAAOzf,MAAtW,uBAFO,GAEP,uBADO,GACP,kBAEZ,OAAOwe,GAAQtb,EAAM2c,GAChBzK,MAAK,SAAA1Q,GACF,EAAKxF,KAAOwF,EACZ,EAAKoG,OAAOoU,OAAS,EAAKhgB,KAAK4gB,YAAY,GAAGC,aAAa1gB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SACtE,EAAK8K,OAAOa,MAAQ,EAAKzM,KAAK4gB,YAAY,GAAGC,aAAa1gB,KAAI,SAAAS,GAAC,OAAIA,EAAEmP,SACrE,EAAKnE,OAAOqG,MAAZ,UAAuB,EAAK5G,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,qCAMwC,eAA9B,EAAKiM,QAAQ6U,OAAOpf,MAAwB,MAAM,EAAKuK,QAAQ6U,OAAOpf,MANhF,4CAOgB,EAAKuK,QAAQ+U,aAAaJ,OAAOpd,QAAO,SAACxD,EAAE6R,GAIvD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ+U,aAAatf,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAZF,wCAaY,EAAKiM,QAAQgV,SAASL,OAAOpd,QAAO,SAACxD,EAAE6R,GAI/C,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQgV,SAASvf,QACjC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAlBF,qCAmBuC,eAA9B,EAAKiM,QAAQkV,OAAOzf,MAAwB,MAAM,GAnB3D,2B,4BAuBZ,SAAe+U,EAAW/U,EAAMggB,GAAU,IAAD,OAErC,OAAQjL,GACJ,IAAK,UACDqE,KAAKtO,OAAOqG,MAAZ,UAAuBiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHGA,EAAEnQ,QAAUA,IACX1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,qCAMwC,eAA9B8a,KAAK7O,QAAQ6U,OAAOpf,MAAwB,MAAMoZ,KAAK7O,QAAQ6U,OAAOpf,MANhF,4CAOgBoZ,KAAK7O,QAAQ+U,aAAaJ,OAAOpd,QAAO,SAACxD,EAAE6R,GAIvD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ+U,aAAatf,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAZF,wCAaY8a,KAAK7O,QAAQgV,SAASL,OAAOpd,QAAO,SAACxD,EAAE6R,GAI/C,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQgV,SAASvf,QACjC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAlBF,qCAmBuC,eAA9B8a,KAAK7O,QAAQkV,OAAOzf,MAAwB,MAAM,GAnB3D,sBAqBA,MAEJ,IAAK,SACDoZ,KAAKtO,OAAOqG,MAAZ,UAAuBiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,qCAMoB,eAAV0B,EAAwB,MAAMA,EANxC,4CAOgBoZ,KAAK7O,QAAQ+U,aAAaJ,OAAOpd,QAAO,SAACxD,EAAE6R,GAIvD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ+U,aAAatf,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAZF,wCAaY8a,KAAK7O,QAAQgV,SAASL,OAAOpd,QAAO,SAACxD,EAAE6R,GAI/C,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQgV,SAASvf,QACjC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAlBF,qCAmBuC,eAA9B8a,KAAK7O,QAAQkV,OAAOzf,MAAwB,MAAM,GAnB3D,sBAqBA,MAEJ,IAAK,eACDoZ,KAAKtO,OAAOqG,MAAZ,UAAuBiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,qCAMwC,eAA9B8a,KAAK7O,QAAQ6U,OAAOpf,MAAwB,MAAMoZ,KAAK7O,QAAQ6U,OAAOpf,MANhF,4CAOgBoZ,KAAK7O,QAAQ+U,aAAaJ,OAAOpd,QAAO,SAACxD,EAAE6R,GAIvD,OAHGA,EAAEnQ,QAAUA,IACX1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAZF,wCAaY8a,KAAK7O,QAAQgV,SAASL,OAAOpd,QAAO,SAACxD,EAAE6R,GAI/C,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQgV,SAASvf,QACjC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAlBF,qCAmBuC,eAA9B8a,KAAK7O,QAAQkV,OAAOzf,MAAwB,MAAM,GAnB3D,sBAqBA,MAEJ,IAAK,WACDoZ,KAAKtO,OAAOqG,MAAZ,UAAuBiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,qCAMwC,eAA9B8a,KAAK7O,QAAQ6U,OAAOpf,MAAwB,MAAMoZ,KAAK7O,QAAQ6U,OAAOpf,MANhF,4CAOgBoZ,KAAK7O,QAAQ+U,aAAaJ,OAAOpd,QAAO,SAACxD,EAAE6R,GAIvD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ+U,aAAatf,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAZF,wCAaY8a,KAAK7O,QAAQgV,SAASL,OAAOpd,QAAO,SAACxD,EAAE6R,GAI/C,OAHGA,EAAEnQ,QAAUA,IACX1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAlBF,qCAmBuC,eAA9B8a,KAAK7O,QAAQkV,OAAOzf,MAAwB,MAAM,GAnB3D,sBAqBA,MAEJ,IAAK,SACDoZ,KAAKtO,OAAOqG,MAAZ,UAAuBiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,qCAMwC,eAA9B8a,KAAK7O,QAAQ6U,OAAOpf,MAAwB,MAAMoZ,KAAK7O,QAAQ6U,OAAOpf,MANhF,4CAOgBoZ,KAAK7O,QAAQ+U,aAAaJ,OAAOpd,QAAO,SAACxD,EAAE6R,GAIvD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ+U,aAAatf,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAZF,wCAaY8a,KAAK7O,QAAQgV,SAASL,OAAOpd,QAAO,SAACxD,EAAE6R,GAI/C,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQgV,SAASvf,QACjC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAlBF,qCAmBmB,eAAV0B,EAAwB,MAAM,GAnBvC,yB,sBA6BZ,SAASyN,GAELA,EAAUnC,YAAY,YACtBmC,EAAUnC,YAAY,kBACtBmC,EAAUnC,YAAY,WACtBmC,EAAUnC,YAAY,qBACtBmC,EAAUnC,YAAY,aACtBmC,EAAUnC,YAAY,6BACtBmC,EAAUnC,YAAY,gBACtBmC,EAAUnC,YAAY,kBACtBmC,EAAUnC,YAAY,kBACtBmC,EAAUnC,YAAY,aACtBmC,EAAUwS,aAAa,eACvBxS,EAAUwS,aAAa,e,oBAE3B,SAAO5gB,GACH,IAAI6gB,EAAU,CACVna,KAAM,oBACNyU,SAAU,IAGR2F,EAAc,CAChB,KAAQ,OACR,QAAW,aACX,IAAO,MACP,KAAQ,gBACR,MAAS,QACT,QAAW,wBACX,WAAc,WACd,MAAS,aACT,QAAU,cAGVhU,EAASiN,KAAKla,KAAK4gB,YAAY,GAAGC,aAAaje,QAAQ,SAACC,EAAI6d,GAE5D,OADA7d,EAAI6d,EAAK5f,OAAS4f,EAAK3Q,MAChBlN,IACR,IAEFme,EAAQ1F,SAAWpB,KAAKla,KAAKA,KAAKG,KAAI,SAACS,EAAEN,GACtC,MAAO,CACH,KAAQ,UACRF,GAAIE,EACJ,WAAc,CACV4gB,OAAQtgB,EAAEsgB,OACVzgB,YAAaG,EAAEH,YACf0gB,eAAiBvgB,EAAEwgB,KACnBC,IAAKzgB,EAAEygB,IACPjB,aAAcxf,EAAE0gB,MAChBvR,MAAO9C,EAAOrM,EAAE0gB,OAChBC,QAAS3gB,EAAE2gB,QACXrB,OAAQtf,EAAEsf,OACVpa,KAAMmb,EAAYrgB,EAAC,QAEvB,SAAYgf,GAAMhf,EAAC,eAI3B,IAAM4gB,EACF,CACI3a,KAAM,oBACNyU,SAAU0F,EAAQ1F,SAAS3d,QAAO,SAAAiD,GAC9B,SAAIA,EAAC,UAAuC,UAAvBA,EAAC,SAAaiG,OACxBjG,MAMjB6gB,EAAe,CACjB5a,KAAM,oBACNyU,SAAU0F,EAAQ1F,SAAS3d,QAAO,SAAAiD,GAC9B,SAAIA,EAAC,UAAuC,oBAAvBA,EAAC,SAAaiG,OACxBjG,MAMfT,EAAIua,UAAU,gBACdva,EAAIua,UAAU,eAAegH,QAAQF,GAGtCrhB,EAAIua,UAAU,cACbva,EAAIua,UAAU,aAAagH,QAAQD,GAGnCthB,EAAIya,SAAS,cACbza,EAAIgO,SAAS,CACT,GAAM,YACN,KAAQ,OACRsM,OAAQ,YACRkH,MAAO,CACH,aAAc,EACd,aAAc,CACV9a,KAAK,WACL+U,SAAS,YAOzBoF,EAAQ1F,SAASlY,SAAQ,SAAAgZ,GACrB,GAAIA,EAAQH,WAAWnW,KAAM,CACzB,IAAI8b,EAASxF,EAAQH,WAAWnW,KAC5B+b,EAAU,OAASD,EAClBzhB,EAAIya,SAASiH,IACd1hB,EAAIgO,SAAS,CACT,GAAM0T,EACN,KAAQ,SACR,OAAU,cACV,OAAU,CACN,aAAcD,EACd,sBAAsB,GAE1B,OAAU,CAAC,KAAM,OAAQA,a,GA/btB3H,I,oECSrB6H,G,kDACF,WAAYhb,GAAQ,IAAD,8BACf,cAAMA,IAKV4R,WAAY,EANO,EAOnBlY,KAAO,iCAPY,EAQnB6K,QAAU,CACN0U,QAAS,CACLvf,KAAM,UACNqG,KAAM,WACNmZ,OAAQ,CACJ,CAAClf,MAAO,KAAMN,KAAM,oCACpB,CAACM,MAAO,KAAMN,KAAM,uCACpB,CAACM,MAAO,KAAMN,KAAM,kCACpB,CAACM,MAAO,KAAMN,KAAM,wBACpB,CAACM,MAAO,KAAMN,KAAM,4BACpB,CAACM,MAAO,KAAMN,KAAM,yBACpB,CAACM,MAAO,KAAMN,KAAM,6CACpB,CAACM,MAAO,KAAMN,KAAM,oCACpB,CAACM,MAAO,KAAMN,KAAM,8BACpB,CAACM,MAAO,KAAMN,KAAM,+BAExBM,MAAO,EAAKa,QAAU,KACtBsM,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtB4K,OAAM,GAEVqW,KAAM,CACFvhB,KAAM,OACNqG,KAAM,WACNmZ,OAAQ,CAAC,IAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MACjDlf,MAAO,IACP4K,OAAO,IAlCI,EAqCnBE,OAAS,CAkBL/E,KAAM,WACN4F,MAAOuV,wBAAc,EAAG,UAAU,GAClChC,OAAQ,GACR7hB,MAAM,EACN8T,MAAO,IA3DQ,EA+DnB8H,QAAU,CACNrM,OAAQ,CAAC,YACT6N,SAAU,SAAChQ,EAAS+P,EAAUzK,GAC1B,IAAMoR,EAAQ3G,EAAS1Y,QAAO,SAACxD,EAAE6R,GAE7B,OADI5R,IAAI4R,EAAE,CAAC,aAAa,SAAS,MAEnC,IACIxL,EAAQyc,GAAStf,QAAO,SAACxD,EAAE6R,GAI7B,OAHIA,EAAEgR,QAAUA,IACZ7iB,EAAI6R,GAED7R,IACT,IACF,OAAO,EAAKY,KAAKA,KAAK4C,QAAO,SAACxD,EAAE6R,GAc5B,OAbGA,EAAEkR,OAAS1c,EAAK,MACfrG,EAAE6E,KACE,CAAC,EAAKoH,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAInC,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,KACF,CAAC,QAAS,EAAKiM,QAAQ0W,KAAKjhB,OAC5B,CAAC,UAAD,UAAcmQ,EAAEkR,KAAhB,YAAwB1c,EAAK,aAC7B,CAAC,SAASwL,EAAE,EAAK5F,QAAQ0W,KAAKjhB,SAG/B1B,IACT,IAAIsG,SA3FK,EAgGnBlD,QAAU,CACN,CACIpC,GAAI,WACJqa,OAAQ,CACJ5T,KAAM,SACN7C,IAAK,8BArGE,EAyGnB0J,OAAS,CACL,CACItN,GAAI,WACJzC,QAAQ,EACR,eAAgB,WAChB8c,OAAQ,WACR5T,KAAM,OACN8a,MAAO,CACH,aAAc,CACV,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,OACA,QAEJ,eAAgB,CACZ,cACA,CAAC,UACD,CAAC,QACD,EAAG,GACH,GAAI,OA1HhB,EAAKhgB,OAASmF,EAAMnF,OAFL,E,wCAoInB,SAAKxB,GAAK,IAAD,OAEL,OAAOmf,GAAQ,GAAD,OAAID,GAAJ,iBAAiBnF,KAAK7O,QAAQ0U,QAAQjf,MAAtC,kBACToV,MAAK,SAAA1Q,GACF,EAAKxF,KAAOwF,EACZ,EAAKoG,OAAOqG,MAAZ,UAAuB,EAAK5G,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHIA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QACjC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,YAKS,EAAKiM,QAAQ0W,KAAKjhB,OAC3B,EAAKshB,cAAgB,EAAKpiB,KAAKA,KAAKG,KAAI,SAAAE,GACpC,OAAO6hB,GAAStf,QAAO,SAACxD,EAAE6R,GAKtB,OAJG5Q,EAAK8hB,OAASlR,EAAEzQ,OACfpB,EAAC,KAAW6R,EAAEzQ,KACdpB,EAAC,MAAY6R,EAAEgR,OAEZ7iB,IACT,OAEN,EAAKwM,OAAOoU,OAAS,EAAKhgB,KAAKA,KAAK4C,QAAO,SAACxD,EAAE6R,GAE1C,OADA7R,EAAE6E,KAAKgN,EAAE,EAAK5F,QAAQ0W,KAAKjhB,QACpB1B,IACT,S,uBAOd,WAAa,IAAD,OAER,OAAO,IAAI2W,SAAQ,SAAAC,GACfsJ,GAAQ,GAAD,OAAID,GAAJ,iBAAiB,EAAKhU,QAAQ0U,QAAQjf,MAAtC,kBACFoV,MAAK,SAAA1Q,GACF,EAAKxF,KAAOwF,EACZkE,WAAWsM,EAAQ,a,4BASnC,SAAeH,EAAW/U,EAAMggB,GAAU,IAAD,OAErC,OAAQjL,GACJ,IAAK,OACDqE,KAAKtO,OAAOqG,MAAQiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAItD,OAHIA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QACjC1B,EAAC,UAAM6R,EAAEzQ,KAAR,YAAgBM,IAEd1B,IACT,IACF8a,KAAKtO,OAAOoU,OAAS9F,KAAKmI,cAAcliB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,OACzE,MAEJ,IAAK,UACDwU,KAAKtO,OAAOqG,MAAQiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAItD,OAHIA,EAAEnQ,QAAUA,IACZ1B,EAAC,UAAM6R,EAAEzQ,KAAR,YAAgB,EAAK6K,QAAQ0W,KAAKjhB,QAEhC1B,IACT,IACF8a,KAAKtO,OAAOoU,OAAS9F,KAAKmI,cAAcliB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,U,2BAYrF,SAAc1F,GAEV,MAAgCka,KAAKtO,OAA7B/E,EAAR,EAAQA,KAAM4F,EAAd,EAAcA,MAAOuT,EAArB,EAAqBA,OAErB,OAAQnZ,GACJ,IAAK,WACD,IAAMmZ,EAAShgB,EAAKG,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,OAErD,OADAwU,KAAKtO,OAAOoU,OAASA,EACdsC,eACFtC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,WACD,IAAMuT,EAASuC,aAAOviB,GAAM,SAAAY,GAAC,OAAIA,EAAEE,SAEnC,OADAoZ,KAAKtO,OAAOoU,OAASA,EACdwC,eACFxC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,YACD,OAAOgW,eACFzC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,SACD,OAAOiW,eACF1C,OAAOA,GACPvT,MAAMA,GAEf,IAAK,UACD,OAAOkW,eACF3C,OAAOA,GACPvT,MAAMA,M,oBASvB,SAAOtM,GAAM,IAAD,OAEJ+Z,KAAKkI,cAAc9iB,OACnBa,EAAIyiB,UAAU,WAAY,CAAC,KAAM,CAAC,MAAO,SAAU,CAAC,UAAW1I,KAAKkI,cAAcjiB,KAAI,SAAAS,GAAC,OAAIA,EAAEqhB,YAG7F9hB,EAAIyiB,UAAU,YAAY,GAG9B1I,KAAKmI,cAAgBnI,KAAKla,KAAKA,KAAK4C,QAAO,SAAC6d,EAAIC,GAS5C,OARA,EAAK0B,cAAchf,SAAQ,SAAAyf,GACpBnC,EAAKyB,OAASU,EAAYriB,MACzBigB,EAAIxc,KAAK,CACL7D,GAAIyiB,EAAYZ,MAChBnhB,MAAO4f,EAAK,EAAKrV,QAAQ0W,KAAKjhB,YAInC2f,IACT,IAGF,IAAMqC,EAAa5I,KAAK6I,cAAc7I,KAAKmI,eACvCpV,EAASiN,KAAKmI,cAAczf,QAAO,SAACxD,EAAE6R,GAIlC,OAHe,IAAZA,EAAEnQ,QACD1B,EAAE6R,EAAE7Q,IAAM0iB,EAAW7R,EAAEnQ,QAEpB1B,IACT,IAENe,EAAI6iB,iBAAiB,WAAY,aAAc,CAC3C,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,OACA,CAAC,MAAO,CAAC,MAAO,SAAU,CAAC,UAAW/V,U,GA7RJgN,ICFxCgJ,G,kDACF,WAAYnc,GAAQ,IAAD,8BACf,cAAMA,IAGV4R,YAAc,EAAK/W,OAJA,EAKnBnB,KAAO,8BALY,EAMnB6K,QAAU,CACN0U,QAAS,CACLvf,KAAM,UACNqG,KAAM,WACNmZ,OAAQ,CACJ,CAAClf,MAAO,KAAMN,KAAM,gDACpB,CAACM,MAAO,KAAMN,KAAM,kCACpB,CAACM,MAAO,KAAMN,KAAM,gDACpB,CAACM,MAAO,KAAMN,KAAM,qDACpB,CAACM,MAAO,KAAMN,KAAM,6CACpB,CAACM,MAAO,KAAMN,KAAM,uCACpB,CAACM,MAAO,KAAMN,KAAM,wDACpB,CAACM,MAAO,KAAMN,KAAM,mCACpB,CAACM,MAAO,KAAMN,KAAM,wBACpB,CAACM,MAAO,KAAMN,KAAM,4BACpB,CAACM,MAAO,KAAKN,KAAM,+BACnB,CAACM,MAAO,KAAKN,KAAM,+BACnB,CAACM,MAAO,KAAKN,KAAM,+BACnB,CAACM,MAAO,KAAKN,KAAM,8BACnB,CAACM,MAAO,KAAKN,KAAM,8BACnB,CAACM,MAAO,KAAKN,KAAM,oCAEvBM,MAAO,EAAKa,QAAU,KACtBsM,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtB4K,OAAM,GAEVqW,KAAM,CACFvhB,KAAM,OACNqG,KAAM,SACNmZ,OAAQ,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MACvClf,MAAO,KACP4K,OAAO,IAtCI,EAyCnBqO,QAAU,CACNrM,OAAQ,CAAC,kBACT6N,SAAU,SAAChQ,EAAS+P,EAAUzK,GAE1B,IAAMqS,EAAU5H,EAAS1Y,QAAO,SAACxD,EAAE6R,GAE/B,OADI5R,IAAI4R,EAAE,CAAC,aAAa,QAAQ,MAElC,IAEF,OAAO,EAAKjR,KAAKA,KAAK4C,QAAO,SAACxD,EAAE6R,GAe5B,OAdGA,EAAEkR,OAASe,GAEV9jB,EAAE6E,KACE,CAAC,EAAKoH,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAInC,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,KACF,CAAC,QAAS,EAAKiM,QAAQ0W,KAAKjhB,OAC5B,CAAC,UAAUmQ,EAAEkR,MAAM,CAAC,SAASlR,EAAE,EAAK5F,QAAQ0W,KAAKjhB,SAIlD1B,IACT,MAlES,EAqEnBoD,QAAU,CACN,CACIpC,GAAI,wBACJqa,OAAQ,CACJ5T,KAAM,SACN7C,IAAK,8BA1EE,EA8EnB0J,OAAS,CACL,CACItN,GAAI,iBACJzC,QAAQ,EACR,eAAgB,iBAChB8c,OAAQ,wBACR5T,KAAM,OACN8a,MAAO,CACH,aAAc,CACV,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,OACA,QAEJ,eAAgB,CACZ,cACA,CAAC,UACD,CAAC,QACD,EAAG,GACH,GAAI,OAjGD,EAsGnB/V,OAAS,CAkBL/E,KAAM,WACNmZ,OAAQ,GACRvT,MAAOuV,wBAAc,EAAG,UAAU,GAClC7jB,MAAM,EACN8T,MAAO,GACPkR,OAAQ,MA3HR,EAAKxhB,OAASmF,EAAMnF,OAFL,E,wCAkInB,SAAKxB,GAAK,IAAD,OAEL,OAAOmf,GAAQ,GAAD,OAAID,GAAJ,iBAAiBnF,KAAK7O,QAAQ0U,QAAQjf,MAAtC,kBACToV,MAAK,SAAA1Q,GACF,EAAKxF,KAAOwF,EACZ,EAAKoG,OAAOqG,MAAZ,UAAuB,EAAK5G,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHIA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QACjC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,YAKS,EAAKiM,QAAQ0W,KAAKjhB,OAC3B,EAAKsiB,QAAU,EAAKpjB,KAAKA,KAAKG,KAAI,SAAAS,GAAC,OAAIA,EAAEuhB,QAAMxkB,QAAO,SAAAiD,GAAC,OAAIA,U,4BAIvE,SAAeiV,EAAW/U,EAAMggB,GAAU,IAAD,OACrC,OAAQjL,GACJ,IAAK,OACDqE,KAAKtO,OAAOqG,MAAQiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAItD,OAHIA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QACjC1B,EAAC,UAAM6R,EAAEzQ,KAAR,YAAgBM,IAEd1B,IACT,IACF8a,KAAKtO,OAAOoU,OAAS9F,KAAKmI,cAAcliB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,OACzE,MAEJ,IAAK,UACDwU,KAAKtO,OAAOqG,MAAQiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAItD,OAHIA,EAAEnQ,QAAUA,IACZ1B,EAAC,UAAM6R,EAAEzQ,KAAR,YAAgB,EAAK6K,QAAQ0W,KAAKjhB,QAEhC1B,IACT,IACF8a,KAAKtO,OAAOoU,OAAS9F,KAAKmI,cAAcliB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,U,uBAUrF,WAAa,IAAD,OAER,OAAO,IAAIqQ,SAAQ,SAAAC,GAAO,OACtBsJ,GAAQ,GAAD,OAAID,GAAJ,iBAAiB,EAAKhU,QAAQ0U,QAAQjf,MAAtC,kBACFoV,MAAK,SAAA1Q,GACF,EAAKxF,KAAOwF,EACZkE,WAAWsM,EAAQ,a,2BAKnC,SAAchW,GACV,MAAgCka,KAAKtO,OAA7B/E,EAAR,EAAQA,KAAM4F,EAAd,EAAcA,MAAOuT,EAArB,EAAqBA,OACrB,OAAQnZ,GACJ,IAAK,WACD,IAAMmZ,EAAShgB,EAAKG,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,OAErD,OADAwU,KAAKtO,OAAOoU,OAASA,EACdsC,eACFtC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,WACD,IAAMuT,EAASuC,aAAOviB,GAAM,SAAAY,GAAC,OAAIA,EAAEE,SAEnC,OADAoZ,KAAKtO,OAAOoU,OAASA,EACdwC,eACFxC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,YACD,OAAOgW,eACFzC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,SACD,OAAOiW,eACF1C,OAAOA,GACPvT,MAAMA,GAEf,IAAK,UACD,OAAOkW,eACF3C,OAAOA,GACPvT,MAAMA,M,oBASvB,SAAOtM,GAAM,IAAD,OAEJ+Z,KAAKkJ,QAAQ9jB,OACba,EAAIyiB,UAAU,iBAAkB,CAAC,KAAM,CAAC,MAAO,QAAS,CAAC,UAAW1I,KAAKkJ,WAGzEjjB,EAAIyiB,UAAU,kBAAkB,GAEpC1I,KAAKmI,cAAgBnI,KAAKla,KAAKA,KAAK4C,QAAO,SAAC6d,EAAIC,GAK5C,OAJAD,EAAIxc,KAAK,CACL,GAAMyc,EAAI,MAAY,GACtB,MAASA,EAAK,EAAKrV,QAAQ0W,KAAKjhB,SAE7B2f,IACT,IAEF,IAAMqC,EAAa5I,KAAK6I,cAAc7I,KAAKmI,eACvCpV,EAASiN,KAAKmI,cAAczf,QAAO,SAACxD,EAAE6R,GAElC,OADA7R,EAAE6R,EAAE7Q,IAAM0iB,EAAW7R,EAAEnQ,OAChB1B,IACT,IAGNe,EAAI6iB,iBAAiB,iBAAkB,aAAc,CACjD,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,OACA,CAAC,MAAO,CAAC,MAAO,QAAS,CAAC,UAAW/V,U,GA5PNgN,ICCrCoJ,G,kDACF,WAAYvc,GAAQ,IAAD,8BACf,cAAMA,IAMV4R,YAAc,EAAK/W,OAPA,EAQnBnB,KAAO,iCARY,EASnB6K,QAAU,CACN0U,QAAS,CACLvf,KAAM,UACNqG,KAAM,WACNmZ,OAAQ,CACJ,CAAClf,MAAO,MAAON,KAAM,kCACrB,CAACM,MAAO,MAAON,KAAM,uCACrB,CAACM,MAAO,MAAON,KAAM,kCACrB,CAACM,MAAO,MAAON,KAAM,wBACrB,CAACM,MAAO,MAAON,KAAM,4BACrB,CAACM,MAAO,MAAON,KAAM,yBACrB,CAACM,MAAO,MAAON,KAAM,gCACrB,CAACM,MAAO,MAAON,KAAM,oCACrB,CAACM,MAAO,MAAON,KAAM,8BACrB,CAACM,MAAO,MAAON,KAAM,+BAEzBM,MAAO,EAAKa,QAAU,MACtBsM,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtB4K,OAAM,GAEVqW,KAAM,CACFvhB,KAAM,OACNqG,KAAM,WACNmZ,OAAQ,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MACtDlf,MAAO,KACP4K,OAAO,IAnCI,EAsCnBE,OAAS,CAkBL/E,KAAM,WACN4F,MAAOuV,wBAAc,EAAG,UAAU,GAClChC,OAAQ,GACR7hB,MAAM,EACN8T,MAAO,IA5DQ,EAgEnB8H,QAAU,CACNrM,OAAQ,CAAC,YACT6N,SAAU,SAAChQ,EAAS+P,EAAUzK,GAC1B,IAAMoR,EAAQ3G,EAAS1Y,QAAO,SAACxD,EAAE6R,GAE7B,OADI5R,IAAI4R,EAAE,CAAC,aAAa,SAAS,MAEnC,IACIxL,EAAQyc,GAAStf,QAAO,SAACxD,EAAE6R,GAI7B,OAHIA,EAAEgR,QAAUA,IACZ7iB,EAAI6R,GAED7R,IACT,IACF,OAAO,EAAKY,KAAKA,KAAK4C,QAAO,SAACxD,EAAE6R,GAa5B,OAZGA,EAAEkR,OAAS1c,EAAK,MACfrG,EAAE6E,KACE,CAAC,EAAKoH,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAInC,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,KACF,CAAC,QAAS,EAAKiM,QAAQ0W,KAAKjhB,OAC5B,CAAC,UAAD,UAAcmQ,EAAEkR,KAAhB,YAAwB1c,EAAK,aAC7B,CAAC,SAASwL,EAAE,EAAK5F,QAAQ0W,KAAKjhB,SAE/B1B,IACT,IAAIsG,SA3FK,EAgGnBlD,QAAU,CACN,CACIpC,GAAI,WACJqa,OAAQ,CACJ5T,KAAM,SACN7C,IAAK,8BArGE,EAyGnB0J,OAAS,CACL,CACItN,GAAI,WACJzC,QAAQ,EACR,eAAgB,WAChB8c,OAAQ,WACR5T,KAAM,OACN8a,MAAO,CACH,aAAc,CACV,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,OACA,QAEJ,eAAgB,CACZ,cACA,CAAC,UACD,CAAC,QACD,EAAG,GACH,GAAI,OAzHhB,EAAKhgB,OAASmF,EAAMnF,OAHL,E,wCAoInB,SAAKxB,GAAK,IAAD,OACL,OAAOmf,GAAQ,GAAD,OAAID,GAAJ,iBAAiBnF,KAAK7O,QAAQ0U,QAAQjf,MAAtC,kBACToV,MAAK,SAAA1Q,GACF,EAAKxF,KAAOwF,EACZ,EAAKoG,OAAOqG,MAAZ,UAAuB,EAAK5G,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHIA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QACjC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,YAKS,EAAKiM,QAAQ0W,KAAKjhB,OAC3B,EAAKshB,cAAgB,EAAKpiB,KAAKA,KAAKG,KAAI,SAAAE,GACpC,OAAO6hB,GAAStf,QAAO,SAACxD,EAAE6R,GAKtB,OAJG5Q,EAAK8hB,OAASlR,EAAEzQ,OACfpB,EAAC,KAAW6R,EAAEzQ,KACdpB,EAAC,MAAY6R,EAAEgR,OAEZ7iB,IACT,OAEN,EAAKwM,OAAOoU,OAAS,EAAKhgB,KAAKA,KAAK4C,QAAO,SAACxD,EAAE6R,GAE1C,OADA7R,EAAE6E,KAAKgN,EAAE,EAAK5F,QAAQ0W,KAAKjhB,QACpB1B,IACT,S,uBAKd,WAAa,IAAD,OAER,OAAO,IAAI2W,SAAQ,SAAAC,GAAO,OACtBsJ,GAAQ,GAAD,OAAID,GAAJ,iBAAiB,EAAKhU,QAAQ0U,QAAQjf,MAAtC,kBACFoV,MAAK,SAAA1Q,GACF,EAAKxF,KAAOwF,EACZkE,WAAWsM,EAAQ,a,4BAMnC,SAAeH,EAAW/U,EAAMggB,GAAU,IAAD,OAErC,OAAQjL,GACJ,IAAK,OACDqE,KAAKtO,OAAOqG,MAAQiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAItD,OAHIA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QACjC1B,EAAC,UAAM6R,EAAEzQ,KAAR,YAAgBM,IAEd1B,IACT,IACF8a,KAAKtO,OAAOoU,OAAS9F,KAAKmI,cAAcliB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,OACzE,MAEJ,IAAK,UACDwU,KAAKtO,OAAOqG,MAAQiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAItD,OAHIA,EAAEnQ,QAAUA,IACZ1B,EAAC,UAAM6R,EAAEzQ,KAAR,YAAgB,EAAK6K,QAAQ0W,KAAKjhB,QAEhC1B,IACT,IACF8a,KAAKtO,OAAOoU,OAAS9F,KAAKmI,cAAcliB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,U,2BAWrF,SAAc1F,GAEV,MAAgCka,KAAKtO,OAA7B/E,EAAR,EAAQA,KAAM4F,EAAd,EAAcA,MAAOuT,EAArB,EAAqBA,OAErB,OAAQnZ,GACJ,IAAK,WACD,IAAMmZ,EAAShgB,EAAKG,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,OAErD,OADAwU,KAAKtO,OAAOoU,OAASA,EACdsC,eACFtC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,WACD,IAAMuT,EAASuC,aAAOviB,GAAM,SAAAY,GAAC,OAAIA,EAAEE,SAEnC,OADAoZ,KAAKtO,OAAOoU,OAASA,EACdwC,eACFxC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,YACD,OAAOgW,eACFzC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,SACD,OAAOiW,eACF1C,OAAOA,GACPvT,MAAMA,GAEf,IAAK,UACD,OAAOkW,eACF3C,OAAOA,GACPvT,MAAMA,M,oBASvB,SAAOtM,GAAM,IAAD,OAEJ+Z,KAAKkI,cAAc9iB,OACnBa,EAAIyiB,UAAU,WAAY,CAAC,KAAM,CAAC,MAAO,SAAU,CAAC,UAAW1I,KAAKkI,cAAcjiB,KAAI,SAAAS,GAAC,OAAIA,EAAEqhB,YAG7F9hB,EAAIyiB,UAAU,YAAY,GAG9B1I,KAAKmI,cAAgBnI,KAAKla,KAAKA,KAAK4C,QAAO,SAAC6d,EAAIC,GAS5C,OARA,EAAK0B,cAAchf,SAAQ,SAAAyf,GACpBnC,EAAKyB,OAASU,EAAYriB,MACzBigB,EAAIxc,KAAK,CACL7D,GAAIyiB,EAAYZ,MAChBnhB,MAAO4f,EAAK,EAAKrV,QAAQ0W,KAAKjhB,YAInC2f,IACT,IAGF,IAAMqC,EAAa5I,KAAK6I,cAAc7I,KAAKmI,eACvCpV,EAASiN,KAAKmI,cAAczf,QAAO,SAACxD,EAAE6R,GAIlC,OAHe,IAAZA,EAAEnQ,QACD1B,EAAE6R,EAAE7Q,IAAM0iB,EAAW7R,EAAEnQ,QAEpB1B,IACT,IAENe,EAAI6iB,iBAAiB,WAAY,aAAc,CAC3C,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,OACA,CAAC,MAAO,CAAC,MAAO,SAAU,CAAC,UAAW/V,U,GAtRJgN,ICCxCqJ,G,kDACF,WAAYxc,GAAQ,IAAD,8BACf,cAAMA,IAGV4R,YAAc,EAAK/W,OAJA,EAKnBnB,KAAO,iCALY,EAMnB6K,QAAU,CACN0U,QAAS,CACLvf,KAAM,UACNqG,KAAM,WACNmZ,OAAQ,CACJ,CAAClf,MAAO,MAAON,KAAM,kCACrB,CAACM,MAAO,MAAON,KAAM,uCACrB,CAACM,MAAO,MAAON,KAAM,kCACrB,CAACM,MAAO,MAAON,KAAM,wBACrB,CAACM,MAAO,MAAON,KAAM,4BACrB,CAACM,MAAO,MAAON,KAAM,yBACrB,CAACM,MAAO,MAAON,KAAM,gCACrB,CAACM,MAAO,MAAON,KAAM,oCACrB,CAACM,MAAO,MAAON,KAAM,8BACrB,CAACM,MAAO,MAAON,KAAM,+BAEzBM,MAAO,EAAKa,QAAU,MACtBsM,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtB4K,OAAM,GAEVqW,KAAM,CACFvhB,KAAM,OACNqG,KAAM,WACNmZ,OAAQ,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAC3Dlf,MAAO,KACP4K,OAAO,IAhCI,EAmCnBE,OAAS,CAkBL/E,KAAM,WACN4F,MAAOuV,wBAAc,EAAG,UAAU,GAClChC,OAAQ,GACR7hB,MAAM,EACN8T,MAAO,IAzDQ,EA6DnB8H,QAAU,CACNrM,OAAQ,CAAC,YACT6N,SAAU,SAAChQ,EAAS+P,EAAUzK,GAC1B,IAAMoR,EAAQ3G,EAAS1Y,QAAO,SAACxD,EAAE6R,GAE7B,OADI5R,IAAI4R,EAAE,CAAC,aAAa,SAAS,MAEnC,IACIxL,EAAQyc,GAAStf,QAAO,SAACxD,EAAE6R,GAI7B,OAHIA,EAAEgR,QAAUA,IACZ7iB,EAAI6R,GAED7R,IACT,IACF,OAAO,EAAKY,KAAKA,KAAK4C,QAAO,SAACxD,EAAE6R,GAa5B,OAZGA,EAAEkR,OAAS1c,EAAK,MACfrG,EAAE6E,KACE,CAAC,EAAKoH,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAInC,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,KACF,CAAC,QAAS,EAAKiM,QAAQ0W,KAAKjhB,OAC5B,CAAC,UAAD,UAAcmQ,EAAEkR,KAAhB,YAAwB1c,EAAK,aAC7B,CAAC,SAASwL,EAAE,EAAK5F,QAAQ0W,KAAKjhB,SAE/B1B,IACT,IAAIsG,SAxFK,EA6FnBlD,QAAU,CACN,CACIpC,GAAI,WACJqa,OAAQ,CACJ5T,KAAM,SACN7C,IAAK,8BAlGE,EAsGnB0J,OAAS,CACL,CACItN,GAAI,WACJzC,QAAQ,EACR,eAAgB,WAChB8c,OAAQ,WACR5T,KAAM,OACN8a,MAAO,CACH,aAAc,CACV,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,OACA,QAEJ,eAAgB,CACZ,cACA,CAAC,UACD,CAAC,QACD,EAAG,GACH,GAAI,OAvHhB,EAAKhgB,OAASmF,EAAMnF,OAFL,E,wCAiInB,SAAKxB,GAAK,IAAD,OACL,OAAOmf,GAAQ,GAAD,OAAID,GAAJ,iBAAiBnF,KAAK7O,QAAQ0U,QAAQjf,MAAtC,kBACToV,MAAK,SAAA1Q,GACF,EAAKxF,KAAOwF,EACZ,EAAKoG,OAAOqG,MAAZ,UAAsB,EAAK5G,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIxD,OAHIA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QACjC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,YAKS,EAAKiM,QAAQ0W,KAAKjhB,OAC3B,EAAKshB,cAAgB,EAAKpiB,KAAKA,KAAKG,KAAI,SAAAE,GACpC,OAAO6hB,GAAStf,QAAO,SAACxD,EAAE6R,GAKtB,OAJG5Q,EAAK8hB,OAASlR,EAAEzQ,OACfpB,EAAC,KAAW6R,EAAEzQ,KACdpB,EAAC,MAAY6R,EAAEgR,OAEZ7iB,IACT,OAEN,EAAKwM,OAAOoU,OAAS,EAAKhgB,KAAKA,KAAK4C,QAAO,SAACxD,EAAE6R,GAE1C,OADA7R,EAAE6E,KAAKgN,EAAE,EAAK5F,QAAQ0W,KAAKjhB,QACpB1B,IACT,S,uBAKd,WAAa,IAAD,OAER,OAAO,IAAI2W,SAAQ,SAAAC,GAAO,OACtBsJ,GAAQ,GAAD,OAAID,GAAJ,iBAAiB,EAAKhU,QAAQ0U,QAAQjf,MAAtC,kBACFoV,MAAK,SAAA1Q,GACF,EAAKxF,KAAOwF,EACZkE,WAAWsM,EAAQ,a,4BAMnC,SAAeH,EAAW/U,EAAMggB,GAAU,IAAD,OAErC,OAAQjL,GACJ,IAAK,OACDqE,KAAKtO,OAAOqG,MAAQiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAItD,OAHIA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QACjC1B,EAAC,UAAM6R,EAAEzQ,KAAR,YAAgBM,IAEd1B,IACT,IACF8a,KAAKtO,OAAOoU,OAAS9F,KAAKmI,cAAcliB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,OACzE,MAEJ,IAAK,UACDwU,KAAKtO,OAAOqG,MAAQiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAItD,OAHIA,EAAEnQ,QAAUA,IACZ1B,EAAC,UAAM6R,EAAEzQ,KAAR,YAAgB,EAAK6K,QAAQ0W,KAAKjhB,QAEhC1B,IACT,IACF8a,KAAKtO,OAAOoU,OAAS9F,KAAKmI,cAAcliB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,U,2BAWrF,SAAc1F,GAEV,MAAgCka,KAAKtO,OAA7B/E,EAAR,EAAQA,KAAM4F,EAAd,EAAcA,MAAOuT,EAArB,EAAqBA,OAErB,OAAQnZ,GACJ,IAAK,WACD,IAAMmZ,EAAShgB,EAAKG,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,OAErD,OADAwU,KAAKtO,OAAOoU,OAASA,EACdsC,eACFtC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,WACD,IAAMuT,EAASuC,aAAOviB,GAAM,SAAAY,GAAC,OAAIA,EAAEE,SAEnC,OADAoZ,KAAKtO,OAAOoU,OAASA,EACdwC,eACFxC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,YACD,OAAOgW,eACFzC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,SACD,OAAOiW,eACF1C,OAAOA,GACPvT,MAAMA,GAEf,IAAK,UACD,OAAOkW,eACF3C,OAAOA,GACPvT,MAAMA,M,oBASvB,SAAOtM,GAAM,IAAD,OAEJ+Z,KAAKkI,cAAc9iB,OACnBa,EAAIyiB,UAAU,WAAY,CAAC,KAAM,CAAC,MAAO,SAAU,CAAC,UAAW1I,KAAKkI,cAAcjiB,KAAI,SAAAS,GAAC,OAAIA,EAAEqhB,YAG7F9hB,EAAIyiB,UAAU,YAAY,GAG9B1I,KAAKmI,cAAgBnI,KAAKla,KAAKA,KAAK4C,QAAO,SAAC6d,EAAIC,GAS5C,OARA,EAAK0B,cAAchf,SAAQ,SAAAyf,GACpBnC,EAAKyB,OAASU,EAAYriB,MACzBigB,EAAIxc,KAAK,CACL7D,GAAIyiB,EAAYZ,MAChBnhB,MAAO4f,EAAK,EAAKrV,QAAQ0W,KAAKjhB,YAInC2f,IACT,IAGF,IAAMqC,EAAa5I,KAAK6I,cAAc7I,KAAKmI,eACvCpV,EAASiN,KAAKmI,cAAczf,QAAO,SAACxD,EAAE6R,GAIlC,OAHe,IAAZA,EAAEnQ,QACD1B,EAAE6R,EAAE7Q,IAAM0iB,EAAW7R,EAAEnQ,QAEpB1B,IACT,IAENe,EAAI6iB,iBAAiB,WAAY,aAAc,CAC3C,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,OACA,CAAC,MAAO,CAAC,MAAO,SAAU,CAAC,UAAW/V,U,GAnRJgN,ICAxCsJ,G,kDACF,WAAYzc,GAAQ,IAAD,8BACf,cAAMA,IAGV4R,YAAc,EAAK/W,OAJA,EAKnBnB,KAAO,8BALY,EAMnB6K,QAAU,CACN0U,QAAS,CACLvf,KAAM,UACNqG,KAAM,WACNmZ,OAAQ,CACJ,CAAClf,MAAO,MAAON,KAAM,2BACrB,CAACM,MAAO,MAAON,KAAM,kCACrB,CAACM,MAAO,MAAON,KAAM,gDACrB,CAACM,MAAO,MAAON,KAAM,qDACrB,CAACM,MAAO,MAAON,KAAM,6CACrB,CAACM,MAAO,MAAON,KAAM,uCACrB,CAACM,MAAO,MAAON,KAAM,mCACrB,CAACM,MAAO,MAAON,KAAM,mCACrB,CAACM,MAAO,MAAON,KAAM,wBACrB,CAACM,MAAO,MAAON,KAAM,4BACrB,CAACM,MAAO,MAAMN,KAAM,+BACpB,CAACM,MAAO,MAAMN,KAAM,+BACpB,CAACM,MAAO,MAAMN,KAAM,+BACpB,CAACM,MAAO,MAAMN,KAAM,8BACpB,CAACM,MAAO,MAAMN,KAAM,8BACpB,CAACM,MAAO,MAAMN,KAAM,oCAExBM,MAAO,EAAKa,QAAU,MACtBsM,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtB4K,OAAM,GAEVqW,KAAM,CACFvhB,KAAM,OACNqG,KAAM,SACNmZ,OAAQ,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MACtDlf,MAAO,KACP4K,OAAO,IAtCI,EAyCnBqO,QAAU,CACNrM,OAAQ,CAAC,kBACT6N,SAAU,SAAChQ,EAAS+P,EAAUzK,GAE1B,IAAMqS,EAAU5H,EAAS1Y,QAAO,SAACxD,EAAE6R,GAE/B,OADI5R,IAAI4R,EAAE,CAAC,aAAa,QAAQ,MAElC,IAEF,OAAO,EAAKjR,KAAKA,KAAK4C,QAAO,SAACxD,EAAE6R,GAe5B,OAdGA,EAAEkR,OAASe,GAEV9jB,EAAE6E,KACE,CAAC,EAAKoH,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAInC,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,KACF,CAAC,QAAS,EAAKiM,QAAQ0W,KAAKjhB,OAC5B,CAAC,UAAUmQ,EAAEkR,MAAM,CAAC,SAASlR,EAAE,EAAK5F,QAAQ0W,KAAKjhB,SAIlD1B,IACT,MAlES,EAqEnBoD,QAAU,CACN,CACIpC,GAAI,wBACJqa,OAAQ,CACJ5T,KAAM,SACN7C,IAAK,8BA1EE,EA8EnB0J,OAAS,CACL,CACItN,GAAI,iBACJzC,QAAQ,EACR,eAAgB,iBAChB8c,OAAQ,wBACR5T,KAAM,OACN8a,MAAO,CACH,aAAc,CACV,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,OACA,QAEJ,eAAgB,CACZ,cACA,CAAC,UACD,CAAC,QACD,EAAG,GACH,GAAI,OAjGD,EAsGnB/V,OAAS,CAkBL/E,KAAM,WACNmZ,OAAQ,GACRvT,MAAOuV,wBAAc,EAAG,UAAU,GAClC7jB,MAAM,EACN8T,MAAO,GACPkR,OAAQ,MA3HR,EAAKxhB,OAASmF,EAAMnF,OAFL,E,wCAkInB,SAAKxB,GAAK,IAAD,OAEL,OAAOmf,GAAQ,GAAD,OAAID,GAAJ,iBAAiBnF,KAAK7O,QAAQ0U,QAAQjf,MAAtC,kBACToV,MAAK,SAAA1Q,GACF,EAAKxF,KAAOwF,EACZ,EAAKoG,OAAOqG,MAAZ,UAAsB,EAAK5G,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIxD,OAHIA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QACjC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,YAKS,EAAKiM,QAAQ0W,KAAKjhB,OAC3B,EAAKsiB,QAAU,EAAKpjB,KAAKA,KAAKG,KAAI,SAAAS,GAAC,OAAIA,EAAEuhB,QAAMxkB,QAAO,SAAAiD,GAAC,OAAIA,U,4BAIvE,SAAeiV,EAAW/U,EAAMggB,GAAU,IAAD,OAErC,OAAQjL,GACJ,IAAK,OACDqE,KAAKtO,OAAOqG,MAAQiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAItD,OAHIA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QACjC1B,EAAC,UAAM6R,EAAEzQ,KAAR,YAAgBM,IAEd1B,IACT,IACF8a,KAAKtO,OAAOoU,OAAS9F,KAAKmI,cAAcliB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,OACzE,MAEJ,IAAK,UACDwU,KAAKtO,OAAOqG,MAAQiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAItD,OAHIA,EAAEnQ,QAAUA,IACZ1B,EAAC,UAAM6R,EAAEzQ,KAAR,YAAgB,EAAK6K,QAAQ0W,KAAKjhB,QAEhC1B,IACT,IACF8a,KAAKtO,OAAOoU,OAAS9F,KAAKmI,cAAcliB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,U,uBAUrF,WAAa,IAAD,OAER,OAAO,IAAIqQ,SAAQ,SAAAC,GAAO,OACtBsJ,GAAQ,GAAD,OAAID,GAAJ,iBAAiB,EAAKhU,QAAQ0U,QAAQjf,MAAtC,kBACFoV,MAAK,SAAA1Q,GACF,EAAKxF,KAAOwF,EACZkE,WAAWsM,EAAQ,a,2BAKnC,SAAchW,GACV,MAAgCka,KAAKtO,OAA7B/E,EAAR,EAAQA,KAAM4F,EAAd,EAAcA,MAAOuT,EAArB,EAAqBA,OACrB,OAAQnZ,GACJ,IAAK,WACD,IAAMmZ,EAAShgB,EAAKG,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,OAErD,OADAwU,KAAKtO,OAAOoU,OAASA,EACdsC,eACFtC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,WACD,IAAMuT,EAASuC,aAAOviB,GAAM,SAAAY,GAAC,OAAIA,EAAEE,SAEnC,OADAoZ,KAAKtO,OAAOoU,OAASA,EACdwC,eACFxC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,YACD,OAAOgW,eACFzC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,SACD,OAAOiW,eACF1C,OAAOA,GACPvT,MAAMA,GAEf,IAAK,UACD,OAAOkW,eACF3C,OAAOA,GACPvT,MAAMA,M,oBASvB,SAAOtM,GAAM,IAAD,OAEJ+Z,KAAKkJ,QAAQ9jB,OACba,EAAIyiB,UAAU,iBAAkB,CAAC,KAAM,CAAC,MAAO,QAAS,CAAC,UAAW1I,KAAKkJ,WAGzEjjB,EAAIyiB,UAAU,kBAAkB,GAEpC1I,KAAKmI,cAAgBnI,KAAKla,KAAKA,KAAK4C,QAAO,SAAC6d,EAAIC,GAK5C,OAJAD,EAAIxc,KAAK,CACL,GAAMyc,EAAI,MAAY,GACtB,MAASA,EAAK,EAAKrV,QAAQ0W,KAAKjhB,SAE7B2f,IACT,IAEF,IAAMqC,EAAa5I,KAAK6I,cAAc7I,KAAKmI,eACvCpV,EAASiN,KAAKmI,cAAczf,QAAO,SAACxD,EAAE6R,GAElC,OADA7R,EAAE6R,EAAE7Q,IAAM0iB,EAAW7R,EAAEnQ,OAChB1B,IACT,IAGNe,EAAI6iB,iBAAiB,iBAAkB,aAAc,CACjD,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,OACA,CAAC,MAAO,CAAC,MAAO,QAAS,CAAC,UAAW/V,U,GA7PNgN,I,UChB9BuJ,GAA4B,CACrC,CAAC1iB,MAAM,KAAKN,KAAK,iDAAiDuhB,KAAK,MACvE,CAACjhB,MAAM,MAAMN,KAAK,iDAAiDuhB,KAAK,MACxE,CAACjhB,MAAM,MAAMN,KAAK,iDAAiDuhB,KAAK,MACxE,CAACjhB,MAAM,MAAMN,KAAK,iDAAiDuhB,KAAK,MACxE,CAACjhB,MAAM,MAAMN,KAAK,iDAAiDuhB,KAAK,MACxE,CAACjhB,MAAM,MAAMN,KAAK,iDAAiDuhB,KAAK,MACxE,CAACjhB,MAAM,KAAKN,KAAM,iDAAiDuhB,KAAK,MACxE,CAACjhB,MAAM,MAAMN,KAAM,iDAAiDuhB,KAAK,MACzE,CAACjhB,MAAM,MAAMN,KAAM,iDAAiDuhB,KAAK,MACzE,CAACjhB,MAAM,MAAMN,KAAM,iDAAiDuhB,KAAK,MACzE,CAACjhB,MAAM,MAAMN,KAAM,iDAAiDuhB,KAAK,MACzE,CAACjhB,MAAM,MAAMN,KAAM,iDAAiDuhB,KAAK,OCFvE0B,G,kDACF,WAAY3c,GAAQ,IAAD,8BACf,cAAMA,IAMV4R,YAAc,EAAK/W,OAPA,EAQnBnB,KAAO,mBARY,EASnB6K,QAAU,CACN0U,QAAS,CACLvf,KAAM,UACNqG,KAAM,WACNmZ,OAAQ,CACJ,iDACA,kDACJlf,MAAM,EAAK4iB,cAAgB,iDAC3BhY,OAAM,GAEVqW,KAAM,CACFvhB,KAAM,OACNqG,KAAM,WACNmZ,OAAQ,CACJ,KAAK,KAAK,KAAK,KAAK,KAAK,MAE7Blf,MAAO,KACP4K,OAAO,GAEXiY,OAAO,CACHnjB,KAAM,SACNqG,KAAM,WACNmZ,OAAQ,CACJ,CAACxf,KAAM,sBAAsBM,MAAM,SACnC,CAACN,KAAM,sBAAuBM,MAAM,YAExCA,MAAO,QACPmN,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtB4K,OAAM,IAtCK,EAyCnBE,OAAS,CAkBL/E,KAAM,WACN4F,MAAOuV,wBAAc,EAAG,UAAU,GAClChC,OAAQ,GACR7hB,MAAM,EACN8T,MAAO,GACPkR,OAAQ,MAhEO,EAoEnBpJ,QAAU,CACNrM,OAAQ,CAAC,UACT6N,SAAU,SAAChQ,EAAS+P,EAAUzK,GAC1B,IAAMoR,EAAQ3G,EAAS1Y,QAAO,SAACxD,EAAE6R,GAE7B,OADI5R,IAAI4R,EAAE,CAAC,aAAa,SAAS,MAEnC,IACIxL,EAAQme,GAAOhhB,QAAO,SAACxD,EAAE6R,GAI3B,OAHIA,EAAEgR,QAAUA,IACZ7iB,EAAI6R,GAED7R,IACT,IACF,OAAO,EAAKY,KAAKA,KAAK4C,QAAO,SAACxD,EAAE6R,GAQ5B,OAPGA,EAAEkR,OAAS1c,EAAK,MACfrG,EAAE6E,KACE,CAAC,GAAD,OAAI,EAAKoH,QAAQ0U,QAAQjf,OAAS,EAAK4iB,cAAvC,OAAoF,YAA9B,EAAKrY,QAAQsY,OAAO7iB,MAAsB,OAAQ,KACxG,CAAC,QAAS,EAAKuK,QAAQ0W,KAAKjhB,OAC5B,CAAC,SAAD,UAAamQ,EAAEkR,KAAf,YAAuB1c,EAAK,aAC5B,CAAC,SAASwL,EAAE,EAAK5F,QAAQsY,OAAO7iB,SAEjC1B,IACT,IAAIsG,SA1FK,EA+FnBlD,QAAU,CACN,CACIpC,GAAI,sBACJqa,OAAQ,CACJ5T,KAAM,SACN7C,IAAK,8BApGE,EAwGnB0J,OAAS,CACL,CACItN,GAAI,SACJzC,QAAQ,EACR,eAAgB,gBAChB8c,OAAQ,sBACR5T,KAAM,OACN8a,MAAO,CACH,aAAc,CACV,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,OACA,QAEJ,eAAgB,CACZ,cACA,CAAC,UACD,CAAC,QACD,EAAG,GACH,GAAI,OAzHhB,EAAK+B,aAAe5c,EAAMtG,KAC1B,EAAKqjB,OAAS/c,EAAMnF,OAHL,E,wCAmInB,SAAKxB,GAAK,IAAD,OAEC2jB,EAAgBN,GAA0B5gB,QAAO,SAACxD,EAAE6R,GAItD,OAHIA,EAAEzQ,OAAS,EAAKkjB,cAAgBzS,EAAEzQ,OAAS,EAAK6K,QAAQ0U,QAAQjf,OAAUmQ,EAAE8Q,OAAS,EAAK1W,QAAQ0W,KAAKjhB,QACvG1B,EAAI6R,EAAEnQ,OAEH1B,IACT,MAEF,GAAG0kB,EAEC,OADA5J,KAAK7O,QAAQ0U,QAAQjf,MAAQoZ,KAAKwJ,aAAexJ,KAAKwJ,aAAexJ,KAAK7O,QAAQ0U,QAAQjf,MACnFwe,GAAQ,GAAD,OAAID,GAAJ,iBAAiByE,EAAjB,kBACT5N,MAAK,SAAA1Q,GAgBF,OAfA,EAAKxF,KAAOwF,EACZ,EAAKoG,OAAOqG,MAAZ,UAAuB,EAAK5G,QAAQ0U,QAAQjf,OAAS,EAAK4iB,aAA1D,YAA0E,EAAKrY,QAAQ0W,KAAKjhB,OAC5F,EAAKijB,YAAc,EAAK/jB,KAAKA,KAAKG,KAAI,SAAAE,GAClC,OAAOujB,GAAOhhB,QAAO,SAACxD,EAAE6R,GAKpB,OAJG5Q,EAAK8hB,OAASlR,EAAEzQ,OACfpB,EAAC,KAAW6R,EAAEzQ,KACdpB,EAAC,MAAY6R,EAAEgR,OAEZ7iB,IACT,OAEN,EAAKwM,OAAOoU,OAAS,EAAKhgB,KAAKA,KAAK4C,QAAO,SAACxD,EAAE6R,GAE1C,OADA7R,EAAE6E,KAAKgN,EAAEnQ,OACF1B,IACT,IACKoG,O,uBAQvB,WAAa,IAAD,OACFse,EAAgBN,GAA0B5gB,QAAO,SAACxD,EAAE6R,GAItD,OAHGA,EAAEzQ,OAAS,EAAKkjB,cAAgBzS,EAAE8Q,OAAS,EAAK1W,QAAQ0W,KAAKjhB,QAC5D1B,EAAI6R,EAAEnQ,OAEH1B,IACT,MACF,GAAG0kB,EACC,OAAO,IAAI/N,SAAQ,SAAAC,GAAO,OACtBsJ,GAAQ,GAAD,OAAID,GAAJ,iBAAiByE,EAAjB,kBACF5N,MAAK,SAAA1Q,GACF,EAAKxF,KAAOwF,EACZkE,WAAWsM,EAAQ,a,4BASvC,SAAeH,EAAW/U,EAAMggB,GAE5B,OAAQjL,GACJ,IAAK,OACDqE,KAAKtO,OAAOqG,MAAZ,UAAuBiI,KAAK7O,QAAQ0U,QAAQjf,MAA5C,YAAqDA,GACrDoZ,KAAKtO,OAAOoU,OAAS9F,KAAKmI,cAAcliB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,OACzE,MAEJ,IAAK,UACDwU,KAAKtO,OAAOqG,MAAZ,UAAuBnR,EAAvB,YAAgCoZ,KAAK7O,QAAQ0W,KAAKjhB,OAClDoZ,KAAKtO,OAAOoU,OAAS9F,KAAKmI,cAAcliB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,OACzE,MAEJ,IAAK,SAEDwU,KAAKtO,OAAOqG,MAAZ,UAAuBiI,KAAK7O,QAAQ0U,QAAQjf,MAA5C,iBAA0DoZ,KAAK7O,QAAQ0W,KAAKjhB,OAC5EoZ,KAAKtO,OAAOoU,OAAS9F,KAAKmI,cAAcliB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,OAErEwU,KAAKtO,OAAOuX,OADH,YAAVriB,EACsB,KAEA,Q,uBAWrC,SAAU6iB,GACN,MAAyB,UAAXA,I,2BAGlB,SAAc3jB,GAEV,MAAgCka,KAAKtO,OAA7B/E,EAAR,EAAQA,KAAM4F,EAAd,EAAcA,MAAOuT,EAArB,EAAqBA,OAErB,OAAQnZ,GACJ,IAAK,WACD,IAAMmZ,EAAShgB,EAAKG,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,OAErD,OADAwU,KAAKtO,OAAOoU,OAASA,EACdsC,eACFtC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,WACD,IAAMuT,EAASuC,aAAOviB,GAAM,SAAAY,GAAC,OAAIA,EAAEE,SAEnC,OADAoZ,KAAKtO,OAAOoU,OAASA,EACdwC,eACFxC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,YACD,OAAOgW,eACFzC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,SACD,OAAOiW,eACF1C,OAAOA,GACPvT,MAAMA,GAEf,IAAK,UACD,OAAOkW,eACF3C,OAAOA,GACPvT,MAAMA,M,oBASvB,SAAOtM,GAAM,IAAD,OAEJ+Z,KAAK6J,YAAYzkB,OACjBa,EAAIyiB,UAAU,SAAU,CAAC,KAAM,CAAC,MAAO,SAAU,CAAC,UAAW1I,KAAK6J,YAAY5jB,KAAI,SAAAS,GAAC,OAAIA,EAAEqhB,YAGzF9hB,EAAIyiB,UAAU,UAAU,GAG5B1I,KAAKmI,cAAgBnI,KAAKla,KAAKA,KAAK4C,QAAO,SAAC6d,EAAIC,GAS5C,OARA,EAAKqD,YAAY3gB,SAAQ,SAAA4gB,GAClBtD,EAAKyB,OAAS6B,EAAWxjB,MACxBigB,EAAIxc,KAAK,CACL7D,GAAI4jB,EAAW/B,MACfnhB,MAAO4f,EAAK,EAAKrV,QAAQsY,OAAO7iB,YAIrC2f,IACT,IAEF,IAAMqC,EAAa5I,KAAK6I,cAAc7I,KAAKmI,eACvCpV,EAASiN,KAAKmI,cAAczf,QAAO,SAACxD,EAAE6R,GAElC,OADA7R,EAAE6R,EAAE7Q,IAAM0iB,EAAW7R,EAAEnQ,OAChB1B,IACT,IAENe,EAAI6iB,iBAAiB,SAAU,aAAc,CACzC,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,OACA,CAAC,MAAO,CAAC,MAAO,SAAU,CAAC,UAAW/V,U,GAxSrBgN,ICDvBgK,G,kDACF,WAAYnd,GAAQ,IAAD,8BACf,cAAMA,IAIV4R,YAAc,EAAK/W,OALA,EAMnBnB,KAAO,2BANY,EAOnB6K,QAAU,CACN0U,QAAS,CACLvf,KAAM,UACNqG,KAAM,WACNmZ,OAAQ,CACJ,CAAClf,MAAM,KAAKN,KAAK,oCACjB,CAACM,MAAM,KAAKN,KAAK,uCAErBM,MAAO,EAAKa,QAAU,KACtBsM,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtB4K,OAAM,GAEViY,OAAO,CACHnjB,KAAM,SACNqG,KAAM,WACNmZ,OAAQ,CACJ,CAACxf,KAAM,qBAAqBM,MAAM,0BAClC,CAACN,KAAM,qBAAsBM,MAAM,0BACnC,CAACN,KAAM,uBAAuBM,MAAM,cAExCA,MAAO,yBACPmN,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtB4K,OAAM,IA/BK,EAkCnBE,OAAS,CAkBL/E,KAAM,WACN4F,MAAOuV,wBAAc,EAAG,UAAU,GAClChC,OAAQ,GACR7hB,MAAM,EACN8T,MAAO,GACPkR,OAAQ,MAzDO,EA6DnBpJ,QAAU,CACNrM,OAAQ,CAAC,YACT6N,SAAU,SAAChQ,EAAS+P,EAAUzK,GAC1B,IAAMoR,EAAQ3G,EAAS1Y,QAAO,SAACxD,EAAE6R,GAE7B,OADI5R,IAAI4R,EAAE,CAAC,aAAa,SAAS,MAEnC,IACIxL,EAAQyc,GAAStf,QAAO,SAACxD,EAAE6R,GAI7B,OAHIA,EAAEgR,QAAUA,IACZ7iB,EAAI6R,GAED7R,IACT,IACF,OAAO,EAAKY,KAAKA,KAAK4C,QAAO,SAACxD,EAAE6R,GAiB5B,OAhBGA,EAAEkR,OAAS1c,EAAK,MACfrG,EAAE6E,KACE,CAAC,GAAD,OAAI,EAAKoH,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAItC,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,YAKS,EAAKiM,QAAQsY,OAAO3D,OAAOpd,QAAO,SAACxD,EAAE6R,GAI3C,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQsY,OAAO7iB,QAC/B1B,EAAI6R,EAAEzQ,MAEHpB,IACR,MACF,CAAC,UAAD,UAAc6R,EAAEkR,KAAhB,YAAwB1c,EAAK,aAC7B,CAAC,SAASwL,EAAE,EAAK5F,QAAQsY,OAAO7iB,SAEjC1B,IACT,IAAIsG,SA5FK,EAiGnBlD,QAAU,CACN,CACIpC,GAAI,WACJqa,OAAQ,CACJ5T,KAAM,SACN7C,IAAK,8BAtGE,EA0GnB0J,OAAS,CACL,CACItN,GAAI,WACJzC,QAAQ,EACR,eAAgB,WAChB8c,OAAQ,WACR5T,KAAM,OACN8a,MAAO,CACH,aAAc,CACV,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,OACA,QAEJ,eAAgB,CACZ,cACA,CAAC,UACD,CAAC,QACD,EAAG,GACH,GAAI,OA3HhB,EAAKhgB,OAASmF,EAAMnF,OAFL,E,wCAqInB,SAAKxB,GAAK,IAAD,OAEL,OAAOmf,GAAQ,GAAD,OAAID,GAAJ,iBAAiBnF,KAAK7O,QAAQ0U,QAAQjf,MAAtC,kBACToV,MAAK,SAAA1Q,GA0BF,OAzBA,EAAKxF,KAAOwF,EACZ,EAAKoG,OAAOqG,MAAZ,UAAuB,EAAK5G,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHIA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QACjC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,YAKS,EAAKiM,QAAQsY,OAAO3D,OAAOpd,QAAO,SAACxD,EAAE6R,GAI3C,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQsY,OAAO7iB,QAC/B1B,EAAI6R,EAAEzQ,MAEHpB,IACR,KACF,EAAKgjB,cAAgB,EAAKpiB,KAAKA,KAAKG,KAAI,SAAAE,GACpC,OAAO6hB,GAAStf,QAAO,SAACxD,EAAE6R,GAKtB,OAJG5Q,EAAK8hB,OAASlR,EAAEzQ,OACfpB,EAAC,KAAW6R,EAAEzQ,KACdpB,EAAC,MAAY6R,EAAEgR,OAEZ7iB,IACT,OAEN,EAAKwM,OAAOoU,OAAS,EAAKhgB,KAAKA,KAAK4C,QAAO,SAACxD,EAAE6R,GAE1C,OADA7R,EAAE6E,KAAKgN,EAAE,EAAK5F,QAAQsY,OAAO7iB,QACtB1B,IACT,IACKoG,O,uBAKnB,WAAa,IAAD,OACR,OAAO,IAAIuQ,SAAQ,SAAAC,GAAO,OACtBsJ,GAAQ,GAAD,OAAID,GAAJ,iBAAiB,EAAKhU,QAAQ0U,QAAQjf,MAAtC,kBACFoV,MAAK,SAAA1Q,GACF,EAAKxF,KAAOwF,EACZkE,WAAWsM,EAAQ,a,4BAMnC,SAAeH,EAAW/U,EAAMggB,GAAU,IAAD,OAErC,OAAQjL,GACJ,IAAK,UACDqE,KAAKtO,OAAOqG,MAAZ,UAAuBiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHIA,EAAEnQ,QAAUA,IACZ1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,YAKS8a,KAAK7O,QAAQsY,OAAO3D,OAAOpd,QAAO,SAACxD,EAAE6R,GAI1C,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQsY,OAAO7iB,QAC/B1B,EAAI6R,EAAEzQ,MAEHpB,IACT,KACF8a,KAAKtO,OAAOoU,OAAS9F,KAAKmI,cAAcliB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,OACzE,MAEJ,IAAK,SACDwU,KAAKtO,OAAOqG,MAAZ,UAAuBiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHIA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QACjC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,YAKS8a,KAAK7O,QAAQsY,OAAO3D,OAAOpd,QAAO,SAACxD,EAAE6R,GAI1C,OAHGA,EAAEnQ,QAAUA,IACX1B,EAAI6R,EAAEzQ,MAEHpB,IACT,KACF8a,KAAKtO,OAAOoU,OAAS9F,KAAKmI,cAAcliB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,OAErEwU,KAAKtO,OAAOuX,OADH,cAAVriB,EACsB,KAEA,Q,uBAWrC,SAAU6iB,GACN,MAAyB,UAAXA,I,2BAGlB,SAAc3jB,GAEV,MAAgCka,KAAKtO,OAA7B/E,EAAR,EAAQA,KAAM4F,EAAd,EAAcA,MAAOuT,EAArB,EAAqBA,OAErB,OAAQnZ,GACJ,IAAK,WACD,IAAMmZ,EAAShgB,EAAKG,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SAAOnD,QAAO,SAAAiD,GAAC,OAAIA,KAAG8E,OAErD,OADAwU,KAAKtO,OAAOoU,OAASA,EACdsC,eACFtC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,WACD,IAAMuT,EAASuC,aAAOviB,GAAM,SAAAY,GAAC,OAAIA,EAAEE,SAEnC,OADAoZ,KAAKtO,OAAOoU,OAASA,EACdwC,eACFxC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,YACD,OAAOgW,eACFzC,OAAOA,GACPvT,MAAMA,GAEf,IAAK,SACD,OAAOiW,eACF1C,OAAOA,GACPvT,MAAMA,GAEf,IAAK,UACD,OAAOkW,eACF3C,OAAOA,GACPvT,MAAMA,M,oBASvB,SAAOtM,GAAM,IAAD,OAEJ+Z,KAAKkI,cAAc9iB,OACnBa,EAAIyiB,UAAU,WAAY,CAAC,KAAM,CAAC,MAAO,SAAU,CAAC,UAAW1I,KAAKkI,cAAcjiB,KAAI,SAAAS,GAAC,OAAIA,EAAEqhB,YAG7F9hB,EAAIyiB,UAAU,YAAY,GAG9B1I,KAAKmI,cAAgBnI,KAAKla,KAAKA,KAAK4C,QAAO,SAAC6d,EAAIC,GAS5C,OARA,EAAK0B,cAAchf,SAAQ,SAAAyf,GACpBnC,EAAKyB,OAASU,EAAYriB,MACzBigB,EAAIxc,KAAK,CACL7D,GAAIyiB,EAAYZ,MAChBnhB,MAAO4f,EAAK,EAAKrV,QAAQsY,OAAO7iB,YAIrC2f,IACT,IAEF,IAAMqC,EAAa5I,KAAK6I,cAAc7I,KAAKmI,eACvCpV,EAASiN,KAAKmI,cAAczf,QAAO,SAACxD,EAAE6R,GAIlC,OAHe,IAAZA,EAAEnQ,QACD1B,EAAE6R,EAAE7Q,IAAM0iB,EAAW7R,EAAEnQ,QAEpB1B,IACT,IAENe,EAAI6iB,iBAAiB,WAAY,aAAc,CAC3C,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,OACA,CAAC,MAAO,CAAC,MAAO,SAAU,CAAC,UAAW/V,U,GA9SRgN,I,UCFpCiK,G,kDACF,WAAYpd,GAAQ,IAAD,8BACf,cAAMA,IAIV4R,YAAc,EAAK/W,OALA,EAMnBnB,KAAO,wBANY,EAOnB6K,QAAU,CACN0W,KAAM,CACFvhB,KAAM,OACNqG,KAAM,WACNmZ,OAAQ,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MACjFlf,MAAO,KACP4K,OAAO,GAEXnM,KAAM,CACFiB,KAAM,OACNqG,KAAM,WACNmZ,OAAQ,CAAC,OAAQ,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQ,OAAQ,OAAQ,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQ,QAC/Klf,MAAO,OACP4K,OAAO,GAEXlM,GAAI,CACAgB,KAAM,KACNqG,KAAM,WACNmZ,OAAQ,CAAC,OAAQ,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQ,OAAQ,OAAQ,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQ,QAC/Klf,MAAO,OACP4K,OAAO,GAEXyY,KAAM,CACF3jB,KAAM,OACNqG,KAAM,WACNmZ,OAAQ,CACJ,CAACxf,KAAK,UAAUM,MAAM,KACtB,CAACN,KAAK,cAAcM,MAAM,KAC1B,CAACN,KAAK,YAAYM,MAAM,KACxB,CAACN,KAAK,gBAAgBM,MAAM,KAC5B,CAACN,KAAK,eAAeM,MAAM,KAC3B,CAACN,KAAK,+BAA+BM,MAAM,KAC3C,CAACN,KAAK,6BAA6BM,MAAM,KACzC,CAACN,KAAK,gBAAgBM,MAAM,KAC5B,CAACN,KAAK,UAAUM,MAAM,MACtB,CAACN,KAAK,yCAAyCM,MAAM,MAEzDmN,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtBA,MAAO,IACP4K,OAAO,GAEX8U,UAAW,CACPhgB,KAAM,YACNqG,KAAM,WACNmZ,OAAQ,CAAC,UAAW,YACpBlf,MAAO,UACP4K,OAAO,IAtDI,EAyDnBqO,QAAU,CACNrM,OAAQ,CAAC,iBACT6N,SAAU,SAAChQ,EAAS+P,EAAUzK,GAC1B,IAAMzQ,EAAKkb,EAAS1Y,QAAO,SAACxD,EAAE6R,GAE1B,OADI5R,IAAI4R,EAAE,CAAC,MAAM,MAEnB,GACF,OAAO,EAAKjR,KAAKA,KAAK4C,QAAO,SAACxD,EAAE6R,GAY5B,OAXGA,EAAE7Q,KAAOA,GAERhB,EAAE6E,KACE,CAAC,iBAAiBgN,EAAC,UACnB,CAAC,UAAUA,EAAC,aACZ,CAAC,QAAQA,EAAC,WACV,CAAC,SAASA,EAAC,YACX,CAACA,EAAC,SAAaA,EAAC,QAIjB7R,IACT,MA7ES,EAmFnBwM,OAAS,CACL/E,KAAM,UACNmZ,OAAQ,GACRvT,MAAO,GACPpL,OAAQ,EACR0H,MAAO,IACPyX,UAAW,WACXriB,MAAK,EACL8T,MAAM,IA3FS,EA6FnBzP,QAAU,CACN,CACIpC,GAAI,gBACJqa,OAAQ,CACJ5T,KAAM,UACN7G,KAAM,CACF6G,KAAM,oBACNyU,SAAU,OApGP,EA0GnB5N,OAAS,CACL,CACItN,GAAG,gBACHqa,OAAO,gBACP5T,KAAM,SACN8a,MAAM,CACF,iBAAiB,GAErBxC,WAAY,SAhHhB,EAAKxd,OAASmF,EAAMnF,OAFL,E,wCAsHnB,SAAKxB,GAAM,IAAD,OACAZ,EAAO2a,KAAKkK,YAAYlK,KAAK7O,QAAQ9L,KAAKuB,OAC1CtB,EAAK0a,KAAKkK,YAAYlK,KAAK7O,QAAQ7L,GAAGsB,OACtCkD,EAAG,UAAMqb,GAAN,kBAAoBnF,KAAKvY,QAAU,KAAnC,iCACHgf,EAAM,eAAWzG,KAAK7O,QAAQ0W,KAAKjhB,MAA7B,iBAA2CvB,EAA3C,uBAA8DC,EAA9D,yBAAiF0a,KAAK7O,QAAQ8Y,KAAKrjB,MAAnG,8BAA8HoZ,KAAK7O,QAAQmV,UAAU1f,MAArJ,gCAEZ,OAAOwe,GAAQtb,EAAI2c,GACdzK,MAAK,SAAA1Q,GACF,EAAKxF,KAAOwF,EACZ,EAAKoG,OAAOoU,OAAS,EAAKhgB,KAAK4gB,YAAY,GAAGC,aAAa1gB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SACtE,EAAK8K,OAAOa,MAAQ,EAAKzM,KAAK4gB,YAAY,GAAGC,aAAa1gB,KAAI,SAAAS,GAAC,OAAIA,EAAEmP,SACrE,EAAKnE,OAAOqG,MAAZ,eAA4B,EAAK5G,QAAQ8Y,KAAKnE,OAAOpd,QAAO,SAACxD,EAAE6R,GAI3D,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ8Y,KAAKrjB,QAC7B1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,mCAMO,EAAKiM,QAAQ0W,KAAKjhB,MANzB,iBAMuC,EAAKuK,QAAQ9L,KAAKuB,MANzD,eAMqE,EAAKuK,QAAQ7L,GAAGsB,MANrF,0CAOa,EAAKuK,QAAQmV,UAAU1f,Y,uBAMhD,WAAa,IAAD,OAEFvB,EAAO2a,KAAKkK,YAAYlK,KAAK7O,QAAQ9L,KAAKuB,OAC1CtB,EAAK0a,KAAKkK,YAAYlK,KAAK7O,QAAQ7L,GAAGsB,OACtCkD,EAAG,UAAMqb,GAAN,0CACHsB,EAAM,eAAWzG,KAAK7O,QAAQ0W,KAAKjhB,MAA7B,iBAA2CvB,EAA3C,uBAA8DC,EAA9D,yBAAiF0a,KAAK7O,QAAQ8Y,KAAKrjB,MAAnG,8BAA8HoZ,KAAK7O,QAAQmV,UAAU1f,MAArJ,gCACZ,OAAOwe,GAAQtb,EAAI2c,GACdzK,MAAK,SAAA1Q,GAEF,EAAKxF,KAAOwF,O,mBAIxB,SAAM+I,EAAWrP,GACb,IAAImlB,EAAcC,GAAUhJ,SAAS,GAAGiJ,SAASF,YAAY,GACzDnL,EAAQmL,EAAYzhB,QAAO,SAAUsW,EAAQsL,GAC7C,OAAOtL,EAAOuL,OAAOD,KACtB,IAAI3Q,IAAS6Q,aAAaL,EAAY,GAAIA,EAAY,KAIzD,OAHA9V,EAAUoW,UAAUzL,EAAO,CACvB3Q,QAAS,KAENwN,QAAQC,Y,sBAGnB,SAASzH,GAELA,EAAUnC,YAAY,YACtBmC,EAAUwS,aAAa,YACvBxS,EAAUoW,UAAU,CAChB,EAAE,kBAAkB,oBACpB,EAAE,kBAAkB,uB,4BAG5B,SAAe9O,EAAW/U,EAAMggB,GAAU,IAAD,OAErC,OAAQjL,GACJ,IAAK,OACDqE,KAAKtO,OAAOqG,MAAZ,eAA4BiI,KAAK7O,QAAQ8Y,KAAKnE,OAAOpd,QAAO,SAACxD,EAAE6R,GAIvD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ8Y,KAAKrjB,QAC7B1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALN,mCAMO0B,EANP,iBAMqBoZ,KAAK7O,QAAQ9L,KAAKuB,MANvC,eAMmDoZ,KAAK7O,QAAQ7L,GAAGsB,MANnE,0CAOaoZ,KAAK7O,QAAQmV,UAAU1f,OACpC,MAEJ,IAAK,OACDoZ,KAAKtO,OAAOqG,MAAZ,eAA4BiI,KAAK7O,QAAQ8Y,KAAKnE,OAAOpd,QAAO,SAACxD,EAAE6R,GAI3D,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ8Y,KAAKrjB,QAC7B1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,mCAMO8a,KAAK7O,QAAQ0W,KAAKjhB,MANzB,iBAMuCA,EANvC,eAMmDoZ,KAAK7O,QAAQ7L,GAAGsB,MANnE,0CAOaoZ,KAAK7O,QAAQmV,UAAU1f,OACpC,MAEJ,IAAK,KACDoZ,KAAKtO,OAAOqG,MAAZ,eAA4BiI,KAAK7O,QAAQ8Y,KAAKnE,OAAOpd,QAAO,SAACxD,EAAE6R,GAI3D,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ8Y,KAAKrjB,QAC7B1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,mCAMO8a,KAAK7O,QAAQ0W,KAAKjhB,MANzB,iBAMuCoZ,KAAK7O,QAAQ9L,KAAKuB,MANzD,eAMqEA,EANrE,0CAOaoZ,KAAK7O,QAAQmV,UAAU1f,OACpC,MAEJ,IAAK,OACDoZ,KAAKtO,OAAOqG,MAAZ,eAA4BiI,KAAK7O,QAAQ8Y,KAAKnE,OAAOpd,QAAO,SAACxD,EAAE6R,GAI3D,OAHGA,EAAEnQ,QAAUA,IACX1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,mCAMO8a,KAAK7O,QAAQ0W,KAAKjhB,MANzB,iBAMuCoZ,KAAK7O,QAAQ9L,KAAKuB,MANzD,eAMqEoZ,KAAK7O,QAAQ7L,GAAGsB,MANrF,0CAOaoZ,KAAK7O,QAAQmV,UAAU1f,OACpC,MAEJ,IAAK,YACDoZ,KAAKtO,OAAOqG,MAAZ,eAA4BiI,KAAK7O,QAAQ8Y,KAAKnE,OAAOpd,QAAO,SAACxD,EAAE6R,GAI3D,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ8Y,KAAKrjB,QAC7B1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,mCAMO8a,KAAK7O,QAAQ0W,KAAKjhB,MANzB,iBAMuCoZ,KAAK7O,QAAQ9L,KAAKuB,MANzD,eAMqEoZ,KAAK7O,QAAQ7L,GAAGsB,MANrF,0CAOaA,M,yBAUzB,SAAY8jB,GAaR,OAXIA,EAAKxM,SAAS,OAAkB,SAATwM,EACfA,EAAKC,UAAU,EAAED,EAAKtlB,OAAS,GAEnCslB,EAAKxM,SAAS,OAAkB,SAATwM,EACnB,GAAKE,SAASF,EAAKC,UAAU,EAAED,EAAKtlB,OAAS,IAExC,SAATslB,EACI,EAEA,K,oBAKhB,SAAOzkB,GAAK,IAAD,OAEH6gB,EAAU,CACVna,KAAM,oBACNyU,SAAW,IAGXmG,EAAe,CACf5a,KAAK,UACL7G,KAAM,CACF6G,KAAM,UACNoV,WAAY,GACZsI,SAAW,CACP1d,KAAM,aACNwd,YAAaC,GAAUhJ,SAAS,GAAGiJ,SAASF,YAAY,MAK9DpX,EAAS,GAEfiN,KAAKla,KAAKA,KAAKoD,SAAQ,SAAAxC,GACvB,EAAKZ,KAAK4gB,YAAY,GAAGC,aAAazd,SAAQ,SAAA/C,GACtCA,EAAKS,QAAUF,EAAC,cACZqM,EAAOrM,EAAC,aAAmBP,EAAK0P,aAK5CiR,EAAQ1F,SAAWpB,KAAKla,KAAKA,KAAKG,KAAI,SAAAE,GAElC,MAAO,CACHwG,KAAM,UACNzG,GAAGC,EAAI,GACP4b,WAAY,CACR,KAAO5b,EAAI,SACX,OAASA,EAAI,aAGjBkkB,SAAU,CACN1d,KAAK,QACL,YAAe,CAACxG,EAAI,IAAQA,EAAI,UAMxCF,EAAIua,UAAU,aAAgBva,EAAIya,SAAS,cAC3Cza,EAAIwa,UAAU,WAAY8G,GAC1BthB,EAAIgO,SAAS,CACT/N,GAAI,WACJqa,OAAO,WACP5T,KAAM,OACN8a,MAAM,CACF,aAAc,QACd,aAAa,EACb,iBAAiB,CAAC,GAAG,OAI9BxhB,EAAIua,UAAU,kBACbva,EAAIua,UAAU,iBAAiBgH,QAAQV,GAGxC7gB,EAAIua,UAAU,kBAAoBva,EAAIya,SAAS,kBAC9Cza,EAAI6iB,iBACA,gBACA,eACA,CAAC,MAAO,CAAC,YAAa,CAAC,MAAO,WAAY,CAAC,UAAU/V,S,GArU/BgN,I,oBCFlC2F,GAAQC,EAAQ,KAGdkF,G,kDACF,WAAYje,GAAQ,IAAD,8BACf,cAAMA,IAIV4R,YAAc,EAAK/W,OALA,EAMnBnB,KAAO,mBANY,EAOnB6K,QAAU,CACN0U,QAAS,CACLvf,KAAM,UACNqG,KAAM,WACNmZ,OAAQ,CACJ,CAACxf,KAAM,oBAAqBM,MAAO,MACnC,CAACN,KAAM,oBAAqBM,MAAO,QAEvCA,MAAO,EAAKa,QAAU,KACtBsM,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtB4K,OAAO,GAEXsZ,OAAQ,CACJxkB,KAAM,SACNqG,KAAM,WACNmZ,OAAQiF,GAAQtnB,QAAO,SAAAiD,GAAC,OAAe,OAAXA,EAAEJ,QAC9BM,MAAO,aACPmN,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtB4K,OAAO,GAEXqW,KAAM,CACFvhB,KAAM,OACNqG,KAAM,WACNmZ,OAAQ,CAAC,aAAa,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAC9Ilf,MAAO,cAEXsf,aAAc,CACV5f,KAAM,eACNqG,KAAM,WACNmZ,OAAQ,CACJ,CAACxf,KAAK,aAAaM,MAAM,cACzB,CAACN,KAAM,QAASM,MAAO,KACvB,CAACN,KAAM,UAAWM,MAAO,KACzB,CAACN,KAAM,QAASM,MAAO,KACvB,CAACN,KAAM,UAAWM,MAAO,KACzB,CAACN,KAAM,OAAQM,MAAO,KACtB,CAACN,KAAM,QAASM,MAAO,KACvB,CAACN,KAAM,aAAcM,MAAO,KAC5B,CAACN,KAAM,OAAQM,MAAO,KACtB,CAACN,KAAM,MAAOM,MAAO,MACrB,CAACN,KAAM,MAAOM,MAAO,KACrB,CAACN,KAAM,UAAWM,MAAO,OAE7BA,MAAO,aACPmN,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtB4K,OAAO,GAEXwZ,aAAc,CACV1kB,KAAM,eACNqG,KAAM,WACNmZ,OAAQ,CACJ,CAACxf,KAAK,aAAaM,MAAM,cACzB,CAACN,KAAM,cAAeM,MAAO,KAC7B,CAACN,KAAM,SAAUM,MAAO,MAE5BA,MAAO,aACPmN,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtB4K,OAAO,GAEX6V,QAAS,CACL/gB,KAAM,UACNqG,KAAM,WACNmZ,OAAQmF,GACRrkB,MAAO,aACPmN,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEE,OACtB4K,OAAO,IA7EI,EAgFnBE,OAAS,CACL/E,KAAM,UACNmZ,OAAQ,GACRvT,MAAO,GACPpL,OAAQ,EACR0H,MAAO,IACPyX,UAAW,WACXriB,MAAK,EACL8T,MAAM,IAxFS,EA0FnBzP,QAAU,CACN,CACIpC,GAAI,iBACJqa,OAAQ,CACJ5T,KAAM,UACN7G,KAAM,CACF6G,KAAM,oBACNyU,SAAU,MAItB,CACIlb,GAAI,eACJqa,OAAQ,CACJ5T,KAAM,UACN7G,KAAM,CACF6G,KAAM,oBACNyU,SAAU,MAItB,CACIlb,GAAI,kBACJqa,OAAQ,CACJ5T,KAAM,UACN7G,KAAM,CACF6G,KAAM,oBACNyU,SAAU,OArHP,EA0HnBvB,QAAU,CACNrM,OAAQ,CAAC,eAAgB,kBAAmB,WAAY,iBAAkB,4BAA6B,UAAW,oBAAqB,YAAa,4BAA6B,eAAgB,kBACjM6N,SAAU,SAAChQ,EAAS+P,EAAUzK,GAC1B,IAAMuL,EAAUd,EAAS1Y,QAAO,SAACxD,EAAG6R,GAahC,OAZI,EAAKjR,KAAKA,KAAK4C,QAAO,SAAC6d,EAAKC,GAU5B,OARIA,EAAI,SAAezP,EAAC,WAAD,QAChByP,EAAI,QAAczP,EAAC,WAAD,cAClByP,EAAI,eAAqBzP,EAAC,WAAD,cACzByP,EAAI,UAAgBzP,EAAC,WAAD,SACpByP,EAAI,cAAoBzP,EAAC,WAAD,cAE3BwP,EAAMC,GAEHD,OAGZ,IAEH,MAAO,CACH,CAAC,cAAerE,EAAO,QACvB,CAAC,QAAS,EAAK/Q,QAAQ0W,KAAKjhB,OAC5B,CAAC,gBAAiBsb,EAAO,cACzB,CAAC,WAAYA,EAAO,SACpB,CAAC,gBAAiBA,EAAO,OACzB,CAAC,QAASA,EAAO,gBACjB,CAAC,eAAgBA,EAAO,YAAgBxY,kBAlJhD,EAAKjC,OAASmF,EAAMnF,OAFL,E,wCA8JnB,SAAKxB,GAAM,IAAD,OAEA6D,EAAG,UAAMqb,GAAN,kBAAoBnF,KAAK7O,QAAQ0U,QAAQjf,MAAzC,iBAIH6f,EAAM,iCAA2D,eAA9BzG,KAAK7O,QAAQ2Z,OAAOlkB,MAAwB,GAAGoZ,KAAK7O,QAAQ2Z,OAAOlkB,MAAhG,yBAAkJ,eAA5BoZ,KAAK7O,QAAQ0W,KAAKjhB,MAAwB,GAAGoZ,KAAK7O,QAAQ0W,KAAKjhB,MAArL,uBAHO,GAGP,uBAFO,GAEP,kBAA0R,eAApCoZ,KAAK7O,QAAQ+U,aAAatf,MAAwB,GAAGoZ,KAAK7O,QAAQ+U,aAAatf,MAArU,yBAA+X,eAApCoZ,KAAK7O,QAAQ6Z,aAAapkB,MAAwB,GAAGoZ,KAAK7O,QAAQ6Z,aAAapkB,MAA1a,oBAA0d,eAA/BoZ,KAAK7O,QAAQkW,QAAQzgB,MAAwB,GAAGoZ,KAAK7O,QAAQkW,QAAQzgB,MAAhgB,kBACZ,OAAOwe,GAAQtb,EAAM2c,GAChBzK,MAAK,SAAA1Q,GACF,EAAKxF,KAAOwF,EACZ,EAAKoG,OAAOoU,OAAS,EAAKhgB,KAAK4gB,YAAY,GAAGC,aAAa1gB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SACtE,EAAK8K,OAAOa,MAAQ,EAAKzM,KAAK4gB,YAAY,GAAGC,aAAa1gB,KAAI,SAAAS,GAAC,OAAIA,EAAEmP,SACrE,EAAKnE,OAAOqG,MAAZ,UAAuB,EAAK5G,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,kCAMmC,eAA5B,EAAKiM,QAAQ0W,KAAKjhB,MAAyB,MAAM,EAAKuK,QAAQ0W,KAAKjhB,MAN1E,uCAOwC,eAA9B,EAAKuK,QAAQ2Z,OAAOlkB,MAAwB,MAAM,EAAKuK,QAAQ2Z,OAAOlkB,MAPhF,4CAQgB,EAAKuK,QAAQ+U,aAAaJ,OAAOpd,QAAO,SAACxD,EAAE6R,GAIvD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ+U,aAAatf,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAbF,6CAciB,EAAKiM,QAAQ6Z,aAAalF,OAAOpd,QAAO,SAACxD,EAAE6R,GAIxD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ6Z,aAAapkB,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAnBF,sCAoBU,EAAKiM,QAAQkW,QAAQvB,OAAOpd,QAAO,SAACxD,EAAE6R,GAI5C,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQkW,QAAQzgB,QAChC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAzBF,2B,uBA8BZ,WAAa,IAAD,OACF4E,EAAG,UAAMqb,GAAN,kBAAoBnF,KAAK7O,QAAQ0U,QAAQjf,MAAzC,iBAGH6f,EAAM,iCAA2D,eAA9BzG,KAAK7O,QAAQ2Z,OAAOlkB,MAAwB,GAAGoZ,KAAK7O,QAAQ2Z,OAAOlkB,MAAhG,yBAAkJ,eAA5BoZ,KAAK7O,QAAQ0W,KAAKjhB,MAAwB,GAAGoZ,KAAK7O,QAAQ0W,KAAKjhB,MAArL,uBAFO,GAEP,uBADO,GACP,kBAA0R,eAApCoZ,KAAK7O,QAAQ+U,aAAatf,MAAwB,GAAGoZ,KAAK7O,QAAQ+U,aAAatf,MAArU,yBAA+X,eAApCoZ,KAAK7O,QAAQ6Z,aAAapkB,MAAwB,GAAGoZ,KAAK7O,QAAQ6Z,aAAapkB,MAA1a,oBAA0d,eAA/BoZ,KAAK7O,QAAQkW,QAAQzgB,MAAwB,GAAGoZ,KAAK7O,QAAQkW,QAAQzgB,MAAhgB,kBAEZ,OAAOwe,GAAQtb,EAAM2c,GAChBzK,MAAK,SAAA1Q,GACF,EAAKxF,KAAOwF,EACZ,EAAKoG,OAAOoU,OAAS,EAAKhgB,KAAK4gB,YAAY,GAAGC,aAAa1gB,KAAI,SAAAS,GAAC,OAAIA,EAAEE,SACtE,EAAK8K,OAAOa,MAAQ,EAAKzM,KAAK4gB,YAAY,GAAGC,aAAa1gB,KAAI,SAAAS,GAAC,OAAIA,EAAEmP,SACrE,EAAKnE,OAAOqG,MAAZ,UAAuB,EAAK5G,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,mCAMoC,eAA5B,EAAKiM,QAAQ0W,KAAKjhB,MAAyB,MAAM,EAAKuK,QAAQ0W,KAAKjhB,MAN3E,uCAOwC,eAA9B,EAAKuK,QAAQ2Z,OAAOlkB,MAAwB,MAAM,EAAKuK,QAAQ2Z,OAAOlkB,MAPhF,4CAQgB,EAAKuK,QAAQ+U,aAAaJ,OAAOpd,QAAO,SAACxD,EAAE6R,GAIvD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ+U,aAAatf,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAbF,6CAciB,EAAKiM,QAAQ6Z,aAAalF,OAAOpd,QAAO,SAACxD,EAAE6R,GAIxD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ6Z,aAAapkB,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAnBF,sCAoBU,EAAKiM,QAAQkW,QAAQvB,OAAOpd,QAAO,SAACxD,EAAE6R,GAI5C,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQkW,QAAQzgB,QAChC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAzBF,2B,4BA8BZ,SAAeyW,EAAW/U,EAAMggB,GAAU,IAAD,OAErC,OAAQjL,GACJ,IAAK,UACDqE,KAAKtO,OAAOqG,MAAZ,UAAuBiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHGA,EAAEnQ,QAAUA,IACX1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,mCAMoC,eAA5B8a,KAAK7O,QAAQ0W,KAAKjhB,MAAyB,MAAMoZ,KAAK7O,QAAQ0W,KAAKjhB,MAN3E,uCAOwC,eAA9BoZ,KAAK7O,QAAQ2Z,OAAOlkB,MAAwB,MAAMoZ,KAAK7O,QAAQ2Z,OAAOlkB,MAPhF,4CAQgBoZ,KAAK7O,QAAQ+U,aAAaJ,OAAOpd,QAAO,SAACxD,EAAE6R,GAIvD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ+U,aAAatf,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAbF,6CAciB8a,KAAK7O,QAAQ6Z,aAAalF,OAAOpd,QAAO,SAACxD,EAAE6R,GAIxD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ6Z,aAAapkB,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAnBF,sCAoBU8a,KAAK7O,QAAQkW,QAAQvB,OAAOpd,QAAO,SAACxD,EAAE6R,GAI5C,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQkW,QAAQzgB,QAChC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAzBF,sBA2BA,MAEJ,IAAK,OACD8a,KAAKtO,OAAOqG,MAAZ,UAAuBiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,mCAMkB,eAAV0B,EAAwB,MAAMA,EANtC,uCAOwC,eAA9BoZ,KAAK7O,QAAQ2Z,OAAOlkB,MAAwB,MAAMoZ,KAAK7O,QAAQ2Z,OAAOlkB,MAPhF,4CAQgBoZ,KAAK7O,QAAQ+U,aAAaJ,OAAOpd,QAAO,SAACxD,EAAE6R,GAIvD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ+U,aAAatf,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAbF,6CAciB8a,KAAK7O,QAAQ6Z,aAAalF,OAAOpd,QAAO,SAACxD,EAAE6R,GAIxD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ6Z,aAAapkB,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAnBF,sCAoBU8a,KAAK7O,QAAQkW,QAAQvB,OAAOpd,QAAO,SAACxD,EAAE6R,GAI5C,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQkW,QAAQzgB,QAChC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAzBF,sBA2BA,MAEJ,IAAK,SACD8a,KAAKtO,OAAOqG,MAAZ,UAAuBiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,mCAMoC,eAA5B8a,KAAK7O,QAAQ0W,KAAKjhB,MAAyB,MAAMoZ,KAAK7O,QAAQ0W,KAAKjhB,MAN3E,uCAOoB,eAAVA,EAAwB,MAAMA,EAPxC,4CAQgBoZ,KAAK7O,QAAQ+U,aAAaJ,OAAOpd,QAAO,SAACxD,EAAE6R,GAIvD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ+U,aAAatf,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAbF,6CAciB8a,KAAK7O,QAAQ6Z,aAAalF,OAAOpd,QAAO,SAACxD,EAAE6R,GAIxD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ6Z,aAAapkB,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAnBF,sCAoBU8a,KAAK7O,QAAQkW,QAAQvB,OAAOpd,QAAO,SAACxD,EAAE6R,GAI5C,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQkW,QAAQzgB,QAChC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAzBF,sBA2BA,MAEJ,IAAK,eACD8a,KAAKtO,OAAOqG,MAAZ,UAAuBiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,mCAMoC,eAA5B8a,KAAK7O,QAAQ0W,KAAKjhB,MAAyB,MAAMoZ,KAAK7O,QAAQ0W,KAAKjhB,MAN3E,uCAOwC,eAA9BoZ,KAAK7O,QAAQ2Z,OAAOlkB,MAAwB,MAAMoZ,KAAK7O,QAAQ2Z,OAAOlkB,MAPhF,4CAQgBoZ,KAAK7O,QAAQ+U,aAAaJ,OAAOpd,QAAO,SAACxD,EAAE6R,GAIvD,OAHGA,EAAEnQ,QAAUA,IACX1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAbF,6CAciB8a,KAAK7O,QAAQ6Z,aAAalF,OAAOpd,QAAO,SAACxD,EAAE6R,GAIxD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ6Z,aAAapkB,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAnBF,sCAoBU8a,KAAK7O,QAAQkW,QAAQvB,OAAOpd,QAAO,SAACxD,EAAE6R,GAI5C,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQkW,QAAQzgB,QAChC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAzBF,sBA2BA,MAEJ,IAAK,eACD8a,KAAKtO,OAAOqG,MAAZ,UAAuBiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,mCAMoC,eAA5B8a,KAAK7O,QAAQ0W,KAAKjhB,MAAyB,MAAMoZ,KAAK7O,QAAQ0W,KAAKjhB,MAN3E,uCAOwC,eAA9BoZ,KAAK7O,QAAQ2Z,OAAOlkB,MAAwB,MAAMoZ,KAAK7O,QAAQ2Z,OAAOlkB,MAPhF,4CAQgBoZ,KAAK7O,QAAQ+U,aAAaJ,OAAOpd,QAAO,SAACxD,EAAE6R,GAIvD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ+U,aAAatf,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAbF,6CAciB8a,KAAK7O,QAAQ6Z,aAAalF,OAAOpd,QAAO,SAACxD,EAAE6R,GAIxD,OAHGA,EAAEnQ,QAAUA,IACX1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAnBF,sCAoBU8a,KAAK7O,QAAQkW,QAAQvB,OAAOpd,QAAO,SAACxD,EAAE6R,GAI5C,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQkW,QAAQzgB,QAChC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAzBF,sBA2BA,MAEJ,IAAK,UACD8a,KAAKtO,OAAOqG,MAAZ,UAAuBiI,KAAK7O,QAAQ0U,QAAQC,OAAOpd,QAAO,SAACxD,EAAE6R,GAIzD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ0U,QAAQjf,QAChC1B,EAAI6R,EAAEzQ,MAEHpB,IACT,IALF,mCAMoC,eAA5B8a,KAAK7O,QAAQ0W,KAAKjhB,MAAyB,MAAMoZ,KAAK7O,QAAQ0W,KAAKjhB,MAN3E,uCAOwC,eAA9BoZ,KAAK7O,QAAQ2Z,OAAOlkB,MAAwB,MAAMoZ,KAAK7O,QAAQ2Z,OAAOlkB,MAPhF,4CAQgBoZ,KAAK7O,QAAQ+U,aAAaJ,OAAOpd,QAAO,SAACxD,EAAE6R,GAIvD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ+U,aAAatf,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAbF,6CAciB8a,KAAK7O,QAAQ6Z,aAAalF,OAAOpd,QAAO,SAACxD,EAAE6R,GAIxD,OAHGA,EAAEnQ,QAAU,EAAKuK,QAAQ6Z,aAAapkB,QACrC1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAnBF,sCAoBU8a,KAAK7O,QAAQkW,QAAQvB,OAAOpd,QAAO,SAACxD,EAAE6R,GAI5C,OAHGA,EAAEnQ,QAAUA,IACX1B,EAAe,eAAX6R,EAAEzQ,KAAwB,MAAOyQ,EAAEzQ,MAEpCpB,IACT,IAzBF,yB,sBAoCZ,SAASmP,GAELA,EAAUnC,YAAY,YACtBmC,EAAUnC,YAAY,kBACtBmC,EAAUnC,YAAY,6BACtBmC,EAAUnC,YAAY,WACtBmC,EAAUnC,YAAY,qBACtBmC,EAAUnC,YAAY,aACtBmC,EAAUnC,YAAY,6BACtBmC,EAAUnC,YAAY,gBACtBmC,EAAUnC,YAAY,kBACtBmC,EAAUnC,YAAY,mBACtBmC,EAAUnC,YAAY,gBACtBmC,EAAUwS,aAAa,kBACvBxS,EAAUwS,aAAa,mBACvBxS,EAAUwS,aAAa,kB,oBAG3B,SAAO5gB,GAAM,IAAD,OAEJ6gB,EAAU,CACVna,KAAM,oBACNyU,SAAU,IAGR2F,EAAc,CAChB,KAAQ,OACR,QAAW,aACX,MAAS,wBACT,IAAO,MACP,KAAQ,gBACR,MAAS,QACT,QAAW,wBACX,WAAc,WACd,MAAS,cAIbD,EAAQ1F,SAAWpB,KAAKla,KAAKA,KAAKG,KAAI,SAACS,EAAGN,GAEtC,MAAO,CACHuG,KAAM,UACNzG,GAAIE,EACJ2b,WAAY,CACR,YAAerb,EAAC,YAChB,eAAkBA,EAAC,eACnB,aAAgBA,EAAC,aACjB,aAAgBA,EAAC,MACjB,OAAUA,EAAC,OACX,QAAWA,EAAC,QACZ,KAAQqgB,EAAYrgB,EAAC,QAEzB2jB,SAAU3E,GAAMhf,EAAC,eAIzB,IAAM4gB,EACF,CACI3a,KAAM,oBACNyU,SAAU0F,EAAQ1F,SAAS3d,QAAO,SAAAiD,GAC9B,SAAIA,EAAC,UAAuC,UAAvBA,EAAC,SAAaiG,OACxBjG,MAMjBwkB,EAAkB,CACpBve,KAAM,oBACNyU,SAAU0F,EAAQ1F,SAAS3d,QAAO,SAAAiD,GAC9B,SAAIA,EAAC,UAAuC,iBAAvBA,EAAC,SAAaiG,OACxBjG,MAMnBwkB,EAAgB9J,SAASlY,SAAQ,SAAAgZ,GAE7BA,EAAQH,WAAR,MAA8B,EAAKjc,KAAK4gB,YAAY,GAAGC,aAAaje,QAAO,SAACxD,EAAE6R,GAI1E,OAHGA,EAAEoU,QAAUjJ,EAAQH,WAAWmE,eAC9BhhB,EAAI6R,EAAElB,OAEH3Q,IACT,OAGN,IAAMqiB,EAAe,CACjB5a,KAAM,oBACNyU,SAAU0F,EAAQ1F,SAAS3d,QAAO,SAAAiD,GAC9B,SAAIA,EAAC,UAAuC,oBAAvBA,EAAC,SAAaiG,OACxBjG,MAOnB6gB,EAAanG,SAASlY,SAAQ,SAAAgZ,GAE1BA,EAAQH,WAAR,MAA8B,EAAKjc,KAAK4gB,YAAY,GAAGC,aAAaje,QAAO,SAACxD,EAAE6R,GAI1E,OAHGA,EAAEoU,QAAUjJ,EAAQH,WAAWmE,eAC9BhhB,EAAI6R,EAAElB,OAEH3Q,IACT,OAGFe,EAAIua,UAAU,iBACdva,EAAIua,UAAU,gBAAgBgH,QAAQD,GAGrCthB,EAAIya,SAAS,iBACdza,EAAIgO,SAAS,CACT/N,GAAI,eACJqa,OAAQ,eACR5T,KAAM,OACN8a,MAAO,CACH,aAAc,CACV9a,KAAK,WACL+U,SAAS,SAEb,aAAc,KAMtBzb,EAAIua,UAAU,oBACdva,EAAIua,UAAU,mBAAmBgH,QAAQ0D,GAGxCjlB,EAAIya,SAAS,oBACdza,EAAIgO,SAAS,CACT/N,GAAI,kBACJqa,OAAQ,kBACR5T,KAAM,OACN8a,MAAO,CACH,aAAc,CACV9a,KAAK,WACL+U,SAAS,SAEb,eAAgB,CACZ,cACA,CAAC,UACD,CAAC,QACD,EAAG,GACH,GAAI,OAKhBzb,EAAIua,UAAU,mBACdva,EAAIua,UAAU,kBAAkBgH,QAAQF,GAE5CR,EAAQ1F,SAASlY,SAAQ,SAAAgZ,GACrB,GAAIA,EAAQH,WAAWnW,KAAM,CACzB,IAAI8b,EAASxF,EAAQH,WAAWnW,KAC5B+b,EAAU,OAASD,EAClBzhB,EAAIya,SAASiH,IACd1hB,EAAIgO,SAAS,CACT,GAAM0T,EACN,KAAQ,SACR,OAAU,iBACV,OAAU,CACN,aAAcD,EACd,sBAAsB,GAE1B,OAAU,CAAC,KAAM,OAAQA,a,GAxlBf3H,I,8BCD5BqL,GAAc,G,YAETze,GACV0e,WAAYC,aAAa3e,GAAMzD,SAAQ,SAAA5C,GACtC,IAAMilB,EAAQF,WAAY/kB,GAC1B,IAAK,IAAMlB,KAAUmmB,EACdnmB,KAAUgmB,KACfA,GAAYhmB,GAAU,IAEvBgmB,GAAYhmB,GAAQ2E,KAAK,CACxB4C,KAAK,GAAD,OAAMA,EAAK,GAAG6e,eAAd,OAAgC7e,EAAK+M,MAAM,IAC/CpT,OACAmlB,SAAU,cACV1Y,OAAQwY,EAAMnmB,SAXlB,IAAK,IAAMuH,MAAQ0e,WAAYC,aAAe,GAAnC3e,IAkBXhH,QAAQC,IAAI,cAAewlB,IAEpB,IAAMtD,GAAgB,SAACtO,EAAMlT,GAAP,OAC5BnB,IAAIimB,GAAa,CAAC5R,GAAO,IACvB9Q,QAAO,SAACxD,EAAG6R,GAAJ,OAAUA,EAAEzQ,OAASA,EAAOyQ,EAAEhE,OAAS7N,IAAG,IAAIwU,S,IAE/BgS,WAAOC,IAAT,gP,aCdJ5lB,OAAOC,KAAKolB,IAAa5f,MAAK,SAACtG,EAAGmG,GAAJ,OAAWnG,GAAKmG,K,mBCnB3DugB,I,OAAgB,CACpB,CAAE1lB,GAAI,SACJqa,OAAQ,CACN5T,KAAM,SACN7C,IAAK,kDAKL+hB,GAAc,CAClB,aAAc,OACd,aAAc,CACZ,cACA,CAAC,UACD,CAAC,QACD,EACA,CACE,QACA,CAAC,MAAO,KACR,CAAC,EAAG,GACJ,GACA,GAEF,GACA,CACE,QACA,CAAC,MAAO,KACR,CAAC,EAAG,GACJ,IACA,GAEF,GACA,CACE,QACA,CAAC,MAAO,KACR,CAAC,EAAG,GACJ,EACA,IAGJ,eAAgB,CACd,OACA,CAAC,UAAW,CAAC,gBAAiB,UAAU,GACxC,GACA,GAEF,cAAe,CACbC,KAAM,IACNC,MAAO,CAAC,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,GAAI,GAAI,CAAC,GAAI,MAIpCC,GAAe,CAAC,OAAO,OAAO,OAAO,OAAO,OAAO,QACtD/lB,KAAI,SAAA4hB,GACH,MAAO,CACL3hB,GAAG,OAAD,OAAS2hB,GACXlb,KAAM,OACN4T,OAAQ,SACRI,QAAS,iBACT,eAAe,UAAf,OAA0BkH,GAC1B/c,OAAQ,CACN,WAAc,UACd,YAAa,QACb,WAAY,SAEd2c,MAAOoE,OCjEPI,GAAwB,CAC5B,CAAE/lB,GAAI,kBACJqa,OAAQ,CACN5T,KAAM,SACN7C,IAAK,8DCFLqH,GAAU,CACd+a,UAAW,CACT5lB,KAAM,YACNqG,KAAM,SACNmZ,OAAQ,CACN,CACExf,KAAM,MACNM,MAAO,CAAC,QAAS,QAAS,QAAS,QAAS,QAAQ,QAAS,QAAS,QAAQ,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAQ,QAAS,QAAQ,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,UAEpR,CACEN,KAAM,iBACNM,MAAO,CAAC,QAAS,QAAS,QAAS,QAAS,QAAQ,QAAS,QAAS,QAAQ,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAQ,QAAS,QAAQ,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,UAEpR,CACEN,KAAM,cACNM,MAAQ,CAAC,QAAS,QAAS,UAE7B,CACEN,KAAM,cACNM,MAAQ,CAAC,QAAS,UAEpB,CACEN,KAAM,aACNM,MAAQ,CAAC,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,UAEjE,CACEN,KAAM,mBACNM,MAAQ,CAAC,QAAS,QAAS,UAE7B,CACEN,KAAM,aACNM,MAAO,CAAC,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,UAC7H,CACAN,KAAM,gBACNM,MAAQ,CAAC,QAAS,QAAS,QAAS,QAAS,WAGjDA,MAAO,MACPoN,YAAY,EACZD,SAAU,SAAArN,GAAC,OAAIA,EAAEJ,MACjByf,cAAe,SAAArf,GAAC,OAAIA,EAAEJ,MACtBkL,OAAO,GAETqW,KAAM,CACJvhB,KAAM,OACNqG,KAAM,SACN6E,OAAO,EACPsU,OAAQ,CAAC,KAAM,KAAM,KAAM,KAAK,KAAM,MACtClf,MAAO,MAETulB,MAAO,CACL7lB,KAAM,QACNqG,KAAM,SACN6E,OAAO,EACPsU,OAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,IACjClf,MAAO,GAETwlB,KAAM,CACJ9lB,KAAM,OACNqG,KAAM,SACN6E,OAAO,EACPsU,OAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IACpElf,MAAO,IAETylB,IAAK,CACH/lB,KAAM,cACNqG,KAAM,SACN6E,OAAO,EACPsU,OAAQ,CAAC,SAAS,SAAS,UAAU,YAAY,WAAW,SAAS,YACrElf,MAAO,YAET0lB,SAAU,CACRhmB,KAAM,gBACNqG,KAAM,SACN6E,OAAO,EACPsU,OAAQ,CAAC,eAAgB,sBAAuB,2BAChDlf,MAAO,iBAOL8L,GAAe,SAACvB,EAASO,KAkBzB6a,GAAiB,SAAC/Y,EAAQrC,EAASkD,GAEvC,OAAOb,EACJvN,KAAI,SAAAumB,GAAC,OAAIA,EAAEtmB,MACXzC,QAAO,SAAA+oB,GAAC,MAAU,0BAANA,KACZvmB,KAAI,SAAAumB,GACH,IAAIC,EAAS,KACT9f,EAAO6f,EAAEhjB,MAAM,KAAK,GACpBqe,EAAO2E,EAAEhjB,MAAM,KAAK,GACpBkjB,EAAYvb,EAAQ0W,KAAKjhB,MAW7B,MAVY,QAAT+F,IAAmBkb,KAAU6E,GAC9BD,EAASD,EACTnY,EAAU2Q,kBACRwH,EAAE,aAAa,YAEA,QAAT7f,GACR0H,EAAU2Q,kBACRwH,EAAE,aAAa,QAGZC,KACNhpB,QAAO,SAAAiD,GAAC,OAAIA,MCpFnBf,QAAQC,IAAI,YAAakiB,GAAc,EAAG,UAAWA,GAAc,EAAG,UAAU1K,WAChF,IAMMuP,G,4MACJrmB,KAAO,gB,EACPgC,Q,sBACKsjB,I,YACAK,I,CACH,CAAE/lB,GAAI,wBACFqa,OAAQ,CACN5T,KAAM,UACN7G,KAAM,CACJ6G,KAAM,oBACNyU,SAAU,Q,EAKpB5N,O,sBAEKwY,I,CAEH,CAAE9lB,GAAI,iBACJyG,KAAM,OACN4T,OAAQ,wBACRkH,MAAO,CACL,aAAc,W,EAKpBvQ,UAAY,CACV,CACEzD,UAAW,cAAE1C,MAAF,OACT,qBAAKlN,UAAU,0CAIjBI,MAAM,I,EAIVmO,QAAU,G,EACVjB,QAAUA,G,EACVuB,aAAeA,G,EACf6Z,eAAiBA,G,EACjB7a,OAAS,CACP/E,KAAM,WACNmZ,OAAQ,CAAC,GAAG,GAAG,GAAG,GAAG,IACrBvT,MAAO,CAAC,eAAgB,iBAAiB,iBAAiB,iBAAiB,eAAe,iBAAiB,gBAC3G0W,OAAQ,OACRhlB,MAAM,EACN8T,MAAO,YACL,GADoB,EAAZhH,MAER,OAAQ,sBAAKlN,UAAU,gBAAf,UACN,4CAAe,EAAKsN,QAAQmb,SAAS1lB,SACrC,sBAAK/C,UAAU,qBAAf,cAAsC,EAAKsN,QAAQgb,MAAMvlB,MAAzD,MAAmE,EAAKuK,QAAQ0W,KAAKjhB,MAArF,IAA6F,EAAKuK,QAAQib,KAAKxlB,MAA/G,SAA4H,EAAKuK,QAAQib,KAAKxlB,MAAM,EAApJ,OAA2J,EAAKuK,QAAQkb,IAAIzlB,c,EAIlLiZ,QAAU,CACRrM,OAAO,YAAKwY,GAAa/lB,KAAI,SAAAS,GAAC,OAAIA,EAAER,OACpCyb,WAAY,SAAS5Q,EAAOqQ,EAAUD,EAAOyL,GAEzC,IACEhmB,EAAQzB,IAAIic,EAAU,CAAC,EAAG,aADhB,OACoC,QACxCjc,IAAIic,EAAU,CAAC,EAAG,aAAc,OAAQ,QAChD,MAAO,CAAC,KAHI,MAGOxa,IAEvBya,SAAU,SAAChQ,EAAS+P,EAAUzK,GAC5B,IAAIuL,EAAUd,EAAS,GAKnBtb,GAFIX,IAAIic,EAAU,CAAC,EAAG,aADb,OACiC,QAEtC,YACHrb,OAAOC,KAAKkc,EAAQH,YAAY9b,KAAI,SAAAiC,GAAC,MAAG,CAACA,EAAGga,EAAQH,WAAW7Z,SAGpE,OADApC,EAAKiE,KAAK,CAAC,aAAcsH,IAClBvL,I,EAaXO,MAAQ,CACNwmB,cAAe,KACf7T,KAAM,IACNrD,SAAU,EACVmX,QAAS,GACTC,YAAa,GACbC,cAAe,GACfC,cAAe,GACfC,YAAa,GACbvZ,aAAc,I,EAwEhBwZ,iBAAmB,a,0DApEnB,WACE,OAAO9pB,OAAO+pB,aACZC,KAAK3H,MAAMriB,OAAO+pB,aAAaE,QAAQ,2BAA6B,MAClE,K,gCAGN,WAAgE,IAA7CC,EAA4C,uDAA9BvN,KAAK7O,QAAQ+a,UAAUtlB,MAClDvD,OAAO+pB,eACLG,EAAYnoB,OACd/B,OAAO+pB,aAAaI,QAAQ,yBAA0BH,KAAKI,UAAUF,IAGrElqB,OAAO+pB,aAAaM,WAAW,6B,6BAOrC,WACE,GAAK1N,KAAK3L,UAAV,CAEA,IAAM2K,EAASgB,KAAK2N,YAIpB,GAFAhoB,QAAQC,IAAI,aAAcoZ,IAEtBA,EAAO4O,UAAX,CAEA,IAAM/Z,EAAU,CACdxF,QAAS,CACPf,IAAK,GACLugB,MAAO,IACPC,OAAQ,GACRjd,KAAM,KAERkd,QAAS,EACTC,MAAO,EACPC,SAAU,KAGZpa,EAAQqa,OAAS,CACkC,IAAhDra,EAAQxF,QAAQwC,KAAOgD,EAAQxF,QAAQwf,OACS,IAAhDha,EAAQxF,QAAQf,IAAMuG,EAAQxF,QAAQyf,SAGzC,IAAMK,EAAKnO,KAAK3L,UAAU5F,UACxB2f,EAAKD,EAAGzX,QAAQsI,EAAOqP,gBACvBC,EAAKH,EAAGzX,QAAQsI,EAAOuP,gBACvB/U,EAAO8U,EAAGE,IAAIJ,GAEVK,GAAUN,EAAGtf,OAASgF,EAAQxF,QAAQwC,KAAOgD,EAAQxF,QAAQwf,QAAUrU,EAAKxD,EAChF0Y,GAAUP,EAAGhnB,QAAU0M,EAAQxF,QAAQf,IAAMuG,EAAQxF,QAAQyf,SAAWtU,EAAKvD,EAE/EpC,EAAQiF,OAASqV,EAAGQ,UAAUP,EAAGQ,IAAIN,GAAI3C,IAAI,IAC7C9X,EAAQmF,KAAO7B,KAAKkM,IAAI8K,EAAGU,UAAUV,EAAGvY,MAAQuB,KAAKkM,IAAIoL,EAAQC,IAAUP,EAAGW,SAE9E9O,KAAK3L,UAAU0a,OAAOlb,O,uBAGxB,WAAa,IAAD,OACNmb,EAAShP,KAAK7O,QAAQ+a,UAAUpG,OAAOriB,QAAO,SAAAiD,GAAC,OAAIA,EAAEJ,OAAS,EAAK6K,QAAQ+a,UAAUtlB,SAAO,GAAGA,MAInG,OAHaoZ,KAAKuN,YACb9pB,QAAO,gBAAGmD,EAAH,EAAGA,MAAH,OAAeooB,EAAO9Q,SAAStX,MAGxC8B,QAAO,SAACxD,EAAG6R,GAAJ,OAAU7R,EAAEqlB,OAAOxT,EAAEiI,UAAS,IAAIrF,IAAS6Q,gB,kBAOvD,SAAKvkB,EAAKjB,GAAS,IAAD,OAEZiqB,EAAS,CAAC,KAAK,KAAK,KAAK,MAC7B,OAAOjqB,EACJG,IACC,CAAC,MAAO8pB,EAAQ,cAGjBjT,MAAK,SAACsJ,GAGL,IAAI4J,EAAM/pB,IAAImgB,EAAI,WAAW,IACvBiI,EAAc4B,KAAQF,EAAOhpB,KAAI,SAAAmpB,GAAC,OAAIF,EAAIE,GAAGC,cAEnD,EAAK9B,YACJA,EAAYtnB,KAAI,SAAAipB,GAAG,MAAK,CACrB5oB,KAAK,GAAD,OAAK4oB,EAAII,QAAQ9D,cAAjB,YAAkC0D,EAAIK,UAC1CA,SAAUL,EAAIK,SACd3oB,MAAOsoB,EAAInH,MACXyH,aAAcN,EAAIM,iBAItB,EAAKC,uB,4BAIX,SAAe9T,EAAYuJ,EAAUtJ,GACnC,OAAQD,GAGN,IAAK,YAEHqE,KAAKyP,gBAAgBvK,GACrBlF,KAAK0P,qBACL,MAEF,QACE/pB,QAAQC,IAAI,qBAAsB+V,M,2BAKxC,SAAcmK,GACZ,OAAG9F,KAAKtO,OAAOa,MAAMnN,OAAS0gB,EAAO1gB,QACnC4a,KAAKtO,OAAOoU,OAAU,IACf,IAET9F,KAAKtO,OAAOoU,OAAS,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,IAEvC9F,KAAKtN,aAAasN,KAAK7O,QAAQ6O,KAAKtO,QAC7Bie,OACJ7J,OAAO9F,KAAKtO,OAAOoU,QACnBvT,MAAMyN,KAAKtO,OAAOa,U,uBAGvB,SAAUvN,GAAS,IAAD,OAEZ6iB,GAAQ7H,KAAK7O,QAAQ0W,KAAKjhB,MAC5BulB,GAASnM,KAAK7O,QAAQgb,MAAMvlB,MAC5BooB,EAAShP,KAAK7O,QAAQ+a,UAAUpG,OAAOriB,QAAO,SAAAiD,GAAC,OAAIA,EAAEJ,OAAS,EAAK6K,QAAQ+a,UAAUtlB,SAAO,GAAGA,MAM7FgpB,EALS5P,KAAKuN,YACb9pB,QAAO,gBAAGmD,EAAH,EAAGA,MAAH,OAAeooB,EAAO9Q,SAAStX,MAInB8B,QAAO,SAACxD,EAAG6R,GAGjC,OAFA7R,EAAE6E,KAAK,CAAC,MAAM,SAAP,UAAmBoiB,EAAnB,YAA4BtE,GAA5B,UAAsC9Q,EAAEwY,SAAxC,YAAoDxY,EAAEnQ,OAAS,SACtE1B,EAAE6E,KAAK,CAAC,MAAOgN,EAAEwY,SAAS7lB,cAAeqN,EAAEnQ,MAAO,aAC3C1B,IACP,IAEF,OAAOF,EAAOG,IAAP,MAAAH,EAAM,YAAQ4qB,M,oBASvB,SAAO3pB,GAAM,IAAD,OAGN4hB,GAAQ7H,KAAK7O,QAAQ0W,KAAKjhB,MAC5BulB,GAASnM,KAAK7O,QAAQgb,MAAMvlB,MAC5BooB,EAAShP,KAAK7O,QAAQ+a,UAAUpG,OAAOriB,QAAO,SAAAiD,GAAC,OAAIA,EAAEJ,OAAS,EAAK6K,QAAQ+a,UAAUtlB,SAAO,GAAGA,MAC/FwlB,EAAOpM,KAAK7O,QAAQib,KAAKxlB,MACzBipB,EAAW7P,KAAKuN,YACb9pB,QAAO,gBAAGmD,EAAH,EAAGA,MAAH,OAAeooB,EAAO9Q,SAAStX,MAE3CoZ,KAAKuM,eACHvM,KAAKxM,OACLwM,KAAK7O,QACL6O,KAAK3L,WAGP,IAAMpP,EAAc+a,KAAKhb,OAAO8qB,WAC5BhqB,EAAO+pB,EAAS5pB,KAAI,SAAAS,GAAC,OAAIvB,IAAIF,EAAa,CAAC,MAAM,SAAP,UAAmBknB,EAAnB,YAA4BtE,GAA5B,UAAsCnhB,EAAE6oB,SAAxC,YAAoD7oB,EAAEE,OAAS,OAAO,SAAS,OAC1H8B,QAAO,SAACC,EAAIjC,GACX,OAAO,2BAAIiC,GAAQjC,KAClB,IAIDof,EAAS/f,OAAOqL,OAAOtL,GAAMG,KAAI,SAAAS,GAAC,OAAIvB,IAAIuB,EAAD,YAAS0lB,EAAT,KAAkB,MACzDxW,EAAQoK,KAAK6I,cAAc/C,EAAOta,MAAK,SAACtG,EAAGmG,GAAJ,OAAUnG,EAAImG,MACrD0H,EAAShN,OAAOC,KAAKF,GAAM4C,QAAO,SAACxD,EAAG6R,GAC1C,IAAIgZ,EAAMna,EAAMzQ,IAAIW,EAAKiR,GAAN,YAAeqV,EAAf,KAAwB,IAE3C,OADAlnB,EAAE6R,GAAKgZ,GAAY,yBACZ7qB,IACN,IAEHS,QAAQC,IAAI,SAASmN,GAErB9M,EAAI6iB,iBAAJ,cAA4BjB,GAAQ,aAAc,CAChD,OACA,CAAC,MAAO,CAAC,YAAa,CAAC,MAAO,QAAS,CAAC,UAAW9U,IACnD,CAAC,MAAO,CAAC,YAAa,CAAC,MAAO,QAAS,CAAC,UAAWA,IACnD,2BAGF,IAAMid,EAAa,CACjBrjB,KAAM,oBACNyU,SAAUyO,EACP5pB,KAAI,SAACgqB,GAAD,MAAQ,CACXtjB,KAAM,UACNoV,WAAY,CAAEgG,MAAOkI,EAAErpB,OACvByjB,SAAUllB,IACRF,EACA,CAAC,MAAOgrB,EAAEV,SAAS7lB,cAAeumB,EAAErpB,MAAO,WAAY,SACvD,UAGHnD,QAAO,SAACwsB,GAAD,OAAOvsB,QAAQusB,EAAE5F,cAE7BpkB,EAAIua,UAAU,yBAAyBgH,QAAQwI,O,GAtTzBjQ,ICnCbvM,GAAS,CAClB,IjBqc+B,eAACK,EAAD,uDAAW,GAAX,OAAkB,IAAI+R,GAAa/R,IiBpclE,gBhBsSkD,eAACA,EAAD,uDAAW,GAAX,OAAkB,IAAI+T,GAAgC/T,IgBrSxG,gBd6RkD,eAACA,EAAD,uDAAW,GAAX,OAAkB,IAAIsV,GAAgCtV,Ic5RxG,afgQ+C,eAACA,EAAD,uDAAW,GAAX,OAAkB,IAAIkV,GAA6BlV,Ie/PlG,gBbyRkD,eAACA,EAAD,uDAAW,GAAX,OAAkB,IAAIuV,GAAgCvV,IaxRxG,aZiQ+C,eAACA,EAAD,uDAAW,GAAX,OAAkB,IAAIwV,GAA6BxV,IYhQlG,WVqSiC,eAACA,EAAD,uDAAW,GAAX,OAAkB,IAAI0V,GAAe1V,IUpStE,gBTyS8C,eAACA,EAAD,uDAAW,GAAX,OAAkB,IAAIkW,GAA4BlW,ISxShG,sBRiU0C,eAACA,EAAD,uDAAW,GAAX,OAAkB,IAAImW,GAAwBnW,IQhUxF,iBPqlBsC,eAACA,EAAD,uDAAW,GAAX,OAAkB,IAAIgX,GAAoBhX,IOplBhF,ODuV8B,eAACA,EAAD,uDAAW,GAAX,OAAkB,IAAI8Y,GAAY9Y,KEhSrDqc,GAHA,CAzCC,CACZ5mB,KAAM,OACN0B,SAAS,EACT1E,KAAM,UACNkE,OAAO,EAEPM,OAAQ,SACRuB,eAAgB,CACZC,OAAO,EACPG,OAAQ,MACRF,WAAW,GAEf9B,UAAW,CACPkC,KAvCI,SAAC,GAA0B,IAAxBwO,EAAuB,EAAvBA,WAAuB,EAAZ3H,OAGtB,OACI,cAAC,EAAD,UACI,qBAAK3P,UAAU,gBAAf,SACI,qBAAKA,UAAU,gBAAf,SACI,cAAC,GAAD,CACI+V,YAAcrP,GAAO4lB,aACrBhV,WAAaA,EACb3H,OAAS,GACT4H,QAAS,CACL1Q,MAAO,WACP2K,KAAM,CAAC,SAAU,UACjBtR,MAAM,YA0B1B6I,MAAO,CACHuO,WAAY,CACRnC,KAAM,IACN9E,OAAQ,CAAC,CAAC5N,KAAM,QACZY,MAAO,sDAEfsM,OAAQ,CACJA,GAAO4c,qBAaftjB,SAAU,CACN,iB,8BC3DNujB,GAAW,WACb,OAAQ,yCAGNC,GAAa,SAAC,GAA6B,EAA5B3c,aAA4B,kBAC7C,OAAQ,qBAAK9P,UAAU,0BAkGZqsB,GAHA,CAnCC,CACZ5mB,KAAK,qBACL0B,SAAS,EACT1E,KAAM,UACNkE,OAAO,EAEPM,OAAQ,SACRuB,eAAgB,CACZC,OAAO,EACPG,OAAQ,MACRF,WAAW,GAEf9B,UAAW,CACPkC,KAtEI5F,oBAAS,YAAiC,IAA9BoU,EAA6B,EAA7BA,WAAW3H,EAAkB,EAAlBA,OACxB/L,GAD0C,EAAXqB,MACrBtB,sBAAVC,QAEDsJ,EAAQrL,mBAAQ,WAClB,IAAI6qB,EAAWC,GAAc9nB,QAAO,SAACxD,EAAG6R,GAIpC,OAHIA,EAAEnQ,QAAUa,IACZvC,EAAI,CAACsO,EAAO,GAAGuD,EAAEhG,OAAO,CAACzK,KAAKyQ,EAAEzQ,KAAKmB,OAAOA,MAEzCvC,IACR,IAEH,OADAS,QAAQC,IAAI,WAAY2qB,GACjBA,IACR,CAAC9oB,EAAO+L,IAGX,OACI,cAAC,EAAD,UACI,qBAAK3P,UAAU,gBAAgBqD,MAAO,CAACC,OAAQ,SAA/C,SACI,cAAC,GAAD,CACIyS,YAAcrP,GAAO4lB,aACrBhV,WAAaA,EACb3H,OAAQzC,EACRwE,mBAAmB,OACnB6F,QAAS,CACL1Q,MAAO,GACP2K,KAAM,CACF,CACIzJ,KAAM,aACN6H,UAAW6c,IAEf,SACA,SACA,CACI1kB,KAAM,aACN6H,UAAW4c,IAEf,CACIzkB,KAAM,iBACN6H,UAAW4c,IAEf,CACIzkB,KAAM,oBACN6H,UAAW4c,KAGnBtsB,MAAM,YA0BtB6I,MAAO,CACHuO,WAAY,CACRnC,KAAM,IACNF,OAAQ,EAAE,UAAW,OACrB5E,OAAQ,CACJ,CAAC5N,KAAM,UACPY,MAAO,oDACP,CAACZ,KAAM,QACPY,MAAO,sDAEfsM,OAAQ,CACLA,KAGP1G,SAAU,CACN,iBC7EG2jB,GAVI,CACfnnB,KAAK,uBACL0B,SAAS,EACT1E,KAAM,YACNkE,OAAO,EAEPM,OAAQ,SACRL,UAlBU1D,oBAAS,YAAgC,EAA7BoU,WAA6B,EAAlB3H,OAAkB,EAAX1K,MACxC,OACI,cAAC,EAAD,UACI,qBAAKjF,UAAU,qBAAf,SACI,sDCqBD6sB,GAVI,CACfpnB,KAAK,uBACL0B,SAAS,EACT1E,KAAM,YACNkE,OAAO,EAEPM,OAAQ,SACRL,UAtBU1D,oBAAS,YAAgC,EAA7BoU,WAA6B,EAAlB3H,OAAkB,EAAX1K,MAIxC,OACI,cAAC,EAAD,UACI,qBAAKjF,UAAU,qBAAf,SACI,sDCiBD8sB,GATO,CAClBrnB,KAAK,0BACLhD,KAAM,eACNkE,OAAO,EAEPM,OAAQ,SACRL,UArBa1D,oBAAS,YAAgC,EAA7BoU,WAA6B,EAAlB3H,OAAkB,EAAX1K,MAI3C,OACI,cAAC,EAAD,UACI,qBAAKjF,UAAU,qBAAf,SACI,yDCYD+sB,GAdH,CACVC,EACAC,EACAC,EACAC,GAJU,mBAKPhX,IALO,CAMViX,GACAC,GACAC,IARU,YASPC,IATO,CAWVC,ICRIC,G,4JACJ,WAAU,IAAD,OACP,OACE,eAAC,gBAAD,CAAeC,SAAUC,MAAzB,UACE,cAAC,EAAD,IACA,cAAC,SAAD,UACIZ,GAAO3qB,KAAI,SAACwrB,EAAOrrB,GAAR,OACT,cAAC,gBAAD,uCAA8BqrB,GAAa,EAAK7kB,OAAhD,IACE8kB,MAAQd,GAAOntB,QAAO,SAAAkuB,GAAC,OAAIA,EAAE3mB,aADV5E,QAK3B,cAAC,WAAD,W,GAZUX,IAAMgO,WAuBlBme,GAAqB,CAAEC,0BAEdC,sBARS,SAAAzrB,GACpB,MAAQ,KASRurB,GAFWE,CAGbR,I,iCCnCIS,GAAUC,aAAgB,2BAC3BC,aAD0B,IAE7BC,uBAGaC,gBAAYJ,GAASK,aAAgBC,OCV5CC,GAAkBC,eAAlBD,cAERA,GAAc3N,OAAO,GAArB,SAAsC,+CACtC2N,GAAc3N,OAAO,GAArB,SAAsC,sBACtC2N,GAAc3N,OAAO,GAArB,SAAsC,gDAEtC2N,GAAc3N,OAAO,GAArB,KAAkC,sDAClC2N,GAAc3N,OAAO,GAArB,KAAkC,sBAClC2N,GAAc3N,OAAO,GAArB,KAAkC,kDAClC2N,GAAc3N,OAAO,GAArB,KAAkC,uBAMlC,IAAM5R,GAAS,CACbyf,YAAa,CACXC,UAAW,GACXC,YAAa,WACbC,SAAU,oBACVC,YAAa,kBACbC,UAAW,gBACXC,eAAgB,cAElBC,MAAO,CACLN,UAAW,WACXC,YAAa,WACbC,SAAU,oBACVC,YAAa,kBACbC,UAAW,gBACXC,eAAgB,cAElBE,KAAM,CACJP,UAAW,kBACXC,YAAa,WACbC,SAAU,oBACVC,YAAa,kBACbC,UAAW,gBACXC,eAAgB,cAElBG,KAAM,CACJR,UAAW,cACXC,YAAa,WACbC,SAAU,oBACVC,YAAa,kBACbC,UAAW,gBACXC,eAAgB,iBAElBI,OAAQ,CACNT,UAAW,cACXC,YAAa,WACbC,SAAU,oBACVC,YAAa,kBACbC,UAAW,aACXC,eAAgB,eAIdK,GAAQ,CACZC,QAAS,CACPC,QAAS,OACTC,SAAU,oDACVC,QAAS,+CACT3nB,KAAM,gBAER4nB,KAAM,CACJH,QAAS,OACTC,SAAU,8DACVC,QAAS,oCACT3nB,KAAM,iBAER6nB,KAAM,CACJJ,QAAS,yBACTC,SAAU,8CACVC,QAAS,6CACT3nB,KAAM,sBAER8nB,MAAO,CACLL,QAAS,yBACTC,SAAU,8CACVC,QAAS,yCACT3nB,KAAM,uBASJ+nB,GAAiB,CAKrBC,eAAe,GAAD,OAAK7gB,GAAM,MAAQ0f,UAAnB,YAAgCU,GAAK,QAAOE,QAA5C,oCACdQ,aAAa,SAAD,OAAW9gB,GAAM,MAAQ2f,YAAzB,YAAwCS,GAAK,QAAOvnB,KAApD,wBAAwEmH,GAAM,MAAQ+f,gBAClGgB,YAAY,gCAAD,OAEPX,GAAK,QAAOG,SAFL,YAEiBvgB,GAAM,MAAQ8f,UAF/B,YAE4C9f,GAAM,MAAQ6f,YAF1D,kBAGP7f,GAAM,MAAQ4f,SAHP,kBAGyB5f,GAAM,MAAQ+f,eAHvC,gIAQXiB,kBAAkB,sCAAD,OACgBhhB,GAAM,MAAQ+f,eAD9B,yLAMjBkB,cAAc,eAAD,OAAiBjhB,GAAM,MAAQ0f,WAC5CwB,cAAc,qBACdC,WAAW,8EACXC,YAAY,QAAD,OAAUphB,GAAM,MAAQ2f,YAAxB,YAAuCS,GAAK,QAAOvnB,KAAnD,wBAAuEmH,GAAM,MAAQ+f,gBAEhGsB,WAAW,qCAAD,OAENjB,GAAK,QAAOI,QAFN,YAEiBxgB,GAAM,MAAQ8f,UAF/B,YAE4C9f,GAAM,MAAQ6f,YAF1D,kBAGN7f,GAAM,MAAQ4f,SAHR,kBAG0B5f,GAAM,MAAQ+f,eAHxC,wHAOVuB,yBAA0B,yBAC1BC,iBAAiB,+BAAD,OACZnB,GAAK,QAAOI,QADA,YACWxgB,GAAM,MAAQ8f,UADzB,YACsC9f,GAAM,MAAQ6f,YADpD,kBAEZ7f,GAAM,MAAQ4f,SAFF,kBAEoB5f,GAAM,MAAQ+f,eAFlC,wHAQhByB,KAAM,oBACNC,aAAc,aACdC,OAAQ,sBAIRnmB,SAAU,gBACVomB,OAAQ,cACR1f,WAAY,kBAEZ2f,YAAa,iBACbC,UAAW,eACXC,cAAe,mBAEfC,WAAY,eACZC,SAAU,aACVC,aAAc,iBAEdC,YAAa,kBACbC,UAAW,gBACXC,cAAe,oBAEfC,UAAW,oBAEXthB,YAAa,2BAEbuhB,SAAU,eACVC,cAAe,+BACfC,aAAc,GAEdjkB,GAAI,WAEJ9C,OAAQ,WACRgnB,YAAa,wBACbC,aAAc,WACdC,kBAAmB,oBACnBzd,SAAW,gBACXW,cAAe,sBACf/G,eAAgB,gBAChB8jB,oBAAqB,sBAGrBpnB,UAAW,WACXqnB,cAAe,GAEfC,SAAU,kBACVC,cAAe,wBAEfC,QAAS,kEACTC,YAAa,iHACbC,gBAAiB,wDACjBC,oBAAqB,+DACrBC,aAAc,gDACdC,iBAAkB,yFAElBC,SAAU,YACVC,UAAW,UACXC,UAAW,UACXC,YAAa,YACbC,aAAc,YACdC,aAAc,YAEd5jB,QAAS,cACTiC,QAAS,cACT4hB,QAAS,cACTC,QAAS,cAETC,WAAY,cACZC,WAAY,cACZC,WAAY,cACZC,WAAY,cAEZvE,UAAW,WACXwE,aAAc,mBACdC,eAAgB,OAEhBC,SAAU,KACVzoB,WAAY,sCAEZ0oB,aAAc,kBACdC,SAAU,oDACVC,gBAAiB,yEAEjBC,UAAW,+BAEXC,YAAa,6IAEblF,kBAIamF,GAFGC,uBAAa/D,ICnNhBgE,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqB7b,MAAK,YAAkD,IAA/C8b,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,4BCgCdO,wBAAcC,eACdC,sBAAYC,aAEZ,IAAMC,GAAiBC,sBAAWlH,GAAK,CAAEmH,UCvCzB,iCDuCoCC,aC1CxB,SD0CsCC,YCtChD,gCDyClBC,IAAS3c,OACP,cAAC,IAAM4c,WAAP,UACE,cAAC,WAAD,CAAUC,MAAQA,GAAlB,SACA,cAAC,iBAAD,CAAgB9zB,OAAS+zB,sBC9Cd,8BD8CX,SACI,cAAC,eAAa1oB,SAAd,CAAuBzJ,MAAO6wB,GAA9B,SACE,cAACc,GAAD,YAKRxb,SAASic,eAAe,SAO1BrB,O","file":"static/js/main.2b765469.chunk.js","sourcesContent":["import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nconst ScrollToTop = () => {\n  const { pathname } = useLocation();\n  useEffect((arg) => {\n    window.scrollTo(0, 0);\n  }, [pathname])\n  return null;\n}\n\nexport default ScrollToTop;\n","import React, {Fragment} from 'react'\nimport {DotsVerticalIcon,StarIcon} from \"@heroicons/react/solid\";\nimport {Menu,Transition} from \"@headlessui/react\";\n\nfunction classNames(...classes) {\n    return classes.filter(Boolean).join(' ')\n}\n\n\nconst MenuComponent = () =>{\n    return (\n        <div className=\"flex-shrink-0 self-center flex\">\n            <Menu as=\"div\" className=\"relative z-30 inline-block text-left\">\n                {({ open }) => (\n                    <>\n                        <div>\n                            <Menu.Button className=\"-m-2 p-2 rounded-full flex items-center text-gray-400 hover:text-gray-600\">\n                                <span className=\"sr-only\">Open options</span>\n                                <DotsVerticalIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\n                            </Menu.Button>\n                        </div>\n\n                        <Transition\n                            show={open}\n                            as={Fragment}\n                            enter=\"transition ease-out duration-100\"\n                            enterFrom=\"transform opacity-0 scale-95\"\n                            enterTo=\"transform opacity-100 scale-100\"\n                            leave=\"transition ease-in duration-75\"\n                            leaveFrom=\"transform opacity-100 scale-100\"\n                            leaveTo=\"transform opacity-0 scale-95\"\n                        >\n                            <Menu.Items\n                                static\n                                className=\"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none\"\n                            >\n                                <div className=\"py-1\">\n                                    <Menu.Item>\n                                        {({ active }) => (\n                                            <div\n                                                \n                                                className={classNames(\n                                                    active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',\n                                                    'flex px-4 py-2 text-sm'\n                                                )}\n                                            >\n                                                <StarIcon className=\"mr-3 h-5 w-5 text-gray-400\" aria-hidden=\"true\" />\n                                                <span>Add to favorites</span>\n                                            </div>\n                                        )}\n                                    </Menu.Item>\n                                    {/*<Menu.Item>*/}\n                                    {/*    {({ active }) => (*/}\n                                    {/*        <a*/}\n                                    {/*            href=\"#\"*/}\n                                    {/*            className={classNames(*/}\n                                    {/*                active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',*/}\n                                    {/*                'flex px-4 py-2 text-sm'*/}\n                                    {/*            )}*/}\n                                    {/*        >*/}\n                                    {/*            <CodeIcon className=\"mr-3 h-5 w-5 text-gray-400\" aria-hidden=\"true\" />*/}\n                                    {/*            <span>Embed</span>*/}\n                                    {/*        </a>*/}\n                                    {/*    )}*/}\n                                    {/*</Menu.Item>*/}\n                                    {/*<Menu.Item>*/}\n                                    {/*    {({ active }) => (*/}\n                                    {/*        <a*/}\n                                    {/*            href=\"#\"*/}\n                                    {/*            className={classNames(*/}\n                                    {/*                active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',*/}\n                                    {/*                'flex px-4 py-2 text-sm'*/}\n                                    {/*            )}*/}\n                                    {/*        >*/}\n                                    {/*            <FlagIcon className=\"mr-3 h-5 w-5 text-gray-400\" aria-hidden=\"true\" />*/}\n                                    {/*            <span>Report content</span>*/}\n                                    {/*        </a>*/}\n                                    {/*    )}*/}\n                                    {/*</Menu.Item>*/}\n                                </div>\n                            </Menu.Items>\n                        </Transition>\n                    </>\n                )}\n            </Menu>\n        </div>\n    )\n}\n\nexport default MenuComponent\n","import React, {useEffect} from 'react';\nimport {useFalcor} from '@availabs/avl-components'\nimport MenuComponent from \"../card-menu/Menu\";\nimport get from 'lodash.get'\nimport {Link} from \"react-router-dom\";\n\nconst SOURCES_ATTRIBUTES = [\n    'id',\n    'name',\n    'description',\n    'current_version',\n    'data_starts_at',\n    'data_ends_at',\n    'origin_url',\n    'user_id',\n    'rows_updated_at',\n    'rows_updated_by_id',\n    'topic_area',\n    'source_type'\n]\n\nconst DatasourceList = () => {\n    const {falcor, falcorCache} = useFalcor();\n\n    useEffect(() => {\n        async function fetchData() {\n            let length = await falcor.get([\"tig\", \"datasources\", \"length\"])\n            length = get(length, ['json', 'tig', 'datasources', 'length'], 0)\n\n            if (length) {\n                return await falcor.get([\"tig\", \"datasources\", \"byIndex\", [{\n                    from: 0,\n                    to: length - 1\n                }], SOURCES_ATTRIBUTES])\n            }\n        }\n\n        return fetchData();\n    }, [])\n\n    const sourcesList = React.useMemo(() => {\n        console.log('Data source list process data')\n        let sourcesById = get(falcorCache, ['tig', 'datasources', 'byId'], null)\n        let data = []\n        if (sourcesById) {\n            data = Object.keys(sourcesById).map(id => sourcesById[id])\n        }\n        console.log('sourcesList', data)\n        return data\n\n    },[falcorCache])\n\n\n    return (\n        <div className='border-t-2 border-teal-600'>\n            <div className='bg-tigGreen-100 text-xl w-28 py-3 pl-4 text-white mb-2'> Catalog </div>\n            {sourcesList.length > 0 ?\n                <ul className=\"\">\n                    {sourcesList.map((item,i) => (\n                        <li key={i} className=\"border-t py-13px\">\n                            <div className=\"flex space-x-3\">\n                                <div className=\"min-w-5xl flex-1\">\n                                    <p className=\"text-sm font-bold text-gray-900 mt-10px\">\n                                        <Link to={{\n                                            pathname: `/datasource/${get(item,['id','value'],'')}`,\n                                            state: {name: get(item,['name','value'],''), description: get(item,['description','value'],'')}\n                                        }} className=\"hover:underline py-6px px-12px border-1\">\n                                            {get(item,['name','value'],'')}\n                                        </Link>\n                                    </p>\n                                </div>\n                                <MenuComponent/>\n                            </div>\n                           \n                        </li>\n                    ))}\n                </ul>\n                :\n                <div>Loading ... </div>\n            }\n        </div>\n\n    )\n}\n\nexport default DatasourceList\n","import React, {useEffect} from 'react';\nimport {useFalcor} from '@availabs/avl-components'\nimport MenuComponent from \"../card-menu/Menu\";\nimport get from 'lodash.get'\nimport {Link} from \"react-router-dom\";\n\nconst SOURCES_ATTRIBUTES = [\n    'id',\n    'name',\n    'description',\n    'current_version',\n    'data_starts_at',\n    'data_ends_at',\n    'origin_url',\n    'user_id',\n    'rows_updated_at',\n    'rows_updated_by_id',\n    'topic_area',\n    'source_type'\n]\n\nconst DatasourceList = () => {\n    const {falcor, falcorCache} = useFalcor();\n\n    useEffect(() => {\n        async function fetchData() {\n            let length = await falcor.get([\"tig\", \"datasources\", \"length\"])\n            length = get(length, ['json', 'tig', 'datasources', 'length'], 0)\n\n            if (length) {\n                return await falcor.get([\"tig\", \"datasources\", \"byIndex\", [{\n                    from: 0,\n                    to: length - 1\n                }], SOURCES_ATTRIBUTES])\n\n            }\n        }\n\n        return fetchData();\n    }, [falcor])\n\n    const processData = () => {\n        return ['Activity 1', 'Activity 2'].map((d, dI) => ({id: dI, value: d, name:d, link: '#'}))\n\n    }\n\n\n    return (\n        <div className='border-t-2 border-teal-600'>\n            <div className='bg-tigGreen-100 text-l w-36 py-4 px-4 text-white mb-2 '> Recent Activity </div>\n            {processData() ?\n                <ul className=\"\">\n                    {processData().map((item) => (\n                        <li key={item.id} className=\"border-t py-13px\">\n                            <div className=\"flex space-x-3\">\n                                <div className=\"min-w-5xl flex-1\">\n                                    <p className=\"text-sm text-gray-700\">\n                                        <Link to={{\n                                            pathname: `/datasource/${item.value}`,\n                                            state: {name: item.name, description: item.description}\n                                        }} className=\"hover:underline py-6px px-12px border-1\">\n                                            {item.name}\n                                        </Link>\n                                    </p>\n                                </div>\n                                <MenuComponent/>\n                            </div>\n                        </li>\n                    ))}\n                    <li className={'float-right text-sm text-gray-700'}>\n                        <Link to={{\n                            pathname: '#'\n                        }} className=\"hover:underline py-6px px-12px border-1\">Show More</Link>\n                    </li>\n                </ul>\n                :\n                <div>Loading ... </div>\n            }\n        </div>\n\n    )\n}\n\nexport default DatasourceList\n","import React from \"react\"\nimport { withAuth, TopNav } from '@availabs/avl-components'\nimport { Link } from 'react-router-dom'\n\n\nconst TigNav = withAuth(() => {\n    \n\n\n    return (\n        <div className='w-full'>\n            <TopNav \n                leftMenu={(\n                    <Link to='/' className={' hover:bg-tigGray-50 h-12'}>\n                        <img alt='NYMTC Logo' className={'bg-tigGray-200 hover:bg-tigGray-50'} style={{height:50}} src='/images/nymtc_logo.svg'/>\n                    </Link>)\n                }\n                rightMenu={\n                    \n                    <div className='flex h-12 flex-col md:flex-row'>\n                        <div className='p-3 h-full bg-tigGray-200 my-2 md:my-0 md:mr-2 text-sm font-bold'>Welcome!</div>\n                        <div className='p-3 h-full hover:bg-tigGray-50 hover:text-yellow-500 hover:cursor-pointer bg-tigGray-200 my-2 md:my-0 md:mr-2 text-sm font-light'>Sign up</div>\n                        <div className='p-3 h-full hover:bg-tigGray-50 hover:text-yellow-500 hover:cursor-pointer bg-tigGray-200 text-sm font-light'>Login</div>\n                    </div>\n                    \n                }\n            />\n        </div>\n    )\n})\n\nexport default TigNav","import React, {Fragment} from \"react\"\nimport { Link, useHistory } from 'react-router-dom'\nimport {useParams, useLocation} from 'react-router-dom'\nimport { Listbox, Transition } from '@headlessui/react'\nimport { useFalcor } from '@availabs/avl-components'\nimport get from 'lodash.get' \n\nconst TigBreadcrumbs = ({children}) => {\n    let {viewId,dataSourceId} = useParams()\n    let {falcor, falcorCache} = useFalcor()\n    let location = useLocation()\n    const history = useHistory();\n\n    React.useEffect(() =>{\n        async function fetchData() {\n            let getLength = await falcor.get([\"tig\", \"datasources\", \"length\"])\n            let length = get(getLength, ['json', 'tig', 'datasources', 'length'], 0)\n\n            let getDatasources = await falcor\n                    .get([\"tig\", \"datasources\", \"byIndex\", [{from: 0, to: length - 1}], ['id','name']])\n            let dsdata = get(getDatasources, [\"json\",\"tig\", \"datasources\", \"byIndex\"], {})\n            let datasourcesIds = Object.keys(dsdata)\n                .map(k => get(dsdata, `${k}.id`, null))\n                .filter(d => d)\n\n            let getDsLengths  = await falcor.get([\"tig\",\"datasources\",\"views\",\"sourceId\",datasourcesIds,'length'])\n\n            let viewGet = datasourcesIds.map(datasourceId => {\n                let dsLength = +get(getDsLengths,[\"json\",\"tig\",\"datasources\",\"views\",\"sourceId\",datasourceId,'length'],1)\n                let output  = [\"tig\",\"datasources\",\"views\",\"sourceId\",datasourceId,\"byIndex\",[{from:0,to:(dsLength-1)}],['id','name', 'source_id']]\n                return output\n            })\n            return await falcor.get(...viewGet)    \n        }\n        return fetchData();\n    },[falcor,viewId])\n\n    let sources = React.useMemo(() => {\n        let ds = get(falcorCache,[\"tig\",\"datasources\",\"byId\"], {})\n        let dataSourceIds = Object.keys(get(falcorCache,[\"tig\",\"datasources\",\"views\",\"sourceId\"], {}))\n        let datasources = dataSourceIds.reduce((out, dsId) => {\n           out[dsId] = {\n                id: get(ds[dsId],['id','value'],''),\n                name: get(ds[dsId],['name','value'],'')\n            }\n            return out\n        },{})\n        let bySource = dataSourceIds.reduce((out, dsId) => {\n            let views = get(falcorCache, [\"tig\",\"datasources\",\"views\",\"sourceId\",dsId,\"byIndex\"], {})\n            out[dsId] = Object.keys(views).map(k => {\n                let view = get(falcorCache,views[k].value, null)\n                return {\n                    id: get(view,['id','value'],''),\n                    source_id: get(view,['source_id','value'],''),\n                    name: get(view,['name','value'],''),\n                }\n            }).filter(d => d)\n            return out\n        },{})\n        let byView = Object.keys(bySource).reduce((out,dsId) => {\n            bySource[dsId].forEach(view => {\n                out[view.id] = view \n            })\n            return out\n        },{})\n        return {\n            byView,bySource,datasources\n        }\n    },[falcorCache])\n    let selected = get(sources,['byView',viewId],{})\n    let views = get(sources,['bySource', selected.source_id], [])\n    let activeSource = get(sources, ['datasources',selected.source_id], {})\n    let actions = [\n        {\n            path: 'map',\n            name: 'Map'\n        },\n         {\n            path: 'table',\n            name: 'Table'\n        },\n        {\n            path: 'chart',\n            name: 'Chart'\n        },\n         {\n            path: 'metadata',\n            name: 'View Metadata'\n        }\n    ]\n    let activeAction = actions.filter(d => d.path === location.pathname.split('/').pop().toLowerCase()).pop()\n    \n\n    return (\n        <div className='w-full flex justify-between py-6 items-baseline z-10'>\n            <div className='flex items-stretch'>\n                \n                <Link to='/' \n                    className='bg-tigGray-100 hover:bg-tigGray-50 hover:text-orange-300 hover:cursor-pointer py-1 px-3 text-sm text-gray-600'>\n                    Catalog\n                </Link>\n                {viewId ?\n                <>\n                <div \n                className='ml-2 bg-tigGray-100 hover:bg-tigGray-50 hover:text-orange-300 hover:cursor-pointer text-sm text-gray-600' style={{background: '#bbd4cb'}}>\n                    <Listbox value={selected} onChange={(e) => {\n                        console.log('on change', )\n                        let url = `/views/${e.id}/${activeAction.path}`\n                        history.push(url)\n                    }}>\n                        <div className=\"relative\">\n                            <Listbox.Button className=\"py-1 px-3 relative w-full text-left cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm\">\n                                <span className=\" truncate\">{activeSource.name}</span>\n                                <span className='pl-2 fa fa-caret-down'/>\n                            </Listbox.Button>\n                            <Transition\n                                as={Fragment}\n                                leave=\"transition ease-in duration-100\"\n                                leaveFrom=\"opacity-100\"\n                                leaveTo=\"opacity-0\"\n                            >\n                                <Listbox.Options className=\"z-50 absolute py-1 mt-1 overflow-auto text-xs shadow-lg max-h-96 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm\" style={{background: '#bbd4cb'}}>\n                                  {views.map((view, personIdx) => (\n                                    <Listbox.Option\n                                      key={personIdx}\n                                      className={({ active }) =>\n                                        `${active ? 'text-amber-900 bg-white' : 'text-gray-900'}\n                                              cursor-default select-none relative `\n                                      }\n                                      value={view}\n                                    >\n                                      {({ selected, active }) => (\n                                        <>\n                                          <span\n                                            className={`${\n                                              selected ? 'font-medium' : 'font-thin'\n                                            } block px-6 truncate`}\n                                          >\n                                            {view.name}\n                                          </span>\n                                          {selected ? (\n                                            <span\n                                              className={`${\n                                                active ? 'text-amber-600' : 'text-amber-600'\n                                              }\n                                              absolute inset-y-0 left-0 flex items-center pl-3`}\n                                            >\n                                              {/*<CheckIcon className=\"w-5 h-5\" aria-hidden=\"true\" />*/}\n                                            </span>\n                                          ) : null}\n                                        </>\n                                      )}\n                                    </Listbox.Option>\n                                  ))}\n                                </Listbox.Options>\n                              </Transition>\n                        </div>\n                    </Listbox>\n                </div> \n                <div \n                className='ml-2 bg-tigGray-100 hover:bg-tigGray-50 hover:text-orange-300 hover:cursor-pointer text-sm text-gray-600' style={{background: '#bbd4cb'}}>\n                   <Listbox value={activeAction} onChange={(e) => {\n                        let url = `/views/${viewId}/${e.path}`\n                        console.log('url', url)\n                        history.push(url)\n                    }}>\n                        <div className=\"relative\">\n                            <Listbox.Button className=\"py-1 px-3 relative w-full text-left cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm\">\n                                <span className=\" truncate\">{activeAction.name}</span>\n                                <span className='pl-2 fa fa-caret-down'/>\n                            </Listbox.Button>\n                            <Transition\n                                as={Fragment}\n                                leave=\"transition ease-in duration-100\"\n                                leaveFrom=\"opacity-100\"\n                                leaveTo=\"opacity-0\"\n                            >\n                                <Listbox.Options className=\"z-50 absolute py-1 mt-1 overflow-auto text-xs shadow-lg max-h-96 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm\" style={{background: '#bbd4cb'}}>\n                                  {actions.map((view, personIdx) => (\n                                    <Listbox.Option\n                                      key={personIdx}\n                                      className={({ active }) =>\n                                        `${active ? 'text-amber-900 bg-white' : 'text-gray-900'}\n                                              cursor-default select-none relative `\n                                      }\n                                      value={view}\n                                    >\n                                      {({ selected, active }) => (\n                                        <>\n                                          <span\n                                            className={`${\n                                              selected ? 'font-medium' : 'font-thin'\n                                            } block px-6 truncate`}\n                                          >\n                                            {view.name}\n                                          </span>\n                                          {selected ? (\n                                            <span\n                                              className={`${\n                                                active ? 'text-amber-600' : 'text-amber-600'\n                                              }\n                                              absolute inset-y-0 left-0 flex items-center pl-3`}\n                                            >\n                                              {/*<CheckIcon className=\"w-5 h-5\" aria-hidden=\"true\" />*/}\n                                            </span>\n                                          ) : null}\n                                        </>\n                                      )}\n                                    </Listbox.Option>\n                                  ))}\n                                </Listbox.Options>\n                              </Transition>\n                        </div>\n                    </Listbox>\n                </div>\n                </>\n                : ''\n                }\n\n            </div>\n            <a href='/Gatewayhelp.htm'>\n                <span className='fa fa-question text-sm text-gray-600' />\n            </a>\n        </div>\n    )\n}\n\nexport default TigBreadcrumbs","import React from \"react\"\nimport { withAuth } from '@availabs/avl-components'\nimport TigNav from './TigNav'\nimport TigBreadcrumbs from './TigBreadcrumbs'\n\nconst TigLayout = withAuth(({children}) => {\n    return (\n        <div className='w-full max-w-6xl mx-auto min-h-screen flex flex-col z-10'>\n            <div className='z-10'>\n                <TigNav />\n            </div>\n            <TigBreadcrumbs />\n            <div className='flex-1'>\n                {children}\n            </div>\n        </div>\n    )\n})\n\nexport default TigLayout","import React from 'react';\nimport {Redirect} from 'react-router-dom'\nimport {withAuth} from '@availabs/avl-components'\nimport DataSourceList from \"./tigDataSources/DatasourceList\";\nimport RecentActivity from \"./tigDataSources/RecentActivity\";\n\n\nimport TigLayout from 'components/tig/TigLayout'\n\nconst Landing = () =>\n  <TigLayout>\n    <div className='flex'>\n      <div className='flex-1'>\n        <DataSourceList />\n      </div>\n      <div className='flex-1 pl-10'>\n        <RecentActivity />\n      </div>\n    </div>  \n  </TigLayout>\n\n\nconst AuthedLanding = withAuth(({ title, shadowed = true, user, children }) => {\n  if(user && user.authLevel > 0) {\n    return <Redirect to=\"/admin\" />\n  }\n  return <Landing />\n})\n\nconst config = {\n  path: \"/\",\n  exact: true,\n  component: AuthedLanding,\n  layout: 'Simple',\n}\n\n\nexport default config;\n\n","import React, {useEffect, useState, useMemo} from 'react';\nimport {useParams, useLocation} from 'react-router-dom'\nimport {useFalcor} from '@availabs/avl-components'\nimport get from \"lodash.get\";\nimport MenuComponent from \"../card-menu/Menu\";\nimport {\n    MapIcon,\n    TableIcon,\n    ChartBarIcon,\n    FolderIcon,\n    MenuIcon,\n} from '@heroicons/react/outline'\n\n\nimport TigLayout from 'components/tig/TigLayout'\n\nconst VIEWS_ATTRIBUTES = [\n    'id',\n    'name',\n    'description',\n    'source_id',\n    'current_version',\n    'data_starts_at',\n    'data_ends_at',\n    'origin_url',\n    'user_id',\n    'rows_updated_at',\n    'rows_updated_by_id',\n    'topic_area',\n    'download_count',\n    'last_displayed_at',\n    'view_count',\n    'created_at',\n    'updated_at',\n    'columns',\n    'data_model',\n    'statistic_id',\n    'column_types',\n    'data_levels',\n    'value_name',\n    'column_labels',\n    'row_name',\n    'column_name',\n    'spatial_level',\n    'data_hierarchy',\n    'geometry_base_year',\n    'deleted_at',\n    'download_instructions',\n    'value_columns',\n    'short_description'\n]\n\nfunction classNames(...classes) {\n    return classes.filter(Boolean).join(' ')\n}\n\nconst Views = () => {\n    const {dataSourceId} = useParams()\n    const {falcor,falcorCache} = useFalcor()\n    const [activeId,setActiveId] = useState(null)\n\n    const location = useLocation()\n    //const [sidebarOpen, setSidebarOpen] = useState(false)\n\n    const sortIds = ((a,b) =>{\n        return a.id < b.id ? 1 : -1\n    })\n\n    useEffect(() =>{\n        async function fetchData() {\n\n            let length = await falcor.get([\"tig\",\"datasources\",\"views\",\"sourceId\",[dataSourceId],'length'])\n\n            length = get(length,['json','tig','datasources','views',\"sourceId\",dataSourceId,'length'],null)\n            if(length){\n                const response = await falcor.get([\"tig\",\"datasources\",\"views\",\"sourceId\",[dataSourceId],\"byIndex\",[{from:0,to:length-1}],VIEWS_ATTRIBUTES])\n                const graph = get(response,['json','tig','datasources','views',\"sourceId\",dataSourceId,\"byIndex\"],null)\n                let data = []\n                if(graph){\n                    data = Object.keys(graph).filter(d => d !== '$__path').map(item => graph[item]).sort(sortIds)\n                    console.log('data',data)\n                    setActiveId(data[0].id)\n                }\n            }\n        }\n\n        return fetchData();\n    },[falcor,dataSourceId])\n\n    const dataSource = useMemo(() => {\n        let cache = get(falcorCache,['tig','datasources','views',\"sourceId\",dataSourceId,\"byId\"],null)\n        return cache ? Object.keys(cache).map(item => cache[item]).sort(sortIds) : false\n    },[falcorCache,dataSourceId])\n\n    const onClickView = (item) =>{\n        setActiveId(item.id.value)\n    }\n\n    const navigation = [\n        { name: 'Map', href: `/v2/views/${activeId}/map`, icon: MapIcon, current: true, count: '5' },\n        { name: 'Table', href: `/v2/views/${activeId}/table`, icon: TableIcon, current: false },\n        { name: 'View Meta data', href: '#', icon: FolderIcon, current: false, count: '19' },\n        { name: 'Charts', href: '#', icon: ChartBarIcon, current: false },\n    ]\n\n    return (\n        \n        <TigLayout>\n            <div className='border-t-2 border-teal-600'>\n            <div className='bg-teal-600 text-2xl w-28 p-4 text-white mb-2'> Catalog </div>\n                <div className=\"flex\">\n               \n                <div className=\"flex flex-col flex-1\">\n                    <div className=\"md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3\">\n                        <button\n                            className=\"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500\"\n                            /*onClick={() => setSidebarOpen(true)}*/\n                        >\n                            <span className=\"sr-only\">Open sidebar</span>\n                            <MenuIcon className=\"h-6 w-6\" aria-hidden=\"true\" />\n                        </button>\n                    </div>\n                    <main className=\"flex-1 relative z-0\">\n                        <div className=\"px-6\">\n                            <div className=\"border-b py-4\">\n                                {/*<h1 className=\"text-2xl tracking-tight font-extrabold text-gray-900 sm:text-2xl md:text-6xl\">\n                                    <span className=\"block text-indigo-600 xl:inline\">{location.state.name || ''}</span>\n                                </h1>*/}\n                                <p className=\"mt-3 text-base text-gray-700\">\n                                    {location.state.description || ''}\n                                </p>\n                            </div>\n                            <div className=\"px-6 \">\n                                \n                                    {dataSource ?\n                                        <ul className=\"pt-4\">\n                                            {dataSource.map((item) => (\n                                                <li key={item.id.value}\n                                                    className={\n                                                        activeId === item.id.value ? '  px-6 py-2 sm:px-6 ring-1 ring-offset-2 ring-indigo-500' :\n                                                            ' px-4 py-2 sm:px-6'\n                                                    }\n\n                                                >\n                                                    <div className=\"flex\">\n                                                        <div className=\"flex-1\">\n                                                            \n                                                                <div className=\"hover:underline cursor-pointer\" onClick={() => onClickView(item)}>\n                                                                    <p className=\"text-lg font-medium text-gray-900\">\n                                                                    {item.name.value}\n                                                                     </p>\n                                                                </div>\n                                                           \n                                                        </div>\n                                                        <MenuComponent/>\n                                                    </div>\n                                                    {/*<div className=\"opacity-50 py-4\">\n                                                        <p>{item.description.value || 'No Description'}</p>\n                                                    </div>*/}\n                                                </li>\n                                            ))}\n                                        </ul>\n                                        :<div>Loading ...</div>}\n                            </div>\n                        </div>\n                    </main>\n                </div>\n                 <div className=\" hidden md:flex md:flex-shrink-0\">\n                    <div className=\"flex flex-col w-64\">\n                        {/* Sidebar component, swap this element with another sidebar if you like */}\n                        <div className=\"flex flex-col h-0 flex-1 border-l border-gray-200 bg-white\">\n                            <div className=\"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto\">\n                                <nav className=\"mt-5 flex-1 px-2 bg-white space-y-1\">\n                                    {navigation.map((item) => (\n                                        <a\n                                            key={item.name}\n                                            href={item.href}\n                                            className={classNames(\n                                                item.current ? 'bg-gray-100 text-gray-900' : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900',\n                                                'group flex items-center px-2 py-2 text-sm font-medium rounded-md'\n                                            )}\n                                        >\n                                            <item.icon\n                                                className={classNames(\n                                                    item.current ? 'text-gray-500' : 'text-gray-400 group-hover:text-gray-500',\n                                                    'mr-3 flex-shrink-0 h-6 w-6'\n                                                )}\n                                                aria-hidden=\"true\"\n                                            />\n                                            {item.name}\n                                        </a>\n                                    ))}\n                                </nav>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            </div>\n        </TigLayout>\n    )\n}\n\n\n\nconst config = {\n    path: \"/datasource/:dataSourceId\",\n    exact: true,\n    mainNav: true,\n    name: 'Views Data Source',\n    component: Views,\n    layout: 'Simple',\n    layoutSettings: {\n        fixed: true,\n        headerBar: true,\n        logo: \"AVAIL\",\n        navBar: 'top',\n        auth: true\n    }\n}\n\n\n\nexport default config;\n","import React from 'react';\n\nconst Admin = () =>\n  <div className='h-screen flex-1 flex flex-col text-white bg-gray-800'>\n      <div className=\"flex-1 flex items-center justify-center flex-col\">\n        <div className=\"text-6xl font-bold\">TDS</div>\n        <div className=\"text-xl\">Management</div>\n      </div>\n  </div>\n\nconst config = {\n  path: \"/subdir/admin\",\n  exact: true,\n  mainNav: true,\n  name: 'Home',\n  component: Admin,\n  layoutSettings: {\n    fixed: true,\n    headerBar: true,\n    logo: \"AVAIL\",\n    navBar: 'side'\n  }\n}\n\n\n\nexport default config;\n","import React from 'react';\nimport TigLayout from 'components/tig/TigLayout'\n\nconst NoMatch = () =>\n  <TigLayout>\n    <div className='h-screen -mt-24 flex-1 flex flex-col text-gray-900 bg-white'>\n        <div className=\"flex-1 flex items-center justify-center flex-col\">\n          <div className=\"text-6xl font-bold\">404</div>\n          <div className=\"text-xl\">Page not Found</div>\n          <div className=\"text-xl\">Oops, Something went missing...</div>\n        </div>\n    </div>\n  </TigLayout>\n\nconst config = {\n  mainNav: false,\n  component: NoMatch,\n  layout: \"Simple\",\n  layoutSettings: {\n    fixed: true,\n    headerBar: true\n  }\n}\n\nexport default config;\n","\n\nconst AuthConfig = {\n  type: \"ams-manager\",\n  props: {\n    showHeaders: false\n  },\n  wrappers: [\n    // \"ams-manager\",\n    \"ams-redux\",\n    \"ams-router\"\n  ],\n  children: [\n    { type: \"ams-login\" },\n    { type: \"ams-reset-password\" },\n    { type: \"ams-logout\",\n// @props.redirectTo\n// Optional prop. Defaults to \"/\".\n// Redirects user to URL after logging out.\n      // props: { redirectTo: \"/\" }\n    },\n\n    { type: \"ams-signup\",\n// @props.addToGroup\n// Optional prop. Defaults to false.\n// Adds user to group (must have auth level 0 in all projects) instead of creating a request that must be accepted by admin.\n      props: { addToGroup: \"TDS Public\" }\n    },\n    { type: \"ams-verify-request\" }, // This is only required when addToGroup prop is included with ams-signup\n    // { type: \"ams-verify-email\" }, // This is only required when addToGroup prop is not included with ams-signup\n\n    { type: \"ams-set-password\" },\n\n    { type: \"ams-profile\" },\n    { type: \"ams-accept-invite\" },\n\n    { type: \"ams-directory\" },\n\n    { type: \"ams-project-management\"\n// @props.authLevel\n// Optional prop. This prop can be applied to any AMS child.\n// If set, users must have equal or higher authLevel to view this page.\n// Defaults to 5 for \"ams-project-management.\"\n      // props: { authLevel: 5 }\n    }\n  ]\n}\n\nconst auth = {\n  path: \"/auth\",\n  mainNav: false,\n  // layout: 'Simple',\n  layoutSettings: {\n    fixed: true,\n    navBar: 'top',\n    headerBar: false\n  },\n  component: AuthConfig\n}\nexport default auth;\n","import React from \"react\"\n\nimport { useTheme } from \"@availabs/avl-components\"\n\nexport const SidebarContext = React.createContext({})\n\nexport const useSidebarContext = () => {\n  return React.useContext(SidebarContext);\n}\n\nconst InitialState = {\n  Comp: null,\n  top: 0,\n  compProps: {},\n  open: true,\n  transitioning: false\n}\nconst InitState = open => ({\n  ...InitialState,\n  open\n})\nconst Reducer = (state, action) => {\n  const { type, ...payload } = action;\n  switch (type) {\n    case \"update-state\":\n      return {\n        ...state,\n        ...payload\n      }\n    default:\n      return state;\n  }\n}\n\nconst Shift = {\n  value: 0.25,\n  unit: \"rem\"\n}\n\nconst Toggle = ({ togglePosition, position, doToggle, open, dir, theme, padding }) => {\n  switch (togglePosition) {\n    case \"middle\":\n      return (\n        <div className={ `\n            rounded z-10 py-1 absolute hover:${ theme.textInfo }\n            ${ theme.sidebarBg } cursor-pointer flex flex-col\n            hover:${ theme.menuBg } transition ${ position }-0\n          ` }\n          style={ {\n            transform: `translateY(-50%)`,\n            top: \"50%\"\n          } }\n          onClick={ doToggle }>\n\n          <div className=\"fa fa-caret-left text-2xl pl-1 pr-2\"\n            style={ {\n              transform: `scaleX(${ (open ? 1 : -1) * dir }`,\n              transition: \"transform 500ms\"\n            } }/>\n          <div className=\"fa fa-caret-left text-2xl pl-1 pr-2\"\n            style={ {\n              transform: `scaleX(${ (open ? 1 : -1) * dir }`,\n              transition: \"transform 500ms ease 250ms\"\n            } }/>\n          <div className=\"fa fa-caret-left text-2xl pl-1 pr-2\"\n            style={ {\n              transform: `scaleX(${ (open ? 1 : -1) * dir }`,\n              transition: \"transform 500ms ease 500ms\"\n            } }/>\n        </div>\n      )\n    default:\n      return (\n        <div onClick={ doToggle }\n          style={ {\n            transform: `translateX(${ open ? `-${ padding }px` : \"52px\" })`,\n            transition: \"all 500ms\"\n          } }\n          className={ `\n            ${ theme.sidebarBg } py-1 px-2\n            hover:${ theme.menuBg } hover:${ theme.textInfo }\n            z-10 cursor-pointer\n            absolute ${ position }-0 top-0\n          ` }>\n          <div className=\"fa fa-caret-left text-lg\"\n            style={ {\n              transform: `scaleX(${ (open ? 1 : -1) * dir })`,\n              transition: \"transform 500ms\"\n            } }/>\n        </div>\n      )\n  }\n}\n\n\nexport const CollapsibleSidebar = ({ placeBeside,\n                                      width = 320,\n                                      padding = 8,\n                                      children,\n                                      startOpen = true,\n                                      position = \"left\",\n                                      customTheme= {},\n                                      togglePosition,\n                                      minWidth='w-0',\n                                      showToggle = true,\n                                      shift = Shift }) => {\n\n  const [state, dispatch] = React.useReducer(Reducer, startOpen, InitState);\n\n  const { open, transitioning } = state;\n\n  const setOpen = React.useCallback(open => {\n    dispatch({ type: \"update-state\", open, transitioning: true });\n    timeout.current = setTimeout(dispatch, 0, { type: \"update-state\", transitioning: false });\n  }, []);\n\n  const dir = position === \"left\" ? 1 : -1;\n\n  const timeout = React.useRef();\n\n  React.useEffect(() => {\n    return () => clearTimeout(timeout.current);\n  }, []);\n\n  const doToggle = React.useCallback(e => {\n    setOpen(open > 0 ? open - 1 : 1);\n  }, [open, setOpen]);\n\n  const [node, setNode] = React.useState();\n\n  const extendSidebar = React.useCallback(({ Comp, top = 0, compProps = {} }) => {\n    if (open === 0) return;\n    setOpen(2);\n    const sidebarTop = node ? node.getBoundingClientRect().top : 0;\n    if (typeof top === \"string\") {\n      top = `calc(${ top } - ${ sidebarTop }px)`;\n    }\n    else {\n      top -= sidebarTop;\n    }\n    dispatch({ type: \"update-state\", Comp, compProps, top });\n  }, [open, setOpen, node]);\n  const passCompProps = React.useCallback(compProps => {\n    if (open !== 2) return;\n    dispatch({ type: \"update-state\", compProps });\n  }, [open]);\n  const closeExtension = React.useCallback(() => {\n    if (open !== 2) return;\n    setOpen(1);\n  }, [open, setOpen]);\n\n  const contextValue = React.useMemo(() => {\n    return { ...state, extendSidebar, passCompProps, closeExtension, open, doToggle };\n  }, [extendSidebar, passCompProps, closeExtension, state, open, doToggle]);\n\n  const theme = {...useTheme(),...customTheme};\n\n  const styleWidth = `calc(${ (width - padding * 2) * open }px - ${ open > 1 ? `${ shift.value * (open - 1) }${ shift.unit }` : \"0rem\" })`;\n\n  return (\n    <div className={ `absolute ${ position }-0 top-0 bottom-0 z-30` }\n      style={ { padding: `${ padding }px` } }>\n\n      <SidebarContext.Provider value={ contextValue }>\n\n        <div className=\"h-full relative\"\n          style={ {\n            transition: \"width 500ms\",\n            width: styleWidth\n          } }>\n\n          <div className=\"absolute top-0 bottom-0\"\n            style={ {\n              [position]: `calc(100% + ${ padding }px - ${ open ? 0 : padding }px)`,\n              transition: `${ position } 500ms`\n            } }>\n\n            { placeBeside }\n\n            { !showToggle ? null :\n              <Toggle togglePosition={ togglePosition }\n                position={ position }\n                doToggle={ doToggle }\n                open={ open } dir={ dir }\n                theme={ theme }\n                padding={ padding }/>\n            }\n\n          </div>\n\n          <ExtendedSidebar top={ state.top } open={ open === 2 }\n            transitioning={ transitioning }\n            width={ width} padding={ padding }>\n\n            { typeof state.Comp !== \"function\" ? state.Comp :\n              <state.Comp { ...state.compProps }/>\n            }\n\n          </ExtendedSidebar>\n\n          <Expandable open={ open } ref={ setNode }\n            transitioning={ transitioning }\n            position\n            minWidth={minWidth}\n            width={ width } padding={ padding }>\n\n            { children }\n\n          </Expandable>\n\n        </div>\n\n      </SidebarContext.Provider>\n    </div>\n  )\n}\n\nexport const Expandable = React.forwardRef(({ open, transitioning, width, minWidth='w-0',padding, children, heightFull = true }, ref) => {\n\n  const theme = useTheme();\n\n  const hFull = heightFull ? \"h-full\" : \"\";\n\n  return (\n    <div className={ `${ hFull } ${open && !transitioning ? 'w-full' : minWidth}` } ref={ ref }\n      style={ {\n        //overflow: open && !transitioning ? \"visible\" : 'visible'\n      } }>\n      <div className={ `${ hFull } scrollbar-sm overflow-y-auto overflow-x-hidden ${open && !transitioning ? 'w-full' : minWidth}`}\n        style={ { transition: \"width 500ms\" } }\n       >\n\n        <div className={ `\n          absolute top-0 right-0 bottom-0 left-0 pointer-events-none z-10 \n          opacity-0` } />\n        { children }\n\n      </div>\n    </div>\n  )\n})\n\nconst ExtendedSidebar = ({ width, minWidth='w-0', padding, open, top = 0, children, ...props }) => {\n  let remMinWidth = minWidth.split('-')[1] * .25\n  return (\n    <div className=\"absolute\"\n      style={ {\n        width: `${ open ? `${(width - padding * 2)}px` : `${remMinWidth}rem`}` ,\n        left: `calc(${ width - padding * 2 }px - 0.25rem)`,\n        transition: \"width 500ms\",\n        top: typeof top === \"string\" ? top : `${ top }px`\n      } }>\n\n      <Expandable { ...props } heightFull={ false }\n        width={ width } minWidth={minWidth} padding={ padding } open={ open }\n        >\n\n        { children }\n\n      </Expandable>\n\n    </div>\n  )\n}\n","import React from \"react\";\n\nimport get from \"lodash.get\";\n\nimport {\n  Select,\n  useTheme,\n  ColorBar,\n  DummyLegendTools,\n  useLegendReducer,\n} from \"@availabs/avl-components\";\n\nimport {\n  useSidebarContext,\n} from './CollapsibleSidebar'\n\nconst LayerPanel = ({ layer, layersLoading, ...rest }) => {\n  const [open, setOpen] = React.useState(true),\n    toggleOpen = React.useCallback(\n      (e) => {\n        setOpen(!open);\n      },\n      [open, setOpen]\n    );\n\n  const theme = useTheme();\n\n  const filters = React.useMemo(() => {\n    return Object.values(layer.filters).map(\n      ({ name, type, layerId, active = true, ...rest }, i) => {\n        if (!active) return;\n        switch (type) {\n          default:\n            return (\n              <div\n                className={`pt-2 ${theme.bg} p-1 rounded`}\n                key={`${layerId}-${name}`}\n              >\n                <div className=\"text-base leading-4 mb-1\">{name}</div>\n                <Select {...rest} removable={rest.multi ? true : false} />\n              </div>\n            );\n        }\n      }\n    );\n  }, [layer.filters, theme]);\n\n  return (\n    <div className={`${theme.menuBg} p-1 mb-1 rounded relative`}>\n      <div\n        className={`\n        absolute top-0 bottom-0 left-0 right-0 z-10 opacity-50\n        ${Boolean(layersLoading[layer.id]) ? \"block\" : \"hidden\"}\n        ${theme.sidebarBg}\n      `}\n      />\n\n      <LayerHeader\n        layer={layer}\n        {...rest}\n        open={open}\n        toggleOpen={toggleOpen}\n      />\n\n      <div style={{ display: open ? \"block\" : \"none\" }}>\n        {!layer.legend ? null : <LegendControls layer={layer} {...rest} />}\n        {filters}\n      </div>\n    </div>\n  );\n};\nexport default LayerPanel;\n\nexport const Icon = ({\n  onClick,\n  cursor = \"cursor-pointer\",\n  className = \"\",\n  style = {},\n  children,\n}) => {\n  const theme = useTheme();\n  return (\n    <div\n      onClick={onClick}\n      className={`\n        ${cursor} ${className} transition h-6 w-6\n        hover:${theme.menuTextActive} flex items-center justify-center\n      `}\n      style={{ ...style }}\n    >\n      {children}\n    </div>\n  );\n};\nconst LayerHeader = ({ layer, toggleOpen, open, MapActions }) => {\n  const theme = useTheme();\n\n  return (\n    <div className={`flex flex-col px-1 ${theme.bg} rounded`}>\n      <div className=\"flex items-center\">\n        <Icon cursor=\"cursor-move\">\n          <span className=\"fa fa-bars mr-1\" />\n        </Icon>\n        <div className=\"font-semibold text-lg leading-5\">{layer.name}</div>\n        <div className=\"flex-1 flex justify-end\">\n          {!layer.isDynamic ? null : (\n            <Icon onClick={(e) => MapActions.removeDynamicLayer(layer)}>\n              <span className=\"fa fa-trash\" />\n            </Icon>\n          )}\n          <Icon onClick={(e) => MapActions.removeLayer(layer)}>\n            <span className=\"fa fa-times\" />\n          </Icon>\n          <Icon onClick={toggleOpen}>\n            <span className={`fa fa-sm ${open ? \"fa-minus\" : \"fa-plus\"}`} />\n          </Icon>\n        </div>\n      </div>\n      <div className=\"flex items-center\" style={{ marginTop: \"-0.25rem\" }}>\n        {layer.toolbar.map((tool, i) => (\n          <LayerTool\n            MapActions={MapActions}\n            layer={layer}\n            tool={tool}\n            key={i}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nconst LegendControls = ({ layer, MapActions }) => {\n  const theme = useTheme();\n\n  const {\n    extendSidebar,\n    passCompProps,\n    closeExtension,\n    open,\n  } = useSidebarContext();\n\n  const range = get(layer, [\"legend\", \"range\"], []);\n\n  const [toolState, dispatch] = useLegendReducer(range.length);\n\n  const updateLegend = React.useCallback(\n    (update) => {\n      MapActions.updateLegend(layer, update);\n    },\n    [layer, MapActions]\n  );\n\n  const ref = React.useRef();\n\n  const onClick = React.useCallback(\n    (e) => {\n      if (open === 2) return closeExtension();\n\n      const rect = ref.current.getBoundingClientRect();\n      const compProps = { layer, range, updateLegend, dispatch, toolState };\n      extendSidebar({\n        Comp: LegendSidebar,\n        compProps,\n        top: `calc(${rect.top}px - 0.5rem)`,\n      });\n    },\n    [\n      ref,\n      extendSidebar,\n      closeExtension,\n      open,\n      layer,\n      range,\n      updateLegend,\n      dispatch,\n      toolState,\n    ]\n  );\n\n  React.useEffect(() => {\n    passCompProps({ layer, range, updateLegend, dispatch, toolState });\n  }, [layer, range, updateLegend, toolState, passCompProps, dispatch]);\n\n  return (\n    <div\n      ref={ref}\n      className={`\n      mt-1 ${theme.bg} hover:${theme.accent1}\n      px-1 pb-1 rounded transition relative cursor-pointer\n    `}\n      onClick={onClick}\n    >\n      <div>Legend Controls</div>\n      <ColorBar colors={range} small />\n    </div>\n  );\n};\nconst LegendSidebar = ({ layer, range, updateLegend, dispatch, toolState }) => {\n  const theme = useTheme();\n  return (\n    <div\n      className={`\n        p-1 rounded-r cursor-auto ${theme.sidebarBg} w-full\n      `}\n    >\n      <div className={`${theme.menuBg} relative p-1 rounded`}>\n        <div className={`rounded p-1 ${theme.bg}`}>\n          <DummyLegendTools\n            layer={layer}\n            current={range}\n            updateLegend={updateLegend}\n            dispatch={dispatch}\n            {...toolState}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst checkDefaultTools = (tool) => {\n  if (typeof tool !== \"string\") return tool;\n\n  switch (tool) {\n    case \"toggle-visibility\":\n      return {\n        tooltip: \"Toogle Visibility\",\n        icon: (layer) => (layer.isVisible ? \"fa-eye\" : \"fa-eye-slash\"),\n        action: ({ toggleVisibility }, layer) => toggleVisibility(layer),\n      };\n    default:\n      return {\n        tooltip: `Unknown Tool \"${tool}\"`,\n        icon: \"fa-frown\",\n        action: (e) => {},\n      };\n  }\n};\n\nconst LayerTool = ({ tool, MapActions, layer }) => {\n  const Tool = React.useMemo(() => {\n    return checkDefaultTools(tool);\n  }, [tool]);\n\n  const action = React.useCallback(\n    (e) => {\n      Tool.action(MapActions, layer);\n    },\n    [Tool, MapActions, layer]\n  );\n\n  const icon = typeof Tool.icon === \"function\" ? Tool.icon(layer) : Tool.icon;\n\n  return (\n    <Icon onClick={action}>\n      <span className={`fa fa-sm ${icon}`} />\n    </Icon>\n  );\n};\n","import React from \"react\"\n\nimport { Select, useTheme,/*CollapsibleSidebar*/ } from \"@availabs/avl-components\"\n\nimport { CollapsibleSidebar, useSidebarContext } from './CollapsibleSidebar'\n\nimport LayerPanel from \"./LayerPanel\"\n\nconst LayersTab = ({ inactiveLayers, activeLayers, MapActions, ...rest }) => {\n\n  const theme = useTheme();\n\n  return (\n    <>\n      { !inactiveLayers.length ? null :\n        <div className={ `mb-1 p-1 ${ theme.menuBg } ${theme.rounded}` }>\n          <div className={ `p-1 ${ theme.bg } ${theme.rounded}` }>\n            <Select options={ inactiveLayers }\n              placeholder=\"Add a Layer...\"\n              accessor={ ({ name }) => name }\n              value={ null } multi={ false }\n              searchable={ false }\n              onChange={ MapActions.addLayer }/>\n          </div>\n        </div>\n      }\n      { activeLayers.map(layer =>\n          <LayerPanel\n            key={ layer.id } { ...rest }\n            layer={ layer } MapActions={ MapActions }/>\n        )\n      }\n    </>\n  )\n}\nconst StylesTab = ({ mapStyles, styleIndex, MapActions, mapboxMap }) => {\n\n  const theme = useTheme();\n\n  const [loading, setLoading] = React.useState(false);\n  React.useEffect(() => {\n    if (loading) {\n      const done = () => setLoading(false);\n      mapboxMap.once(\"style.load\", done);\n      return () => mapboxMap.off(\"style.load\", done);\n    }\n  }, [loading, mapboxMap]);\n\n  const updateStyle = React.useCallback(index => {\n    setLoading(true);\n    MapActions.setMapStyle(index);\n  }, [MapActions]);\n\n  return (\n    <div className={ `${ theme.menuBg } ${theme.rounded}` }>\n\n      <div className={ `\n        absolute top-0 bottom-0 left-0 right-0 opacity-50 z-10\n        ${ theme.sidebarBg } ${ loading ? \"block\" : \"hidden\" }\n      ` }/>\n\n      <div className={ `${ theme.bg } p-1 ${theme.rounded} relative` }>\n\n        { mapStyles.map(({ name, imageUrl }, i) =>\n            <div key={ i } className={ `\n              ${ i === 0 ? \"\" : \"mt-1\" } p-1 ${theme.rounded} hover:${ theme.menuTextActive }\n              flex items-center hover:${ theme.accent2 } transition\n              ${ i === styleIndex ?\n                `border-r-4 ${ theme.borderInfo } ${ theme.accent2 }` :\n                `${ theme.accent1 } cursor-pointer`\n              }\n            ` } onClick={ i === styleIndex ? null : e => updateStyle(i) }>\n              <img src={ imageUrl } alt={ name } className={`${theme.rounded}`}/>\n              <div className=\"ml-2\">{ name }</div>\n            </div>\n          )\n        }\n\n      </div>\n    </div>\n  )\n}\n\nconst SidebarTabs = {\n  layers: {\n    icon: \"fa fa-filter\",\n    Component: LayersTab\n  },\n  styles: {\n    icon: \"fa fa-layer-group\",\n    Component: StylesTab\n  }\n}\n\nconst Tab = ({i, icon, MapActions, sidebarTabIndex}) => {\n    const {open, doToggle} = useSidebarContext();\n    const theme = { ...useTheme() };\n    return (\n      <div key={ i } onClick={ e => {\n        //console.log('onclick', open, doToggle)\n        if((!open) || (open && i === sidebarTabIndex)  ) {\n          doToggle()\n        }\n\n        MapActions.setSidebarTab(i) \n      }}\n        className={ `\n           rounded-t-lg \n           inline-block\n        ` }>\n        <div className={ `\n            w-10 h-11 hover:text-yellow-600 text-xs\n            ${i === 0 ? 'rounded-tl-lg ' : '' }\n            ${ open && i === sidebarTabIndex ?\n              'bg-blue-500 text-white' :\n              ` cursor-pointer hover:bg-gray-200`\n            } \n            flex items-center justify-center\n          ` }>\n            <span className={ `fa fa-lg ${ icon }` }/>\n          </div>\n          \n        </div>\n    )\n}\n\nconst Sidebar = ({ open, sidebarTabIndex, MapActions, tabs, title, children, togglePosition, showSidebar, sidebarTabPosition, ...rest }) => {\n\n  const c = useSidebarContext();\n  const Tabs = React.useMemo(() => {\n    return tabs.map(tab => {\n      if (tab in SidebarTabs) {\n        return SidebarTabs[tab];\n      }\n      return tab;\n    })\n  }, [tabs]);\n\n  const theme = { ...useTheme() };\n\n  return (\n    <CollapsibleSidebar\n      togglePosition={ togglePosition }\n      minWidth={'w-10'}\n      startOpen={ Boolean(open) && Boolean(showSidebar) }\n      showToggle={ false }\n      placeBeside={ children }>\n\n      { !showSidebar ? null :\n        <div className={ `h-full rounded flex ${sidebarTabPosition === 'top' ? 'flex-col' : '' }`}  style={{background: 'rgba(255,255,255, 0.5)'}}>\n          \n          <div className={`mb-1 rounded-t-lg flex ${sidebarTabPosition === 'top' ? '' : 'flex-col items-center'}`} style={{background: 'rgba(255,255,255, 0.7)'}}>\n            { Tabs.map(({ icon }, i) => (\n              <Tab icon={icon} key={i} i={i} MapActions={ MapActions } sidebarTabIndex={ sidebarTabIndex}/>)\n            )\n          }\n          </div>\n\n          <div className='flex-1 p-2'>\n            { \n              !title ? null :\n              <div className=\"text-xl font-bold ml-1\">\n                { title }\n              </div>\n            }\n            { Tabs.map(({ Component }, i) => (\n                <div key={ i } className=\"relative z-10\"\n                  style={ { display: i === sidebarTabIndex ? \"block\" : \"none\" } }>\n                  <Component { ...rest } MapActions={ MapActions }/>\n                </div>\n              ))\n            }\n          </div>\n        </div>\n      }\n\n    </CollapsibleSidebar>\n  )\n}\nexport default Sidebar;\n","import React from \"react\"\n\nimport { ScalableLoading, useTheme } from \"@availabs/avl-components\"\n\nconst LoadingLayer = ({ layer, progress }) => {\n\n  const theme = useTheme();\n\n  return (\n    <div className={ `\n        ${ theme.sidebarBg } w-72 p-1 mt-2\n        rounded-tl rounded-bl rounded-tr-full rounded-br-full\n      ` }\n      style={ {\n      } }>\n      <div className={ `${ theme.menuBg } p-1 rounded-tr-full rounded-br-full` }>\n        <div className={ `${ theme.bg } p-1 rounded-tr-full rounded-br-full flex` }>\n          <div className=\"flex-1 text-lg font-medium flex items-center\">\n            <div className='flex-1'>{ layer.name }</div>\n            <div className={`font-light px-2`}>\n              {layer.state.progress ? `${layer.state.progress}%` : '' }\n            </div>\n          </div>\n          <div className={ `${ theme.menuTextActive }` }>\n            <ScalableLoading scale={ 0.35 } color=\"currentColor\"/>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default LoadingLayer;\n","import React from \"react\"\n\nimport { useTheme } from \"@availabs/avl-components\"\n\nimport { Icon } from \"./LayerPanel\"\n\nconst getTranslate = (pos, { width, height }) => {\n\n  const gap = 30, padding = 10, { x, y } = pos;\n\n  const yMax = height,\n    yTrans = `max(\n      ${ padding }px,\n      min(calc(${ y }px - 50%), calc(${ yMax - padding }px - 100%))\n    )`;\n  if (x < width * 0.5) {\n    return `translate(\n      ${ x + gap }px,\n      ${ yTrans }\n    )`\n  }\n  return `translate(\n    calc(-100% + ${ x - gap }px),\n    ${ yTrans }\n  )`\n}\n\n// const getPinnedTranslateOld = ({ x, y }) => {\n//   const gap = 30;\n//   return `translate(${ x + gap }px, calc(${ y - 20 }px - 50%))`;\n// }\n\nconst getPinnedTranslate = ({ x, y }, orientation) => {\n\n  const gap = 30;\n\n  const yTrans = `calc(${ y }px - 50%)`;\n\n  if (orientation === \"right\") {\n    return `translate(\n      ${ x + gap }px,\n      ${ yTrans }\n    )`\n  }\n  return `translate(\n    calc(-100% + ${ x - gap }px),\n    ${ yTrans }\n  )`\n}\nconst getTransform = ({ x }, orientation) => {\n  if (orientation === \"right\") {\n    return \"translate(-50%, -50%) rotate(45deg) skew(-15deg, -15deg)\"\n  }\n  return \"translate(50%, -50%) rotate(45deg) skew(-15deg, -15deg)\"\n}\n\nconst RemoveButton = ({ orientation, children }) => {\n  const theme = useTheme();\n  return (\n    <div style={ {\n        transform: orientation === \"left\" ?\n          \"translate(-0.75rem, -0.75rem)\" : \"translate(0.75rem, -0.75rem)\"\n      } }\n      className={ `\n        ${ theme.bg }\n        rounded absolute inline-block top-0 z-20\n        ${ orientation === \"left\" ? \"left-0\" : \"right-0\" }\n      ` }>\n      { children }\n    </div>\n  )\n}\n\nexport const PinnedHoverComp = ({ children, remove, id, project, lngLat, width }) => {\n\n  const pos = project(lngLat);\n\n  const orientation = React.useRef(pos.x < width * 0.5 ? \"right\" : \"left\");\n\n  const style = React.useMemo(() => {\n    return {\n      top: \"50%\",\n      transform: getTransform(pos, orientation.current)\n    };\n  }, [pos]);\n\n  const theme = useTheme();\n\n  return (\n    <div className={ `\n        absolute top-0 left-0 z-20 inline-block\n        rounded whitespace-nowrap hover-comp\n        pointer-events-auto\n        p-1 rounded ${ theme.sidebarBg }\n        grid grid-cols-1 gap-1\n      ` }\n      style={ {\n        transform: getPinnedTranslate(pos, orientation.current),\n        boxShadow: \"2px 2px 8px 0px rgba(0, 0, 0, 0.75)\"\n      } }>\n\n      <div className={ `\n          absolute w-6 h-6 ${ theme.sidebarBg } rounded-bl rounded-tr\n          ${ orientation.current === \"left\" ? \"right-0\" : \"left-0\" }\n        ` }\n        style={ style }/>\n\n        { children }\n\n        <RemoveButton orientation={ orientation.current }>\n          <Icon onClick={ e => remove(id) }>\n            <span className=\"fa fa-times\"/>\n          </Icon>\n        </RemoveButton>\n\n    </div>\n  )\n}\n\nexport const HoverCompContainer = ({ show, children, lngLat, project, ...rest }) => {\n  const theme = useTheme();\n\n  const pos = project(lngLat);\n\n  return (\n    <div className={ `\n        absolute top-0 left-0 z-20\n        rounded whitespace-nowrap hover-comp\n        pointer-events-none\n        p-1 rounded ${ theme.sidebarBg }\n        grid grid-cols-1 gap-1\n      ` }\n      style={ {\n        display: show ? \"grid\" : \"none\",\n        transform: getTranslate(pos, rest),\n        boxShadow: \"2px 2px 8px 0px rgba(0, 0, 0, 0.75)\",\n        // transition: \"transform 0.15s ease-out\"\n      } }>\n\n      { children }\n\n    </div>\n  )\n}\n","import React from \"react\";\n\nimport get from \"lodash.get\";\n\nimport { useTheme, Legend } from \"@availabs/avl-components\";\n\nimport { Icon } from \"./LayerPanel\";\n\nconst InfoBoxContainer = ({\n  activeLayers,\n  width = 320,\n  padding = 8,\n  MapActions,\n  ...props\n}) => {\n  const [legendLayers, infoBoxLayers, infoBoxWidth] = activeLayers.reduce(\n    (a, c) => {\n      if (c.legend) {\n        const { show = true } = c.legend;\n        let bool = show;\n        if (typeof show === \"function\") {\n          bool = show(c);\n        }\n        if (bool) {\n          a[0].push(c);\n        }\n      }\n      const shownInfoBoxes = c.infoBoxes.filter(({ show = true }) => {\n        let bool = show;\n        if (typeof show === \"function\") {\n          bool = show(c);\n        }\n        return bool;\n      });\n      if (shownInfoBoxes.length) {\n        a[1].push([c, shownInfoBoxes]);\n        a[2] = Math.max(\n          a[2],\n          c.infoBoxes.reduce((aa, cc) => Math.max(aa, get(cc, \"width\", 0)), 0)\n        );\n      }\n      return a;\n    },\n    [[], [], width]\n  );\n\n  const theme = useTheme();\n\n  return (\n    <div\n      className={`\n        absolute right-0 top-0 bottom-0\n        flex flex-col items-end z-30\n        pointer-events-none\n      `}\n      style={{ padding: `${padding}px` }}\n    >\n      {legendLayers.map((layer) => (\n        <LegendContainer\n          key={layer.id}\n          {...layer.legend}\n          MapActions={MapActions}\n          layer={layer}\n          padding={padding}\n          infoBoxWidth={infoBoxWidth}\n        />\n      ))}\n\n      {!infoBoxLayers.length ? null : (\n        <div\n          className={`\n            ${theme.sidebarBg} p-1 rounded\n            grid grid-cols-1 gap-1\n            pointer-events-auto overflow-y-auto scrollbar-sm\n          `}\n          style={{\n            width: `${infoBoxWidth - padding * 2}px`,\n          }}\n        >\n          {infoBoxLayers.map(([layer, infoBoxes]) => (\n            <div\n              key={layer.id}\n              className={`\n                  grid grid-cols-1 gap-1\n                  ${theme.menuBg} p-1 rounded\n                `}\n            >\n              {infoBoxes.map((box, i) => (\n                <InfoBox\n                  key={i}\n                  {...props}\n                  {...box}\n                  layer={layer}\n                  MapActions={MapActions}\n                  activeLayers={activeLayers}\n                />\n              ))}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\nexport default InfoBoxContainer;\n\nconst InfoBox = ({\n  layer,\n  Header,\n  Component,\n  MapActions,\n  open = true,\n  ...props\n}) => {\n  const [isOpen, setOpen] = React.useState(open);\n\n  const theme = useTheme();\n\n  return (\n    <div\n      className={`\n      ${theme.bg} px-1 rounded\n    `}\n    >\n      {!Header ? (\n        <div className=\"pt-1\" />\n      ) : (\n        <div\n          className={`\n            rounded text-lg font-bold\n            flex items-center\n          `}\n        >\n          <div\n            className={`\n              flex-1 ${isOpen ? \"opacity-100\" : \"opacity-50\"} transition\n            `}\n          >\n            {typeof Header === \"function\" ? <Header layer={layer} /> : Header}\n          </div>\n          <div className=\"text-base\">\n            <Icon onClick={(e) => setOpen(!isOpen)}>\n              <span className={`fa fa-${isOpen ? \"minus\" : \"plus\"}`} />\n            </Icon>\n          </div>\n        </div>\n      )}\n      {!Component ? null : (\n        <div className={`${isOpen ? \"block\" : \"hidden\"}`}>\n          {typeof Component === \"function\" ? (\n            <Component layer={layer} MapActions={MapActions} {...props} />\n          ) : (\n            Component\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst LegendContainer = ({\n  infoBoxWidth,\n  padding,\n  width = 420,\n  Title,\n  MapActions,\n  layer,\n  ...props\n}) => {\n  const theme = useTheme();\n\n  return (\n    <div\n      className={`\n      ${theme.sidebarBg} p-1 rounded pointer-events-auto\n    `}\n      style={{\n        width: `${Math.max(infoBoxWidth, width) - padding * 2}px`,\n        marginBottom: \"-0.25rem\",\n      }}\n    >\n      <div className={`${theme.menuBg} p-1 rounded`}>\n        <div className={`${theme.bg} px-1 rounded`}>\n          {Title ? (\n            <div className={`font-medium text-lg ${theme.menuText} py-1`}>\n              {typeof Title === \"function\" ? (\n                <Title layer={layer} MapActions={MapActions} />\n              ) : (\n                Title\n              )}\n            </div>\n          ) : (\n            <div className=\"pt-1\" />\n          )}\n          <Legend {...props} />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\"\n\nimport { useTheme, Draggable } from \"@availabs/avl-components\"\n\nconst DraggableModal = ({ Header,\n                          Component,\n                          layer,\n                          MapActions,\n                          modalData,\n                          activeLayers,\n                          layersLoading,\n                          loadingLayers,\n                          inactiveLayers,\n                          ...props }) => {\n\n  const theme = useTheme();\n\n  const { layerId, modalKey, zIndex } = modalData;\n\n  return (\n    <Draggable { ...props } className=\"pointer-events-auto\"\n      onClick={ e => MapActions.bringModalToFront(layerId, modalKey) }\n      onDragStart={ e => MapActions.bringModalToFront(layerId, modalKey) }\n      style={ { zIndex } }\n      toolbar={ [\n        { icon: \"fa-times\",\n          onClick: e => MapActions.closeModal(layerId, modalKey)\n        }\n      ] }>\n      <div className=\"m-1\">\n        { !Header ? null :\n          <div className=\"font-bold text-xl ml-2\">\n            { typeof Header === \"function\" ?\n              <Header layer={ layer } MapActions={ MapActions }/> :\n              Header\n            }\n          </div>\n        }\n        <div className={ `p-1 rounded ${ theme.menuBg }` }>\n          <div className={ `p-1 rounded ${ theme.bg }` }>\n            { <Component layer={ layer }\n                MapActions={ MapActions }\n                activeLayers={ activeLayers }\n                layersLoading={ layersLoading }\n                loadingLayers={ loadingLayers }\n                inactiveLayers={ inactiveLayers }/>\n            }\n          </div>\n        </div>\n      </div>\n    </Draggable>\n  )\n}\nexport default DraggableModal;\n","import React from \"react\"\n\nimport { useTheme } from \"@availabs/avl-components\"\n\nconst MapAction = ({ icon, tooltip, actionFunc,\n                      MapActions, layer,\n                      ...rest }) => {\n  const theme = useTheme();\n  return (\n    <div className={ `${ theme.sidebarBg } p-1 rounded-2xl mb-2` }>\n      <div className={ `${ theme.menuBg } p-1 rounded-2xl` }>\n        <div className={ `\n            ${ theme.bg } hover:${ theme.accent1 }\n            ${ theme.menuText } ${ theme.menuTextHover }\n            w-10 h-10 rounded-2xl cursor-pointer text-lg\n            flex items-center justify-center\n          ` }\n          onClick={ e => actionFunc(MapActions, layer, rest) }>\n          <span className={ `fa ${ icon }` }/>\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default MapAction;\n","import React from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport get from \"lodash.get\";\n\nimport { useSetSize, useFalcor } from \"@availabs/avl-components\";\n// import {  } from 'modules/avl-components/src'\n\nimport Sidebar from \"./components/Sidebar\";\nimport LoadingLayer from \"./components/LoadingLayer\";\nimport {\n  HoverCompContainer,\n  PinnedHoverComp,\n} from \"./components/HoverCompContainer\";\nimport InfoBoxes from \"./components/InfoBoxContainer\";\nimport DraggableModal from \"./components/DraggableModal\";\nimport MapAction from \"./components/MapAction\";\n\nexport const DefaultStyles = [\n  { name: \"Dark\", style: \"mapbox://styles/am3081/ckm85o7hq6d8817nr0y6ute5v\" },\n  { name: \"Light\", style: \"mapbox://styles/am3081/ckm86j4bw11tj18o5zf8y9pou\" },\n  {\n    name: \"Satellite\",\n    style: \"mapbox://styles/am3081/cjya6wla3011q1ct52qjcatxg\",\n  },\n  {\n    name: \"Satellite Streets\",\n    style: \"mapbox://styles/am3081/cjya70364016g1cpmbetipc8u\",\n  },\n];\n\nconst DefaultMapOptions = {\n  center: [-74.180647, 42.58],\n  minZoom: 2,\n  zoom: 10,\n  preserveDrawingBuffer: true,\n  // style: \"mapbox://styles/am3081/cjqqukuqs29222sqwaabcjy29\",\n  styles: DefaultStyles,\n  attributionControl: false,\n  logoPosition: \"bottom-right\",\n};\n\nconst DefaultSidebar = {\n  tabs: [\"layers\", \"styles\"],\n  title: \"\",\n  togglePosition: \"top\",\n};\n\nlet idCounter = 0;\nconst getUniqueId = () => `unique-id-${++idCounter}`;\n\nconst DefaultStaticOptions = {\n  size: [80, 50],\n  center: [-74.180647, 42.58],\n  zoom: 2.5,\n};\nconst getStaticImageUrl = (style, options = {}) => {\n  const { size, center, zoom } = { ...DefaultStaticOptions, ...options };\n  return (\n    `https://api.mapbox.com/styles/v1/${style.slice(16)}/static/` +\n    `${center},${zoom}/${size.join(\"x\")}` +\n    `?attribution=false&logo=false&access_token=${mapboxgl.accessToken}`\n  );\n};\n\nconst InitialState = {\n  map: null,\n  initializedLayers: [],\n  activeLayers: [],\n  dynamicLayers: [],\n  layersLoading: {},\n  hoverData: {\n    data: new Map(),\n    pos: [0, 0],\n    lngLat: {},\n  },\n  pinnedHoverComps: [],\n  pinnedMapMarkers: [],\n  mapStyles: [],\n  styleIndex: 0,\n  sidebarTabIndex: 0,\n  modalData: [],\n  prevLayerStates: {},\n  layerStates: {},\n};\nconst Reducer = (state, action) => {\n  const { type, ...payload } = action;\n  switch (type) {\n    case \"init-layer\":\n      return {\n        ...state,\n        initializedLayers: [...state.initializedLayers, payload.layer.id],\n        // activeLayers: [\n        //   payload.layer.id,\n        //   ...state.activeLayers\n        // ],\n        // layerStates: {\n        //   ...state.layerStates,\n        //   [payload.layer.id]: payload.layer.state\n        // }\n      };\n    case \"loading-start\":\n      return {\n        ...state,\n        layersLoading: {\n          ...state.layersLoading,\n          [payload.layerId]:\n            get(state, [\"layersLoading\", payload.layerId], 0) + 1,\n        },\n      };\n    case \"loading-stop\":\n      return {\n        ...state,\n        // activeLayers: [...state.activeLayers],\n        layersLoading: {\n          ...state.layersLoading,\n          [payload.layerId]: Math.max(\n            0,\n            state.layersLoading[payload.layerId] - 1\n          ),\n        },\n      };\n    case \"activate-layer\":\n      return {\n        ...state,\n        activeLayers: [payload.layer, ...state.activeLayers],\n        layerStates: {\n          ...state.layerStates,\n          [payload.layer.id]: payload.layer.state,\n        },\n        /*prevLayerStates: {\n          ...state.prevLayerStates,\n          [payload.layer.id]: payload.layer.state,\n        },*/\n      };\n    case \"deactivate-layer\":\n      return {\n        ...state,\n        activeLayers: state.activeLayers.filter(\n          ({ id }) => id !== payload.layerId\n        ),\n      };\n    case \"hover-layer-move\": {\n      const { data, layer, HoverComp, pinnable, sortOrder, ...rest } = payload;\n      state.hoverData.data.set(layer.id, {\n        data,\n        HoverComp,\n        layer,\n        pinnable,\n        sortOrder,\n      });\n      return {\n        ...state,\n        hoverData: {\n          ...state.hoverData,\n          ...rest,\n        },\n      };\n    }\n    case \"hover-layer-leave\": {\n      const { layer } = payload;\n      state.hoverData.data.delete(layer.id);\n      return {\n        ...state,\n        hoverData: {\n          ...state.hoverData,\n        },\n      };\n    }\n    case \"pin-hover-comp\": {\n      if (!state.hoverData.data.size) return state;\n\n      const newPinned = {\n        id: getUniqueId(),\n        HoverComps: [...state.hoverData.data.values()]\n          .filter(({ pinnable }) => pinnable)\n          .sort((a, b) => a.sortOrder - b.sortOrder),\n        ...payload,\n      };\n      if (newPinned.HoverComps.length) {\n        return {\n          ...state,\n          pinnedHoverComps: [...state.pinnedHoverComps, newPinned],\n        };\n      }\n      return state;\n    }\n\n    case \"remove-pinned\":\n      return {\n        ...state,\n        pinnedHoverComps: state.pinnedHoverComps.filter((phc) => {\n          if (phc.id !== payload.id) return true;\n          phc.marker.remove();\n          return false;\n        }),\n      };\n    case \"add-dynamic-layer\":\n      return {\n        ...state,\n        dynamicLayers: [...state.dynamicLayers, payload.layer],\n      };\n    case \"remove-dynamic-layer\":\n      return {\n        ...state,\n        dynamicLayers: state.dynamicLayers.filter(\n          ({ id }) => id !== payload.layer.id\n        ),\n      };\n    case \"show-modal\": {\n      const { layerId, modalKey } = payload;\n      if (\n        state.modalData.reduce(\n          (a, c) => a || (c.layerId === layerId && c.modalKey === modalKey),\n          false\n        )\n      )\n        return state;\n      return {\n        ...state,\n        modalData: [...state.modalData, { layerId, modalKey, zIndex: 0 }],\n      };\n    }\n    case \"bring-modal-to-front\": {\n      const { layerId, modalKey } = payload;\n      return {\n        ...state,\n        modalData: state.modalData.map((md) => ({\n          ...md,\n          zIndex: md.layerId === layerId && md.modalKey === modalKey ? 10 : 0,\n        })),\n      };\n    }\n    // case \"update-modal-data\": {\n    //   const { layerId, modalKey, data } = payload;\n    //   return {\n    //     ...state,\n    //     modalData: state.modalData.map(md => {\n    //       if ((md.layerId === layerId) && (md.modalKey === modalKey)) {\n    //         return { ...md, data };\n    //       }\n    //       return md;\n    //     })\n    //   }\n    // }\n    case \"close-modal\":\n      return {\n        ...state,\n        modalData: state.modalData.filter(\n          ({ layerId, modalKey }) =>\n            !(layerId === payload.layerId && modalKey === payload.modalKey)\n        ),\n      };\n    case \"layer-update\": {\n      const { layer, newState } = payload;\n      return {\n        ...state,\n        layerStates: {\n          ...state.layerStates,\n          [layer.id]: newState,\n        },\n      };\n    }\n    case \"layer-updated\": {\n      const { layer } = payload;\n      return {\n        ...state,\n        // prevLayerStates: {\n        //   ...state.prevLayerStates,\n        //   [layer.id]: state.layerStates[layer.id],\n        // },\n      };\n    }\n    case \"set-map-style\":\n    case \"switch-tab\":\n    case \"map-loaded\":\n    case \"update-state\":\n      return {\n        ...state,\n        ...payload,\n      };\n    default:\n      return state;\n  }\n};\n\nconst EmptyArray = [];\nconst EmptyObject = {};\n\n// const toolbarFuncRunner = args => {\n//   if (!args.length) return [];\n//   const [arg, ...rest] = args;\n//   if (typeof arg === \"function\") {\n//     return [arg(...toolbarFuncRunner(rest))];\n//   }\n//   return [arg, ...toolbarFuncRunner(rest)];\n// }\n// const toolbarFuncArgs = ({ action }, layer, MapActions, map) => (\n//   action.map(action => {\n//     if (typeof action === \"function\") return action;\n//     if (typeof action === \"string\") {\n//       const [arg1, arg2] = action.split(\".\");\n//       if (arg1 === \"map\") {\n//         return arg2 ? MapActions[arg2] : map;\n//       }\n//       else if ((arg1 === \"this\") && arg2) {\n//         return layer[arg2].bind(layer);\n//       }\n//     }\n//     return action;\n//   })\n// )\n\nconst AvlMap = (props) => {\n  const {\n    accessToken,\n    mapOptions = EmptyObject,\n    layers = EmptyArray,\n    sidebar = EmptyObject,\n    layerProps = EmptyObject,\n    navigationControl = \"bottom-right\",\n  } = props;\n\n  const sidebarProps = React.useMemo(() => {\n    if (typeof sidebar !== \"object\") {\n      return {\n        showSidebar: Boolean(sidebar),\n      };\n    }\n    return {\n      showSidebar: true,\n      ...sidebar,\n    };\n  }, [sidebar]);\n\n  const { falcor, falcorCache } = useFalcor();\n\n  const [state, dispatch] = React.useReducer(Reducer, InitialState);\n\n  const updateHover = React.useCallback((hoverData) => {\n    dispatch(hoverData);\n  }, []);\n\n  const projectLngLat = React.useCallback(\n    (lngLat) => {\n      return state.map.project(lngLat);\n    },\n    [state.map]\n  );\n\n  const updateFilter = React.useCallback(\n    (layer, filterName, value) => {\n      if (!get(layer, [\"filters\", filterName], null)) return;\n\n      dispatch({ type: \"loading-start\", layerId: layer.id });\n\n      const prevValue = layer.filters[filterName].value;\n\n      layer.filters = {\n        ...layer.filters,\n        [filterName]: {\n          ...layer.filters[filterName],\n          prevValue,\n          value,\n        },\n      };\n\n      Promise.resolve(layer.onFilterChange(filterName, value, prevValue))\n        .then(() => layer.fetchData(falcor))\n        .then(() => layer.render(state.map, falcor))\n        .then(() => {\n          dispatch({ type: \"loading-stop\", layerId: layer.id });\n        });\n    },\n    [state.map, falcor]\n  );\n\n  const fetchData = React.useCallback(\n    (layer) => {\n      dispatch({ type: \"loading-start\", layerId: layer.id });\n\n      Promise.resolve(layer.fetchData(falcor))\n        .then(() => layer.render(state.map, falcor))\n        .then(() => {\n          dispatch({ type: \"loading-stop\", layerId: layer.id });\n        });\n    },\n    [state.map, falcor]\n  );\n\n  const updateLegend = React.useCallback(\n    (layer, update) => {\n      if (!get(layer, \"legend\", null)) return;\n\n      console.log(\"update Legend\", layer.legend, update);\n      layer.legend = {\n        ...layer.legend,\n        ...update,\n      };\n      layer.render(state.map, falcor);\n\n      dispatch({ type: \"update-state\" });\n    },\n    [state.map, falcor]\n  );\n\n  const addDynamicLayer = React.useCallback((layer) => {\n    layer.isDynamic = true;\n\n    dispatch({\n      type: \"add-dynamic-layer\",\n      layer,\n    });\n  }, []);\n  const removeDynamicLayer = React.useCallback(\n    (layer) => {\n      layer._onRemove(state.map);\n\n      dispatch({\n        type: \"remove-dynamic-layer\",\n        layer,\n      });\n    },\n    [state.map]\n  );\n  const toggleVisibility = React.useCallback(\n    (layer) => {\n      layer.toggleVisibility(state.map);\n\n      dispatch({ type: \"update-state\" });\n    },\n    [state.map]\n  );\n  const addLayer = React.useCallback(\n    (layer) => {\n      layer\n        ._onAdd(state.map, falcor, updateHover)\n        .then(() => layer.render(state.map, falcor));\n\n      dispatch({\n        type: \"activate-layer\",\n        layer,\n      });\n    },\n    [state.map, falcor, updateHover /*, singleLayer*/]\n  );\n  const removeLayer = React.useCallback(\n    (layer) => {\n      layer._onRemove(state.map);\n\n      dispatch({\n        type: \"deactivate-layer\",\n        layerId: layer.id,\n      });\n    },\n    [state.map]\n  );\n  const setSidebarTab = React.useCallback((sidebarTabIndex) => {\n    dispatch({\n      type: \"switch-tab\",\n      sidebarTabIndex,\n    });\n  }, []);\n\n  const showModal = React.useCallback((layerId, modalKey) => {\n    dispatch({\n      type: \"show-modal\",\n      layerId,\n      modalKey,\n    });\n  }, []);\n  const closeModal = React.useCallback((layerId, modalKey) => {\n    dispatch({\n      type: \"close-modal\",\n      layerId,\n      modalKey,\n    });\n  }, []);\n  const bringModalToFront = React.useCallback((layerId, modalKey) => {\n    dispatch({\n      type: \"bring-modal-to-front\",\n      layerId,\n      modalKey,\n    });\n  }, []);\n\n  const removePinnedHoverComp = React.useCallback((id) => {\n    dispatch({\n      type: \"remove-pinned\",\n      id,\n    });\n  }, []);\n  const addPinnedHoverComp = React.useCallback(\n    ({ lngLat, hoverData }) => {\n      const marker = new mapboxgl.Marker().setLngLat(lngLat).addTo(state.map);\n      dispatch({\n        type: \"pin-hover-comp\",\n        marker,\n        lngLat,\n      });\n    },\n    [state.map]\n  );\n\n  const saveMapAsImage = React.useCallback(\n    (fileName = \"map.png\") => {\n      const canvas = state.map.getCanvas();\n      const a = document.createElement(\"a\");\n      a.download = fileName;\n      a.href = canvas.toDataURL();\n      a.click();\n    },\n    [state.map]\n  );\n\n  const setMapStyle = React.useCallback(\n    (styleIndex) => {\n      state.map.once(\"style.load\", (e) => {\n        state.activeLayers\n          .slice()\n          .reverse()\n          .reduce((promise, layer) => {\n            return promise.then(() =>\n              layer.onMapStyleChange(state.map, falcor, updateHover)\n            );\n          }, Promise.resolve());\n      });\n      state.activeLayers.forEach((layer) => {\n        layer._onRemove(state.map);\n      });\n      state.map.setStyle(state.mapStyles[styleIndex].style);\n      dispatch({\n        type: \"set-map-style\",\n        styleIndex,\n      });\n    },\n    [state.map, state.mapStyles, state.activeLayers, updateHover, falcor]\n  );\n\n  const MapActions = React.useMemo(\n    () => ({\n      toggleVisibility,\n      addLayer,\n      removeLayer,\n      addDynamicLayer,\n      removeDynamicLayer,\n      updateLegend,\n      setSidebarTab,\n      showModal,\n      closeModal,\n      updateFilter,\n      fetchData,\n      removePinnedHoverComp,\n      addPinnedHoverComp,\n      bringModalToFront,\n      projectLngLat,\n      saveMapAsImage,\n    }),\n    [\n      toggleVisibility,\n      addLayer,\n      removeLayer,\n      addDynamicLayer,\n      removeDynamicLayer,\n      updateLegend,\n      setSidebarTab,\n      fetchData,\n      saveMapAsImage,\n      showModal,\n      closeModal,\n      updateFilter,\n      bringModalToFront,\n      removePinnedHoverComp,\n      addPinnedHoverComp,\n      projectLngLat,\n    ]\n  );\n\n  const MapOptions = React.useRef({ ...DefaultMapOptions, ...mapOptions });\n\n  const id = React.useRef(props.id || getUniqueId());\n\n  // LOAD MAPBOX GL MAP\n  React.useEffect(() => {\n    if (!accessToken) return;\n\n    mapboxgl.accessToken = accessToken;\n\n    const regex = /^mapbox:\\/\\/styles\\//;\n\n    const { style, styles, ...Options } = MapOptions.current;\n\n    const mapStyles = styles.map((style) => ({\n      ...style,\n      imageUrl: getStaticImageUrl(style.style, { center: Options.center }),\n    }));\n    let styleIndex = 0;\n\n    if (regex.test(style)) {\n      const index = mapStyles.reduce((a, c, i) => {\n        return c.style === style ? i : a;\n      }, -1);\n      if (index === -1) {\n        mapStyles.unshift({\n          name: \"Unspecified Style\",\n          style,\n          imageUrl: getStaticImageUrl(style, Options),\n        });\n      } else {\n        styleIndex = index;\n      }\n    }\n\n    const map = new mapboxgl.Map({\n      container: id.current,\n      ...Options,\n      style: mapStyles[styleIndex].style,\n    });\n\n    if (navigationControl) {\n      map.addControl(new mapboxgl.NavigationControl(), navigationControl);\n    }\n\n    map.on(\"move\", (e) => {\n      dispatch({ type: \"update-state\", mapMoved: performance.now() });\n    });\n\n    map.once(\"load\", (e) => {\n      dispatch({ type: \"map-loaded\", map, mapStyles, styleIndex });\n    });\n\n    return () => map.remove();\n  }, [accessToken]);\n\n  // INITIALIZE LAYERS\n  React.useEffect(() => {\n    if (!state.map) return;\n\n    [...layers, ...state.dynamicLayers]\n      .filter(({ id }) => !state.initializedLayers.includes(id))\n      .reverse()\n      .reduce((promise, layer) => {\n        dispatch({ type: \"init-layer\", layer });\n\n        layer.dispatchUpdate = (layer, newState) => {\n          dispatch({\n            type: \"layer-update\",\n            newState,\n            layer,\n          });\n        };\n\n        for (const filterName in layer.filters) {\n          layer.filters[filterName].onChange = (v) =>\n            updateFilter(layer, filterName, v);\n        }\n\n        layer.toolbar.forEach((tool) => {\n          if (typeof tool.action === \"function\") {\n            tool.actionFunc = tool.action.bind(layer);\n          }\n        });\n\n        layer.mapActions.forEach((action) => {\n          action.actionFunc = action.action.bind(layer);\n        });\n\n        dispatch({ type: \"loading-start\", layerId: layer.id });\n\n        return promise\n          .then(() => layer._init(state.map, falcor, MapActions))\n          .then(() => {\n            if (layer.setActive) {\n              return layer\n                .fetchData(falcor)\n                .then(() => layer._onAdd(state.map, falcor, updateHover))\n                .then(() => layer.render(state.map, falcor))\n                .then(() => dispatch({ type: \"activate-layer\", layer }));\n            }\n          })\n          .then(() => {\n            dispatch({ type: \"loading-stop\", layerId: layer.id });\n          });\n      }, Promise.resolve());\n  }, [\n    state.map,\n    state.dynamicLayers,\n    falcor,\n    layers,\n    MapActions,\n    updateFilter,\n    updateHover,\n    state.initializedLayers,\n  ]);\n\n  const pinHoverComp = React.useCallback(\n    ({ lngLat }) => {\n      const marker = new mapboxgl.Marker().setLngLat(lngLat).addTo(state.map);\n      dispatch({\n        type: \"pin-hover-comp\",\n        marker,\n        lngLat,\n      });\n    },\n    [state.map]\n  );\n\n  const hovering = Boolean(state.hoverData.data.size);\n\n  // APPLY CLICK LISTENER TO MAP TO ALLOW PINNED HOVER COMPS\n  React.useEffect(() => {\n    if (!hovering) return;\n\n    state.map.on(\"click\", pinHoverComp);\n\n    return () => state.map.off(\"click\", pinHoverComp);\n  }, [state.map, pinHoverComp, hovering]);\n\n  const loadingLayers = React.useMemo(() => {\n    return [...layers, ...state.dynamicLayers].filter((layer) =>\n      Boolean(state.layersLoading[layer.id])\n    );\n  }, [layers, state.dynamicLayers, state.layersLoading]);\n\n  const { HoverComps, ...hoverData } = React.useMemo(() => {\n    const HoverComps = [...state.hoverData.data.values()].sort(\n      (a, b) => a.sortOrder - b.sortOrder\n    );\n    return { ...state.hoverData, show: Boolean(HoverComps.length), HoverComps };\n  }, [state.hoverData]);\n\n  // DETERMINE ACTIVE AND INACTIVE LAYERS\n  const inactiveLayers = React.useMemo(() => {\n    return [...layers, ...state.dynamicLayers].filter((layer) => {\n      return (\n        !state.initializedLayers.includes(layer.id) ||\n        !state.activeLayers.includes(layer)\n      );\n    });\n  }, [\n    layers,\n    state.dynamicLayers,\n    state.initializedLayers,\n    state.activeLayers,\n  ]);\n\n  // SEND PROPS TO ACTIVE LAYERS\n  React.useEffect(() => {\n    state.activeLayers.forEach((layer) => {\n      const props = get(layerProps, layer.id, {});\n      layer.receiveProps(props, state.map, falcor, MapActions);\n    });\n  }, [state.map, falcor, state.activeLayers, layerProps, MapActions]);\n\n  // CHECK FOR LAYER STATE UPDATE\n  // React.useEffect(() => {\n  //   state.activeLayers.forEach((layer) => {\n  //     const layerState = get(state.layerStates, layer.id, {}),\n  //       prevLayerState = get(state.prevLayerStates, layer.id, {});\n  //     if (layerState !== prevLayerState) {\n  //       dispatch({\n  //         type: \"layer-updated\",\n  //         layer,\n  //       });\n  //       fetchData(layer);\n  //     }\n  //   });\n  // }, [state.layerStates, state.prevLayerStates, fetchData]);\n\n  const ref = React.useRef(null),\n    size = useSetSize(ref);\n\n  const Modals = React.useMemo(() => {\n    return state.modalData.reduce((a, md) => {\n      const { modal, layer } = state.activeLayers.reduce((a, c) => {\n        return c.id === md.layerId\n          ? { modal: get(c, [\"modals\", md.modalKey]), layer: c }\n          : a;\n      }, {});\n      if (modal) {\n        a.push({ ...modal, modalData: md, layer });\n      }\n      return a;\n    }, []);\n  }, [state.activeLayers, state.modalData]);\n\n  const AllMapActions = React.useMemo(() => {\n    return { ...MapActions, setMapStyle };\n  }, [MapActions, setMapStyle]);\n\n  const mapActions = React.useMemo(() => {\n    return state.activeLayers.reduce((a, c) => {\n      const actions = get(c, \"mapActions\", []).map((action) => ({\n        action,\n        layer: c,\n      }));\n      return [...a, ...actions];\n    }, []);\n  }, [state.activeLayers]);\n\n  return (\n    <div ref={ref} className=\"w-full h-full relative focus:outline-none\">\n      <div id={id.current} className=\"w-full h-full relative\" />\n\n      <Sidebar\n        {...DefaultSidebar}\n        {...sidebarProps}\n        togglePosition={\n          mapActions.length ? \"middle\" : sidebarProps.togglePosition\n        }\n        mapboxMap={state.map}\n        layerStates={state.layerStates}\n        sidebarTabIndex={state.sidebarTabIndex}\n        mapStyles={state.mapStyles}\n        styleIndex={state.styleIndex}\n        layersLoading={state.layersLoading}\n        inactiveLayers={inactiveLayers}\n        activeLayers={state.activeLayers}\n        loadingLayers={loadingLayers}\n        MapActions={AllMapActions}\n      >\n        <div className=\"absolute top-0\">\n          {mapActions.map(({ action, layer }, i) => (\n            <MapAction\n              key={`${layer.id}-${i}`}\n              layer={layer}\n              {...action}\n              MapActions={AllMapActions}\n              mapboxMap={state.map}\n              layerStates={state.layerStates}\n              layersLoading={state.layersLoading}\n              inactiveLayers={inactiveLayers}\n              activeLayers={state.activeLayers}\n              loadingLayers={loadingLayers}\n            />\n          ))}\n        </div>\n\n        <div className=\"absolute bottom-0\">\n          {loadingLayers.map((layer) => (\n            <LoadingLayer key={layer.id} layer={layer} />\n          ))}\n        </div>\n      </Sidebar>\n\n      <InfoBoxes\n        activeLayers={state.activeLayers}\n        layersLoading={state.layersLoading}\n        loadingLayers={loadingLayers}\n        inactiveLayers={inactiveLayers}\n        MapActions={AllMapActions}\n        mapboxMap={state.map}\n        layerStates={state.layerStates}\n      />\n\n      <div\n        className={`\n        absolute top-0 bottom-0 left-0 right-0 z-50\n        pointer-events-none overflow-hidden\n      `}\n      >\n        {Modals.map(({ modalData, ...data }) => (\n          <DraggableModal\n            key={`${modalData.layerId}-${modalData.modalKey}`}\n            {...data}\n            bounds={size}\n            modalData={modalData}\n            MapActions={AllMapActions}\n            mapboxMap={state.map}\n            layerStates={state.layerStates}\n            activeLayers={state.activeLayers}\n            layersLoading={state.layersLoading}\n            loadingLayers={loadingLayers}\n            inactiveLayers={inactiveLayers}\n          />\n        ))}\n\n        {state.pinnedHoverComps.map(\n          ({ HoverComps, data, id, ...hoverData }) => (\n            <PinnedHoverComp\n              {...hoverData}\n              {...size}\n              remove={removePinnedHoverComp}\n              project={projectLngLat}\n              key={id}\n              id={id}\n            >\n              {HoverComps.map(({ HoverComp, data, layer }, i) => (\n                <HoverComp\n                  key={layer.id}\n                  layer={layer}\n                  data={data}\n                  activeLayers={state.activeLayers}\n                  layersLoading={state.layersLoading}\n                  loadingLayers={loadingLayers}\n                  inactiveLayers={inactiveLayers}\n                  MapActions={AllMapActions}\n                  mapboxMap={state.map}\n                  layerStates={state.layerStates}\n                  pinned={true}\n                />\n              ))}\n            </PinnedHoverComp>\n          )\n        )}\n\n        {!Boolean(state.hoverData.data.size) ? null : (\n          <HoverCompContainer {...hoverData} {...size} project={projectLngLat}>\n            {HoverComps.map(({ HoverComp, data, layer }, i) => (\n              <HoverComp\n                key={layer.id}\n                layer={layer}\n                data={data}\n                activeLayers={state.activeLayers}\n                layersLoading={state.layersLoading}\n                loadingLayers={loadingLayers}\n                inactiveLayers={inactiveLayers}\n                MapActions={AllMapActions}\n                mapboxMap={state.map}\n                layerStates={state.layerStates}\n                pinned={false}\n              />\n            ))}\n          </HoverCompContainer>\n        )}\n      </div>\n    </div>\n  );\n};\nexport { AvlMap };\n","import React from \"react\"\n\nimport { useTheme } from \"@availabs/avl-components\"\n\nconst DefaultHoverComp = ({ data, layer }) => {\n  const theme = useTheme();\n\n  const groups = data.reduce((a, c, i) => {\n    if ((i === 0) || (c.length === 1)) {\n      a.push([]);\n    }\n    const ii = a.length - 1;\n    a[ii].push(c);\n    return a;\n  }, []);\n\n  return (\n    <div className={ `\n      ${ theme.menuBg } p-1 rounded relative z-20 grid grid-cols-1 gap-1\n    ` }>\n      { groups.map((rows, g) => (\n          <div key={ g } className={ `rounded relative px-1 ${ theme.bg }` }>\n            { rows.map((row, i) => (\n                <div key={ i } className=\"flex\">\n                  { row.map((d, ii) =>\n                      <div key={ ii }\n                        className={ `\n                          ${ ii === 0 ? \"flex-1 font-bold\" : \"flex-0\" }\n                          ${ row.length > 1 && ii === 0 ? \"mr-4\" : \"\" }\n                          ${ row.length === 1 && ii === 0 ? `border-b-2 text-lg ${ i > 0 ? \"mt-1\" : \"\" }` : \"\" }\n                        ` }>\n                        { d }\n                      </div>\n                    )\n                  }\n                </div>\n              ))\n            }\n          </div>\n        ))\n      }\n    </div>\n  )\n}\nexport default DefaultHoverComp;\n","import mapboxgl from \"mapbox-gl\"\n\nimport { hasValue } from \"@availabs/avl-components\"\n\nimport DefaultHoverComp from \"./components/DefaultHoverComp\"\n\nimport get from \"lodash.get\"\n\nlet id = -1;\nconst getLayerId = () => `avl-layer-${ ++id }`;\n\nconst DefaultCallback = () => null;\n\nconst DefaultOptions = {\n  setActive: true,\n  isDynamic: false,\n  filters: {},\n  modals: {},\n  mapActions: [],\n  sources: [],\n  layers: [],\n  isVisible: true,\n  toolbar: [\"toggle-visibility\"],\n  legend: null,\n  infoBoxes: [],\n  state: {},\n  mapboxMap: null,\n  onHover: false,\n  onClick: false,\n  onBoxSelect: false\n}\n\nclass LayerContainer {\n  constructor(options = {}) {\n\n    const Options = { ...DefaultOptions, ...options };\n    for (const key in Options) {\n      this[key] = Options[key];\n    }\n\n    this.id = getLayerId();\n\n    this.layerVisibility = {};\n\n    this.needsRender = this.setActive;\n\n    this.callbacks = [];\n    this.hoveredFeatures = new Map();\n\n    this.dispatchUpdate = () => {};\n\n    this.updateState = this.updateState.bind(this);\n  }\n  _init(mapboxMap, falcor) {\n    this.mapboxMap = mapboxMap;\n    this.falcor = falcor;\n    return this.init(mapboxMap, falcor);\n  }\n  init(mapboxMap, falcor) {\n    return Promise.resolve();\n  }\n\n// Don't attach any state directly to layers.\n// Use this function to update layer state.\n// This function causes an update in React through the map component.\n// The React update will cause rerenders in layer components.\n// Layer components, modals, infoboxes, etc., should pull from layer.state.\n  updateState(newState) {\n    if (typeof newState === \"function\") {\n      this.state = newState(this.state);\n    }\n    else {\n      this.state = { ...this.state, ...newState };\n    }\n    this.dispatchUpdate(this, this.state);\n  }\n\n  _onAdd(mapboxMap, falcor, updateHover) {\n    this.sources.forEach(({ id, source }) => {\n      if (mapboxMap && !mapboxMap.getSource(id)) {\n        mapboxMap.addSource(id, source);\n      }\n    });\n    this.layers.forEach(layer => {\n      if (mapboxMap && !mapboxMap.getLayer(layer.id)) {\n        if (layer.beneath && mapboxMap.getLayer(layer.beneath)) {\n          mapboxMap.addLayer(layer, layer.beneath);\n        }\n        else {\n          mapboxMap.addLayer(layer);\n        }\n        if (!this.isVisible) {\n          this._setVisibilityNone(mapboxMap, layer.id);\n        }\n        this.layerVisibility[layer.id] = mapboxMap.getLayoutProperty(layer.id, \"visibility\");\n      }\n    });\n    if (this.onHover) {\n      this.addHover(mapboxMap, updateHover);\n    }\n    if (this.onClick) {\n      this.addClick(mapboxMap);\n    }\n    if (this.onBoxSelect) {\n      this.state = {\n        ...this.state,\n        selection: []\n      };\n      this.addBoxSelect(mapboxMap);\n    }\n    return this.onAdd(mapboxMap, falcor);\n  }\n  onAdd(mapboxMap, falcor) {\n    return Promise.resolve();\n  }\n\n  addClick(mapboxMap) {\n    function click(layerId, { point, features, lngLat }) {\n      this.onClick.callback.call(this, layerId, features, lngLat, point);\n    };\n\n    this.onClick.layers.forEach(layerId => {\n      if (layerId === \"mapboxMap\") {\n        const callback = click.bind(this, layerId);\n        this.callbacks.push({\n          action: \"click\",\n          callback\n        });\n        mapboxMap.on(\"click\", callback);\n      }\n      else {\n        const callback = click.bind(this, layerId);\n        this.callbacks.push({\n          action: \"click\",\n          callback,\n          layerId\n        });\n        mapboxMap.on(\"click\", layerId, callback);\n      }\n    });\n  }\n\n  hoverLeave(mapboxMap, layerId) {\n    if (!this.hoveredFeatures.has(layerId)) return;\n\n    this.hoveredFeatures.get(layerId).forEach(value => {\n      mapboxMap.setFeatureState(value, { hover: false });\n    });\n    this.hoveredFeatures.delete(layerId);\n  }\n\n  addHover(mapboxMap, updateHover) {\n\n    const callback = get(this, [\"onHover\", \"callback\"], DefaultCallback).bind(this),\n      HoverComp = get(this, [\"onHover\", \"HoverComp\"], DefaultHoverComp),\n      property = get(this, [\"onHover\", \"property\"], null),\n      filterFunc = get(this, [\"onHover\", \"filterFunc\"], null),\n      pinnable = get(this, [\"onHover\", \"pinnable\"], true),\n      sortOrder = get(this, [\"onHover\", \"sortOrder\"], Infinity);\n\n    const mousemove = (layerId, { point, features, lngLat }) => {\n\n      const hoveredFeatures = this.hoveredFeatures.get(layerId) || new Map();\n      this.hoveredFeatures.set(layerId, new Map());\n\n      const hoverFeatures = features => {\n        features.forEach(({ id, source, sourceLayer }) => {\n          if ((id === undefined) || (id === null)) return;\n\n          if (hoveredFeatures.has(id)) {\n            this.hoveredFeatures.get(layerId).set(id, hoveredFeatures.get(id));\n            hoveredFeatures.delete(id);\n          }\n          else {\n            const value = { id, source, sourceLayer };\n            this.hoveredFeatures.get(layerId).set(id, value);\n            mapboxMap.setFeatureState(value, { hover: true });\n          }\n        });\n      }\n\n      const featuresMap = new Map();\n\n      if (property) {\n        const properties = features.reduce((a, c) => {\n          const prop = get(c, [\"properties\", property], null);\n          if (prop) {\n            a[prop] = true;\n          }\n          return a;\n        }, {});\n        mapboxMap.queryRenderedFeatures({\n            layers: [layerId],\n            filter: [\"in\", [\"get\", property], [\"literal\", Object.keys(properties)]]\n          })\n          .forEach(feature => {\n            featuresMap.set(feature.id, feature);\n          })\n      }\n      if (filterFunc) {\n        const filter = filterFunc.call(this, layerId, features, lngLat, point);\n        if (hasValue(filter)) {\n          mapboxMap.queryRenderedFeatures({ layers: [layerId], filter })\n            .forEach(feature => {\n              featuresMap.set(feature.id, feature);\n            });\n        }\n      }\n      features.forEach(feature => {\n        featuresMap.set(feature.id, feature);\n      });\n\n      hoverFeatures([...featuresMap.values()]);\n\n      hoveredFeatures.forEach(value => {\n        mapboxMap.setFeatureState(value, { hover: false });\n      })\n\n      const data = callback(layerId, features, lngLat, point);\n\n      if (hasValue(data)) {\n        updateHover({\n          pos: [point.x, point.y],\n          type: \"hover-layer-move\",\n          HoverComp,\n          layer: this,\n          pinnable,\n          sortOrder,\n          lngLat,\n          data\n        });\n      }\n    };\n\n    const mouseleave = (layerId, e) => {\n      this.hoverLeave(mapboxMap, layerId);\n      updateHover({\n        type: \"hover-layer-leave\",\n        layer: this\n      });\n    };\n\n    this.onHover.layers.forEach(layerId => {\n      let callback = mousemove.bind(this, layerId);\n      this.callbacks.push({\n        action: \"mousemove\",\n        callback,\n        layerId\n      });\n      mapboxMap.on(\"mousemove\", layerId, callback);\n\n      callback = mouseleave.bind(this, layerId);\n      this.callbacks.push({\n        action: \"mouseleave\",\n        callback,\n        layerId\n      });\n      mapboxMap.on(\"mouseleave\", layerId, callback);\n    }, this);\n  }\n\n  addBoxSelect(mapboxMap) {\n    let start, current, box;\n\n    const canvasContainer = mapboxMap.getCanvasContainer();\n\n    const getPos = e => {\n      const rect = canvasContainer.getBoundingClientRect();\n      return new mapboxgl.Point(\n        e.clientX - rect.left - canvasContainer.clientLeft,\n        e.clientY - rect.top - canvasContainer.clientTop\n      )\n    }\n\n    const mousemove = e => {\n      e.preventDefault();\n\n      current = getPos(e);\n\n      if (!box) {\n        const className = get(this, [\"onBoxSelect\", \"className\"], \"bg-black bg-opacity-50 border-2 border-black\");\n        box = document.createElement(\"div\");\n        box.className = \"absolute top-0 left-0 w-0 h-0 \" + className;\n        canvasContainer.appendChild(box);\n      }\n\n      var minX = Math.min(start.x, current.x),\n        maxX = Math.max(start.x, current.x),\n        minY = Math.min(start.y, current.y),\n        maxY = Math.max(start.y, current.y);\n\n        box.style.transform = `translate( ${ minX }px, ${ minY }px)`;\n        box.style.width = `${ maxX - minX }px`;\n        box.style.height = `${ maxY - minY }px`;\n    }\n    const mouseup = e => {\n      finish([start, getPos(e)]);\n    }\n    const keyup = e => {\n      if ((e.keyCode === 27) || (e.which === 27) || (e.code === 'Escape')) {\n        finish();\n      }\n    }\n\n    const finish = bbox => {\n      document.removeEventListener('mousemove', mousemove);\n      document.removeEventListener('mouseup', mouseup);\n      document.removeEventListener('keydown', keyup);\n\n      mapboxMap.dragPan.enable();\n\n      if (box) {\n        box.parentNode.removeChild(box);\n        box = null;\n      }\n\n      if (bbox) {\n        const queriedFeatures = mapboxMap.queryRenderedFeatures(bbox, {\n          layers: get(this, [\"onBoxSelect\", \"layers\"]),\n          filter: get(this, [\"onBoxSelect\", \"filter\"])\n        })\n\n        const featureMap = queriedFeatures.reduce((a, c) => {\n          a[c.id] = c;\n          return a;\n        }, {});\n\n        const features = Object.values(featureMap);\n\n        const values = [];\n\n        features.forEach(feature => {\n          values.push({\n            id: feature.id,\n            source: feature.source,\n            sourceLayer: feature.sourceLayer\n          });\n        });\n\n        get(this, [\"onBoxSelect\", \"selectedValues\"], [])\n          .forEach(value => {\n            mapboxMap.setFeatureState(value, { select: false });\n          });\n\n        this.onBoxSelect.selectedValues = values;\n\n        values.forEach(value => {\n          mapboxMap.setFeatureState(value, { select: true });\n        });\n\n        this.updateState({ selection: features });\n      }\n    }\n\n    const mousedown = e => {\n      if (!(e.shiftKey && e.button === 0)) return;\n\n      document.addEventListener('mousemove', mousemove);\n      document.addEventListener('mouseup', mouseup);\n      document.addEventListener('keydown', keyup);\n\n      mapboxMap.dragPan.disable();\n\n      start = getPos(e);\n    }\n\n    this.callbacks.push({\n      action: \"mousemove\",\n      callback: mousemove,\n      element: canvasContainer\n    });\n    canvasContainer.addEventListener(\"mousedown\", mousedown, true);\n\n    mapboxMap.boxZoom.disable();\n\n    this.onBoxSelect.selectedValues = [];\n  }\n\n  _onRemove(mapboxMap) {\n    while (this.callbacks.length) {\n      const { action, layerId, callback, element } = this.callbacks.pop();\n      if (element) {\n        element.removeEventListener(action, callback);\n      }\n      else if (layerId) {\n        mapboxMap.off(action, layerId, callback);\n      }\n      else {\n        mapboxMap.off(action, callback);\n      }\n    }\n    this.layers.forEach(({ id }) => {\n      mapboxMap.removeLayer(id);\n    });\n    this.onRemove(mapboxMap);\n  }\n  onRemove(mapboxMap) {\n\n  }\n\n  fetchData(falcor) {\n    return Promise.resolve();\n  }\n  render(mapboxMap, falcor) {\n\n  }\n\n  receiveProps(props, mapboxMap, falcor, MapActions) {\n\n  }\n\n  toggleVisibility(mapboxMap) {\n    this.isVisible = !this.isVisible;\n    this.layers.forEach(({ id }) => {\n      if (this.isVisible) {\n        this._setVisibilityVisible(mapboxMap, id);\n      }\n      else {\n        this._setVisibilityNone(mapboxMap, id);\n      }\n    });\n  }\n  _setVisibilityVisible(mapboxMap, layerId) {\n    if (this.layerVisibility[layerId] !== \"none\") {\n      mapboxMap.setLayoutProperty(layerId, \"visibility\", \"visible\");\n    }\n  }\n  _setVisibilityNone(mapboxMap, layerId) {\n    const visibility = mapboxMap.getLayoutProperty(layerId, \"visibility\");\n    if (visibility === \"none\") {\n      this.layerVisibility[layerId] = \"none\";\n    }\n    else {\n      mapboxMap.setLayoutProperty(layerId, \"visibility\", \"none\");\n    }\n  }\n  setLayerVisibility(mapboxMap, layer, visibility) {\n    const isVisible = this.isVisible && (visibility === \"visible\");\n    this.layerVisibility[layer.id] = visibility;\n\n    visibility = isVisible ? \"visible\" : \"none\";\n    mapboxMap.setLayoutProperty(layer.id, \"visibility\", visibility);\n  }\n\n  onFilterChange(filterName, newValue, prevValue) {\n\n  }\n\n  onMapStyleChange(mapboxMap, falcor, updateHover) {\n    this._onAdd(mapboxMap, falcor, updateHover)\n      .then(() => this.render(mapboxMap, falcor))\n  }\n}\nexport { LayerContainer };\n","export const HOST = 'https://tig.nymtc.org/'\n","const cache = new Map();\nconst fetcher = url => {\n    if (cache.has(url)) {\n        return Promise.resolve(cache.get(url));\n    }\n    return fetch(url)\n        .then(res => {\n            if (!res.ok) {\n                throw new Error(\"Network error\");\n            }\n            return res.json();\n        })\n        .then(json => {\n            cache.set(url, json);\n            return json;\n        })\n}\nexport default fetcher;\n","import {HOST} from './layerHost'\nimport {LayerContainer} from \"components/avl-map/src\"\nimport tip_ids from '../config/tip_ids.json'\nimport tip_mpos from '../config/tip_mpos.json'\nimport fetcher from \"../wrappers/fetcher\";\nvar parse = require('wellknown');\n\nclass TestTipLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n\n    }\n\n    setActive = !!this.viewId\n    name = 'TIP Mappable Projects'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value:'131', name:'2014-2018 TIP Mappable Projects'},\n                {value:'64', name:'2017-2021 TIP Mappable Projects'},\n                {value:'187',name:'2020-2024 TIP Mappable Projects'}\n            ],\n            value: this.viewId || '131',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        tip_id :{\n            name: 'Tip ID',\n            type:'dropdown',\n            domain: tip_ids,\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        project_type: {\n            name: 'Project Type',\n            type: 'dropdown',\n            domain: [\n                {name:'Select All',value:\"Select All\"},\n                {name: 'Study', value: '1'},\n                {name: 'Highway', value: '2'},\n                {name: 'Ferry', value: '3'},\n                {name: 'Transit', value: '4'},\n                {name: 'Rail', value: '5'},\n                {name: 'Truck', value: '6'},\n                {name: 'Pedestrian', value: '7'},\n                {name: 'Bike', value: '8'},\n                {name: 'Bus', value: '10'},\n                {name: 'ITS', value: '9'},\n                {name: 'Parking', value: '12'}\n            ],\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        mpo_name: {\n            name: 'MPO Name',\n            type:'dropdown',\n            domain: tip_mpos,\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        agency:{\n            name:'Agency',\n            type:'dropdown',\n            domain:['Select All'],\n            value:'Select All'\n        },\n\n    }\n    legend = {\n        type: \"ordinal\",\n        domain: [],\n        range: [],\n        height: 5,\n        width: 350,\n        direction: \"vertical\",\n        show:true,\n        Title:\"\"\n    }\n    onHover = {\n        layers: [\"tip_lines\", \"tip_symbols\", 'tip-rail', 'tip-rail-metro', 'tip-bus', 'tip-bicycle-share', 'tip-ferry', 'tip-au-national-highway-3', 'tip-pitch-11', 'tip-college-11','tip-parking-11'],\n        callback: (layerId, features, lngLat) => {\n\n            const feature = features.reduce((a, c) => {\n                a = this.data.data.reduce((acc, curr) => {\n                    if (curr['tip_id'] === c['properties']['tip_id']\n                        && curr['ptype'] === c['properties']['project_type']\n                        && curr['sponsor'] === c['properties']['sponsor']\n                        && curr['description'] === c['properties']['description']\n                    ) {\n                        acc = curr\n                    }\n                    return acc\n                },)\n                return a\n            }, {})\n\n\n            return [\n                ['TIP ID:', feature['tip_id']],\n                ['County:',feature['county']],\n                ['MPO:',feature['mpo']],\n                ['Sponsor:', feature['sponsor']],\n                ['Project Type:', feature['ptype']],\n                ['Cost:', feature['estimated_cost']],\n                ['Description:', feature['description'].toLowerCase()]\n            ]\n\n\n        }\n    }\n    sources = [\n        {\n            id: 'tip_symbols',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        },\n        {\n            id: 'tip_lines',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        },\n    ]\n\n    init(map){\n        const url = `${HOST}/views/${this.filters.dataset.value}/data_overlay`\n        const cost_lower = ''\n        const cost_upper = ''\n        const params = `?utf8=%E2%9C%93&tip_id=${this.filters.tip_id.value === 'Select All'? '':this.filters.tip_id.value}&ptype=${this.filters.project_type.value === 'Select All'? '':this.filters.project_type.value}&mpo=${this.filters.mpo_name.value === 'Select All'? '':this.filters.mpo_name.value}&sponsor=${this.filters.agency.value === 'Select All'? '':this.filters.agency.value}&cost_lower=${cost_lower}&cost_upper=${cost_upper}&commit=Filter`\n        return fetcher(url + params)\n            .then(response => {\n                this.data = response\n                this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n                this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n            })\n    }\n    fetchData() {\n        const url = `${HOST}/views/${this.filters.dataset.value}/data_overlay`\n        const cost_lower = ''\n        const cost_upper = ''\n        const params = `?utf8=%E2%9C%93&tip_id=${this.filters.tip_id.value === 'Select All'? '':this.filters.tip_id.value}&ptype=${this.filters.project_type.value === 'Select All'? '':this.filters.project_type.value}&mpo=${this.filters.mpo_name.value === 'Select All'? '':this.filters.mpo_name.value}&sponsor=${this.filters.agency.value === 'Select All'? '':this.filters.agency.value}&cost_lower=${cost_lower}&cost_upper=${cost_upper}&commit=Filter`\n\n        return fetcher(url + params)\n            .then(response => {\n                this.data = response\n                this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n                this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n            })\n    }\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"dataset\" : {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            case \"tip_id\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${value === 'Select All'? 'All':value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            case \"project_type\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            case \"mpo_name\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${this.filters.agency.value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            case \"agency\": {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                TIP Id: ${this.filters.tip_id.value === 'Select All'? 'All':this.filters.tip_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                MPO Name: ${this.filters.mpo_name.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.mpo_name.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Agency: ${value === 'Select All'? 'All':''}\n                `\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n    onRemove(mapboxMap) {\n\n        mapboxMap.removeLayer('tip-rail')\n        mapboxMap.removeLayer('tip-rail-metro')\n        mapboxMap.removeLayer('tip-bus')\n        mapboxMap.removeLayer('tip-bicycle-share')\n        mapboxMap.removeLayer('tip-ferry')\n        mapboxMap.removeLayer('tip-au-national-highway-3')\n        mapboxMap.removeLayer('tip-pitch-11')\n        mapboxMap.removeLayer('tip-college-11')\n        mapboxMap.removeLayer('tip-parking-11')\n        mapboxMap.removeLayer('tip_lines')\n        mapboxMap.removeSource('tip_symbols')\n        mapboxMap.removeSource('tip_lines')\n    }\n    render(map){\n        let geojson = {\n            type: \"FeatureCollection\",\n            features: []\n        }\n\n        const symbols_map = {\n            'Rail': 'rail',\n            'Transit': 'rail-metro',\n            'Bus': 'bus',\n            'Bike': 'bicycle-share',\n            'Ferry': 'ferry',\n            'Highway': 'au-national-highway-3',\n            'Pedestrian': 'pitch-11',\n            'Study': 'college-11',\n            'Parking':'parking-11'\n\n        }\n        let colors = this.data.symbologies[0].color_scheme.reduce( (out,curr) => {\n            out[curr.value] = curr.color\n            return out;\n        }, {})\n\n         geojson.features = this.data.data.map((d,i) => {\n            return {\n                \"type\": \"Feature\",\n                id: i,\n                \"properties\": {\n                    county: d.county,\n                    description: d.description,\n                    estimated_cost : d.cost,\n                    mpo: d.mpo,\n                    project_type: d.ptype,\n                    color: colors[d.ptype],\n                    sponsor: d.sponsor,\n                    tip_id: d.tip_id,\n                    icon: symbols_map[d['ptype']]\n                },\n                \"geometry\": parse(d['geography'])\n            }\n        })\n\n        const symbols_geojson =\n            {\n                type: 'FeatureCollection',\n                features: geojson.features.filter(d => {\n                    if (d['geometry'] && d['geometry'].type === 'Point') {\n                        return d\n                    }\n                    return false\n                })\n            }\n\n        const line_geojson = {\n            type: 'FeatureCollection',\n            features: geojson.features.filter(d => {\n                if (d['geometry'] && d['geometry'].type === 'MultiLineString') {\n                    return d\n                }\n                return false\n            })\n        }\n\n        if (map.getSource('tip_symbols')) {\n            map.getSource('tip_symbols').setData(symbols_geojson)\n        }\n\n        if(map.getSource('tip_lines')){\n            map.getSource('tip_lines').setData(line_geojson)\n        }\n\n        if(!map.getLayer('tip_lines')){\n            map.addLayer({\n                'id': 'tip_lines',\n                'type': 'line',\n                source: 'tip_lines',\n                paint: {\n                    'line-width': 3,\n                    'line-color': {\n                        type:'identity',\n                        property:'color'\n                    },\n                }\n            })\n        }\n\n\n        geojson.features.forEach(feature => {\n            if (feature.properties.icon) {\n                let symbol = feature.properties.icon\n                let layerID = 'tip-' + symbol;\n                if (!map.getLayer(layerID)) {\n                    map.addLayer({\n                        'id': layerID,\n                        'type': 'symbol',\n                        'source': 'tip_symbols',\n                        'layout': {\n                            'icon-image': symbol,\n                            'icon-allow-overlap': true\n                        },\n                        'filter': ['==', 'icon', symbol]\n                    })\n\n                }\n            }\n        })\n\n\n    }\n}\n\n\nexport const TestTipLayerFactory = (options = {}) => new TestTipLayer(options);\n\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport counties from '../config/counties.json'\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\n\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2040CountyLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n        //this.id = id\n    }\n\n    setActive = true\n    name = '2040 SED County Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '49', name: '2000-2040 Employment Labor Force'},\n                {value: '46', name: '2000-2040 Group Quarters Population'},\n                {value: '45', name: '2000-2040 Household Population'},\n                {value: '47', name: '2000-2040 Households'},\n                {value: '48', name: '2000-2040 Household Size'},\n                {value: '50', name: '2000-2040 Labor Force'},\n                {value: '43', name: '2000-2040 Payroll Employment - QCEW Based'},\n                {value: '44', name: '2000-2040 Proprietors Employment'},\n                {value: '42', name: '2000-2040 Total Employment'},\n                {value: '41', name: '2000-2040 Total Population'}\n            ],\n            value: this.viewId || '49',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [2000,2005,2010,2015,2020,2025,2030,2035,2040],\n            value: 2000,\n            multi: false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n\n    }\n\n    onHover = {\n        layers: [\"Counties\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','geoid'],'')\n                return a\n            },'')\n            const graph = counties.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')],\n                        [\"Year:\", this.filters.year.value],\n                        ['County:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.year.value]]\n                    )\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"counties\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.a8ndgl5n\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"Counties\",\n            filter: false,\n            \"source-layer\": \"counties\",\n            source: \"counties\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response => {\n                this.data = response\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name \n                    }\n                    return a \n                },'')}-${this.filters.year.value}`\n                this.data_counties = this.data.data.map(item =>{\n                    return counties.reduce((a,c) =>{\n                        if(item.area === c.name){\n                            a['name'] = c.name\n                            a['geoid'] = c.geoid\n                        }\n                        return a\n                    },{})\n                })\n                this.legend.domain = this.data.data.reduce((a,c) =>{\n                    a.push(c[this.filters.year.value])\n                    return a\n                },[])\n\n            })\n    }\n\n\n\n    fetchData() {\n\n        return new Promise(resolve =>{\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n            }\n\n\n        );\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_counties.length) {\n            map.setFilter(\"Counties\", [\"in\", [\"get\", \"geoid\"], [\"literal\", this.data_counties.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"Counties\", false);\n        }\n\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_counties.forEach(data_county =>{\n                if(curr.area === data_county.name){\n                    acc.push({\n                        id: data_county.geoid,\n                        value: curr[this.filters.year.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                if(c.value !== 0){\n                    a[c.id] = colorScale(c.value)\n                }\n                return a\n            },{});\n\n        map.setPaintProperty(\"Counties\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"geoid\"], [\"literal\", colors]]\n        ])\n    }\n\n\n}\n\nexport const SED2040CountyLevelForecastLayerFactory = (options = {}) => new SED2040CountyLevelForecastLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2040TazLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n    setActive = !!this.viewId\n    name = '2040 SED TAZ Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '37', name: '2010-2040 Earnings (Held constant in $ 2010)'},\n                {value: '34', name: '2010-2040 Employed Labor Force'},\n                {value: '30', name: '2010-2040 Group Quarters Homeless Population'},\n                {value: '29', name: '2010-2040 Group Quarters Institutional Population'},\n                {value: '31', name: '2010-2040 Group Quarters Other Population'},\n                {value: '28', name: '2010-2040 Group Quarters Population'},\n                {value: '26', name: '2010-2040 Household Income (Held constant in $ 2010)'},\n                {value: '27', name: '2010-2040 Household Population '},\n                {value: '32', name: '2010-2040 Households'},\n                {value: '33', name: '2010-2040 Household Size'},\n                {value: '36',name: '2010-2040 Office Employment'},\n                {value: '35',name: '2010-2040 Retail Employment'},\n                {value: '13',name: '2010-2040 School Enrollment'},\n                {value: '25',name: '2010-2040 Total Employment'},\n                {value: '24',name: '2010-2040 Total Population'},\n                {value: '38',name: '2010-2040 University Enrollment'}\n            ],\n            value: this.viewId || '37',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'select',\n            domain: [2010,2015,2020,2025,2030,2035,2040],\n            value: 2010,\n            multi: false\n        }\n    }\n    onHover = {\n        layers: [\"nymtc_taz_2005\"],\n        callback: (layerId, features, lngLat) => {\n\n            const area_id = features.reduce((a,c) => {\n                a = get(c,['properties','name'],'')\n                return a\n            },'')\n\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === area_id){\n\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')],\n                        [\"Year:\", this.filters.year.value],\n                        [\"Taz id:\",c.area],[\"Value:\",c[this.filters.year.value]]\n                    )\n                }\n\n                return a\n            },[])\n        }\n    }\n    sources = [\n        {\n            id: \"nymtc_taz_2005-93y4h2\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.dgujwhsd\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"nymtc_taz_2005\",\n            filter: false,\n            \"source-layer\": \"nymtc_taz_2005\",\n            source: \"nymtc_taz_2005-93y4h2\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        domain: [],\n        range: getColorRange(5, \"YlOrRd\", true),\n        show: true,\n        Title: \"\",\n        format: \",d\",\n\n    }\n\n\n    init(map){\n\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response => {\n                this.data = response\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.year.value}`\n                this.taz_ids = this.data.data.map(d => d.area).filter(d => d)\n            })\n    }\n\n    onFilterChange(filterName,value,preValue){\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                // do nothing\n            }\n        }\n\n    }\n\n    fetchData() {\n\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n        );\n    }\n\n    getColorScale(data) {\n        const { type, range, domain } = this.legend;\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                // do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.taz_ids.length) {\n            map.setFilter(\"nymtc_taz_2005\", [\"in\", [\"get\", \"name\"], [\"literal\", this.taz_ids]]);\n        }\n        else {\n            map.setFilter(\"nymtc_taz_2005\", false);\n        }\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            acc.push({\n                'id': curr['area'] || '',\n                'value': curr[this.filters.year.value]\n            })\n            return acc\n        },[])\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                a[c.id] = colorScale(c.value)\n                return a\n            },{})\n\n\n        map.setPaintProperty(\"nymtc_taz_2005\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"name\"], [\"literal\", colors]]\n        ])\n\n    }\n}\n\nexport const SED2040TazLevelForecastLayerFactory = (options = {}) => new SED2040TazLevelForecastLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport counties from '../config/counties.json'\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2050CountyLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        //console.log('id in 2040 ',id)\n        this.viewId = props.viewId\n        //this.id = id\n    }\n\n    setActive = !!this.viewId\n    name = '2050 SED County Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '113', name: '2010-2050 Employed Labor Force'},\n                {value: '110', name: '2010-2050 Group Quarters Population'},\n                {value: '109', name: '2010-2050 Household Population'},\n                {value: '111', name: '2010-2050 Households'},\n                {value: '112', name: '2010-2050 Household Size'},\n                {value: '114', name: '2010-2050 Labor Force'},\n                {value: '107', name: '2010-2050 Payroll Employment'},\n                {value: '108', name: '2010-2050 Proprietors Employment'},\n                {value: '106', name: '2010-2050 Total Employment'},\n                {value: '105', name: '2010-2050 Total Population'}\n            ],\n            value: this.viewId || '113',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [2010,2012,2015,2020,2025,2030,2035,2040,2045,2050],\n            value: 2010,\n            multi: false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n\n    }\n\n    onHover = {\n        layers: [\"Counties\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','geoid'],'')\n                return a\n            },'')\n            const graph = counties.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')],\n                        [\"Year:\", this.filters.year.value],\n                        ['County:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.year.value]])\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"counties\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.a8ndgl5n\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"Counties\",\n            filter: false,\n            \"source-layer\": \"counties\",\n            source: \"counties\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response => {\n                this.data = response\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.year.value}`\n                this.data_counties = this.data.data.map(item =>{\n                    return counties.reduce((a,c) =>{\n                        if(item.area === c.name){\n                            a['name'] = c.name\n                            a['geoid'] = c.geoid\n                        }\n                        return a\n                    },{})\n                })\n                this.legend.domain = this.data.data.reduce((a,c) =>{\n                    a.push(c[this.filters.year.value])\n                    return a\n                },[])\n\n            })\n    }\n\n    fetchData() {\n\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n        );\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_counties.length) {\n            map.setFilter(\"Counties\", [\"in\", [\"get\", \"geoid\"], [\"literal\", this.data_counties.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"Counties\", false);\n        }\n\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_counties.forEach(data_county =>{\n                if(curr.area === data_county.name){\n                    acc.push({\n                        id: data_county.geoid,\n                        value: curr[this.filters.year.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                if(c.value !== 0){\n                    a[c.id] = colorScale(c.value)\n                }\n                return a\n            },{});\n\n        map.setPaintProperty(\"Counties\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"geoid\"], [\"literal\", colors]]\n        ])\n    }\n\n\n}\n\nexport const SED2050CountyLevelForecastLayerFactory = (options = {}) => new SED2050CountyLevelForecastLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport counties from '../config/counties.json'\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\n\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2055CountyLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n    setActive = !!this.viewId\n    name = '2055 SED County Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '207', name: '2010-2055 Employed Labor Force'},\n                {value: '204', name: '2010-2055 Group Quarters Population'},\n                {value: '203', name: '2010-2055 Household Population'},\n                {value: '205', name: '2010-2055 Households'},\n                {value: '206', name: '2010-2055 Household Size'},\n                {value: '208', name: '2010-2055 Labor Force'},\n                {value: '201', name: '2010-2055 Payroll Employment'},\n                {value: '202', name: '2010-2055 Proprietors Employment'},\n                {value: '200', name: '2010-2055 Total Employment'},\n                {value: '199', name: '2010-2055 Total Population'}\n            ],\n            value: this.viewId || '207',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [2010,2015,2017,2020,2025,2030,2035,2040,2045,2050,2055],\n            value: 2010,\n            multi: false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n\n    }\n\n    onHover = {\n        layers: [\"Counties\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','geoid'],'')\n                return a\n            },'')\n            const graph = counties.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },''),],\n                        [\"Year:\", this.filters.year.value],\n                        ['County:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.year.value]])\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"counties\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.a8ndgl5n\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"Counties\",\n            filter: false,\n            \"source-layer\": \"counties\",\n            source: \"counties\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response => {\n                this.data = response\n                this.legend.Title =`${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.year.value}`\n                this.data_counties = this.data.data.map(item =>{\n                    return counties.reduce((a,c) =>{\n                        if(item.area === c.name){\n                            a['name'] = c.name\n                            a['geoid'] = c.geoid\n                        }\n                        return a\n                    },{})\n                })\n                this.legend.domain = this.data.data.reduce((a,c) =>{\n                    a.push(c[this.filters.year.value])\n                    return a\n                },[])\n\n            })\n    }\n\n    fetchData() {\n\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n        );\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_counties.length) {\n            map.setFilter(\"Counties\", [\"in\", [\"get\", \"geoid\"], [\"literal\", this.data_counties.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"Counties\", false);\n        }\n\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_counties.forEach(data_county =>{\n                if(curr.area === data_county.name){\n                    acc.push({\n                        id: data_county.geoid,\n                        value: curr[this.filters.year.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                if(c.value !== 0){\n                    a[c.id] = colorScale(c.value)\n                }\n                return a\n            },{});\n\n        map.setPaintProperty(\"Counties\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"geoid\"], [\"literal\", colors]]\n        ])\n    }\n\n\n}\n\nexport const SED2055CountyLevelForecastLayerFactory = (options = {}) => new SED2055CountyLevelForecastLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport { getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\n\n\nimport {\n    scaleLinear,\n    scaleQuantile,\n    scaleQuantize,\n    scaleThreshold,\n    scaleOrdinal\n} from \"d3-scale\"\nimport { extent } from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass SED2055TazLevelForecastLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n    setActive = !!this.viewId\n    name = '2055 SED TAZ Level Forecast'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value: '169', name: '2010-2055 Earnings in $'},\n                {value: '166', name: '2010-2055 Employed Labor Force'},\n                {value: '162', name: '2010-2055 Group Quarters Homeless Population'},\n                {value: '161', name: '2010-2055 Group Quarters Institutional Population'},\n                {value: '163', name: '2010-2055 Group Quarters Other Population'},\n                {value: '160', name: '2010-2055 Group Quarters Population'},\n                {value: '158', name: '2010-2055 Household Income in $'},\n                {value: '159', name: '2010-2055 Household Population '},\n                {value: '164', name: '2010-2055 Households'},\n                {value: '165', name: '2010-2055 Household Size'},\n                {value: '168',name: '2010-2055 Office Employment'},\n                {value: '167',name: '2010-2055 Retail Employment'},\n                {value: '155',name: '2010-2055 School Enrollment'},\n                {value: '157',name: '2010-2055 Total Employment'},\n                {value: '156',name: '2010-2055 Total Population'},\n                {value: '170',name: '2010-2055 University Enrollment'}\n            ],\n            value: this.viewId || '169',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'select',\n            domain: [2010,2015,2020,2025,2030,2035,2040,2045,2050,2055],\n            value: 2010,\n            multi: false\n        }\n    }\n    onHover = {\n        layers: [\"nymtc_taz_2005\"],\n        callback: (layerId, features, lngLat) => {\n\n            const area_id = features.reduce((a,c) => {\n                a = get(c,['properties','name'],'')\n                return a\n            },'')\n\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === area_id){\n\n                    a.push(\n                        [this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')],\n                        [\"Year:\", this.filters.year.value],\n                        [\"Taz id:\",c.area],[\"Value:\",c[this.filters.year.value]]\n                    )\n                }\n\n                return a\n            },[])\n        }\n    }\n    sources = [\n        {\n            id: \"nymtc_taz_2005-93y4h2\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.dgujwhsd\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"nymtc_taz_2005\",\n            filter: false,\n            \"source-layer\": \"nymtc_taz_2005\",\n            source: \"nymtc_taz_2005-93y4h2\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        domain: [],\n        range: getColorRange(5, \"YlOrRd\", true),\n        show: true,\n        Title: \"\",\n        format: \",d\",\n\n    }\n\n\n    init(map){\n\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response => {\n                this.data = response\n                this.legend.Title =`${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.year.value}`\n                this.taz_ids = this.data.data.map(d => d.area).filter(d => d)\n            })\n    }\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = `${c.name}-${value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = `${c.name}-${this.filters.year.value}`\n                    }\n                    return a\n                },'')\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            default:{\n                // do nothing\n            }\n        }\n\n    }\n\n    fetchData() {\n\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                },)\n        );\n    }\n\n    getColorScale(data) {\n        const { type, range, domain } = this.legend;\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                // do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.taz_ids.length) {\n            map.setFilter(\"nymtc_taz_2005\", [\"in\", [\"get\", \"name\"], [\"literal\", this.taz_ids]]);\n        }\n        else {\n            map.setFilter(\"nymtc_taz_2005\", false);\n        }\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            acc.push({\n                'id': curr['area'] || '',\n                'value': curr[this.filters.year.value]\n            })\n            return acc\n        },[])\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                a[c.id] = colorScale(c.value)\n                return a\n            },{})\n\n\n        map.setPaintProperty(\"nymtc_taz_2005\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"name\"], [\"literal\", colors]]\n        ])\n\n    }\n}\n\nexport const SED2055TazLevelForecastLayerFactory = (options = {}) => new SED2055TazLevelForecastLayer(options);\n","export const acsCensusCategoryMappings = [\n    {value:'22',name:'Absolute and Relative Minority Population data',year:2013},\n    {value:'132',name:'Absolute and Relative Minority Population data',year:2014},\n    {value:'134',name:'Absolute and Relative Minority Population data',year:2015},\n    {value:'142',name:'Absolute and Relative Minority Population data',year:2016},\n    {value:'146',name:'Absolute and Relative Minority Population data',year:2017},\n    {value:'145',name:'Absolute and Relative Minority Population data',year:2018},\n    {value:'18',name: 'Absolute and Relative Population Below Poverty',year:2013},\n    {value:'128',name: 'Absolute and Relative Population Below Poverty',year:2014},\n    {value:'133',name: 'Absolute and Relative Population Below Poverty',year:2015},\n    {value:'143',name: 'Absolute and Relative Population Below Poverty',year:2016},\n    {value:'147',name: 'Absolute and Relative Population Below Poverty',year:2017},\n    {value:'144',name: 'Absolute and Relative Population Below Poverty',year:2018},\n]\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport tracts from '../config/tracts.json'\nimport {getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\nimport {acsCensusCategoryMappings} from \"../config/acsCensusCategoryMappings\";\nimport {scaleLinear, scaleOrdinal, scaleQuantile, scaleQuantize, scaleThreshold} from \"d3-scale\"\nimport {extent} from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\n\nclass ACSCensusLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.categoryName = props.name\n        this.viewid = props.viewId\n\n    }\n\n    setActive = !!this.viewId\n    name = 'ACS Census Layer'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                'Absolute and Relative Minority Population data',\n                'Absolute and Relative Population Below Poverty'],\n            value:this.categoryName || 'Absolute and Relative Minority Population data',\n            multi:false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [\n                2013,2014,2015,2016,2017,2018\n            ],\n            value: 2013,\n            multi: false\n        },\n        column:{\n            name: 'Column',\n            type: 'dropdown',\n            domain: [\n                {name: 'Minority Population',value:'value'},\n                {name: 'Percentage Minority', value:'percent'}\n            ],\n            value: 'value',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n        format: ',d',\n\n    }\n\n    onHover = {\n        layers: [\"tracts\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','GEOID'],'')\n                return a\n            },'')\n            const graph = tracts.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [`${this.filters.dataset.value || this.categoryName}${this.filters.column.value === 'percent' ? 'in %': ''}`],\n                        [\"Year:\", this.filters.year.value],\n                        ['Tract:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.column.value]])\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"nymtc_census_tracts\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.3galhyzy\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"tracts\",\n            filter: false,\n            \"source-layer\": \"census_tracts\",\n            source: \"nymtc_census_tracts\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n\n        const categoryValue = acsCensusCategoryMappings.reduce((a,c ) =>{\n            if((c.name === this.categoryName || c.name === this.filters.dataset.value) && c.year === this.filters.year.value){\n                a = c.value\n            }\n            return a\n        },null)\n\n        if(categoryValue){\n            this.filters.dataset.value = this.categoryName ? this.categoryName : this.filters.dataset.value\n            return fetcher(`${HOST}views/${categoryValue}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    this.legend.Title = `${this.filters.dataset.value || this.categoryName}-${this.filters.year.value}`\n                    this.data_tracts = this.data.data.map(item =>{\n                        return tracts.reduce((a,c) =>{\n                            if(item.area === c.name){\n                                a['name'] = c.name\n                                a['geoid'] = c.geoid\n                            }\n                            return a\n                        },{})\n                    })\n                    this.legend.domain = this.data.data.reduce((a,c) =>{\n                        a.push(c.value)\n                        return a\n                    },[])\n                    return response\n                })\n        }\n\n\n\n    }\n\n    fetchData() {\n        const categoryValue = acsCensusCategoryMappings.reduce((a,c ) =>{\n            if(c.name === this.categoryName && c.year === this.filters.year.value){\n                a = c.value\n            }\n            return a\n        },null)\n        if(categoryValue){\n            return new Promise(resolve =>\n                fetcher(`${HOST}views/${categoryValue}/data_overlay`)\n                    .then(response =>{\n                        this.data = response\n                        setTimeout(resolve,1000)\n                    })\n            );\n        }\n\n\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = `${this.filters.dataset.value}-${value}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"dataset\":{\n                this.legend.Title = `${value}-${this.filters.year.value}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"column\": {\n\n                this.legend.Title = `${this.filters.dataset.value} in %-${this.filters.year.value}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                if(value === 'percent'){\n                    this.legend.format = ',f'\n                }else{\n                    this.legend.format = ',d'\n                }\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n    getFormat(column){\n        return ',d' ? column === 'value' : ',f'\n    }\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_tracts.length) {\n            map.setFilter(\"tracts\", [\"in\", [\"get\", \"GEOID\"], [\"literal\", this.data_tracts.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"tracts\", false);\n        }\n    //\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_tracts.forEach(data_tract =>{\n                if(curr.area === data_tract.name){\n                    acc.push({\n                        id: data_tract.geoid,\n                        value: curr[this.filters.column.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                a[c.id] = colorScale(c.value)\n                return a\n            },{});\n\n        map.setPaintProperty(\"tracts\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"GEOID\"], [\"literal\", colors]]\n        ])\n    }\n\n}\n\nexport const ACSCensusLayerFactory = (options = {}) => new ACSCensusLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport {getColorRange} from \"@availabs/avl-components\"\nimport get from \"lodash.get\"\nimport {scaleLinear, scaleOrdinal, scaleQuantile, scaleQuantize, scaleThreshold} from \"d3-scale\"\nimport {extent} from \"d3-array\"\nimport fetcher from \"../wrappers/fetcher\";\nimport counties from \"../config/counties.json\";\n\nclass BPMPerformanceMeasuresLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n\n    setActive = !!this.viewId\n    name = 'BPM Performance Measures'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {value:'58',name:'2010 Base - Time period: All Day'},\n                {value:'62',name:'2040 Future - Time period: All Day'}\n            ],\n            value: this.viewId || '58',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        },\n        column:{\n            name: 'Column',\n            type: 'dropdown',\n            domain: [\n                {name: 'VMT (in Thousands)',value:'vehicle_miles_traveled'},\n                {name: 'VHT (in Thousands)', value:'vehicle_hours_traveled'},\n                {name: 'Avg Speed (Miles/Hr)',value:'avg_speed'},\n            ],\n            value: 'vehicle_miles_traveled',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi:false\n        }\n    }\n    legend = {\n        // types: [\"quantile\", \"linear\", \"quantize\", \"ordinal\"],\n        // type: \"linear\",\n        // domain: [0, 50, 100],\n        // range: getColorRange(3, \"BrBG\", true),\n\n        // type: \"ordinal\",\n        // domain: [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"],\n        // range: getColorRange(5, \"Set3\", true),\n        // height: 2,\n        // width: 320,\n        // direction: \"horizontal\",\n\n        // type: \"quantize\",\n        // domain: [0, 15000],\n        // range: getColorRange(5, \"BrBG\", true),\n        // format: \",d\",\n\n        type: \"quantile\",\n        range: getColorRange(5, \"YlOrRd\", true),\n        domain: [],\n        show: true,\n        Title: \"\",\n        format: ',d',\n\n    }\n\n    onHover = {\n        layers: [\"Counties\"],\n        callback: (layerId, features, lngLat) => {\n            const geoid = features.reduce((a,c) => {\n                a = get(c,['properties','geoid'],'')\n                return a\n            },'')\n            const graph = counties.reduce((a,c) =>{\n                if (c.geoid === geoid ){\n                    a = c\n                }\n                return a\n            },{})\n            return this.data.data.reduce((a,c) =>{\n                if(c.area === graph['name']){\n                    a.push(\n                        [`${this.filters.dataset.domain.reduce((a,c) => {\n                            if(c.value === this.filters.dataset.value){\n                                a = c.name\n                            }\n                            return a\n                        },'')}-${this.filters.column.domain.reduce((a,c) => {\n                           if(c.value === this.filters.column.value){\n                               a = c.name\n                           } \n                           return a \n                        },'')}`],\n                        ['County:',`${c.area}-${graph['state_code']}`],\n                        [\"Value:\",c[this.filters.column.value]])\n                }\n                return a\n            },[]).sort()\n\n        }\n    }\n\n    sources = [\n        {\n            id: \"counties\",\n            source: {\n                type: \"vector\",\n                url: \"mapbox://am3081.a8ndgl5n\"\n            }\n        }\n    ]\n    layers = [\n        {\n            id: \"Counties\",\n            filter: false,\n            \"source-layer\": \"counties\",\n            source: \"counties\",\n            type: \"fill\",\n            paint: {\n                \"fill-color\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"hover\"], false],\n                    \"#090\",\n                    \"#900\"\n                ],\n                \"fill-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    5, 0.5,\n                    20, 0.1\n                ]\n            }\n        }\n    ]\n\n\n\n    init(map){\n\n        return fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n            .then(response =>{\n                this.data = response\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.column.domain.reduce((a,c) =>{\n                   if(c.value === this.filters.column.value){\n                       a = c.name\n                   } \n                   return a \n                },'')}`\n                this.data_counties = this.data.data.map(item =>{\n                    return counties.reduce((a,c) =>{\n                        if(item.area === c.name){\n                            a['name'] = c.name\n                            a['geoid'] = c.geoid\n                        }\n                        return a\n                    },{})\n                })\n                this.legend.domain = this.data.data.reduce((a,c) =>{\n                    a.push(c[this.filters.column.value])\n                    return a\n                },[])\n                return response\n            })\n\n    }\n\n    fetchData() {\n        return new Promise(resolve =>\n            fetcher(`${HOST}views/${this.filters.dataset.value}/data_overlay`)\n                .then(response =>{\n                    this.data = response\n                    setTimeout(resolve,1000)\n                })\n        );\n    }\n\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"dataset\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.column.domain.reduce((a,c) => {\n                    if(c.value === this.filters.column.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                break;\n            }\n            case \"column\": {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if (c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}-${this.filters.column.domain.reduce((a,c) => {\n                    if(c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')}`\n                this.legend.domain = this.processedData.map(d => d.value).filter(d => d).sort()\n                if(value === 'avg_speed'){\n                    this.legend.format = ',f'\n                }else{\n                    this.legend.format = ',d'\n                }\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n    getFormat(column){\n        return ',d' ? column === 'value' : ',f'\n    }\n\n    getColorScale(data) {\n\n        const { type, range, domain } = this.legend;\n\n        switch (type) {\n            case \"quantile\": {\n                const domain = data.map(d => d.value).filter(d => d).sort();\n                this.legend.domain = domain;\n                return scaleQuantile()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"quantize\": {\n                const domain = extent(data, d => d.value);\n                this.legend.domain = domain;\n                return scaleQuantize()\n                    .domain(domain)\n                    .range(range);\n            }\n            case \"threshold\": {\n                return scaleThreshold()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"linear\":{\n                return scaleLinear()\n                    .domain(domain)\n                    .range(range)\n            }\n            case \"ordinal\":{\n                return scaleOrdinal()\n                    .domain(domain)\n                    .range(range)\n\n            }\n            default:{\n                //do nothing\n            }\n        }\n    }\n\n    render(map) {\n\n        if (this.data_counties.length) {\n            map.setFilter(\"Counties\", [\"in\", [\"get\", \"geoid\"], [\"literal\", this.data_counties.map(d => d.geoid)]]);\n        }\n        else {\n            map.setFilter(\"Counties\", false);\n        }\n        //\n        this.processedData = this.data.data.reduce((acc,curr) =>{\n            this.data_counties.forEach(data_county =>{\n                if(curr.area === data_county.name){\n                    acc.push({\n                        id: data_county.geoid,\n                        value: curr[this.filters.column.value]\n                    })\n                }\n            })\n            return acc\n        },[])\n\n        const colorScale = this.getColorScale(this.processedData),\n            colors = this.processedData.reduce((a,c) =>{\n                if(c.value !== 0){\n                    a[c.id] = colorScale(c.value)\n                }\n                return a\n            },{});\n\n        map.setPaintProperty(\"Counties\", \"fill-color\", [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#090\",\n            [\"get\", [\"get\", \"geoid\"], [\"literal\", colors]]\n        ])\n    }\n\n}\n\nexport const BPMPerformanceMeasuresLayerFactory = (options = {}) => new BPMPerformanceMeasuresLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport get from \"lodash.get\"\nimport fetcher from \"../wrappers/fetcher\";\nimport hub_bound from '../config/hub_bound.json'\nimport mapboxgl from 'mapbox-gl'\n\nclass HubBoundTravelDataLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n\n    setActive = !!this.viewId\n    name = 'Hub Bound Travel Data'\n    filters = {\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: [2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019],\n            value: 2019,\n            multi: false\n        },\n        from: {\n            name: 'From',\n            type: 'dropdown',\n            domain: ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'],\n            value: '12AM',\n            multi: false\n        },\n        to: {\n            name: 'To',\n            type: 'dropdown',\n            domain: ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'],\n            value: '12PM',\n            multi: false\n        },\n        mode: {\n            name: 'Mode',\n            type: 'dropdown',\n            domain: [\n                {name:'Bicycle',value:'9'},\n                {name:'Express Bus',value:'5'},\n                {name:'Local Bus',value:'4'},\n                {name:'Private Ferry',value:'8'},\n                {name:'Public Ferry',value:'7'},\n                {name:'Rail Rapid Transit - Express',value:'3'},\n                {name:'Rail Rapid Transit - Local',value:'2'},\n                {name:'Suburban Rail',value:'1'},\n                {name:'Tramway',value:'10'},\n                {name:'Vehicles (Auto+Taxi+Trucks+Comm. Vans)',value:'6'}\n            ],\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            value: '6',\n            multi: false\n        },\n        direction: {\n            name: 'Direction',\n            type: 'dropdown',\n            domain: ['Inbound', 'Outbound'],\n            value: 'Inbound',\n            multi: false\n        }\n    }\n    onHover = {\n        layers: [\"county_points\"],\n        callback: (layerId, features, lngLat) => {\n            const id = features.reduce((a,c)=>{\n                a = get(c,['id'],'')\n                return a\n            },0)\n            return this.data.data.reduce((a,c) =>{\n                if(c.id === id){\n\n                    a.push(\n                        ['Facility Name:',c['loc_name']],\n                        ['Sector:',c['sector_name']],\n                        ['Mode:',c['mode_name']],\n                        ['Route:',c['route_name']],\n                        [c['var_name'],c['count']],\n\n                    )\n                }\n                return a\n            },[])\n\n\n\n        }\n    }\n    legend = {\n        type: \"ordinal\",\n        domain: [],\n        range: [],\n        height: 5,\n        width: 320,\n        direction: \"vertical\",\n        show:true,\n        Title:\"\"\n    }\n    sources = [\n        {\n            id: \"county_points\",\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                },\n\n            }\n        }\n    ]\n    layers = [\n        {\n            id:\"county_points\",\n            source:'county_points',\n            type: 'circle',\n            paint:{\n                'circle-opacity':1\n            },\n            visibility: 'none',\n        }\n    ]\n\n    init(map) {\n        const from = this.convertTime(this.filters.from.value)\n        const to = this.convertTime(this.filters.to.value)\n        const url = `${HOST}/views/${this.viewId || '23'}/data_overlay?utf8=%E2%9C%93&`\n        const params = `year=${this.filters.year.value}&hour=${from}&upper_hour=${to}&transit_mode=${this.filters.mode.value}&transit_direction=${this.filters.direction.value}&lower=&upper=&commit=Filter`\n\n        return fetcher(url+params)\n            .then(response => {\n                this.data = response\n                this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n                this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === this.filters.mode.value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${this.filters.from.value} to ${this.filters.to.value}, \n                Direction: ${this.filters.direction.value}`\n\n            })\n\n    }\n\n    fetchData() {\n\n        const from = this.convertTime(this.filters.from.value)\n        const to = this.convertTime(this.filters.to.value)\n        const url = `${HOST}/views/23/data_overlay?utf8=%E2%9C%93&`\n        const params = `year=${this.filters.year.value}&hour=${from}&upper_hour=${to}&transit_mode=${this.filters.mode.value}&transit_direction=${this.filters.direction.value}&lower=&upper=&commit=Filter`\n        return fetcher(url+params)\n            .then(response => {\n\n                this.data = response\n            })\n    }\n\n    onAdd(mapboxMap, falcor) {\n        let coordinates = hub_bound.features[0].geometry.coordinates[0];\n        let bounds =coordinates.reduce(function (bounds, coord) {\n            return bounds.extend(coord);\n        }, new mapboxgl.LngLatBounds(coordinates[0], coordinates[0]));\n        mapboxMap.fitBounds(bounds,{\n            padding: 10\n        })\n        return Promise.resolve();\n    }\n\n    onRemove(mapboxMap){\n\n        mapboxMap.removeLayer('counties')\n        mapboxMap.removeSource('counties')\n        mapboxMap.fitBounds([\n            [-70.12161387603946,45.142811053355814],\n            [-78.23968012395866,39.90735688410206]\n        ])\n    }\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"year\" : {\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                        if(c.value === this.filters.mode.value){\n                            a = c.name \n                        }\n                        return a \n                    },'')},\n                Year:${value},From:${this.filters.from.value} to ${this.filters.to.value}, \n                Direction: ${this.filters.direction.value}`\n                break;\n            }\n            case \"from\":{\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === this.filters.mode.value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${value} to ${this.filters.to.value}, \n                Direction: ${this.filters.direction.value}`\n                break;\n            }\n            case \"to\":{\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === this.filters.mode.value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${this.filters.from.value} to ${value}, \n                Direction: ${this.filters.direction.value}`\n                break;\n            }\n            case \"mode\":{\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${this.filters.from.value} to ${this.filters.to.value}, \n                Direction: ${this.filters.direction.value}`\n                break;\n            }\n            case \"direction\":{\n                this.legend.Title = `Mode:${this.filters.mode.domain.reduce((a,c) => {\n                    if(c.value === this.filters.mode.value){\n                        a = c.name\n                    }\n                    return a\n                },'')},\n                Year:${this.filters.year.value},From:${this.filters.from.value} to ${this.filters.to.value}, \n                Direction: ${value}`\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n    convertTime(time){\n        let value = 0\n        if (time.includes('AM') && time !== '12AM'){\n            value = time.substring(0,time.length - 1)\n        }\n        else if(time.includes('PM') && time !== '12PM'){\n            value = 12 + parseInt(time.substring(0,time.length - 1))\n        }\n        else if(time === '12AM'){\n            value = 0\n        }else{\n            value = 12\n        }\n        return value\n    }\n\n    render(map){\n\n        let geojson = {\n            type: \"FeatureCollection\",\n            features : []\n        }\n\n        let line_geojson = {\n            type:'geojson',\n            data: {\n                type: 'Feature',\n                properties: {},\n                geometry : {\n                    type: 'LineString',\n                    coordinates: hub_bound.features[0].geometry.coordinates[0]\n                }\n            }\n        }\n\n        const colors = {}\n\n        this.data.data.forEach(d=>{\n        this.data.symbologies[0].color_scheme.forEach(item =>{\n            if (item.value === d['sector_name']){\n                    colors[d['sector_name']] = item.color\n                }\n            })\n        })\n\n        geojson.features = this.data.data.map(item =>{\n\n            return {\n                type: \"Feature\",\n                id:item['id'],\n                properties: {\n                    \"name\":item['loc_name'],\n                    \"sector\":item['sector_name'],\n\n                },\n                geometry: {\n                    type:\"Point\",\n                    \"coordinates\": [item[\"lng\"],item[\"lat\"]]\n                }\n            }\n        })\n\n\n        if(!map.getSource('counties') && !map.getLayer('counties')){\n            map.addSource('counties', line_geojson)\n            map.addLayer({\n                id: \"counties\",\n                source:'counties',\n                type: 'line',\n                paint:{\n                    'line-color': 'black',\n                    'line-width':1,\n                    'line-dasharray':[10,5]\n                }\n            })\n        }\n        if(map.getSource('county_points')){\n            map.getSource('county_points').setData(geojson)\n        }\n\n        if(map.getSource('county_points') && map.getLayer(\"county_points\")){\n            map.setPaintProperty(\n                'county_points',\n                'circle-color',\n                [\"get\", [\"to-string\", [\"get\", \"sector\"]], [\"literal\",colors]]\n            )\n        }\n    }\n\n\n}\n\n\n\nexport const HubBoundTravelDataLayerFactory = (options = {}) => new HubBoundTravelDataLayer(options);\n","import {LayerContainer} from \"components/avl-map/src\"\nimport {HOST} from \"./layerHost\";\nimport fetcher from \"../wrappers/fetcher\";\nimport rtp_ids from '../config/rtp_ids.json'\nimport rtp_sponsors from '../config/rtp_sponsors.json'\nvar parse = require('wellknown');\n\n\nclass RTPProjectDataLayer extends LayerContainer {\n    constructor(props) {\n        super(props);\n        this.viewId = props.viewId\n    }\n\n    setActive = !!this.viewId\n    name = 'RTP Project Data'\n    filters = {\n        dataset: {\n            name: 'Dataset',\n            type: 'dropdown',\n            domain: [\n                {name: '2040 RTP Projects', value: '53'},\n                {name: '2045 RTP Projects', value: '141'}\n            ],\n            value: this.viewId || '53',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        rtp_id: {\n            name: 'RTP ID',\n            type: 'dropdown',\n            domain: rtp_ids.filter(d => d.name !== null),\n            value: \"Select All\",\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        year: {\n            name: 'Year',\n            type: 'dropdown',\n            domain: ['Select All',2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025, 2026, 2027, 2028, 2029, 2030, 2031, 2032, 2040],\n            value: 'Select All'\n        },\n        project_type: {\n            name: 'Project Type',\n            type: 'dropdown',\n            domain: [\n                {name:'Select All',value:\"Select All\"},\n                {name: 'Study', value: '1'},\n                {name: 'Highway', value: '2'},\n                {name: 'Ferry', value: '3'},\n                {name: 'Transit', value: '4'},\n                {name: 'Rail', value: '5'},\n                {name: 'Truck', value: '6'},\n                {name: 'Pedestrian', value: '7'},\n                {name: 'Bike', value: '8'},\n                {name: 'Bus', value: '10'},\n                {name: 'ITS', value: '9'},\n                {name: 'Parking', value: '12'}\n            ],\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        plan_portion: {\n            name: 'Plan Portion',\n            type: 'dropdown',\n            domain: [\n                {name:'Select All',value:'Select All'},\n                {name: 'Constrained', value: '2'},\n                {name: 'Vision', value: '1'}\n            ],\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        },\n        sponsor: {\n            name: 'Sponsor',\n            type: 'dropdown',\n            domain: rtp_sponsors,\n            value: 'Select All',\n            accessor: d => d.name,\n            valueAccessor: d => d.value,\n            multi: false\n        }\n    }\n    legend = {\n        type: \"ordinal\",\n        domain: [],\n        range: [],\n        height: 5,\n        width: 320,\n        direction: \"vertical\",\n        show:true,\n        Title:\"\"\n    }\n    sources = [\n        {\n            id: 'county_symbols',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        },\n        {\n            id: 'county_lines',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        },\n        {\n            id: 'county_polygons',\n            source: {\n                type: \"geojson\",\n                data: {\n                    type: \"FeatureCollection\",\n                    features: []\n                }\n            }\n        }\n    ]\n    onHover = {\n        layers: [\"county_lines\", \"county_polygons\", 'poi-rail', 'poi-rail-metro', 'poi-us-interstate-truck-3', 'poi-bus', 'poi-bicycle-share', 'poi-ferry', 'poi-au-national-highway-3', 'poi-pitch-11', 'poi-college-11'],\n        callback: (layerId, features, lngLat) => {\n            const feature = features.reduce((a, c) => {\n                a = this.data.data.reduce((acc, curr) => {\n\n                    if (curr['rtp_id'] === c['properties']['rtp_id']\n                        && curr['ptype'] === c['properties']['project_type']\n                        && curr['plan_portion'] === c['properties']['plan_portion']\n                        && curr['sponsor'] === c['properties']['sponsor']\n                        && curr['description'] === c['properties']['description']\n                    ) {\n                        acc = curr\n                    }\n                    return acc\n                },)\n                return a\n            }, {})\n\n            return [\n                ['Project ID:', feature['rtp_id']],\n                ['Year:', this.filters.year.value],\n                ['Plan Portion:', feature['plan_portion']],\n                ['Sponsor:', feature['sponsor']],\n                ['Project Type:', feature['ptype']],\n                ['Cost:', feature['estimated_cost']],\n                ['Description:', feature['description'].toLowerCase()]\n            ]\n\n\n        }\n    }\n\n\n\n\n    init(map) {\n\n        const url = `${HOST}/views/${this.filters.dataset.value}/data_overlay`\n        const cost_lower = ''\n        const cost_upper = ''\n\n        const params = `?utf8=%E2%9C%93&rtp_id=${this.filters.rtp_id.value === 'Select All'? '':this.filters.rtp_id.value}&current_year=${this.filters.year.value === 'Select All'? '':this.filters.year.value}&cost_lower=${cost_lower}&cost_upper=${cost_upper}&ptype=${this.filters.project_type.value === 'Select All'? '':this.filters.project_type.value}&plan_portion=${this.filters.plan_portion.value === 'Select All'? '':this.filters.plan_portion.value}&sponsor=${this.filters.sponsor.value === 'Select All'? '':this.filters.sponsor.value}&commit=Filter`\n        return fetcher(url + params)\n            .then(response => {\n                this.data = response\n                this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n                this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n               Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n            })\n    }\n\n    fetchData() {\n        const url = `${HOST}/views/${this.filters.dataset.value}/data_overlay`\n        const cost_lower = ''\n        const cost_upper = ''\n        const params = `?utf8=%E2%9C%93&rtp_id=${this.filters.rtp_id.value === 'Select All'? '':this.filters.rtp_id.value}&current_year=${this.filters.year.value === 'Select All'? '':this.filters.year.value}&cost_lower=${cost_lower}&cost_upper=${cost_upper}&ptype=${this.filters.project_type.value === 'Select All'? '':this.filters.project_type.value}&plan_portion=${this.filters.plan_portion.value === 'Select All'? '':this.filters.plan_portion.value}&sponsor=${this.filters.sponsor.value === 'Select All'? '':this.filters.sponsor.value}&commit=Filter`\n\n        return fetcher(url + params)\n            .then(response => {\n                this.data = response\n                this.legend.domain = this.data.symbologies[0].color_scheme.map(d => d.value)\n                this.legend.range = this.data.symbologies[0].color_scheme.map(d => d.color)\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a \n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name \n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n            })\n    }\n\n    onFilterChange(filterName,value,preValue){\n\n        switch (filterName){\n            case \"dataset\" : {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"year\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${value === 'Select All'? 'All':value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"rtp_id\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${value === 'Select All'? 'All':value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"project_type\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"plan_portion\":{\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.sponsor.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            case \"sponsor\": {\n                this.legend.Title = `${this.filters.dataset.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.dataset.value){\n                        a = c.name\n                    }\n                    return a\n                },'')}\n                Year: ${this.filters.year.value === 'Select All' ? 'All':this.filters.year.value}, \n                RTP Id: ${this.filters.rtp_id.value === 'Select All'? 'All':this.filters.rtp_id.value},\n                Project Type: ${this.filters.project_type.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.project_type.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n                Plan Portion : ${this.filters.plan_portion.domain.reduce((a,c) =>{\n                    if(c.value === this.filters.plan_portion.value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')},\n               Sponsor: ${this.filters.sponsor.domain.reduce((a,c) =>{\n                    if(c.value === value){\n                        a = c.name === 'Select All' ? 'All': c.name\n                    }\n                    return a\n                },'')}\n                `\n                break;\n            }\n            default:{\n                //do nothing\n            }\n        }\n\n    }\n\n    onRemove(mapboxMap) {\n\n        mapboxMap.removeLayer('poi-rail')\n        mapboxMap.removeLayer('poi-rail-metro')\n        mapboxMap.removeLayer('poi-us-interstate-truck-3')\n        mapboxMap.removeLayer('poi-bus')\n        mapboxMap.removeLayer('poi-bicycle-share')\n        mapboxMap.removeLayer('poi-ferry')\n        mapboxMap.removeLayer('poi-au-national-highway-3')\n        mapboxMap.removeLayer('poi-pitch-11')\n        mapboxMap.removeLayer('poi-college-11')\n        mapboxMap.removeLayer('county_polygons')\n        mapboxMap.removeLayer('county_lines')\n        mapboxMap.removeSource('county_symbols')\n        mapboxMap.removeSource('county_polygons')\n        mapboxMap.removeSource('county_lines')\n    }\n\n    render(map) {\n\n        let geojson = {\n            type: \"FeatureCollection\",\n            features: []\n        }\n\n        const symbols_map = {\n            'Rail': 'rail',\n            'Transit': 'rail-metro',\n            'Truck': 'us-interstate-truck-3',\n            'Bus': 'bus',\n            'Bike': 'bicycle-share',\n            'Ferry': 'ferry',\n            'Highway': 'au-national-highway-3',\n            'Pedestrian': 'pitch-11',\n            'Study': 'college-11',\n\n        }\n\n        geojson.features = this.data.data.map((d, i) => {\n\n            return {\n                type: 'Feature',\n                id: i,\n                properties: {\n                    \"description\": d['description'],\n                    \"estimated_cost\": d['estimated_cost'],\n                    \"plan_portion\": d['plan_portion'],\n                    \"project_type\": d['ptype'],\n                    \"rtp_id\": d['rtp_id'],\n                    \"sponsor\": d['sponsor'],\n                    \"icon\": symbols_map[d['ptype']]\n                },\n                geometry: parse(d['geography'])\n            }\n        })\n\n        const symbols_geojson =\n            {\n                type: 'FeatureCollection',\n                features: geojson.features.filter(d => {\n                    if (d['geometry'] && d['geometry'].type === 'Point') {\n                        return d\n                    }\n                    return false\n                })\n            }\n\n        const polygon_geojson = {\n            type: 'FeatureCollection',\n            features: geojson.features.filter(d => {\n                if (d['geometry'] && d['geometry'].type === 'MultiPolygon') {\n                    return d\n                }\n                return false\n            })\n        }\n\n        polygon_geojson.features.forEach(feature =>{\n\n            feature.properties['color'] = this.data.symbologies[0].color_scheme.reduce((a,c) =>{\n                if(c.label === feature.properties.project_type){\n                    a = c.color\n                }\n                return a\n            },'')\n        })\n\n        const line_geojson = {\n            type: 'FeatureCollection',\n            features: geojson.features.filter(d => {\n                if (d['geometry'] && d['geometry'].type === 'MultiLineString') {\n                    return d\n                }\n                return false\n            })\n        }\n\n\n        line_geojson.features.forEach(feature =>{\n\n            feature.properties['color'] = this.data.symbologies[0].color_scheme.reduce((a,c) =>{\n                if(c.label === feature.properties.project_type){\n                    a = c.color\n                }\n                return a\n            },'')\n        })\n\n        if (map.getSource('county_lines')) {\n            map.getSource('county_lines').setData(line_geojson)\n        }\n\n        if (!map.getLayer('county_lines')) {\n            map.addLayer({\n                id: \"county_lines\",\n                source: 'county_lines',\n                type: 'line',\n                paint: {\n                    'line-color': {\n                        type:'identity',\n                        property:'color'\n                    },\n                    'line-width': 3,\n\n                }\n            })\n        }\n\n        if (map.getSource('county_polygons')) {\n            map.getSource('county_polygons').setData(polygon_geojson)\n        }\n\n        if (!map.getLayer('county_polygons')) {\n            map.addLayer({\n                id: 'county_polygons',\n                source: 'county_polygons',\n                type: 'fill',\n                paint: {\n                    \"fill-color\": {\n                        type:'identity',\n                        property:'color'\n                    },\n                    \"fill-opacity\": [\n                        \"interpolate\",\n                        [\"linear\"],\n                        [\"zoom\"],\n                        5, 0.5,\n                        20, 0.1\n                    ]\n                }\n            })\n        }\n        if (map.getSource('county_symbols')) {\n            map.getSource('county_symbols').setData(symbols_geojson)\n        }\n        geojson.features.forEach(feature => {\n            if (feature.properties.icon) {\n                let symbol = feature.properties.icon\n                let layerID = 'poi-' + symbol;\n                if (!map.getLayer(layerID)) {\n                    map.addLayer({\n                        'id': layerID,\n                        'type': 'symbol',\n                        'source': 'county_symbols',\n                        'layout': {\n                            'icon-image': symbol,\n                            'icon-allow-overlap': true\n                        },\n                        'filter': ['==', 'icon', symbol]\n                    })\n\n                }\n\n            }\n        })\n\n    }\n}\n\nexport const RTPProjectDataLayerFactory = (options = {}) => new RTPProjectDataLayer(options)\n","import React from \"react\"\n\nimport colorbrewer from \"colorbrewer\"\n\nimport styled from \"styled-components\"\nimport get from \"lodash.get\"\n\nconst ColorRanges = {}\n\nfor (const type in colorbrewer.schemeGroups) {\n\tcolorbrewer.schemeGroups[type].forEach(name => {\n\t\tconst group = colorbrewer[name];\n\t\tfor (const length in group) {\n\t\t\tif (!(length in ColorRanges)) {\n\t\t\t\tColorRanges[length] = [];\n\t\t\t}\n\t\t\tColorRanges[length].push({\n\t\t\t\ttype: `${ type[0].toUpperCase() }${ type.slice(1) }`,\n\t\t\t\tname,\n\t\t\t\tcategory: \"Colorbrewer\",\n\t\t\t\tcolors: group[length]\n\t\t\t})\n\t\t}\n\t})\n}\n\nexport { ColorRanges };\nconsole.log(\"ColorRanges\", ColorRanges);\n\nexport const getColorRange = (size, name) =>\n\tget(ColorRanges, [size], [])\n\t\t.reduce((a, c) => c.name === name ? c.colors : a, []).slice();\n\nconst ColorBarContainer =styled.div`\n  > *:first-child {\n    border-top-left-radius: 0.25rem;\n    border-bottom-left-radius: 0.25rem;\n  }\n  > *:last-child {\n    border-top-right-radius: 0.25rem;\n    border-bottom-right-radius: 0.25rem;\n  }\n`\nexport const ColorBar = ({ colors, small = false }) => {\n  return (\n    <ColorBarContainer className={ `grid grid-cols-${ colors.length }` }>\n      { colors.map((c, i) =>\n          <div key={ i }\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\tbackgroundColor: c,\n\t\t\t\t\t\t\ttransition: \"background-color 0.5s\"\n\t\t\t\t\t\t} }\n            className={ `col-span-1 ${ small ? \"h-2\" : \"h-3\" }` }/>\n        )\n      }\n    </ColorBarContainer>\n  )\n}\n","import React from \"react\"\n\nimport { BooleanInput, Select } from \"@availabs/avl-components\"\n\nimport deepequal from \"deep-equal\"\nimport get from \"lodash.get\"\nimport {\n  groups,\n  scaleLinear,\n  scaleOrdinal,\n  scaleQuantize,\n  scaleQuantile,\n  scaleThreshold,\n  extent as d3extent,\n  format as d3format\n} from \"d3\"\n\nimport { ColorBar, ColorRanges } from \"./color-ranges\"\n\nconst ColorSteps = Object.keys(ColorRanges).sort((a, b) => +a - +b);\n\nexport const Legend = ({ type, domain, range, format, ...props }) => {\n\n  const scale = React.useMemo(() => {\n    return getScale(type, domain, range);\n  }, [type, domain, range]);\n\n  const Format = React.useMemo(() => {\n    return getFormat(format);\n  }, [format]);\n\n  return (\n    <div>\n      { type === \"linear\" ?\n        <LinearScale scale={ scale } format={ Format } { ...props }/> :\n        type === \"ordinal\" ?\n        <OrdinalScale scale={ scale } format={ Format } { ...props }/> :\n        type === \"quantize\" || type === \"quantile\" || type === \"threshold\"  ?\n        <QuantizleScale scale={ scale } format={ Format } { ...props }/> :\n        <div>Unknown scale type \"{ type }.\"</div>\n      }\n    </div>\n  )\n}\n\nconst getScale = (type, domain, range) => {\n  switch (type) {\n    case \"linear\":\n      return scaleLinear()\n        .domain(domain)\n        .range(range);\n    case \"ordinal\":\n      return scaleOrdinal()\n        .domain(domain)\n        .range(range);\n    case \"quantize\":\n      return scaleQuantize()\n        .domain(d3extent(domain))\n        .range(range);\n    case \"quantile\":\n      return scaleQuantile()\n        .domain(domain)\n        .range(range);\n    case \"threshold\":\n      return scaleThreshold()\n        .domain(domain)\n        .range(range);\n    default:\n      return null;\n  }\n}\n\nconst Identity = i => i;\nconst getFormat = format => {\n  if (!format) return Identity;\n\n  if (typeof format === \"string\") {\n    return d3format(format);\n  }\n  return format;\n}\n\nconst InitialToolState = {\n  size: 5,\n  reverse: false,\n  opened: null\n}\nconst InitReducer = size => ({\n  ...InitialToolState,\n  size: size || 5\n})\nconst ToolReducer = (state, action) => {\n  const { type, ...payload } = action;\n  switch (type) {\n    case \"set-size\":\n    case \"set-reverse\":\n    case \"set-opened\":\n      return {\n        ...state,\n        ...payload\n      }\n    default:\n      return state;\n  }\n}\nexport const useLegendReducer = size => {\n  return React.useReducer(ToolReducer, size, InitReducer);;\n}\n\nexport const LegendTools = ({ layer, MapActions }) => {\n\n  const range = get(layer, [\"legend\", \"range\"], []);\n\n  const [toolState, dispatch] = useLegendReducer(range.length);\n\n  const updateLegend = React.useCallback(update => {\n    MapActions.updateLegend(layer, update);\n  }, [layer, MapActions]);\n\n  return (\n    <DummyLegendTools { ...toolState } layer={ layer } current={ range }\n      updateLegend={ updateLegend } dispatch={ dispatch }/>\n  )\n}\nexport const DummyLegendTools = ({ layer, current, updateLegend, dispatch, size, reverse, opened }) => {\n\n  const colorsByType = React.useMemo(() => {\n    return groups(get(ColorRanges, size, []), r => r.type);\n  }, [size]);\n\n  return (\n    <React.Fragment>\n      <div className=\"flex items-center mb-1\">\n        <div className=\"w-36\">Step Size</div>\n        <div className=\"flex-1\">\n          <Select options={ ColorSteps }\n            valueAccessor={ v => +v }\n            value={ size }\n            onChange={ v => dispatch({ type: \"set-size\", size: v }) }\n            multi={ false }\n            removable={ false }\n            searchable={ false }/>\n        </div>\n      </div>\n\n      <div className=\"flex items-center mb-1\">\n        <div className=\"w-36\">Reverse Colors</div>\n        <div className=\"flex-1\">\n          <BooleanInput value={ reverse }\n            onChange={ v => dispatch({ type: \"set-reverse\", reverse: v }) }/>\n        </div>\n      </div>\n\n      <div>\n        <div className=\"font-bold border-b mb-1\">\n          Color Range Types:\n        </div>\n        { colorsByType.map(([type, ranges]) =>\n            <ColorType key={ type } type={ type } ranges={ ranges }\n              opened={ opened } update={ updateLegend }\n              setOpen={ opened => dispatch({ type: \"set-opened\", opened }) }\n              current={ current } reverse={ reverse }/>\n          )\n        }\n      </div>\n    </React.Fragment>\n  )\n}\nconst ColorType = ({ type, ranges, current, opened, setOpen, reverse, update }) => (\n  <div className={ `\n      px-2 hover:border-current border-transparent border\n      cursor-pointer rounded transition\n    ` }\n    onClick={ e => { e.stopPropagation(); setOpen(type); } }>\n    { type }\n    <div className=\"pb-1\"\n      style={ { display: opened === type ? \"block\" : \"none\" } }>\n      { ranges.map(({ name, colors }) => {\n          if (reverse) {\n            colors = colors.slice().reverse();\n          }\n          const active = deepequal(colors, current);\n          return (\n            <div key={ name }\n              onClick={ e => update({ range: colors }) }\n              className={ `\n                p-1 border rounded-lg hover:border-current transition\n                ${ active ? \"border-current\" : \"border-transparent\" }\n              ` }>\n              <ColorBar key={ name } colors={ colors } small/>\n            </div>\n          )\n        })\n      }\n    </div>\n  </div>\n)\n\nconst LinearScale = ({ scale, format, ticks = 5 }) => {\n\n  const scaleTicks = scale.ticks(ticks);\n\n  return (\n    <div>\n      <ColorBar colors={ scaleTicks.map(t => scale(t)) }/>\n      <div className={ `text-sm grid grid-cols-${ scaleTicks.length }` }>\n        { scaleTicks.map(t =>\n            <div className=\"col-span-1 text-right pr-1\" key={ t }>\n              { format(t) }\n            </div>\n          )\n        }\n      </div>\n    </div>\n  )\n}\nconst OrdinalScale = ({ scale, format, height = 3, direction = \"vertical\" }) => {\n\n  const range = scale.range();\n\n  return (\n    <div>\n      { direction === \"horizontal\" ?\n        <>\n          <div className={ `grid grid-cols-${ range.length }` }>\n            { range.map(c =>\n                <div className=\"col-span-1 h-3 mx-2 rounded\" key={ c }\n                  style={ { backgroundColor: c } }/>\n              )\n            }\n          </div>\n          <div className={ `grid grid-cols-${ range.length }` }>\n            { scale.domain().map(d =>\n                <div className=\"col-span-1 text-center\" key={ d }>\n                  { format(d) }\n                </div>\n              )\n            }\n          </div>\n        </> :\n        <div className=\"flex\">\n          { scale.domain().reduce((a, c, i) => {\n              if (i % height === 0) {\n                a.push([]);\n              }\n              a[a.length - 1].push(c);\n              return a;\n            }, [])\n            .map((d, i) =>\n              <div key={ i }\n                className={ `${ i > 0 ? \"ml-6\" : \"\" } flex-1` }>\n                { d.map(dd =>\n                    <div className=\"flex items-center\" key={ dd }>\n                      <div className=\"h-6 w-6 rounded mr-1 mb-1\"\n                        style={ {\n                          backgroundColor: scale(dd)\n                        } }/>\n                      <div>{ format(dd) }</div>\n                    </div>\n                  )\n                }\n              </div>\n            )\n          }\n        </div>\n      }\n    </div>\n  )\n}\nconst QuantizleScale = ({ scale, format }) => {\n\n  const range = scale.range();\n\n  return (\n    <div>\n      <ColorBar colors={ range }/>\n      <div className={ `text-sm grid grid-cols-${ range.length }` }>\n        { range.map(r =>\n            <div className=\"col-span-1 text-right pr-1\" key={ r }>\n              { format(scale.invertExtent(r)[1]) }\n            </div>\n          )\n        }\n      </div>\n    </div>\n  )\n}\n","const NpmrdsSources = [\n  { id: \"npmrds\",\n    source: {\n      type: \"vector\",\n      url: \"https://tiles.availabs.org/data/npmrds.json\"\n    }\n  }\n]\n\nconst npmrdsPaint = {\n  'line-color': '#ccc',\n  'line-width': [\n    \"interpolate\",\n    [\"linear\"],\n    [\"zoom\"],\n    0,\n    [\n      \"match\",\n      [\"get\", \"n\"],\n      [1, 2],\n      0.5,\n      0\n    ],\n    13,\n    [\n      \"match\",\n      [\"get\", \"n\"],\n      [1, 2],\n      1.5,\n      1\n    ],\n    18,\n    [\n      \"match\",\n      [\"get\", \"n\"],\n      [1, 2],\n      8,\n      5\n    ]\n  ],\n  'line-opacity': [\n    \"case\",\n    [\"boolean\", [\"feature-state\", \"hover\"], false],\n    0.4,\n    1\n  ],\n  'line-offset': {\n    base: 1.5,\n    stops: [[5, 0], [9, 1], [15, 3], [18, 7]]\n  }\n}\n\nconst NpmrdsLayers = ['2016','2017','2018','2019','2020','2021']\n  .map(year => {\n    return {\n      id: `tmc-${year}`,\n      type: 'line',\n      source: 'npmrds',\n      beneath: 'waterway-label',\n      'source-layer': `npmrds_${year}`,\n      layout: {\n        'visibility': 'visible',\n        'line-join': 'round',\n        'line-cap': 'round'\n      },\n      paint: npmrdsPaint\n    }\n  })\n\n\n\n\nexport {\n  NpmrdsSources,\n  NpmrdsLayers\n}","const TrafficSignalsSources = [\n  { id: \"traffic_signals\",\n    source: {\n      type: \"vector\",\n      url: \"https://tiles.availabs.org/data/osm_traffic_signals.json\"\n    }\n  }\n]\n\nconst TrafficSignalsLayers = [{\n      'id': 'traffic_signals_layer',\n      'type': 'circle',\n      'source': 'traffic_signals',\n      'beneath': 'road-label',\n      'source-layer': \"osm_traffic_signals\",\n      'layout': {\n        'visibility': 'visible',\n      },\n      'filter': [\"==\",\"$type\",\"Point\"],\n      'minzoom': 13,\n      'paint': {\n        'circle-radius': 3,\n        'circle-color':' #B42222',\n        'circle-stroke-color': '#fefefe',\n        'circle-stroke-width': 1\n      }\n}]\n\nexport {\n\tTrafficSignalsSources,\n\tTrafficSignalsLayers\n}","import get from 'lodash.get'\nimport { getColorRange } from \"../../utils\"\nconst filters = {\n  geography: {\n    name: 'Geography',\n    type: 'select',\n    domain: [\n      { \n        name: 'All',\n        value: ['36061', '36005', '36047', '36081', '36085','09001', '09005', '09009','36111', '36027', '36071', '36105', '36087', '36119', '36079','36059', '36103','34003', '34019', '34017', '34021', '34023', '34025', '34027', '34029', '34031', '34035', '34037', '34039', '36113', '34013']\n      }, \n      {\n        name: 'NYBPM Counties',\n        value: ['36061', '36005', '36047', '36081', '36085','09001', '09005', '09009','36111', '36027', '36071', '36105', '36087', '36119', '36079','36059', '36103','34003', '34019', '34017', '34021', '34023', '34025', '34027', '34029', '34031', '34035', '34037', '34039', '36113', '34013']\n      },\n      {\n        name: 'Connecticut',\n        value:  ['09001', '09005', '09009']\n      },\n      {\n        name: 'Long Island',\n        value:  ['36059', '36103']\n      },\n      {\n        name: 'Mid Hudson',\n        value:  ['36111', '36027', '36071', '36105', '36087', '36119', '36079']\n      },\n      {\n        name: 'Mid Hudson South',\n        value:  ['36079', '36119', '36087']\n      },\n      {\n        name: 'New Jersey',\n        value: ['34003', '34019', '34017', '34021', '34023', '34025', '34027', '34029', '34031', '34035', '34037', '34039', '36113', '34013'] \n      },{\n        name: 'New York City',\n        value:  ['36061', '36005', '36047', '36081', '36085']\n      }\n    ],\n    value: \"All\",\n    searchable: true,\n    accessor: d => d.name,\n    valueAccessor: d => d.name,\n    multi: false,\n  },\n  year: {\n    name: 'Year',\n    type: \"select\",\n    multi: false,\n    domain: [2016, 2017, 2018, 2019,2020, 2021],\n    value: 2019\n  },\n  month: {\n    name: 'Month',\n    type: \"select\",\n    multi: false,\n    domain: [1,2,3,4,5,6,7,8,9,10,11,12],\n    value: 1\n  },\n  hour: {\n    name: \"Hour\",\n    type: \"select\",\n    multi: false,\n    domain: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],\n    value: 15\n  },\n  dow: {\n    name: \"Day of Week\",\n    type: \"select\",\n    multi: false,\n    domain: ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\n    value: 'Thursday'\n  },\n  vehicles: {\n    name: \"Vehicle Class\",\n    type: \"select\",\n    multi: false,\n    domain: ['All Vehicles', 'Freight Trucks Only', 'Passenger Vehicles Only'],\n    value: 'All Vehicles'\n  }\n \n \n}\n\n\nconst updateLegend = (filters, legend) => {\n  \n  //legend.type = \"threshold\";\n  //legend.range = getColorRange(get(legend, 'range.length', 6), \"RdYlBu\", true).reverse()\n  //legend.format = \",.2~f\";\n  \n}\n\n\nconst getNetwork = (filters) => {\n  if(filters.network.value == 'con') {\n    return filters.conflation.value\n  }\n  return filters.network.value\n}\n\n\n\nconst setActiveLayer = (layers, filters, mapboxMap) => {\n  // console.log('setLayers ', filters.network.value, filters.year.value)\n  return layers\n    .map(l => l.id)\n    .filter(l => l !== 'traffic_signals_layer')\n    .map(l => {\n      let output = null\n      let type = l.split('-')[0]\n      let year = l.split('-')[1]\n      let checkYear = filters.year.value\n      if(type === 'tmc' && +year === +checkYear) {\n        output = l\n        mapboxMap.setLayoutProperty(\n          l,'visibility','visible'\n        )\n      } else if(type !== 'geo'){\n        mapboxMap.setLayoutProperty(\n          l,'visibility','none'\n        )\n      }\n      return output\n    }).filter(d => d)\n   \n}\n\n// export filters\n// export updateSubMeasures\n// export getMeasure\n// export getMeasureName\nexport {\n  filters,\n  updateLegend,\n  setActiveLayer\n}"," import React from 'react'\nimport get from 'lodash.get'\n\nimport { getColorRange, /*Legend*/ } from \"../../utils\"\nimport { /*Select,*/ useFalcor } from '@availabs/avl-components'\nimport mapboxgl from \"mapbox-gl\"\nimport * as d3scale from \"d3-scale\"\nimport flatten from 'lodash.flatten'\n//import len from '@turf/length'\n// import flatten from 'lodash.flatten'\n\nimport { ckmeans } from 'simple-statistics'\n\nimport { \n  NpmrdsSources, \n  NpmrdsLayers\n} from '../../map-styles/npmrds'\n\nimport { \n  TrafficSignalsSources,\n  TrafficSignalsLayers\n} from '../../map-styles/traffic_signals'\n\nimport { \n  filters,\n  updateLegend,\n  setActiveLayer\n} from './filters'\n\nimport HoverComp from './HoverComp'\nimport { LayerContainer } from \"components/avl-map/src\"\n\n/* ---- To Do ----- \nX - Data Overview\nX - stop lights\nX - All Years Working\n1 - Get RIS with new IDS\n3 - Overview Graph through time\n4- test measures by geography\n   ---------------- */\nconsole.log('what text', getColorRange(6, \"RdYlBu\") ,getColorRange(6, \"RdYlBu\").reverse())\nconst getMonths = {\n  1 : 'January',\n  2 : 'February',\n  3 : 'March',\n}\n\nclass NPMRDSLayer extends LayerContainer {\n  name = \"NPMRDS speeds\"\n  sources = [\n    ...NpmrdsSources,\n    ...TrafficSignalsSources,\n    { id: \"geo-boundaries-source\",\n        source: {\n          type: \"geojson\",\n          data: {\n            type: \"FeatureCollection\",\n            features: []\n          }\n        }\n    },\n  ]\n  layers = [\n    // ...ConflationLayerCase,\n    ...NpmrdsLayers,\n    // ...TrafficSignalsLayers,\n    { id: \"geo-boundaries\",\n      type: \"line\",\n      source: \"geo-boundaries-source\",\n      paint: {\n        \"line-color\": \"#fff\"\n      }\n    }\n  ]\n\n  infoBoxes = [\n    {\n      Component: ({layer}) => (\n        <div className='w-full bg-npmrds-600 text-npmrds-100'>\n          \n        </div>\n      ),\n      show: true\n    },\n    \n  ]\n  toolbar = []\n  filters = filters\n  updateLegend = updateLegend\n  setActiveLayer = setActiveLayer\n  legend = {\n    type: \"quantile\",\n    domain: [10,20,30,40,55],\n    range: ['rgb(255,0,0)', 'rgb(255,100,0)','rgb(255,255,0)','rgb(0,100,255)','rgb(0,0,255)','rgb(0,255,255)','rgb(0,255,0)'],//['#d73027', '#fc8d59', '#fee090', '#e0f3f8', '#91bfdb', '#4575b4'],//['#4575b4', '#91bfdb', '#e0f3f8', '#fee090', '#fc8d59', '#d73027'],\n    format: \",.1f\",\n    show: true,\n    Title: ({ layer }) => {\n      if(!layer) return\n      return (<div className='text-gray-800'>\n        <div>NPMRDS - {this.filters.vehicles.value}</div>\n        <div className='text-sm font-light'> {this.filters.month.value} / {this.filters.year.value} {this.filters.hour.value}:00 - {this.filters.hour.value+1}:00 {this.filters.dow.value}</div> \n      </div>)\n    }\n  }\n  onHover = {\n    layers: [...NpmrdsLayers.map(d => d.id)],\n    filterFunc: function(layer, features, point, latlng) {\n\n        const key = 'tmc',\n          value = get(features, [0, \"properties\", key], \"none\"),\n          dir = get(features, [0, \"properties\", \"dir\"], \"none\");\n        return [\"in\", key, value] //[\"all\", [\"in\", key, value], [\"in\", \"dir\", dir]];\n    },\n    callback: (layerId, features, lngLat) => {\n      let feature = features[0]\n     \n      const key =  'tmc',\n      value = get(features, [0, \"properties\", key], \"none\")\n\n      let data = [\n        ...Object.keys(feature.properties).map(k=> [k, feature.properties[k]])        \n      ]\n      data.push(['hoverlayer', layerId])\n      return data\n    },\n    //HoverComp\n    \n  }\n  // onClick = {\n  //   layers: [...ConflationLayers.map(d => d.id)],\n  //   callback: (features, lngLat) => {\n  //     let feature = features[0]\n  //     console.log('click', feature, features)\n  //   } \n  // }\n\n  state = {\n    activeStation: null,\n    zoom: 6.6,\n    progress: 0,\n    qaLevel: 0.3,\n    allMeasures: [],\n    risAttributes: [],\n    tmcAttributes: [],\n    currentData: [],\n    activeLayers: []\n  }\n\n  \n  loadFromLocalStorage() {\n    return window.localStorage ?\n      JSON.parse(window.localStorage.getItem(\"macro-view-geographies\") || \"[]\")\n      : [];\n  }\n\n  saveToLocalStorage(geographies = this.filters.geography.value) {\n    if (window.localStorage) {\n      if (geographies.length) {\n        window.localStorage.setItem(\"macro-view-geographies\", JSON.stringify(geographies));\n      }\n      else {\n        window.localStorage.removeItem(\"macro-view-geographies\")\n      }\n    }\n  }\n\n\n\n  zoomToGeography() {\n    if (!this.mapboxMap) return;\n\n    const bounds = this.getBounds();\n\n    console.log('got bounds', bounds)\n\n    if (bounds.isEmpty()) return;\n\n    const options = {\n      padding: {\n        top: 25,\n        right: 200,\n        bottom: 25,\n        left: 200\n      },\n      bearing: 0,\n      pitch: 0,\n      duration: 2000\n    }\n\n    options.offset = [\n      (options.padding.left - options.padding.right) * 0.5,\n      (options.padding.top - options.padding.bottom) * 0.5\n    ];\n\n    const tr = this.mapboxMap.transform,\n      nw = tr.project(bounds.getNorthWest()),\n      se = tr.project(bounds.getSouthEast()),\n      size = se.sub(nw);\n\n    const scaleX = (tr.width - (options.padding.left + options.padding.right)) / size.x,\n      scaleY = (tr.height - (options.padding.top + options.padding.bottom)) / size.y;\n\n    options.center = tr.unproject(nw.add(se).div(2));\n    options.zoom = Math.min(tr.scaleZoom(tr.scale * Math.min(scaleX, scaleY)), tr.maxZoom);\n\n    this.mapboxMap.easeTo(options);\n  }\n\n  getBounds() {\n    let geoids = this.filters.geography.domain.filter(d => d.name === this.filters.geography.value)[0].value,\n      filtered = this.geographies\n        .filter(({ value }) => geoids.includes(value));\n    \n    return filtered\n      .reduce((a, c) => a.extend(c.bounds), new mapboxgl.LngLatBounds())\n  }\n\n  setActiveStation = () => {\n\n  }\n  \n  init(map, falcor) {\n\n    let states = [\"36\",\"34\",\"09\",\"42\"]\n    return falcor\n      .get(\n        [\"geo\", states, \"geoLevels\"],\n        \n      )\n      .then((res) => {\n        // const mInfo = get(res, [\"json\", \"pm3\", \"measureInfo\"], {});\n        // console.log('measureInfo', res)\n        let geo = get(res,'json.geo',{})\n        const geographies = flatten(states.map(s => geo[s].geoLevels));\n\n        this.geographies = \n         geographies.map(geo => ({\n            name: `${geo.geoname.toUpperCase()} ${geo.geolevel}`,\n            geolevel: geo.geolevel,\n            value: geo.geoid,\n            bounding_box: geo.bounding_box\n        }));\n        //this.filters.geography.value = this.loadFromLocalStorage();\n        //console.log('where am i', this.filters.geography.value)\n        this.zoomToGeography();\n      })\n  }\n\n  onFilterChange(filterName, newValue, prevValue) {\n    switch (filterName) {\n     \n\n      case \"geography\":\n        //console.log('new geography', newValue)\n        this.zoomToGeography(newValue);\n        this.saveToLocalStorage();\n        break;\n      \n      default:\n        console.log(\"no case for filter\", filterName);\n        break;\n    }\n  }\n  \n  getColorScale(domain) {\n    if(this.legend.range.length > domain.length) {\n      this.legend.domain  = []\n      return false\n    }\n    this.legend.domain = [0,10,20,30,40,50,55]\n    //ckmeans(domain,this.legend.range.length).map(d => Math.min(...d))\n    this.updateLegend(this.filters,this.legend)\n    return d3scale.scaleLinear()\n      .domain(this.legend.domain)\n      .range(this.legend.range);\n  }\n\n  fetchData(falcor) {\n    // console.log('fetchData')\n    let year = +this.filters.year.value,\n      month = +this.filters.month.value,\n      geoids = this.filters.geography.domain.filter(d => d.name === this.filters.geography.value)[0].value,\n      filtered = this.geographies\n        .filter(({ value }) => geoids.includes(value));\n    \n   // console.log('request', ['tig','npmrds',`${month}|${year}`,filtered.map(d => `${d.geolevel}|${d.value}`), 'data'])\n\n    let requests = filtered.reduce((a, c) => { \n      a.push(['tig','npmrds',`${month}|${year}`,`${c.geolevel}|${c.value}`, 'data'])\n      a.push([\"geo\", c.geolevel.toLowerCase(), c.value, \"geometry\"]);\n      return a;\n    },[])\n\n    return falcor.get(...requests)\n      // .then((data) => {\n      //   //console.log('fetchData gem requests',data)\n      //   console.log('got data', data)\n      //   return data\n      // })\n        \n  }\n\n  render(map) {\n    // console.log('render', this)\n    //console.log('testing', map.getStyle().layers)\n    let year = +this.filters.year.value,\n      month = +this.filters.month.value,\n      geoids = this.filters.geography.domain.filter(d => d.name === this.filters.geography.value)[0].value,\n      hour = this.filters.hour.value,\n      filtered = this.geographies\n        .filter(({ value }) => geoids.includes(value));\n\n    this.setActiveLayer(\n      this.layers,\n      this.filters,\n      this.mapboxMap\n    );\n\n    const falcorCache = this.falcor.getCache()\n    let data = filtered.map(d => get(falcorCache, ['tig','npmrds',`${month}|${year}`,`${d.geolevel}|${d.value}`, 'data','value'],[]))\n      .reduce((out,d) => {\n        return {...out, ...d}\n      }, {})\n\n    //console.log('data',data)\n      \n    let domain = Object.values(data).map(d => get(d, `s[${hour}]`, 0))\n    const scale = this.getColorScale(domain.sort((a, b) => a - b));\n    const colors = Object.keys(data).reduce((a, c) => {\n      let val = scale(get(data[c], `s[${hour}]`, 0))\n      a[c] = val ? val : 'hsla(185, 0%, 27%,0.8)'\n      return a;\n    }, {});\n\n    console.log('colors',colors)\n    \n    map.setPaintProperty(`tmc-${year}`, \"line-color\", [\n      \"case\",\n      [\"has\", [\"to-string\", [\"get\", 'tmc']], [\"literal\", colors]],\n      [\"get\", [\"to-string\", [\"get\", 'tmc']], [\"literal\", colors]],\n      \"hsla(185, 0%, 27%,0.0)\",\n    ]);\n    \n    const collection = {\n      type: \"FeatureCollection\",\n      features: filtered\n        .map((f) => ({\n          type: \"Feature\",\n          properties: { geoid: f.value },\n          geometry: get(\n            falcorCache,\n            [\"geo\", f.geolevel.toLowerCase(), f.value, \"geometry\", \"value\"],\n            null\n          ),\n        }))\n        .filter((f) => Boolean(f.geometry)),\n    };\n    map.getSource(\"geo-boundaries-source\").setData(collection);\n\n  }\n\n\n  \n\n}\n\nexport const NPMRDSLayerFactory = (options = {}) => new NPMRDSLayer(options);\n","import {TestTipLayerFactory} from \"./tipLayer\";\nimport {SED2040CountyLevelForecastLayerFactory} from \"./SED2040CountyLevelForecastLayer\";\nimport {SED2040TazLevelForecastLayerFactory} from \"./SED2040TazLevelForecastLayer\";\nimport {SED2050CountyLevelForecastLayerFactory} from \"./SED2050CountyLevelForecastLayer\";\nimport {SED2055CountyLevelForecastLayerFactory} from \"./SED2055CountyLevelForecastLayer\";\nimport {SED2055TazLevelForecastLayerFactory} from \"./SED2055TazLevelForecastLayer\";\nimport {ACSCensusLayerFactory} from \"./ACSCensusLayer\";\nimport {BPMPerformanceMeasuresLayerFactory} from \"./BPMPerformanceMeasuresLayer\";\nimport {HubBoundTravelDataLayerFactory} from \"./HubBoundTravelDataLayer\";\nimport {RTPProjectDataLayerFactory} from \"./RTPProjectDataLayer\";\nimport {NPMRDSLayerFactory} from './npmrds';\n\nexport const layers = {\n    \"tig\": TestTipLayerFactory,\n    \"sed_county_2040\": SED2040CountyLevelForecastLayerFactory,\n    \"sed_county_2050\": SED2050CountyLevelForecastLayerFactory,\n    \"sed_taz_2040\": SED2040TazLevelForecastLayerFactory,\n    \"sed_county_2055\": SED2055CountyLevelForecastLayerFactory,\n    \"sed_taz_2055\": SED2055TazLevelForecastLayerFactory,\n    \"acs_census\": ACSCensusLayerFactory,\n    'bpm_performance': BPMPerformanceMeasuresLayerFactory,\n    'hub_bound_travel_data': HubBoundTravelDataLayerFactory,\n    'rtp_project_data': RTPProjectDataLayerFactory,\n    'npmrds': NPMRDSLayerFactory\n}\n\n","import React from \"react\"\nimport { AvlMap } from \"components/avl-map/src\"\nimport config from \"config.json\"\nimport TigLayout from 'components/tig/TigLayout'\nimport {layers} from \"./layers\";\n\n//import { MacroLayerFactory } from \"./layers/NP/index\"\n\nconst Map = ({ mapOptions,layers}) => {\n\n\n    return (\n        <TigLayout>\n            <div className='w-full flex-1'>\n                <div className='w-full h-full'>\n                    <AvlMap\n                        accessToken={ config.MAPBOX_TOKEN }\n                        mapOptions={ mapOptions }\n                        layers={ [] }\n                        sidebar={{\n                            title: \"Map Test\",\n                            tabs: [\"layers\", \"styles\"],\n                            open: true\n\n                        }}\n                    />\n                </div>\n            </div>\n        </TigLayout>\n    )\n}\n\n\n\nconst MapPage = {\n    path: \"/map\",\n    mainNav: false,\n    name: \"TIG Map\",\n    exact: true,\n    // authLevel: 0,\n    layout: 'Simple',\n    layoutSettings: {\n        fixed: true,\n        navBar: 'top',\n        headerBar: false\n    },\n    component: {\n        type: Map,\n        props: {\n            mapOptions: {\n                zoom: 6.6,\n                styles: [{name: \"Light\",\n                    style: 'mapbox://styles/am3081/ckm86j4bw11tj18o5zf8y9pou' }]\n            },\n            layers: [\n                layers.rtp_project_data(),\n                // layers.hub_bound_travel_data(),\n                // layers.bpm_performance(),\n                // layers.acs_census(),\n                // layers.sed_taz_2055(),\n                // layers.sed_county_2055(),\n                // layers.sed_taz_2040(),\n                // layers.sed_county_2040(),\n                // layers.sed_county_2050(),\n                // layers.tig()\n\n            ]\n        },\n        wrappers: [\n            \"avl-falcor\"\n        ]\n    }\n}\n\n\nconst routes = [\n    MapPage\n];\nexport default routes;\n","import React,{useMemo} from \"react\"\nimport { AvlMap } from \"../../components/avl-map/src\"\nimport config from \"config.json\"\nimport { withAuth } from '@availabs/avl-components'\nimport {layers} from \"./layers\";\nimport {useParams} from 'react-router-dom'\nimport routingConfig from './routing-config/routingConfig.json'\n\nimport TigLayout from 'components/tig/TigLayout'\n\nconst testComp = () => {\n    return (<div>hello</div>)\n}\n\nconst LegendComp = ({activeLayers, ...props}) => {\n    return (<div className='my-4 bg-white w-full'></div>)\n}\n\nconst Map = withAuth(({ mapOptions,layers,views}) => {\n    const {viewId} = useParams()\n\n    const layer = useMemo(() => {\n        let layerVal = routingConfig.reduce((a, c) => {\n            if (c.value === viewId) {\n                a = [layers[0][c.layer]({name:c.name,viewId:viewId})]\n            }\n            return a\n        }, '')\n        console.log('layerVal', layerVal)\n        return layerVal\n    }, [viewId,layers])\n\n\n    return (\n        <TigLayout>\n            <div className='w-full h-full' style={{height: '800px'}}>   \n                <AvlMap\n                    accessToken={ config.MAPBOX_TOKEN }\n                    mapOptions={ mapOptions }\n                    layers={layer}\n                    sidebarTabPosition='side'\n                    sidebar={{\n                        title: \"\",\n                        tabs: [\n                            {\n                                icon: \"fa fa-bars\",\n                                Component: LegendComp\n                            },\n                            \"layers\", \n                            \"styles\",\n                            {\n                                icon: \"fa fa-plus\",\n                                Component: testComp\n                            },\n                            {\n                                icon: \"fa fa-download\",\n                                Component: testComp\n                            },\n                            {\n                                icon: \"fa fa-info-circle\",\n                                Component: testComp\n                            },\n                        ],\n                        open: false\n\n                    }}\n\n                />\n               \n            </div>\n        </TigLayout>\n    )\n})\n\n\nconst MapPage = {\n    path: `/views/:viewId/map`,\n    mainNav: false,\n    name: \"TIG Map\",\n    exact: true,\n    // authLevel: 0,\n    layout: 'Simple',\n    layoutSettings: {\n        fixed: true,\n        navBar: 'top',\n        headerBar: false\n    },\n    component: {\n        type: Map,\n        props: {\n            mapOptions: {\n                zoom: 8.5,\n                center: [-73.911895, 40.88],\n                styles: [\n                    {name: \"Streets\",\n                    style: 'mapbox://styles/am3081/ckt3271or0nnu17oikkvl0eme' },\n                    {name: \"Light\",\n                    style: 'mapbox://styles/am3081/ckm86j4bw11tj18o5zf8y9pou' }]\n            },\n            layers: [\n               layers\n            ]\n        },\n        wrappers: [\n            \"avl-falcor\"\n        ]\n    }\n}\n\n\nconst routes = [\n    MapPage\n];\nexport default routes;\n","import React from \"react\"\nimport { withAuth } from '@availabs/avl-components'\n\n\nimport TigLayout from 'components/tig/TigLayout'\n\nconst Chart = withAuth(({ mapOptions,layers,views}) => {\n    return (\n        <TigLayout>\n            <div className='w-full flex-1 flex'>   \n                <h4>Chart Coming</h4>\n            </div>\n        </TigLayout>\n    )\n})\n\n\nconst ChartPage  = {\n    path: `/views/:viewId/Chart`,\n    mainNav: false,\n    name: \"TIG Chart\",\n    exact: true,\n    // authLevel: 0,\n    layout: 'Simple',\n    component: Chart\n}\n\nexport default ChartPage;\n","import React from \"react\"\nimport { withAuth } from '@availabs/avl-components'\n\n\nimport TigLayout from 'components/tig/TigLayout'\n\nconst Table = withAuth(({ mapOptions,layers,views}) => {\n  \n\n\n    return (\n        <TigLayout>\n            <div className='w-full flex-1 flex'>   \n                <h4>Table Coming</h4>\n               \n            </div>\n        </TigLayout>\n    )\n})\n\n\nconst TablePage  = {\n    path: `/views/:viewId/table`,\n    mainNav: false,\n    name: \"TIG Table\",\n    exact: true,\n    // authLevel: 0,\n    layout: 'Simple',\n    component: Table\n}\n\nexport default TablePage;\n","import React from \"react\"\nimport { withAuth } from '@availabs/avl-components'\n\n\nimport TigLayout from 'components/tig/TigLayout'\n\nconst MetaData = withAuth(({ mapOptions,layers,views}) => {\n  \n\n\n    return (\n        <TigLayout>\n            <div className='w-full flex-1 flex'>   \n                <h4>MetaData Coming</h4>\n               \n            </div>\n        </TigLayout>\n    )\n})\n\n\nconst MetaDataPage  = {\n    path: `/views/:viewId/metadata`,\n    name: \"TIG MetaData\",\n    exact: true,\n    // authLevel: 0,\n    layout: 'Simple',\n    component: MetaData\n}\n\nexport default MetaDataPage;\n","import Catalog from \"pages/catalog\"\nimport Views from \"pages/catalog/tigDataSources/DataSourceView\"\nimport AdminLanding from \"pages/catalog/admin\"\nimport NoMatch from \"pages/404\"\nimport Auth from \"pages/auth\"\nimport TestMap from \"pages/map/MapIndex\"\nimport Map from 'pages/map'\nimport Chart from 'pages/chart'\nimport Table from 'pages/table'\nimport Metadata from 'pages/metadata'\n\nconst Routes = [\n  Catalog,\n  Views,\n  AdminLanding,\n  Auth,\n  ...Map,\n  Table,\n  Chart,\n  Metadata,\n  ...TestMap,\n\n  NoMatch\n]\n\nexport default Routes\n","import React from 'react';\nimport { BrowserRouter, Switch } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport ScrollToTop from 'utils/ScrollToTop'\nimport { createBrowserHistory } from 'history';\nimport Routes from 'Routes';\n\nimport {\n  DefaultLayout,\n  Messages\n} from \"@availabs/avl-components\"\n\n//export const history = createBrowserHistory({basename: process.env.PUBLIC_URL});\n\nclass App extends React.Component {\n  render() {\n    return (\n      <BrowserRouter basename={process.env.REACT_APP_PUBLIC_URL}>\n        <ScrollToTop />\n        <Switch>\n          { Routes.map((route, i) =>\n              <DefaultLayout key={ i } { ...route } { ...this.props }\n                menus={ Routes.filter(r => r.mainNav) }/>\n            )\n          }\n        </Switch>\n        <Messages/>\n      </BrowserRouter>\n    );\n  }\n}\nconst mapStateToProps = state => {\n    return ({\n\n    });\n}\n\nconst mapDispatchToProps = { createBrowserHistory };\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(App);\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\n\nimport { messages } from \"@availabs/avl-components\"\n\nimport { Reducers } from \"@availabs/ams\"\n\nconst reducer = combineReducers({\n  ...Reducers,\n  messages\n});\n\nexport default createStore(reducer, applyMiddleware(thunk))\n","import { Compositions, composeTheme } from \"@availabs/avl-components\";\n\nconst { $compositions } = Compositions;\n\n$compositions.button[1][\"$default\"] = \"text-blueGray-200 disabled:text-blueGray-300\";\n$compositions.button[2][\"$default\"] = \"border-blueGray-200\";\n$compositions.button[3][\"$default\"] = \"hover:bg-blueGray-200 hover:text-blueGray-900\";\n\n$compositions.button[1][\"Dark\"] = \"bg-blueGray-900 text-current disabled:text-gray-300\";\n$compositions.button[2][\"Dark\"] = \"border-blueGray-900\";\n$compositions.button[3][\"Dark\"] = \"hover:bg-blueGray-800 hover:border-blueGray-800\";\n$compositions.button[4][\"Wide\"] = \"px-6 py-0 @textSmall\";\n\n//console.log(\"$compositions\",$compositions)\n\n// import {composeTheme} from \"@availabs/avl-components/dist/Themes/utils\";\n\nconst colors = {\n  transparent: {\n    contentBg: \"\",\n    accentColor: \"blue-600\",\n    accentBg: \"hover:bg-blue-600\",\n    borderColor: \"border-gray-200\",\n    textColor: \"text-gray-800\",\n    highlightColor: \"text-white\",\n  },\n  white: {\n    contentBg: \"bg-white\",\n    accentColor: \"blue-600\",\n    accentBg: \"hover:bg-blue-600\",\n    borderColor: \"border-gray-100\",\n    textColor: \"text-gray-600\",\n    highlightColor: \"text-white\",\n  },\n  dark: {\n    contentBg: \"bg-darkblue-600\",\n    accentColor: \"blue-600\",\n    accentBg: \"hover:bg-blue-600\",\n    borderColor: \"border-gray-700\",\n    textColor: \"text-gray-200\",\n    highlightColor: \"text-white\",\n  },\n  gray: {\n    contentBg: \"bg-gray-800\",\n    accentColor: \"gray-500\",\n    accentBg: \"hover:bg-gray-500\",\n    borderColor: \"border-gray-600\",\n    textColor: \"text-gray-300\",\n    highlightColor: \"text-gray-200\",\n  },\n  bright: {\n    contentBg: \"bg-blue-700\",\n    accentColor: \"blue-400\",\n    accentBg: \"hover:bg-blue-400\",\n    borderColor: \"border-blue-600\",\n    textColor: \"text-white\",\n    highlightColor: \"text-white\",\n  },\n};\n\nconst sizes = {\n  compact: {\n    wrapper: \"w-64\",\n    sideItem: \"flex mx-6 pr-4 py-2 text-sm font-light hover:pl-4\",\n    topItem: \"flex items-center text-sm px-4 border-r h-12\",\n    icon: \"mr-3 text-lg\",\n  },\n  full: {\n    wrapper: \"w-64\",\n    sideItem: \"flex mx-4 pr-4 py-4 text-base font-base border-b hover:pl-4\",\n    topItem: \"flex pr-4 py-2 text-sm font-light\",\n    icon: \"mr-4 text-2xl\",\n  },\n  mini: {\n    wrapper: \"w-20 overflow-x-hidden\",\n    sideItem: \"flex pr-4 py-4 text-base font-base border-b\",\n    topItem: \"flex px-4 items-center text-sm font-light \",\n    icon: \"w-20 mr-4 text-4xl\",\n  },\n  micro: {\n    wrapper: \"w-14 overflow-x-hidden\",\n    sideItem: \"flex pr-4 py-4 text-base font-base border-b\",\n    topItem: \"flex mx-6 pr-4 py-2 text-sm font-light\",\n    icon: \"w-14 mr-4 text-2xl\",\n  },\n};\n\nlet color = \"white\";\nlet size = \"compact\";\n\n\n\nconst TDS_THEME_BASE = {\n    /* ----- \n     Side Nav Theme Components Minimal \n  ------*/\n\n  sidenavWrapper: `${colors[color].contentBg} ${sizes[size].wrapper} border-r border-gray-200 h-full`,\n  menuIconSide: ` text-${colors[color].accentColor} ${sizes[size].icon} group-hover:${colors[color].highlightColor}`,\n  navitemSide: ` \n    group font-sans \n    ${sizes[size].sideItem} ${colors[color].textColor} ${colors[color].borderColor} \n    ${colors[color].accentBg} hover:${colors[color].highlightColor} \n    focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 \n    transition-all cursor-pointer\n  `,\n\n  navitemSideActive: `\n    group flex pl-8 pr-4 py-2 bg-${colors[color].highlightColor} text-base font-medium text-darkblue-500 focus:outline-none hover:text-indigo-800 focus:text-indigo-800 focus:bg-blue-200 focus:border-indigo-700 transition duration-150 ease-in-out`,\n\n  /* ----- \n     Top Nav Theme Components Minimal \n  ------*/\n  topnavWrapper: `w-full h-12 ${colors[color].contentBg}`,\n  topnavContent: `flex w-full h-full`,\n  topnavMenu: `hidden md:flex flex-1 h-full overflow-x-auto overflow-y-hidden scrollbar-sm`,\n  menuIconTop: `text-${colors[color].accentColor} ${sizes[size].icon} group-hover:${colors[color].highlightColor}`,\n\n  navitemTop: `\n    group font-sans w-full\n    ${sizes[size].topItem} ${colors[color].textColor} ${colors[color].borderColor} \n    ${colors[color].accentBg} hover:${colors[color].highlightColor} \n    focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 \n    transition cursor-pointer`,\n  //`px-4 text-sm font-medium tracking-widest uppercase inline-flex items-center  border-transparent  leading-5 text-white hover:bg-white hover:text-darkblue-500 border-gray-200 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out h-full`,\n  topmenuRightNavContainer: \"hidden md:block h-full\",\n  navitemTopActive: `group font-sans w-full\n    ${sizes[size].topItem} ${colors[color].textColor} ${colors[color].borderColor} \n    ${colors[color].accentBg} hover:${colors[color].highlightColor} \n    focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 \n    transition cursor-pointer`,\n\n  /* ------------------------- */\n\n  text: 'text-blueGray-100',\n  textContrast: \"text-white\",\n  border: \"border-blueGray-100\",\n\n\n\n  textInfo: \"text-cyan-400\",\n  bgInfo: \"bg-cyan-400\",\n  borderInfo: \"border-cyan-400\",\n\n  textSuccess: \"text-green-400\",\n  bgSuccess: \"bg-green-400\",\n  borderSuccess: \"border-green-400\",\n\n  textDanger: \"text-red-400\",\n  bgDanger: \"bg-red-400\",\n  borderDanger: \"border-red-400\",\n\n  textWarning: \"text-yellow-400\",\n  bgWarning: \"bg-yellow-400\",\n  borderWarning: \"border-yellow-400\",\n\n  textLight: \"text-blueGray-300\", // <-- for text styled like placeholder but can't be selected with ::placeholder\n  // these 2 should be equal\n  placeholder: 'placeholder-blueGray-300',\n\n  menuIcon: 'mr-3 h-6 w-6',\n  topMenuBorder: 'border-b border-blueGray-800',\n  headerShadow: '',\n\n  bg: 'bg-white',\n\n  menuBg: 'bg-white',\n  menuBgHover: 'hover:bg-blueGray-600',\n  menuBgActive: 'bg-white',\n  menuBgActiveHover: 'hover:bg-blue-500',\n  menuText : \"text-gray-700\",\n  menuTextHover: \"hover:text-cyan-300\",\n  menuTextActive: \"text-cyan-300\",\n  menuTextActiveHover: \"hover:text-cyan-200\",\n\n  \n  sidebarBg: 'bg-white',\n  sidebarBorder: '',\n\n  headerBg: 'bg-blueGray-900',\n  headerBgHover: \"hover:bg-blueGray-700\",\n\n  inputBg: \"bg-white disabled:bg-gray-300 cursor-pointer focus:outline-none\",\n  inputBorder: \"rounded border border-gray-300 hover:border-blueGray-400 focus:border-blueGray-300 disabled:border-transparent\",\n  inputBgDisabled: \"bg-blueGray-300 cursor-not-allowed focus:outline-none\",\n  inputBorderDisabled: \"rounded border border-blueGray-400 hover:border-blueGray-400\",\n  inputBgFocus: \"bg-blue-200 cursor-pointer focus:outline-none\",\n  inputBorderFocus: \"rounded border hover:border-blueGray-300 focus:border-blueGray-300 border-blueGray-300\",\n\n  textBase: \"text-base\",\n  textSmall: \"text-sm\",\n  textLarge: \"text-lg\",\n  paddingBase: \"py-1 px-2\",\n  paddingSmall: \"py-0 px-1\",\n  paddingLarge: \"py-2 px-4\",\n\n  accent1: 'bg-gray-100',\n  accent2: 'bg-gray-200',\n  accent3: 'bg-gray-300',\n  accent4: 'bg-gray-400',\n\n  highlight1: \"bg-cyan-400\",\n  highlight2: \"bg-cyan-300\",\n  highlight3: \"bg-cyan-200\",\n  highlight4: \"bg-cyan-100\",\n\n  contentBg: 'bg-white',\n  contentWidth: 'w-full max-w-7xl',\n  contentPadding: \"py-8\",\n\n  sidebarW: '56',\n  transition: \"transition ease-in-out duration-150\",\n\n  tableInfoBar: \"bg-blueGray-700\",\n  tableRow: 'bg-blueGray-800 hover:bg-blueGray-600 @transition',\n  tableRowStriped: 'bg-blueGray-800 even:bg-blueGray-700 hover:bg-blueGray-600 @transition',\n\n  tableCell: 'px-4 py-1 whitespace-no-wrap',\n\n  tableHeader: \"px-4 py-2 pb-1 border-b-2 border-blueGray-900 bg-blueGray-900 text-left font-medium @text uppercase first:rounded-tl-md last:rounded-tr-md\",\n\n  $compositions\n}\nconst TDS_THEME = composeTheme(TDS_THEME_BASE);\n\nexport default TDS_THEME;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport { API_HOST } from 'config'\nimport { AUTH_HOST, PROJECT_NAME, CLIENT_HOST } from 'config'\n\nimport { Provider } from 'react-redux';\nimport store from 'store';\n\nimport TDS_THEME from \"./theme\"\nimport {\n  FalcorProvider,\n  ThemeContext,\n  falcorGraph,\n  addComponents,\n  addWrappers\n} from \"@availabs/avl-components\"\n\nimport reportWebVitals from './reportWebVitals';\n\n//\n// import DmsComponents from \"components/dms\"\n// import DmsWrappers from \"components/dms/wrappers\"\n\nimport {\n  Components as AmsComponents,\n  Wrappers as AmsWrappers,\n  enableAuth\n} from \"@availabs/ams\"\n\nimport 'styles/tailwind.css';\nimport 'styles/index.css';\nimport 'styles/os-icons.css';\nimport 'styles/font-awesome/css/all.css'\n\n// addComponents(DmsComponents);\n// addWrappers(DmsWrappers);\n\naddComponents(AmsComponents);\naddWrappers(AmsWrappers);\n\nconst AuthEnabledApp = enableAuth(App, { AUTH_HOST, PROJECT_NAME, CLIENT_HOST });\n\n\nReactDOM.render(\n  <React.StrictMode>\n   \t<Provider store={ store }>\n  \t\t<FalcorProvider falcor={ falcorGraph(API_HOST) }>\n        <ThemeContext.Provider value={TDS_THEME}>\n          <AuthEnabledApp />\n        </ThemeContext.Provider>\n      </FalcorProvider>\n  \t</Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\nreportWebVitals();\n","export const PROJECT_NAME = 'NPMRDS';\n\nlet API_HOST = 'https://graph.availabs.org';\nlet AUTH_HOST = 'https://availauth.availabs.org';\nlet CLIENT_HOST = 'https://npmrds.availabs.org';\n\nif (process.env.NODE_ENV === 'development') {\n  API_HOST = 'http://localhost:4444';\n  // AUTH_HOST = 'http://localhost:3457';\n  CLIENT_HOST = 'http://localhost:3000';\n}\nexport { API_HOST, AUTH_HOST, CLIENT_HOST };\n"],"sourceRoot":""}