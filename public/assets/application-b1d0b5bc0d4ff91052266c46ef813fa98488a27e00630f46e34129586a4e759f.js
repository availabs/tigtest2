function GatewayMapApp(t,e,n,i,o){var a=t||"map",r=e||{},s=n||{},l=n.default_basemap,u=i.home_map_view_options,d=n.map_bounds||null,c=d,h=n.basemaps||[],f=n.overlays||[],p=null,m={},g=i||{},v=g.area_id,y=g.year_slider_value;if(o&&o.exported_at){var _=new Date(Date.parse(o.exported_at));864e5<new Date-_&&(o={})}var b=o||{},w=b.overlays||{},x=!0,C=function(e){f.forEach(function(t){p.LMmap.spin(!0),$.ajax({url:e,data:t}).done(function(t){p.LMmap.spin(!1),(t=t||{}).turn_off_by_default=j(t.name,t.turn_off_by_default),p.addBaseOverlay(t)}).fail(function(t){console.log(t),p.LMmap.spin(!1)})})},S=function(t,e,n){p.LMmap.spin(!0);var i=v!=b.area_id&&Y(),o=null;e.value_column_changed||(o=n||w[t]);var a=new GatewayOverlayLayer(p,e,o,i,t);m[t]=a,i&&-1==v&&d&&(p.setMapBounds(d.xmin,d.ymin,d.xmax,d.ymax),p.LMmap.fitBounds(p.LMbounds)),a.render(),a.renderSymbologyPanel(),p.LMmap.spin(!1)},k=function(e,t,n){p.LMmap.spin(!0);var i={url:t};(0===v||v)&&(i.data=i.data||{},i.data.area_id=v),n&&(i.data=i.data||{},i.data.year=y),$.ajax(i).done(function(t){p.LMmap.spin(!1),P(e,t)}).fail(function(t){console.log(t),show_alert("The attempt to load map data has failed. Please try again."),p.LMmap.spin(!1)})},D=function(t){var e=null;for(var n in m){var i=m[n],o=i.getLayers();for(var a in o){var r=o[a];if(r&&r.layerId===t){e=i;break}}}return e},T=function(t){return m[t]},M=function(t){var e=m[t];e&&e.removeFromMap(),delete m[t]},P=function(t,e){var n;if(!(e=e||{}).value_column_changed){var i=T(t);i&&(n=i.exportParameters())}M(t),S(t,e,n)},E=function(t,e){var n=D(t);n&&n.switchLayerSymbology(t,e)},I=function(t){for(var e in y=t,m){var n=m[e];n.include_year_slider&&n.switchDisplayColumn(t.toString())}},A=function(t,e){$.ajax({url:g.feature_geometry_path,data:{view_name:t,key:e}}).done(function(t){p.zoomToWKT(t)}).fail(function(t){console.log(t)})},O=function(t){return t%1!=0?$.formatNumber(t):$.formatNumber(t,{format:"#,##0",locale:"us"})},F=function(t,e){$.ajax({url:g.tmc_roadname_path,data:{tmc_name:t,view_id:e}}).done(function(t){t&&t.name&&$("#tmcRoadName").html("<b>Road Name: </b><span>"+t.name+"</span>")}).fail(function(t){console.log(t)})},N=function(t,e){$.ajax({url:g.link_roadname_path,data:{link_id:t,view_id:e}}).done(function(t){t&&t.name&&$("#linkRoadName").html("<b>Road Name: </b><span>"+t.name+"</span>")}).fail(function(t){console.log(t)})},R=function(t,e,n){$.ajax({url:g.demo_statistics_path,data:{area_name:t,area_type:e,year:n}}).done(function(t){if(t){$("#allStats").hide(),$("#hideAllStats").show();var e="<div  class='row demo-stats' style='padding: 5px 10px;'><h4>All Statistics for Year "+n+"</h4><div style='max-height: 130px; overflow-y: scroll;'><table class='table table-condensed' style='margin: 0px;'>";t.forEach(function(t){e+="<tr><td style='text-align: right;'><b>"+t.name+"</b></td><td style='text-align:right; padding-left: 10px;'>"+O(t.value)+"</td></tr>"}),e+="</table></div></div>",$(".info-window div:first").append(e)}}).fail(function(t){console.log(t)})},B=function(t,e,n){if(n){$("#allYears").hide(),$("#hideAllYears").show();var i="<div  class='row all-year-stats' style='padding: 5px 10px;'><h4>All Year Statistics for "+e.toUpperCase()+" "+t+"</h4><div style='max-height: 130px; overflow-y: scroll;'><table class='table table-condensed' style='margin: 0px;'>";for(var o in n)"area_type"!=o&&"area"!=o&&(i+="<tr><td style='text-align: right;'><b>"+o+"</b></td><td style='text-align:right; padding-left: 10px;'>"+O(n[o])+"</td></tr>");i+="</table></div></div>",$(".info-window div:first").append(i)}},z=function(){var h=L.control(),t=p.LMmap;h.onAdd=function(){return this._div=L.DomUtil.create("div","info info-window"),this.update(),this._div},h.update=function(t){if($(h.getContainer()).show(),"object"==typeof t){var e="";t.title&&(e="<h4>"+t.title+"</h4>");var n="";switch(t.type){case"taz":n="TAZ ID";break;case"tcc":n="TCC";break;default:var i=(t.type||"").split("_"),o=[];i.forEach(function(t){o.push(t.charAt(0).toUpperCase()+t.slice(1).toLowerCase())}),n=o.join(" "),t.showTMCStats?n="TMC ID":t.showLinkStats&&(n="Link ID")}var a="";t.key&&(a="<b>"+n+"</b>: "+t.key);var r="",s="",l="";if(t.showDemoStats)r+="<button id='allStats' style='margin: 3px;' class='btn btn-xs btn-primary pull-left'>All Stats...</button>",r+="<button id='hideAllStats' style='display: none; margin: 3px;' class='btn btn-xs btn-primary pull-left'>Hide All Stats...</button>",r+="<button id='allYears' style='margin: 3px;' class='btn btn-xs btn-primary pull-left'>All Years...</button>",r+="<button id='hideAllYears' style='display: none; margin: 3px;' class='btn btn-xs btn-primary pull-left'>Hide All Years...</button>";else if(t.showTMCStats){s+="<div id='tmcRoadName' class='row' style='padding: 5px 10px;'></div>",(d={N:"Northbound",S:"Southbound",W:"Westbound",E:"Eastbound"}[u=t.attributes.direction]||u)&&(s+="<div id='tmcDirName' class='row' style='padding: 5px 10px;'><b>Direction: </b><span>"+d+"</span></div>"),console.log(t),F(t.key,t.viewId)}else if(t.showLinkStats){var u,d;l+="<div id='linkRoadName' class='row' style='padding: 5px 10px;'></div>",(d={N:"Northbound",S:"Southbound",W:"Westbound",E:"Eastbound"}[u=t.attributes.direction]||u)&&(l+="<div id='linkDirName' class='row' style='padding: 5px 10px;'><b>Direction: </b><span>"+d+"</span></div>"),N(t.key,t.viewId)}var c="<button id='zoomToFeature' style='margin: 3px;' title='zoom to' class='btn btn-xs btn-primary fa fa-search-plus pull-right'/>";this._div.innerHTML='<div style="padding: 6px 8px;">'+e+"<div id='baseInfo' class='row' style='padding: 10px 10px 5px 10px;'><span style='font-size: large;'>"+t.value+(t.showTMCStats||t.showLinkStats?" mph":"")+"</span><p>"+a+"</p></div>"+s+l+"<div class='row' style='padding: 5px 10px;'>"+r+c+"</div></div>"}else this._div.innerHTML="";h.properties=t},h.addTo(t);var e=function(){t.dragging.disable(),t.touchZoom.disable(),t.doubleClickZoom.disable(),t.scrollWheelZoom.disable(),t.tap&&t.tap.disable()},n=function(){t.dragging.enable(),t.touchZoom.enable(),t.doubleClickZoom.enable(),t.scrollWheelZoom.enable(),t.tap&&t.tap.enable()},i=h.getContainer();i.addEventListener("mouseover",function(){e()}),i.addEventListener("touchstart",function(){e()}),i.addEventListener("mouseout",function(){n()}),i.addEventListener("touchend",function(){n()}),L.DomEvent.addListener(i,"click",L.DomEvent.stopPropagation).addListener(i,"click",L.DomEvent.preventDefault),t.displayInfo=h,$(i).on("click","#zoomToFeature",function(){h.properties.layerName&&h.properties.key&&A(h.properties.layerName,h.properties.key)}),$(i).on("click","#allStats",function(){0<$(".demo-stats").length?($(".demo-stats").show(),$(this).hide(),$("#hideAllStats").show()):R(h.properties.key,h.properties.type,h.properties.column)}),$(i).on("click","#hideAllStats",function(){0<$(".demo-stats").length&&$(".demo-stats").hide(),$(this).hide(),$("#allStats").show()}),$(i).on("click","#allYears",function(){0<$(".all-year-stats").length?($(".all-year-stats").show(),$(this).hide(),$("#hideAllYears").show()):B(h.properties.key,h.properties.type,h.properties.attributes)}),$(i).on("click","#hideAllYears",function(){0<$(".all-year-stats").length&&$(".all-year-stats").hide(),$(this).hide(),$("#allYears").show()})},U=function(){var t=b.map||{};l=t.basemap||l,c=t.bounds||c},j=function(t,e){var n=b.map||{};return n.hasOwnProperty("visible_baseoverlays")&&(e=!(0<=n.visible_baseoverlays.indexOf(t))),e},H=function(){var t=b.yearSlider||{};t.hasYearSlider&&(y=t.year)},W=function(){var t=b.overlays||{};for(var e in t)e!=g.id&&$("#layers .checkbox[data-view-id="+e+"] input").attr("checked",!0).change()},V=(function(){U(),H();var t=t||{};t[a]=Object.create(CsLeaflet.Leaflet),(p=t[a]).init(a,r),p.LMmap.removeControl(p.LMmap.attributionControl);var e=c;e&&p.setMapBounds(e.xmin,e.ymin,e.xmax,e.ymax),p.showMap(),p.LMmap.on("updateDisplayInfo",function(t){var e=this.displayInfo;e instanceof L.Control||(z(),e=this.displayInfo),e.update(t.info)}),p.LMmap.on("click",function(t){t.originalEvent.preventDefault()}),p.addBasemaps(h,l),C(g.base_overlay_path),k(g.id,g.data_overlay_path),p.addZoomSliderControl(),p.addFullscreenControl(document.getElementById("mapContainer")),p.addNavbar({home_center:new L.latLng(u.center_x,u.center_y),home_zoom:u.zoom}),p.addSidebar("sidebar"),s.study_area_control_enabled&&(p.addStudyAreaControl(),p.LMmap.on("draw:created",function(t){var e=t.layer;p.studyAreaEditingLayer&&(p.studyAreaEditingLayer.clearLayers(),p.studyAreaEditingLayer.addLayer(e),$("#studyAreaModal").modal("show"))})),p.registerAddOverlayEvent(),p.registerRemoveOverlayEvent()}(),function(){return p}),Y=function(){for(var t in m)return!1;return!0},q=function(t,e){var n=T(t);if(n){n.setViewAreaBoundaryVisibility(e);var i=n.getLayers();for(var o in i){var a=i[o];a&&(a.showAreaBoundary=e,a.setStyle(a.options.style))}}},Z=function(){var t=!1;for(var e in m)if(m[e].include_year_slider){t=!0;break}return t},G=function(t,e){console.log("resetting symbology");var n=T(t);n&&n.resetViewSymbology(e)},K=function(t,e){console.log("updating symbology");var n=T(t);n&&n.updateViewSymbology(e)},J=function(t,e){var n=T(t);n&&n.searchMap(e)},X=function(){var t=null,e=V().studyAreaEditingLayer;if(e){var n=e.getLayers();0<n.length&&(t=(new Wkt.Wkt).fromObject(n[0]).write())}return t},Q=function(){var t=V().studyAreaEditingLayer;t&&t.clearLayers()};return{getMap:V,exportParameters:function(){var t=p.exportParameters(),e={};for(var n in m)e[n]=m[n].exportParameters();var i={hasYearSlider:Z(),year:y};return{area_id:v,map:t,yearSlider:i,overlays:e}},isCaching:function(){return x},disableCache:function(){x=!1},getDataOverlays:function(){return m},addDataOverlay:S,getViewLayer:T,removeViewLayer:M,updateViewLayer:P,checkYearSlider:Z,requestDataOverlayConfigs:k,processDataOverlaysFromSnapshot:W,switchYearColumn:I,switchLayerSymbology:E,updateViewSymbology:K,resetViewSymbology:G,showAreaBoundary:q,searchViewLayer:J,getStudyAreaWkt:X,clearStudyArea:Q}}function GatewayOverlayLayer(p,m,t,e,r){_layerSnapshotParams=t||{};var a=this,i=(m=m||{}).name,b=m.data||[],g=m.referenceLayerConfig||{};g.is_demo=m.is_demo,g.is_tmc=m.is_tmc,g.is_link=m.is_link,g.showAreaBoundary=_layerSnapshotParams.hasOwnProperty("showAreaBoundary")?_layerSnapshotParams.showAreaBoundary:m.showAreaBoundary,a.showAreaBoundary=g.showAreaBoundary;var o=m.referenceColumn||"",n=m.zoomExtentWKT||null,s=m.symbologies||[],l=[];s.forEach(function(t){l.push(GatewayMapUtil.cloneObject(t))});var u=function(){return 0<s.length?s[0]:{}},w=u(),d=function(){return s},c=function(t){l=[],(s=t||[]).forEach(function(t){l.push(GatewayMapUtil.cloneObject(t))}),v()},h=function(t){s.push(t),l.push(GatewayMapUtil.cloneObject(t))},f=function(t){var e=y(t),n=s.indexOf(e);0<=n&&s.slice(n,1);_(t);var i=l.indexOf(e);0<=i&&l.slice(i,1),v()},v=function(){a.symbology=u(),W(a.symbology)},y=function(t){for(var e=null,n=d(),i=0,o=n.length;i<o;i++)if(n[i].subject===t){e=n[i];break}return e},_=function(t){for(var e=null,n=l,i=0,o=n.length;i<o;i++)if(n[i].subject===t){e=n[i];break}return e},x=function(t){for(var e=null,n=d(),i=0,o=n.length;i<o;i++)if(n[i].id===t){e=n[i];break}return e};if(_layerSnapshotParams.symbology){var C=_layerSnapshotParams.symbology[i]||{},S=y(C.subject);S&&(w=S);var k=C.columnIndex;k==w.default_column_index||!k&&0!==k||(w.default_column_index=k),C.symbology_type&&(w.symbology_type=C.symbology_type),C.color_scheme&&(w.color_scheme=C.color_scheme)}_layerSnapshotParams.visibility&&!1===_layerSnapshotParams.visibility[i]&&(g.turn_off_by_default=!0);var D=function(){return w.columns||[]},T=function(){var t=D(),e=w.default_column_index;return e||0!=t.length?e||t[0].index:null},M=function(t,e){if(!t||!e)return null;var n=null,i=E(e);return i&&"object"==typeof i&&(n=t[i.column]),n},P=function(t){function e(t,e){return t-e}var n=t.symbology,i=b.features;if(!(i instanceof Array)||0===i.length)return null;var o=D();switch(n.symbology_type){case"geometric_breaks":case"natural_breaks":for(var a,r,s=0,l=i.length;s<l;s++)for(var u=i[s].properties,d=0,c=o.length;d<c;d++){var h=o[d].column,f=parseFloat(u[h]);isNaN(f)||(("number"!=typeof a||f<a)&&(a=f),("number"!=typeof r||r<f)&&(r=f))}"number"==typeof a&&"number"==typeof r&&(n.minValue=a,n.maxValue=r);break;case"quantile_breaks":var p=[];for(s=0,l=i.length;s<l;s++)for(u=i[s].properties,d=0,c=o.length;d<c;d++){h=o[d].column,f=parseFloat(u[h]);isNaN(f)||p.push(f)}var m={},g=[],v=p.length;for(s=0;s<v;++s){var y=p[s];m[y]||(g.push(y),m[y]=0),++m[y]}g=g.sort(e);var _=[];g.forEach(function(t){_.push([t,m[t]])}),w.values={totalCount:v,minValue:g[0],maxValue:g[g.length-1],valueCounts:_}}},E=function(t){for(var e=null,n=D(),i=0,o=n.length;i<o;i++){var a=n[i];if(a.index===t){e=a;break}}return e},I=function(t){var e=t.displayColumnIndex,n=E(e),i="";n&&(i=n.title),p.updateLayerDisplayProperties(t,"displayTitle",i),p.updateLayerDisplayProperties(t,"displayLabelPropertyName",o),p.renderThematicColor(t,w)},A=function(t){if("Geojson"===g.type)P(t),p.prepareLayerSymbologyValues(t,t.symbology||w),I(t);else{if(p.calculateTileFeatureValueBounds(t),p.prepareLayerSymbologyValues(t,t.symbology||w),w.show_legend){var e=d();p.addColorGradientLegend(t,e,g.turn_off_by_default)}t.setStyle(t.options.style)}},O=function(t){var e=p.getLayerControl();e&&e.removeLayer(t),p.LMmap.removeLayer(t),p.deleteLayerLegendContainer(t.layerId),p.deleteLayerAttribution(t.layerId)},F=function(){var t=this.getLayers();if(t)for(var e in t){var n=t[e];n&&O(n)}},N=function(t){if(t.symbology=w,a.layer=t,p.setAreaColumnNameForLayer(t,o),w.show_legend){var e=d();p.addColorGradientLegend(t,e,g.turn_off_by_default)}if("Geojson"===g.type){var n=T();p.setDisplayColumnIndexForLayer(t,n),g.showLabel&&p.showLabel(t,o,g.labelOptions),p.setValueLocaterForLayer(t,M),A(t),p.registerEventsForLayer(t,g)}},R=function(t){if("PBF_TILE"===g.type){var e=t._selectedFeature;e&&(e.deselect(),e.select())}else console.log("TODO: feature popup change along with column change for layer type "+g.type)},B=function(t){var e=q();for(var n in e){var i=e[n];if(i&&i.symbology){var o=p.getColumnIndex(i.symbology.columns,t);p.setDisplayColumnIndexForLayer(i,o),"Geojson"===g.type?I(i):i.setStyle(i.options.style),R(i)}}},z=function(t,e){if(w=x(e)){var n=q()[t];n.displayColumnIndex=T(w),U(n,w),R(n)}},U=function(t,e){if(t&&e)if(m.addCountFactPoint){var n=!!t._map;O(t),a.layer=p.addCountFactPoints(b,e,m.baseUrl||"",i,n,m.request_data,m.hub_bound_file_path)}else t.symbology=e,p.setDisplayColumnIndexForLayer(t,e.default_column_index),A(t)},j=function(){var t=m.showAreaBoundary;_layerSnapshotParams&&_layerSnapshotParams.hasOwnProperty("showAreaBoundary")&&(t=_layerSnapshotParams.showAreaBoundary);var e="/views/"+r+"/symbology",n={};("POLYGON"===m.geometry_type||m.referenceLayerConfig&&"POLYGON"===m.referenceLayerConfig.geometry_type)&&(n.show_area_boundary=t);var i=null,o=q();for(var a in o){i=o[a].symbology;break}i&&(n.symbology_subject=i.subject,n.color_scheme=i.color_scheme),$.ajax({url:e,method:"POST",data:n})},H=function(t){var e=q();for(var n in e)U(e[n],_(t));j()},W=function(t){var e=y((t=t||{}).subject);if(e){e.symbology_type=t.symbology_type,e.color_scheme=t.color_scheme;var n=q();for(var i in n)U(n[i],e)}},V=function(t){if(t)try{var e=(new Wkt.Wkt).read(t),n=L.latLng(e[0][0].y,e[0][0].x),i=L.latLng(e[0][2].y,e[0][2].x),o=L.latLngBounds(n,i);p.LMmap.fitBounds(o)}catch(a){console.log(a)}},Y=function(){e&&n&&V(n),g.referenceColumn=o,g.symbology=w,g.data=b,i&&(g.name=i),m.addRTPWkt?a.layer=p.addRTPWkt(m.name,b,w,m.baseUrl||"",m.zoom_to_rtp_id||null,_layerSnapshotParams.visibility):m.addCountFactPoint?a.layer=p.addCountFactPoints(b,w,m.baseUrl||"",i,(_layerSnapshotParams.visibility||{})[i],m.request_data,m.hub_bound_file_path):p.addOverlayLayer(g,N)},q=function(){var t=a.layer;t instanceof Array||(t=[t]);var e={};return t.forEach(function(t){t&&(e[t.layerId]=t)}),e},Z=function(t){return a.showAreaBoundary=t},G=function(){var t={},e={},n=q();for(var i in n){var o=n[i];o&&(t[o.name]={subject:o.symbology?o.symbology.subject:"",columnIndex:o.displayColumnIndex,symbology_type:o.symbology?o.symbology.symbology_type:null,color_scheme:o.symbology?o.symbology.color_scheme:null},e[o.name]=!!o._map)}return{symbology:t,visibility:e,include_year_slider:m.include_year_slider||!1,showAreaBoundary:a.showAreaBoundary}},K=function(t){if(t=(t||"").toLowerCase(),m.addRTPWkt){var e=!1;if(""!=t){var n=this.getLayers();for(var i in n)for(var o=(d=n[i]).getLayers(),a=0,r=o.length;a<r;a++){var s=(f=o[a]).properties;if(s)if(0<=((h=s.hasOwnProperty("rtp_id")?s.rtp_id:s.tip_id)||"").toLowerCase().indexOf(t)||0<=(s.description||"").toLowerCase().indexOf(t)){p.zoomToWKT(s.geography),f.openPopup(),e=!0;break}}}e||p.closePopup()}else if("Geojson"===g.type)console.log("geojson layer search to be implemented");else if("PBF_TILE"===g.type){var l=g.tileName,u=g.geomReferenceColumn;n=this.getLayers();for(var i in n){var d;if((d=n[i])._selectedFeature&&d._selectedFeature.deselect(),""!=t){var c=d.layers[l];if(c)for(var h in c.features){var f;if((f=c.features[h]).properties[u].toString().toLowerCase()==t){f.select(),$("#zoomToFeature").click();break}}}}}};return{include_year_slider:m.include_year_slider||!1,render:Y,switchDisplayColumn:B,switchLayerSymbology:z,resetViewSymbology:H,addSymbology:h,deleteSymbology:f,resetSymbologyList:c,renderSymbologyPanel:j,updateViewSymbology:W,setViewAreaBoundaryVisibility:Z,removeFromMap:F,getLayers:q,searchMap:K,exportParameters:G}}function show_alert(t,e){var n="alert-"+(e||"danger");$("#messages").html('<div class="alert '+n+' fade in"><a class="close" data-dismiss="alert">x</a><div id="flash_notice">'+t+"</div></div>")}function hide_alert(){$("#flash_notice").parents(".alert").hide()}function toggleShowMoreLink(){$("#source_views, #contributors, #users, #librarians").on("shown.bs.collapse hidden.bs.collapse",function(){$(this).hasClass("in")?$(this).siblings("a").text("show less"):$(this).siblings("a").text("show more")})}function setupTreeview(e){$.get("/sources/state.json",function(t){if(t){for(console.log("setupTreeview",e,t),toClick=[],i=0;i<t.length;i++)toClick.push($("#"+t[i]));toClick.forEach(function(t){t.click()}),setTimeout(function(){e&&(parentSource=$("#view"+e).closest("ul").siblings(".source-name"),parentSource.hasClass("collapsed")&&parentSource.click(),$("#view"+e).click())},200)}}),$(".btn-link").click(function(){existing=$(this).html(),prevClick=$(".btn-link:has(strong)"),null==existing.match(/<\/?(strong|u)>/g)&&(0<prevClick.length&&(prevClickHtml=prevClick.html(),$(".btn-link:has(strong)").html(prevClickHtml.replace(/<\/?(strong|u)>/g,"")),$(this).html("<strong><u>"+existing+"</u></strong>")),$(this).html("<strong><u>"+existing+"</u></strong>"),$(this).click())}),$("ul.tree").on("shown.bs.collapse hidden.bs.collapse",function(){for(header=$(this).parent().children("h4"),txt=header.text(),$(this).hasClass("in")?0<header.has("em").length?header.html("<strong><em>"+txt.replace(/(\.\.\.)/,"")+"</em></strong>"):header.html("<strong>"+txt.replace(/(\.\.\.)/,"")+"</strong>"):null==txt.match(/(\.\.\.)/)?0<header.has("em").length?header.html("<strong><em>"+txt+"...</em></strong>"):header.html("<strong>"+txt+"...</strong>"):0<header.has("em").length?header.html("<strong><em>"+txt+"</em></strong>"):header.html("<strong>"+txt+"</strong>"),expanded=$("h4:not(.collapsed)"),dataToSend={state:[]},i=0;i<expanded.length;i++)dataToSend.state.push($(expanded)[i].id);currentState=dataToSend,$.ajax({type:"patch",url:"/sources/update_state",data:currentState,dataType:"script"})})}function expandAllSources(){$(".treeview h4.source-name.collapsed").click()}function collapseAllSources(){$(".treeview h4.source-name:not(.collapsed)").click()}function fadeModal(t,e,n){modal=$("#"+t),form=modal.find("form"),modalBody=modal.find(".modal-body"),modalContent=modal.find(".modal-content"),successMsg="<div id='successMsg' class='text-center'><label>"+e+" saved.</label></div>",n?(detachedBody=modalBody.detach(),modalContent.append(successMsg)):(form.toggle(),modalBody.prepend(successMsg)),setTimeout(function(){modal.modal("hide")},2e3),modal.on("hidden.bs.modal",function(t){n?modalContent.empty().append(detachedBody):(form.toggle().trigger("reset"),form.find("select.multiselect").multiselect("refresh"),$("#successMsg").remove()),$(this).off(t)})}function sortAlpha(t,e){return crossBrowserA=t.textContent||t.innerText,crossBrowserB=e.textContent||e.innerText,crossBrowserA.toLowerCase()>crossBrowserB.toLowerCase()?1:-1}function drawGoogleChart(t,e,n){function i(){a=google.visualization.arrayToDataTable(t),(o="pie"==n?new google.visualization.PieChart(document.getElementById(e)):new google.visualization.BarChart(document.getElementById(e))).draw(a,r)}var o,a,r;google.load("visualization","1",{packages:["corechart"]}),google.setOnLoadCallback(i),$(function(){$(window).resize(function(){o.draw(a,r)})})}function createPopover(t){$(t).popover({html:!0,container:"body",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><p></p></div></div></div>',trigger:"manual focus",animation:!1,placement:"auto"}).on("show.bs.popover",function(){$(t).not(this).popover("hide")}).on("mouseenter",function(){var t=this;$(this).popover("show"),$(".popover").on("mouseleave",function(){$(t).popover("hide")})}).on("mouseleave",function(){var t=this;setTimeout(function(){$(".popover:hover").length||$(t).popover("hide")},0)})}function showSymbologySaveAsDialog(t){var e=$("#symbologySaveAsDialog"),n=e.find("form");n.find("input[name=base_symbology_id]").val(t.base_symbology_id),n.find("input[name=color_schemes]").val(JSON.stringify(t.color_schemes)),e.modal("show")}function makeColumnsInteractive(){$(document).on("click",".remove_col",function(){var t=$(this).parent().index(),e=$("#column_data tr td:nth-child("+(t+2)+")"),n=$("tr th:nth-child("+(t+2)+")");e.remove(),n.remove()}).on("click",".add_col",function(){var t=$(this).parent().index(),e=$("#column_data tr td:nth-child("+(t+1)+")"),n=$("tr th:nth-child("+(t+1)+")"),i="<td><input class='string required form-control-mock' name='view[columns][new_col_"+(t+2)+"]' type='text' value=''></td>",o="<th class='text-center'><a class='add_col' style='padding-right:5px;'><div class='fa fa-plus'></div></a><a class='remove_col'><div class='fa fa-minus'></div></a></th>",a="<td class='text-center'><label class='checkbox'><input class='boolean optional' name='view[value_columns][new_col_"+(t+2)+"]' type='checkbox' value='0'></label></td>";0==e.length?(0==(e=$("#column_data tr td:nth-child("+(t+2)+")")).length?((e=$("#column_data tr th:gt(0)")).after(i),4==e.length&&e.last().siblings().first().replaceWith(a)):(e.before(i),4==e.length&&e.last().prev("td").replaceWith(a)),n.first().after(o)):(clone=e.clone(),$.each(e,function(t,e){clonedInput=$(clone[t]).find("input"),clonedName=$(clonedInput).attr("name").replace(/(col_)\d+/g,"new_col_"+Math.floor(1e6*Math.random())),cleanInput=clonedInput.is(":checkbox")?clonedInput.removeAttr("checked").attr("name",clonedName).end():clonedInput.val("").attr("name",clonedName).end(),$(e).after(cleanInput)}),n.after(o))})}if(function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(C,t){function s(t){var e=!!t&&"length"in t&&t.length,n=ft.type(t);return"function"!==n&&!ft.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}function e(t,n,i){if(ft.isFunction(n))return ft.grep(t,function(t,e){return!!n.call(t,e,t)!==i});if(n.nodeType)return ft.grep(t,function(t){return t===n!==i});if("string"==typeof n){if(Ct.test(n))return ft.filter(n,t,i);n=ft.filter(n,t)}return ft.grep(t,function(t){return-1<ft.inArray(t,n)!==i})}function n(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function d(t){var n={};return ft.each(t.match(Pt)||[],function(t,e){n[e]=!0}),n}function o(){it.addEventListener?(it.removeEventListener("DOMContentLoaded",a),C.removeEventListener("load",a)):(it.detachEvent("onreadystatechange",a),C.detachEvent("onload",a))}function a(){(it.addEventListener||"load"===C.event.type||"complete"===it.readyState)&&(o(),ft.ready())}function l(t,e,n){if(n===undefined&&1===t.nodeType){var i="data-"+e.replace(Ot,"-$1").toLowerCase();if("string"==typeof(n=t.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:At.test(n)?ft.parseJSON(n):n)}catch(o){}ft.data(t,e,n)}else n=undefined}return n}function u(t){var e;for(e in t)if(("data"!==e||!ft.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function i(t,e,n,i){if(It(t)){var o,a,r=ft.expando,s=t.nodeType,l=s?ft.cache:t,u=s?t[r]:t[r]&&r;if(u&&l[u]&&(i||l[u].data)||n!==undefined||"string"!=typeof e)return u||(u=s?t[r]=nt.pop()||ft.guid++:r),l[u]||(l[u]=s?{}:{toJSON:ft.noop}),"object"!=typeof e&&"function"!=typeof e||(i?l[u]=ft.extend(l[u],e):l[u].data=ft.extend(l[u].data,e)),a=l[u],i||(a.data||(a.data={}),a=a.data),n!==undefined&&(a[ft.camelCase(e)]=n),"string"==typeof e?null==(o=a[e])&&(o=a[ft.camelCase(e)]):o=a,o}}function r(t,e,n){if(It(t)){var i,o,a=t.nodeType,r=a?ft.cache:t,s=a?t[ft.expando]:ft.expando;if(r[s]){if(e&&(i=n?r[s]:r[s].data)){o=(e=ft.isArray(e)?e.concat(ft.map(e,ft.camelCase)):e in i?[e]:(e=ft.camelCase(e))in i?[e]:e.split(" ")).length;for(;o--;)delete i[e[o]];if(n?!u(i):!ft.isEmptyObject(i))return}(n||(delete r[s].data,u(r[s])))&&(a?ft.cleanData([t],!0):ct.deleteExpando||r!=r.window?delete r[s]:r[s]=undefined)}}}function c(t,e,n,i){var o,a=1,r=20,s=i?function(){return i.cur()}:function(){return ft.css(t,e,"")},l=s(),u=n&&n[3]||(ft.cssNumber[e]?"":"px"),d=(ft.cssNumber[e]||"px"!==u&&+l)&&zt.exec(ft.css(t,e));if(d&&d[3]!==u)for(u=u||d[3],n=n||[],d=+l||1;d/=a=a||".5",ft.style(t,e,d+u),a!==(a=s()/l)&&1!==a&&--r;);return n&&(d=+d||+l||0,o=n[1]?d+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=d,i.end=o)),o}function g(t){var e=qt.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function v(t,e){var n,i,o=0,a="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):undefined;if(!a)for(a=[],n=t.childNodes||t;null!=(i=n[o]);o++)!e||ft.nodeName(i,e)?a.push(i):ft.merge(a,v(i,e));return e===undefined||e&&ft.nodeName(t,e)?ft.merge([t],a):a}function y(t,e){for(var n,i=0;null!=(n=t[i]);i++)ft._data(n,"globalEval",!e||ft._data(e[i],"globalEval"))}function _(t){Ht.test(t.type)&&(t.defaultChecked=t.checked)}function m(t,e,n,i,o){for(var a,r,s,l,u,d,c,h=t.length,f=g(e),p=[],m=0;m<h;m++)if((r=t[m])||0===r)if("object"===ft.type(r))ft.merge(p,r.nodeType?[r]:r);else if(Gt.test(r)){for(l=l||f.appendChild(e.createElement("div")),u=(Wt.exec(r)||["",""])[1].toLowerCase(),c=Zt[u]||Zt._default,l.innerHTML=c[1]+ft.htmlPrefilter(r)+c[2],a=c[0];a--;)l=l.lastChild;if(!ct.leadingWhitespace&&Yt.test(r)&&p.push(e.createTextNode(Yt.exec(r)[0])),!ct.tbody)for(a=(r="table"!==u||Kt.test(r)?"<table>"!==c[1]||Kt.test(r)?0:l:l.firstChild)&&r.childNodes.length;a--;)ft.nodeName(d=r.childNodes[a],"tbody")&&!d.childNodes.length&&r.removeChild(d);for(ft.merge(p,l.childNodes),l.textContent="";l.firstChild;)l.removeChild(l.firstChild);l=f.lastChild}else p.push(e.createTextNode(r));for(l&&f.removeChild(l),ct.appendChecked||ft.grep(v(p,"input"),_),m=0;r=p[m++];)if(i&&-1<ft.inArray(r,i))o&&o.push(r);else if(s=ft.contains(r.ownerDocument,r),l=v(f.appendChild(r),"script"),s&&y(l),n)for(a=0;r=l[a++];)Vt.test(r.type||"")&&n.push(r);return l=null,f}function h(){return!0}function f(){return!1}function p(){try{return it.activeElement}catch(t){}}function b(t,e,n,i,o,a){var r,s;if("object"==typeof e){for(s in"string"!=typeof n&&(i=i||n,n=undefined),e)b(t,s,n,i,e[s],a);return t}if(null==i&&null==o?(o=n,i=n=undefined):null==o&&("string"==typeof n?(o=i,i=undefined):(o=i,i=n,n=undefined)),!1===o)o=f;else if(!o)return t;return 1===a&&(r=o,(o=function(t){return ft().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=ft.guid++)),t.each(function(){ft.event.add(this,e,o,i,n)})}function w(t,e){return ft.nodeName(t,"table")&&ft.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function x(t){return t.type=(null!==ft.find.attr(t,"type"))+"/"+t.type,t}function L(t){var e=se.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function S(t,e){if(1===e.nodeType&&ft.hasData(t)){var n,i,o,a=ft._data(t),r=ft._data(e,a),s=a.events;if(s)for(n in delete r.handle,r.events={},s)for(i=0,o=s[n].length;i<o;i++)ft.event.add(e,n,s[n][i]);r.data&&(r.data=ft.extend({},r.data))}}function k(t,e){var n,i,o;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!ct.noCloneEvent&&e[ft.expando]){for(i in(o=ft._data(e)).events)ft.removeEvent(e,i,o.handle);e.removeAttribute(ft.expando)}"script"===n&&e.text!==t.text?(x(e).text=t.text,L(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),ct.html5Clone&&t.innerHTML&&!ft.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Ht.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}}function D(n,i,o,a){i=at.apply([],i);var t,e,r,s,l,u,d=0,c=n.length,h=c-1,f=i[0],p=ft.isFunction(f);if(p||1<c&&"string"==typeof f&&!ct.checkClone&&re.test(f))return n.each(function(t){var e=n.eq(t);p&&(i[0]=f.call(this,t,e.html())),D(e,i,o,a)});if(c&&(t=(u=m(i,n[0].ownerDocument,!1,n,a)).firstChild,1===u.childNodes.length&&(u=t),t||a)){for(r=(s=ft.map(v(u,"script"),x)).length;d<c;d++)e=u,d!==h&&(e=ft.clone(e,!0,!0),r&&ft.merge(s,v(e,"script"))),o.call(n[d],e,d);if(r)for(l=s[s.length-1].ownerDocument,ft.map(s,L),d=0;d<r;d++)e=s[d],Vt.test(e.type||"")&&!ft._data(e,"globalEval")&&ft.contains(l,e)&&(e.src?ft._evalUrl&&ft._evalUrl(e.src):ft.globalEval((e.text||e.textContent||e.innerHTML||"").replace(le,"")));u=t=null}return n}function T(t,e,n){for(var i,o=e?ft.filter(e,t):t,a=0;null!=(i=o[a]);a++)n||1!==i.nodeType||ft.cleanData(v(i)),i.parentNode&&(n&&ft.contains(i.ownerDocument,i)&&y(v(i,"script")),i.parentNode.removeChild(i));return t}function M(t,e){var n=ft(e.createElement(t)).appendTo(e.body),i=ft.css(n[0],"display");return n.detach(),i}function P(t){var e=it,n=ce[t];return n||("none"!==(n=M(t,e))&&n||((e=((de=(de||ft("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentWindow||de[0].contentDocument).document).write(),e.close(),n=M(t,e),de.detach()),ce[t]=n),n}function E(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}function I(t){if(t in ke)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=Se.length;n--;)if((t=Se[n]+e)in ke)return t}function A(t,e){for(var n,i,o,a=[],r=0,s=t.length;r<s;r++)(i=t[r]).style&&(a[r]=ft._data(i,"olddisplay"),n=i.style.display,e?(a[r]||"none"!==n||(i.style.display=""),""===i.style.display&&jt(i)&&(a[r]=ft._data(i,"olddisplay",P(i.nodeName)))):(o=jt(i),(n&&"none"!==n||!o)&&ft._data(i,"olddisplay",o?n:ft.css(i,"display"))));for(r=0;r<s;r++)(i=t[r]).style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?a[r]||"":"none"));return t}function O(t,e,n){var i=xe.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function F(t,e,n,i,o){for(var a=n===(i?"border":"content")?4:"width"===e?1:0,r=0;a<4;a+=2)"margin"===n&&(r+=ft.css(t,n+Ut[a],!0,o)),i?("content"===n&&(r-=ft.css(t,"padding"+Ut[a],!0,o)),"margin"!==n&&(r-=ft.css(t,"border"+Ut[a]+"Width",!0,o))):(r+=ft.css(t,"padding"+Ut[a],!0,o),"padding"!==n&&(r+=ft.css(t,"border"+Ut[a]+"Width",!0,o)));return r}function N(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,a=ge(t),r=ct.boxSizing&&"border-box"===ft.css(t,"boxSizing",!1,a);if(o<=0||null==o){if(((o=ve(t,e,a))<0||null==o)&&(o=t.style[e]),fe.test(o))return o;i=r&&(ct.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+F(t,e,n||(r?"border":"content"),i,a)+"px"}function R(t,e,n,i,o){return new R.prototype.init(t,e,n,i,o)}function B(){return C.setTimeout(function(){De=undefined}),De=ft.now()}function z(t,e){var n,i={height:t},o=0;for(e=e?1:0;o<4;o+=2-e)i["margin"+(n=Ut[o])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function U(t,e,n){for(var i,o=(H.tweeners[e]||[]).concat(H.tweeners["*"]),a=0,r=o.length;a<r;a++)if(i=o[a].call(n,e,t))return i}function j(e,t,n){var i,o,a,r,s,l,u,d=this,c={},h=e.style,f=e.nodeType&&jt(e),p=ft._data(e,"fxshow");for(i in n.queue||(null==(s=ft._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){
s.unqueued||l()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,ft.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===("none"===(u=ft.css(e,"display"))?ft._data(e,"olddisplay")||P(e.nodeName):u)&&"none"===ft.css(e,"float")&&(ct.inlineBlockNeedsLayout&&"inline"!==P(e.nodeName)?h.zoom=1:h.display="inline-block")),n.overflow&&(h.overflow="hidden",ct.shrinkWrapBlocks()||d.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),t)if(o=t[i],Oe.exec(o)){if(delete t[i],a=a||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!p||p[i]===undefined)continue;f=!0}c[i]=p&&p[i]||ft.style(e,i)}else u=undefined;if(ft.isEmptyObject(c))"inline"===("none"===u?P(e.nodeName):u)&&(h.display=u);else for(i in p?"hidden"in p&&(f=p.hidden):p=ft._data(e,"fxshow",{}),a&&(p.hidden=!f),f?ft(e).show():d.done(function(){ft(e).hide()}),d.done(function(){var t;for(t in ft._removeData(e,"fxshow"),c)ft.style(e,t,c[t])}),c)r=U(f?p[i]:0,i,d),i in p||(p[i]=r.start,f&&(r.end=r.start,r.start="width"===i||"height"===i?1:0))}function $(t,e){var n,i,o,a,r;for(n in t)if(o=e[i=ft.camelCase(n)],a=t[n],ft.isArray(a)&&(o=a[1],a=t[n]=a[0]),n!==i&&(t[i]=a,delete t[n]),(r=ft.cssHooks[i])&&"expand"in r)for(n in a=r.expand(a),delete t[i],a)n in t||(t[n]=a[n],e[n]=o);else e[i]=o}function H(a,t,e){var n,r,i=0,o=H.prefilters.length,s=ft.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=De||B(),e=Math.max(0,u.startTime+u.duration-t),n=1-(e/u.duration||0),i=0,o=u.tweens.length;i<o;i++)u.tweens[i].run(n);return s.notifyWith(a,[u,n,e]),n<1&&o?e:(s.resolveWith(a,[u]),!1)},u=s.promise({elem:a,props:ft.extend({},t),opts:ft.extend(!0,{specialEasing:{},easing:ft.easing._default},e),originalProperties:t,originalOptions:e,startTime:De||B(),duration:e.duration,tweens:[],createTween:function(t,e){var n=ft.Tween(a,u.opts,t,e,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var e=0,n=t?u.tweens.length:0;if(r)return this;for(r=!0;e<n;e++)u.tweens[e].run(1);return t?(s.notifyWith(a,[u,1,0]),s.resolveWith(a,[u,t])):s.rejectWith(a,[u,t]),this}}),d=u.props;for($(d,u.opts.specialEasing);i<o;i++)if(n=H.prefilters[i].call(u,a,d,u.opts))return ft.isFunction(n.stop)&&(ft._queueHooks(u.elem,u.opts.queue).stop=ft.proxy(n.stop,n)),n;return ft.map(d,U,u),ft.isFunction(u.opts.start)&&u.opts.start.call(a,u),ft.fx.timer(ft.extend(l,{elem:a,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function W(t){return ft.attr(t,"class")||""}function V(a){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,o=t.toLowerCase().match(Pt)||[];if(ft.isFunction(e))for(;n=o[i++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(a[n]=a[n]||[]).unshift(e)):(a[n]=a[n]||[]).push(e)}}function Y(e,o,a,r){function s(t){var i;return l[t]=!0,ft.each(e[t]||[],function(t,e){var n=e(o,a,r);return"string"!=typeof n||u||l[n]?u?!(i=n):void 0:(o.dataTypes.unshift(n),s(n),!1)}),i}var l={},u=e===rn;return s(o.dataTypes[0])||!l["*"]&&s("*")}function q(t,e){var n,i,o=ft.ajaxSettings.flatOptions||{};for(i in e)e[i]!==undefined&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&ft.extend(!0,t,n),t}function Z(t,e,n){for(var i,o,a,r,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),o===undefined&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(r in s)if(s[r]&&s[r].test(o)){l.unshift(r);break}if(l[0]in n)a=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){a=r;break}i||(i=r)}a=a||i}if(a)return a!==l[0]&&l.unshift(a),n[a]}function G(t,e,n,i){var o,a,r,s,l,u={},d=t.dataTypes.slice();if(d[1])for(r in t.converters)u[r.toLowerCase()]=t.converters[r];for(a=d.shift();a;)if(t.responseFields[a]&&(n[t.responseFields[a]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=a,a=d.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(r=u[l+" "+a]||u["* "+a]))for(o in u)if((s=o.split(" "))[1]===a&&(r=u[l+" "+s[0]]||u["* "+s[0]])){!0===r?r=u[o]:!0!==u[o]&&(a=s[0],d.unshift(s[1]));break}if(!0!==r)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(c){return{state:"parsererror",error:r?c:"No conversion from "+l+" to "+a}}}return{state:"success",data:e}}function K(t){return t.style&&t.style.display||ft.css(t,"display")}function J(t){if(!ft.contains(t.ownerDocument||it,t))return!0;for(;t&&1===t.nodeType;){if("none"===K(t)||"hidden"===t.type)return!0;t=t.parentNode}return!1}function X(n,t,i,o){var e;if(ft.isArray(t))ft.each(t,function(t,e){i||cn.test(n)?o(n,e):X(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,i,o)});else if(i||"object"!==ft.type(t))o(n,t);else for(e in t)X(n+"["+e+"]",t[e],i,o)}function Q(){try{return new C.XMLHttpRequest}catch(t){}}function tt(){try{return new C.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function et(t){return ft.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}var nt=[],it=C.document,ot=nt.slice,at=nt.concat,rt=nt.push,st=nt.indexOf,lt={},ut=lt.toString,dt=lt.hasOwnProperty,ct={},ht="1.12.4",ft=function(t,e){return new ft.fn.init(t,e)},pt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,mt=/^-ms-/,gt=/-([\da-z])/gi,vt=function(t,e){return e.toUpperCase()};ft.fn=ft.prototype={jquery:ht,constructor:ft,selector:"",length:0,toArray:function(){return ot.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:ot.call(this)},pushStack:function(t){var e=ft.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return ft.each(this,t)},map:function(n){return this.pushStack(ft.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(ot.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:rt,sort:nt.sort,splice:nt.splice},ft.extend=ft.fn.extend=function(t){var e,n,i,o,a,r,s=t||{},l=1,u=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[l]||{},l++),"object"==typeof s||ft.isFunction(s)||(s={}),l===u&&(s=this,l--);l<u;l++)if(null!=(a=arguments[l]))for(o in a)e=s[o],s!==(i=a[o])&&(d&&i&&(ft.isPlainObject(i)||(n=ft.isArray(i)))?(n?(n=!1,r=e&&ft.isArray(e)?e:[]):r=e&&ft.isPlainObject(e)?e:{},s[o]=ft.extend(d,r,i)):i!==undefined&&(s[o]=i));return s},ft.extend({expando:"jQuery"+(ht+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===ft.type(t)},isArray:Array.isArray||function(t){return"array"===ft.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){var e=t&&t.toString();return!ft.isArray(t)&&0<=e-parseFloat(e)+1},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==ft.type(t)||t.nodeType||ft.isWindow(t))return!1;try{if(t.constructor&&!dt.call(t,"constructor")&&!dt.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(!ct.ownFirst)for(e in t)return dt.call(t,e);for(e in t);return e===undefined||dt.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?lt[ut.call(t)]||"object":typeof t},globalEval:function(t){t&&ft.trim(t)&&(C.execScript||function(t){C.eval.call(C,t)})(t)},camelCase:function(t){return t.replace(mt,"ms-").replace(gt,vt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,i=0;if(s(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(pt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(s(Object(t))?ft.merge(n,"string"==typeof t?[t]:t):rt.call(n,t)),n},inArray:function(t,e,n){var i;if(e){if(st)return st.call(e,t,n);for(i=e.length,n=n?n<0?Math.max(0,i+n):n:0;n<i;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;i<n;)t[o++]=e[i++];if(n!=n)for(;e[i]!==undefined;)t[o++]=e[i++];return t.length=o,t},grep:function(t,e,n){for(var i=[],o=0,a=t.length,r=!n;o<a;o++)!e(t[o],o)!==r&&i.push(t[o]);return i},map:function(t,e,n){var i,o,a=0,r=[];if(s(t))for(i=t.length;a<i;a++)null!=(o=e(t[a],a,n))&&r.push(o);else for(a in t)null!=(o=e(t[a],a,n))&&r.push(o);return at.apply([],r)},guid:1,proxy:function(t,e){var n,i,o;return"string"==typeof e&&(o=t[e],e=t,t=o),ft.isFunction(t)?(n=ot.call(arguments,2),(i=function(){return t.apply(e||this,n.concat(ot.call(arguments)))}).guid=t.guid=t.guid||ft.guid++,i):undefined},now:function(){return+new Date},support:ct}),"function"==typeof Symbol&&(ft.fn[Symbol.iterator]=nt[Symbol.iterator]),ft.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){lt["[object "+e+"]"]=e.toLowerCase()});var yt=function(n){function b(t,e,n,i){var o,a,r,s,l,u,d,c,h=e&&e.ownerDocument,f=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==f&&9!==f&&11!==f)return n;if(!i&&((e?e.ownerDocument||e:U)!==I&&E(e),e=e||I,O)){if(11!==f&&(u=vt.exec(t)))if(o=u[1]){if(9===f){if(!(r=e.getElementById(o)))return n;if(r.id===o)return n.push(r),n}else if(h&&(r=h.getElementById(o))&&B(e,r)&&r.id===o)return n.push(r),n}else{if(u[2])return X.apply(n,e.getElementsByTagName(t)),n;if((o=u[3])&&v.getElementsByClassName&&e.getElementsByClassName)return X.apply(n,e.getElementsByClassName(o)),n}if(v.qsa&&!V[t+" "]&&(!F||!F.test(t))){if(1!==f)h=e,c=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(_t,"\\$&"):e.setAttribute("id",s=z),a=(d=S(t)).length,l=ht.test(s)?"#"+s:"[id='"+s+"']";a--;)d[a]=l+" "+g(d[a]);c=d.join(","),h=yt.test(t)&&m(e.parentNode)||e}if(c)try{return X.apply(n,h.querySelectorAll(c)),n}catch(p){}finally{s===z&&e.removeAttribute("id")}}}return D(t.replace(st,"$1"),e,n,i)}function t(){function n(t,e){return i.push(t+" ")>x.cacheLength&&delete n[i.shift()],n[t+" "]=e}var i=[];return n}function l(t){return t[z]=!0,t}function o(t){var e=I.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function e(t,e){for(var n=t.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=e}function u(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||q)-(~t.sourceIndex||q);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function i(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function a(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function r(r){return l(function(a){return a=+a,l(function(t,e){for(var n,i=r([],t.length,a),o=i.length;o--;)t[n=i[o]]&&(t[n]=!(e[n]=t[n]))})})}function m(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function s(){}function g(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function c(s,t,e){var l=t.dir,u=e&&"parentNode"===l,d=$++;return t.first?function(t,e,n){for(;t=t[l];)if(1===t.nodeType||u)return s(t,e,n)}:function(t,e,n){var i,o,a,r=[j,d];if(n){for(;t=t[l];)if((1===t.nodeType||u)&&s(t,e,n))return!0}else for(;t=t[l];)if(1===t.nodeType||u){if((i=(o=(a=t[z]||(t[z]={}))[t.uniqueID]||(a[t.uniqueID]={}))[l])&&i[0]===j&&i[1]===d)return r[2]=i[2];if((o[l]=r)[2]=s(t,e,n))return!0}}}function h(o){return 1<o.length?function(t,e,n){for(var i=o.length;i--;)if(!o[i](t,e,n))return!1;return!0}:o[0]}function y(t,e,n){for(var i=0,o=e.length;i<o;i++)b(t,e[i],n);return n}function w(t,e,n,i,o){for(var a,r=[],s=0,l=t.length,u=null!=e;s<l;s++)(a=t[s])&&(n&&!n(a,i,o)||(r.push(a),u&&e.push(s)));return r}function _(f,p,m,g,v,t){return g&&!g[z]&&(g=_(g)),v&&!v[z]&&(v=_(v,t)),l(function(t,e,n,i){var o,a,r,s=[],l=[],u=e.length,d=t||y(p||"*",n.nodeType?[n]:n,[]),c=!f||!t&&p?d:w(d,s,f,n,i),h=m?v||(t?f:u||g)?[]:e:c;if(m&&m(c,h,n,i),g)for(o=w(h,l),g(o,[],n,i),a=o.length;a--;)(r=o[a])&&(h[l[a]]=!(c[l[a]]=r));if(t){if(v||f){if(v){for(o=[],a=h.length;a--;)(r=h[a])&&o.push(c[a]=r);v(null,h=[],o,i)}for(a=h.length;a--;)(r=h[a])&&-1<(o=v?tt(t,r):s[a])&&(t[o]=!(e[o]=r))}}else h=w(h===e?h.splice(u,h.length):h),v?v(null,e,h,i):X.apply(e,h)})}function f(t){for(var o,e,n,i=t.length,a=x.relative[t[0].type],r=a||x.relative[" "],s=a?1:0,l=c(function(t){return t===o},r,!0),u=c(function(t){return-1<tt(o,t)},r,!0),d=[function(t,e,n){var i=!a&&(n||e!==T)||((o=e).nodeType?l(t,e,n):u(t,e,n));return o=null,i}];s<i;s++)if(e=x.relative[t[s].type])d=[c(h(d),e)];else{if((e=x.filter[t[s].type].apply(null,t[s].matches))[z]){for(n=++s;n<i&&!x.relative[t[n].type];n++);return _(1<s&&h(d),1<s&&g(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(st,"$1"),e,s<n&&f(t.slice(s,n)),n<i&&f(t=t.slice(n)),n<i&&g(t))}d.push(e)}return h(d)}function d(g,v){var y=0<v.length,_=0<g.length,t=function(t,e,n,i,o){var a,r,s,l=0,u="0",d=t&&[],c=[],h=T,f=t||_&&x.find.TAG("*",o),p=j+=null==h?1:Math.random()||.1,m=f.length;for(o&&(T=e===I||e||o);u!==m&&null!=(a=f[u]);u++){if(_&&a){for(r=0,e||a.ownerDocument===I||(E(a),n=!O);s=g[r++];)if(s(a,e||I,n)){i.push(a);break}o&&(j=p)}y&&((a=!s&&a)&&l--,t&&d.push(a))}if(l+=u,y&&u!==l){for(r=0;s=v[r++];)s(d,c,e,n);if(t){if(0<l)for(;u--;)d[u]||c[u]||(c[u]=K.call(i));c=w(c)}X.apply(i,c),o&&!t&&0<c.length&&1<l+v.length&&b.uniqueSort(i)}return o&&(j=p,T=h),d};return y?l(t):t}var p,v,x,C,L,S,k,D,T,M,P,E,I,A,O,F,N,R,B,z="sizzle"+1*new Date,U=n.document,j=0,$=0,H=t(),W=t(),V=t(),Y=function(t,e){return t===e&&(P=!0),0},q=1<<31,Z={}.hasOwnProperty,G=[],K=G.pop,J=G.push,X=G.push,Q=G.slice,tt=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",at=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",rt=new RegExp(nt+"+","g"),st=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),dt=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ct=new RegExp(at),ht=new RegExp("^"+it+"$"),ft={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,_t=/'|\\/g,bt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),wt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xt=function(){E()};try{X.apply(G=Q.call(U.childNodes),U.childNodes),G[U.childNodes.length].nodeType}catch(Ct){X={apply:G.length?function(t,e){J.apply(t,Q.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}for(p in v=b.support={},L=b.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},E=b.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:U;return i!==I&&9===i.nodeType&&i.documentElement&&(A=(I=i).documentElement,O=!L(I),(n=I.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xt,!1):n.attachEvent&&n.attachEvent("onunload",xt)),v.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),v.getElementsByTagName=o(function(t){return t.appendChild(I.createComment("")),!t.getElementsByTagName("*").length}),v.getElementsByClassName=gt.test(I.getElementsByClassName),v.getById=o(function(t){return A.appendChild(t).id=z,!I.getElementsByName||!I.getElementsByName(z).length}),v.getById?(x.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&O){var n=e.getElementById(t);return n?[n]:[]}},x.filter.ID=function(t){var e=t.replace(bt,wt);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var n=t.replace(bt,wt);return function(t){var e="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}}),x.find.TAG=v.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):v.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,a=e.getElementsByTagName(t);if("*"!==t)return a;for(;n=a[o++];)1===n.nodeType&&i.push(n);return i},x.find.CLASS=v.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&O)return e.getElementsByClassName(t)},N=[],F=[],(v.qsa=gt.test(I.querySelectorAll))&&(o(function(t){A.appendChild(t).innerHTML="<a id='"+z+"'></a><select id='"+z+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&F.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||F.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+z+"-]").length||F.push("~="),t.querySelectorAll(":checked").length||F.push(":checked"),t.querySelectorAll("a#"+z+"+*").length||F.push(".#.+[+~]")}),o(function(t){var e=I.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&F.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||F.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),F.push(",.*:")})),(v.matchesSelector=gt.test(R=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&o(function(t){v.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),N.push("!=",at)}),F=F.length&&new RegExp(F.join("|")),N=N.length&&new RegExp(N.join("|")),e=gt.test(A.compareDocumentPosition),B=e||gt.test(A.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},Y=e?function(t,e){if(t===e)return P=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!v.sortDetached&&e.compareDocumentPosition(t)===n?t===I||t.ownerDocument===U&&B(U,t)?-1:e===I||e.ownerDocument===U&&B(U,e)?1:M?tt(M,t)-tt(M,e):0:4&n?-1:1)}:function(t,e){if(t===e)return P=!0,0;var n,i=0,o=t.parentNode,a=e.parentNode,r=[t],s=[e];if(!o||!a)return t===I?-1:e===I?1:o?-1:a?1:M?tt(M,t)-tt(M,e):0;if(o===a)return u(t,e);for(n=t;n=n.parentNode;)r.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;r[i]===s[i];)i++;return i?u(r[i],s[i]):r[i]===U?-1:s[i]===U?1:0}),I},b.matches=function(t,e){return b(t,null,null,e)},b.matchesSelector=function(t,e){if((t.ownerDocument||t)!==I&&E(t),e=e.replace(dt,"='$1']"),v.matchesSelector&&O&&!V[e+" "]&&(!N||!N.test(e))&&(!F||!F.test(e)))try{var n=R.call(t,e);if(n||v.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(Ct){}return 0<b(e,I,null,[t]).length},b.contains=function(t,e){return(t.ownerDocument||t)!==I&&E(t),B(t,e)},b.attr=function(t,e){(t.ownerDocument||t)!==I&&E(t);var n=x.attrHandle[e.toLowerCase()],i=n&&Z.call(x.attrHandle,e.toLowerCase())?n(t,e,!O):undefined;return i!==undefined?i:v.attributes||!O?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},b.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},b.uniqueSort=function(t){var e,n=[],i=0,o=0;if(P=!v.detectDuplicates,M=!v.sortStable&&t.slice(0),t.sort(Y),P){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return M=null,t},C=b.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=C(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=C(e);return n},(x=b.selectors={cacheLength:50,createPseudo:l,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(bt,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||b.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&b.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ct.test(n)&&(e=S(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(bt,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=H[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&H(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,i,o){return function(t){var e=b.attr(t,n);return null==e?"!="===i:!i||(e+="","="===i?e===o:"!="===i?e!==o:"^="===i?o&&0===e.indexOf(o):"*="===i?o&&-1<e.indexOf(o):"$="===i?o&&e.slice(-o.length)===o:"~="===i?-1<(" "+e.replace(rt," ")+" ").indexOf(o):"|="===i&&(e===o||e.slice(0,o.length+1)===o+"-"))}},CHILD:function(p,t,e,m,g){var v="nth"!==p.slice(0,3),y="last"!==p.slice(-4),_="of-type"===t;return 1===m&&0===g?function(t){return!!t.parentNode}:function(t,e,n){var i,o,a,r,s,l,u=v!==y?"nextSibling":"previousSibling",d=t.parentNode,c=_&&t.nodeName.toLowerCase(),h=!n&&!_,f=!1;if(d){if(v){for(;u;){for(r=t;r=r[u];)if(_?r.nodeName.toLowerCase()===c:1===r.nodeType)return!1;l=u="only"===p&&!l&&"nextSibling"}return!0}if(l=[y?d.firstChild:d.lastChild],y&&h){for(f=(s=(i=(o=(a=(r=d)[z]||(r[z]={}))[r.uniqueID]||(a[r.uniqueID]={}))[p]||[])[0]===j&&i[1])&&i[2],r=s&&d.childNodes[s];r=++s&&r&&r[u]||(f=s=0)||l.pop();)if(1===r.nodeType&&++f&&r===t){o[p]=[j,s,f];break}}else if(h&&(f=s=(i=(o=(a=(r=t)[z]||(r[z]={}))[r.uniqueID]||(a[r.uniqueID]={}))[p]||[])[0]===j&&i[1]),!1===f)for(;(r=++s&&r&&r[u]||(f=s=0)||l.pop())&&((_?r.nodeName.toLowerCase()!==c:1!==r.nodeType)||!++f||(h&&((o=(a=r[z]||(r[z]={}))[r.uniqueID]||(a[r.uniqueID]={}))[p]=[j,f]),r!==t)););return(f-=g)===m||f%m==0&&0<=f/m}}},PSEUDO:function(t,a){var e,r=x.pseudos[t]||x.setFilters[t.toLowerCase()]||b.error("unsupported pseudo: "+t);return r[z]?r(a):1<r.length?(e=[t,t,"",a],x.setFilters.hasOwnProperty(t.toLowerCase())?l(function(t,e){for(var n,i=r(t,a),o=i.length;o--;)t[n=tt(t,i[o])]=!(e[n]=i[o])}):function(t){return r(t,0,e)}):r}},pseudos:{not:l(function(t){var i=[],o=[],s=k(t.replace(st,"$1"));return s[z]?l(function(t,e,n,i){for(var o,a=s(t,null,i,[]),r=t.length;r--;)(o=a[r])&&(t[r]=!(e[r]=o))}):function(t,e,n){return i[0]=t,s(i,null,n,o),i[0]=null,!o.pop()}}),has:l(function(e){return function(t){return 0<b(e,t).length}}),contains:l(function(e){return e=e.replace(bt,wt),function(t){return-1<(t.textContent||t.innerText||C(t)).indexOf(e)}}),lang:l(function(n){return ht.test(n||"")||b.error("unsupported lang: "+n),n=n.replace(bt,wt).toLowerCase(),function(t){var e;do{if(e=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===A},focus:function(t){return t===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return mt.test(t.nodeName)},input:function(t){return pt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:r(function(){return[0]}),last:r(function(t,e){return[e-1]}),eq:r(function(t,e,n){return[n<0?n+e:n]}),even:r(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:r(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:r(function(t,e,n){for(var i=n<0?n+e:n;0<=--i;)t.push(i);return t}),gt:r(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=x.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[p]=i(p);for(p in{submit:!0,reset:!0})x.pseudos[p]=a(p);return s.prototype=x.filters=x.pseudos,x.setFilters=new s,S=b.tokenize=function(t,e){var n,i,o,a,r,s,l,u=W[t+" "];if(u)return e?0:u.slice(0);for(r=t,s=[],l=x.preFilter;r;){for(a in n&&!(i=lt.exec(r))||(i&&(r=r.slice(i[0].length)||r),s.push(o=[])),n=!1,(i=ut.exec(r))&&(n=i.shift(),o.push({value:n,type:i[0].replace(st," ")}),r=r.slice(n.length)),x.filter)!(i=ft[a].exec(r))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),r=r.slice(n.length));if(!n)break}return e?r.length:r?b.error(t):W(t,s).slice(0)},k=b.compile=function(t,e){var n,i=[],o=[],a=V[t+" "];if(!a){for(e||(e=S(t)),n=e.length;n--;)(a=f(e[n]))[z]?i.push(a):o.push(a);(a=V(t,d(o,i))).selector=t}return a},D=b.select=function(t,e,n,i){var o,a,r,s,l,u="function"==typeof t&&t,d=!i&&S(t=u.selector||t);if(n=n||[],1===d.length){if(2<(a=d[0]=d[0].slice(0)).length&&"ID"===(r=a[0]).type&&v.getById&&9===e.nodeType&&O&&x.relative[a[1].type]){if(!(e=(x.find.ID(r.matches[0].replace(bt,wt),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(a.shift().value.length)}for(o=ft.needsContext.test(t)?0:a.length;o--&&(r=a[o],!x.relative[s=r.type]);)if((l=x.find[s])&&(i=l(r.matches[0].replace(bt,wt),yt.test(a[0].type)&&m(e.parentNode)||e))){if(a.splice(o,1),!(t=i.length&&g(a)))return X.apply(n,i),n;break}}return(u||k(t,d))(i,e,!O,n,!e||yt.test(t)&&m(e.parentNode)||e),n},v.sortStable=z.split("").sort(Y).join("")===z,v.detectDuplicates=!!P,E(),v.sortDetached=o(function(t){return 1&t.compareDocumentPosition(I.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||e("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),v.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||e("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||e(et,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),b}(C);ft.find=yt,ft.expr=yt.selectors,ft.expr[":"]=ft.expr.pseudos,ft.uniqueSort=ft.unique=yt.uniqueSort,ft.text=yt.getText,ft.isXMLDoc=yt.isXML,ft.contains=yt.contains;var _t=function(t,e,n){for(var i=[],o=n!==undefined;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&ft(t).is(n))break;i.push(t)}return i},bt=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},wt=ft.expr.match.needsContext,xt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Ct=/^.[^:#\[\.,]*$/;ft.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?ft.find.matchesSelector(i,t)?[i]:[]:ft.find.matches(t,ft.grep(e,function(t){return 1===t.nodeType}))},ft.fn.extend({find:function(t){var e,n=[],i=this,o=i.length;if("string"!=typeof t)return this.pushStack(ft(t).filter(function(){for(e=0;e<o;e++)if(ft.contains(i[e],this))return!0}));for(e=0;e<o;e++)ft.find(t,i[e],n);return(n=this.pushStack(1<o?ft.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(e(this,t||[],!1))},not:function(t){return this.pushStack(e(this,t||[],!0))},is:function(t){return!!e(this,"string"==typeof t&&wt.test(t)?ft(t):t||[],!1).length}});var Lt,St=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(ft.fn.init=function(t,e,n){var i,o;if(!t)return this;if(n=n||Lt,"string"!=typeof t)return t.nodeType?(this.context=this[0]=t,this.length=1,this):ft.isFunction(t)?"undefined"!=typeof n.ready?n.ready(t):t(ft):(t.selector!==undefined&&(this.selector=t.selector,this.context=t.context),ft.makeArray(t,this));if(!(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&3<=t.length?[null,t,null]:St.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof ft?e[0]:e,ft.merge(this,ft.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:it,!0)),xt.test(i[1])&&ft.isPlainObject(e))for(i in e)ft.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if((o=it.getElementById(i[2]))&&o.parentNode){if(o.id!==i[2])return Lt.find(t);this.length=1,this[0]=o}return this.context=it,this.selector=t,this}).prototype=ft.fn,Lt=ft(it);var kt=/^(?:parents|prev(?:Until|All))/,Dt={children:!0,contents:!0,next:!0,prev:!0};ft.fn.extend({has:function(t){var e,n=ft(t,this),i=n.length;return this.filter(function(){for(e=0;e<i;e++)if(ft.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,o=this.length,a=[],r=wt.test(t)||"string"!=typeof t?ft(t,e||this.context):0;i<o;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(r?-1<r.index(n):1===n.nodeType&&ft.find.matchesSelector(n,t))){a.push(n);break}return this.pushStack(1<a.length?ft.uniqueSort(a):a)},index:function(t){return t?"string"==typeof t?ft.inArray(this[0],ft(t)):ft.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(ft.uniqueSort(ft.merge(this.get(),ft(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ft.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return _t(t,"parentNode")},parentsUntil:function(t,e,n){return _t(t,"parentNode",n)},next:function(t){return n(t,"nextSibling")},prev:function(t){return n(t,"previousSibling")},nextAll:function(t){return _t(t,"nextSibling")},prevAll:function(t){return _t(t,"previousSibling")},nextUntil:function(t,e,n){return _t(t,"nextSibling",n)},prevUntil:function(t,e,n){return _t(t,"previousSibling",n)},siblings:function(t){return bt((t.parentNode||{}).firstChild,t)},children:function(t){return bt(t.firstChild)},contents:function(t){return ft.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:ft.merge([],t.childNodes)}},function(i,o){ft.fn[i]=function(t,e){var n=ft.map(this,o,t);return"Until"!==i.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=ft.filter(e,n)),1<this.length&&(Dt[i]||(n=ft.uniqueSort(n)),kt.test(i)&&(n=n.reverse())),this.pushStack(n)}});var Tt,Mt,Pt=/\S+/g;for(Mt in ft.Callbacks=function(i){i="string"==typeof i?d(i):ft.extend({},i);var o,t,e,n,a=[],r=[],s=-1,l=function(){for(n=i.once,e=o=!0;r.length;s=-1)for(t=r.shift();++s<a.length;)!1===a[s].apply(t[0],t[1])&&i.stopOnFalse&&(s=a.length,t=!1);i.memory||(t=!1),o=!1,n&&(a=t?[]:"")},u={add:function(){return a&&(t&&!o&&(s=a.length-1,r.push(t)),function n(t){ft.each(t,function(t,e){ft.isFunction(e)?i.unique&&u.has(e)||a.push(e):e&&e.length&&"string"!==ft.type(e)&&n(e)})}(arguments),t&&!o&&l()),this},remove:function(){return ft.each(arguments,function(t,e){for(var n;-1<(n=ft.inArray(e,a,n));)a.splice(n,1),n<=s&&s--}),this},has:function(t){return t?-1<ft.inArray(t,a):0<a.length},empty:function(){return a&&(a=[]),this},disable:function(){return n=r=[],a=t="",this},disabled:function(){return!a},lock:function(){return n=!0,t||u.disable(),this},locked:function(){return!!n},fireWith:function(t,e){return n||(e=[t,(e=e||[]).slice?e.slice():e],r.push(e),o||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!e}};return u},ft.extend({Deferred:function(t){var a=[["resolve","done",ft.Callbacks("once memory"),"resolved"],["reject","fail",ft.Callbacks("once memory"),"rejected"],["notify","progress",ft.Callbacks("memory")]],o="pending",r={state:function(){return o},
always:function(){return s.done(arguments).fail(arguments),this},then:function(){var o=arguments;return ft.Deferred(function(i){ft.each(a,function(t,e){var n=ft.isFunction(o[t])&&o[t];s[e[1]](function(){var t=n&&n.apply(this,arguments);t&&ft.isFunction(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[e[0]+"With"](this===r?i.promise():this,n?[t]:arguments)})}),o=null}).promise()},promise:function(t){return null!=t?ft.extend(t,r):r}},s={};return r.pipe=r.then,ft.each(a,function(t,e){var n=e[2],i=e[3];r[e[1]]=n.add,i&&n.add(function(){o=i},a[1^t][2].disable,a[2][2].lock),s[e[0]]=function(){return s[e[0]+"With"](this===s?r:this,arguments),this},s[e[0]+"With"]=n.fireWith}),r.promise(s),t&&t.call(s,s),s},when:function(t){var o,e,n,i=0,a=ot.call(arguments),r=a.length,s=1!==r||t&&ft.isFunction(t.promise)?r:0,l=1===s?t:ft.Deferred(),u=function(e,n,i){return function(t){n[e]=this,i[e]=1<arguments.length?ot.call(arguments):t,i===o?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(1<r)for(o=new Array(r),e=new Array(r),n=new Array(r);i<r;i++)a[i]&&ft.isFunction(a[i].promise)?a[i].promise().progress(u(i,e,o)).done(u(i,n,a)).fail(l.reject):--s;return s||l.resolveWith(n,a),l.promise()}}),ft.fn.ready=function(t){return ft.ready.promise().done(t),this},ft.extend({isReady:!1,readyWait:1,holdReady:function(t){t?ft.readyWait++:ft.ready(!0)},ready:function(t){(!0===t?--ft.readyWait:ft.isReady)||(ft.isReady=!0)!==t&&0<--ft.readyWait||(Tt.resolveWith(it,[ft]),ft.fn.triggerHandler&&(ft(it).triggerHandler("ready"),ft(it).off("ready")))}}),ft.ready.promise=function(t){if(!Tt)if(Tt=ft.Deferred(),"complete"===it.readyState||"loading"!==it.readyState&&!it.documentElement.doScroll)C.setTimeout(ft.ready);else if(it.addEventListener)it.addEventListener("DOMContentLoaded",a),C.addEventListener("load",a);else{it.attachEvent("onreadystatechange",a),C.attachEvent("onload",a);var e=!1;try{e=null==C.frameElement&&it.documentElement}catch(n){}e&&e.doScroll&&function i(){if(!ft.isReady){try{e.doScroll("left")}catch(n){return C.setTimeout(i,50)}o(),ft.ready()}}()}return Tt.promise(t)},ft.ready.promise(),ft(ct))break;ct.ownFirst="0"===Mt,ct.inlineBlockNeedsLayout=!1,ft(function(){var t,e,n,i;(n=it.getElementsByTagName("body")[0])&&n.style&&(e=it.createElement("div"),(i=it.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),"undefined"!=typeof e.style.zoom&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ct.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(i))}),function(){var t=it.createElement("div");ct.deleteExpando=!0;try{delete t.test}catch(e){ct.deleteExpando=!1}t=null}();var Et,It=function(t){var e=ft.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return(1===n||9===n)&&(!e||!0!==e&&t.getAttribute("classid")===e)},At=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ot=/([A-Z])/g;ft.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?ft.cache[t[ft.expando]]:t[ft.expando])&&!u(t)},data:function(t,e,n){return i(t,e,n)},removeData:function(t,e){return r(t,e)},_data:function(t,e,n){return i(t,e,n,!0)},_removeData:function(t,e){return r(t,e,!0)}}),ft.fn.extend({data:function(t,e){var n,i,o,a=this[0],r=a&&a.attributes;if(t!==undefined)return"object"==typeof t?this.each(function(){ft.data(this,t)}):1<arguments.length?this.each(function(){ft.data(this,t,e)}):a?l(a,t,ft.data(a,t)):undefined;if(this.length&&(o=ft.data(a),1===a.nodeType&&!ft._data(a,"parsedAttrs"))){for(n=r.length;n--;)r[n]&&0===(i=r[n].name).indexOf("data-")&&l(a,i=ft.camelCase(i.slice(5)),o[i]);ft._data(a,"parsedAttrs",!0)}return o},removeData:function(t){return this.each(function(){ft.removeData(this,t)})}}),ft.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=ft._data(t,e),n&&(!i||ft.isArray(n)?i=ft._data(t,e,ft.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=ft.queue(t,e),i=n.length,o=n.shift(),a=ft._queueHooks(t,e),r=function(){ft.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete a.stop,o.call(t,r,a)),!i&&a&&a.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ft._data(t,n)||ft._data(t,n,{empty:ft.Callbacks("once memory").add(function(){ft._removeData(t,e+"queue"),ft._removeData(t,n)})})}}),ft.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?ft.queue(this[0],e):n===undefined?this:this.each(function(){var t=ft.queue(this,e,n);ft._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&ft.dequeue(this,e)})},dequeue:function(t){return this.each(function(){ft.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=ft.Deferred(),a=this,r=this.length,s=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof t&&(e=t,t=undefined),t=t||"fx";r--;)(n=ft._data(a[r],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),o.promise(e)}}),ct.shrinkWrapBlocks=function(){return null!=Et?Et:(Et=!1,(e=it.getElementsByTagName("body")[0])&&e.style?(t=it.createElement("div"),(n=it.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(n).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(it.createElement("div")).style.width="5px",Et=3!==t.offsetWidth),e.removeChild(n),Et):void 0);var t,e,n};var Ft,Nt,Rt,Bt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,zt=new RegExp("^(?:([+-])=|)("+Bt+")([a-z%]*)$","i"),Ut=["Top","Right","Bottom","Left"],jt=function(t,e){return t=e||t,"none"===ft.css(t,"display")||!ft.contains(t.ownerDocument,t)},$t=function(t,e,n,i,o,a,r){var s=0,l=t.length,u=null==n;if("object"===ft.type(n))for(s in o=!0,n)$t(t,e,s,n[s],!0,a,r);else if(i!==undefined&&(o=!0,ft.isFunction(i)||(r=!0),u&&(r?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(ft(t),n)})),e))for(;s<l;s++)e(t[s],n,r?i:i.call(t[s],s,e(t[s],n)));return o?t:u?e.call(t):l?e(t[0],n):a},Ht=/^(?:checkbox|radio)$/i,Wt=/<([\w:-]+)/,Vt=/^$|\/(?:java|ecma)script/i,Yt=/^\s+/,qt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";Ft=it.createElement("div"),Nt=it.createDocumentFragment(),Rt=it.createElement("input"),Ft.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ct.leadingWhitespace=3===Ft.firstChild.nodeType,ct.tbody=!Ft.getElementsByTagName("tbody").length,ct.htmlSerialize=!!Ft.getElementsByTagName("link").length,ct.html5Clone="<:nav></:nav>"!==it.createElement("nav").cloneNode(!0).outerHTML,Rt.type="checkbox",Rt.checked=!0,Nt.appendChild(Rt),ct.appendChecked=Rt.checked,Ft.innerHTML="<textarea>x</textarea>",ct.noCloneChecked=!!Ft.cloneNode(!0).lastChild.defaultValue,Nt.appendChild(Ft),(Rt=it.createElement("input")).setAttribute("type","radio"),Rt.setAttribute("checked","checked"),Rt.setAttribute("name","t"),Ft.appendChild(Rt),ct.checkClone=Ft.cloneNode(!0).cloneNode(!0).lastChild.checked,ct.noCloneEvent=!!Ft.addEventListener,Ft[ft.expando]=1,ct.attributes=!Ft.getAttribute(ft.expando);var Zt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ct.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td;var Gt=/<|&#?\w+;/,Kt=/<tbody/i;!function(){var t,e,n=it.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})e="on"+t,(ct[t]=e in C)||(n.setAttribute(e,"t"),ct[t]=!1===n.attributes[e].expando);n=null}();var Jt=/^(?:input|select|textarea)$/i,Xt=/^key/,Qt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,te=/^(?:focusinfocus|focusoutblur)$/,ee=/^([^.]*)(?:\.(.+)|)/;ft.event={global:{},add:function(t,e,n,i,o){var a,r,s,l,u,d,c,h,f,p,m,g=ft._data(t);if(g){for(n.handler&&(n=(l=n).handler,o=l.selector),n.guid||(n.guid=ft.guid++),(r=g.events)||(r=g.events={}),(d=g.handle)||((d=g.handle=function(t){return void 0===ft||t&&ft.event.triggered===t.type?undefined:ft.event.dispatch.apply(d.elem,arguments)}).elem=t),s=(e=(e||"").match(Pt)||[""]).length;s--;)f=m=(a=ee.exec(e[s])||[])[1],p=(a[2]||"").split(".").sort(),f&&(u=ft.event.special[f]||{},f=(o?u.delegateType:u.bindType)||f,u=ft.event.special[f]||{},c=ft.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&ft.expr.match.needsContext.test(o),namespace:p.join(".")},l),(h=r[f])||((h=r[f]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,i,p,d)||(t.addEventListener?t.addEventListener(f,d,!1):t.attachEvent&&t.attachEvent("on"+f,d))),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,c):h.push(c),ft.event.global[f]=!0);t=null}},remove:function(t,e,n,i,o){var a,r,s,l,u,d,c,h,f,p,m,g=ft.hasData(t)&&ft._data(t);if(g&&(d=g.events)){for(u=(e=(e||"").match(Pt)||[""]).length;u--;)if(f=m=(s=ee.exec(e[u])||[])[1],p=(s[2]||"").split(".").sort(),f){for(c=ft.event.special[f]||{},h=d[f=(i?c.delegateType:c.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=h.length;a--;)r=h[a],!o&&m!==r.origType||n&&n.guid!==r.guid||s&&!s.test(r.namespace)||i&&i!==r.selector&&("**"!==i||!r.selector)||(h.splice(a,1),r.selector&&h.delegateCount--,c.remove&&c.remove.call(t,r));l&&!h.length&&(c.teardown&&!1!==c.teardown.call(t,p,g.handle)||ft.removeEvent(t,f,g.handle),delete d[f])}else for(f in d)ft.event.remove(t,f+e[u],n,i,!0);ft.isEmptyObject(d)&&(delete g.handle,ft._removeData(t,"events"))}},trigger:function(t,e,n,i){var o,a,r,s,l,u,d,c=[n||it],h=dt.call(t,"type")?t.type:t,f=dt.call(t,"namespace")?t.namespace.split("."):[];if(r=u=n=n||it,3!==n.nodeType&&8!==n.nodeType&&!te.test(h+ft.event.triggered)&&(-1<h.indexOf(".")&&(h=(f=h.split(".")).shift(),f.sort()),a=h.indexOf(":")<0&&"on"+h,(t=t[ft.expando]?t:new ft.Event(h,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=n),e=null==e?[t]:ft.makeArray(e,[t]),l=ft.event.special[h]||{},i||!l.trigger||!1!==l.trigger.apply(n,e))){if(!i&&!l.noBubble&&!ft.isWindow(n)){for(s=l.delegateType||h,te.test(s+h)||(r=r.parentNode);r;r=r.parentNode)c.push(r),u=r;u===(n.ownerDocument||it)&&c.push(u.defaultView||u.parentWindow||C)}for(d=0;(r=c[d++])&&!t.isPropagationStopped();)t.type=1<d?s:l.bindType||h,(o=(ft._data(r,"events")||{})[t.type]&&ft._data(r,"handle"))&&o.apply(r,e),(o=a&&r[a])&&o.apply&&It(r)&&(t.result=o.apply(r,e),!1===t.result&&t.preventDefault());if(t.type=h,!i&&!t.isDefaultPrevented()&&(!l._default||!1===l._default.apply(c.pop(),e))&&It(n)&&a&&n[h]&&!ft.isWindow(n)){(u=n[a])&&(n[a]=null),ft.event.triggered=h;try{n[h]()}catch(p){}ft.event.triggered=undefined,u&&(n[a]=u)}return t.result}},dispatch:function(t){t=ft.event.fix(t);var e,n,i,o,a,r=[],s=ot.call(arguments),l=(ft._data(this,"events")||{})[t.type]||[],u=ft.event.special[t.type]||{};if((s[0]=t).delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,t)){for(r=ft.event.handlers.call(this,t,l),e=0;(o=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,n=0;(a=o.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(a.namespace)||(t.handleObj=a,t.data=a.data,(i=((ft.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,s))!==undefined&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,o,a,r=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(i=[],n=0;n<s;n++)i[o=(a=e[n]).selector+" "]===undefined&&(i[o]=a.needsContext?-1<ft(o,this).index(l):ft.find(o,this,null,[l]).length),i[o]&&i.push(a);i.length&&r.push({elem:l,handlers:i})}return s<e.length&&r.push({elem:this,handlers:e.slice(s)}),r},fix:function(t){if(t[ft.expando])return t;var e,n,i,o=t.type,a=t,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=Qt.test(o)?this.mouseHooks:Xt.test(o)?this.keyHooks:{}),i=r.props?this.props.concat(r.props):this.props,t=new ft.Event(a),e=i.length;e--;)t[n=i[e]]=a[n];return t.target||(t.target=a.srcElement||it),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,r.filter?r.filter(t,a):t},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,o,a=e.button,r=e.fromElement;return null==t.pageX&&null!=e.clientX&&(o=(i=t.target.ownerDocument||it).documentElement,n=i.body,t.pageX=e.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&r&&(t.relatedTarget=r===t.target?e.toElement:r),t.which||a===undefined||(t.which=1&a?1:2&a?3:4&a?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===p()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(ft.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return ft.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==undefined&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n){var i=ft.extend(new ft.Event,n,{type:t,isSimulated:!0});ft.event.trigger(i,null,e),i.isDefaultPrevented()&&n.preventDefault()}},ft.removeEvent=it.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)}:function(t,e,n){var i="on"+e;t.detachEvent&&("undefined"==typeof t[i]&&(t[i]=null),t.detachEvent(i,n))},ft.Event=function(t,e){if(!(this instanceof ft.Event))return new ft.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===undefined&&!1===t.returnValue?h:f):this.type=t,e&&ft.extend(this,e),this.timeStamp=t&&t.timeStamp||ft.now(),this[ft.expando]=!0},ft.Event.prototype={constructor:ft.Event,isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=h,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=h,t&&!this.isSimulated&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=h,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},ft.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,a){ft.event.special[t]={delegateType:a,bindType:a,handle:function(t){var e,n=this,i=t.relatedTarget,o=t.handleObj;return i&&(i===n||ft.contains(n,i))||(t.type=o.origType,e=o.handler.apply(this,arguments),t.type=a),e}}}),ct.submit||(ft.event.special.submit={setup:function(){if(ft.nodeName(this,"form"))return!1;ft.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=ft.nodeName(e,"input")||ft.nodeName(e,"button")?ft.prop(e,"form"):undefined;n&&!ft._data(n,"submit")&&(ft.event.add(n,"submit._submit",function(t){t._submitBubble=!0}),ft._data(n,"submit",!0))})},postDispatch:function(t){t._submitBubble&&(delete t._submitBubble,this.parentNode&&!t.isTrigger&&ft.event.simulate("submit",this.parentNode,t))},teardown:function(){if(ft.nodeName(this,"form"))return!1;ft.event.remove(this,"._submit")}}),ct.change||(ft.event.special.change={setup:function(){if(Jt.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(ft.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._justChanged=!0)}),ft.event.add(this,"click._change",function(t){this._justChanged&&!t.isTrigger&&(this._justChanged=!1),ft.event.simulate("change",this,t)})),!1;ft.event.add(this,"beforeactivate._change",function(t){var e=t.target;Jt.test(e.nodeName)&&!ft._data(e,"change")&&(ft.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||ft.event.simulate("change",this.parentNode,t)}),ft._data(e,"change",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return ft.event.remove(this,"._change"),!Jt.test(this.nodeName)}}),ct.focusin||ft.each({focus:"focusin",blur:"focusout"},function(n,i){var o=function(t){ft.event.simulate(i,t.target,ft.event.fix(t))};ft.event.special[i]={setup:function(){var t=this.ownerDocument||this,e=ft._data(t,i);e||t.addEventListener(n,o,!0),ft._data(t,i,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=ft._data(t,i)-1;e?ft._data(t,i,e):(t.removeEventListener(n,o,!0),ft._removeData(t,i))}}}),ft.fn.extend({on:function(t,e,n,i){return b(this,t,e,n,i)},one:function(t,e,n,i){return b(this,t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,ft(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(n=e,e=undefined),!1===n&&(n=f),this.each(function(){ft.event.remove(this,t,n,e)});for(o in t)this.off(o,e,t[o]);return this},trigger:function(t,e){return this.each(function(){ft.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return ft.event.trigger(t,e,n,!0)}});var ne=/ jQuery\d+="(?:null|\d+)"/g,ie=new RegExp("<(?:"+qt+")[\\s/>]","i"),oe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ae=/<script|<style|<link/i,re=/checked\s*(?:[^=]|=\s*.checked.)/i,se=/^true\/(.*)/,le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ue=g(it).appendChild(it.createElement("div"));ft.extend({htmlPrefilter:function(t){return t.replace(oe,"<$1></$2>")},clone:function(t,e,n){var i,o,a,r,s,l=ft.contains(t.ownerDocument,t);if(ct.html5Clone||ft.isXMLDoc(t)||!ie.test("<"+t.nodeName+">")?a=t.cloneNode(!0):(ue.innerHTML=t.outerHTML,ue.removeChild(a=ue.firstChild)),!(ct.noCloneEvent&&ct.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ft.isXMLDoc(t)))for(i=v(a),s=v(t),r=0;null!=(o=s[r]);++r)i[r]&&k(o,i[r]);if(e)if(n)for(s=s||v(t),i=i||v(a),r=0;null!=(o=s[r]);r++)S(o,i[r]);else S(t,a);return 0<(i=v(a,"script")).length&&y(i,!l&&v(t,"script")),i=s=o=null,a},cleanData:function(t,e){for(var n,i,o,a,r=0,s=ft.expando,l=ft.cache,u=ct.attributes,d=ft.event.special;null!=(n=t[r]);r++)if((e||It(n))&&(a=(o=n[s])&&l[o])){if(a.events)for(i in a.events)d[i]?ft.event.remove(n,i):ft.removeEvent(n,i,a.handle);l[o]&&(delete l[o],u||"undefined"==typeof n.removeAttribute?n[s]=undefined:n.removeAttribute(s),nt.push(o))}}}),ft.fn.extend({domManip:D,detach:function(t){return T(this,t,!0)},remove:function(t){return T(this,t)},text:function(t){return $t(this,function(t){return t===undefined?ft.text(this):this.empty().append((this[0]&&this[0].ownerDocument||it).createTextNode(t))},null,t,arguments.length)},append:function(){return D(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||w(this,t).appendChild(t)})},prepend:function(){return D(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=w(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return D(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return D(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&ft.cleanData(v(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&ft.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return ft.clone(this,t,e)})},html:function(t){return $t(this,function(t){var e=this[0]||{},n=0,i=this.length;if(t===undefined)return 1===e.nodeType?e.innerHTML.replace(ne,""):undefined;if("string"==typeof t&&!ae.test(t)&&(ct.htmlSerialize||!ie.test(t))&&(ct.leadingWhitespace||!Yt.test(t))&&!Zt[(Wt.exec(t)||["",""])[1].toLowerCase()]){t=ft.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(ft.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(o){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return D(this,arguments,function(t){var e=this.parentNode;ft.inArray(this,n)<0&&(ft.cleanData(v(this)),e&&e.replaceChild(t,this))},n)}}),ft.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,r){ft.fn[t]=function(t){for(var e,n=0,i=[],o=ft(t),a=o.length-1;n<=a;n++)e=n===a?this:this.clone(!0),ft(o[n])[r](e),rt.apply(i,e.get());return this.pushStack(i)}});var de,ce={HTML:"block",BODY:"block"},he=/^margin/,fe=new RegExp("^("+Bt+")(?!px)[a-z%]+$","i"),pe=function(t,e,n,i){var o,a,r={};for(a in e)r[a]=t.style[a],t.style[a]=e[a];for(a in o=n.apply(t,i||[]),e)t.style[a]=r[a];return o},me=it.documentElement;!function(){function t(){var t,e,n=it.documentElement;n.appendChild(u),d.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i=a=l=!1,o=s=!0,C.getComputedStyle&&(e=C.getComputedStyle(d),i="1%"!==(e||{}).top,l="2px"===(e||{}).marginLeft,a="4px"===(e||{width:"4px"}).width,d.style.marginRight="50%",o="4px"===(e||{marginRight:"4px"}).marginRight,(t=d.appendChild(it.createElement("div"))).style.cssText=d.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",d.style.width="1px",s=!parseFloat((C.getComputedStyle(t)||{}).marginRight),d.removeChild(t)),d.style.display="none",(r=0===d.getClientRects().length)&&(d.style.display="",d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",d.childNodes[0].style.borderCollapse="separate",(t=d.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(r=0===t[0].offsetHeight)&&(t[0].style.display="",t[1].style.display="none",r=0===t[0].offsetHeight)),n.removeChild(u)}var i,o,a,r,s,l,u=it.createElement("div"),d=it.createElement("div");d.style&&(d.style.cssText="float:left;opacity:.5",ct.opacity="0.5"===d.style.opacity,ct.cssFloat=!!d.style.cssFloat,d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",ct.clearCloneStyle="content-box"===d.style.backgroundClip,(u=it.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",d.innerHTML="",u.appendChild(d),ct.boxSizing=""===d.style.boxSizing||""===d.style.MozBoxSizing||""===d.style.WebkitBoxSizing,ft.extend(ct,{reliableHiddenOffsets:function(){return null==i&&t(),r},boxSizingReliable:function(){return null==i&&t(),a},pixelMarginRight:function(){return null==i&&t(),o},pixelPosition:function(){return null==i&&t(),i},reliableMarginRight:function(){return null==i&&t(),s},reliableMarginLeft:function(){return null==i&&t(),l}}))}();var ge,ve,ye=/^(top|right|bottom|left)$/;C.getComputedStyle?(ge=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=C),e.getComputedStyle(t)},ve=function(t,e,n){var i,o,a,r,s=t.style;return""!==(r=(n=n||ge(t))?n.getPropertyValue(e)||n[e]:undefined)&&r!==undefined||ft.contains(t.ownerDocument,t)||(r=ft.style(t,e)),n&&!ct.pixelMarginRight()&&fe.test(r)&&he.test(e)&&(i=s.width,o=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=r,r=n.width,s.width=i,s.minWidth=o,s.maxWidth=a),r===undefined?r:r+""}):me.currentStyle&&(ge=function(t){return t.currentStyle},ve=function(t,e,n){var i,o,a,r,s=t.style;return null==(r=(n=n||ge(t))?n[e]:undefined)&&s&&s[e]&&(r=s[e]),fe.test(r)&&!ye.test(e)&&(i=s.left,(a=(o=t.runtimeStyle)&&o.left)&&(o.left=t.currentStyle.left),s.left="fontSize"===e?"1em":r,r=s.pixelLeft+"px",s.left=i,a&&(o.left=a)),r===undefined?r:r+""||"auto"});var _e=/alpha\([^)]*\)/i,be=/opacity\s*=\s*([^)]*)/i,we=/^(none|table(?!-c[ea]).+)/,xe=new RegExp("^("+Bt+")(.*)$","i"),Ce={position:"absolute",visibility:"hidden",display:"block"},Le={letterSpacing:"0",fontWeight:"400"},Se=["Webkit","O","Moz","ms"],ke=it.createElement("div").style;ft.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=ve(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ct.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,a,r,s=ft.camelCase(e),l=t.style;if(e=ft.cssProps[s]||(ft.cssProps[s]=I(s)||s),r=ft.cssHooks[e]||ft.cssHooks[s],n===undefined)return r&&"get"in r&&(o=r.get(t,!1,i))!==undefined?o:l[e];if("string"===(a=typeof n)&&(o=zt.exec(n))&&o[1]&&(n=c(t,e,o),a="number"),null!=n&&n==n&&("number"===a&&(n+=o&&o[3]||(ft.cssNumber[s]?"":"px")),ct.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(r&&"set"in r&&(n=r.set(t,n,i))===undefined)))try{l[e]=n}catch(u){}}},css:function(t,e,n,i){var o,a,r,s=ft.camelCase(e);return e=ft.cssProps[s]||(ft.cssProps[s]=I(s)||s),(r=ft.cssHooks[e]||ft.cssHooks[s])&&"get"in r&&(a=r.get(t,!0,n)),a===undefined&&(a=ve(t,e,i)),"normal"===a&&e in Le&&(a=Le[e]),""===n||n?(o=parseFloat(a),!0===n||isFinite(o)?o||0:a):a}}),ft.each(["height","width"],function(t,o){ft.cssHooks[o]={get:function(t,e,n){if(e)return we.test(ft.css(t,"display"))&&0===t.offsetWidth?pe(t,Ce,function(){return N(t,o,n)}):N(t,o,n)},set:function(t,e,n){var i=n&&ge(t);return O(t,e,n?F(t,o,n,ct.boxSizing&&"border-box"===ft.css(t,"boxSizing",!1,i),i):0)}}}),ct.opacity||(ft.cssHooks.opacity={get:function(t,e){return be.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,o=ft.isNumeric(e)?"alpha(opacity="+100*e+")":"",a=i&&i.filter||n.filter||"";((n.zoom=1)<=e||""===e)&&""===ft.trim(a.replace(_e,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=_e.test(a)?a.replace(_e,o):a+" "+o)}}),ft.cssHooks.marginRight=E(ct.reliableMarginRight,function(t,e){if(e)return pe(t,{display:"inline-block"},ve,[t,"marginRight"])}),ft.cssHooks.marginLeft=E(ct.reliableMarginLeft,function(t,e){if(e)return(parseFloat(ve(t,"marginLeft"))||(ft.contains(t.ownerDocument,t)?t.getBoundingClientRect().left-pe(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}):0))+"px"}),ft.each({margin:"",padding:"",border:"Width"},function(o,a){ft.cssHooks[o+a]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[o+Ut[e]+a]=i[e]||i[e-2]||i[0];return n}},he.test(o)||(ft.cssHooks[o+a].set=O)}),ft.fn.extend({css:function(t,e){return $t(this,function(t,e,n){var i,o,a={},r=0;if(ft.isArray(e)){for(i=ge(t),o=e.length;r<o;r++)a[e[r]]=ft.css(t,e[r],!1,i);return a}return n!==undefined?ft.style(t,e,n):ft.css(t,e)},t,e,1<arguments.length)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){jt(this)?ft(this).show():ft(this).hide()})}}),(ft.Tween=R).prototype={constructor:R,init:function(t,e,n,i,o,a){this.elem=t,this.prop=n,this.easing=o||ft.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=a||(ft.cssNumber[n]?"":"px")},cur:function(){var t=R.propHooks[this.prop];return t&&t.get?t.get(this):R.propHooks._default.get(this)},run:function(t){var e,n=R.propHooks[this.prop];return this.options.duration?this.pos=e=ft.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=ft.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){ft.fx.step[t.prop]?ft.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[ft.cssProps[t.prop]]&&!ft.cssHooks[t.prop]?t.elem[t.prop]=t.now:ft.style(t.elem,t.prop,t.now+t.unit)}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ft.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},ft.fx=R.prototype.init,ft.fx.step={};var De,Te,Me,Pe,Ee,Ie,Ae,Oe=/^(?:toggle|show|hide)$/,Fe=/queueHooks$/;ft.Animation=ft.extend(H,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return c(n.elem,t,zt.exec(e),n),n}]},tweener:function(t,e){ft.isFunction(t)?(e=t,t=["*"]):t=t.match(Pt);for(var n,i=0,o=t.length;i<o;i++)n=t[i],H.tweeners[n]=H.tweeners[n]||[],H.tweeners[n].unshift(e)},prefilters:[j],prefilter:function(t,e){e?H.prefilters.unshift(t):H.prefilters.push(t)}}),ft.speed=function(t,e,n){var i=t&&"object"==typeof t?ft.extend({},t):{complete:n||!n&&e||ft.isFunction(t)&&t,duration:t,easing:n&&e||e&&!ft.isFunction(e)&&e};return i.duration=ft.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ft.fx.speeds?ft.fx.speeds[i.duration]:ft.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){ft.isFunction(i.old)&&i.old.call(this),i.queue&&ft.dequeue(this,i.queue)},i},ft.fn.extend({fadeTo:function(t,e,n,i){return this.filter(jt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){var o=ft.isEmptyObject(e),a=ft.speed(t,n,i),r=function(){var t=H(this,ft.extend({},e),a);(o||ft._data(this,"finish"))&&t.stop(!0)};return r.finish=r,o||!1===a.queue?this.each(r):this.queue(a.queue,r)},stop:function(o,t,a){var r=function(t){var e=t.stop;delete t.stop,e(a)};return"string"!=typeof o&&(a=t,t=o,o=undefined),t&&!1!==o&&this.queue(o||"fx",[]),this.each(function(){var t=!0,e=null!=o&&o+"queueHooks",n=ft.timers,i=ft._data(this);if(e)i[e]&&i[e].stop&&r(i[e]);else for(e in i)i[e]&&i[e].stop&&Fe.test(e)&&r(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=o&&n[e].queue!==o||(n[e].anim.stop(a),t=!1,n.splice(e,1));!t&&a||ft.dequeue(this,o)})},finish:function(r){return!1!==r&&(r=r||"fx"),this.each(function(){var t,e=ft._data(this),n=e[r+"queue"],i=e[r+"queueHooks"],o=ft.timers,a=n?n.length:0;for(e.finish=!0,ft.queue(this,r,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===r&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),ft.each(["toggle","show","hide"],function(t,i){var o=ft.fn[i];ft.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?o.apply(this,arguments):this.animate(z(i,!0),t,e,n)}}),ft.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){ft.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),ft.timers=[],ft.fx.tick=function(){var t,e=ft.timers,n=0;for(De=ft.now();n<e.length;n++)(t=e[n])()||e[n]!==t||e.splice(n--,1);e.length||ft.fx.stop(),De=undefined},ft.fx.timer=function(t){ft.timers.push(t),t()?ft.fx.start():ft.timers.pop()},ft.fx.interval=13,ft.fx.start=function(){Te||(Te=C.setInterval(ft.fx.tick,ft.fx.interval))},ft.fx.stop=function(){C.clearInterval(Te),Te=null},ft.fx.speeds={slow:600,fast:200,_default:400},ft.fn.delay=function(i,t){
return i=ft.fx&&ft.fx.speeds[i]||i,t=t||"fx",this.queue(t,function(t,e){var n=C.setTimeout(t,i);e.stop=function(){C.clearTimeout(n)}})},Pe=it.createElement("input"),Ee=it.createElement("div"),Ie=it.createElement("select"),Ae=Ie.appendChild(it.createElement("option")),(Ee=it.createElement("div")).setAttribute("className","t"),Ee.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",Me=Ee.getElementsByTagName("a")[0],Pe.setAttribute("type","checkbox"),Ee.appendChild(Pe),(Me=Ee.getElementsByTagName("a")[0]).style.cssText="top:1px",ct.getSetAttribute="t"!==Ee.className,ct.style=/top/.test(Me.getAttribute("style")),ct.hrefNormalized="/a"===Me.getAttribute("href"),ct.checkOn=!!Pe.value,ct.optSelected=Ae.selected,ct.enctype=!!it.createElement("form").enctype,Ie.disabled=!0,ct.optDisabled=!Ae.disabled,(Pe=it.createElement("input")).setAttribute("value",""),ct.input=""===Pe.getAttribute("value"),Pe.value="t",Pe.setAttribute("type","radio"),ct.radioValue="t"===Pe.value;var Ne=/\r/g,Re=/[\x20\t\r\n\f]+/g;ft.fn.extend({val:function(n){var i,t,o,e=this[0];return arguments.length?(o=ft.isFunction(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=o?n.call(this,t,ft(this).val()):n)?e="":"number"==typeof e?e+="":ft.isArray(e)&&(e=ft.map(e,function(t){return null==t?"":t+""})),(i=ft.valHooks[this.type]||ft.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&i.set(this,e,"value")!==undefined||(this.value=e))})):e?(i=ft.valHooks[e.type]||ft.valHooks[e.nodeName.toLowerCase()])&&"get"in i&&(t=i.get(e,"value"))!==undefined?t:"string"==typeof(t=e.value)?t.replace(Ne,""):null==t?"":t:void 0}}),ft.extend({valHooks:{option:{get:function(t){var e=ft.find.attr(t,"value");return null!=e?e:ft.trim(ft.text(t)).replace(Re," ")}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,a="select-one"===t.type||o<0,r=a?null:[],s=a?o+1:i.length,l=o<0?s:a?o:0;l<s;l++)if(((n=i[l]).selected||l===o)&&(ct.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ft.nodeName(n.parentNode,"optgroup"))){if(e=ft(n).val(),a)return e;r.push(e)}return r},set:function(t,e){for(var n,i,o=t.options,a=ft.makeArray(e),r=o.length;r--;)if(i=o[r],-1<ft.inArray(ft.valHooks.option.get(i),a))try{i.selected=n=!0}catch(s){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),o}}}}),ft.each(["radio","checkbox"],function(){ft.valHooks[this]={set:function(t,e){if(ft.isArray(e))return t.checked=-1<ft.inArray(ft(t).val(),e)}},ct.checkOn||(ft.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Be,ze,Ue=ft.expr.attrHandle,je=/^(?:checked|selected)$/i,$e=ct.getSetAttribute,He=ct.input;ft.fn.extend({attr:function(t,e){return $t(this,ft.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){ft.removeAttr(this,t)})}}),ft.extend({attr:function(t,e,n){var i,o,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return"undefined"==typeof t.getAttribute?ft.prop(t,e,n):(1===a&&ft.isXMLDoc(t)||(e=e.toLowerCase(),o=ft.attrHooks[e]||(ft.expr.match.bool.test(e)?ze:Be)),n!==undefined?null===n?void ft.removeAttr(t,e):o&&"set"in o&&(i=o.set(t,n,e))!==undefined?i:(t.setAttribute(e,n+""),n):o&&"get"in o&&null!==(i=o.get(t,e))?i:null==(i=ft.find.attr(t,e))?undefined:i)},attrHooks:{type:{set:function(t,e){if(!ct.radioValue&&"radio"===e&&ft.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i,o=0,a=e&&e.match(Pt);if(a&&1===t.nodeType)for(;n=a[o++];)i=ft.propFix[n]||n,ft.expr.match.bool.test(n)?He&&$e||!je.test(n)?t[i]=!1:t[ft.camelCase("default-"+n)]=t[i]=!1:ft.attr(t,n,""),t.removeAttribute($e?n:i)}}),ze={set:function(t,e,n){return!1===e?ft.removeAttr(t,n):He&&$e||!je.test(n)?t.setAttribute(!$e&&ft.propFix[n]||n,n):t[ft.camelCase("default-"+n)]=t[n]=!0,n}},ft.each(ft.expr.match.bool.source.match(/\w+/g),function(t,e){var a=Ue[e]||ft.find.attr;He&&$e||!je.test(e)?Ue[e]=function(t,e,n){var i,o;return n||(o=Ue[e],Ue[e]=i,i=null!=a(t,e,n)?e.toLowerCase():null,Ue[e]=o),i}:Ue[e]=function(t,e,n){if(!n)return t[ft.camelCase("default-"+e)]?e.toLowerCase():null}}),He&&$e||(ft.attrHooks.value={set:function(t,e,n){if(!ft.nodeName(t,"input"))return Be&&Be.set(t,e,n);t.defaultValue=e}}),$e||(Be={set:function(t,e,n){var i=t.getAttributeNode(n);if(i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n))return e}},Ue.id=Ue.name=Ue.coords=function(t,e,n){var i;if(!n)return(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},ft.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);if(n&&n.specified)return n.value},set:Be.set},ft.attrHooks.contenteditable={set:function(t,e,n){Be.set(t,""!==e&&e,n)}},ft.each(["width","height"],function(t,n){ft.attrHooks[n]={set:function(t,e){if(""===e)return t.setAttribute(n,"auto"),e}}})),ct.style||(ft.attrHooks.style={get:function(t){return t.style.cssText||undefined},set:function(t,e){return t.style.cssText=e+""}});var We=/^(?:input|select|textarea|button|object)$/i,Ve=/^(?:a|area)$/i;ft.fn.extend({prop:function(t,e){return $t(this,ft.prop,t,e,1<arguments.length)},removeProp:function(e){return e=ft.propFix[e]||e,this.each(function(){try{this[e]=undefined,delete this[e]}catch(t){}})}}),ft.extend({prop:function(t,e,n){var i,o,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&ft.isXMLDoc(t)||(e=ft.propFix[e]||e,o=ft.propHooks[e]),n!==undefined?o&&"set"in o&&(i=o.set(t,n,e))!==undefined?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=ft.find.attr(t,"tabindex");return e?parseInt(e,10):We.test(t.nodeName)||Ve.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ct.hrefNormalized||ft.each(["href","src"],function(t,e){ft.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ct.optSelected||(ft.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),ft.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ft.propFix[this.toLowerCase()]=this}),ct.enctype||(ft.propFix.enctype="encoding");var Ye=/[\t\r\n\f]/g;ft.fn.extend({addClass:function(e){var t,n,i,o,a,r,s,l=0;if(ft.isFunction(e))return this.each(function(t){ft(this).addClass(e.call(this,t,W(this)))});if("string"==typeof e&&e)for(t=e.match(Pt)||[];n=this[l++];)if(o=W(n),i=1===n.nodeType&&(" "+o+" ").replace(Ye," ")){for(r=0;a=t[r++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");o!==(s=ft.trim(i))&&ft.attr(n,"class",s)}return this},removeClass:function(e){var t,n,i,o,a,r,s,l=0;if(ft.isFunction(e))return this.each(function(t){ft(this).removeClass(e.call(this,t,W(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Pt)||[];n=this[l++];)if(o=W(n),i=1===n.nodeType&&(" "+o+" ").replace(Ye," ")){for(r=0;a=t[r++];)for(;-1<i.indexOf(" "+a+" ");)i=i.replace(" "+a+" "," ");o!==(s=ft.trim(i))&&ft.attr(n,"class",s)}return this},toggleClass:function(o,e){var a=typeof o;return"boolean"==typeof e&&"string"===a?e?this.addClass(o):this.removeClass(o):ft.isFunction(o)?this.each(function(t){ft(this).toggleClass(o.call(this,t,W(this),e),e)}):this.each(function(){var t,e,n,i;if("string"===a)for(e=0,n=ft(this),i=o.match(Pt)||[];t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else o!==undefined&&"boolean"!==a||((t=W(this))&&ft._data(this,"__className__",t),ft.attr(this,"class",t||!1===o?"":ft._data(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+W(n)+" ").replace(Ye," ").indexOf(e))return!0;return!1}}),ft.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,n){ft.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),ft.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}});var qe=C.location,Ze=ft.now(),Ge=/\?/,Ke=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ft.parseJSON=function(t){if(C.JSON&&C.JSON.parse)return C.JSON.parse(t+"");var o,a=null,e=ft.trim(t+"");return e&&!ft.trim(e.replace(Ke,function(t,e,n,i){return o&&e&&(a=0),0===a?t:(o=n||e,a+=!i-!n,"")}))?Function("return "+e)():ft.error("Invalid JSON: "+t)},ft.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{C.DOMParser?e=(new C.DOMParser).parseFromString(t,"text/xml"):((e=new C.ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t))}catch(n){e=undefined}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||ft.error("Invalid XML: "+t),e};var Je=/#.*$/,Xe=/([?&])_=[^&]*/,Qe=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,tn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,en=/^(?:GET|HEAD)$/,nn=/^\/\//,on=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,an={},rn={},sn="*/".concat("*"),ln=qe.href,un=on.exec(ln.toLowerCase())||[];ft.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ln,type:"GET",isLocal:tn.test(un[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":sn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ft.parseJSON,"text xml":ft.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?q(q(t,ft.ajaxSettings),e):q(ft.ajaxSettings,t)},ajaxPrefilter:V(an),ajaxTransport:V(rn),ajax:function(t,e){function n(t,e,n,i){var o,a,r,s,l,u=e;2!==w&&(w=2,h&&C.clearTimeout(h),p=undefined,c=i||"",x.readyState=0<t?4:0,o=200<=t&&t<300||304===t,n&&(s=Z(m,x,n)),s=G(m,s,x,o),o?(m.ifModified&&((l=x.getResponseHeader("Last-Modified"))&&(ft.lastModified[d]=l),(l=x.getResponseHeader("etag"))&&(ft.etag[d]=l)),204===t||"HEAD"===m.type?u="nocontent":304===t?u="notmodified":(u=s.state,a=s.data,o=!(r=s.error))):(r=u,!t&&u||(u="error",t<0&&(t=0))),x.status=t,x.statusText=(e||u)+"",o?y.resolveWith(g,[a,u,x]):y.rejectWith(g,[x,u,r]),x.statusCode(b),b=undefined,f&&v.trigger(o?"ajaxSuccess":"ajaxError",[x,m,o?a:r]),_.fireWith(g,[x,u]),f&&(v.trigger("ajaxComplete",[x,m]),--ft.active||ft.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=undefined),e=e||{};var i,o,d,c,h,f,p,a,m=ft.ajaxSetup({},e),g=m.context||m,v=m.context&&(g.nodeType||g.jquery)?ft(g):ft.event,y=ft.Deferred(),_=ft.Callbacks("once memory"),b=m.statusCode||{},r={},s={},w=0,l="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===w){if(!a)for(a={};e=Qe.exec(c);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===w?c:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return w||(t=s[n]=s[n]||t,r[t]=e),this},overrideMimeType:function(t){return w||(m.mimeType=t),this},statusCode:function(t){var e;if(t)if(w<2)for(e in t)b[e]=[b[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||l;return p&&p.abort(e),n(0,e),this}};if(y.promise(x).complete=_.add,x.success=x.done,x.error=x.fail,m.url=((t||m.url||ln)+"").replace(Je,"").replace(nn,un[1]+"//"),m.type=e.method||e.type||m.method||m.type,m.dataTypes=ft.trim(m.dataType||"*").toLowerCase().match(Pt)||[""],null==m.crossDomain&&(i=on.exec(m.url.toLowerCase()),m.crossDomain=!(!i||i[1]===un[1]&&i[2]===un[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(un[3]||("http:"===un[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=ft.param(m.data,m.traditional)),Y(an,m,e,x),2===w)return x;for(o in(f=ft.event&&m.global)&&0==ft.active++&&ft.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!en.test(m.type),d=m.url,m.hasContent||(m.data&&(d=m.url+=(Ge.test(d)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=Xe.test(d)?d.replace(Xe,"$1_="+Ze++):d+(Ge.test(d)?"&":"?")+"_="+Ze++)),m.ifModified&&(ft.lastModified[d]&&x.setRequestHeader("If-Modified-Since",ft.lastModified[d]),ft.etag[d]&&x.setRequestHeader("If-None-Match",ft.etag[d])),(m.data&&m.hasContent&&!1!==m.contentType||e.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+sn+"; q=0.01":""):m.accepts["*"]),m.headers)x.setRequestHeader(o,m.headers[o]);if(m.beforeSend&&(!1===m.beforeSend.call(g,x,m)||2===w))return x.abort();for(o in l="abort",{success:1,error:1,complete:1})x[o](m[o]);if(p=Y(rn,m,e,x)){if(x.readyState=1,f&&v.trigger("ajaxSend",[x,m]),2===w)return x;m.async&&0<m.timeout&&(h=C.setTimeout(function(){x.abort("timeout")},m.timeout));try{w=1,p.send(r,n)}catch(u){if(!(w<2))throw u;n(-1,u)}}else n(-1,"No Transport");return x},getJSON:function(t,e,n){return ft.get(t,e,n,"json")},getScript:function(t,e){return ft.get(t,undefined,e,"script")}}),ft.each(["get","post"],function(t,o){ft[o]=function(t,e,n,i){return ft.isFunction(e)&&(i=i||n,n=e,e=undefined),ft.ajax(ft.extend({url:t,type:o,dataType:i,data:e,success:n},ft.isPlainObject(t)&&t))}}),ft._evalUrl=function(t){return ft.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},ft.fn.extend({wrapAll:function(e){if(ft.isFunction(e))return this.each(function(t){ft(this).wrapAll(e.call(this,t))});if(this[0]){var t=ft(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(n){return ft.isFunction(n)?this.each(function(t){ft(this).wrapInner(n.call(this,t))}):this.each(function(){var t=ft(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=ft.isFunction(e);return this.each(function(t){ft(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(){return this.parent().each(function(){ft.nodeName(this,"body")||ft(this).replaceWith(this.childNodes)}).end()}}),ft.expr.filters.hidden=function(t){return ct.reliableHiddenOffsets()?t.offsetWidth<=0&&t.offsetHeight<=0&&!t.getClientRects().length:J(t)},ft.expr.filters.visible=function(t){return!ft.expr.filters.hidden(t)};var dn=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,fn=/^(?:submit|button|image|reset|file)$/i,pn=/^(?:input|select|textarea|keygen)/i;ft.param=function(t,e){var n,i=[],o=function(t,e){e=ft.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(e===undefined&&(e=ft.ajaxSettings&&ft.ajaxSettings.traditional),ft.isArray(t)||t.jquery&&!ft.isPlainObject(t))ft.each(t,function(){o(this.name,this.value)});else for(n in t)X(n,t[n],e,o);return i.join("&").replace(dn,"+")},ft.fn.extend({serialize:function(){return ft.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ft.prop(this,"elements");return t?ft.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ft(this).is(":disabled")&&pn.test(this.nodeName)&&!fn.test(t)&&(this.checked||!Ht.test(t))}).map(function(t,e){var n=ft(this).val();return null==n?null:ft.isArray(n)?ft.map(n,function(t){return{name:e.name,value:t.replace(hn,"\r\n")}}):{name:e.name,value:n.replace(hn,"\r\n")}}).get()}}),ft.ajaxSettings.xhr=C.ActiveXObject!==undefined?function(){return this.isLocal?tt():8<it.documentMode?Q():/^(get|post|head|put|delete|options)$/i.test(this.type)&&Q()||tt()}:Q;var mn=0,gn={},vn=ft.ajaxSettings.xhr();C.attachEvent&&C.attachEvent("onunload",function(){for(var t in gn)gn[t](undefined,!0)}),ct.cors=!!vn&&"withCredentials"in vn,(vn=ct.ajax=!!vn)&&ft.ajaxTransport(function(u){var d;if(!u.crossDomain||ct.cors)return{send:function(t,r){var e,s=u.xhr(),l=++mn;if(s.open(u.type,u.url,u.async,u.username,u.password),u.xhrFields)for(e in u.xhrFields)s[e]=u.xhrFields[e];for(e in u.mimeType&&s.overrideMimeType&&s.overrideMimeType(u.mimeType),u.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)t[e]!==undefined&&s.setRequestHeader(e,t[e]+"");s.send(u.hasContent&&u.data||null),d=function(t,e){var n,i,o;if(d&&(e||4===s.readyState))if(delete gn[l],d=undefined,s.onreadystatechange=ft.noop,e)4!==s.readyState&&s.abort();else{o={},n=s.status,"string"==typeof s.responseText&&(o.text=s.responseText);try{i=s.statusText}catch(a){i=""}n||!u.isLocal||u.crossDomain?1223===n&&(n=204):n=o.text?200:404}o&&r(n,i,o,s.getAllResponseHeaders())},u.async?4===s.readyState?C.setTimeout(d):s.onreadystatechange=gn[l]=d:d()},abort:function(){d&&d(undefined,!0)}}}),ft.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return ft.globalEval(t),t}}}),ft.ajaxPrefilter("script",function(t){t.cache===undefined&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),ft.ajaxTransport("script",function(e){if(e.crossDomain){var i,o=it.head||ft("head")[0]||it.documentElement;return{send:function(t,n){(i=it.createElement("script")).async=!0,e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(t,e){(e||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,e||n(200,"success"))},o.insertBefore(i,o.firstChild)},abort:function(){i&&i.onload(undefined,!0)}}}});var yn=[],_n=/(=)\?(?=&|$)|\?\?/;ft.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=yn.pop()||ft.expando+"_"+Ze++;return this[t]=!0,t}}),ft.ajaxPrefilter("json jsonp",function(t,e,n){var i,o,a,r=!1!==t.jsonp&&(_n.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&_n.test(t.data)&&"data");if(r||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=ft.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(_n,"$1"+i):!1!==t.jsonp&&(t.url+=(Ge.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||ft.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=C[i],C[i]=function(){a=arguments},n.always(function(){o===undefined?ft(C).removeProp(i):C[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,yn.push(i)),a&&ft.isFunction(o)&&o(a[0]),a=o=undefined}),"script"}),ft.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||it;var i=xt.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=m([t],e,o),o&&o.length&&ft(o).remove(),ft.merge([],i.childNodes))};var bn=ft.fn.load;ft.fn.load=function(t,e,n){if("string"!=typeof t&&bn)return bn.apply(this,arguments);var i,o,a,r=this,s=t.indexOf(" ");return-1<s&&(i=ft.trim(t.slice(s,t.length)),t=t.slice(0,s)),ft.isFunction(e)?(n=e,e=undefined):e&&"object"==typeof e&&(o="POST"),0<r.length&&ft.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done(function(t){a=arguments,r.html(i?ft("<div>").append(ft.parseHTML(t)).find(i):t)}).always(n&&function(t,e){r.each(function(){n.apply(this,a||[t.responseText,e,t])})}),this},ft.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ft.fn[e]=function(t){return this.on(e,t)}}),ft.expr.filters.animated=function(e){return ft.grep(ft.timers,function(t){return e===t.elem}).length},ft.offset={setOffset:function(t,e,n){var i,o,a,r,s,l,u=ft.css(t,"position"),d=ft(t),c={};"static"===u&&(t.style.position="relative"),s=d.offset(),a=ft.css(t,"top"),l=ft.css(t,"left"),("absolute"===u||"fixed"===u)&&-1<ft.inArray("auto",[a,l])?(r=(i=d.position()).top,o=i.left):(r=parseFloat(a)||0,o=parseFloat(l)||0),ft.isFunction(e)&&(e=e.call(t,n,ft.extend({},s))),null!=e.top&&(c.top=e.top-s.top+r),null!=e.left&&(c.left=e.left-s.left+o),"using"in e?e.using.call(t,c):d.css(c)}},ft.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){ft.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},o=this[0],a=o&&o.ownerDocument;return a?(t=a.documentElement,ft.contains(t,o)?("undefined"!=typeof o.getBoundingClientRect&&(i=o.getBoundingClientRect()),n=et(a),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i):void 0},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===ft.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ft.nodeName(t[0],"html")||(n=t.offset()),n.top+=ft.css(t[0],"borderTopWidth",!0),n.left+=ft.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-ft.css(i,"marginTop",!0),left:e.left-n.left-ft.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&!ft.nodeName(t,"html")&&"static"===ft.css(t,"position");)t=t.offsetParent;return t||me})}}),ft.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,o){var a=/Y/.test(o);ft.fn[e]=function(t){return $t(this,function(t,e,n){var i=et(t);if(n===undefined)return i?o in i?i[o]:i.document.documentElement[e]:t[e];i?i.scrollTo(a?ft(i).scrollLeft():n,a?n:ft(i).scrollTop()):t[e]=n},e,t,arguments.length,null)}}),ft.each(["top","left"],function(t,n){ft.cssHooks[n]=E(ct.pixelPosition,function(t,e){if(e)return e=ve(t,n),fe.test(e)?ft(t).position()[n]+"px":e})}),ft.each({Height:"height",Width:"width"},function(a,r){ft.each({padding:"inner"+a,content:r,"":"outer"+a},function(i,t){ft.fn[t]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),o=i||(!0===t||!0===e?"margin":"border");return $t(this,function(t,e,n){var i;return ft.isWindow(t)?t.document.documentElement["client"+a]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+a],i["scroll"+a],t.body["offset"+a],i["offset"+a],i["client"+a])):n===undefined?ft.css(t,e,o):ft.style(t,e,n,o)},r,n?t:undefined,n,null)}})}),ft.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),ft.fn.size=function(){return this.length},ft.fn.andSelf=ft.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ft});var wn=C.jQuery,xn=C.$;return ft.noConflict=function(t){return C.$===ft&&(C.$=xn),t&&C.jQuery===ft&&(C.jQuery=wn),ft},t||(C.jQuery=C.$=ft),ft}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(c){var n;c.extend(c.fn,{validate:function(t){if(this.length){var i=c.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new c.validator(t,this[0]),c.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(t){i.submitButton=t.currentTarget,c(this).hasClass("cancel")&&(i.cancelSubmit=!0),c(this).attr("formnovalidate")!==undefined&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(n){function t(){var t,e;return i.submitButton&&(i.settings.submitHandler||i.formSubmitted)&&(t=c("<input type='hidden'/>").attr("name",i.submitButton.name).val(c(i.submitButton).val()).appendTo(i.currentForm)),!(i.settings.submitHandler&&!i.settings.debug)||(e=i.settings.submitHandler.call(i,i.currentForm,n),t&&t.remove(),e!==undefined&&e)}return i.settings.debug&&n.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,t()):i.form()?i.pendingRequest?!(i.formSubmitted=!0):t():(i.focusInvalid(),!1)})),i)}t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,e,n;return c(this[0]).is("form")?t=this.validate().form():(n=[],t=!0,e=c(this[0].form).validate(),this.each(function(){(t=e.element(this)&&t)||(n=n.concat(e.errorList))}),e.errorList=n),t},rules:function(t,e){var n,i,o,a,r,s,l=this[0],u=void 0!==this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=l&&(!l.form&&u&&(l.form=this.closest("form")[0],l.name=this.attr("name")),null!=l.form)){if(t)switch(i=(n=c.data(l.form,"validator").settings).rules,o=c.validator.staticRules(l),t){case"add":c.extend(o,c.validator.normalizeRule(e)),delete o.messages,i[l.name]=o,e.messages&&(n.messages[l.name]=c.extend(n.messages[l.name],e.messages));break;case"remove":return e?(s={},c.each(e.split(/\s/),function(t,e){s[e]=o[e],delete o[e]}),s):(delete i[l.name],o)}return(a=c.validator.normalizeRules(c.extend({},c.validator.classRules(l),c.validator.attributeRules(l),c.validator.dataRules(l),c.validator.staticRules(l)),l)).required&&(r=a.required,delete a.required,a=c.extend({required:r},a)),a.remote&&(r=a.remote,delete a.remote,a=c.extend(a,{remote:r})),a}}}),c.extend(c.expr.pseudos||c.expr[":"],{blank:function(t){return!c.trim(""+c(t).val())},filled:function(t){var e=c(t).val();return null!==e&&!!c.trim(""+e)},unchecked:function(t){return!c(t).prop("checked")}}),c.validator=function(t,e){this.settings=c.extend(!0,{},c.validator.defaults,t),this.currentForm=e,this.init()},c.validator.format=function(n,t){return 1===arguments.length?function(){var t=c.makeArray(arguments);return t.unshift(n),c.validator.format.apply(this,t)}:(t===undefined||(2<arguments.length&&t.constructor!==Array&&(t=c.makeArray(arguments).slice(1)),t.constructor!==Array&&(t=[t]),c.each(t,function(t,e){n=n.replace(new RegExp("\\{"+t+"\\}","g"),function(){return e})})),n)},c.extend(c.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:c([]),errorLabelContainer:c([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){var n=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===e.which&&""===this.elementValue(t)||-1!==c.inArray(e.keyCode,n)||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(t,e,n){"radio"===t.type?this.findByName(t.name).addClass(e).removeClass(n):c(t).addClass(e).removeClass(n)},unhighlight:function(t,e,n){"radio"===t.type?this.findByName(t.name).removeClass(e).addClass(n):c(t).removeClass(e).addClass(n)}},setDefaults:function(t){c.extend(c.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:c.validator.format("Please enter no more than {0} characters."),minlength:c.validator.format("Please enter at least {0} characters."),rangelength:c.validator.format("Please enter a value between {0} and {1} characters long."),range:c.validator.format("Please enter a value between {0} and {1}."),max:c.validator.format("Please enter a value less than or equal to {0}."),min:c.validator.format("Please enter a value greater than or equal to {0}."),step:c.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var e=void 0!==c(this).attr("contenteditable")&&"false"!==c(this).attr("contenteditable");if(!this.form&&e&&(this.form=c(this).closest("form")[0],this.name=c(this).attr("name")),a===this.form){var n=c.data(this.form,"validator"),i="on"+t.type.replace(/^validate/,""),o=n.settings;o[i]&&!c(this).is(o.ignore)&&o[i].call(n,this,t)}}this.labelContainer=c(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||c(this.currentForm),this.containers=c(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,a=this.currentForm,i=this.groups={};c.each(this.settings.groups,function(n,t){"string"==typeof t&&(t=t.split(/\s/)),c.each(t,function(t,e){i[e]=n})}),n=this.settings.rules,c.each(n,function(t,e){n[t]=c.validator.normalizeRule(e)}),c(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&c(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),c.extend(this.submitted,this.errorMap),this.invalid=c.extend({},this.errorMap),this.valid()||c(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(t){var e,n,i=this.clean(t),o=this.validationTargetFor(i),a=this,r=!0;return o===undefined?delete this.invalid[i.name]:(this.prepareElement(o),this.currentElements=c(o),(n=this.groups[o.name])&&c.each(this.groups,function(t,e){e===n&&t!==o.name&&(i=a.validationTargetFor(a.clean(a.findByName(t))))&&i.name in a.invalid&&(a.currentElements.push(i),r=a.check(i)&&r)}),e=!1!==this.check(o),r=r&&e,this.invalid[o.name]=!e,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c(t).attr("aria-invalid",!e)),r},showErrors:function(e){if(e){var n=this;c.extend(this.errorMap,e),this.errorList=c.map(this.errorMap,function(t,e){return{message:t,element:n.findByName(e)[0]}}),this.successList=c.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){c.fn.resetForm&&c(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(t){var e;if(this.settings.unhighlight)for(e=0;t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,""),this.findByName(t[e].name).removeClass(this.settings.validClass);else t.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,n=0;for(e in t)t[e]!==undefined&&null!==t[e]&&!1!==t[e]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{c(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===c.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var n=this,i={};return c(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var t=this.name||c(this).attr("name"),e=void 0!==c(this).attr("contenteditable")&&"false"!==c(this).attr("contenteditable");return!t&&n.settings.debug&&window.console&&console.error("%o has no name assigned",this),e&&(this.form=c(this).closest("form")[0],this.name=t),this.form===n.currentForm&&(!(t in i||!n.objectLength(c(this).rules()))&&(i[t]=!0))})},clean:function(t){return c(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return c(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=c([]),
this.toHide=c([])},reset:function(){this.resetInternals(),this.currentElements=c([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(t){var e,n,i=c(t),o=t.type,a=void 0!==i.attr("contenteditable")&&"false"!==i.attr("contenteditable");return"radio"===o||"checkbox"===o?this.findByName(t.name).filter(":checked").val():"number"===o&&"undefined"!=typeof t.validity?t.validity.badInput?"NaN":i.val():(e=a?i.text():i.val(),"file"===o?"C:\\fakepath\\"===e.substr(0,12)?e.substr(12):0<=(n=e.lastIndexOf("/"))?e.substr(n+1):0<=(n=e.lastIndexOf("\\"))?e.substr(n+1):e:"string"==typeof e?e.replace(/\r/g,""):e)},check:function(t){t=this.validationTargetFor(this.clean(t));var e,n,i,o,a=c(t).rules(),r=c.map(a,function(t,e){return e}).length,s=!1,l=this.elementValue(t);for(n in"function"==typeof a.normalizer?o=a.normalizer:"function"==typeof this.settings.normalizer&&(o=this.settings.normalizer),o&&(l=o.call(t,l),delete a.normalizer),a){i={method:n,parameters:a[n]};try{if("dependency-mismatch"===(e=c.validator.methods[n].call(this,l,t,i.parameters))&&1===r){s=!0;continue}if(s=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,i),!1}catch(u){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+i.method+"' method.",u),u instanceof TypeError&&(u.message+=".  Exception occurred when checking element "+t.id+", check the '"+i.method+"' method."),u}}if(!s)return this.objectLength(a)&&this.successList.push(t),!0},customDataMessage:function(t,e){return c(t).data("msg"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase())||c(t).data("msg")},customMessage:function(t,e){var n=this.settings.messages[t];return n&&(n.constructor===String?n:n[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==undefined)return arguments[t];return undefined},defaultMessage:function(t,e){"string"==typeof e&&(e={method:e});var n=this.findDefined(this.customMessage(t.name,e.method),this.customDataMessage(t,e.method),!this.settings.ignoreTitle&&t.title||undefined,c.validator.messages[e.method],"<strong>Warning: No message defined for "+t.name+"</strong>"),i=/\$?\{(\d+)\}/g;return"function"==typeof n?n=n.call(this,e.parameters,t):i.test(n)&&(n=c.validator.format(n.replace(i,"{$1}"),e.parameters)),n},formatAndAdd:function(t,e){var n=this.defaultMessage(t,e);this.errorList.push({message:n,element:t,method:e.method}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,n;for(t=0;this.errorList[t];t++)n=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return c(this.errorList).map(function(){return this.element})},showLabel:function(t,e){var n,i,o,a,r=this.errorsFor(t),s=this.idOrName(t),l=c(t).attr("aria-describedby");r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(e)):(n=r=c("<"+this.settings.errorElement+">").attr("id",s+"-error").addClass(this.settings.errorClass).html(e||""),this.settings.wrapper&&(n=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement.call(this,n,c(t)):n.insertAfter(t),r.is("label")?r.attr("for",s):0===r.parents("label[for='"+this.escapeCssMeta(s)+"']").length&&(o=r.attr("id"),l?l.match(new RegExp("\\b"+this.escapeCssMeta(o)+"\\b"))||(l+=" "+o):l=o,c(t).attr("aria-describedby",l),(i=this.groups[t.name])&&(a=this,c.each(a.groups,function(t,e){e===i&&c("[name='"+a.escapeCssMeta(t)+"']",a.currentForm).attr("aria-describedby",r.attr("id"))})))),!e&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,t)),this.toShow=this.toShow.add(r)},errorsFor:function(t){var e=this.escapeCssMeta(this.idOrName(t)),n=c(t).attr("aria-describedby"),i="label[for='"+e+"'], label[for='"+e+"'] *";return n&&(i=i+", #"+this.escapeCssMeta(n).replace(/\s+/g,", #")),this.errors().filter(i)},escapeCssMeta:function(t){return t.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),c(t).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(t){return c(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,e){switch(e.nodeName.toLowerCase()){case"select":return c("option:selected",e).length;case"input":if(this.checkable(e))return this.findByName(e.name).filter(":checked").length}return t.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{"boolean":function(t){return t},string:function(t,e){return!!c(t,e.form).length},"function":function(t,e){return t(e)}},optional:function(t){var e=this.elementValue(t);return!c.validator.methods.required.call(this,e,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,c(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,e){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],c(t).removeClass(this.settings.pendingClass),e&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(c(this.currentForm).submit(),this.submitButton&&c("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!e&&0===this.pendingRequest&&this.formSubmitted&&(c(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,e){return e="string"==typeof e&&e||"remote",c.data(t,"previousValue")||c.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:e})})},destroy:function(){this.resetForm(),c(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,e){t.constructor===String?this.classRuleSettings[t]=e:c.extend(this.classRuleSettings,t)},classRules:function(t){var e={},n=c(t).attr("class");return n&&c.each(n.split(" "),function(){this in c.validator.classRuleSettings&&c.extend(e,c.validator.classRuleSettings[this])}),e},normalizeAttributeRule:function(t,e,n,i){/min|max|step/.test(n)&&(null===e||/number|range|text/.test(e))&&(i=Number(i),isNaN(i)&&(i=undefined)),i||0===i?t[n]=i:e===n&&"range"!==e&&(t[n]=!0)},attributeRules:function(t){var e,n,i={},o=c(t),a=t.getAttribute("type");for(e in c.validator.methods)"required"===e?(""===(n=t.getAttribute(e))&&(n=!0),n=!!n):n=o.attr(e),this.normalizeAttributeRule(i,a,e,n);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(t){var e,n,i={},o=c(t),a=t.getAttribute("type");for(e in c.validator.methods)""===(n=o.data("rule"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()))&&(n=!0),this.normalizeAttributeRule(i,a,e,n);return i},staticRules:function(t){var e={},n=c.data(t.form,"validator");return n.settings.rules&&(e=c.validator.normalizeRule(n.settings.rules[t.name])||{}),e},normalizeRules:function(i,o){return c.each(i,function(t,e){if(!1!==e){if(e.param||e.depends){var n=!0;switch(typeof e.depends){case"string":n=!!c(e.depends,o.form).length;break;case"function":n=e.depends.call(o,o)}n?i[t]=e.param===undefined||e.param:(c.data(o.form,"validator").resetElements(c(o)),delete i[t])}}else delete i[t]}),c.each(i,function(t,e){i[t]=c.isFunction(e)&&"normalizer"!==t?e(o):e}),c.each(["minlength","maxlength"],function(){i[this]&&(i[this]=Number(i[this]))}),c.each(["rangelength","range"],function(){var t;i[this]&&(c.isArray(i[this])?i[this]=[Number(i[this][0]),Number(i[this][1])]:"string"==typeof i[this]&&(t=i[this].replace(/[\[\]]/g,"").split(/[\s,]+/),i[this]=[Number(t[0]),Number(t[1])]))}),c.validator.autoCreateRanges&&(null!=i.min&&null!=i.max&&(i.range=[i.min,i.max],delete i.min,delete i.max),null!=i.minlength&&null!=i.maxlength&&(i.rangelength=[i.minlength,i.maxlength],delete i.minlength,delete i.maxlength)),i},normalizeRule:function(t){if("string"==typeof t){var e={};c.each(t.split(/\s/),function(){e[this]=!0}),t=e}return t},addMethod:function(t,e,n){c.validator.methods[t]=e,c.validator.messages[t]=n!==undefined?n:c.validator.messages[t],e.length<3&&c.validator.addClassRules(t,c.validator.normalizeRule(t))},methods:{required:function(t,e,n){if(!this.depend(n,e))return"dependency-mismatch";if("select"!==e.nodeName.toLowerCase())return this.checkable(e)?0<this.getLength(t,e):t!==undefined&&null!==t&&0<t.length;var i=c(e).val();return i&&0<i.length},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t)},date:(n=!1,function(t,e){return n||(n=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())}),dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},minlength:function(t,e,n){var i=c.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||n<=i},maxlength:function(t,e,n){var i=c.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||i<=n},rangelength:function(t,e,n){var i=c.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||i>=n[0]&&i<=n[1]},min:function(t,e,n){return this.optional(e)||n<=t},max:function(t,e,n){return this.optional(e)||t<=n},range:function(t,e,n){return this.optional(e)||t>=n[0]&&t<=n[1]},step:function(t,e,n){var i,o=c(e).attr("type"),a="Step attribute on input type "+o+" is not supported.",r=["text","number","range"],s=new RegExp("\\b"+o+"\\b"),l=function(t){var e=(""+t).match(/(?:\.(\d+))?$/);return e&&e[1]?e[1].length:0},u=function(t){return Math.round(t*Math.pow(10,i))},d=!0;if(o&&!s.test(r.join()))throw new Error(a);return i=l(n),(l(t)>i||u(t)%u(n)!=0)&&(d=!1),this.optional(e)||d},equalTo:function(t,e,n){var i=c(n);return this.settings.onfocusout&&i.not(".validate-equalTo-blur").length&&i.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){c(e).valid()}),t===i.val()},remote:function(a,r,t,s){if(this.optional(r))return"dependency-mismatch";s="string"==typeof s&&s||"remote";var l,e,n,u=this.previousValue(r,s);return this.settings.messages[r.name]||(this.settings.messages[r.name]={}),u.originalMessage=u.originalMessage||this.settings.messages[r.name][s],this.settings.messages[r.name][s]=u.message,t="string"==typeof t&&{url:t}||t,n=c.param(c.extend({data:a},t.data)),u.old===n?u.valid:(u.old=n,(l=this).startRequest(r),(e={})[r.name]=a,c.ajax(c.extend(!0,{mode:"abort",port:"validate"+r.name,dataType:"json",data:e,context:l.currentForm,success:function(t){var e,n,i,o=!0===t||"true"===t;l.settings.messages[r.name][s]=u.originalMessage,o?(i=l.formSubmitted,l.resetInternals(),l.toHide=l.errorsFor(r),l.formSubmitted=i,l.successList.push(r),l.invalid[r.name]=!1,l.showErrors()):(e={},n=t||l.defaultMessage(r,{method:s,parameters:a}),e[r.name]=u.message=n,l.invalid[r.name]=!0,l.showErrors(e)),u.valid=o,l.stopRequest(r,o)}},t)),"pending")}}});var i,o={};return c.ajaxPrefilter?c.ajaxPrefilter(function(t,e,n){var i=t.port;"abort"===t.mode&&(o[i]&&o[i].abort(),o[i]=n)}):(i=c.ajax,c.ajax=function(t){var e=("mode"in t?t:c.ajaxSettings).mode,n=("port"in t?t:c.ajaxSettings).port;return"abort"===e?(o[n]&&o[n].abort(),o[n]=i.apply(this,arguments),o[n]):i.apply(this,arguments)}),c}),function(t){"function"==typeof define&&define.amd?define(["jquery","./jquery.validate"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(l){return function(){function a(t){return t.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[.(),;:!?%#$'\"_+=\/\-\u201c\u201d\u2019]*/g,"")}l.validator.addMethod("maxWords",function(t,e,n){return this.optional(e)||a(t).match(/\b\w+\b/g).length<=n},l.validator.format("Please enter {0} words or less.")),l.validator.addMethod("minWords",function(t,e,n){return this.optional(e)||a(t).match(/\b\w+\b/g).length>=n},l.validator.format("Please enter at least {0} words.")),l.validator.addMethod("rangeWords",function(t,e,n){var i=a(t),o=/\b\w+\b/g;return this.optional(e)||i.match(o).length>=n[0]&&i.match(o).length<=n[1]},l.validator.format("Please enter between {0} and {1} words."))}(),l.validator.addMethod("abaRoutingNumber",function(t){var e=0,n=t.split(""),i=n.length;if(9!==i)return!1;for(var o=0;o<i;o+=3)e+=3*parseInt(n[o],10)+7*parseInt(n[o+1],10)+parseInt(n[o+2],10);return 0!==e&&e%10==0},"Please enter a valid routing number."),l.validator.addMethod("accept",function(t,e,n){var i,o,a="string"==typeof n?n.replace(/\s/g,""):"image/*",r=this.optional(e);if(r)return r;if("file"===l(e).attr("type")&&(a=a.replace(/[\-\[\]\/\{\}\(\)\+\?\.\\\^\$\|]/g,"\\$&").replace(/,/g,"|").replace(/\/\*/g,"/.*"),e.files&&e.files.length))for(o=new RegExp(".?("+a+")$","i"),i=0;i<e.files.length;i++)if(!e.files[i].type.match(o))return!1;return!0},l.validator.format("Please enter a value with a valid mimetype.")),l.validator.addMethod("alphanumeric",function(t,e){return this.optional(e)||/^\w+$/i.test(t)},"Letters, numbers, and underscores only please"),l.validator.addMethod("bankaccountNL",function(t,e){if(this.optional(e))return!0;if(!/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(t))return!1;var n,i=t.replace(/ /g,""),o=0,a=i.length;for(n=0;n<a;n++)o+=(a-n)*i.substring(n,n+1);return o%11==0},"Please specify a valid bank account number"),l.validator.addMethod("bankorgiroaccountNL",function(t,e){return this.optional(e)||l.validator.methods.bankaccountNL.call(this,t,e)||l.validator.methods.giroaccountNL.call(this,t,e)},"Please specify a valid bank or giro account number"),l.validator.addMethod("bic",function(t,e){return this.optional(e)||/^([A-Z]{6}[A-Z2-9][A-NP-Z1-9])(X{3}|[A-WY-Z0-9][A-Z0-9]{2})?$/.test(t.toUpperCase())},"Please specify a valid BIC code"),l.validator.addMethod("cifES",function(t,e){"use strict";function n(t){return t%2==0}if(this.optional(e))return!0;var i,o,a,r,s=new RegExp(/^([ABCDEFGHJKLMNPQRSUVW])(\d{7})([0-9A-J])$/gi),l=t.substring(0,1),u=t.substring(1,8),d=t.substring(8,9),c=0,h=0;if(9!==t.length||!s.test(t))return!1;for(i=0;i<u.length;i++)o=parseInt(u[i],10),n(i)?h+=(o*=2)<10?o:o-9:c+=o;return a=(10-(c+h).toString().substr(-1)).toString(),a=9<parseInt(a,10)?"0":a,r="JABCDEFGHI".substr(a,1).toString(),l.match(/[ABEH]/)?d===a:l.match(/[KPQS]/)?d===r:d===a||d===r},"Please specify a valid CIF number."),l.validator.addMethod("cnhBR",function(t){if(11!==(t=t.replace(/([~!@#$%^&*()_+=`{}\[\]\-|\\:;'<>,.\/? ])+/g,"")).length)return!1;var e,n,i,o,a,r=0,s=0;if(e=t.charAt(0),new Array(12).join(e)===t)return!1;for(a=9,o=0;o<9;++o,--a)r+=+t.charAt(o)*a;for(10<=(n=r%11)&&(n=0,s=2),a=1,o=r=0;o<9;++o,++a)r+=+t.charAt(o)*a;return 10<=(i=r%11)?i=0:i-=s,String(n).concat(i)===t.substr(-2)},"Please specify a valid CNH number"),l.validator.addMethod("cnpjBR",function(t,e){"use strict";if(this.optional(e))return!0;if(14!==(t=t.replace(/[^\d]+/g,"")).length)return!1;if("00000000000000"===t||"11111111111111"===t||"22222222222222"===t||"33333333333333"===t||"44444444444444"===t||"55555555555555"===t||"66666666666666"===t||"77777777777777"===t||"88888888888888"===t||"99999999999999"===t)return!1;for(var n=t.length-2,i=t.substring(0,n),o=t.substring(n),a=0,r=n-7,s=n;1<=s;s--)a+=i.charAt(n-s)*r--,r<2&&(r=9);var l=a%11<2?0:11-a%11;if(l!==parseInt(o.charAt(0),10))return!1;n+=1,i=t.substring(0,n),a=0,r=n-7;for(var u=n;1<=u;u--)a+=i.charAt(n-u)*r--,r<2&&(r=9);return(l=a%11<2?0:11-a%11)===parseInt(o.charAt(1),10)},"Please specify a CNPJ value number"),l.validator.addMethod("cpfBR",function(t,e){"use strict";if(this.optional(e))return!0;if(11!==(t=t.replace(/([~!@#$%^&*()_+=`{}\[\]\-|\\:;'<>,.\/? ])+/g,"")).length)return!1;var n,i,o,a,r=0;if(n=parseInt(t.substring(9,10),10),i=parseInt(t.substring(10,11),10),o=function(t,e){var n=10*t%11;return 10!==n&&11!==n||(n=0),n===e},""===t||"00000000000"===t||"11111111111"===t||"22222222222"===t||"33333333333"===t||"44444444444"===t||"55555555555"===t||"66666666666"===t||"77777777777"===t||"88888888888"===t||"99999999999"===t)return!1;for(a=1;a<=9;a++)r+=parseInt(t.substring(a-1,a),10)*(11-a);if(o(r,n)){for(r=0,a=1;a<=10;a++)r+=parseInt(t.substring(a-1,a),10)*(12-a);return o(r,i)}return!1},"Please specify a valid CPF number"),l.validator.addMethod("creditcard",function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var n,i,o=0,a=0,r=!1;if((t=t.replace(/\D/g,"")).length<13||19<t.length)return!1;for(n=t.length-1;0<=n;n--)i=t.charAt(n),a=parseInt(i,10),r&&9<(a*=2)&&(a-=9),o+=a,r=!r;return o%10==0},"Please enter a valid credit card number."),l.validator.addMethod("creditcardtypes",function(t,e,n){if(/[^0-9\-]+/.test(t))return!1;t=t.replace(/\D/g,"");var i=0;return n.mastercard&&(i|=1),n.visa&&(i|=2),n.amex&&(i|=4),n.dinersclub&&(i|=8),n.enroute&&(i|=16),n.discover&&(i|=32),n.jcb&&(i|=64),n.unknown&&(i|=128),n.all&&(i=255),1&i&&(/^(5[12345])/.test(t)||/^(2[234567])/.test(t))?16===t.length:2&i&&/^(4)/.test(t)?16===t.length:4&i&&/^(3[47])/.test(t)?15===t.length:8&i&&/^(3(0[012345]|[68]))/.test(t)?14===t.length:16&i&&/^(2(014|149))/.test(t)?15===t.length:32&i&&/^(6011)/.test(t)?16===t.length:64&i&&/^(3)/.test(t)?16===t.length:64&i&&/^(2131|1800)/.test(t)?15===t.length:!!(128&i)},"Please enter a valid credit card number."),l.validator.addMethod("currency",function(t,e,n){var i,o="string"==typeof n,a=o?n:n[0],r=!!o||n[1];return a=a.replace(/,/g,""),i="^["+(a=r?a+"]":a+"]?")+"([1-9]{1}[0-9]{0,2}(\\,[0-9]{3})*(\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\.[0-9]{0,2})?|0(\\.[0-9]{0,2})?|(\\.[0-9]{1,2})?)$",i=new RegExp(i),this.optional(e)||i.test(t)},"Please specify a valid currency"),l.validator.addMethod("dateFA",function(t,e){return this.optional(e)||/^[1-4]\d{3}\/((0?[1-6]\/((3[0-1])|([1-2][0-9])|(0?[1-9])))|((1[0-2]|(0?[7-9]))\/(30|([1-2][0-9])|(0?[1-9]))))$/.test(t)},l.validator.messages.date),l.validator.addMethod("dateITA",function(t,e){var n,i,o,a,r,s=!1;return/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(t)?(n=t.split("/"),i=parseInt(n[0],10),o=parseInt(n[1],10),a=parseInt(n[2],10),s=(r=new Date(Date.UTC(a,o-1,i,12,0,0,0))).getUTCFullYear()===a&&r.getUTCMonth()===o-1&&r.getUTCDate()===i):s=!1,this.optional(e)||s},l.validator.messages.date),l.validator.addMethod("dateNL",function(t,e){return this.optional(e)||/^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(t)},l.validator.messages.date),l.validator.addMethod("extension",function(t,e,n){return n="string"==typeof n?n.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(e)||t.match(new RegExp("\\.("+n+")$","i"))},l.validator.format("Please enter a value with a valid extension.")),l.validator.addMethod("giroaccountNL",function(t,e){return this.optional(e)||/^[0-9]{1,7}$/.test(t)},"Please specify a valid giro account number"),l.validator.addMethod("greaterThan",function(t,e,n){var i=l(n);return this.settings.onfocusout&&i.not(".validate-greaterThan-blur").length&&i.addClass("validate-greaterThan-blur").on("blur.validate-greaterThan",function(){l(e).valid()}),t>i.val()},"Please enter a greater value."),l.validator.addMethod("greaterThanEqual",function(t,e,n){var i=l(n);return this.settings.onfocusout&&i.not(".validate-greaterThanEqual-blur").length&&i.addClass("validate-greaterThanEqual-blur").on("blur.validate-greaterThanEqual",function(){l(e).valid()}),t>=i.val()},"Please enter a greater value."),l.validator.addMethod("iban",function(t,e){if(this.optional(e))return!0;var n,i,o,a,r,s=t.replace(/ /g,"").toUpperCase(),l="",u=!0,d="",c=5;if(s.length<c)return!1;if(void 0!==(o={AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"}[s.substring(0,2)])&&!new RegExp("^[A-Z]{2}\\d{2}"+o+"$","").test(s))return!1;for(n=s.substring(4,s.length)+s.substring(0,4),a=0;a<n.length;a++)"0"!==(i=n.charAt(a))&&(u=!1),u||(l+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(i));for(r=0;r<l.length;r++)d=(""+d+l.charAt(r))%97;return 1===d},"Please specify a valid IBAN"),l.validator.addMethod("integer",function(t,e){return this.optional(e)||/^-?\d+$/.test(t)},"A positive or negative non-decimal number please"),l.validator.addMethod("ipv4",function(t,e){return this.optional(e)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(t)},"Please enter a valid IP v4 address."),l.validator.addMethod("ipv6",function(t,e){return this.optional(e)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(t)},"Please enter a valid IP v6 address."),l.validator.addMethod("lessThan",function(t,e,n){var i=l(n);return this.settings.onfocusout&&i.not(".validate-lessThan-blur").length&&i.addClass("validate-lessThan-blur").on("blur.validate-lessThan",function(){l(e).valid()}),t<i.val()},"Please enter a lesser value."),l.validator.addMethod("lessThanEqual",function(t,e,n){var i=l(n);return this.settings.onfocusout&&i.not(".validate-lessThanEqual-blur").length&&i.addClass("validate-lessThanEqual-blur").on("blur.validate-lessThanEqual",function(){l(e).valid()}),t<=i.val()},"Please enter a lesser value."),l.validator.addMethod("lettersonly",function(t,e){return this.optional(e)||/^[a-z]+$/i.test(t)},"Letters only please"),l.validator.addMethod("letterswithbasicpunc",function(t,e){return this.optional(e)||/^[a-z\-.,()'"\s]+$/i.test(t)},"Letters or punctuation only please"),l.validator.addMethod("maxfiles",function(t,e,n){return!!this.optional(e)||!("file"===l(e).attr("type")&&e.files&&e.files.length>n)},l.validator.format("Please select no more than {0} files.")),l.validator.addMethod("maxsize",function(t,e,n){if(this.optional(e))return!0;if("file"===l(e).attr("type")&&e.files&&e.files.length)for(var i=0;i<e.files.length;i++)if(e.files[i].size>n)return!1;return!0},l.validator.format("File size must not exceed {0} bytes each.")),l.validator.addMethod("maxsizetotal",function(t,e,n){if(this.optional(e))return!0;if("file"===l(e).attr("type")&&e.files&&e.files.length)for(var i=0,o=0;o<e.files.length;o++)if(n<(i+=e.files[o].size))return!1;return!0},l.validator.format("Total size of all files must not exceed {0} bytes.")),l.validator.addMethod("mobileNL",function(t,e){return this.optional(e)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(t)},"Please specify a valid mobile number"),l.validator.addMethod("mobileRU",function(t,e){var n=t.replace(/\(|\)|\s+|-/g,"");return this.optional(e)||9<n.length&&/^((\+7|7|8)+([0-9]){10})$/.test(n)},"Please specify a valid mobile number"),l.validator.addMethod("mobileUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||9<t.length&&t.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[1345789]\d{2}|624)\s?\d{3}\s?\d{3})$/)},"Please specify a valid mobile number"),l.validator.addMethod("netmask",function(t,e){return this.optional(e)||/^(254|252|248|240|224|192|128)\.0\.0\.0|255\.(254|252|248|240|224|192|128|0)\.0\.0|255\.255\.(254|252|248|240|224|192|128|0)\.0|255\.255\.255\.(254|252|248|240|224|192|128|0)/i.test(t)},"Please enter a valid netmask."),l.validator.addMethod("nieES",function(t,e){"use strict";if(this.optional(e))return!0;var n,i=new RegExp(/^[MXYZ]{1}[0-9]{7,8}[TRWAGMYFPDXBNJZSQVHLCKET]{1}$/gi),o="TRWAGMYFPDXBNJZSQVHLCKET",a=t.substr(t.length-1).toUpperCase();return!(10<(t=t.toString().toUpperCase()).length||t.length<9||!i.test(t))&&(n=9===(t=t.replace(/^[X]/,"0").replace(/^[Y]/,"1").replace(/^[Z]/,"2")).length?t.substr(0,8):t.substr(0,9),o.charAt(parseInt(n,10)%23)===a)},"Please specify a valid NIE number."),l.validator.addMethod("nifES",function(t,e){"use strict";return!!this.optional(e)||!!(t=t.toUpperCase()).match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")&&(/^[0-9]{8}[A-Z]{1}$/.test(t)?"TRWAGMYFPDXBNJZSQVHLCKE".charAt(t.substring(8,0)%23)===t.charAt(8):!!/^[KLM]{1}/.test(t)&&t[8]==="TRWAGMYFPDXBNJZSQVHLCKE".charAt(t.substring(8,1)%23))},"Please specify a valid NIF number."),l.validator.addMethod("nipPL",function(t){"use strict";if(10!==(t=t.replace(/[^0-9]/g,"")).length)return!1;for(var e=[6,5,7,2,3,4,5,6,7],n=0,i=0;i<9;i++)n+=e[i]*t[i];var o=n%11;return(10===o?0:o)===parseInt(t[9],10)},"Please specify a valid NIP number."),l.validator.addMethod("nisBR",function(t){var e,n,i,o,a,r=0;if(11!==(t=t.replace(/([~!@#$%^&*()_+=`{}\[\]\-|\\:;'<>,.\/? ])+/g,"")).length)return!1;for(n=parseInt(t.substring(10,11),10),e=parseInt(t.substring(0,10),10),o=2;o<12;o++)10===(a=o)&&(a=2),11===o&&(a=3),r+=e%10*a,e=parseInt(e/10,10);return n===(i=1<(i=r%11)?11-i:0)},"Please specify a valid NIS/PIS number"),l.validator.addMethod("notEqualTo",function(t,e,n){return this.optional(e)||!l.validator.methods.equalTo.call(this,t,e,n)},"Please enter a different value, values must not be the same."),l.validator.addMethod("nowhitespace",function(t,e){return this.optional(e)||/^\S+$/i.test(t)},"No white space please"),l.validator.addMethod("pattern",function(t,e,n){return!!this.optional(e)||("string"==typeof n&&(n=new RegExp("^(?:"+n+")$")),n.test(t))},"Invalid format."),l.validator.addMethod("phoneNL",function(t,e){return this.optional(e)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(t)},"Please specify a valid phone number."),l.validator.addMethod("phonePL",function(t,e){t=t.replace(/\s+/g,"");var n=/^(?:(?:(?:\+|00)?48)|(?:\(\+?48\)))?(?:1[2-8]|2[2-69]|3[2-49]|4[1-68]|5[0-9]|6[0-35-9]|[7-8][1-9]|9[145])\d{7}$/;return this.optional(e)||n.test(t)},"Please specify a valid phone number"),l.validator.addMethod("phonesUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||9<t.length&&t.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[1345789]\d{8}|624\d{6})))$/)},"Please specify a valid uk phone number"),l.validator.addMethod("phoneUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||9<t.length&&t.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/)},"Please specify a valid phone number"),l.validator.addMethod("phoneUS",function(t,e){return t=t.replace(/\s+/g,""),this.optional(e)||9<t.length&&t.match(/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]\d{2}-?\d{4}$/)},"Please specify a valid phone number"),l.validator.addMethod("postalcodeBR",function(t,e){return this.optional(e)||/^\d{2}.\d{3}-\d{3}?$|^\d{5}-?\d{3}?$/.test(t)},"Informe um CEP v\xe1lido."),l.validator.addMethod("postalCodeCA",function(t,e){return this.optional(e)||/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ] *\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i.test(t)},"Please specify a valid postal code"),l.validator.addMethod("postalcodeIT",function(t,e){return this.optional(e)||/^\d{5}$/.test(t)},"Please specify a valid postal code"),l.validator.addMethod("postalcodeNL",function(t,e){return this.optional(e)||/^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(t)},"Please specify a valid postal code"),l.validator.addMethod("postcodeUK",function(t,e){return this.optional(e)||/^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(t)},"Please specify a valid UK postcode"),l.validator.addMethod("require_from_group",function(t,e,n){var i=l(n[1],e.form),o=i.eq(0),a=o.data("valid_req_grp")?o.data("valid_req_grp"):l.extend({},this),r=i.filter(function(){return a.elementValue(this)}).length>=n[0];return o.data("valid_req_grp",a),l(e).data("being_validated")||(i.data("being_validated",!0),i.each(function(){a.element(this)}),i.data("being_validated",!1)),r},l.validator.format("Please fill at least {0} of these fields.")),l.validator.addMethod("skip_or_fill_minimum",function(t,e,n){var i=l(n[1],e.form),o=i.eq(0),a=o.data("valid_skip")?o.data("valid_skip"):l.extend({},this),r=i.filter(function(){return a.elementValue(this)}).length,s=0===r||r>=n[0];return o.data("valid_skip",a),l(e
).data("being_validated")||(i.data("being_validated",!0),i.each(function(){a.element(this)}),i.data("being_validated",!1)),s},l.validator.format("Please either skip these fields or fill at least {0} of them.")),l.validator.addMethod("stateUS",function(t,e,n){var i,o=void 0===n,a=!o&&"undefined"!=typeof n.caseSensitive&&n.caseSensitive,r=!o&&"undefined"!=typeof n.includeTerritories&&n.includeTerritories,s=!o&&"undefined"!=typeof n.includeMilitary&&n.includeMilitary;return i=r||s?r&&s?"^(A[AEKLPRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":r?"^(A[KLRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":"^(A[AEKLPRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$":"^(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$",i=a?new RegExp(i):new RegExp(i,"i"),this.optional(e)||i.test(t)},"Please specify a valid state"),l.validator.addMethod("strippedminlength",function(t,e,n){return l(t).text().length>=n},l.validator.format("Please enter at least {0} characters")),l.validator.addMethod("time",function(t,e){return this.optional(e)||/^([01]\d|2[0-3]|[0-9])(:[0-5]\d){1,2}$/.test(t)},"Please enter a valid time, between 00:00 and 23:59"),l.validator.addMethod("time12h",function(t,e){return this.optional(e)||/^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(t)},"Please enter a valid time in 12-hour am/pm format"),l.validator.addMethod("url2",function(t,e){return this.optional(e)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},l.validator.messages.url),l.validator.addMethod("vinUS",function(t){if(17!==t.length)return!1;var e,n,i,o,a,r,s=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y","Z"],l=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],u=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],d=0;for(e=0;e<17;e++){if(o=u[e],i=t.slice(e,e+1),8===e&&(r=i),isNaN(i)){for(n=0;n<s.length;n++)if(i.toUpperCase()===s[n]){i=l[n],i*=o,isNaN(r)&&8===n&&(r=s[n]);break}}else i*=o;d+=i}return 10===(a=d%11)&&(a="X"),a===r},"The specified vehicle identification number (VIN) is invalid."),l.validator.addMethod("zipcodeUS",function(t,e){return this.optional(e)||/^\d{5}(-\d{4})?$/.test(t)},"The specified US ZIP Code is invalid"),l.validator.addMethod("ziprange",function(t,e){return this.optional(e)||/^90[2-5]\d\{2\}-\d{4}$/.test(t)},"Your ZIP-code must be in the range 902xx-xxxx to 905xx-xxxx"),l}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(m){m.fn.numeric=function(t,e){"boolean"==typeof t&&(t={decimal:t,negative:!0,decimalPlaces:-1}),"undefined"==typeof(t=t||{}).negative&&(t.negative=!0);var n=!1===t.decimal?"":t.decimal||".",i=!0===t.negative,o="undefined"==typeof t.decimalPlaces?-1:t.decimalPlaces;return e="function"==typeof e?e:function(){},this.data("numeric.decimal",n).data("numeric.negative",i).data("numeric.callback",e).data("numeric.decimalPlaces",o).keypress(m.fn.numeric.keypress).keyup(m.fn.numeric.keyup).blur(m.fn.numeric.blur)},m.fn.numeric.keypress=function(t){var e=m.data(this,"numeric.decimal"),n=m.data(this,"numeric.negative"),i=m.data(this,"numeric.decimalPlaces"),o=t.charCode?t.charCode:t.keyCode?t.keyCode:0;if(13==o&&"input"==this.nodeName.toLowerCase())return!0;if(13==o)return!1;if(35==o||36==o||37==o)return!1;var a=!1;if(t.ctrlKey&&97==o||t.ctrlKey&&65==o)return!0;if(t.ctrlKey&&120==o||t.ctrlKey&&88==o)return!0;if(t.ctrlKey&&99==o||t.ctrlKey&&67==o)return!0;if(t.ctrlKey&&122==o||t.ctrlKey&&90==o)return!0;if(t.ctrlKey&&118==o||t.ctrlKey&&86==o||t.shiftKey&&45==o)return!0;if(o<48||57<o){var r=m(this).val();if(0!==m.inArray("-",r.split(""))&&n&&45==o&&(0===r.length||0===parseInt(m.fn.getSelectionStart(this),10)))return!0;e&&o==e.charCodeAt(0)&&-1!=m.inArray(e,r.split(""))&&(a=!1),8!=o&&9!=o&&13!=o&&35!=o&&36!=o&&37!=o&&39!=o&&46!=o?a=!1:"undefined"!=typeof t.charCode&&(t.keyCode==t.which&&0!==t.which?(a=!0,46==t.which&&(a=!1)):0!==t.keyCode&&0===t.charCode&&0===t.which&&(a=!0)),e&&o==e.charCodeAt(0)&&(a=-1==m.inArray(e,r.split("")))}else if(a=!0,e&&0<i){var s=m.fn.getSelectionStart(this),l=m.fn.getSelectionEnd(this),u=m.inArray(e,m(this).val().split(""));s===l&&0<=u&&u<s&&m(this).val().length>u+i&&(a=!1)}return a},m.fn.numeric.keyup=function(){var t=m(this).val();if(t&&0<t.length){var e=m.fn.getSelectionStart(this),n=m.fn.getSelectionEnd(this),i=m.data(this,"numeric.decimal"),o=m.data(this,"numeric.negative"),a=m.data(this,"numeric.decimalPlaces");if(""!==i&&null!==i)0===(h=m.inArray(i,t.split("")))&&(this.value="0"+t,e++,n++),1==h&&"-"==t.charAt(0)&&(this.value="-0"+t.substring(1),e++,n++),t=this.value;for(var r=[0,1,2,3,4,5,6,7,8,9,"-",i],s=t.length,l=s-1;0<=l;l--){var u=t.charAt(l);0!==l&&"-"==u?t=t.substring(0,l)+t.substring(l+1):0!==l||o||"-"!=u||(t=t.substring(1));for(var d=!1,c=0;c<r.length;c++)if(u==r[c]){d=!0;break}d&&" "!=u||(t=t.substring(0,l)+t.substring(l+1))}var h,f=m.inArray(i,t.split(""));if(0<f)for(var p=s-1;f<p;p--){t.charAt(p)==i&&(t=t.substring(0,p)+t.substring(p+1))}if(i&&0<a)0<=(h=m.inArray(i,t.split("")))&&(t=t.substring(0,h+a+1),n=Math.min(t.length,n));this.value=t,m.fn.setSelection(this,[e,n])}},m.fn.numeric.blur=function(){var t=m.data(this,"numeric.decimal"),e=m.data(this,"numeric.callback"),n=m.data(this,"numeric.negative"),i=this.value;""!==i&&(new RegExp("^"+(n?"-?":"")+"\\d+$|^"+(n?"-?":"")+"\\d*"+t+"\\d+$").exec(i)||e.apply(this))},m.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).data("numeric.decimalPlaces",null).unbind("keypress",m.fn.numeric.keypress).unbind("keyup",m.fn.numeric.keyup).unbind("blur",m.fn.numeric.blur)},m.fn.getSelectionStart=function(t){if("number"===t.type)return undefined;if(t.createTextRange&&document.selection){var e=document.selection.createRange().duplicate();return e.moveEnd("character",t.value.length),""==e.text?t.value.length:Math.max(0,t.value.lastIndexOf(e.text))}try{return t.selectionStart}catch(n){return 0}},m.fn.getSelectionEnd=function(t){if("number"===t.type)return undefined;if(t.createTextRange&&document.selection){var e=document.selection.createRange().duplicate();return e.moveStart("character",-t.value.length),e.text.length}return t.selectionEnd},m.fn.setSelection=function(t,e){if("number"==typeof e&&(e=[e,e]),e&&e.constructor==Array&&2==e.length)if("number"===t.type)t.focus();else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveStart("character",e[0]),n.moveEnd("character",e[1]-e[0]),n.select()}else{t.focus();try{t.setSelectionRange&&t.setSelectionRange(e[0],e[1])}catch(i){}}}}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(){"use strict";var t=jQuery.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||3<t[0])throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(),function(i){"use strict";function t(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(t.style[n]!==undefined)return{end:e[n]};return!1}i.fn.emulateTransitionEnd=function(t){var e=!1,n=this;return i(this).one("bsTransitionEnd",function(){e=!0}),setTimeout(function(){e||i(n).trigger(i.support.transition.end)},t),this},i(function(){i.support.transition=t(),i.support.transition&&(i.event.special.bsTransitionEnd={bindType:i.support.transition.end,delegateType:i.support.transition.end,handle:function(t){if(i(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(a){"use strict";function t(n){return this.each(function(){var t=a(this),e=t.data("bs.alert");e||t.data("bs.alert",e=new r(this)),"string"==typeof n&&e[n].call(t)})}var e='[data-dismiss="alert"]',r=function(t){a(t).on("click",e,this.close)};r.VERSION="3.4.1",r.TRANSITION_DURATION=150,r.prototype.close=function(t){function e(){o.detach().trigger("closed.bs.alert").remove()}var n=a(this),i=n.attr("data-target");i||(i=(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),i="#"===i?[]:i;var o=a(document).find(i);t&&t.preventDefault(),o.length||(o=n.closest(".alert")),o.trigger(t=a.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),a.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",e).emulateTransitionEnd(r.TRANSITION_DURATION):e())};var n=a.fn.alert;a.fn.alert=t,a.fn.alert.Constructor=r,a.fn.alert.noConflict=function(){return a.fn.alert=n,this},a(document).on("click.bs.alert.data-api",e,r.prototype.close)}(jQuery),function(a){"use strict";function n(i){return this.each(function(){var t=a(this),e=t.data("bs.button"),n="object"==typeof i&&i;e||t.data("bs.button",e=new o(this,n)),"toggle"==i?e.toggle():i&&e.setState(i)})}var o=function(t,e){this.$element=a(t),this.options=a.extend({},o.DEFAULTS,e),this.isLoading=!1};o.VERSION="3.4.1",o.DEFAULTS={loadingText:"loading..."},o.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.is("input")?"val":"html",o=n.data();t+="Text",null==o.resetText&&n.data("resetText",n[i]()),setTimeout(a.proxy(function(){n[i](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,n.addClass(e).attr(e,e).prop(e,!0)):this.isLoading&&(this.isLoading=!1,n.removeClass(e).removeAttr(e).prop(e,!1))},this),0)},o.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var t=a.fn.button;a.fn.button=n,a.fn.button.Constructor=o,a.fn.button.noConflict=function(){return a.fn.button=t,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var e=a(t.target).closest(".btn");n.call(e,"toggle"),a(t.target).is('input[type="radio"], input[type="checkbox"]')||(t.preventDefault(),e.is("input,button")?e.trigger("focus"):e.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){a(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(c){"use strict";function s(o){return this.each(function(){var t=c(this),e=t.data("bs.carousel"),n=c.extend({},h.DEFAULTS,t.data(),"object"==typeof o&&o),i="string"==typeof o?o:n.slide;e||t.data("bs.carousel",e=new h(this,n)),"number"==typeof o?e.to(o):i?e[i]():n.interval&&e.pause().cycle()})}var h=function(t,e){this.$element=c(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",c.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",c.proxy(this.pause,this)).on("mouseleave.bs.carousel",c.proxy(this.cycle,this))};h.VERSION="3.4.1",h.TRANSITION_DURATION=600,h.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},h.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},h.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(c.proxy(this.next,this),this.options.interval)),this},h.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},h.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e);if(("prev"==t&&0===n||"next"==t&&n==this.$items.length-1)&&!this.options.wrap)return e;var i=(n+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(i)},h.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(n<t?"next":"prev",this.$items.eq(t))},h.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&c.support.transition&&(this.$element.trigger(c.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},h.prototype.next=function(){if(!this.sliding)return this.slide("next")},h.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},h.prototype.slide=function(t,e){var n=this.$element.find(".item.active"),i=e||this.getItemForDirection(t,n),o=this.interval,a="next"==t?"left":"right",r=this;if(i.hasClass("active"))return this.sliding=!1;var s=i[0],l=c.Event("slide.bs.carousel",{relatedTarget:s,direction:a});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=c(this.$indicators.children()[this.getItemIndex(i)]);u&&u.addClass("active")}var d=c.Event("slid.bs.carousel",{relatedTarget:s,direction:a});return c.support.transition&&this.$element.hasClass("slide")?(i.addClass(t),"object"==typeof i&&i.length&&i[0].offsetWidth,n.addClass(a),i.addClass(a),n.one("bsTransitionEnd",function(){i.removeClass([t,a].join(" ")).addClass("active"),n.removeClass(["active",a].join(" ")),r.sliding=!1,setTimeout(function(){r.$element.trigger(d)},0)}).emulateTransitionEnd(h.TRANSITION_DURATION)):(n.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger(d)),o&&this.cycle(),this}};var t=c.fn.carousel;c.fn.carousel=s,c.fn.carousel.Constructor=h,c.fn.carousel.noConflict=function(){return c.fn.carousel=t,this};var e=function(t){var e=c(this),n=e.attr("href");n&&(n=n.replace(/.*(?=#[^\s]+$)/,""));var i=e.attr("data-target")||n,o=c(document).find(i);if(o.hasClass("carousel")){var a=c.extend({},o.data(),e.data()),r=e.attr("data-slide-to");r&&(a.interval=!1),s.call(o,a),r&&o.data("bs.carousel").to(r),t.preventDefault()}};c(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),c(window).on("load",function(){c('[data-ride="carousel"]').each(function(){var t=c(this);s.call(t,t.data())})})}(jQuery),function(r){"use strict";function o(t){var e,n=t.attr("data-target")||(e=t.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"");return r(document).find(n)}function s(i){return this.each(function(){var t=r(this),e=t.data("bs.collapse"),n=r.extend({},l.DEFAULTS,t.data(),"object"==typeof i&&i);!e&&n.toggle&&/show|hide/.test(i)&&(n.toggle=!1),e||t.data("bs.collapse",e=new l(this,n)),"string"==typeof i&&e[i]()})}var l=function(t,e){this.$element=r(t),this.options=r.extend({},l.DEFAULTS,e),this.$trigger=r('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};l.VERSION="3.4.1",l.TRANSITION_DURATION=350,l.DEFAULTS={toggle:!0},l.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},l.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(t=e.data("bs.collapse"))&&t.transitioning)){var n=r.Event("show.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){e&&e.length&&(s.call(e,"hide"),t||e.data("bs.collapse",null));var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[i](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!r.support.transition)return o.call(this);var a=r.camelCase(["scroll",i].join("-"));this.$element.one("bsTransitionEnd",r.proxy(o,this)).emulateTransitionEnd(l.TRANSITION_DURATION)[i](this.$element[0][a])}}}},l.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=r.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var e=this.dimension();this.$element[e](this.$element[e]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!r.support.transition)return n.call(this);this.$element[e](0).one("bsTransitionEnd",r.proxy(n,this)).emulateTransitionEnd(l.TRANSITION_DURATION)}}},l.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},l.prototype.getParent=function(){return r(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(r.proxy(function(t,e){var n=r(e);this.addAriaAndCollapsedClass(o(n),n)},this)).end()},l.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var t=r.fn.collapse;r.fn.collapse=s,r.fn.collapse.Constructor=l,r.fn.collapse.noConflict=function(){return r.fn.collapse=t,this},r(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var e=r(this);e.attr("data-target")||t.preventDefault();var n=o(e),i=n.data("bs.collapse")?"toggle":e.data();s.call(n,i)})}(jQuery),function(s){"use strict";function l(t){var e=t.attr("data-target");e||(e=(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var n="#"!==e?s(document).find(e):null;return n&&n.length?n:t.parent()}function a(i){i&&3===i.which||(s(e).remove(),s(u).each(function(){var t=s(this),e=l(t),n={relatedTarget:this};e.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&s.contains(e[0],i.target)||(e.trigger(i=s.Event("hide.bs.dropdown",n)),i.isDefaultPrevented()||(t.attr("aria-expanded","false"),e.removeClass("open").trigger(s.Event("hidden.bs.dropdown",n)))))}))}function t(n){return this.each(function(){var t=s(this),e=t.data("bs.dropdown");e||t.data("bs.dropdown",e=new i(this)),"string"==typeof n&&e[n].call(t)})}var e=".dropdown-backdrop",u='[data-toggle="dropdown"]',i=function(t){s(t).on("click.bs.dropdown",this.toggle)};i.VERSION="3.4.1",i.prototype.toggle=function(t){var e=s(this);if(!e.is(".disabled, :disabled")){var n=l(e),i=n.hasClass("open");if(a(),!i){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&s(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(s(this)).on("click",a);var o={relatedTarget:this};if(n.trigger(t=s.Event("show.bs.dropdown",o)),t.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger(s.Event("shown.bs.dropdown",o))}return!1}},i.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=s(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var n=l(e),i=n.hasClass("open");if(!i&&27!=t.which||i&&27==t.which)return 27==t.which&&n.find(u).trigger("focus"),e.trigger("click");var o=" li:not(.disabled):visible a",a=n.find(".dropdown-menu"+o);if(a.length){var r=a.index(t.target);38==t.which&&0<r&&r--,40==t.which&&r<a.length-1&&r++,~r||(r=0),a.eq(r).trigger("focus")}}}};var n=s.fn.dropdown;s.fn.dropdown=t,s.fn.dropdown.Constructor=i,s.fn.dropdown.noConflict=function(){return s.fn.dropdown=n,this},s(document).on("click.bs.dropdown.data-api",a).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",u,i.prototype.toggle).on("keydown.bs.dropdown.data-api",u,i.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",i.prototype.keydown)}(jQuery),function(r){"use strict";function s(i,o){return this.each(function(){var t=r(this),e=t.data("bs.modal"),n=r.extend({},a.DEFAULTS,t.data(),"object"==typeof i&&i);e||t.data("bs.modal",e=new a(this,n)),"string"==typeof i?e[i](o):n.show&&e.show(o)})}var a=function(t,e){this.options=e,this.$body=r(document.body),this.$element=r(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,r.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};a.VERSION="3.4.1",a.TRANSITION_DURATION=300,a.BACKDROP_TRANSITION_DURATION=150,a.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},a.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},a.prototype.show=function(n){var i=this,t=r.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(t),this.isShown||t.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',r.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(t){r(t.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var t=r.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),t&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var e=r.Event("shown.bs.modal",{relatedTarget:n});t?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(a.TRANSITION_DURATION):i.$element.trigger("focus").trigger(e)}))},a.prototype.hide=function(t){t&&t.preventDefault(),t=r.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),r(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),r.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",r.proxy(this.hideModal,this)).emulateTransitionEnd(a.TRANSITION_DURATION):this.hideModal())},a.prototype.enforceFocus=function(){r(document).off("focusin.bs.modal").on("focusin.bs.modal",r.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},a.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",r.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},a.prototype.resize=function(){this.isShown?r(window).on("resize.bs.modal",r.proxy(this.handleUpdate,this)):r(window).off("resize.bs.modal")},a.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},a.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},a.prototype.backdrop=function(t){var e=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=r.support.transition&&n;if(this.$backdrop=r(document.createElement("div")).addClass("modal-backdrop "+n).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",r.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){e.removeBackdrop(),t&&t()};r.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},a.prototype.handleUpdate=function(){this.adjustDialog()},a.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},a.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},a.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},a.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var o=this.scrollbarWidth;this.bodyIsOverflowing&&(this.$body.css("padding-right",t+o),r(this.fixedContent).each(function(t,e){var n=e.style.paddingRight,i=r(e).css("padding-right");r(e).data("padding-right",n).css("padding-right",parseFloat(i)+o+"px")}))},a.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),r(this.fixedContent).each(function(t,e){var n=r(e).data("padding-right");r(e).removeData("padding-right"),e.style.paddingRight=n||""})},a.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var t=r.fn.modal;r.fn.modal=s,r.fn.modal.Constructor=a,r.fn.modal.noConflict=function(){return r.fn.modal=t,this},r(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var e=r(this),n=e.attr("href"),i=e.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,""),o=r(document).find(i),a=o.data("bs.modal")?"toggle":r.extend({remote:!/#/.test(n)&&n},o.data(),e.data());e.is("a")&&t.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){e.is(":visible")&&e.trigger("focus")})}),s.call(o,a,this)})}(jQuery),function(m){"use strict";function p(t,e){var n=t.nodeName.toLowerCase();if(-1!==m.inArray(n,e))return-1===m.inArray(n,r)||Boolean(t.nodeValue.match(s)||t.nodeValue.match(l));for(var i=m(e).filter(function(t,e){return e instanceof RegExp}),o=0,a=i.length;o<a;o++)if(n.match(i[o]))return!0;return!1}function i(t,e,n){if(0===t.length)return t;if(n&&"function"==typeof n)return n(t);if(!document.implementation||!document.implementation.createHTMLDocument)return t;var i=document.implementation.createHTMLDocument("sanitization");i.body.innerHTML=t;for(var o=m.map(e,function(t,e){return e}),a=m(i.body).find("*"),r=0,s=a.length;r<s;r++){var l=a[r],u=l.nodeName.toLowerCase();if(-1!==m.inArray(u,o))for(var d=m.map(l.attributes,function(t){return t}),c=[].concat(e["*"]||[],e[u]||[]),h=0,f=d.length;h<f;h++)p(d[h],c)||l.removeAttribute(d[h].nodeName);else l.parentNode.removeChild(l)}return i.body.innerHTML}function t(i){return this.each(function(){var t=m(this),e=t.data("bs.tooltip"),n="object"==typeof i&&i;!e&&/destroy|hide/.test(i)||(e||t.data("bs.tooltip",e=new g(this,n)),"string"==typeof i&&e[i]())})}var o=["sanitize","whiteList","sanitizeFn"],r=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],e={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},s=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,l=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i,g=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};g.VERSION="3.4.1",g.TRANSITION_DURATION=150,g.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:e},g.prototype.init=function(t,e,n){if(this.enabled=!0,this.type=t,this.$element=m(e),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&m(document).find(m.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var a=i[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,m.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",s="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,m.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,m.proxy(this.leave,this))}}this.options.selector?this._options=m.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},g.prototype.getDefaults=function(){return g.DEFAULTS},g.prototype.getOptions=function(t){var e=this.$element.data();for(var n in e)e.hasOwnProperty(n)&&-1!==m.inArray(n,o)&&delete e[n];return(t=m.extend({},this.getDefaults(),e,t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t.sanitize&&(t.template=i(t.template,t.whiteList,t.sanitizeFn)),t},g.prototype.getDelegateOptions=function(){var n={},i=this.getDefaults();return this._options&&m.each(this._options,function(t,e){i[t]!=e&&(n[t]=e)}),n},g.prototype.enter=function(t){var e=t instanceof this.constructor?t:m(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),m(t.currentTarget).data("bs."+this.type,e)),t instanceof m.Event&&(e.inState["focusin"==t.type?"focus":"hover"]=!0),e.tip().hasClass("in")||"in"==e.hoverState)e.hoverState="in";else{if(clearTimeout(e.timeout),e.hoverState="in",!e.options.delay||!e.options.delay.show)return e.show();e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)}},g.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},g.prototype.leave=function(t){var e=t instanceof this.constructor?t:m(
t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),m(t.currentTarget).data("bs."+this.type,e)),t instanceof m.Event&&(e.inState["focusout"==t.type?"focus":"hover"]=!1),!e.isInStateTrue()){if(clearTimeout(e.timeout),e.hoverState="out",!e.options.delay||!e.options.delay.hide)return e.hide();e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)}},g.prototype.show=function(){var t=m.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var e=m.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!e)return;var n=this,i=this.tip(),o=this.getUID(this.type);this.setContent(),i.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&i.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,r=/\s?auto?\s?/i,s=r.test(a);s&&(a=a.replace(r,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?i.appendTo(m(document).find(this.options.container)):i.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var l=this.getPosition(),u=i[0].offsetWidth,d=i[0].offsetHeight;if(s){var c=a,h=this.getPosition(this.$viewport);a="bottom"==a&&l.bottom+d>h.bottom?"top":"top"==a&&l.top-d<h.top?"bottom":"right"==a&&l.right+u>h.width?"left":"left"==a&&l.left-u<h.left?"right":a,i.removeClass(c).addClass(a)}var f=this.getCalculatedOffset(a,l,u,d);this.applyPlacement(f,a);var p=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};m.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",p).emulateTransitionEnd(g.TRANSITION_DURATION):p()}},g.prototype.applyPlacement=function(t,e){var n=this.tip(),i=n[0].offsetWidth,o=n[0].offsetHeight,a=parseInt(n.css("margin-top"),10),r=parseInt(n.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),t.top+=a,t.left+=r,m.offset.setOffset(n[0],m.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),n.addClass("in");var s=n[0].offsetWidth,l=n[0].offsetHeight;"top"==e&&l!=o&&(t.top=t.top+o-l);var u=this.getViewportAdjustedDelta(e,t,s,l);u.left?t.left+=u.left:t.top+=u.top;var d=/top|bottom/.test(e),c=d?2*u.left-i+s:2*u.top-o+l,h=d?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(c,n[0][h],d)},g.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},g.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();this.options.html?(this.options.sanitize&&(e=i(e,this.options.whiteList,this.options.sanitizeFn)),t.find(".tooltip-inner").html(e)):t.find(".tooltip-inner").text(e),t.removeClass("fade in top bottom left right")},g.prototype.hide=function(t){function e(){"in"!=n.hoverState&&i.detach(),n.$element&&n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),t&&t()}var n=this,i=m(this.$tip),o=m.Event("hide.bs."+this.type);if(this.$element.trigger(o),!o.isDefaultPrevented())return i.removeClass("in"),m.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",e).emulateTransitionEnd(g.TRANSITION_DURATION):e(),this.hoverState=null,this},g.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},g.prototype.hasContent=function(){return this.getTitle()},g.prototype.getPosition=function(t){var e=(t=t||this.$element)[0],n="BODY"==e.tagName,i=e.getBoundingClientRect();null==i.width&&(i=m.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=window.SVGElement&&e instanceof window.SVGElement,a=n?{top:0,left:0}:o?null:t.offset(),r={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=n?{width:m(window).width(),height:m(window).height()}:null;return m.extend({},i,r,s,a)},g.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},g.prototype.getViewportAdjustedDelta=function(t,e,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var a=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-a-r.scroll,l=e.top+a-r.scroll+i;s<r.top?o.top=r.top-s:l>r.top+r.height&&(o.top=r.top+r.height-l)}else{var u=e.left-a,d=e.left+a+n;u<r.left?o.left=r.left-u:d>r.right&&(o.left=r.left+r.width-d)}return o},g.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},g.prototype.getUID=function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},g.prototype.tip=function(){if(!this.$tip&&(this.$tip=m(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},g.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},g.prototype.enable=function(){this.enabled=!0},g.prototype.disable=function(){this.enabled=!1},g.prototype.toggleEnabled=function(){this.enabled=!this.enabled},g.prototype.toggle=function(t){var e=this;t&&((e=m(t.currentTarget).data("bs."+this.type))||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),m(t.currentTarget).data("bs."+this.type,e))),t?(e.inState.click=!e.inState.click,e.isInStateTrue()?e.enter(e):e.leave(e)):e.tip().hasClass("in")?e.leave(e):e.enter(e)},g.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})},g.prototype.sanitizeHtml=function(t){return i(t,this.options.whiteList,this.options.sanitizeFn)};var n=m.fn.tooltip;m.fn.tooltip=t,m.fn.tooltip.Constructor=g,m.fn.tooltip.noConflict=function(){return m.fn.tooltip=n,this}}(jQuery),function(o){"use strict";function t(i){return this.each(function(){var t=o(this),e=t.data("bs.popover"),n="object"==typeof i&&i;!e&&/destroy|hide/.test(i)||(e||t.data("bs.popover",e=new a(this,n)),"string"==typeof i&&e[i]())})}var a=function(t,e){this.init("popover",t,e)};if(!o.fn.tooltip)throw new Error("Popover requires tooltip.js");a.VERSION="3.4.1",a.DEFAULTS=o.extend({},o.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),a.prototype=o.extend({},o.fn.tooltip.Constructor.prototype),(a.prototype.constructor=a).prototype.getDefaults=function(){return a.DEFAULTS},a.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();if(this.options.html){var i=typeof n;this.options.sanitize&&(e=this.sanitizeHtml(e),"string"===i&&(n=this.sanitizeHtml(n))),t.find(".popover-title").html(e),t.find(".popover-content").children().detach().end()["string"===i?"html":"append"](n)}else t.find(".popover-title").text(e),t.find(".popover-content").children().detach().end().text(n);t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},a.prototype.hasContent=function(){return this.getTitle()||this.getContent()},a.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},a.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var e=o.fn.popover;o.fn.popover=t,o.fn.popover.Constructor=a,o.fn.popover.noConflict=function(){return o.fn.popover=e,this}}(jQuery),function(a){"use strict";function o(t,e){this.$body=a(document.body),this.$scrollElement=a(t).is(document.body)?a(window):a(t),this.options=a.extend({},o.DEFAULTS,e),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function e(i){return this.each(function(){var t=a(this),e=t.data("bs.scrollspy"),n="object"==typeof i&&i;e||t.data("bs.scrollspy",e=new o(this,n)),"string"==typeof i&&e[i]()})}o.VERSION="3.4.1",o.DEFAULTS={offset:10},o.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},o.prototype.refresh=function(){var t=this,i="offset",o=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(i="position",o=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=a(this),e=t.data("target")||t.attr("href"),n=/^#./.test(e)&&a(e);return n&&n.length&&n.is(":visible")&&[[n[i]().top+o,e]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},o.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),o=this.offsets,a=this.targets,r=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),i<=e)return r!=(t=a[a.length-1])&&this.activate(t);if(r&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)r!=a[t]&&e>=o[t]&&(o[t+1]===undefined||e<o[t+1])&&this.activate(a[t])},o.prototype.activate=function(t){this.activeTarget=t,this.clear();var e=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=a(e).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},o.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var t=a.fn.scrollspy;a.fn.scrollspy=e,a.fn.scrollspy.Constructor=o,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=t,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var t=a(this);e.call(t,t.data())})})}(jQuery),function(s){"use strict";function e(n){return this.each(function(){var t=s(this),e=t.data("bs.tab");e||t.data("bs.tab",e=new r(this)),"string"==typeof n&&e[n]()})}var r=function(t){this.element=s(t)};r.VERSION="3.4.1",r.TRANSITION_DURATION=150,r.prototype.show=function(){var t=this.element,e=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=e.find(".active:last a"),o=s.Event("hide.bs.tab",{relatedTarget:t[0]}),a=s.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),t.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var r=s(document).find(n);this.activate(t.closest("li"),e),this.activate(r,r.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},r.prototype.activate=function(t,e,n){function i(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),n&&n()}var o=e.find("> .active"),a=n&&s.support.transition&&(o.length&&o.hasClass("fade")||!!e.find("> .fade").length);o.length&&a?o.one("bsTransitionEnd",i).emulateTransitionEnd(r.TRANSITION_DURATION):i(),o.removeClass("in")};var t=s.fn.tab;s.fn.tab=e,s.fn.tab.Constructor=r,s.fn.tab.noConflict=function(){return s.fn.tab=t,this};var n=function(t){t.preventDefault(),e.call(s(this),"show")};s(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',n).on("click.bs.tab.data-api",'[data-toggle="pill"]',n)}(jQuery),function(l){"use strict";function n(i){return this.each(function(){var t=l(this),e=t.data("bs.affix"),n="object"==typeof i&&i;e||t.data("bs.affix",e=new u(this,n)),"string"==typeof i&&e[i]()})}var u=function(t,e){this.options=l.extend({},u.DEFAULTS,e);var n=this.options.target===u.DEFAULTS.target?l(this.options.target):l(document).find(this.options.target);this.$target=n.on("scroll.bs.affix.data-api",l.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",l.proxy(this.checkPositionWithEventLoop,this)),this.$element=l(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};u.VERSION="3.4.1",u.RESET="affix affix-top affix-bottom",u.DEFAULTS={offset:0,target:window},u.prototype.getState=function(t,e,n,i){var o=this.$target.scrollTop(),a=this.$element.offset(),r=this.$target.height();if(null!=n&&"top"==this.affixed)return o<n&&"top";if("bottom"==this.affixed)return null!=n?!(o+this.unpin<=a.top)&&"bottom":!(o+r<=t-i)&&"bottom";var s=null==this.affixed,l=s?o:a.top;return null!=n&&o<=n?"top":null!=i&&t-i<=l+(s?r:e)&&"bottom"},u.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(u.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},u.prototype.checkPositionWithEventLoop=function(){setTimeout(l.proxy(this.checkPosition,this),1)},u.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),e=this.options.offset,n=e.top,i=e.bottom,o=Math.max(l(document).height(),l(document.body).height());"object"!=typeof e&&(i=n=e),"function"==typeof n&&(n=e.top(this.$element)),"function"==typeof i&&(i=e.bottom(this.$element));var a=this.getState(o,t,n,i);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var r="affix"+(a?"-"+a:""),s=l.Event(r+".bs.affix");if(this.$element.trigger(s),s.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(u.RESET).addClass(r).trigger(r.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:o-t-i})}};var t=l.fn.affix;l.fn.affix=n,l.fn.affix.Constructor=u,l.fn.affix.noConflict=function(){return l.fn.affix=t,this},l(window).on("load",function(){l('[data-spy="affix"]').each(function(){var t=l(this),e=t.data();e.offset=e.offset||{},null!=e.offsetBottom&&(e.offset.bottom=e.offsetBottom),null!=e.offsetTop&&(e.offset.top=e.offsetTop),n.call(t,e)})})}(jQuery),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function u(){return Di.apply(null,arguments)}function t(t){Di=t}function r(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function s(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function l(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function a(t){return void 0===t}function d(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function o(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function n(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function c(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function h(t,e){for(var n in e)c(e,n)&&(t[n]=e[n]);return c(e,"toString")&&(t.toString=e.toString),c(e,"valueOf")&&(t.valueOf=e.valueOf),t}function f(t,e,n,i){return Le(t,e,n,i,!0).utc()}function e(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function p(t){return null==t._pf&&(t._pf=e()),t._pf}function m(t){if(null==t._isValid){var e=p(t),n=Ti.call(e.parsedDateParts,function(t){return null!=t}),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(i=i&&0===e.charsLeftOver&&0===e.unusedTokens.length&&e.bigHour===undefined),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function i(t){var e=f(NaN);return null!=t?h(p(e),t):p(e).userInvalidated=!0,e}function g(t,e){var n,i,o;if(a(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),a(e._i)||(t._i=e._i),a(e._f)||(t._f=e._f),a(e._l)||(t._l=e._l),a(e._strict)||(t._strict=e._strict),a(e._tzm)||(t._tzm=e._tzm),a(e._isUTC)||(t._isUTC=e._isUTC),a(e._offset)||(t._offset=e._offset),a(e._pf)||(t._pf=p(e)),a(e._locale)||(t._locale=e._locale),0<Pi.length)for(n=0;n<Pi.length;n++)a(o=e[i=Pi[n]])||(t[i]=o);return t}function v(t){g(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Ei&&(Ei=!0,u.updateOffset(this),Ei=!1)}function y(t){return t instanceof v||null!=t&&null!=t._isAMomentObject}function _(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function b(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=_(e)),n}function w(t,e,n){var i,o=Math.min(t.length,e.length),a=Math.abs(t.length-e.length),r=0;for(i=0;i<o;i++)(n&&t[i]!==e[i]||!n&&b(t[i])!==b(e[i]))&&r++;return r+a}function x(t){!1===u.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function C(a,r){var s=!0;return h(function(t){if(null!=u.deprecationHandler&&u.deprecationHandler(null,a),s){for(var e,n=[],i=0;i<arguments.length;i++){if(e="","object"==typeof arguments[i]){for(var o in e+="\n["+i+"] ",t)e+=o+": "+arguments[0][o]+", ";e=e.slice(0,-2)}else e=arguments[i];n.push(e)}x(a+"\nArguments: "+Array.prototype.slice.call(n).join("")+"\n"+(new Error).stack),s=!1}return r.apply(this,arguments)},r)}function L(t,e){null!=u.deprecationHandler&&u.deprecationHandler(t,e),Ii[t]||(x(e),Ii[t]=!0)}function S(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function k(t){var e,n;for(n in t)S(e=t[n])?this[n]=e:this["_"+n]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function D(t,e){var n,i=h({},t);for(n in e)c(e,n)&&(s(t[n])&&s(e[n])?(i[n]={},h(i[n],t[n]),h(i[n],e[n])):null!=e[n]?i[n]=e[n]:delete i[n]);for(n in t)c(t,n)&&!c(e,n)&&s(t[n])&&(i[n]=h({},i[n]));return i}function T(t){null!=t&&this.set(t)}function M(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return S(i)?i.call(e,n):i}function P(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function E(){return this._invalidDate}function I(t){return this._ordinal.replace("%d",t)}function A(t,e,n,i){var o=this._relativeTime[n];return S(o)?o(t,e,n,i):o.replace(/%d/i,t)}function O(t,e){var n=this._relativeTime[0<t?"future":"past"];return S(n)?n(e):n.replace(/%s/i,e)}function F(t,e){var n=t.toLowerCase();zi[n]=zi[n+"s"]=zi[e]=t}function N(t){return"string"==typeof t?zi[t]||zi[t.toLowerCase()]:undefined}function R(t){var e,n,i={};for(n in t)c(t,n)&&(e=N(n))&&(i[e]=t[n]);return i}function B(t,e){Ui[t]=e}function z(t){var e=[];for(var n in t)e.push({unit:n,priority:Ui[n]});return e.sort(function(t,e){return t.priority-e.priority}),e}function U(t,e,n){var i=""+Math.abs(t),o=e-i.length;return(0<=t?n?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+i}function j(t,e,n,i){var o=i;"string"==typeof i&&(o=function(){return this[i]()}),t&&(Wi[t]=o),e&&(Wi[e[0]]=function(){return U(o.apply(this,arguments),e[1],e[2])}),n&&(Wi[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function $(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function H(i){var t,o,a=i.match(ji);for(t=0,o=a.length;t<o;t++)Wi[a[t]]?a[t]=Wi[a[t]]:a[t]=$(a[t]);return function(t){var e,n="";for(e=0;e<o;e++)n+=S(a[e])?a[e].call(t,i):a[e];return n}}function W(t,e){return t.isValid()?(e=V(e,t.localeData()),Hi[e]=Hi[e]||H(e),Hi[e](t)):t.localeData().invalidDate()}function V(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for($i.lastIndex=0;0<=i&&$i.test(t);)t=t.replace($i,n),$i.lastIndex=0,i-=1;return t}function Y(t,e,n){lo[t]=S(e)?e:function(t){return t&&n?n:e}}function q(t,e){return c(lo,t)?lo[t](e._strict,e._locale):new RegExp(Z(t))}function Z(t){return G(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,o){return e||n||i||o}))}function G(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function K(t,n){var e,i=n;for("string"==typeof t&&(t=[t]),d(n)&&(i=function(t,e){e[n]=b(t)}),e=0;e<t.length;e++)uo[t[e]]=i}function J(t,o){K(t,function(t,e,n,i){n._w=n._w||{},o(t,n._w,n,i)})}function X(t,e,n){null!=e&&c(uo,t)&&uo[t](e,n._a,n,t)}function Q(t){return tt(t)?366:365}function tt(t){return t%4==0&&t%100!=0||t%400==0}function et(){return tt(this.year())}function nt(e,n){return function(t){return null!=t?(ot(this,e,t),u.updateOffset(this,n),this):it(this,e)}}function it(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function ot(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&tt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),lt(n,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function at(t){return S(this[t=N(t)])?this[t]():this}function rt(t,e){if("object"==typeof t)for(var n=z(t=R(t)),i=0;i<n.length;i++)this[n[i].unit](t[n[i].unit]);else if(S(this[t=N(t)]))return this[t](e);return this}function st(t,e){return(t%e+e)%e}function lt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=st(e,12);return t+=(e-n)/12,1===n?tt(t)?29:28:31-n%7%2}function ut(t,e){return t?r(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||xo).test(e)?"format":"standalone"][t.month()]:r(this._months)?this._months:this._months.standalone}function dt(t,e){return t?r(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[xo.test(e)?"format":"standalone"][t.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ct(t,e,n){var i,o,a,r=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)a=f([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(o=bo.call(this._shortMonthsParse,r))?o:null:-1!==(o=bo.call(this._longMonthsParse,r))?o:null:"MMM"===e?-1!==(o=bo.call(this._shortMonthsParse,r))?o:-1!==(o=bo.call(this._longMonthsParse,r))?o:null:-1!==(o=bo.call(this._longMonthsParse,r))?o:-1!==(o=bo.call(this._shortMonthsParse,r))?o:null}function ht(t,e,n){var i,o,a;if(this._monthsParseExact)return ct.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(o=f([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(a="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function ft(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=b(e);else if(!d(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),lt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function pt(t){return null!=t?(ft(this,t),u.updateOffset(this,!0),this):it(this,"Month")}function mt(){return lt(this.year(),this.month())}function gt(t){return this._monthsParseExact?(c(this,"_monthsRegex")||yt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=So),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function vt(t){return this._monthsParseExact?(c(this,"_monthsRegex")||yt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=ko),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function yt(){function t(t,e){return e.length-t.length}var e,n,i=[],o=[],a=[];for(e=0;e<12;e++)n=f([2e3,e]),i.push(this.monthsShort(n,"")),o.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(i.sort(t),o.sort(t),a.sort(t),e=0;e<12;e++)i[e]=G(i[e]),o[e]=G(o[e]);for(e=0;e<24;e++)a[e]=G(a[e]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function _t(t,e,n,i,o,a,r){var s=new Date(t,e,n,i,o,a,r);return t<100&&0<=t&&isFinite(s.getFullYear())&&s.setFullYear(t),s}function bt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&0<=t&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function wt(t,e,n){var i=7+e-n;return-((7+bt(t,0,i).getUTCDay()-e)%7)+i-1}function xt(t,e,n,i,o){var a,r,s=1+7*(e-1)+(7+n-i)%7+wt(t,i,o);return s<=0?r=Q(a=t-1)+s:s>Q(t)?(a=t+1,r=s-Q(t)):(a=t,r=s),{year:a,dayOfYear:r}}function Ct(t,e,n){var i,o,a=wt(t.year(),e,n),r=Math.floor((t.dayOfYear()-a-1)/7)+1;return r<1?i=r+Lt(o=t.year()-1,e,n):r>Lt(t.year(),e,n)?(i=r-Lt(t.year(),e,n),o=t.year()+1):(o=t.year(),i=r),{week:i,year:o}}function Lt(t,e,n){var i=wt(t,e,n),o=wt(t+1,e,n);return(Q(t)-i+o)/7}function St(t){return Ct(t,this._week.dow,this._week.doy).week}function kt(){return this._week.dow}function Dt(){return this._week.doy}function Tt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Mt(t){var e=Ct(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Pt(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}function Et(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function It(t,e){return t?r(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:r(this._weekdays)?this._weekdays:this._weekdays.standalone}function At(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Ot(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Ft(t,e,n){var i,o,a,r=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)a=f([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(o=bo.call(this._weekdaysParse,r))?o:null:"ddd"===e?-1!==(o=bo.call(this._shortWeekdaysParse,r))?o:null:-1!==(o=bo.call(this._minWeekdaysParse,r))?o:null:"dddd"===e?-1!==(o=bo.call(this._weekdaysParse,r))?o:-1!==(o=bo.call(this._shortWeekdaysParse,r))?o:-1!==(o=bo.call(this._minWeekdaysParse,r))?o:null:"ddd"===e?-1!==(o=bo.call(this._shortWeekdaysParse,r))?o:-1!==(o=bo.call(this._weekdaysParse,r))?o:-1!==(o=bo.call(this._minWeekdaysParse,r))?o:null:-1!==(o=bo.call(this._minWeekdaysParse,r))?o:-1!==(o=bo.call(this._weekdaysParse,r))?o:-1!==(o=bo.call(this._shortWeekdaysParse,r))?o:null}function Nt(t,e,n){var i,o,a;if(this._weekdaysParseExact)return Ft.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(o=f([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(o,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(o,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(o,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(a="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}}function Rt(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Pt(t,this.localeData()),this.add(t-e,"d")):e}function Bt(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function zt(t){if(!this.isValid())return null!=t?this:NaN;if(null==t)return this.day()||7;var e=Et(t,this.localeData());return this.day(this.day()%7?e:e-7)}function Ut(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ht.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=Eo),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function jt(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ht.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Io),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function $t(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ht.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ao),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ht(){function t(t,e){return e.length-t.length}var e,n,i,o,a,r=[],s=[],l=[],u=[];for(e=0;e<7;e++)n=f([2e3,1]).day(e),i=this.weekdaysMin(n,""),o=this.weekdaysShort(n,""),a=this.weekdays(n,""),r.push(i),s.push(o),l.push(a),u.push(i),u.push(o),u.push(a);for(r.sort(t),s.sort(t),l.sort(t),u.sort(t),e=0;e<7;e++)s[e]=G(s[e]),l[e]=G(l[e]),u[e]=G(u[e]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Wt(){return this.hours()%12||12}function Vt(){return this.hours()||24}function Yt(t,e){j(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function qt(t,e){return e._meridiemParse}function Zt(t){return"p"===(t+"").toLowerCase().charAt(0)}function Gt(t,e,n){return 11<t?n?"pm":"PM":n?"am":"AM"}function Kt(t){return t?t.toLowerCase().replace("_","-"):t}function Jt(t){for(var e,n,i,o,a=0;a<t.length;){for(e=(o=Kt(t[a]).split("-")).length,n=(n=Kt(t[a+1]))?n.split("-"):null;0<e;){if(i=Xt(o.slice(0,e).join("-")))return i;if(n&&n.length>=e&&w(o,n,!0)>=e-1)break;e--}a++}return null}function Xt(t){var e=null;if(!Bo[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=Oo._abbr,require("./locale/"+t),Qt(e)}catch(n){}return Bo[t]}function Qt(t,e){var n;return t&&(n=a(e)?ne(t):te(t,e))&&(Oo=n),Oo._abbr}function te(t,e){if(null===e)return delete Bo[t],null;var n=Ro;if(e.abbr=t,null!=Bo[t])L("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Bo[t]._config;else if(null!=e.parentLocale){if(null==Bo[e.parentLocale])return zo[e.parentLocale]||(zo[e.parentLocale]=[]),zo[e.parentLocale].push({name:t,config:e}),null;n=Bo[e.parentLocale]._config}return Bo[t]=new T(D(n,e)),zo[t]&&zo[t].forEach(function(t){te(t.name,t.config)}),Qt(t),Bo[t]}function ee(t,e){if(null!=e){var n,i,o=Ro;null!=(i=Xt(t))&&(o=i._config),(n=new T(e=D(o,e))).parentLocale=Bo[t],Bo[t]=n,Qt(t)}else null!=Bo[t]&&(null!=Bo[t].parentLocale?Bo[t]=Bo[t].parentLocale:null!=Bo[t]&&delete Bo[t]);return Bo[t]}function ne(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Oo;if(!r(t)){if(e=Xt(t))return e
;t=[t]}return Jt(t)}function ie(){return Mi(Bo)}function oe(t){var e,n=t._a;return n&&-2===p(t).overflow&&(e=n[ho]<0||11<n[ho]?ho:n[fo]<1||n[fo]>lt(n[co],n[ho])?fo:n[po]<0||24<n[po]||24===n[po]&&(0!==n[mo]||0!==n[go]||0!==n[vo])?po:n[mo]<0||59<n[mo]?mo:n[go]<0||59<n[go]?go:n[vo]<0||999<n[vo]?vo:-1,p(t)._overflowDayOfYear&&(e<co||fo<e)&&(e=fo),p(t)._overflowWeeks&&-1===e&&(e=yo),p(t)._overflowWeekday&&-1===e&&(e=_o),p(t).overflow=e),t}function ae(t,e,n){return null!=t?t:null!=e?e:n}function re(t){var e=new Date(u.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function se(t){var e,n,i,o,a,r=[];if(!t._d){for(i=re(t),t._w&&null==t._a[fo]&&null==t._a[ho]&&le(t),null!=t._dayOfYear&&(a=ae(t._a[co],i[co]),(t._dayOfYear>Q(a)||0===t._dayOfYear)&&(p(t)._overflowDayOfYear=!0),n=bt(a,0,t._dayOfYear),t._a[ho]=n.getUTCMonth(),t._a[fo]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=r[e]=i[e];for(;e<7;e++)t._a[e]=r[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[po]&&0===t._a[mo]&&0===t._a[go]&&0===t._a[vo]&&(t._nextDay=!0,t._a[po]=0),t._d=(t._useUTC?bt:_t).apply(null,r),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[po]=24),t._w&&"undefined"!=typeof t._w.d&&t._w.d!==o&&(p(t).weekdayMismatch=!0)}}function le(t){var e,n,i,o,a,r,s,l;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)a=1,r=4,n=ae(e.GG,t._a[co],Ct(Se(),1,4).year),i=ae(e.W,1),((o=ae(e.E,1))<1||7<o)&&(l=!0);else{a=t._locale._week.dow,r=t._locale._week.doy;var u=Ct(Se(),a,r);n=ae(e.gg,t._a[co],u.year),i=ae(e.w,u.week),null!=e.d?((o=e.d)<0||6<o)&&(l=!0):null!=e.e?(o=e.e+a,(e.e<0||6<e.e)&&(l=!0)):o=a}i<1||i>Lt(n,a,r)?p(t)._overflowWeeks=!0:null!=l?p(t)._overflowWeekday=!0:(s=xt(n,i,o,a,r),t._a[co]=s.year,t._dayOfYear=s.dayOfYear)}function ue(t){var e,n,i,o,a,r,s=t._i,l=Uo.exec(s)||jo.exec(s);if(l){for(p(t).iso=!0,e=0,n=Ho.length;e<n;e++)if(Ho[e][1].exec(l[1])){o=Ho[e][0],i=!1!==Ho[e][2];break}if(null==o)return void(t._isValid=!1);if(l[3]){for(e=0,n=Wo.length;e<n;e++)if(Wo[e][1].exec(l[3])){a=(l[2]||" ")+Wo[e][0];break}if(null==a)return void(t._isValid=!1)}if(!i&&null!=a)return void(t._isValid=!1);if(l[4]){if(!$o.exec(l[4]))return void(t._isValid=!1);r="Z"}t._f=o+(a||"")+(r||""),ve(t)}else t._isValid=!1}function de(t,e,n,i,o,a){var r=[ce(t),Lo.indexOf(e),parseInt(n,10),parseInt(i,10),parseInt(o,10)];return a&&r.push(parseInt(a,10)),r}function ce(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function he(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function fe(t,e,n){if(t&&Mo.indexOf(t)!==new Date(e[0],e[1],e[2]).getDay())return p(n).weekdayMismatch=!0,n._isValid=!1;return!0}function pe(t,e,n){if(t)return qo[t];if(e)return 0;var i=parseInt(n,10),o=i%100;return 60*((i-o)/100)+o}function me(t){var e=Yo.exec(he(t._i));if(e){var n=de(e[4],e[3],e[2],e[5],e[6],e[7]);if(!fe(e[1],n,t))return;t._a=n,t._tzm=pe(e[8],e[9],e[10]),t._d=bt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),p(t).rfc2822=!0}else t._isValid=!1}function ge(t){var e=Vo.exec(t._i);null===e?(ue(t),!1===t._isValid&&(delete t._isValid,me(t),!1===t._isValid&&(delete t._isValid,u.createFromInputFallback(t)))):t._d=new Date(+e[1])}function ve(t){if(t._f!==u.ISO_8601)if(t._f!==u.RFC_2822){t._a=[],p(t).empty=!0;var e,n,i,o,a,r=""+t._i,s=r.length,l=0;for(i=V(t._f,t._locale).match(ji)||[],e=0;e<i.length;e++)o=i[e],(n=(r.match(q(o,t))||[])[0])&&(0<(a=r.substr(0,r.indexOf(n))).length&&p(t).unusedInput.push(a),r=r.slice(r.indexOf(n)+n.length),l+=n.length),Wi[o]?(n?p(t).empty=!1:p(t).unusedTokens.push(o),X(o,n,t)):t._strict&&!n&&p(t).unusedTokens.push(o);p(t).charsLeftOver=s-l,0<r.length&&p(t).unusedInput.push(r),t._a[po]<=12&&!0===p(t).bigHour&&0<t._a[po]&&(p(t).bigHour=undefined),p(t).parsedDateParts=t._a.slice(0),p(t).meridiem=t._meridiem,t._a[po]=ye(t._locale,t._a[po],t._meridiem),se(t),oe(t)}else me(t);else ue(t)}function ye(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):(null!=t.isPM&&((i=t.isPM(n))&&e<12&&(e+=12),i||12!==e||(e=0)),e)}function _e(t){var e,n,i,o,a;if(0===t._f.length)return p(t).invalidFormat=!0,void(t._d=new Date(NaN));for(o=0;o<t._f.length;o++)a=0,e=g({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],ve(e),m(e)&&(a+=p(e).charsLeftOver,a+=10*p(e).unusedTokens.length,p(e).score=a,(null==i||a<i)&&(i=a,n=e));h(t,n||e)}function be(t){if(!t._d){var e=R(t._i);t._a=n([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),se(t)}}function we(t){var e=new v(oe(xe(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=undefined),e}function xe(t){var e=t._i,n=t._f;return t._locale=t._locale||ne(t._l),null===e||n===undefined&&""===e?i({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),y(e)?new v(oe(e)):(o(e)?t._d=e:r(n)?_e(t):n?ve(t):Ce(t),m(t)||(t._d=null),t))}function Ce(t){var e=t._i;a(e)?t._d=new Date(u.now()):o(e)?t._d=new Date(e.valueOf()):"string"==typeof e?ge(t):r(e)?(t._a=n(e.slice(0),function(t){return parseInt(t,10)}),se(t)):s(e)?be(t):d(e)?t._d=new Date(e):u.createFromInputFallback(t)}function Le(t,e,n,i,o){var a={};return!0!==n&&!1!==n||(i=n,n=undefined),(s(t)&&l(t)||r(t)&&0===t.length)&&(t=undefined),a._isAMomentObject=!0,a._useUTC=a._isUTC=o,a._l=n,a._i=t,a._f=e,a._strict=i,we(a)}function Se(t,e,n,i){return Le(t,e,n,i,!1)}function ke(t,e){var n,i;if(1===e.length&&r(e[0])&&(e=e[0]),!e.length)return Se();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}function De(){return ke("isBefore",[].slice.call(arguments,0))}function Te(){return ke("isAfter",[].slice.call(arguments,0))}function Me(t){for(var e in t)if(-1===bo.call(Jo,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var n=!1,i=0;i<Jo.length;++i)if(t[Jo[i]]){if(n)return!1;parseFloat(t[Jo[i]])!==b(t[Jo[i]])&&(n=!0)}return!0}function Pe(){return this._isValid}function Ee(){return Ke(NaN)}function Ie(t){var e=R(t),n=e.year||0,i=e.quarter||0,o=e.month||0,a=e.week||0,r=e.day||0,s=e.hour||0,l=e.minute||0,u=e.second||0,d=e.millisecond||0;this._isValid=Me(e),this._milliseconds=+d+1e3*u+6e4*l+1e3*s*60*60,this._days=+r+7*a,this._months=+o+3*i+12*n,this._data={},this._locale=ne(),this._bubble()}function Ae(t){return t instanceof Ie}function Oe(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Fe(t,n){j(t,0,0,function(){var t=this.utcOffset(),e="+";return t<0&&(t=-t,e="-"),e+U(~~(t/60),2)+n+U(~~t%60,2)})}function Ne(t,e){var n=(e||"").match(t);if(null===n)return null;var i=((n[n.length-1]||[])+"").match(Xo)||["-",0,0],o=60*i[1]+b(i[2]);return 0===o?0:"+"===i[0]?o:-o}function Re(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(y(t)||o(t)?t.valueOf():Se(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),u.updateOffset(n,!1),n):Se(t).local()}function Be(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function ze(t,e,n){var i,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null==t)return this._isUTC?o:Be(this);if("string"==typeof t){if(null===(t=Ne(ao,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(i=Be(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==t&&(!e||this._changeInProgress?en(this,Ke(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,u.updateOffset(this,!0),this._changeInProgress=null)),this}function Ue(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function je(t){return this.utcOffset(0,t)}function $e(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Be(this),"m")),this}function He(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Ne(oo,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function We(t){return!!this.isValid()&&(t=t?Se(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function Ve(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ye(){if(!a(this._isDSTShifted))return this._isDSTShifted;var t={};if(g(t,this),(t=xe(t))._a){var e=t._isUTC?f(t._a):Se(t._a);this._isDSTShifted=this.isValid()&&0<w(t._a,e.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted}function qe(){return!!this.isValid()&&!this._isUTC}function Ze(){return!!this.isValid()&&this._isUTC}function Ge(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Ke(t,e){var n,i,o,a=t,r=null;return Ae(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:d(t)?(a={},e?a[e]=t:a.milliseconds=t):(r=Qo.exec(t))?(n="-"===r[1]?-1:1,a={y:0,d:b(r[fo])*n,h:b(r[po])*n,m:b(r[mo])*n,s:b(r[go])*n,ms:b(Oe(1e3*r[vo]))*n}):(r=ta.exec(t))?(n="-"===r[1]?-1:(r[1],1),a={y:Je(r[2],n),M:Je(r[3],n),w:Je(r[4],n),d:Je(r[5],n),h:Je(r[6],n),m:Je(r[7],n),s:Je(r[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(o=Qe(Se(a.from),Se(a.to)),(a={}).ms=o.milliseconds,a.M=o.months),i=new Ie(a),Ae(t)&&c(t,"_locale")&&(i._locale=t._locale),i}function Je(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Xe(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Qe(t,e){var n;return t.isValid()&&e.isValid()?(e=Re(e,t),t.isBefore(e)?n=Xe(t,e):((n=Xe(e,t)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function tn(i,o){return function(t,e){var n;return null===e||isNaN(+e)||(L(o,"moment()."+o+"(period, number) is deprecated. Please use moment()."+o+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=t,t=e,e=n),en(this,Ke(t="string"==typeof t?+t:t,e),i),this}}function en(t,e,n,i){var o=e._milliseconds,a=Oe(e._days),r=Oe(e._months);t.isValid()&&(i=null==i||i,r&&ft(t,it(t,"Month")+r*n),a&&ot(t,"Date",it(t,"Date")+a*n),o&&t._d.setTime(t._d.valueOf()+o*n),i&&u.updateOffset(t,a||r))}function nn(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function on(t,e){var n=t||Se(),i=Re(n,this).startOf("day"),o=u.calendarFormat(this,i)||"sameElse",a=e&&(S(e[o])?e[o].call(this,n):e[o]);return this.format(a||this.localeData().calendar(o,this,Se(n)))}function an(){return new v(this)}function rn(t,e){var n=y(t)?t:Se(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=N(a(e)?"millisecond":e))?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())}function sn(t,e){var n=y(t)?t:Se(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=N(a(e)?"millisecond":e))?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())}function ln(t,e,n,i){return("("===(i=i||"()")[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===i[1]?this.isBefore(e,n):!this.isAfter(e,n))}function un(t,e){var n,i=y(t)?t:Se(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=N(e||"millisecond"))?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))}function dn(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function cn(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function hn(t,e,n){var i,o,a;if(!this.isValid())return NaN;if(!(i=Re(t,this)).isValid())return NaN;switch(o=6e4*(i.utcOffset()-this.utcOffset()),e=N(e)){case"year":a=fn(this,i)/12;break;case"month":a=fn(this,i);break;case"quarter":a=fn(this,i)/3;break;case"second":a=(this-i)/1e3;break;case"minute":a=(this-i)/6e4;break;case"hour":a=(this-i)/36e5;break;case"day":a=(this-i-o)/864e5;break;case"week":a=(this-i-o)/6048e5;break;default:a=this-i}return n?a:_(a)}function fn(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(n,"months");return-(n+(e-i<0?(e-i)/(i-t.clone().add(n-1,"months")):(e-i)/(t.clone().add(n+1,"months")-i)))||0}function pn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function mn(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||9999<n.year()?W(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):S(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this._d.valueOf()).toISOString().replace("Z",W(n,"Z")):W(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function gn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var n="["+t+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o="-MM-DD[T]HH:mm:ss.SSS",a=e+'[")]';return this.format(n+i+o+a)}function vn(t){t||(t=this.isUtc()?u.defaultFormatUtc:u.defaultFormat);var e=W(this,t);return this.localeData().postformat(e)}function yn(t,e){return this.isValid()&&(y(t)&&t.isValid()||Se(t).isValid())?Ke({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function _n(t){return this.from(Se(),t)}function bn(t,e){return this.isValid()&&(y(t)&&t.isValid()||Se(t).isValid())?Ke({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function wn(t){return this.to(Se(),t)}function xn(t){var e;return t===undefined?this._locale._abbr:(null!=(e=ne(t))&&(this._locale=e),this)}function Cn(){return this._locale}function Ln(t){switch(t=N(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function Sn(t){return(t=N(t))===undefined||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function kn(){return this._d.valueOf()-6e4*(this._offset||0)}function Dn(){return Math.floor(this.valueOf()/1e3)}function Tn(){return new Date(this.valueOf())}function Mn(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Pn(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function En(){return this.isValid()?this.toISOString():null}function In(){return m(this)}function An(){return h({},p(this))}function On(){return p(this).overflow}function Fn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Nn(t,e){j(0,[t,t.length],0,e)}function Rn(t){return jn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Bn(t){return jn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function zn(){return Lt(this.year(),1,4)}function Un(){var t=this.localeData()._week;return Lt(this.year(),t.dow,t.doy)}function jn(t,e,n,i,o){var a;return null==t?Ct(this,i,o).year:((a=Lt(t,i,o))<e&&(e=a),$n.call(this,t,e,n,i,o))}function $n(t,e,n,i,o){var a=xt(t,e,n,i,o),r=bt(a.year,0,a.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}function Hn(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Wn(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function Vn(t,e){e[vo]=b(1e3*("0."+t))}function Yn(){return this._isUTC?"UTC":""}function qn(){return this._isUTC?"Coordinated Universal Time":""}function Zn(t){return Se(1e3*t)}function Gn(){return Se.apply(null,arguments).parseZone()}function Kn(t){return t}function Jn(t,e,n,i){var o=ne(),a=f().set(i,e);return o[n](a,t)}function Xn(t,e,n){if(d(t)&&(e=t,t=undefined),t=t||"",null!=e)return Jn(t,e,n,"month");var i,o=[];for(i=0;i<12;i++)o[i]=Jn(t,i,n,"month");return o}function Qn(t,e,n,i){"boolean"==typeof t?d(e)&&(n=e,e=undefined):(e=t,t=!1,d(n=e)&&(n=e,e=undefined)),e=e||"";var o,a=ne(),r=t?a._week.dow:0;if(null!=n)return Jn(e,(n+r)%7,i,"day");var s=[];for(o=0;o<7;o++)s[o]=Jn(e,(o+r)%7,i,"day");return s}function ti(t,e){return Xn(t,e,"months")}function ei(t,e){return Xn(t,e,"monthsShort")}function ni(t,e,n){return Qn(t,e,n,"weekdays")}function ii(t,e,n){return Qn(t,e,n,"weekdaysShort")}function oi(t,e,n){return Qn(t,e,n,"weekdaysMin")}function ai(){var t=this._data;return this._milliseconds=ca(this._milliseconds),this._days=ca(this._days),this._months=ca(this._months),t.milliseconds=ca(t.milliseconds),t.seconds=ca(t.seconds),t.minutes=ca(t.minutes),t.hours=ca(t.hours),t.months=ca(t.months),t.years=ca(t.years),this}function ri(t,e,n,i){var o=Ke(e,n);return t._milliseconds+=i*o._milliseconds,t._days+=i*o._days,t._months+=i*o._months,t._bubble()}function si(t,e){return ri(this,t,e,1)}function li(t,e){return ri(this,t,e,-1)}function ui(t){return t<0?Math.floor(t):Math.ceil(t)}function di(){var t,e,n,i,o,a=this._milliseconds,r=this._days,s=this._months,l=this._data;return 0<=a&&0<=r&&0<=s||a<=0&&r<=0&&s<=0||(a+=864e5*ui(hi(s)+r),s=r=0),l.milliseconds=a%1e3,t=_(a/1e3),l.seconds=t%60,e=_(t/60),l.minutes=e%60,n=_(e/60),l.hours=n%24,s+=o=_(ci(r+=_(n/24))),r-=ui(hi(o)),i=_(s/12),s%=12,l.days=r,l.months=s,l.years=i,this}function ci(t){return 4800*t/146097}function hi(t){return 146097*t/4800}function fi(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if("month"===(t=N(t))||"year"===t)return e=this._days+i/864e5,n=this._months+ci(e),"month"===t?n:n/12;switch(e=this._days+Math.round(hi(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}}function pi(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12):NaN}function mi(t){return function(){return this.as(t)}}function gi(){return Ke(this)}function vi(t){return t=N(t),this.isValid()?this[t+"s"]():NaN}function yi(t){return function(){return this.isValid()?this._data[t]:NaN}}function _i(){return _(this.days()/7)}function bi(t,e,n,i,o){return o.relativeTime(e||1,!!n,t,i)}function wi(t,e,n){var i=Ke(t).abs(),o=Da(i.as("s")),a=Da(i.as("m")),r=Da(i.as("h")),s=Da(i.as("d")),l=Da(i.as("M")),u=Da(i.as("y")),d=o<=Ta.ss&&["s",o]||o<Ta.s&&["ss",o]||a<=1&&["m"]||a<Ta.m&&["mm",a]||r<=1&&["h"]||r<Ta.h&&["hh",r]||s<=1&&["d"]||s<Ta.d&&["dd",s]||l<=1&&["M"]||l<Ta.M&&["MM",l]||u<=1&&["y"]||["yy",u];return d[2]=e,d[3]=0<+t,d[4]=n,bi.apply(null,d)}function xi(t){return t===undefined?Da:"function"==typeof t&&(Da=t,!0)}function Ci(t,e){return Ta[t]!==undefined&&(e===undefined?Ta[t]:(Ta[t]=e,"s"===t&&(Ta.ss=e-1),!0))}function Li(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),n=wi(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function Si(t){return(0<t)-(t<0)||+t}function ki(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n=Ma(this._milliseconds)/1e3,i=Ma(this._days),o=Ma(this._months);e=_((t=_(n/60))/60),n%=60,t%=60;var a=_(o/12),r=o%=12,s=i,l=e,u=t,d=n?n.toFixed(3).replace(/\.?0+$/,""):"",c=this.asSeconds();if(!c)return"P0D";var h=c<0?"-":"",f=Si(this._months)!==Si(c)?"-":"",p=Si(this._days)!==Si(c)?"-":"",m=Si(this._milliseconds)!==Si(c)?"-":"";return h+"P"+(a?f+a+"Y":"")+(r?f+r+"M":"")+(s?p+s+"D":"")+(l||u||d?"T":"")+(l?m+l+"H":"")+(u?m+u+"M":"")+(d?m+d+"S":"")}var Di,Ti;Ti=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1};var Mi,Pi=u.momentProperties=[],Ei=!1,Ii={};u.suppressDeprecationWarnings=!1,u.deprecationHandler=null,Mi=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)c(t,e)&&n.push(e);return n};var Ai={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Oi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Fi="Invalid date",Ni="%d",Ri=/\d{1,2}/,Bi={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},zi={},Ui={},ji=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,$i=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Hi={},Wi={},Vi=/\d/,Yi=/\d\d/,qi=/\d{3}/,Zi=/\d{4}/,Gi=/[+-]?\d{6}/,Ki=/\d\d?/,Ji=/\d\d\d\d?/,Xi=/\d\d\d\d\d\d?/,Qi=/\d{1,3}/,to=/\d{1,4}/,eo=/[+-]?\d{1,6}/,no=/\d+/,io=/[+-]?\d+/,oo=/Z|[+-]\d\d:?\d\d/gi,ao=/Z|[+-]\d\d(?::?\d\d)?/gi,ro=/[+-]?\d+(\.\d{1,3})?/,so=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,lo={},uo={},co=0,ho=1,fo=2,po=3,mo=4,go=5,vo=6,yo=7,_o=8;j("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),j(0,["YY",2],0,function(){return this.year()%100}),j(0,["YYYY",4],0,"year"),j(0,["YYYYY",5],0,"year"),j(0,["YYYYYY",6,!0],0,"year"),F("year","y"),B("year",1),Y("Y",io),Y("YY",Ki,Yi),Y("YYYY",to,Zi),Y("YYYYY",eo,Gi),Y("YYYYYY",eo,Gi),K(["YYYYY","YYYYYY"],co),K("YYYY",function(t,e){e[co]=2===t.length?u.parseTwoDigitYear(t):b(t)}),K("YY",function(t,e){e[co]=u.parseTwoDigitYear(t)}),K("Y",function(t,e){e[co]=parseInt(t,10)}),u.parseTwoDigitYear=function(t){return b(t)+(68<b(t)?1900:2e3)};var bo,wo=nt("FullYear",!0);bo=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},j("M",["MM",2],"Mo",function(){return this.month()+1}),j("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),j("MMMM",0,0,function(t){return this.localeData().months(this,t)}),F("month","M"),B("month",8),Y("M",Ki),Y("MM",Ki,Yi),Y("MMM",function(t,e){return e.monthsShortRegex(t)}),Y("MMMM",function(t,e){return e.monthsRegex(t)}),K(["M","MM"],function(t,e){e[ho]=b(t)-1}),K(["MMM","MMMM"],function(t,e,n,i){var o=n._locale.monthsParse(t,i,n._strict);null!=o?e[ho]=o:p(n).invalidMonth=t});var xo=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Co="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Lo="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),So=so,ko=so;j("w",["ww",2],"wo","week"),j("W",["WW",2],"Wo","isoWeek"),F("week","w"),F("isoWeek","W"),B("week",5),B("isoWeek",5),Y("w",Ki),Y("ww",Ki,Yi),Y("W",Ki),Y("WW",Ki,Yi),J(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=b(t)});var Do={dow:0,doy:6};j("d",0,"do","day"),j("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),j("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),j("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),j("e",0,0,"weekday"),j("E",0,0,"isoWeekday"),F("day","d"),F("weekday","e"),F("isoWeekday","E"),B("day",11),B("weekday",11),B("isoWeekday",11),Y("d",Ki),Y("e",Ki),Y("E",Ki),Y("dd",function(t,e){return e.weekdaysMinRegex(t)}),Y("ddd",function(t,e){return e.weekdaysShortRegex(t)}),Y("dddd",function(t,e){return e.weekdaysRegex(t)}),J(["dd","ddd","dddd"],function(t,e,n,i){var o=n._locale.weekdaysParse(t,i,n._strict);null!=o?e.d=o:p(n).invalidWeekday=t}),J(["d","e","E"],function(t,e,n,i){e[i]=b(t)});var To="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Mo="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Po="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Eo=so,Io=so,Ao=so;j("H",["HH",2],0,"hour"),j("h",["hh",2],0,Wt),j("k",["kk",2],0,Vt),j("hmm",0,0,function(){return""+Wt.apply(this)+U(this.minutes(),2)}),j("hmmss",0,0,function(){return""+Wt.apply(this)+U(this.minutes(),2)+U(this.seconds(),2)}),j("Hmm",0,0,function(){return""+this.hours()+U(this.minutes(),2)}),j("Hmmss",0,0,function(){return""+this.hours()+U(this.minutes(),2)+U(this.seconds(),2)}),Yt("a",!0),Yt("A",!1),F("hour","h"),B("hour",13),Y("a",qt),Y("A",qt),Y("H",Ki),Y("h",Ki),Y("k",Ki),Y("HH",Ki,Yi),Y("hh",Ki,Yi),Y("kk",Ki,Yi),Y("hmm",Ji),Y("hmmss",Xi),Y("Hmm",Ji),Y("Hmmss",Xi),K(["H","HH"],po),K(["k","kk"],function(t,e){var n=b(t);e[po]=24===n?0:n}),K(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),K(["h","hh"],function(t,e,n){e[po]=b(t),p(n).bigHour=!0}),K("hmm",function(t,e,n){var i=t.length-2;e[po]=b(t.substr(0,i)),e[mo]=b(t.substr(i)),p(n).bigHour=!0}),K("hmmss",function(t,e,n){var i=t.length-4,o=t.length-2;e[po]=b(t.substr(0,i)),e[mo]=b(t.substr(i,2)),e[go]=b(t.substr(o)),p(n).bigHour=!0}),K("Hmm",function(t,e){var n=t.length-2;e[po]=b(t.substr(0,n)),e[mo]=b(t.substr(n))}),K("Hmmss",function(t,e){var n=t.length-4,i=t.length-2;e[po]=b(t.substr(0,n)),e[mo]=b(t.substr(n,2)),e[go]=b(t.substr(i))});var Oo,Fo=/[ap]\.?m?\.?/i,No=nt("Hours",!0),Ro={calendar:Ai,longDateFormat:Oi,invalidDate:Fi,ordinal:Ni,dayOfMonthOrdinalParse:Ri,relativeTime:Bi,months:Co,monthsShort:Lo,week:Do,weekdays:To,weekdaysMin:Po,weekdaysShort:Mo,meridiemParse:Fo},Bo={},zo={},Uo=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,jo=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,$o=/Z|[+-]\d\d(?::?\d\d)?/,Ho=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Wo=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Vo=/^\/?Date\((\-?\d+)/i,Yo=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,qo={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};u.createFromInputFallback=C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),u.ISO_8601=function(){},u.RFC_2822=function(){};var Zo=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:i()}),Go=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?this<t?this:t:i()}),Ko=function(){return Date.now?Date.now():+new Date},Jo=["year","quarter","month","week","day","hour","minute","second","millisecond"];Fe("Z",":"),Fe("ZZ",""),Y("Z",ao),Y("ZZ",ao),K(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Ne(ao,t)});var Xo=/([\+\-]|\d\d)/gi;u.updateOffset=function(){};var Qo=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,ta=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Ke.fn=Ie.prototype,Ke.invalid=Ee;var ea=tn(1,"add"),na=tn(-1,"subtract");u.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",u.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ia=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===undefined?this.localeData():this.locale(t)});j(0,["gg",2],0,function(){return this.weekYear()%100}),j(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Nn("gggg","weekYear"),Nn("ggggg","weekYear"),Nn("GGGG","isoWeekYear"),Nn("GGGGG","isoWeekYear"),F("weekYear","gg"),F("isoWeekYear","GG"),B("weekYear",1),B("isoWeekYear",1),Y("G",io),Y("g",io),Y("GG",Ki,Yi),Y("gg",Ki,Yi),Y("GGGG",to,Zi),Y("gggg",to,Zi),Y("GGGGG",eo,Gi),Y("ggggg",eo,Gi),J(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=b(t)}),J(["gg","GG"],function(t,e,n,i){e[i]=u.parseTwoDigitYear(t)}),j("Q",0,"Qo","quarter"),F("quarter","Q"),B("quarter",7),Y("Q",Vi),K("Q",function(t,e){e[ho]=3*(b(t)-1)}),j("D",["DD",2],"Do","date"),F("date","D"),B("date",9),Y("D",Ki),Y("DD",Ki,Yi),Y("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),K(["D","DD"],fo),K("Do",function(t,e){e[fo]=b(t.match(Ki)[0])});var oa=nt("Date",!0);j("DDD",["DDDD",3],"DDDo","dayOfYear"),F("dayOfYear","DDD"),B("dayOfYear",4),Y("DDD",Qi),Y("DDDD",qi),K(["DDD","DDDD"],function(t,e,n){n._dayOfYear=b(t)}),j("m",["mm",2],0,"minute"),F("minute","m"),B("minute",14),Y("m",Ki),Y("mm",Ki,Yi),K(["m","mm"],mo);var aa=nt("Minutes",!1);j("s",["ss",2],0,"second"),F("second","s"),B("second",15),Y("s",Ki),Y("ss",Ki,Yi),K(["s","ss"],go);var ra,sa=nt("Seconds",!1);for(j("S",0,0,function(){return~~(this.millisecond()/100)}),j(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),j(0,["SSS",3],0,"millisecond"),j(0,["SSSS",4],0,function(){return 10*this.millisecond()}),j(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),j(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),j(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),j(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),j(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),F("millisecond","ms"),B("millisecond",16),Y("S",Qi,Vi),Y("SS",Qi,Yi),Y("SSS",Qi,qi),ra="SSSS";ra.length<=9;ra+="S")Y(ra,no);for(ra="S";ra.length<=9;ra+="S")K(ra,Vn);var la=nt("Milliseconds",!1);j("z",0,0,"zoneAbbr"),j("zz",0,0,"zoneName");var ua=v.prototype;ua.add=ea,ua.calendar=on,ua.clone=an,ua.diff=hn,ua.endOf=Sn,ua.format=vn,ua.from=yn,ua.fromNow=_n,ua.to=bn,ua.toNow=wn,ua.get=at,ua.invalidAt=On,ua.isAfter=rn,ua.isBefore=sn,ua.isBetween=ln,ua.isSame=un,ua.isSameOrAfter=dn,ua.isSameOrBefore=cn,ua.isValid=In,ua.lang=ia,ua.locale=xn,ua.localeData=Cn,ua.max=Go,ua.min=Zo,ua.parsingFlags=An,ua.set=rt,ua.startOf=Ln,ua.subtract=na,ua.toArray=Mn,ua.toObject=Pn,ua.toDate=Tn,ua.toISOString=mn,ua.inspect=gn,ua.toJSON=En,ua.toString=pn,ua.unix=Dn,ua.valueOf=kn,ua.creationData=Fn,ua.year=wo,ua.isLeapYear=et,ua.weekYear=Rn,ua.isoWeekYear=Bn,ua.quarter=ua.quarters=Hn,ua.month=pt,ua.daysInMonth=mt,ua.week=ua.weeks=Tt,ua.isoWeek=ua.isoWeeks=Mt,ua.weeksInYear=Un,ua.isoWeeksInYear=zn,ua.date=oa,ua.day=ua.days=Rt,ua.weekday=Bt,ua.isoWeekday=zt,ua.dayOfYear=Wn,ua.hour=ua.hours=No,ua.minute=ua.minutes=aa,ua.second=ua.seconds=sa,ua.millisecond=ua.milliseconds=la,ua.utcOffset=ze,ua.utc=je,ua.local=$e,ua.parseZone=He,ua.hasAlignedHourOffset=We,ua.isDST=Ve,ua.isLocal=qe,ua.isUtcOffset=Ze,ua.isUtc=Ge,ua.isUTC=Ge,ua.zoneAbbr=Yn,ua.zoneName=qn,ua.dates=C("dates accessor is deprecated. Use date instead.",oa),ua.months=C("months accessor is deprecated. Use month instead",pt),ua.years=C("years accessor is deprecated. Use year instead",wo),ua.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Ue),ua.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ye);var da=T.prototype;da.calendar=M,da.longDateFormat=P,da.invalidDate=E,da.ordinal=I,da.preparse=Kn,da.postformat=Kn,da.relativeTime=A,da.pastFuture=O,da.set=k,da.months=ut,da.monthsShort=dt,da.monthsParse=ht,da.monthsRegex=vt,da.monthsShortRegex=gt,da.week=St,da.firstDayOfYear=Dt,da.firstDayOfWeek=kt,da.weekdays=It,da.weekdaysMin=Ot,da.weekdaysShort=At,da.weekdaysParse=Nt,da.weekdaysRegex=Ut,da.weekdaysShortRegex=jt,da.weekdaysMinRegex=$t,da.isPM=Zt,da.meridiem=Gt,Qt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===b(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),u.lang=C("moment.lang is deprecated. Use moment.locale instead.",Qt),u.langData=C("moment.langData is deprecated. Use moment.localeData instead.",ne);var ca=Math.abs,ha=mi("ms"),fa=mi("s"),pa=mi("m"),ma=mi("h"),ga=mi("d"),va=mi("w"),ya=mi("M"),_a=mi("y"),ba=yi(
"milliseconds"),wa=yi("seconds"),xa=yi("minutes"),Ca=yi("hours"),La=yi("days"),Sa=yi("months"),ka=yi("years"),Da=Math.round,Ta={ss:44,s:45,m:45,h:22,d:26,M:11},Ma=Math.abs,Pa=Ie.prototype;return Pa.isValid=Pe,Pa.abs=ai,Pa.add=si,Pa.subtract=li,Pa.as=fi,Pa.asMilliseconds=ha,Pa.asSeconds=fa,Pa.asMinutes=pa,Pa.asHours=ma,Pa.asDays=ga,Pa.asWeeks=va,Pa.asMonths=ya,Pa.asYears=_a,Pa.valueOf=pi,Pa._bubble=di,Pa.clone=gi,Pa.get=vi,Pa.milliseconds=ba,Pa.seconds=wa,Pa.minutes=xa,Pa.hours=Ca,Pa.days=La,Pa.weeks=_i,Pa.months=Sa,Pa.years=ka,Pa.humanize=Li,Pa.toISOString=ki,Pa.toString=ki,Pa.toJSON=ki,Pa.locale=xn,Pa.localeData=Cn,Pa.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ki),Pa.lang=ia,j("X",0,0,"unix"),j("x",0,0,"valueOf"),Y("x",io),Y("X",ro),K("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),K("x",function(t,e,n){n._d=new Date(b(t))}),u.version="2.20.1",t(Se),u.fn=ua,u.min=De,u.max=Te,u.now=Ko,u.utc=f,u.unix=Zn,u.months=ti,u.isDate=o,u.locale=Qt,u.invalid=i,u.duration=Ke,u.isMoment=y,u.weekdays=ni,u.parseZone=Gn,u.localeData=ne,u.isDuration=Ae,u.monthsShort=ei,u.weekdaysMin=oi,u.defineLocale=te,u.updateLocale=ee,u.locales=ie,u.weekdaysShort=ii,u.normalizeUnits=N,u.relativeTimeRounding=xi,u.relativeTimeThreshold=Ci,u.calendarFormat=nn,u.prototype=ua,u.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},u}),function(t){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],t);else if("object"==typeof exports)t(require("jquery"),require("moment"));else{if(!jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if(!moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";t(jQuery,moment)}}(function(it,ot){"use strict";if(!ot)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var n=function(o,r){var n,a,i,e,s,l={},u=ot(),d=u.clone(),c=!0,h=!1,f=!1,p=0,m=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10}],g=["days","months","years"],v=["top","bottom","auto"],y=["left","right","auto"],_=["default","top","bottom"],b=function(t){if("string"!=typeof t||1<t.length)throw new TypeError("isEnabled expects a single character string parameter");switch(t){case"y":return-1!==i.indexOf("Y");case"M":return-1!==i.indexOf("M");case"d":return-1!==i.toLowerCase().indexOf("d");case"h":case"H":return-1!==i.toLowerCase().indexOf("h");case"m":return-1!==i.indexOf("m");case"s":return-1!==i.indexOf("s");default:return!1}},w=function(){return b("h")||b("m")||b("s")},x=function(){return b("y")||b("M")||b("d")},C=function(){var t=it("<thead>").append(it("<tr>").append(it("<th>").addClass("prev").attr("data-action","previous").append(it("<span>").addClass(r.icons.previous))).append(it("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",r.calendarWeeks?"6":"5")).append(it("<th>").addClass("next").attr("data-action","next").append(it("<span>").addClass(r.icons.next)))),e=it("<tbody>").append(it("<tr>").append(it("<td>").attr("colspan",r.calendarWeeks?"8":"7")));return[it("<div>").addClass("datepicker-days").append(it("<table>").addClass("table-condensed").append(t).append(it("<tbody>"))),it("<div>").addClass("datepicker-months").append(it("<table>").addClass("table-condensed").append(t.clone()).append(e.clone())),it("<div>").addClass("datepicker-years").append(it("<table>").addClass("table-condensed").append(t.clone()).append(e.clone()))]},L=function(){var t=it("<tr>"),e=it("<tr>"),n=it("<tr>");return b("h")&&(t.append(it("<td>").append(it("<a>").attr("href","#").addClass("btn").attr("data-action","incrementHours").append(it("<span>").addClass(r.icons.up)))),e.append(it("<td>").append(it("<span>").addClass("timepicker-hour").attr("data-time-component","hours").attr("data-action","showHours"))),n.append(it("<td>").append(it("<a>").attr("href","#").addClass("btn").attr("data-action","decrementHours").append(it("<span>").addClass(r.icons.down))))),b("m")&&(b("h")&&(t.append(it("<td>").addClass("separator")),e.append(it("<td>").addClass("separator").html(":")),n.append(it("<td>").addClass("separator"))),t.append(it("<td>").append(it("<a>").attr("href","#").addClass("btn").attr("data-action","incrementMinutes").append(it("<span>").addClass(r.icons.up)))),e.append(it("<td>").append(it("<span>").addClass("timepicker-minute").attr("data-time-component","minutes").attr("data-action","showMinutes"))),n.append(it("<td>").append(it("<a>").attr("href","#").addClass("btn").attr("data-action","decrementMinutes").append(it("<span>").addClass(r.icons.down))))),b("s")&&(b("m")&&(t.append(it("<td>").addClass("separator")),e.append(it("<td>").addClass("separator").html(":")),n.append(it("<td>").addClass("separator"))),t.append(it("<td>").append(it("<a>").attr("href","#").addClass("btn").attr("data-action","incrementSeconds").append(it("<span>").addClass(r.icons.up)))),e.append(it("<td>").append(it("<span>").addClass("timepicker-second").attr("data-time-component","seconds").attr("data-action","showSeconds"))),n.append(it("<td>").append(it("<a>").attr("href","#").addClass("btn").attr("data-action","decrementSeconds").append(it("<span>").addClass(r.icons.down))))),a||(t.append(it("<td>").addClass("separator")),e.append(it("<td>").append(it("<button>").addClass("btn btn-primary").attr("data-action","togglePeriod"))),n.append(it("<td>").addClass("separator"))),it("<div>").addClass("timepicker-picker").append(it("<table>").addClass("table-condensed").append([t,e,n]))},S=function(){var t=it("<div>").addClass("timepicker-hours").append(it("<table>").addClass("table-condensed")),e=it("<div>").addClass("timepicker-minutes").append(it("<table>").addClass("table-condensed")),n=it("<div>").addClass("timepicker-seconds").append(it("<table>").addClass("table-condensed")),i=[L()];return b("h")&&i.push(t),b("m")&&i.push(e),b("s")&&i.push(n),i},k=function(){var t=[];return r.showTodayButton&&t.push(it("<td>").append(it("<a>").attr("data-action","today").append(it("<span>").addClass(r.icons.today)))),!r.sideBySide&&x()&&w()&&t.push(it("<td>").append(it("<a>").attr("data-action","togglePicker").append(it("<span>").addClass(r.icons.time)))),r.showClear&&t.push(it("<td>").append(it("<a>").attr("data-action","clear").append(it("<span>").addClass(r.icons.clear)))),it("<table>").addClass("table-condensed").append(it("<tbody>").append(it("<tr>").append(t)))},D=function(){var t=it("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),e=it("<div>").addClass("datepicker").append(C()),n=it("<div>").addClass("timepicker").append(S()),i=it("<ul>").addClass("list-unstyled"),o=it("<li>").addClass("picker-switch"+(r.collapse?" accordion-toggle":"")).append(k());return a&&t.addClass("usetwentyfour"),r.sideBySide&&x()&&w()?(t.addClass("timepicker-sbs"),t.append(it("<div>").addClass("row").append(e.addClass("col-sm-6")).append(n.addClass("col-sm-6"))),t.append(o),t):("top"===r.toolbarPlacement&&i.append(o),x()&&i.append(it("<li>").addClass(r.collapse&&w()?"collapse in":"").append(e)),"default"===r.toolbarPlacement&&i.append(o),w()&&i.append(it("<li>").addClass(r.collapse&&x()?"collapse":"").append(n)),"bottom"===r.toolbarPlacement&&i.append(o),t.append(i))},t=function(){var n=o.data(),i={};return n.dateOptions&&n.dateOptions instanceof Object&&(i=it.extend(!0,i,n.dateOptions)),it.each(r,function(t){var e="date"+t.charAt(0).toUpperCase()+t.slice(1);n[e]!==undefined&&(i[t]=n[e])}),i},T=function(){var t,e=(h||o).position(),n=r.widgetPositioning.vertical,i=r.widgetPositioning.horizontal;if(r.widgetParent?t=r.widgetParent.append(f):o.is("input")?t=o.parent().append(f):(t=o).children().first().after(f),"auto"===n&&(n=(h||o).offset().top+f.height()>it(window).height()+it(window).scrollTop()&&f.height()+o.outerHeight()<(h||o).offset().top?"top":"bottom"),"auto"===i&&(i=t.width()<e.left+f.outerWidth()?"right":"left"),"top"===n?f.addClass("top").removeClass("bottom"):f.addClass("bottom").removeClass("top"),"right"===i?f.addClass("pull-right"):f.removeClass("pull-right"),"relative"!==t.css("position")&&(t=t.parents().filter(function(){return"relative"===it(this).css("position")}).first()),0===t.length)throw new Error("datetimepicker component should be placed within a relative positioned container");f.css({top:"top"===n?"auto":e.top+o.outerHeight(),bottom:"top"===n?e.top+o.outerHeight():"auto",left:"left"===i?t.css("padding-left"):"auto",right:"left"===i?"auto":t.css("padding-right")})},M=function(t){"dp.change"===t.type&&(t.date&&t.date.isSame(t.oldDate)||!t.date&&!t.oldDate)||o.trigger(t)},P=function(t){f&&(t&&(s=Math.max(p,Math.min(2,s+t))),f.find(".datepicker > div").hide().filter(".datepicker-"+m[s].clsName).show())},E=function(){var t=it("<tr>"),e=d.clone().startOf("w");for(!0===r.calendarWeeks&&t.append(it("<th>").addClass("cw").text("#"));e.isBefore(d.clone().endOf("w"));)t.append(it("<th>").addClass("dow").text(e.format("dd"))),e.add(1,"d");f.find(".datepicker-days thead").append(t)},I=function(t){return!!r.disabledDates&&!0===r.disabledDates[t.format("YYYY-MM-DD")]},A=function(t){return!!r.enabledDates&&!0===r.enabledDates[t.format("YYYY-MM-DD")]},O=function(t,e){return!!t.isValid()&&((!r.disabledDates||!I(t))&&(!(!r.enabledDates||!A(t))||(!r.minDate||!t.isBefore(r.minDate,e))&&((!r.maxDate||!t.isAfter(r.maxDate,e))&&("d"!==e||-1===r.daysOfWeekDisabled.indexOf(t.day())))))},F=function(){for(var t=[],e=d.clone().startOf("y").hour(12);e.isSame(d,"y");)t.push(it("<span>").attr("data-action","selectMonth").addClass("month").text(e.format("MMM"))),e.add(1,"M");f.find(".datepicker-months td").empty().append(t)},N=function(){var t=f.find(".datepicker-months"),e=t.find("th"),n=t.find("tbody").find("span");t.find(".disabled").removeClass("disabled"),O(d.clone().subtract(1,"y"),"y")||e.eq(0).addClass("disabled"),e.eq(1).text(d.year()),O(d.clone().add(1,"y"),"y")||e.eq(2).addClass("disabled"),n.removeClass("active"),u.isSame(d,"y")&&n.eq(u.month()).addClass("active"),n.each(function(t){O(d.clone().month(t),"M")||it(this).addClass("disabled")})},R=function(){var t=f.find(".datepicker-years"),e=t.find("th"),n=d.clone().subtract(5,"y"),i=d.clone().add(6,"y"),o="";for(t.find(".disabled").removeClass("disabled"),r.minDate&&r.minDate.isAfter(n,"y")&&e.eq(0).addClass("disabled"),e.eq(1).text(n.year()+"-"+i.year()),r.maxDate&&r.maxDate.isBefore(i,"y")&&e.eq(2).addClass("disabled");!n.isAfter(i,"y");)o+='<span data-action="selectYear" class="year'+(n.isSame(u,"y")?" active":"")+(O(n,"y")?"":" disabled")+'">'+n.year()+"</span>",n.add(1,"y");t.find("td").html(o)},B=function(){var t,e,n,i=f.find(".datepicker-days"),o=i.find("th"),a=[];if(x()){for(i.find(".disabled").removeClass("disabled"),o.eq(1).text(d.format(r.dayViewHeaderFormat)),O(d.clone().subtract(1,"M"),"M")||o.eq(0).addClass("disabled"),O(d.clone().add(1,"M"),"M")||o.eq(2).addClass("disabled"),t=d.clone().startOf("M").startOf("week");!d.clone().endOf("M").endOf("w").isBefore(t,"d");)0===t.weekday()&&(e=it("<tr>"),r.calendarWeeks&&e.append('<td class="cw">'+t.week()+"</td>"),a.push(e)),n="",t.isBefore(d,"M")&&(n+=" old"),t.isAfter(d,"M")&&(n+=" new"),t.isSame(u,"d")&&!c&&(n+=" active"),O(t,"d")||(n+=" disabled"),t.isSame(ot(),"d")&&(n+=" today"),0!==t.day()&&6!==t.day()||(n+=" weekend"),e.append('<td data-action="selectDay" class="day'+n+'">'+t.date()+"</td>"),t.add(1,"d");i.find("tbody").empty().append(a),N(),R()}},z=function(){var t=f.find(".timepicker-hours table"),e=d.clone().startOf("d"),n=[],i=it("<tr>");for(11<d.hour()&&!a&&e.hour(12);e.isSame(d,"d")&&(a||d.hour()<12&&e.hour()<12||11<d.hour());)e.hour()%4==0&&(i=it("<tr>"),n.push(i)),i.append('<td data-action="selectHour" class="hour'+(O(e,"h")?"":" disabled")+'">'+e.format(a?"HH":"hh")+"</td>"),e.add(1,"h");t.empty().append(n)},U=function(){for(var t=f.find(".timepicker-minutes table"),e=d.clone().startOf("h"),n=[],i=it("<tr>"),o=1===r.stepping?5:r.stepping;d.isSame(e,"h");)e.minute()%(4*o)==0&&(i=it("<tr>"),n.push(i)),i.append('<td data-action="selectMinute" class="minute'+(O(e,"m")?"":" disabled")+'">'+e.format("mm")+"</td>"),e.add(o,"m");t.empty().append(n)},j=function(){for(var t=f.find(".timepicker-seconds table"),e=d.clone().startOf("m"),n=[],i=it("<tr>");d.isSame(e,"m");)e.second()%20==0&&(i=it("<tr>"),n.push(i)),i.append('<td data-action="selectSecond" class="second'+(O(e,"s")?"":" disabled")+'">'+e.format("ss")+"</td>"),e.add(5,"s");t.empty().append(n)},$=function(){var t=f.find(".timepicker span[data-time-component]");a||f.find(".timepicker [data-action=togglePeriod]").text(u.format("A")),t.filter("[data-time-component=hours]").text(u.format(a?"HH":"hh")),t.filter("[data-time-component=minutes]").text(u.format("mm")),t.filter("[data-time-component=seconds]").text(u.format("ss")),z(),U(),j()},H=function(){f&&(B(),$())},W=function(t){var e=c?null:u;if(!t)return c=!0,n.val(""),o.data("date",""),M({type:"dp.change",date:null,oldDate:e}),void H();t=t.clone().locale(r.locale),1!==r.stepping&&t.minutes(Math.round(t.minutes()/r.stepping)*r.stepping%60).seconds(0),O(t)?(d=(u=t).clone(),n.val(u.format(i)),o.data("date",u.format(i)),H(),c=!1,M({type:"dp.change",date:u.clone(),oldDate:e})):(n.val(c?"":u.format(i)),M({type:"dp.error",date:t}))},V=function(){var e=!1;return f?(f.find(".collapse").each(function(){var t=it(this).data("collapse");if(t&&t.transitioning)return!(e=!0)}),e||(h&&h.hasClass("btn")&&h.toggleClass("active"),f.hide(),it(window).off("resize",T),f.off("click","[data-action]"),f.off("mousedown",!1),f.remove(),f=!1,M({type:"dp.hide",date:u.clone()})),l):l},Y={next:function(){d.add(m[s].navStep,m[s].navFnc),B()},previous:function(){d.subtract(m[s].navStep,m[s].navFnc),B()},pickerSwitch:function(){P(1)},selectMonth:function(t){var e=it(t.target).closest("tbody").find("span").index(it(t.target));d.month(e),s===p&&(W(u.clone().year(d.year()).month(d.month())),V()),P(-1),B()},selectYear:function(t){var e=parseInt(it(t.target).text(),10)||0;d.year(e),s===p&&(W(u.clone().year(d.year())),V()),P(-1),B()},selectDay:function(t){var e=d.clone();it(t.target).is(".old")&&e.subtract(1,"M"),it(t.target).is(".new")&&e.add(1,"M"),W(e.date(parseInt(it(t.target).text(),10))),w()||r.keepOpen||V()},incrementHours:function(){W(u.clone().add(1,"h"))},incrementMinutes:function(){W(u.clone().add(r.stepping,"m"))},incrementSeconds:function(){W(u.clone().add(1,"s"))},decrementHours:function(){W(u.clone().subtract(1,"h"))},decrementMinutes:function(){W(u.clone().subtract(r.stepping,"m"))},decrementSeconds:function(){W(u.clone().subtract(1,"s"))},togglePeriod:function(){W(u.clone().add(12<=u.hours()?-12:12,"h"))},togglePicker:function(t){var e,n=it(t.target),i=n.closest("ul"),o=i.find(".in"),a=i.find(".collapse:not(.in)");if(o&&o.length){if((e=o.data("collapse"))&&e.transitioning)return;o.collapse("hide"),a.collapse("show"),n.is("span")?n.toggleClass(r.icons.time+" "+r.icons.date):n.find("span").toggleClass(r.icons.time+" "+r.icons.date)}},showPicker:function(){f.find(".timepicker > div:not(.timepicker-picker)").hide(),f.find(".timepicker .timepicker-picker").show()},showHours:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-hours").show()},showMinutes:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var e=parseInt(it(t.target).text(),10);a||(12<=u.hours()?12!==e&&(e+=12):12===e&&(e=0)),W(u.clone().hours(e)),Y.showPicker.call(l)},selectMinute:function(t){W(u.clone().minutes(parseInt(it(t.target).text(),10))),Y.showPicker.call(l)},selectSecond:function(t){W(u.clone().seconds(parseInt(it(t.target).text(),10))),Y.showPicker.call(l)},clear:function(){W(null)},today:function(){W(ot())}},q=function(t){return it(t.currentTarget).is(".disabled")||Y[it(t.currentTarget).data("action")].apply(l,arguments),!1},Z=function(){var t,e={year:function(t){return t.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(t){return t.date(1).hours(0).seconds(0).minutes(0)},day:function(t){return t.hours(0).seconds(0).minutes(0)},hour:function(t){return t.seconds(0).minutes(0)},minute:function(t){return t.seconds(0)}};return n.prop("disabled")||n.prop("readonly")||f||(r.useCurrent&&c&&(t=ot(),"string"==typeof r.useCurrent&&(t=e[r.useCurrent](t)),W(t)),f=D(),E(),F(),f.find(".timepicker-hours").hide(),f.find(".timepicker-minutes").hide(),f.find(".timepicker-seconds").hide(),H(),P(),it(window).on("resize",T),f.on("click","[data-action]",q),f.on("mousedown",!1),h&&h.hasClass("btn")&&h.toggleClass("active"),f.show(),T(),n.is(":focus")||n.focus(),M({type:"dp.show"})),l},G=function(){return f?V():Z()},K=function(t){return(t=ot.isMoment(t)||t instanceof Date?ot(t):ot(t,e,r.useStrict)).locale(r.locale),t},J=function(t){27===t.keyCode&&V()},X=function(t){var e=it(t.target).val().trim(),n=e?K(e):null;return W(n),t.stopImmediatePropagation(),!1},Q=function(){n.on({change:X,blur:V,keydown:J}),o.is("input")?n.on({focus:Z}):h&&(h.on("click",G),h.on("mousedown",!1))},tt=function(){n.off({change:X,blur:V,keydown:J}),o.is("input")?n.off({focus:Z}):h&&(h.off("click",G),h.off("mousedown",!1))},et=function(t){var e={};return it.each(t,function(){var t=K(this);t.isValid()&&(e[t.format("YYYY-MM-DD")]=!0)}),!!Object.keys(e).length&&e},nt=function(){var t=r.format||"L LT";i=t.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){return u.localeData().longDateFormat(t)||t}),(e=r.extraFormats?r.extraFormats.slice():[]).indexOf(t)<0&&e.indexOf(i)<0&&e.push(i),a=i.toLowerCase().indexOf("a")<1&&i.indexOf("h")<1,b("y")&&(p=2),b("M")&&(p=1),b("d")&&(p=0),s=Math.max(p,s),c||W(u)};if(l.destroy=function(){V(),tt(),o.removeData("DateTimePicker"),o.removeData("date")},l.toggle=G,l.show=Z,l.hide=V,l.disable=function(){return V(),h&&h.hasClass("btn")&&h.addClass("disabled"),n.prop("disabled",!0),l},l.enable=function(){return h&&h.hasClass("btn")&&h.removeClass("disabled"),n.prop("disabled",!1),l},l.options=function(t){if(0===arguments.length)return it.extend(!0,{},r);if(!(t instanceof Object))throw new TypeError("options() options parameter should be an object");return it.extend(!0,r,t),it.each(r,function(t,e){if(l[t]===undefined)throw new TypeError("option "+t+" is not recognized!");l[t](e)}),l},l.date=function(t){if(0===arguments.length)return c?null:u.clone();if(!(null===t||"string"==typeof t||ot.isMoment(t)||t instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return W(null===t?null:K(t)),l},l.format=function(t){if(0===arguments.length)return r.format;if("string"!=typeof t&&("boolean"!=typeof t||!1!==t))throw new TypeError("format() expects a sting or boolean:false parameter "+t);return r.format=t,i&&nt(),l},l.dayViewHeaderFormat=function(t){if(0===arguments.length)return r.dayViewHeaderFormat;if("string"!=typeof t)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return r.dayViewHeaderFormat=t,l},l.extraFormats=function(t){if(0===arguments.length)return r.extraFormats;if(!1!==t&&!(t instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return r.extraFormats=t,e&&nt(),l},l.disabledDates=function(t){if(0===arguments.length)return r.disabledDates?it.extend({},r.disabledDates):r.disabledDates;if(!t)return r.disabledDates=!1,H(),l;if(!(t instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return r.disabledDates=et(t),r.enabledDates=!1,H(),l},l.enabledDates=function(t){if(0===arguments.length)return r.enabledDates?it.extend({},r.enabledDates):r.enabledDates;if(!t)return r.enabledDates=!1,H(),l;if(!(t instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return r.enabledDates=et(t),r.disabledDates=!1,H(),l},l.daysOfWeekDisabled=function(t){if(0===arguments.length)return r.daysOfWeekDisabled.splice(0);if(!(t instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");return r.daysOfWeekDisabled=t.reduce(function(t,e){return 6<(e=parseInt(e,10))||e<0||isNaN(e)||-1===t.indexOf(e)&&t.push(e),t},[]).sort(),H(),l},l.maxDate=function(t){if(0===arguments.length)return r.maxDate?r.maxDate.clone():r.maxDate;if("boolean"==typeof t&&!1===t)return r.maxDate=!1,H(),l;var e=K(t);if(!e.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+t);if(r.minDate&&e.isBefore(r.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+e.format(i));return r.maxDate=e,r.maxDate.isBefore(t)&&W(r.maxDate),H(),l},l.minDate=function(t){if(0===arguments.length)return r.minDate?r.minDate.clone():r.minDate;if("boolean"==typeof t&&!1===t)return r.minDate=!1,H(),l;var e=K(t);if(!e.isValid())throw new TypeError("minDate() Could not parse date parameter: "+t);if(r.maxDate&&e.isAfter(r.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+e.format(i));return r.minDate=e,r.minDate.isAfter(t)&&W(r.minDate),H(),l},l.defaultDate=function(t){if(0===arguments.length)return r.defaultDate?r.defaultDate.clone():r.defaultDate;if(!t)return r.defaultDate=!1,l;var e=K(t);if(!e.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+t);if(!O(e))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return r.defaultDate=e,r.defaultDate&&""===n.val().trim()&&W(r.defaultDate),l},l.locale=function(t){if(0===arguments.length)return r.locale;if(!ot.localeData(t))throw new TypeError("locale() locale "+t+" is not loaded from moment locales!");return r.locale=t,u.locale(r.locale),d.locale(r.locale),i&&nt(),f&&(V(),Z()),l},l.stepping=function(t){return 0===arguments.length?r.stepping:(t=parseInt(t,10),(isNaN(t)||t<1)&&(t=1),r.stepping=t,l)},l.useCurrent=function(t){var e=["year","month","day","hour","minute"];if(0===arguments.length)return r.useCurrent;if("boolean"!=typeof t&&"string"!=typeof t)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof t&&-1===e.indexOf(t.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+e.join(", "));return r.useCurrent=t,l},l.collapse=function(t){if(0===arguments.length)return r.collapse;if("boolean"!=typeof t)throw new TypeError("collapse() expects a boolean parameter");return r.collapse===t||(r.collapse=t,f&&(V(),Z())),l},l.icons=function(t){if(0===arguments.length)return it.extend({},r.icons);if(!(t instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return it.extend(r.icons,t),f&&(V(),Z()),l},l.useStrict=function(t){if(0===arguments.length)return r.useStrict;if("boolean"!=typeof t)throw new TypeError("useStrict() expects a boolean parameter");return r.useStrict=t,l},l.sideBySide=function(t){if(0===arguments.length)return r.sideBySide;if("boolean"!=typeof t)throw new TypeError("sideBySide() expects a boolean parameter");return r.sideBySide=t,f&&(V(),Z()),l},l.viewMode=function(t){if(0===arguments.length)return r.viewMode;if("string"!=typeof t)throw new TypeError("viewMode() expects a string parameter");if(-1===g.indexOf(t))throw new TypeError("viewMode() parameter must be one of ("+g.join(", ")+") value");return r.viewMode=t,s=Math.max(g.indexOf(t),p),P(),l},l.toolbarPlacement=function(t){if(0===arguments.length)return r.toolbarPlacement;if("string"!=typeof t)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===_.indexOf(t))throw new TypeError("toolbarPlacement() parameter must be one of ("+_.join(", ")+") value");return r.toolbarPlacement=t,f&&(V(),Z()),l},l.widgetPositioning=function(t){if(0===arguments.length)return it.extend({},r.widgetPositioning);if("[object Object]"!=={}.toString.call(t))throw new TypeError("widgetPositioning() expects an object variable");if(t.horizontal){if("string"!=typeof t.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(t.horizontal=t.horizontal.toLowerCase(),-1===y.indexOf(t.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+y.join(", ")+")");r.widgetPositioning.horizontal=t.horizontal}if(t.vertical){if("string"!=typeof t.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(t.vertical=t.vertical.toLowerCase(),-1===v.indexOf(t.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+v.join(", ")+")");r.widgetPositioning.vertical=t.vertical}return H(),l},l.calendarWeeks=function(t){if(0===arguments.length)return r.calendarWeeks;if("boolean"!=typeof t)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return r.calendarWeeks=t,H(),l},l.showTodayButton=function(t){if(0===arguments.length)return r.showTodayButton;if("boolean"!=typeof t)throw new TypeError("showTodayButton() expects a boolean parameter");return r.showTodayButton=t,f&&(V(),Z()),l},l.showClear=function(t){if(0===arguments.length)return r.showClear;if("boolean"!=typeof t)throw new TypeError("showClear() expects a boolean parameter");return r.showClear=t,f&&(V(),Z()),l},l.widgetParent=function(t){if(0===arguments.length)return r.widgetParent;if("string"==typeof t&&(t=it(t)),null!==t&&"string"!=typeof t&&!(t instanceof jQuery))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return r.widgetParent=t,f&&(V(),Z()),l},l.keepOpen=function(t){if(0===arguments.length)return r.format;if("boolean"!=typeof t)throw new TypeError("keepOpen() expects a boolean parameter");return r.keepOpen=t,l},o.is("input"))n=o;else if(0===(n=o.find(".datepickerinput")).size())n=o.find("input");else if(!n.is("input"))throw new Error('CSS class "datepickerinput" cannot be applied to non input element');if(o.hasClass("input-group")&&(h=0===o.find(".datepickerbutton").size()?o.find('[class^="input-group-"]'):o.find(".datepickerbutton")),!n.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return it.extend(!0,r,t()),l.options(r),nt(),Q(),n.prop("disabled")&&l.disable(),0!==n.val().trim().length?W(K(n.val().trim())):r.defaultDate&&W(r.defaultDate),l};it.fn.datetimepicker=function(e){return this.each(function(){var t=it(this);t.data("DateTimePicker")||(e=it.extend(!0,{},it.fn.datetimepicker.defaults,e),t.data("DateTimePicker",n(t,e)))})},it.fn.datetimepicker.defaults={format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:ot.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:[],calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,keepOpen:!1}}),function(d){d.fn.bootstrapTransfer=function(t){var l,u=d.extend({},d.fn.bootstrapTransfer.defaults,t);return this.populate_available=function(t){l.populate_available(t)},this.populate_selected=function(t){l.populate_selected(t)},this.set_values=function(t){l.set_values(t)},this.get_values=function(){return l.get_values()},this.each(function(){return(l=d(this)).append(d.fn.bootstrapTransfer.defaults.template),l.addClass("bootstrap-transfer-container"),l.$filter_input=l.find(".filter-input"),l.$remaining_select=l.find("select.remaining"),l.$target_select=l.find("select.target"),l.$add_btn=l.find(".selector-add"),l.$remove_btn=l.find(".selector-remove"),l.$choose_all_btn=l.find(".selector-chooseall"),l.$clear_all_btn=l.find(".selector-clearall"),l._remaining_list=[],l._target_list=[],""!=u.target_id&&l.$target_select.attr("id",u.target_id),l.find("select.filtered").css("height",u.height),l.$add_btn.click(function(){l.move_elems(l.$remaining_select.val(),!1,!0)}),l.$remove_btn.click(function(){l.move_elems(l.$target_select.val(),!0,!1)}),l.$choose_all_btn.click(function(){l.move_all(!1,!0)}),l.$clear_all_btn.click(function(){l.move_all(!0,!1)}),l.$filter_input.keyup(function(){l.update_lists(!0)}),l.populate_available=function(t){for(var e in l.$filter_input.val(""),t){var n=t[e];l._remaining_list.push([{value:n.value,content:n.content},!0]),l._target_list.push([{value:n.value,content:n.content},!1])}l.update_lists(!0)},l.populate_selected=function(t){for(var e in l.$filter_input.val(""),t){var n=t[e];l._remaining_list.push([{value:n.value,content:n.content},!1]),l._target_list.push([{value:n.value,content:n.content},!0])}l.update_lists(!0)},l.set_values=function(t){l.move_elems(t,!1,!0)},l.get_values=function(){return l.get_internal(l.$target_select)},l.get_internal=function(t){var e=[];return t.find("option").each(function(){e.push(d(this).val())}),e},l.to_dict=function(t){var e={};for(var n in t)e[t[n]]=!0;return e},l.update_lists=function(t){var e;t||(e=[l.to_dict(l.get_internal(l.$remaining_select)),l.to_dict(l.get_internal(l.$target_select))]),l.$remaining_select.empty(),l.$target_select.empty();var n=[l._remaining_list,l._target_list],i=[l.$remaining_select,l.$target_select];for(var o in n)for(var a in n[o]){var r=n[o][a];if(r[1]){var s="";t||!u.hilite_selection||e[o].hasOwnProperty(r[0].value)||(s='selected="selected"'),i[o].append("<option "+s+"value="+r[0].value+">"+r[0].content+"</option>")}}l.$remaining_select.find("option").each(function(){var t=l.$filter_input.val().toLowerCase();-1==d(this).html().toLowerCase().indexOf(t)&&d(this).remove()})},l.move_elems=function(t,e,n){for(var i in t)for(var o in val=t[i],l._remaining_list){var a=l._remaining_list[o];a[0].value==val&&(a[1]=e,l._target_list[o][1]=n)}l.update_lists(!1)},l.move_all=function(t,e){for(var n in l._remaining_list)l._remaining_list[n][1]=t,l._target_list[n][1]=e;l.update_lists(!1)},l.data("bootstrapTransfer",l),l})},d.fn.bootstrapTransfer.defaults={template:'<table width="100%" cellspacing="0" cellpadding="0">                <tr>                    <td width="50%">                        <div class="selector-available">                            <div class="selector-filter">                                <table width="100%" border="0">                                    <tr>                                        <td>                                            <div class="input-group" style="margin-bottom:5px;">                                                <span class="input-group-addon"><i class="fa fa-search"></i></span>                                                <input type="text" class="filter-input form-control" placeholder="Search for a user...">                                            </div>                                        </td>                                    </tr>                                </table>                            </div>                            <label class="string optional control-label" style="font-weight:normal;margin-bottom:0;">Available</label>                            <select multiple="multiple" class="form-control filtered remaining" style="margin-top: .35em;">                            </select>                            <em><a class="selector-chooseall change-contributors">Select all</a></em>                        </div>                    </td>                    <td>                        <div class="selector-chooser" style="margin:0 2px;">                            <a class="selector-add change-contributors"><i class="fa fa-plus"></i></a>                            <a class="selector-remove change-contributors"><i class="fa fa-minus"></i></a>                        </div>                    </td>                    <td width="50%" style="padding-top:3em">                        <div class="selector-chosen">                            <label class="string optional control-label" style="font-weight:normal;">Selected</label>                            <div class="selector-filter right"></div>                            <select multiple="multiple" class="form-control filtered target" style="width:100%">                            </select>                            <em><a class="selector-clearall change-contributors">Clear all</a></em>                        </div>                    </td>                </tr>            </table>',
height:"10em",hilite_selection:!0,target_id:""}}(jQuery),function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(t){return n(t,window,document)}):"object"==typeof exports?module.exports=function(t,e){return t||(t=window),e||(e="undefined"!=typeof window?require("jquery"):require("jquery")(t)),n(e,t,t.document)}:n(jQuery,window,document)}(function(U,T,y,j){"use strict";function r(e){var n,i,o="a aa ai ao as b fn i m o s ",a={};U.each(e,function(t){(n=t.match(/^([^A-Z]+?)([A-Z])/))&&-1!==o.indexOf(n[1]+" ")&&(i=t.replace(n[0],n[2].toLowerCase()),a[i]=t,"o"===n[1]&&r(e[t]))}),e._hungarianMap=a}function E(e,n,i){var o;e._hungarianMap||r(e),U.each(n,function(t){(o=e._hungarianMap[t])===j||!i&&n[o]!==j||("o"===o.charAt(0)?(n[o]||(n[o]={}),U.extend(!0,n[o],n[t]),E(e[o],n[o],i)):n[o]=n[t])})}function I(t){var e=Yt.defaults.oLanguage,n=t.sZeroRecords;!t.sEmptyTable&&n&&"No data available in table"===e.sEmptyTable&&Ft(t,t,"sZeroRecords","sEmptyTable"),!t.sLoadingRecords&&n&&"Loading..."===e.sLoadingRecords&&Ft(t,t,"sZeroRecords","sLoadingRecords"),t.sInfoThousands&&(t.sThousands=t.sInfoThousands);var i=t.sDecimal;i&&Wt(i)}function A(t){ge(t,"ordering","bSort"),ge(t,"orderMulti","bSortMulti"),ge(t,"orderClasses","bSortClasses"),ge(t,"orderCellsTop","bSortCellsTop"),ge(t,"order","aaSorting"),ge(t,"orderFixed","aaSortingFixed"),ge(t,"paging","bPaginate"),ge(t,"pagingType","sPaginationType"),ge(t,"pageLength","iDisplayLength"),ge(t,"searching","bFilter"),"boolean"==typeof t.sScrollX&&(t.sScrollX=t.sScrollX?"100%":""),"boolean"==typeof t.scrollX&&(t.scrollX=t.scrollX?"100%":"");var e=t.aoSearchCols;if(e)for(var n=0,i=e.length;n<i;n++)e[n]&&E(Yt.models.oSearch,e[n])}function O(t){ge(t,"orderable","bSortable"),ge(t,"orderData","aDataSort"),ge(t,"orderSequence","asSorting"),ge(t,"orderDataType","sortDataType");var e=t.aDataSort;e&&!U.isArray(e)&&(t.aDataSort=[e])}function F(t){if(!Yt.__browser){var e={};Yt.__browser=e;var n=U("<div/>").css({position:"fixed",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(U("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(U("<div/>").css({width:"100%",height:10}))).appendTo("body"),i=n.children(),o=i.children();e.barWidth=i[0].offsetWidth-i[0].clientWidth,e.bScrollOversize=100===o[0].offsetWidth&&100!==i[0].clientWidth,e.bScrollbarLeft=1!==Math.round(o.offset().left),e.bBounding=!!n[0].getBoundingClientRect().width,n.remove()}U.extend(t.oBrowser,Yt.__browser),t.oScroll.iBarWidth=Yt.__browser.barWidth}function n(t,e,n,i,o,a){var r,s=i,l=!1;for(n!==j&&(r=n,l=!0);s!==o;)t.hasOwnProperty(s)&&(r=l?e(r,t[s],s,t):t[s],l=!0,s+=a);return r}function N(t,e){var n=Yt.defaults.column,i=t.aoColumns.length,o=U.extend({},Yt.models.oColumn,n,{nTh:e||y.createElement("th"),sTitle:n.sTitle?n.sTitle:e?e.innerHTML:"",aDataSort:n.aDataSort?n.aDataSort:[i],mData:n.mData?n.mData:i,idx:i});t.aoColumns.push(o);var a=t.aoPreSearchCols;a[i]=U.extend({},Yt.models.oSearch,a[i]),R(t,i,U(e).data())}function R(t,e,n){var i=t.aoColumns[e],o=t.oClasses,a=U(i.nTh);if(!i.sWidthOrig){i.sWidthOrig=a.attr("width")||null;var r=(a.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);r&&(i.sWidthOrig=r[1])}n!==j&&null!==n&&(O(n),E(Yt.defaults.column,n),n.mDataProp===j||n.mData||(n.mData=n.mDataProp),n.sType&&(i._sManualType=n.sType),n.className&&!n.sClass&&(n.sClass=n.className),U.extend(i,n),Ft(i,n,"sWidth","sWidthOrig"),n.iDataSort!==j&&(i.aDataSort=[n.iDataSort]),Ft(i,n,"aDataSort"));var s=i.mData,l=V(s),u=i.mRender?V(i.mRender):null,d=function(t){return"string"==typeof t&&-1!==t.indexOf("@")};i._bAttrSrc=U.isPlainObject(s)&&(d(s.sort)||d(s.type)||d(s.filter)),i.fnGetData=function(t,e,n){var i=l(t,e,j,n);return u&&e?u(i,e,t,n):i},i.fnSetData=function(t,e,n){return _(s)(t,e,n)},"number"!=typeof s&&(t._rowReadObject=!0),t.oFeatures.bSort||(i.bSortable=!1,a.addClass(o.sSortableNone));var c=-1!==U.inArray("asc",i.asSorting),h=-1!==U.inArray("desc",i.asSorting);i.bSortable&&(c||h)?c&&!h?(i.sSortingClass=o.sSortableAsc,i.sSortingClassJUI=o.sSortJUIAscAllowed):!c&&h?(i.sSortingClass=o.sSortableDesc,i.sSortingClassJUI=o.sSortJUIDescAllowed):(i.sSortingClass=o.sSortable,i.sSortingClassJUI=o.sSortJUI):(i.sSortingClass=o.sSortableNone,i.sSortingClassJUI="")}function $(t){if(!1!==t.oFeatures.bAutoWidth){var e=t.aoColumns;yt(t);for(var n=0,i=e.length;n<i;n++)e[n].nTh.style.width=e[n].sWidth}var o=t.oScroll;""===o.sY&&""===o.sX||gt(t),zt(t,null,"column-sizing",[t])}function H(t,e){var n=P(t,"bVisible");return"number"==typeof n[e]?n[e]:null}function d(t,e){var n=P(t,"bVisible"),i=U.inArray(e,n);return-1!==i?i:null}function M(t){return P(t,"bVisible").length}function P(t,n){var i=[];return U.map(t.aoColumns,function(t,e){t[n]&&i.push(e)}),i}function l(t){var e,n,i,o,a,r,s,l,u,d=t.aoColumns,c=t.aoData,h=Yt.ext.type.detect;for(e=0,n=d.length;e<n;e++)if(u=[],!(s=d[e]).sType&&s._sManualType)s.sType=s._sManualType;else if(!s.sType){for(i=0,o=h.length;i<o;i++){for(a=0,r=c.length;a<r&&(u[a]===j&&(u[a]=m(t,a,e,"type")),(l=h[i](u[a],t))||i===h.length-1)&&"html"!==l;a++);if(l){s.sType=l;break}}s.sType||(s.sType="string")}}function B(t,e,n,i){var o,a,r,s,l,u,d,c=t.aoColumns;if(e)for(o=e.length-1;0<=o;o--){var h=(d=e[o]).targets!==j?d.targets:d.aTargets;for(U.isArray(h)||(h=[h]),r=0,s=h.length;r<s;r++)if("number"==typeof h[r]&&0<=h[r]){for(;c.length<=h[r];)N(t);i(h[r],d)}else if("number"==typeof h[r]&&h[r]<0)i(c.length+h[r],d);else if("string"==typeof h[r])for(l=0,u=c.length;l<u;l++)("_all"==h[r]||U(c[l].nTh).hasClass(h[r]))&&i(l,d)}if(n)for(o=0,a=n.length;o<a;o++)i(o,n[o])}function z(t,e,n,i){var o=t.aoData.length,a=U.extend(!0,{},Yt.models.oRow,{src:n?"dom":"data",idx:o});a._aData=e,t.aoData.push(a);for(var r=t.aoColumns,s=0,l=r.length;s<l;s++)r[s].sType=null;t.aiDisplayMaster.push(o);var u=t.rowIdFn(e);return u!==j&&(t.aIds[u]=a),!n&&t.oFeatures.bDeferRender||x(t,o,n,i),o}function W(n,t){var i;return t instanceof U||(t=U(t)),t.map(function(t,e){return i=c(n,e),z(n,i.data,e,i.cells)})}function t(t,e){return e._DT_RowIndex!==j?e._DT_RowIndex:null}function e(t,e,n){return U.inArray(n,t.aoData[e].anCells)}function m(t,e,n,i){var o=t.iDraw,a=t.aoColumns[n],r=t.aoData[e]._aData,s=a.sDefaultContent,l=a.fnGetData(r,i,{settings:t,row:e,col:n});if(l===j)return t.iDrawError!=o&&null===s&&(Ot(t,0,"Requested unknown parameter "+("function"==typeof a.mData?"{function}":"'"+a.mData+"'")+" for row "+e+", column "+n,4),t.iDrawError=o),s;if(l!==r&&null!==l||null===s){if("function"==typeof l)return l.call(r)}else l=s;return null===l&&"display"==i?"":l}function i(t,e,n,i){var o=t.aoColumns[n],a=t.aoData[e]._aData;o.fnSetData(a,i,{settings:t,row:e,col:n})}function g(t){return U.map(t.match(/(\\.|[^\.])+/g)||[""],function(t){return t.replace(/\\./g,".")})}function V(o){if(U.isPlainObject(o)){var a={};return U.each(o,function(t,e){e&&(a[t]=V(e))}),function(t,e,n,i){var o=a[e]||a._;return o!==j?o(t,e,n,i):t}}if(null===o)return function(t){return t};if("function"==typeof o)return function(t,e,n,i){return o(t,e,n,i)};if("string"!=typeof o||-1===o.indexOf(".")&&-1===o.indexOf("[")&&-1===o.indexOf("("))return function(t){return t[o]};var f=function(t,e,n){var i,o,a,r;if(""!==n)for(var s=g(n),l=0,u=s.length;l<u;l++){if(i=s[l].match(ve),o=s[l].match(ye),i){if(s[l]=s[l].replace(ve,""),""!==s[l]&&(t=t[s[l]]),a=[],s.splice(0,l+1),r=s.join("."),U.isArray(t))for(var d=0,c=t.length;d<c;d++)a.push(f(t[d],e,r));var h=i[0].substring(1,i[0].length-1);t=""===h?a:a.join(h);break}if(o)s[l]=s[l].replace(ye,""),t=t[s[l]]();else{if(null===t||t[s[l]]===j)return j;t=t[s[l]]}}return t};return function(t,e){return f(t,e,o)}}function _(i){if(U.isPlainObject(i))return _(i._);if(null===i)return function(){};if("function"==typeof i)return function(t,e,n){i(t,"set",e,n)};if("string"!=typeof i||-1===i.indexOf(".")&&-1===i.indexOf("[")&&-1===i.indexOf("("))return function(t,e){t[i]=e};var p=function(t,e,n){for(var i,o,a,r,s,l=g(n),u=l[l.length-1],d=0,c=l.length-1;d<c;d++){if(o=l[d].match(ve),a=l[d].match(ye),o){if(l[d]=l[d].replace(ve,""),t[l[d]]=[],(i=l.slice()).splice(0,d+1),s=i.join("."),U.isArray(e))for(var h=0,f=e.length;h<f;h++)p(r={},e[h],s),t[l[d]].push(r);else t[l[d]]=e;return}a&&(l[d]=l[d].replace(ye,""),t=t[l[d]](e)),null!==t[l[d]]&&t[l[d]]!==j||(t[l[d]]={}),t=t[l[d]]}u.match(ye)?t=t[u.replace(ye,"")](e):t[u.replace(ve,"")]=e};return function(t,e){return p(t,e,i)}}function w(t){return de(t.aoData,"_aData")}function u(t){t.aoData.length=0,t.aiDisplayMaster.length=0,t.aiDisplay.length=0,t.aIds={}}function f(t,e,n){for(var i=-1,o=0,a=t.length;o<a;o++)t[o]==e?i=o:t[o]>e&&t[o]--;-1!=i&&n===j&&t.splice(i,1)}function o(n,i,t,e){var o,a,r=n.aoData[i],s=function(t,e){for(;t.childNodes.length;)t.removeChild(t.firstChild);t.innerHTML=m(n,i,e,"display")};if("dom"!==t&&(t&&"auto"!==t||"dom"!==r.src)){var l=r.anCells;if(l)if(e!==j)s(l[e],e);else for(o=0,a=l.length;o<a;o++)s(l[o],o)}else r._aData=c(n,r,e,e===j?j:r._aData).data;r._aSortData=null,r._aFilterData=null;var u=n.aoColumns;if(e!==j)u[e].sType=null;else{for(o=0,a=u.length;o<a;o++)u[o].sType=null;h(n,r)}}function c(t,e,n,o){var i,a,r,s=[],l=e.firstChild,u=0,d=t.aoColumns,c=t._rowReadObject;o=o!==j?o:c?{}:[];var h=function(t,e){if("string"==typeof t){var n=t.indexOf("@");if(-1!==n){var i=t.substring(n+1);_(t)(o,e.getAttribute(i))}}},f=function(t){n!==j&&n!==u||(a=d[u],r=U.trim(t.innerHTML),a&&a._bAttrSrc?(_(a.mData._)(o,r),h(a.mData.sort,t),h(a.mData.type,t),h(a.mData.filter,t)):c?(a._setter||(a._setter=_(a.mData)),a._setter(o,r)):o[u]=r);u++};if(l)for(;l;)"TD"!=(i=l.nodeName.toUpperCase())&&"TH"!=i||(f(l),s.push(l)),l=l.nextSibling;else for(var p=0,m=(s=e.anCells).length;p<m;p++)f(s[p]);var g=e.firstChild?e:e.nTr;if(g){var v=g.getAttribute("id");v&&_(t.rowId)(o,v)}return{data:o,cells:s}}function x(t,e,n,i){var o,a,r,s,l,u=t.aoData[e],d=u._aData,c=[];if(null===u.nTr){for(o=n||y.createElement("tr"),u.nTr=o,u.anCells=c,o._DT_RowIndex=e,h(t,u),s=0,l=t.aoColumns.length;s<l;s++)r=t.aoColumns[s],(a=n?i[s]:y.createElement(r.sCellType))._DT_CellIndex={row:e,column:s},c.push(a),n&&!r.mRender&&r.mData===s||(a.innerHTML=m(t,e,s,"display")),r.sClass&&(a.className+=" "+r.sClass),r.bVisible&&!n?o.appendChild(a):!r.bVisible&&n&&a.parentNode.removeChild(a),r.fnCreatedCell&&r.fnCreatedCell.call(t.oInstance,a,m(t,e,s),d,e,s);zt(t,"aoRowCreatedCallback",null,[o,d,e])}u.nTr.setAttribute("role","row")}function h(t,e){var n=e.nTr,i=e._aData;if(n){var o=t.rowIdFn(i);if(o&&(n.id=o),i.DT_RowClass){var a=i.DT_RowClass.split(" ");e.__rowc=e.__rowc?me(e.__rowc.concat(a)):a,U(n).removeClass(e.__rowc.join(" ")).addClass(i.DT_RowClass)}i.DT_RowAttr&&U(n).attr(i.DT_RowAttr),i.DT_RowData&&U(n).data(i.DT_RowData)}}function p(t){var e,n,i,o,a,r=t.nTHead,s=t.nTFoot,l=0===U("th, td",r).length,u=t.oClasses,d=t.aoColumns;for(l&&(o=U("<tr/>").appendTo(r)),e=0,n=d.length;e<n;e++)a=d[e],i=U(a.nTh).addClass(a.sClass),l&&i.appendTo(o),t.oFeatures.bSort&&(i.addClass(a.sSortingClass),!1!==a.bSortable&&(i.attr("tabindex",t.iTabIndex).attr("aria-controls",t.sTableId),Tt(t,a.nTh,e))),a.sTitle!=i[0].innerHTML&&i.html(a.sTitle),jt(t,"header")(t,i,a,u);if(l&&Y(t.aoHeader,r),U(r).find(">tr").attr("role","row"),U(r).find(">tr>th, >tr>td").addClass(u.sHeaderTH),U(s).find(">tr>th, >tr>td").addClass(u.sFooterTH),null!==s){var c=t.aoFooter[0];for(e=0,n=c.length;e<n;e++)(a=d[e]).nTf=c[e].cell,a.sClass&&U(a.nTf).addClass(a.sClass)}}function v(t,e,n){var i,o,a,r,s,l,u,d,c,h=[],f=[],p=t.aoColumns.length;if(e){for(n===j&&(n=!1),i=0,o=e.length;i<o;i++){for(h[i]=e[i].slice(),h[i].nTr=e[i].nTr,a=p-1;0<=a;a--)t.aoColumns[a].bVisible||n||h[i].splice(a,1);f.push([])}for(i=0,o=h.length;i<o;i++){if(u=h[i].nTr)for(;l=u.firstChild;)u.removeChild(l);for(a=0,r=h[i].length;a<r;a++)if(c=d=1,f[i][a]===j){for(u.appendChild(h[i][a].cell),f[i][a]=1;h[i+d]!==j&&h[i][a].cell==h[i+d][a].cell;)f[i+d][a]=1,d++;for(;h[i][a+c]!==j&&h[i][a].cell==h[i][a+c].cell;){for(s=0;s<d;s++)f[i+s][a+c]=1;c++}U(h[i][a].cell).attr("rowspan",d).attr("colspan",c)}}}}function b(t){var e=zt(t,"aoPreDrawCallback","preDraw",[t]);if(-1===U.inArray(!1,e)){var n=[],i=0,o=t.asStripeClasses,a=o.length,r=(t.aoOpenRows.length,t.oLanguage),s=t.iInitDisplayStart,l="ssp"==$t(t),u=t.aiDisplay;t.bDrawing=!0,s!==j&&-1!==s&&(t._iDisplayStart=l?s:s>=t.fnRecordsDisplay()?0:s,t.iInitDisplayStart=-1);var d=t._iDisplayStart,c=t.fnDisplayEnd();if(t.bDeferLoading)t.bDeferLoading=!1,t.iDraw++,pt(t,!1);else if(l){if(!t.bDestroying&&!k(t))return}else t.iDraw++;if(0!==u.length)for(var h=l?0:d,f=l?t.aoData.length:c,p=h;p<f;p++){var m=u[p],g=t.aoData[m];null===g.nTr&&x(t,m);var v=g.nTr;if(0!==a){var y=o[i%a];g._sRowStripe!=y&&(U(v).removeClass(g._sRowStripe).addClass(y),g._sRowStripe=y)}zt(t,"aoRowCallback",null,[v,g._aData,i,p]),n.push(v),i++}else{var _=r.sZeroRecords;1==t.iDraw&&"ajax"==$t(t)?_=r.sLoadingRecords:r.sEmptyTable&&0===t.fnRecordsTotal()&&(_=r.sEmptyTable),n[0]=U("<tr/>",{"class":a?o[0]:""}).append(U("<td />",{valign:"top",colSpan:M(t),"class":t.oClasses.sRowEmpty}).html(_))[0]}zt(t,"aoHeaderCallback","header",[U(t.nTHead).children("tr")[0],w(t),d,c,u]),zt(t,"aoFooterCallback","footer",[U(t.nTFoot).children("tr")[0],w(t),d,c,u]);var b=U(t.nTBody);b.children().detach(),b.append(U(n)),zt(t,"aoDrawCallback","draw",[t]),t.bSorted=!1,t.bFiltered=!1,t.bDrawing=!1}else pt(t,!1)}function C(t,e){var n=t.oFeatures,i=n.bSort,o=n.bFilter;i&&St(t),o?G(t,t.oPreviousSearch):t.aiDisplay=t.aiDisplayMaster.slice(),!0!==e&&(t._iDisplayStart=0),t._drawHold=e,b(t),t._drawHold=!1}function L(t){var e=t.oClasses,n=U(t.nTable),i=U("<div/>").insertBefore(n),o=t.oFeatures,a=U("<div/>",{id:t.sTableId+"_wrapper","class":e.sWrapper+(t.nTFoot?"":" "+e.sNoFooter)});t.nHolding=i[0],t.nTableWrapper=a[0],t.nTableReinsertBefore=t.nTable.nextSibling;for(var r,s,l,u,d,c,h=t.sDom.split(""),f=0;f<h.length;f++){if(r=null,"<"==(s=h[f])){if(l=U("<div/>")[0],"'"==(u=h[f+1])||'"'==u){for(d="",c=2;h[f+c]!=u;)d+=h[f+c],c++;if("H"==d?d=e.sJUIHeader:"F"==d&&(d=e.sJUIFooter),-1!=d.indexOf(".")){var p=d.split(".");l.id=p[0].substr(1,p[0].length-1),l.className=p[1]}else"#"==d.charAt(0)?l.id=d.substr(1,d.length-1):l.className=d;f+=c}a.append(l),a=U(l)}else if(">"==s)a=a.parent();else if("l"==s&&o.bPaginate&&o.bLengthChange)r=dt(t);else if("f"==s&&o.bFilter)r=Z(t);else if("r"==s&&o.bProcessing)r=ft(t);else if("t"==s)r=mt(t);else if("i"==s&&o.bInfo)r=ot(t);else if("p"==s&&o.bPaginate)r=ct(t);else if(0!==Yt.ext.feature.length)for(var m=Yt.ext.feature,g=0,v=m.length;g<v;g++)if(s==m[g].cFeature){r=m[g].fnInit(t);break}if(r){var y=t.aanFeatures;y[s]||(y[s]=[]),y[s].push(r),a.append(r)}}i.replaceWith(a),t.nHolding=null}function Y(t,e){var n,i,o,a,r,s,l,u,d,c,h,f=U(e).children("tr"),p=function(t,e,n){for(var i=t[e];i[n];)n++;return n};for(t.splice(0,t.length),o=0,s=f.length;o<s;o++)t.push([]);for(o=0,s=f.length;o<s;o++)for(u=0,i=(n=f[o]).firstChild;i;){if("TD"==i.nodeName.toUpperCase()||"TH"==i.nodeName.toUpperCase())for(d=(d=1*i.getAttribute("colspan"))&&0!==d&&1!==d?d:1,c=(c=1*i.getAttribute("rowspan"))&&0!==c&&1!==c?c:1,l=p(t,o,u),h=1===d,r=0;r<d;r++)for(a=0;a<c;a++)t[o+a][l+r]={cell:i,unique:h},t[o+a].nTr=n;i=i.nextSibling}}function q(t,e,n){var i=[];n||(n=t.aoHeader,e&&Y(n=[],e));for(var o=0,a=n.length;o<a;o++)for(var r=0,s=n[o].length;r<s;r++)!n[o][r].unique||i[r]&&t.bSortCellsTop||(i[r]=n[o][r].cell);return i}function S(i,t,e){if(zt(i,"aoServerParams","serverParams",[t]),t&&U.isArray(t)){var o={},a=/(.*?)\[\]$/;U.each(t,function(t,e){var n=e.name.match(a);if(n){var i=n[0];o[i]||(o[i]=[]),o[i].push(e.value)}else o[e.name]=e.value}),t=o}var n,r=i.ajax,s=i.oInstance,l=function(t){zt(i,null,"xhr",[i,t,i.jqXHR]),e(t)};if(U.isPlainObject(r)&&r.data){n=r.data;var u=U.isFunction(n)?n(t,i):n;t=U.isFunction(n)&&u?u:U.extend(!0,t,u),delete r.data}var d={data:t,success:function(t){var e=t.error||t.sError;e&&Ot(i,0,e),i.json=t,l(t)},dataType:"json",cache:!1,type:i.sServerMethod,error:function(t,e){var n=zt(i,null,"xhr",[i,null,i.jqXHR]);-1===U.inArray(!0,n)&&("parsererror"==e?Ot(i,0,"Invalid JSON response",1):4===t.readyState&&Ot(i,0,"Ajax error",7)),pt(i,!1)}};i.oAjaxData=t,zt(i,null,"preXhr",[i,t]),i.fnServerData?i.fnServerData.call(s,i.sAjaxSource,U.map(t,function(t,e){return{name:e,value:t}}),l,i):i.sAjaxSource||"string"==typeof r?i.jqXHR=U.ajax(U.extend(d,{url:r||i.sAjaxSource})):U.isFunction(r)?i.jqXHR=r.call(s,t,l,i):(i.jqXHR=U.ajax(U.extend(d,r)),r.data=n)}function k(e){return!e.bAjaxDataGet||(e.iDraw++,pt(e,!0),S(e,a(e),function(t){s(e,t)}),!1)}function a(t){var e,n,i,o,a=t.aoColumns,r=a.length,s=t.oFeatures,l=t.oPreviousSearch,u=t.aoPreSearchCols,d=[],c=Lt(t),h=t._iDisplayStart,f=!1!==s.bPaginate?t._iDisplayLength:-1,p=function(t,e){d.push({name:t,value:e})};p("sEcho",t.iDraw),p("iColumns",r),p("sColumns",de(a,"sName").join(",")),p("iDisplayStart",h),p("iDisplayLength",f);var m={draw:t.iDraw,columns:[],order:[],start:h,length:f,search:{value:l.sSearch,regex:l.bRegex}};for(e=0;e<r;e++)i=a[e],o=u[e],n="function"==typeof i.mData?"function":i.mData,m.columns.push({data:n,name:i.sName,searchable:i.bSearchable,orderable:i.bSortable,search:{value:o.sSearch,regex:o.bRegex}}),p("mDataProp_"+e,n),s.bFilter&&(p("sSearch_"+e,o.sSearch),p("bRegex_"+e,o.bRegex),p("bSearchable_"+e,i.bSearchable)),s.bSort&&p("bSortable_"+e,i.bSortable);s.bFilter&&(p("sSearch",l.sSearch),p("bRegex",l.bRegex)),s.bSort&&(U.each(c,function(t,e){m.order.push({column:e.col,dir:e.dir}),p("iSortCol_"+t,e.col),p("sSortDir_"+t,e.dir)}),p("iSortingCols",c.length));var g=Yt.ext.legacy.ajax;return null===g?t.sAjaxSource?d:m:g?d:m}function s(t,n){var e=function(t,e){return n[t]!==j?n[t]:n[e]},i=D(t,n),o=e("sEcho","draw"),a=e("iTotalRecords","recordsTotal"),r=e("iTotalDisplayRecords","recordsFiltered");if(o){if(1*o<t.iDraw)return;t.iDraw=1*o}u(t),t._iRecordsTotal=parseInt(a,10),t._iRecordsDisplay=parseInt(r,10);for(var s=0,l=i.length;s<l;s++)z(t,i[s]);t.aiDisplay=t.aiDisplayMaster.slice(),t.bAjaxDataGet=!1,b(t),t._bInitComplete||lt(t,n),t.bAjaxDataGet=!0,pt(t,!1)}function D(t,e){var n=U.isPlainObject(t.ajax)&&t.ajax.dataSrc!==j?t.ajax.dataSrc:t.sAjaxDataProp;return"data"===n?e.aaData||e[n]:""!==n?V(n)(e):e}function Z(i){var t=i.oClasses,e=i.sTableId,n=i.oLanguage,o=i.oPreviousSearch,a=i.aanFeatures,r='<input type="search" class="'+t.sFilterInput+'"/>',s=n.sSearch;s=s.match(/_INPUT_/)?s.replace("_INPUT_",r):s+r;var l=U("<div/>",{id:a.f?null:e+"_filter","class":t.sFilter}).append(U("<label/>").append(s)),u=function(){a.f;var t=this.value?this.value:"";t!=o.sSearch&&(G(i,{sSearch:t,bRegex:o.bRegex,bSmart:o.bSmart,bCaseInsensitive:o.bCaseInsensitive}),i._iDisplayStart=0,b(i))},d=null!==i.searchDelay?i.searchDelay:"ssp"===$t(i)?400:0,c=U("input",l).val(o.sSearch).attr("placeholder",n.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",d?_t(u,d):u).bind("keypress.DT",function(t){if(13==t.keyCode)return!1}).attr("aria-controls",e);return U(i.nTable).on("search.dt.DT",function(t,e){if(i===e)try{c[0]!==y.activeElement&&c.val(o.sSearch)}catch(n){}}),l[0]}function G(t,e,n){var i=t.oPreviousSearch,o=t.aoPreSearchCols,a=function(t){i.sSearch=t.sSearch,i.bRegex=t.bRegex,i.bSmart=t.bSmart,i.bCaseInsensitive=t.bCaseInsensitive},r=function(t){return t.bEscapeRegex!==j?!t.bEscapeRegex:t.bRegex};if(l(t),"ssp"!=$t(t)){X(t,e.sSearch,n,r(e),e.bSmart,e.bCaseInsensitive),a(e);for(var s=0;s<o.length;s++)J(t,o[s].sSearch,s,r(o[s]),o[s].bSmart,o[s].bCaseInsensitive);K(t)}else a(e);t.bFiltered=!0,zt(t,null,"search",[t])}function K(t){for(var e,n,i=Yt.ext.search,o=t.aiDisplay,a=0,r=i.length;a<r;a++){for(var s=[],l=0,u=o.length;l<u;l++)n=o[l],e=t.aoData[n],i[a](t,e._aFilterData,n,e._aData,l)&&s.push(n);o.length=0,U.merge(o,s)}}function J(t,e,n,i,o,a){if(""!==e)for(var r,s=t.aiDisplay,l=Q(e,i,o,a),u=s.length-1;0<=u;u--)r=t.aoData[s[u]]._aFilterData[n],l.test(r)||s.splice(u,1)}function X(t,e,n,i,o,a){var r,s,l,u=Q(e,i,o,a),d=t.oPreviousSearch.sSearch,c=t.aiDisplayMaster;if(0!==Yt.ext.search.length&&(n=!0),s=et(t),e.length<=0)t.aiDisplay=c.slice();else for((s||n||d.length>e.length||0!==e.indexOf(d)||t.bSorted)&&(t.aiDisplay=c.slice()),l=(r=t.aiDisplay).length-1;0<=l;l--)u.test(t.aoData[r[l]]._sFilterRow)||r.splice(l,1)}function Q(t,e,n,i){(t=e?t:tt(t),n)&&(t="^(?=.*?"+U.map(t.match(/"[^"]+"|[^ ]+/g)||[""],function(t){if('"'===t.charAt(0)){var e=t.match(/^"(.*)"$/);t=e?e[1]:t}return t.replace('"',"")}).join(")(?=.*?")+").*$");return new RegExp(t,i?"i":"")}function tt(t){return t.replace(ne,"\\$1")}function et(t){var e,n,i,o,a,r,s,l,u=t.aoColumns,d=Yt.ext.type.search,c=!1;for(n=0,o=t.aoData.length;n<o;n++)if(!(l=t.aoData[n])._aFilterData){for(r=[],i=0,a=u.length;i<a;i++)(e=u[i]).bSearchable?(s=m(t,n,i,"filter"),d[e.sType]&&(s=d[e.sType](s)),null===s&&(s=""),"string"!=typeof s&&s.toString&&(s=s.toString())):s="",s.indexOf&&-1!==s.indexOf("&")&&(_e.innerHTML=s,s=be?_e.textContent:_e.innerText),s.replace&&(s=s.replace(/[\r\n]/g,"")),r.push(s);l._aFilterData=r,l._sFilterRow=r.join("  "),c=!0}return c}function nt(t){return{search:t.sSearch,smart:t.bSmart,regex:t.bRegex,caseInsensitive:t.bCaseInsensitive}}function it(t){return{sSearch:t.search,bSmart:t.smart,bRegex:t.regex,bCaseInsensitive:t.caseInsensitive}}function ot(t){var e=t.sTableId,n=t.aanFeatures.i,i=U("<div/>",{"class":t.oClasses.sInfo,id:n?null:e+"_info"});return n||(t.aoDrawCallback.push({fn:at,sName:"information"}),i.attr("role","status").attr("aria-live","polite"),U(t.nTable).attr("aria-describedby",e+"_info")),i[0]}function at(t){var e=t.aanFeatures.i;if(0!==e.length){var n=t.oLanguage,i=t._iDisplayStart+1,o=t.fnDisplayEnd(),a=t.fnRecordsTotal(),r=t.fnRecordsDisplay(),s=r?n.sInfo:n.sInfoEmpty;r!==a&&(s+=" "+n.sInfoFiltered),s=rt(t,s+=n.sInfoPostFix);var l=n.fnInfoCallback;null!==l&&(s=l.call(t.oInstance,t,i,o,a,r,s)),U(e).html(s)}}function rt(t,e){var n=t.fnFormatNumber,i=t._iDisplayStart+1,o=t._iDisplayLength,a=t.fnRecordsDisplay(),r=-1===o;return e.replace(/_START_/g,n.call(t,i)).replace(/_END_/g,n.call(t,t.fnDisplayEnd())).replace(/_MAX_/g,n.call(t,t.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(t,a)).replace(/_PAGE_/g,n.call(t,r?1:Math.ceil(i/o))).replace(/_PAGES_/g,n.call(t,r?1:Math.ceil(a/o)))}function st(n){var i,t,e,o=n.iInitDisplayStart,a=n.aoColumns,r=n.oFeatures,s=n.bDeferLoading;if(n.bInitialised){for(L(n),p(n),v(n,n.aoHeader),v(n,n.aoFooter),pt(n,!0),r.bAutoWidth&&yt(n),i=0,t=a.length;i<t;i++)(e=a[i]).sWidth&&(e.nTh.style.width=Ct(e.sWidth));zt(n,null,"preInit",[n]),C(n);var l=$t(n);("ssp"!=l||s)&&("ajax"==l?S(n,[],function(t){var e=D(n,t);for(i=0;i<e.length;i++)z(n,e[i]);n.iInitDisplayStart=o,C(n),pt(n,!1),lt(n,t)},n):(pt(n,!1),lt(n)))}else setTimeout(function(){st(n)},200)}function lt(t,e){t._bInitComplete=!0,(e||t.oInit.aaData)&&$(t),zt(t,null,"plugin-init",[t,e]),zt(t,"aoInitComplete","init",[t,e])}function ut(t,e){var n=parseInt(e,10);t._iDisplayLength=n,Ut(t),zt(t,null,"length",[t,n])}function dt(i){for(var t=i.oClasses,e=i.sTableId,n=i.aLengthMenu,o=U.isArray(n[0]),a=o?n[0]:n,r=o?n[1]:n,s=U("<select/>",{name:e+"_length","aria-controls":e,"class":t.sLengthSelect}),l=0,u=a.length;l<u;l++)s[0][l]=new Option(r[l],a[l]);var d=U("<div><label/></div>").addClass(t.sLength);return i.aanFeatures.l||(d[0].id=e+"_length"),d.children().append(i.oLanguage.sLengthMenu.replace("_MENU_",s[0].outerHTML)),U("select",d).val(i._iDisplayLength).bind("change.DT",function(){ut(i,U(this).val()),b(i)}),U(i.nTable).bind("length.dt.DT",function(t,e,n){i===e&&U("select",d).val(n)}),d[0]}function ct(t){var e=t.sPaginationType,d=Yt.ext.pager[e],c="function"==typeof d,h=function(t){b(t)},n=U("<div/>").addClass(t.oClasses.sPaging+e)[0],f=t.aanFeatures;return c||d.fnInit(t,n,h),f.p||(n.id=t.sTableId+"_paginate",t.aoDrawCallback.push({fn:function(t){if(c){var e,n,i=t._iDisplayStart,o=t._iDisplayLength,a=t.fnRecordsDisplay(),r=-1===o,s=r?0:Math.ceil(i/o),l=r?1:Math.ceil(a/o),u=d(s,l);for(e=0,n=f.p.length;e<n;e++)jt(t,"pageButton")(t,f.p[e],e,u,s,l)}else d.fnUpdate(t,h)},sName:"pagination"})),n}function ht(t,e,n){var i=t._iDisplayStart,o=t._iDisplayLength,a=t.fnRecordsDisplay();0===a||-1===o?i=0:"number"==typeof e?a<(i=e*o)&&(i=0):"first"==e?i=0:"previous"==e?(i=0<=o?i-o:0)<0&&(i=0):"next"==e?i+o<a&&(i+=o):"last"==e?i=Math.floor((a-1)/o)*o:Ot(t,0,"Unknown paging action: "+e,5);var r=t._iDisplayStart!==i;return t._iDisplayStart=i,r&&(zt(t,null,"page",[t]),n&&b(t)),r}function ft(t){return U("<div/>",{id:t.aanFeatures.r?null:t.sTableId+"_processing","class":t.oClasses.sProcessing}).html(t.oLanguage.sProcessing).insertBefore(t.nTable)[0]}function pt(t,e){t.oFeatures.bProcessing&&U(t.aanFeatures.r).css("display",e?"block":"none"),zt(t,null,"processing",[t,e])}function mt(t){var e=U(t.nTable);e.attr("role","grid");var n=t.oScroll;if(""===n.sX&&""===n.sY)return t.nTable;var i=n.sX,o=n.sY,a=t.oClasses,r=e.children("caption"),s=r.length?r[0]._captionSide:null,l=U(e[0].cloneNode(!1)),u=U(e[0].cloneNode(!1)),d=e.children("tfoot"),c="<div/>",h=function(t){return t?Ct(t):null};d.length||(d=null);var f=U(c,{"class":a.sScrollWrapper}).append(U(c,{"class":a.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:i?h(i):"100%"}).append(U(c,{"class":a.sScrollHeadInner}).css({"box-sizing":"content-box",width:n.sXInner||"100%"}).append(l.removeAttr("id").css("margin-left",0).append("top"===s?r:null).append(e.children("thead"))))).append(U(c,{"class":a.sScrollBody}).css({position:"relative",overflow:"auto",width:h(i)}).append(e));d&&f.append(U(c,{"class":a.sScrollFoot}).css({overflow:"hidden",border:0,width:i?h(i):"100%"}).append(U(c,{"class":a.sScrollFootInner}).append(u.removeAttr("id").css("margin-left",0).append("bottom"===s?r:null).append(e.children("tfoot")))));var p=f.children(),m=p[0],g=p[1],v=d?p[2]:null;return i&&U(g).on("scroll.DT",function(){var t=this.scrollLeft;m.scrollLeft=t,d&&(v.scrollLeft=t)}),U(g).css(o&&n.bCollapse?"max-height":"height",o),t.nScrollHead=m,t.nScrollBody=g,t.nScrollFoot=v,t.aoDrawCallback.push({fn:gt,sName:"scrolling"}),f[0]}function gt(n){var t,e,i,o,a,r,s,l,u,d=n.oScroll,c=d.sX,h=d.sXInner,f=d.sY,p=d.iBarWidth,m=U(n.nScrollHead),g=m[0].style,v=m.children("div"),y=v[0].style,_=v.children("table"),b=n.nScrollBody,w=U(b),x=b.style,C=U(n.nScrollFoot).children("div"),L=C.children("table"),S=U(n.nTHead),k=U(n.nTable),D=k[0],T=D.style,M=n.nTFoot?U(n.nTFoot):null,P=n.oBrowser,E=P.bScrollOversize,I=[],A=[],O=[],F=function(t){var e=t.style;e.paddingTop="0",e.paddingBottom="0",e.borderTopWidth="0",e.borderBottomWidth="0",e.height=0},N=b.scrollHeight>b.clientHeight;if(n.scrollBarVis!==N&&n.scrollBarVis!==j)return n.scrollBarVis=N,void $(n);n.scrollBarVis=N,k.children("thead, tfoot").remove(),a=S.clone().prependTo(k),t=S.find("tr"),i=a.find("tr"),a.find("th, td").removeAttr("tabindex"),M&&(r=M.clone().prependTo(k),e=M.find("tr"),o=r.find("tr")),c||(x.width="100%",m[0].style.width="100%"),U.each(q(n,a),function(t,e){s=H(n,t),e.style.width=n.aoColumns[s].sWidth}),M&&vt(function(t){t.style.width=""},o),u=k.outerWidth(),""===c?(T.width="100%",E&&(k.find("tbody").height()>b.offsetHeight||"scroll"==w.css("overflow-y"))&&(T.width=Ct(k.outerWidth()-p)),u=k.outerWidth()):""!==h&&(T.width=Ct(h),u=k.outerWidth()),vt(F,i),vt(function(t){O.push(t.innerHTML),I.push(Ct(U(t).css("width")))},i),vt(function(t,e){t.style.width=I[e]},t),U(i).height(0),M&&(vt(F,o),vt(function(t){A.push(Ct(U(t).css("width")))},o),vt(function(t,e){t.style.width=A[e]},e),U(o).height(0)),vt(function(t,e){t.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+O[e]+"</div>",t.style.width=I[e]},i),M&&vt(function(t,e){t.innerHTML="",t.style.width=A[e]},o),k.outerWidth()<u?(l=b.scrollHeight>b.offsetHeight||"scroll"==w.css("overflow-y")?u+p:u,E&&(b.scrollHeight>b.offsetHeight||"scroll"==w.css("overflow-y"))&&(T.width=Ct(l-p)),""!==c&&""===h||Ot(n,1,"Possible column misalignment",6)):l="100%",x.width=Ct(l),g.width=Ct(l),M&&(n.nScrollFoot.style.width=Ct(l)),f||E&&(x.height=Ct(D.offsetHeight+p));var R=k.outerWidth();_[0].style.width=Ct(R),y.width=Ct(R);var B=k.height()>b.clientHeight||"scroll"==w.css("overflow-y"),z="padding"+(P.bScrollbarLeft?"Left":"Right");y[z]=B?p+"px":"0px",M&&(L[0].style.width=Ct(R),C[0].style.width=Ct(R),C[0].style[z]=B?p+"px":"0px"),w.scroll(),!n.bSorted&&!n.bFiltered||n._drawHold||(b.scrollTop=0)}function vt(t,e,n){for(var i,o,a=0,r=0,s=e.length;r<s;){for(i=e[r].firstChild,o=n?n[r].firstChild:null;i;)1===i.nodeType&&(n?t(i,o,a):t(i,a),a++),i=i.nextSibling,o=n?o.nextSibling:null;r++}}function yt(t){var e,n,i,o=t.nTable,a=t.aoColumns,r=t.oScroll,s=r.sY,l=r.sX,u=r.sXInner,d=a.length,c=P(t,"bVisible"),h=U("th",t.nTHead),f=o.getAttribute("width"),p=o.parentNode,m=!1,g=t.oBrowser,v=g.bScrollOversize,y=o.style.width;for(y&&-1!==y.indexOf("%")&&(f=y),e=0;e<c.length;e++)null!==(n=a[c[e]]).sWidth&&(n.sWidth=bt(n.sWidthOrig,p),m=!0);if(v||!m&&!l&&!s&&d==M(t)&&d==h.length)for(e=0;e<d;e++){var _=H(t,e);null!==_&&(a[_].sWidth=Ct(h.eq(e).width()))}else{var b=U(o).clone().css("visibility","hidden").removeAttr("id");b.find("tbody tr").remove();var w=U("<tr/>").appendTo(b.find("tbody"));for(b.find("thead, tfoot").remove(),b.append(U(t.nTHead).clone()).append(U(t.nTFoot).clone()),b.find("tfoot th, tfoot td").css("width",""),h=q(t,b.find("thead")[0]),e=0;e<c.length;e++)n=a[c[e]],h[e].style.width=null!==n.sWidthOrig&&""!==n.sWidthOrig?Ct(n.sWidthOrig):"",n.sWidthOrig&&l&&U(h[e]).append(U("<div/>").css({width:n.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(t.aoData.length)for(e=0;e<c.length;e++)n=a[i=c[e]],U(wt(t,i)).clone(!1).append(n.sContentPadding).appendTo(w);var x=U("<div/>").css(l||s?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(b).appendTo(p);l&&u?b.width(u):l?(b.css("width","auto"),b.removeAttr("width"),b.width()<p.clientWidth&&f&&b.width(p.clientWidth)):s?b.width(p.clientWidth):f&&b.width(f);var C=0;for(e=0;e<c.length;e++){var L=U(h[e]),S=L.outerWidth()-L.width(),k=g.bBounding?Math.ceil(h[e].getBoundingClientRect().width):L.outerWidth();C+=k,a[c[e]].sWidth=Ct(k-S)}o.style.width=Ct(C),x.remove()}if(f&&(o.style.width=Ct(f)),(f||l)&&!t._reszEvt){var D=function(){U(T).bind("resize.DT-"+t.sInstance,_t(function(){$(t)}))};v?setTimeout(D,1e3):D(),t._reszEvt=!0}}function _t(i,t){var o,a,r=t!==j?t:200;return function(){var t=this,e=+new Date,n=arguments;o&&e<o+r?(clearTimeout(a),a=setTimeout(function(){o=j,i.apply(t,n)},r)):(o=e,i.apply(t,n))}}function bt(t,e){if(!t)return 0;var n=U("<div/>").css("width",Ct(t)).appendTo(e||y.body),i=n[0].offsetWidth;return n.remove(),i}function wt(t,e){var n=xt(t,e);if(n<0)return null;var i=t.aoData[n];return i.nTr?i.anCells[e]:U("<td/>").html(m(t,n,e,"display"))[0]}function xt(t,e){for(var n,i=-1,o=-1,a=0,r=t.aoData.length;a<r;a++)(n=(n=(n=m(t,a,e,"display")+"").replace(we,"")).replace(/&nbsp;/g," ")).length>i&&(i=n.length,o=a);return o}function Ct(t){return null===t?"0px":"number"==typeof t?t<0?"0px":t+"px":t.match(/\d$/)?t+"px":t}function Lt(t){var e,n,i,o,a,r,s,l=[],u=t.aoColumns,d=t.aaSortingFixed,c=U.isPlainObject(d),h=[],f=function(t){t.length&&!U.isArray(t[0])?h.push(t):U.merge(h,t)};for(U.isArray(d)&&f(d),c&&d.pre&&f(d.pre),f(t.aaSorting),c&&d.post&&f(d.post),e=0;e<h.length;e++)for(n=0,i=(o=u[s=h[e][0]].aDataSort).length;n<i;n++)r=u[a=o[n]].sType||"string",h[e]._idx===j&&(h[e]._idx=U.inArray(h[e][1],u[a].asSorting)),l.push({src:s,col:a,dir:h[e][1],index:h[e]._idx,type:r,formatter:Yt.ext.type.order[r+"-pre"]});return l}function St(t){var e,n,i,o,d,c=[],h=Yt.ext.type.order,f=t.aoData,a=(t.aoColumns,0),r=t.aiDisplayMaster;for(l(t),e=0,n=(d=Lt(t)).length;e<n;e++)(o=d[e]).formatter&&a++,Pt(t,o.col);if("ssp"!=$t(t)&&0!==d.length){for(e=0,i=r.length;e<i;e++)c[r[e]]=e;a===d.length?r.sort(function(t,e){var n,i,o,a,r,s=d.length,l=f[t]._aSortData,u=f[e]._aSortData;for(o=0;o<s;o++)if(0!==(a=(n=l[(r=d[o]).col])<(i=u[r.col])?-1:i<n?1:0))return"asc"===r.dir?a:-a;return(n=c[t])<(i=c[e])?-1:i<n?1:0}):r.sort(function(t,e){var n,i,o,a,r,s=d.length,l=f[t]._aSortData,u=f[e]._aSortData;for(o=0;o<s;o++)if(n=l[(r=d[o]).col],i=u[r.col],0!==(a=(h[r.type+"-"+r.dir]||h["string-"+r.dir])(n,i)))return a;return(n=c[t])<(i=c[e])?-1:i<n?1:0})}t.bSorted=!0}function kt(t){for(var e,n,i=t.aoColumns,o=Lt(t),a=t.oLanguage.oAria,r=0,s=i.length;r<s;r++){var l=i[r],u=l.asSorting,d=l.sTitle.replace(/<.*?>/g,""),c=l.nTh;c.removeAttribute("aria-sort"),l.bSortable?(0<o.length&&o[0].col==r?(c.setAttribute("aria-sort","asc"==o[0].dir?"ascending":"descending"),n=u[o[0].index+1]||u[0]):n=u[0],e=d+("asc"===n?a.sSortAscending:a.sSortDescending)):e=d,c.setAttribute("aria-label",e)}}function Dt(t,e,n,i){var o,a=t.aoColumns[e],r=t.aaSorting,s=a.asSorting,l=function(t,e){var n=t._idx;return n===j&&(n=U.inArray(t[1],s)),n+1<s.length?n+1:e?null:0};if("number"==typeof r[0]&&(
r=t.aaSorting=[r]),n&&t.oFeatures.bSortMulti){var u=U.inArray(e,de(r,"0"));-1!==u?(null===(o=l(r[u],!0))&&1===r.length&&(o=0),null===o?r.splice(u,1):(r[u][1]=s[o],r[u]._idx=o)):(r.push([e,s[0],0]),r[r.length-1]._idx=0)}else r.length&&r[0][0]==e?(o=l(r[0]),r.length=1,r[0][1]=s[o],r[0]._idx=o):(r.length=0,r.push([e,s[0]]),r[0]._idx=0);C(t),"function"==typeof i&&i(t)}function Tt(e,t,n,i){var o=e.aoColumns[n];Rt(t,{},function(t){!1!==o.bSortable&&(e.oFeatures.bProcessing?(pt(e,!0),setTimeout(function(){Dt(e,n,t.shiftKey,i),"ssp"!==$t(e)&&pt(e,!1)},0)):Dt(e,n,t.shiftKey,i))})}function Mt(t){var e,n,i,o=t.aLastSort,a=t.oClasses.sSortColumn,r=Lt(t),s=t.oFeatures;if(s.bSort&&s.bSortClasses){for(e=0,n=o.length;e<n;e++)i=o[e].src,U(de(t.aoData,"anCells",i)).removeClass(a+(e<2?e+1:3));for(e=0,n=r.length;e<n;e++)i=r[e].src,U(de(t.aoData,"anCells",i)).addClass(a+(e<2?e+1:3))}t.aLastSort=r}function Pt(t,e){var n,i,o,a=t.aoColumns[e],r=Yt.ext.order[a.sSortDataType];r&&(n=r.call(t.oInstance,t,e,d(t,e)));for(var s=Yt.ext.type.order[a.sType+"-pre"],l=0,u=t.aoData.length;l<u;l++)(i=t.aoData[l])._aSortData||(i._aSortData=[]),i._aSortData[e]&&!r||(o=r?n[l]:m(t,l,e,"sort"),i._aSortData[e]=s?s(o):o)}function Et(n){if(n.oFeatures.bStateSave&&!n.bDestroying){var t={time:+new Date,start:n._iDisplayStart,length:n._iDisplayLength,order:U.extend(!0,[],n.aaSorting),search:nt(n.oPreviousSearch),columns:U.map(n.aoColumns,function(t,e){return{visible:t.bVisible,search:nt(n.aoPreSearchCols[e])}})};zt(n,"aoStateSaveParams","stateSaveParams",[n,t]),n.oSavedState=t,n.fnStateSaveCallback.call(n.oInstance,n,t)}}function It(n){var t,e,i=n.aoColumns;if(n.oFeatures.bStateSave){var o=n.fnStateLoadCallback.call(n.oInstance,n);if(o&&o.time){var a=zt(n,"aoStateLoadParams","stateLoadParams",[n,o]);if(-1===U.inArray(!1,a)){var r=n.iStateDuration;if(!(0<r&&o.time<+new Date-1e3*r)&&i.length===o.columns.length){for(n.oLoadedState=U.extend(!0,{},o),o.start!==j&&(n._iDisplayStart=o.start,n.iInitDisplayStart=o.start),o.length!==j&&(n._iDisplayLength=o.length),o.order!==j&&(n.aaSorting=[],U.each(o.order,function(t,e){n.aaSorting.push(e[0]>=i.length?[0,e[1]]:e)})),o.search!==j&&U.extend(n.oPreviousSearch,it(o.search)),t=0,e=o.columns.length;t<e;t++){var s=o.columns[t];s.visible!==j&&(i[t].bVisible=s.visible),s.search!==j&&U.extend(n.aoPreSearchCols[t],it(s.search))}zt(n,"aoStateLoaded","stateLoaded",[n,o])}}}}}function At(t){var e=Yt.settings,n=U.inArray(t,de(e,"nTable"));return-1!==n?e[n]:null}function Ot(t,e,n,i){if(n="DataTables warning: "+(t?"table id="+t.sTableId+" - ":"")+n,i&&(n+=". For more information about this error, please see http://datatables.net/tn/"+i),e)T.console&&console.log&&console.log(n);else{var o=Yt.ext,a=o.sErrMode||o.errMode;if(t&&zt(t,null,"error",[t,i,n]),"alert"==a)alert(n);else{if("throw"==a)throw new Error(n);"function"==typeof a&&a(t,i,n)}}}function Ft(n,i,t,e){U.isArray(t)?U.each(t,function(t,e){U.isArray(e)?Ft(n,i,e[0],e[1]):Ft(n,i,e)}):(e===j&&(e=t),i[t]!==j&&(n[e]=i[t]))}function Nt(t,e,n){var i;for(var o in e)e.hasOwnProperty(o)&&(i=e[o],U.isPlainObject(i)?(U.isPlainObject(t[o])||(t[o]={}),U.extend(!0,t[o],i)):n&&"data"!==o&&"aaData"!==o&&U.isArray(i)?t[o]=i.slice():t[o]=i);return t}function Rt(e,t,n){U(e).bind("click.DT",t,function(t){e.blur(),n(t)}).bind("keypress.DT",t,function(t){13===t.which&&(t.preventDefault(),n(t))}).bind("selectstart.DT",function(){return!1})}function Bt(t,e,n,i){n&&t[e].push({fn:n,sName:i})}function zt(e,t,n,i){var o=[];if(t&&(o=U.map(e[t].slice().reverse(),function(t){return t.fn.apply(e.oInstance,i)})),null!==n){var a=U.Event(n+".dt");U(e.nTable).trigger(a,i),o.push(a.result)}return o}function Ut(t){var e=t._iDisplayStart,n=t.fnDisplayEnd(),i=t._iDisplayLength;n<=e&&(e=n-i),e-=e%i,(-1===i||e<0)&&(e=0),t._iDisplayStart=e}function jt(t,e){var n=t.renderer,i=Yt.ext.renderer[e];return U.isPlainObject(n)&&n[e]?i[n[e]]||i._:"string"==typeof n&&i[n]||i._}function $t(t){return t.oFeatures.bServerSide?"ssp":t.ajax||t.sAjaxSource?"ajax":"dom"}function Ht(t,e){var n=[],i=qe.numbers_length,o=Math.floor(i/2);return e<=i?n=he(0,e):t<=o?((n=he(0,i-2)).push("ellipsis"),n.push(e-1)):(e-1-o<=t?(n=he(e-(i-2),e)).splice(0,0,"ellipsis"):((n=he(t-o+2,t+o-1)).push("ellipsis"),n.push(e-1),n.splice(0,0,"ellipsis")),n.splice(0,0,0)),n.DT_el="span",n}function Wt(n){U.each({num:function(t){return Ze(t,n)},"num-fmt":function(t){return Ze(t,n,ie)},"html-num":function(t){return Ze(t,n,Qt)},"html-num-fmt":function(t){return Ze(t,n,Qt,ie)}},function(t,e){qt.type.order[t+n+"-pre"]=e,t.match(/^html\-/)&&(qt.type.search[t+n]=qt.type.search.html)})}function Vt(e){return function(){var t=[At(this[Yt.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return Yt.ext.internal[e].apply(this,t)}}var Yt,qt,Zt,Gt,Kt,Jt={},Xt=/[\r\n]/g,Qt=/<.*?>/g,te=/^[\w\+\-]/,ee=/[\w\+\-]$/,ne=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g"),ie=/[',$\xa3\u20ac\xa5%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,oe=function(t){return!t||!0===t||"-"===t},ae=function(t){var e=parseInt(t,10);return!isNaN(e)&&isFinite(t)?e:null},re=function(t,e){return Jt[e]||(Jt[e]=new RegExp(tt(e),"g")),"string"==typeof t&&"."!==e?t.replace(/\./g,"").replace(Jt[e],"."):t},se=function(t,e,n){var i="string"==typeof t;return!!oe(t)||(e&&i&&(t=re(t,e)),n&&i&&(t=t.replace(ie,"")),!isNaN(parseFloat(t))&&isFinite(t))},le=function(t){return oe(t)||"string"==typeof t},ue=function(t,e,n){return!!oe(t)||(le(t)&&!!se(pe(t),e,n)||null)},de=function(t,e,n){var i=[],o=0,a=t.length;if(n!==j)for(;o<a;o++)t[o]&&t[o][e]&&i.push(t[o][e][n]);else for(;o<a;o++)t[o]&&i.push(t[o][e]);return i},ce=function(t,e,n,i){var o=[],a=0,r=e.length;if(i!==j)for(;a<r;a++)t[e[a]][n]&&o.push(t[e[a]][n][i]);else for(;a<r;a++)o.push(t[e[a]][n]);return o},he=function(t,e){var n,i=[];e===j?(e=0,n=t):(n=e,e=t);for(var o=e;o<n;o++)i.push(o);return i},fe=function(t){for(var e=[],n=0,i=t.length;n<i;n++)t[n]&&e.push(t[n]);return e},pe=function(t){return t.replace(Qt,"")},me=function(t){var e,n,i,o=[],a=t.length,r=0;t:for(n=0;n<a;n++){for(e=t[n],i=0;i<r;i++)if(o[i]===e)continue t;o.push(e),r++}return o},ge=function(t,e,n){t[e]!==j&&(t[n]=t[e])},ve=/\[.*?\]$/,ye=/\(\)$/,_e=U("<div>")[0],be=_e.textContent!==j,we=/<.*?>/g;Yt=function(D){this.$=function(t,e){return this.api(!0).$(t,e)},this._=function(t,e){return this.api(!0).rows(t,e).data()},this.api=function(t){return new Zt(t?At(this[qt.iApiIndex]):this)},this.fnAddData=function(t,e){var n=this.api(!0),i=U.isArray(t)&&(U.isArray(t[0])||U.isPlainObject(t[0]))?n.rows.add(t):n.row.add(t);return(e===j||e)&&n.draw(),i.flatten().toArray()},this.fnAdjustColumnSizing=function(t){var e=this.api(!0).columns.adjust(),n=e.settings()[0],i=n.oScroll;t===j||t?e.draw(!1):""===i.sX&&""===i.sY||gt(n)},this.fnClearTable=function(t){var e=this.api(!0).clear();(t===j||t)&&e.draw()},this.fnClose=function(t){this.api(!0).row(t).child.hide()},this.fnDeleteRow=function(t,e,n){var i=this.api(!0),o=i.rows(t),a=o.settings()[0],r=a.aoData[o[0][0]];return o.remove(),e&&e.call(this,a,r),(n===j||n)&&i.draw(),r},this.fnDestroy=function(t){this.api(!0).destroy(t)},this.fnDraw=function(t){this.api(!0).draw(t)},this.fnFilter=function(t,e,n,i,o,a){var r=this.api(!0);null===e||e===j?r.search(t,n,i,a):r.column(e).search(t,n,i,a),r.draw()},this.fnGetData=function(t,e){var n=this.api(!0);if(t===j)return n.data().toArray();var i=t.nodeName?t.nodeName.toLowerCase():"";return e!==j||"td"==i||"th"==i?n.cell(t,e).data():n.row(t).data()||null},this.fnGetNodes=function(t){var e=this.api(!0);return t!==j?e.row(t).node():e.rows().nodes().flatten().toArray()},this.fnGetPosition=function(t){var e=this.api(!0),n=t.nodeName.toUpperCase();if("TR"==n)return e.row(t).index();if("TD"!=n&&"TH"!=n)return null;var i=e.cell(t).index();return[i.row,i.columnVisible,i.column]},this.fnIsOpen=function(t){return this.api(!0).row(t).child.isShown()},this.fnOpen=function(t,e,n){return this.api(!0).row(t).child(e,n).show().child()[0]},this.fnPageChange=function(t,e){var n=this.api(!0).page(t);(e===j||e)&&n.draw(!1)},this.fnSetColumnVis=function(t,e,n){var i=this.api(!0).column(t).visible(e);(n===j||n)&&i.columns.adjust().draw()},this.fnSettings=function(){return At(this[qt.iApiIndex])},this.fnSort=function(t){this.api(!0).order(t).draw()},this.fnSortListener=function(t,e,n){this.api(!0).order.listener(t,e,n)},this.fnUpdate=function(t,e,n,i,o){var a=this.api(!0);return n===j||null===n?a.row(e).data(t):a.cell(e,n).data(t),(o===j||o)&&a.columns.adjust(),(i===j||i)&&a.draw(),0},this.fnVersionCheck=qt.fnVersionCheck;var T=this,M=D===j,P=this.length;for(var t in M&&(D={}),this.oApi=this.internal=qt.internal,Yt.ext.internal)t&&(this[t]=Vt(t));return this.each(function(){var t,e=1<P?Nt({},D,!0):D,n=0,i=this.getAttribute("id"),o=!1,a=Yt.defaults,r=U(this);if("table"==this.nodeName.toLowerCase()){A(a),O(a.column),E(a,a,!0),E(a.column,a.column,!0),E(a,U.extend(e,r.data()));var s=Yt.settings;for(n=0,t=s.length;n<t;n++){var l=s[n];if(l.nTable==this||l.nTHead.parentNode==this||l.nTFoot&&l.nTFoot.parentNode==this){var u=e.bRetrieve!==j?e.bRetrieve:a.bRetrieve,d=e.bDestroy!==j?e.bDestroy:a.bDestroy;if(M||u)return l.oInstance;if(d){l.oInstance.fnDestroy();break}return void Ot(l,0,"Cannot reinitialise DataTable",3)}if(l.sTableId==this.id){s.splice(n,1);break}}null!==i&&""!==i||(i="DataTables_Table_"+Yt.ext._unique++,this.id=i);var c=U.extend(!0,{},Yt.models.oSettings,{sDestroyWidth:r[0].style.width,sInstance:i,sTableId:i});c.nTable=this,c.oApi=T.internal,c.oInit=e,s.push(c),c.oInstance=1===T.length?T:r.dataTable(),A(e),e.oLanguage&&I(e.oLanguage),e.aLengthMenu&&!e.iDisplayLength&&(e.iDisplayLength=U.isArray(e.aLengthMenu[0])?e.aLengthMenu[0][0]:e.aLengthMenu[0]),e=Nt(U.extend(!0,{},a),e),Ft(c.oFeatures,e,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),Ft(c,e,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]),Ft(c.oScroll,e,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),Ft(c.oLanguage,e,"fnInfoCallback"),Bt(c,"aoDrawCallback",e.fnDrawCallback,"user"),Bt(c,"aoServerParams",e.fnServerParams,"user"),Bt(c,"aoStateSaveParams",e.fnStateSaveParams,"user"),Bt(c,"aoStateLoadParams",e.fnStateLoadParams,"user"),Bt(c,"aoStateLoaded",e.fnStateLoaded,"user"),Bt(c,"aoRowCallback",e.fnRowCallback,"user"),Bt(c,"aoRowCreatedCallback",e.fnCreatedRow,"user"),Bt(c,"aoHeaderCallback",e.fnHeaderCallback,"user"),Bt(c,"aoFooterCallback",e.fnFooterCallback,"user"),Bt(c,"aoInitComplete",e.fnInitComplete,"user"),Bt(c,"aoPreDrawCallback",e.fnPreDrawCallback,"user"),c.rowIdFn=V(e.rowId),F(c);var h=c.oClasses;if(e.bJQueryUI?(U.extend(h,Yt.ext.oJUIClasses,e.oClasses),e.sDom===a.sDom&&"lfrtip"===a.sDom&&(c.sDom='<"H"lfr>t<"F"ip>'),c.renderer?U.isPlainObject(c.renderer)&&!c.renderer.header&&(c.renderer.header="jqueryui"):c.renderer="jqueryui"):U.extend(h,Yt.ext.classes,e.oClasses),r.addClass(h.sTable),c.iInitDisplayStart===j&&(c.iInitDisplayStart=e.iDisplayStart,c._iDisplayStart=e.iDisplayStart),null!==e.iDeferLoading){c.bDeferLoading=!0;var f=U.isArray(e.iDeferLoading);c._iRecordsDisplay=f?e.iDeferLoading[0]:e.iDeferLoading,c._iRecordsTotal=f?e.iDeferLoading[1]:e.iDeferLoading}var p=c.oLanguage;U.extend(!0,p,e.oLanguage),""!==p.sUrl&&(U.ajax({dataType:"json",url:p.sUrl,success:function(t){I(t),E(a.oLanguage,t),U.extend(!0,p,t),st(c)},error:function(){st(c)}}),o=!0),null===e.asStripeClasses&&(c.asStripeClasses=[h.sStripeOdd,h.sStripeEven]);var m=c.asStripeClasses,g=r.children("tbody").find("tr").eq(0);-1!==U.inArray(!0,U.map(m,function(t){return g.hasClass(t)}))&&(U("tbody tr",this).removeClass(m.join(" ")),c.asDestroyStripes=m.slice());var v,y=[],_=this.getElementsByTagName("thead");if(0!==_.length&&(Y(c.aoHeader,_[0]),y=q(c)),null===e.aoColumns)for(v=[],n=0,t=y.length;n<t;n++)v.push(null);else v=e.aoColumns;for(n=0,t=v.length;n<t;n++)N(c,y?y[n]:null);if(B(c,e.aoColumnDefs,v,function(t,e){R(c,t,e)}),g.length){var b=function(t,e){return null!==t.getAttribute("data-"+e)?e:null};U(g[0]).children("th, td").each(function(t,e){var n=c.aoColumns[t];if(n.mData===t){var i=b(e,"sort")||b(e,"order"),o=b(e,"filter")||b(e,"search");null===i&&null===o||(n.mData={_:t+".display",sort:null!==i?t+".@data-"+i:j,type:null!==i?t+".@data-"+i:j,filter:null!==o?t+".@data-"+o:j},R(c,t))}})}var w=c.oFeatures;if(e.bStateSave&&(w.bStateSave=!0,It(c,e),Bt(c,"aoDrawCallback",Et,"state_save")),e.aaSorting===j){var x=c.aaSorting;for(n=0,t=x.length;n<t;n++)x[n][1]=c.aoColumns[n].asSorting[0]}Mt(c),w.bSort&&Bt(c,"aoDrawCallback",function(){if(c.bSorted){var t=Lt(c),n={};U.each(t,function(t,e){n[e.src]=e.dir}),zt(c,null,"order",[c,t,n]),kt(c)}}),Bt(c,"aoDrawCallback",function(){(c.bSorted||"ssp"===$t(c)||w.bDeferRender)&&Mt(c)},"sc");var C=r.children("caption").each(function(){this._captionSide=r.css("caption-side")}),L=r.children("thead");0===L.length&&(L=U("<thead/>").appendTo(this)),c.nTHead=L[0];var S=r.children("tbody");0===S.length&&(S=U("<tbody/>").appendTo(this)),c.nTBody=S[0];var k=r.children("tfoot");if(0===k.length&&0<C.length&&(""!==c.oScroll.sX||""!==c.oScroll.sY)&&(k=U("<tfoot/>").appendTo(this)),0===k.length||0===k.children().length?r.addClass(h.sNoFooter):0<k.length&&(c.nTFoot=k[0],Y(c.aoFooter,c.nTFoot)),e.aaData)for(n=0;n<e.aaData.length;n++)z(c,e.aaData[n]);else(c.bDeferLoading||"dom"==$t(c))&&W(c,U(c.nTBody).children("tr"));c.aiDisplay=c.aiDisplayMaster.slice(),!(c.bInitialised=!0)===o&&st(c)}else Ot(null,0,"Non-table node initialisation ("+this.nodeName+")",2)}),T=null,this};var xe=[],Ce=Array.prototype,Le=function(t){var e,n,i=Yt.settings,o=U.map(i,function(t){return t.nTable});return t?t.nTable&&t.oApi?[t]:t.nodeName&&"table"===t.nodeName.toLowerCase()?-1!==(e=U.inArray(t,o))?[i[e]]:null:t&&"function"==typeof t.settings?t.settings().toArray():("string"==typeof t?n=U(t):t instanceof U&&(n=t),n?n.map(function(){return-1!==(e=U.inArray(this,o))?i[e]:null}).toArray():void 0):[]};Zt=function(t,e){if(!(this instanceof Zt))return new Zt(t,e);var n=[],i=function(t){var e=Le(t);e&&(n=n.concat(e))};if(U.isArray(t))for(var o=0,a=t.length;o<a;o++)i(t[o]);else i(t);this.context=me(n),e&&U.merge(this,e),this.selector={rows:null,cols:null,opts:null},Zt.extend(this,this,xe)},Yt.Api=Zt,U.extend(Zt.prototype,{any:function(){return 0!==this.count()},concat:Ce.concat,context:[],count:function(){return this.flatten().length},each:function(t){for(var e=0,n=this.length;e<n;e++)t.call(this,this[e],e,this);return this},eq:function(t){var e=this.context;return e.length>t?new Zt(e[t],this[t]):null},filter:function(t){var e=[];if(Ce.filter)e=Ce.filter.call(this,t,this);else for(var n=0,i=this.length;n<i;n++)t.call(this,this[n],n,this)&&e.push(this[n]);return new Zt(this.context,e)},flatten:function(){var t=[];return new Zt(this.context,t.concat.apply(t,this.toArray()))},join:Ce.join,indexOf:Ce.indexOf||function(t,e){for(var n=e||0,i=this.length;n<i;n++)if(this[n]===t)return n;return-1},iterator:function(t,e,n,i){var o,a,r,s,l,u,d,c,h=[],f=this.context,p=this.selector;for("string"==typeof t&&(i=n,n=e,e=t,t=!1),a=0,r=f.length;a<r;a++){var m=new Zt(f[a]);if("table"===e)(o=n.call(m,f[a],a))!==j&&h.push(o);else if("columns"===e||"rows"===e)(o=n.call(m,f[a],this[a],a))!==j&&h.push(o);else if("column"===e||"column-rows"===e||"row"===e||"cell"===e)for(d=this[a],"column-rows"===e&&(u=Pe(f[a],p.opts)),s=0,l=d.length;s<l;s++)c=d[s],(o="cell"===e?n.call(m,f[a],c.row,c.column,a,s):n.call(m,f[a],c,a,s,u))!==j&&h.push(o)}if(h.length||i){var g=new Zt(f,t?h.concat.apply([],h):h),v=g.selector;return v.rows=p.rows,v.cols=p.cols,v.opts=p.opts,g}return this},lastIndexOf:Ce.lastIndexOf||function(){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(t){var e=[];if(Ce.map)e=Ce.map.call(this,t,this);else for(var n=0,i=this.length;n<i;n++)e.push(t.call(this,this[n],n));return new Zt(this.context,e)},pluck:function(e){return this.map(function(t){return t[e]})},pop:Ce.pop,push:Ce.push,reduce:Ce.reduce||function(t,e){return n(this,t,e,0,this.length,1)},reduceRight:Ce.reduceRight||function(t,e){return n(this,t,e,this.length-1,-1,-1)},reverse:Ce.reverse,selector:null,shift:Ce.shift,sort:Ce.sort,splice:Ce.splice,toArray:function(){return Ce.slice.call(this)},to$:function(){return U(this)},toJQuery:function(){return U(this)},unique:function(){return new Zt(this.context,me(this))},unshift:Ce.unshift}),Zt.extend=function(t,e,n){if(n.length&&e&&(e instanceof Zt||e.__dt_wrapper)){var i,o,a,r=function(e,n,i){return function(){var t=n.apply(e,arguments);return Zt.extend(t,t,i.methodExt),t}};for(i=0,o=n.length;i<o;i++)e[(a=n[i]).name]="function"==typeof a.val?r(t,a.val,a):U.isPlainObject(a.val)?{}:a.val,e[a.name].__dt_wrapper=!0,Zt.extend(t,e[a.name],a.propExt)}},Zt.register=Gt=function(t,e){if(U.isArray(t))for(var n=0,i=t.length;n<i;n++)Zt.register(t[n],e);else{var o,a,r,s,l=t.split("."),u=xe,d=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n].name===e)return t[n];return null};for(o=0,a=l.length;o<a;o++){var c=d(u,r=(s=-1!==l[o].indexOf("()"))?l[o].replace("()",""):l[o]);c||(c={name:r,val:{},methodExt:[],propExt:[]},u.push(c)),o===a-1?c.val=e:u=s?c.methodExt:c.propExt}}},Zt.registerPlural=Kt=function(t,e,n){Zt.register(t,n),Zt.register(e,function(){var t=n.apply(this,arguments);return t===this?this:t instanceof Zt?t.length?U.isArray(t[0])?new Zt(t.context,t[0]):t[0]:j:t})};var Se=function(t,e){if("number"==typeof t)return[e[t]];var n=U.map(e,function(t){return t.nTable});return U(n).filter(t).map(function(){var t=U.inArray(this,n);return e[t]}).toArray()};Gt("tables()",function(t){return t?new Zt(Se(t,this.context)):this}),Gt("table()",function(t){var e=this.tables(t),n=e.context;return n.length?new Zt(n[0]):e}),Kt("tables().nodes()","table().node()",function(){return this.iterator("table",function(t){return t.nTable},1)}),Kt("tables().body()","table().body()",function(){return this.iterator("table",function(t){return t.nTBody},1)}),Kt("tables().header()","table().header()",function(){return this.iterator("table",function(t){return t.nTHead},1)}),Kt("tables().footer()","table().footer()",function(){return this.iterator("table",function(t){return t.nTFoot},1)}),Kt("tables().containers()","table().container()",function(){return this.iterator("table",function(t){return t.nTableWrapper},1)}),Gt("draw()",function(e){return this.iterator("table",function(t){"page"===e?b(t):("string"==typeof e&&(e="full-hold"!==e),C(t,!1===e))})}),Gt("page()",function(e){return e===j?this.page.info().page:this.iterator("table",function(t){ht(t,e)})}),Gt("page.info()",function(){if(0===this.context.length)return j;var t=this.context[0],e=t._iDisplayStart,n=t.oFeatures.bPaginate?t._iDisplayLength:-1,i=t.fnRecordsDisplay(),o=-1===n;return{page:o?0:Math.floor(e/n),pages:o?1:Math.ceil(i/n),start:e,end:t.fnDisplayEnd(),length:n,recordsTotal:t.fnRecordsTotal(),recordsDisplay:i,serverSide:"ssp"===$t(t)}}),Gt("page.len()",function(e){return e===j?0!==this.context.length?this.context[0]._iDisplayLength:j:this.iterator("table",function(t){ut(t,e)})});var ke=function(o,a,t){if(t){var e=new Zt(o);e.one("draw",function(){t(e.ajax.json())})}if("ssp"==$t(o))C(o,a);else{pt(o,!0);var n=o.jqXHR;n&&4!==n.readyState&&n.abort(),S(o,[],function(t){u(o);for(var e=D(o,t),n=0,i=e.length;n<i;n++)z(o,e[n]);C(o,a),pt(o,!1)})}};Gt("ajax.json()",function(){var t=this.context;if(0<t.length)return t[0].json}),Gt("ajax.params()",function(){var t=this.context;if(0<t.length)return t[0].oAjaxData}),Gt("ajax.reload()",function(e,n){return this.iterator("table",function(t){ke(t,!1===n,e)})}),Gt("ajax.url()",function(e){var t=this.context;return e===j?0===t.length?j:(t=t[0]).ajax?U.isPlainObject(t.ajax)?t.ajax.url:t.ajax:t.sAjaxSource:this.iterator("table",function(t){U.isPlainObject(t.ajax)?t.ajax.url=e:t.ajax=e})}),Gt("ajax.url().load()",function(e,n){return this.iterator("table",function(t){ke(t,!1===n,e)})});var De=function(t,e,n,i,o){var a,r,s,l,u,d,c=[],h=typeof e;for(e&&"string"!==h&&"function"!==h&&e.length!==j||(e=[e]),s=0,l=e.length;s<l;s++)for(u=0,d=(r=e[s]&&e[s].split?e[s].split(","):[e[s]]).length;u<d;u++)(a=n("string"==typeof r[u]?U.trim(r[u]):r[u]))&&a.length&&(c=c.concat(a));var f=qt.selector[t];if(f.length)for(s=0,l=f.length;s<l;s++)c=f[s](i,o,c);return me(c)},Te=function(t){return t||(t={}),t.filter&&t.search===j&&(t.search=t.filter),U.extend({search:"none",order:"current",page:"all"},t)},Me=function(t){for(var e=0,n=t.length;e<n;e++)if(0<t[e].length)return t[0]=t[e],t[0].length=1,t.length=1,t.context=[t.context[e]],t;return t.length=0,t},Pe=function(t,e){var n,i,o,a=[],r=t.aiDisplay,s=t.aiDisplayMaster,l=e.search,u=e.order,d=e.page;if("ssp"==$t(t))return"removed"===l?[]:he(0,s.length);if("current"==d)for(n=t._iDisplayStart,i=t.fnDisplayEnd();n<i;n++)a.push(r[n]);else if("current"==u||"applied"==u)a="none"==l?s.slice():"applied"==l?r.slice():U.map(s,function(t){return-1===U.inArray(t,r)?t:null});else if("index"==u||"original"==u)for(n=0,i=t.aoData.length;n<i;n++)"none"==l?a.push(n):(-1===(o=U.inArray(n,r))&&"removed"==l||0<=o&&"applied"==l)&&a.push(n);return a},Ee=function(a,t,r){return De("row",t,function(n){var t=ae(n);if(null!==t&&!r)return[t];var e=Pe(a,r);if(null!==t&&-1!==U.inArray(t,e))return[t];if(!n)return e;if("function"==typeof n)return U.map(e,function(t){var e=a.aoData[t];return n(t,e._aData,e.nTr)?t:null});var i=fe(ce(a.aoData,e,"nTr"));if(n.nodeName&&-1!==U.inArray(n,i))return[n._DT_RowIndex];if("string"==typeof n&&"#"===n.charAt(0)){var o=a.aIds[n.replace(/^#/,"")];if(o!==j)return[o.idx]}return U(i).filter(n).map(function(){return this._DT_RowIndex}).toArray()},a,r)};Gt("rows()",function(e,n){e===j?e="":U.isPlainObject(e)&&(n=e,e=""),n=Te(n);var t=this.iterator("table",function(t){return Ee(t,e,n)},1);return t.selector.rows=e,t.selector.opts=n,t}),Gt("rows().nodes()",function(){return this.iterator("row",function(t,e){return t.aoData[e].nTr||j},1)}),Gt("rows().data()",function(){return this.iterator(!0,"rows",function(t,e){return ce(t.aoData,e,"_aData")},1)}),Kt("rows().cache()","row().cache()",function(i){return this.iterator("row",function(t,e){var n=t.aoData[e];return"search"===i?n._aFilterData:n._aSortData},1)}),Kt("rows().invalidate()","row().invalidate()",function(n){return this.iterator("row",function(t,e){o(t,e,n)})}),Kt("rows().indexes()","row().index()",function(){return this.iterator("row",function(t,e){return e},1)}),Kt("rows().ids()","row().id()",function(t){for(var e=[],n=this.context,i=0,o=n.length;i<o;i++)for(var a=0,r=this[i].length;a<r;a++){var s=n[i].rowIdFn(n[i].aoData[this[i][a]]._aData);e.push((!0===t?"#":"")+s)}return new Zt(n,e)}),Kt("rows().remove()","row().remove()",function(){var h=this;return this.iterator("row",function(t,e,n){var i,o,a,r,s,l,u=t.aoData,d=u[e];for(u.splice(e,1),i=0,o=u.length;i<o;i++)if(l=(s=u[i]).anCells,null!==s.nTr&&(s.nTr._DT_RowIndex=i),null!==l)for(a=0,r=l.length;a<r;a++)l[a]._DT_CellIndex.row=i;f(t.aiDisplayMaster,e),f(t.aiDisplay,e),f(h[n],e,!1),Ut(t);var c=t.rowIdFn(d._aData);c!==j&&delete t.aIds[c]}),this.iterator("table",function(t){for(var e=0,n=t.aoData.length;e<n;e++)t.aoData[e].idx=e}),this}),Gt("rows.add()",function(a){var t=this.iterator("table",function(t){var e,n,i,o=[];for(n=0,i=a.length;n<i;n++)(e=a[n]).nodeName&&"TR"===e.nodeName.toUpperCase()?o.push(W(t,e)[0]):o.push(z(t,e));return o},1),e=this.rows(-1);return e.pop(),U.merge(e,t),e}),Gt("row()",function(t,e){return Me(this.rows(t,e))}),Gt("row().data()",function(t){var e=this.context;return t===j?e.length&&this.length?e[0].aoData[this[0]]._aData:j:(e[0].aoData[this[0]]._aData=t,o(e[0],this[0],"data"),this)}),Gt("row().node()",function(){var t=this.context;return t.length&&this.length&&t[0].aoData[this[0]].nTr||null}),Gt("row.add()",function(e){e instanceof U&&e.length&&(e=e[0]);var t=this.iterator("table",function(t){return e.nodeName&&"TR"===e.nodeName.toUpperCase()?W(t,e)[0]:z(t,e)});return this.row(t[0])});var Ie=function(a,t,e,n){var r=[],s=function(t,e){if(U.isArray(t)||t instanceof U)for(var n=0,i=t.length;n<i;n++)s(t[n],e);else if(t.nodeName&&"tr"===t.nodeName.toLowerCase())r.push(t);else{var o=U("<tr><td/></tr>").addClass(e);U("td",o).addClass(e).html(t)[0].colSpan=M(a),r.push(o[0])}};s(e,n),t._details&&t._details.remove(),t._details=U(r),t._detailsShow&&t._details.insertAfter(t.nTr)},Ae=function(t,e){var n=t.context;if(n.length){var i=n[0].aoData[e!==j?e:t[0]];i&&i._details&&(i._details.remove(),i._detailsShow=j,i._details=j)}},Oe=function(t,e){var n=t.context;if(n.length&&t.length){var i=n[0].aoData[t[0]];i._details&&((i._detailsShow=e)?i._details.insertAfter(i.nTr):i._details.detach(),Fe(n[0]))}},Fe=function(r){var o=new Zt(r),t=".dt.DT_details",e="draw"+t,n="column-visibility"+t,i="destroy"+t,s=r.aoData;o.off(e+" "+n+" "+i),0<de(s,"_details").length&&(o.on(e,function(t,e){r===e&&o.rows({page:"current"}).eq(0).each(function(t){var e=s[t];e._detailsShow&&e._details.insertAfter(e.nTr)})}),o.on(n,function(t,e){if(r===e)for(var n,i=M(e),o=0,a=s.length;o<a;o++)(n=s[o])._details&&n._details.children("td[colspan]").attr("colspan",i)}),o.on(i,function(t,e){if(r===e)for(var n=0,i=s.length;n<i;n++)s[n]._details&&Ae(o,n)}))},Ne=""+"row().child",Re=Ne+"()";Gt(Re,function(t,e){var n=this.context;return t===j?n.length&&this.length?n[0].aoData[this[0]]._details:j:(!0===t?this.child.show():!1===t?Ae(this):n.length&&this.length&&Ie(n[0],n[0].aoData[this[0]],t,e),this)}),Gt([Ne+".show()",Re+".show()"],function(){return Oe(this,!0),this}),Gt([Ne+".hide()",Re+".hide()"],function(){return Oe(this,!1),this}),Gt([Ne+".remove()",Re+".remove()"],function(){return Ae(this),this}),Gt(Ne+".isShown()",function(){var t=this.context;return t.length&&this.length&&t[0].aoData[this[0]]._detailsShow||!1});var Be=/^(.+):(name|visIdx|visible)$/,ze=function(t,e,n,i,o){for(var a=[],r=0,s=o.length;r<s;r++)a.push(m(t,o[r],e));return a},Ue=function(r,t,s){var l=r.aoColumns,u=de(l,"sName"),d=de(l,"nTh");return De("column",t,function(n){var t=ae(n);if(""===n)return he(l.length);if(null!==t)return[0<=t?t:l.length+t];if("function"==typeof n){var i=Pe(r,s);return U.map(l,function(t,e){return n(e,ze(r,e,0,0,i),d[e])?e:null})}var o="string"==typeof n?n.match(Be):"";if(!o)return U(d).filter(n).map(function(){return U.inArray(this,d)}).toArray();switch(o[2]){case"visIdx":case"visible":var e=parseInt(o[1],10);if(e<0){var a=U.map(l,function(t,e){return t.bVisible?e:null});return[a[a.length+e]]}return[H(r,e)];case"name":return U.map(u,function(t,e){return t===o[1]?e:null})}},r,s)},je=function(t,e,n,i){var o,a,r,s,l=t.aoColumns,u=l[e],d=t.aoData;if(n===j)return u.bVisible;if(u.bVisible!==n){if(n){var c=U.inArray(!0,de(l,"bVisible"),e+1);for(a=0,r=d.length;a<r;a++)s=d[a].nTr,o=d[a].anCells,s&&s.insertBefore(o[e],o[c]||null)}else U(de(t.aoData,"anCells",e)).detach();u.bVisible=n,v(t,t.aoHeader),v(t,t.aoFooter),(i===j||i)&&($(t),(t.oScroll.sX||t.oScroll.sY)&&gt(t)),zt(t,null,"column-visibility",[t,e,n,i]),Et(t)}};Gt("columns()",function(e,n){e===j?e="":U.isPlainObject(e)&&(n=e,e=""),n=Te(n);var t=this.iterator("table",function(t){return Ue(t,e,n)},1);return t.selector.cols=e,t.selector.opts=n,t}),Kt("columns().header()","column().header()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].nTh},1)}),Kt("columns().footer()","column().footer()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].nTf},1)}),Kt("columns().data()","column().data()",function(){return this.iterator("column-rows",ze,1)}),Kt("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].mData},1)}),Kt("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(t,e,n,i,o){return ce(t.aoData,o,"search"===a?"_aFilterData":"_aSortData",e)},1)}),Kt("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(t,e,n,i,o){return ce(t.aoData,o,"anCells",e)},1)}),Kt("columns().visible()","column().visible()",function(n,i){return this.iterator("column",function(t,e){if(n===j)return t.aoColumns[e].bVisible;je(t,e,n,i)})}),Kt("columns().indexes()","column().index()",function(n){return this.iterator("column",function(t,e){return"visible"===n?d(t,e):e},1)}),Gt("columns.adjust()",function(){return this.iterator("table",function(t){$(t)},1)}),Gt("column.index()",function(t,e){if(0!==this.context.length){var n=this.context[0];if("fromVisible"===t||"toData"===t)return H(n,e);if("fromData"===t||"toVisible"===t)return d(n,e)}}),Gt("column()",function(t,e){return Me(this.columns(t,e))});var $e,He,We,Ve,Ye=function(n,t,e){var i,o,a,r,s,l,u,d=n.aoData,c=Pe(n,e),h=fe(ce(d,c,"anCells")),f=U([].concat.apply([],h)),p=n.aoColumns.length;return De("cell",t,function(t){var e="function"==typeof t;if(null===t||t===j||e){for(o=[],a=0,r=c.length;a<r;a++)for(i=c[a],s=0;s<p;s++)l={row:i,column:s},e?(u=d[i],t(l,m(n,i,s),u.anCells?u.anCells[s]:null)&&o.push(l)):o.push(l);return o}return U.isPlainObject(t)?[t]:f.filter(t).map(function(t,e){return{row:e._DT_CellIndex.row,column:e._DT_CellIndex.column}}).toArray()},n,e)};Gt("cells()",function(e,t,n){if(U.isPlainObject(e)&&(e.row===j?(n=e,e=null):(n=t,t=null)),U.isPlainObject(t)&&(n=t,t=null),null===t||t===j)return this.iterator("table",function(t){return Ye(t,e,Te(n))});var i,o,a,r,s,l=this.columns(t,n),u=this.rows(e,n),d=this.iterator("table",function(t,e){for(i=[],o=0,a=u[e].length;o<a;o++)for(r=0,s=l[e].length;r<s;r++)i.push({row:u[e][o],column:l[e][r]});return i},1);return U.extend(d.selector,{cols:t,rows:e,opts:n}),d}),Kt("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(t,e,n){var i=t.aoData[e].anCells;return i?i[n]:j},1)}),Gt("cells().data()",function(){return this.iterator("cell",function(t,e,n){return m(t,e,n)},1)}),Kt("cells().cache()","cell().cache()",function(i){return i="search"===i?"_aFilterData":"_aSortData",this.iterator("cell",function(t,e,n){return t.aoData[e][i][n]},1)}),Kt("cells().render()","cell().render()",function(i){return this.iterator("cell",function(t,e,n){return m(t,e,n,i)},1)}),Kt("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(t,e,n){return{row:e,column:n,columnVisible:d(t,n)}},1)}),Kt("cells().invalidate()","cell().invalidate()",function(i){return this.iterator("cell",function(t,e,n){o(t,e,i,n)})}),Gt("cell()",function(t,e,n){return Me(this.cells(t,e,n))}),Gt("cell().data()",function(t){var e=this.context,n=this[0];return t===j?e.length&&n.length?m(e[0],n[0].row,n[0].column):j:(i(e[0],n[0].row,n[0].column,t),o(e[0],n[0].row,"data",n[0].column),this)}),Gt("order()",function(e,t){var n=this.context;return e===j?0!==n.length?n[0].aaSorting:j:("number"==typeof e?e=[[e,t]]:U.isArray(e[0])||(e=Array.prototype.slice.call(arguments)),this.iterator("table",function(t){t.aaSorting=e.slice()}))}),Gt("order.listener()",function(e,n,i){return this.iterator("table",function(t){Tt(t,e,n,i)})}),Gt("order.fixed()",function(e){if(e)return this.iterator("table",function(t){t.aaSortingFixed=U.extend(!0,{},e)});var t=this.context,n=t.length?t[0].aaSortingFixed:j;return U.isArray(n)?{pre:n}:n}),Gt(["columns().order()","column().order()"],function(i){var o=this;return this.iterator("table",function(t,e){var n=[];U.each(o[e],function(t,e){n.push([e,i])}),t.aaSorting=n})}),Gt("search()",function(e,n,i,o){var t=this.context;return e===j?0!==t.length?t[0].oPreviousSearch.sSearch:j:this.iterator("table",function(t){t.oFeatures.bFilter&&G(t,U.extend({},t.oPreviousSearch,{sSearch:e+"",bRegex:null!==n&&n,bSmart:null===i||i,bCaseInsensitive:null===o||o}),1)})}),Kt("columns().search()","column().search()",function(i,o,a,r){return this.iterator("column",function(t,e){var n=t.aoPreSearchCols;if(i===j)return n[e].sSearch;t.oFeatures.bFilter&&(U.extend(n[e],{sSearch:i+"",bRegex:null!==o&&o,bSmart:null===a||a,bCaseInsensitive:null===r||r}),G(t,t.oPreviousSearch,1))})}),Gt("state()",function(){return this.context.length?this.context[0].oSavedState:null}),Gt("state.clear()",function(){return this.iterator("table",function(t){t.fnStateSaveCallback.call(t.oInstance,t,{})})}),Gt("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),Gt("state.save()",function(){
return this.iterator("table",function(t){Et(t)})}),Yt.versionCheck=Yt.fnVersionCheck=function(t){for(var e,n,i=Yt.version.split("."),o=t.split("."),a=0,r=o.length;a<r;a++)if((e=parseInt(i[a],10)||0)!==(n=parseInt(o[a],10)||0))return n<e;return!0},Yt.isDataTable=Yt.fnIsDataTable=function(t){var o=U(t).get(0),a=!1;return U.each(Yt.settings,function(t,e){var n=e.nScrollHead?U("table",e.nScrollHead)[0]:null,i=e.nScrollFoot?U("table",e.nScrollFoot)[0]:null;e.nTable!==o&&n!==o&&i!==o||(a=!0)}),a},Yt.tables=Yt.fnTables=function(e){var t=!1;U.isPlainObject(e)&&(t=e.api,e=e.visible);var n=U.map(Yt.settings,function(t){if(!e||e&&U(t.nTable).is(":visible"))return t.nTable});return t?new Zt(n):n},Yt.util={throttle:_t,escapeRegex:tt},Yt.camelToHungarian=E,Gt("$()",function(t,e){var n=this.rows(e).nodes(),i=U(n);return U([].concat(i.filter(t).toArray(),i.find(t).toArray()))}),U.each(["on","one","off"],function(t,n){Gt(n+"()",function(){var t=Array.prototype.slice.call(arguments);t[0].match(/\.dt\b/)||(t[0]+=".dt");var e=U(this.tables().nodes());return e[n].apply(e,t),this})}),Gt("clear()",function(){return this.iterator("table",function(t){u(t)})}),Gt("settings()",function(){return new Zt(this.context,this.context)}),Gt("init()",function(){var t=this.context;return t.length?t[0].oInit:null}),Gt("data()",function(){return this.iterator("table",function(t){return de(t.aoData,"_aData")}).flatten()}),Gt("destroy()",function(p){return p=p||!1,this.iterator("table",function(e){var n,t=e.nTableWrapper.parentNode,i=e.oClasses,o=e.nTable,a=e.nTBody,r=e.nTHead,s=e.nTFoot,l=U(o),u=U(a),d=U(e.nTableWrapper),c=U.map(e.aoData,function(t){return t.nTr});e.bDestroying=!0,zt(e,"aoDestroyCallback","destroy",[e]),p||new Zt(e).columns().visible(!0),d.unbind(".DT").find(":not(tbody *)").unbind(".DT"),U(T).unbind(".DT-"+e.sInstance),o!=r.parentNode&&(l.children("thead").detach(),l.append(r)),s&&o!=s.parentNode&&(l.children("tfoot").detach(),l.append(s)),e.aaSorting=[],e.aaSortingFixed=[],Mt(e),U(c).removeClass(e.asStripeClasses.join(" ")),U("th, td",r).removeClass(i.sSortable+" "+i.sSortableAsc+" "+i.sSortableDesc+" "+i.sSortableNone),e.bJUI&&(U("th span."+i.sSortIcon+", td span."+i.sSortIcon,r).detach(),U("th, td",r).each(function(){var t=U("div."+i.sSortJUIWrapper,this);U(this).append(t.contents()),t.detach()})),u.children().detach(),u.append(c);var h=p?"remove":"detach";l[h](),d[h](),!p&&t&&(t.insertBefore(o,e.nTableReinsertBefore),l.css("width",e.sDestroyWidth).removeClass(i.sTable),(n=e.asDestroyStripes.length)&&u.children().each(function(t){U(this).addClass(e.asDestroyStripes[t%n])}));var f=U.inArray(e,Yt.settings);-1!==f&&Yt.settings.splice(f,1)})}),U.each(["column","row","cell"],function(t,l){Gt(l+"s().every()",function(a){var r=this.selector.opts,s=this;return this.iterator(l,function(t,e,n,i,o){a.call(s[l](e,"cell"===l?n:r,"cell"===l?r:j),e,n,i,o)})})}),Gt("i18n()",function(t,e,n){var i=this.context[0],o=V(t)(i.oLanguage);return o===j&&(o=e),n!==j&&U.isPlainObject(o)&&(o=o[n]!==j?o[n]:o._),o.replace("%d",n)}),Yt.version="1.10.10",Yt.settings=[],Yt.models={},Yt.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},Yt.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},Yt.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},Yt.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(t){try{return JSON.parse((-1===t.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+t.sInstance+"_"+location.pathname))}catch(e){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(t,e){try{(-1===t.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+t.sInstance+"_"+location.pathname,JSON.stringify(e))}catch(n){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:U.extend({},Yt.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},r(Yt.defaults),Yt.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},r(Yt.defaults.column),Yt.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:j,oAjaxData:j,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==$t(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==$t(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var t=this._iDisplayLength,e=this._iDisplayStart,n=e+t,i=this.aiDisplay.length,o=this.oFeatures,a=o.bPaginate;return o.bServerSide?!1===a||-1===t?e+i:Math.min(e+t,this._iRecordsDisplay):!a||i<n||-1===t?i:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},Yt.ext=qt={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:Yt.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:Yt.version},U.extend(qt,{afnFiltering:qt.search,aTypes:qt.type.detect,ofnSearch:qt.type.search,oSort:qt.type.order,afnSortData:qt.order,aoFeatures:qt.feature,oApi:qt.internal,oStdClasses:qt.classes,oPagination:qt.pager}),U.extend(Yt.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""}),He=($e=$e="")+"ui-state-default",We=$e+"css_right ui-icon ui-icon-",Ve=$e+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix",U.extend(Yt.ext.oJUIClasses,Yt.ext.classes,{sPageButton:"fg-button ui-button "+He,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:He+" sorting_asc",sSortDesc:He+" sorting_desc",sSortable:He+" sorting",sSortableAsc:He+" sorting_asc_disabled",sSortableDesc:He+" sorting_desc_disabled",sSortableNone:He+" sorting_disabled",sSortJUIAsc:We+"triangle-1-n",sSortJUIDesc:We+"triangle-1-s",sSortJUI:We+"carat-2-n-s",sSortJUIAscAllowed:We+"carat-1-n",sSortJUIDescAllowed:We+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+He,sScrollFoot:"dataTables_scrollFoot "+He,sHeaderTH:He,sFooterTH:He,sJUIHeader:Ve+" ui-corner-tl ui-corner-tr",sJUIFooter:Ve+" ui-corner-bl ui-corner-br"});var qe=Yt.ext.pager;U.extend(qe,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},numbers:function(t,e){return[Ht(t,e)]},simple_numbers:function(t,e){return["previous",Ht(t,e),"next"]},full_numbers:function(t,e){return["first","previous",Ht(t,e),"next","last"]},_numbers:Ht,numbers_length:7}),U.extend(!0,Yt.ext.renderer,{pageButton:{_:function(s,t,l,e,u,d){var c,h,n,f=s.oClasses,p=s.oLanguage.oPaginate,m=s.oLanguage.oAria.paginate||{},g=0,v=function(t,e){var n,i,o,a=function(t){ht(s,t.data.action,!0)};for(n=0,i=e.length;n<i;n++)if(o=e[n],U.isArray(o)){var r=U("<"+(o.DT_el||"div")+"/>").appendTo(t);v(r,o)}else{switch(c=null,h="",o){case"ellipsis":t.append('<span class="ellipsis">&#x2026;</span>');break;case"first":c=p.sFirst,h=o+(0<u?"":" "+f.sPageButtonDisabled);break;case"previous":c=p.sPrevious,h=o+(0<u?"":" "+f.sPageButtonDisabled);break;case"next":c=p.sNext,h=o+(u<d-1?"":" "+f.sPageButtonDisabled);break;case"last":c=p.sLast,h=o+(u<d-1?"":" "+f.sPageButtonDisabled);break;default:c=o+1,h=u===o?f.sPageButtonActive:""}null!==c&&(Rt(U("<a>",{"class":f.sPageButton+" "+h,"aria-controls":s.sTableId,"aria-label":m[o],"data-dt-idx":g,tabindex:s.iTabIndex,id:0===l&&"string"==typeof o?s.sTableId+"_"+o:null}).html(c).appendTo(t),{action:o},a),g++)}};try{n=U(t).find(y.activeElement).data("dt-idx")}catch(i){}v(U(t).empty(),e),n&&U(t).find("[data-dt-idx="+n+"]").focus()}}}),U.extend(Yt.ext.type.detect,[function(t,e){var n=e.oLanguage.sDecimal;return se(t,n)?"num"+n:null},function(t){if(t&&!(t instanceof Date)&&(!te.test(t)||!ee.test(t)))return null;var e=Date.parse(t);return null!==e&&!isNaN(e)||oe(t)?"date":null},function(t,e){var n=e.oLanguage.sDecimal;return se(t,n,!0)?"num-fmt"+n:null},function(t,e){var n=e.oLanguage.sDecimal;return ue(t,n)?"html-num"+n:null},function(t,e){var n=e.oLanguage.sDecimal;return ue(t,n,!0)?"html-num-fmt"+n:null},function(t){return oe(t)||"string"==typeof t&&-1!==t.indexOf("<")?"html":null}]),U.extend(Yt.ext.type.search,{html:function(t){return oe(t)?t:"string"==typeof t?t.replace(Xt," ").replace(Qt,""):""},string:function(t){return oe(t)?t:"string"==typeof t?t.replace(Xt," "):t}});var Ze=function(t,e,n,i){return 0===t||t&&"-"!==t?(e&&(t=re(t,e)),t.replace&&(n&&(t=t.replace(n,"")),i&&(t=t.replace(i,""))),1*t):-Infinity};return U.extend(qt.type.order,{"date-pre":function(t){return Date.parse(t)||0},"html-pre":function(t){return oe(t)?"":t.replace?t.replace(/<.*?>/g,"").toLowerCase():t+""},"string-pre":function(t){return oe(t)?"":"string"==typeof t?t.toLowerCase():t.toString?t.toString():""},"string-asc":function(t,e){return t<e?-1:e<t?1:0},"string-desc":function(t,e){return t<e?1:e<t?-1:0}}),Wt(""),U.extend(!0,Yt.ext.renderer,{header:{_:function(a,r,s,l){U(a.nTable).on("order.dt.DT",function(t,e,n,i){if(a===e){var o=s.idx;r.removeClass(s.sSortingClass+" "+l.sSortAsc+" "+l.sSortDesc).addClass("asc"==i[o]?l.sSortAsc:"desc"==i[o]?l.sSortDesc:s.sSortingClass)}})},jqueryui:function(a,r,s,l){U("<div/>").addClass(l.sSortJUIWrapper).append(r.contents()).append(U("<span/>").addClass(l.sSortIcon+" "+s.sSortingClassJUI)).appendTo(r),U(a.nTable).on("order.dt.DT",function(t,e,n,i){if(a===e){var o=s.idx;r.removeClass(l.sSortAsc+" "+l.sSortDesc).addClass("asc"==i[o]?l.sSortAsc:"desc"==i[o]?l.sSortDesc:s.sSortingClass),r.find("span."+l.sSortIcon).removeClass(l.sSortJUIAsc+" "+l.sSortJUIDesc+" "+l.sSortJUI+" "+l.sSortJUIAscAllowed+" "+l.sSortJUIDescAllowed).addClass("asc"==i[o]?l.sSortJUIAsc:"desc"==i[o]?l.sSortJUIDesc:s.sSortingClassJUI)}})}}}),Yt.render={number:function(a,r,s,l,u){return{display:function(t){if("number"!=typeof t&&"string"!=typeof t)return t;var e=t<0?"-":"",n=parseFloat(t);if(isNaN(n))return t;t=Math.abs(n);var i=parseInt(t,10),o=s?r+(t-i).toFixed(s).substring(2):"";return e+(l||"")+i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+o+(u||"")}}},text:function(){return{display:function(t){return"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):t}}}},U.extend(Yt.ext.internal,{_fnExternApiFunc:Vt,_fnBuildAjax:S,_fnAjaxUpdate:k,_fnAjaxParameters:a,_fnAjaxUpdateDraw:s,_fnAjaxDataSrc:D,_fnAddColumn:N,_fnColumnOptions:R,_fnAdjustColumnSizing:$,_fnVisibleToColumnIndex:H,_fnColumnIndexToVisible:d,_fnVisbleColumns:M,_fnGetColumns:P,_fnColumnTypes:l,_fnApplyColumnDefs:B,_fnHungarianMap:r,_fnCamelToHungarian:E,_fnLanguageCompat:I,_fnBrowserDetect:F,_fnAddData:z,_fnAddTr:W,_fnNodeToDataIndex:t,_fnNodeToColumnIndex:e,_fnGetCellData:m,_fnSetCellData:i,_fnSplitObjNotation:g,_fnGetObjectDataFn:V,_fnSetObjectDataFn:_,_fnGetDataMaster:w,_fnClearTable:u,_fnDeleteIndex:f,_fnInvalidate:o,_fnGetRowElements:c,_fnCreateTr:x,_fnBuildHead:p,_fnDrawHead:v,_fnDraw:b,_fnReDraw:C,_fnAddOptionsHtml:L,_fnDetectHeader:Y,_fnGetUniqueThs:q,_fnFeatureHtmlFilter:Z,_fnFilterComplete:G,_fnFilterCustom:K,_fnFilterColumn:J,_fnFilter:X,_fnFilterCreateSearch:Q,_fnEscapeRegex:tt,_fnFilterData:et,_fnFeatureHtmlInfo:ot,_fnUpdateInfo:at,_fnInfoMacros:rt,_fnInitialise:st,_fnInitComplete:lt,_fnLengthChange:ut,_fnFeatureHtmlLength:dt,_fnFeatureHtmlPaginate:ct,_fnPageChange:ht,_fnFeatureHtmlProcessing:ft,_fnProcessingDisplay:pt,_fnFeatureHtmlTable:mt,_fnScrollDraw:gt,_fnApplyToChildren:vt,_fnCalculateColumnWidths:yt,_fnThrottle:_t,_fnConvertToWidth:bt,_fnGetWidestNode:wt,_fnGetMaxLenString:xt,_fnStringToCss:Ct,_fnSortFlatten:Lt,_fnSort:St,_fnSortAria:kt,_fnSortListener:Dt,_fnSortAttachListener:Tt,_fnSortingClasses:Mt,_fnSortData:Pt,_fnSaveState:Et,_fnLoadState:It,_fnSettingsFromNode:At,_fnLog:Ot,_fnMap:Ft,_fnBindAction:Rt,_fnCallbackReg:Bt,_fnCallbackFire:zt,_fnLengthOverflow:Ut,_fnRenderer:jt,_fnDataSource:$t,_fnRowAttributes:h,_fnCalculateEnd:function(){}}),((U.fn.dataTable=Yt).$=U).fn.dataTableSettings=Yt.settings,U.fn.dataTableExt=Yt.ext,U.fn.DataTable=function(t){return U(this).dataTable(t).api()},U.each(Yt,function(t,e){U.fn.DataTable[t]=e}),U.fn.dataTable}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):window.jQuery&&!window.jQuery.fn.colorpicker&&t(window.jQuery)}(function(l){"use strict";var i=function(t){this.value={h:0,s:0,b:0,a:1},this.origFormat=null,t&&(t.toLowerCase!==undefined?(t+="",this.setColor(t)):t.h!==undefined&&(this.value=t))},n={horizontal:!(i.prototype={constructor:i,colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"transparent"},_sanitizeNumber:function(t){return"number"==typeof t?t:isNaN(t)||null===t||""===t||t===undefined?1:t.toLowerCase!==undefined?parseFloat(t):1},isTransparent:function(t){return!!t&&("transparent"==(t=t.toLowerCase().trim())||t.match(/#?00000000/)||t.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/))},rgbaIsTransparent:function(t){return 0==t.r&&0==t.g&&0==t.b&&0==t.a},setColor:function(t){(t=t.toLowerCase().trim())&&(this.isTransparent(t)?this.value={h:0,s:0,b:0,a:0}:this.value=this.stringToHSB(t)||{h:0,s:0,b:0,a:1})},stringToHSB:function(a){a=a.toLowerCase();var r=this,s=!1;return l.each(this.stringParsers,function(t,e){var n=e.re.exec(a),i=n&&e.parse.apply(r,[n]),o=e.format||"rgba";return!i||(s=o.match(/hsla?/)?r.RGBtoHSB.apply(r,r.HSLtoRGB.apply(r,i)):r.RGBtoHSB.apply(r,i),r.origFormat=o,!1)}),s},setHue:function(t){this.value.h=1-t},setSaturation:function(t){this.value.s=t},setBrightness:function(t){this.value.b=1-t},setAlpha:function(t){this.value.a=parseInt(100*(1-t),10)/100},toRGB:function(t,e,n,i){var o,a,r,s,l;return t||(t=this.value.h,e=this.value.s,n=this.value.b),t=(t*=360)%360/60,o=a=r=n-(l=n*e),o+=[l,s=l*(1-Math.abs(t%2-1)),0,0,s,l][t=~~t],a+=[s,l,l,s,0,0][t],r+=[0,0,s,l,l,s][t],{r:Math.round(255*o),g:Math.round(255*a),b:Math.round(255*r),a:i||this.value.a}},toHex:function(t,e,n,i){var o=this.toRGB(t,e,n,i);return this.rgbaIsTransparent(o)?"transparent":"#"+(1<<24|parseInt(o.r)<<16|parseInt(o.g)<<8|parseInt(o.b)).toString(16).substr(1)},toHSL:function(t,e,n,i){t=t||this.value.h,e=e||this.value.s,n=n||this.value.b,i=i||this.value.a;var o=t,a=(2-e)*n,r=e*n;return r/=0<a&&a<=1?a:2-a,a/=2,1<r&&(r=1),{h:isNaN(o)?0:o,s:isNaN(r)?0:r,l:isNaN(a)?0:a,a:isNaN(i)?0:i}},toAlias:function(t,e,n,i){var o=this.toHex(t,e,n,i);for(var a in this.colors)if(this.colors[a]==o)return a;return!1},RGBtoHSB:function(t,e,n,i){var o,a,r,s;return t/=255,e/=255,n/=255,o=((o=0===(s=(r=Math.max(t,e,n))-Math.min(t,e,n))?null:r===t?(e-n)/s:r===e?(n-t)/s+2:(t-e)/s+4)+360)%6*60/360,a=0===s?0:s/r,{h:this._sanitizeNumber(o),s:a,b:r,a:this._sanitizeNumber(i)}},HueToRGB:function(t,e,n){return n<0?n+=1:1<n&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t},HSLtoRGB:function(t,e,n,i){var o;e<0&&(e=0);var a=2*n-(o=n<=.5?n*(1+e):n+e-n*e),r=t+1/3,s=t,l=t-1/3;return[Math.round(255*this.HueToRGB(a,o,r)),Math.round(255*this.HueToRGB(a,o,s)),Math.round(255*this.HueToRGB(a,o,l)),this._sanitizeNumber(i)]},toString:function(t){switch(t=t||"rgba"){case"rgb":var e=this.toRGB();return this.rgbaIsTransparent(e)?"transparent":"rgb("+e.r+","+e.g+","+e.b+")";case"rgba":return"rgba("+(e=this.toRGB()).r+","+e.g+","+e.b+","+e.a+")";case"hsl":var n=this.toHSL();return"hsl("+Math.round(360*n.h)+","+Math.round(100*n.s)+"%,"+Math.round(100*n.l)+"%)";case"hsla":n=this.toHSL();return"hsla("+Math.round(360*n.h)+","+Math.round(100*n.s)+"%,"+Math.round(100*n.l)+"%,"+n.a+")";case"hex":return this.toHex();case"alias":return this.toAlias()||this.toHex();default:return!1}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(t){return[t[1],t[2],t[3],1]}},{re:/rgb\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/hsl\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(t){return[t[1]/360,t[2]/100,t[3]/100,t[4]]}},{re:/hsla\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(t){return[t[1]/360,t[2]/100,t[3]/100,t[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),1]}},{re:/^([a-z]{3,})$/,format:"alias",parse:function(t){var e=this.colorNameToHex(t[0])||"#000000",n=this.stringParsers[6].re.exec(e);return n&&this.stringParsers[6].parse.apply(this,[n])}}],colorNameToHex:function(t){return"undefined"!=typeof this.colors[t.toLowerCase()]&&this.colors[t.toLowerCase()]}}),inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'},r=function(t,e){this.element=l(t).addClass("colorpicker-element"),this.options=l.extend({},n,this.element.data(),e),this.component=this.options.component,this.component=!1!==this.component&&this.element.find(this.component),this.component&&0===this.component.length&&(this.component=!1),this.container=!0===this.options.container?this.element:this.options.container,this.container=!1!==this.container&&l(this.container),this.input=this.element.is("input")?this.element:!!this.options.input&&this.element.find(this.options.input),this.input&&0===this.input.length&&(this.input=!1),this.color=new i(!1!==this.options.color?this.options.color:this.getValue()),this.format=!1!==this.options.format?this.options.format:this.color.origFormat,this.picker=l(this.options.template),this.options.inline?this.picker.addClass("colorpicker-inline colorpicker-visible"):this.picker.addClass("colorpicker-hidden"),this.options.horizontal&&this.picker.addClass("colorpicker-horizontal"),"rgba"!==this.format&&"hsla"!==this.format||this.picker.addClass("colorpicker-with-alpha"),"right"===this.options.align&&this.picker.addClass("colorpicker-right"),this.picker.on("mousedown.colorpicker touchstart.colorpicker",l.proxy(this.mousedown,this)),this.picker.appendTo(this.container?this.container:l("body")),!1!==this.input&&(this.input.on({"keyup.colorpicker":l.proxy(this.keyup,this)}),!1===this.component&&this.element.on({"focus.colorpicker":l.proxy(this.show,this)}),!1===this.options.inline&&this.element.on({"focusout.colorpicker":l.proxy(this.hide,this)})),!1!==this.component&&this.component.on({"click.colorpicker":l.proxy(this.show,this)}),!1===this.input&&!1===this.component&&this.element.on({"click.colorpicker":l.proxy(this.show,this)}),!1!==this.input&&!1!==this.component&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":l.proxy(this.show,this),"focus.colorpicker":l.proxy(this.show,this)}),this.update(),l(l.proxy(function(){this.element.trigger("create")},this))};r.Color=i,r.prototype={constructor:r,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker").off(".colorpicker"),!1!==this.input&&this.input.off(".colorpicker"),!1!==this.component&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(!1!==this.options.inline||this.options.container)return!1;var t=this.container&&this.container[0]!==document.body?"position":"offset",e=this.component||this.element,n=e[t]();"right"===this.options.align&&(n.left-=this.picker.outerWidth()-e.outerWidth()),this.picker.css({top:n.top+e.outerHeight(),left:n.left})},show:function(t){if(this.isDisabled())return!1;this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),l(window).on("resize.colorpicker",l.proxy(this.reposition,this)),!t||this.hasInput()&&"color"!==this.input.attr("type")||t.stopPropagation&&t.preventDefault&&(t.stopPropagation(),t.preventDefault()),!1===this.options.inline&&l(window.document).on({"mousedown.colorpicker":l.proxy(this.hide,this)}),this.element.trigger({type:"showPicker",color:this.color})},hide:function(){this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),l(window).off("resize.colorpicker",this.reposition),l(document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(t){return t=t||this.color.toString(this.format),this.element.data("color",t),t},updateInput:function(t){return t=t||this.color.toString(this.format),!1!==this.input&&this.input.prop("value",t),t},updatePicker:function(t){t!==undefined&&(this.color=new i(t));var e=!1===this.options.horizontal?this.options.sliders:this.options.slidersHorz,n=this.picker.find("i");if(0!==n.length)return!1===this.options.horizontal?(e=this.options.sliders,n.eq(1).css("top",e.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",e.alpha.maxTop*(1-this.color.value.a))):(e=this.options.slidersHorz,n.eq(1).css("left",e.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",e.alpha.maxLeft*(1-this.color.value.a))),n.eq(0).css({top:e.saturation.maxTop-this.color.value.b*e.saturation.maxTop,left:this.color.value.s*e.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format)),t},updateComponent:function(t){if(t=t||this.color.toString(this.format),!1!==this.component){var e=this.component.find("i").eq(0);0<e.length?e.css({backgroundColor:t}):this.component.css({backgroundColor:t})}return t},update:function(t){var e;return!1===this.getValue(!1)&&!0!==t||(e=this.updateComponent(),this.updateInput(e),this.updateData(e),this.updatePicker()),e},setValue:function(t){this.color=new i(t),this.update(),this.element.trigger({type:"changeColor",color:this.color,value:t})},getValue:function(t){var e;return t=t===undefined?"#000000":t,(e=this.hasInput()?this.input.val():this.element.data("color"))!==undefined&&""!==e&&null!==e||(e=t),e},hasInput:function(){return!1!==this.input},isDisabled:function(){return!!this.hasInput()&&!0===this.input.prop("disabled")},disable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!0),this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0)},enable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!1),this.element.trigger({type:"enable",color:this.color,value:this.getValue()}),!0)},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(t){t.pageX||t.pageY||!t.originalEvent||(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY),t.stopPropagation(),t.preventDefault();var e=l(t.target).closest("div"),n=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!e.is(".colorpicker")){if(e.is(".colorpicker-saturation"))this.currentSlider=l.extend({},n.saturation);else if(e.is(".colorpicker-hue"))this.currentSlider=l.extend({},n.hue);else{if(!e.is(".colorpicker-alpha"))return!1;this.currentSlider=l.extend({},n.alpha)}var i=e.offset();this.currentSlider.guide=e.find("i")[0].style,this.currentSlider.left=t.pageX-i.left,this.currentSlider.top=t.pageY-i.top,this.mousePointer={left:t.pageX,top:t.pageY},l(document).on({"mousemove.colorpicker":l.proxy(this.mousemove,this),"touchmove.colorpicker":l.proxy(this.mousemove,this),"mouseup.colorpicker":l.proxy(this.mouseup,this),"touchend.colorpicker":l.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(t){t.pageX||t.pageY||!t.originalEvent||(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY),t.stopPropagation(),t.preventDefault();var e=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((t.pageX||this.mousePointer.left)-this.mousePointer.left))),n=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((t.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=e+"px",this.currentSlider.guide.top=n+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,e/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,n/this.currentSlider.maxTop),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(t){
return t.stopPropagation(),t.preventDefault(),l(document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},keyup:function(t){if(38===t.keyCode)this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0);else if(40===t.keyCode)0<this.color.value.a&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0);else{var e=this.input.val();this.color=new i(e),!1!==this.getValue(!1)&&(this.updateData(),this.updateComponent(),this.updatePicker())}this.element.trigger({type:"changeColor",color:this.color,value:e})}},l.colorpicker=r,l.fn.colorpicker=function(i){var o,a=arguments,t=this.each(function(){var t=l(this),e=t.data("colorpicker"),n="object"==typeof i?i:{};e||"string"==typeof i?"string"==typeof i&&(o=e[i].apply(e,Array.prototype.slice.call(a,1))):t.data("colorpicker",new r(this,n))});return"getValue"===i?o:t},l.fn.colorpicker.constructor=r}),function(n){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return n(t,window,document)}):"object"==typeof exports?module.exports=function(t,e){return t||(t=window),e&&e.fn.dataTable||(e=require("datatables.net")(t,e).$),n(e,t,t.document)}:n(jQuery,window,document)}(function(_,t,o){"use strict";var a=_.fn.dataTable;return _.extend(!0,a.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",renderer:"bootstrap"}),_.extend(a.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm",sProcessing:"dataTables_processing panel panel-default"}),a.ext.renderer.pageButton.bootstrap=function(s,t,l,e,u,d){var c,h,n,f=new a.Api(s),p=s.oClasses,m=s.oLanguage.oPaginate,g=s.oLanguage.oAria.paginate||{},v=0,y=function(t,e){var n,i,o,a,r=function(t){t.preventDefault(),_(t.currentTarget).hasClass("disabled")||f.page()==t.data.action||f.page(t.data.action).draw("page")};for(n=0,i=e.length;n<i;n++)if(a=e[n],_.isArray(a))y(t,a);else{switch(h=c="",a){case"ellipsis":c="&#x2026;",h="disabled";break;case"first":c=m.sFirst,h=a+(0<u?"":" disabled");break;case"previous":c=m.sPrevious,h=a+(0<u?"":" disabled");break;case"next":c=m.sNext,h=a+(u<d-1?"":" disabled");break;case"last":c=m.sLast,h=a+(u<d-1?"":" disabled");break;default:c=a+1,h=u===a?"active":""}c&&(o=_("<li>",{"class":p.sPageButton+" "+h,id:0===l&&"string"==typeof a?s.sTableId+"_"+a:null}).append(_("<a>",{href:"#","aria-controls":s.sTableId,"aria-label":g[a],"data-dt-idx":v,tabindex:s.iTabIndex}).html(c)).appendTo(t),s.oApi._fnBindAction(o,{action:a},r),v++)}};try{n=_(t).find(o.activeElement).data("dt-idx")}catch(i){}y(_(t).empty().html('<ul class="pagination"/>').children("ul"),e),n&&_(t).find("[data-dt-idx="+n+"]").focus()},a.TableTools&&(_.extend(!0,a.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn btn-default",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info"},select:{row:"active"}}),_.extend(!0,a.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}})),a}),function(l,u){var d;l.rails!==u&&l.error("jquery-ujs has already been loaded!");var t=l(document);l.rails=d={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(t){var e=l('meta[name="csrf-token"]').attr("content");e&&t.setRequestHeader("X-CSRF-Token",e)},refreshCSRFTokens:function(){var t=l("meta[name=csrf-token]").attr("content"),e=l("meta[name=csrf-param]").attr("content");l('form input[name="'+e+'"]').val(t)},fire:function(t,e,n){var i=l.Event(e);return t.trigger(i,n),!1!==i.result},confirm:function(t){return confirm(t)},ajax:function(t){return l.ajax(t)},href:function(t){return t[0].href},handleRemote:function(i){var t,e,n,o,a,r;if(d.fire(i,"ajax:before")){if(o=i.data("with-credentials")||null,a=i.data("type")||l.ajaxSettings&&l.ajaxSettings.dataType,i.is("form")){t=i.attr("method"),e=i.attr("action"),n=i.serializeArray();var s=i.data("ujs:submit-button");s&&(n.push(s),i.data("ujs:submit-button",null))}else i.is(d.inputChangeSelector)?(t=i.data("method"),e=i.data("url"),n=i.serialize(),i.data("params")&&(n=n+"&"+i.data("params"))):i.is(d.buttonClickSelector)?(t=i.data("method")||"get",e=i.data("url"),n=i.serialize(),i.data("params")&&(n=n+"&"+i.data("params"))):(t=i.data("method"),e=d.href(i),n=i.data("params")||null);return r={type:t||"GET",data:n,dataType:a,beforeSend:function(t,e){if(e.dataType===u&&t.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),!d.fire(i,"ajax:beforeSend",[t,e]))return!1;i.trigger("ajax:send",t)},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:d.isCrossDomain(e)},o&&(r.xhrFields={withCredentials:o}),e&&(r.url=e),d.ajax(r)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var n=document.createElement("a");try{return n.href=t,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||e.protocol+"//"+e.host==n.protocol+"//"+n.host)}catch(i){return!0}},handleMethod:function(t){var e=d.href(t),n=t.data("method"),i=t.attr("target"),o=l("meta[name=csrf-token]").attr("content"),a=l("meta[name=csrf-param]").attr("content"),r=l('<form method="post" action="'+e+'"></form>'),s='<input name="_method" value="'+n+'" type="hidden" />';a===u||o===u||d.isCrossDomain(e)||(s+='<input name="'+a+'" value="'+o+'" type="hidden" />'),i&&r.attr("target",i),r.hide().append(s).appendTo("body"),r.submit()},formElements:function(t,e){return t.is("form")?l(t[0].elements).filter(e):t.find(e)},disableFormElements:function(t){d.formElements(t,d.disableSelector).each(function(){d.disableFormElement(l(this))})},disableFormElement:function(t){var e,n;e=t.is("button")?"html":"val",n=t.data("disable-with"),t.data("ujs:enable-with",t[e]()),n!==u&&t[e](n),t.prop("disabled",!0)},enableFormElements:function(t){d.formElements(t,d.enableSelector).each(function(){d.enableFormElement(l(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,n=t.data("confirm"),i=!1;return!n||(d.fire(t,"confirm")&&(i=d.confirm(n),e=d.fire(t,"confirm:complete",[i])),i&&e)},blankInputs:function(t,e,n){var i,o=l(),a=e||"input,textarea",r=t.find(a);return r.each(function(){if(i=l(this),!(i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):i.val())==!n){if(i.is("input[type=radio]")&&r.filter('input[type=radio]:checked[name="'+i.attr("name")+'"]').length)return!0;o=o.add(i)}}),!!o.length&&o},nonBlankInputs:function(t,e){return d.blankInputs(t,e,!0)},stopEverything:function(t){return l(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(t){var e=t.data("disable-with");t.data("ujs:enable-with",t.html()),e!==u&&t.html(e),t.bind("click.railsDisable",function(t){return d.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==u&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},d.fire(t,"rails:attachBindings")&&(l.ajaxPrefilter(function(t,e,n){t.crossDomain||d.CSRFProtection(n)}),t.delegate(d.linkDisableSelector,"ajax:complete",function(){d.enableElement(l(this))}),t.delegate(d.buttonDisableSelector,"ajax:complete",function(){d.enableFormElement(l(this))}),t.delegate(d.linkClickSelector,"click.rails",function(t){var e=l(this),n=e.data("method"),i=e.data("params"),o=t.metaKey||t.ctrlKey;if(!d.allowAction(e))return d.stopEverything(t);if(!o&&e.is(d.linkDisableSelector)&&d.disableElement(e),e.data("remote")===u)return e.data("method")?(d.handleMethod(e),!1):void 0;if(o&&(!n||"GET"===n)&&!i)return!0;var a=d.handleRemote(e);return!1===a?d.enableElement(e):a.error(function(){d.enableElement(e)}),!1}),t.delegate(d.buttonClickSelector,"click.rails",function(t){var e=l(this);if(!d.allowAction(e))return d.stopEverything(t);e.is(d.buttonDisableSelector)&&d.disableFormElement(e);var n=d.handleRemote(e);return!1===n?d.enableFormElement(e):n.error(function(){d.enableFormElement(e)}),!1}),t.delegate(d.inputChangeSelector,"change.rails",function(t){var e=l(this);return d.allowAction(e)?(d.handleRemote(e),!1):d.stopEverything(t)}),t.delegate(d.formSubmitSelector,"submit.rails",function(t){var e,n,i=l(this),o=i.data("remote")!==u;if(!d.allowAction(i))return d.stopEverything(t);if(i.attr("novalidate")==u&&(e=d.blankInputs(i,d.requiredInputSelector))&&d.fire(i,"ajax:aborted:required",[e]))return d.stopEverything(t);if(o){if(n=d.nonBlankInputs(i,d.fileInputSelector)){setTimeout(function(){d.disableFormElements(i)},13);var a=d.fire(i,"ajax:aborted:file",[n]);return a||setTimeout(function(){d.enableFormElements(i)},13),a}return d.handleRemote(i),!1}setTimeout(function(){d.disableFormElements(i)},13)}),t.delegate(d.formInputClickSelector,"click.rails",function(t){var e=l(this);if(!d.allowAction(e))return d.stopEverything(t);var n=e.attr("name"),i=n?{name:n,value:e.val()}:null;e.closest("form").data("ujs:submit-button",i)}),t.delegate(d.formSubmitSelector,"ajax:send.rails",function(t){this==t.target&&d.disableFormElements(l(this))}),t.delegate(d.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&d.enableFormElements(l(this))}),l(function(){d.refreshCSRFTokens()}))}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){return t.ui=t.ui||{},t.ui.version="1.12.1"}),function(t){"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}(function(t){return t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}(function(k){return function(){function x(t,e,n){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?n/100:1)]}function C(t,e){return parseInt(k.css(t,e),10)||0}function e(t){var e=t[0];return 9===e.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:k.isWindow(e)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:e.preventDefault?{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}var o,L=Math.max,S=Math.abs,i=/left|center|right/,a=/top|center|bottom/,r=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,l=/%$/,n=k.fn.position;k.position={scrollbarWidth:function(){if(o!==undefined)return o;var t,e,n=k("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),i=n.children()[0];return k("body").append(n),t=i.offsetWidth,n.css("overflow","scroll"),t===(e=i.offsetWidth)&&(e=n[0].clientWidth),n.remove(),o=t-e},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?k.position.scrollbarWidth():0,height:i?k.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=k(t||window),n=k.isWindow(e[0]),i=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:n,isDocument:i,offset:!n&&!i?k(t).offset():{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:e.outerWidth(),height:e.outerHeight()}}},k.fn.position=function(c){if(!c||!c.of)return n.apply(this,arguments);c=k.extend({},c);var h,f,p,m,g,t,v=k(c.of),y=k.position.getWithinInfo(c.within),_=k.position.getScrollInfo(y),b=(c.collision||"flip").split(" "),w={};return t=e(v),v[0].preventDefault&&(c.at="left top"),f=t.width,p=t.height,m=t.offset,g=k.extend({},m),k.each(["my","at"],function(){var t,e,n=(c[this]||"").split(" ");1===n.length&&(n=i.test(n[0])?n.concat(["center"]):a.test(n[0])?["center"].concat(n):["center","center"]),n[0]=i.test(n[0])?n[0]:"center",n[1]=a.test(n[1])?n[1]:"center",t=r.exec(n[0]),e=r.exec(n[1]),w[this]=[t?t[0]:0,e?e[0]:0],c[this]=[s.exec(n[0])[0],s.exec(n[1])[0]]}),1===b.length&&(b[1]=b[0]),"right"===c.at[0]?g.left+=f:"center"===c.at[0]&&(g.left+=f/2),"bottom"===c.at[1]?g.top+=p:"center"===c.at[1]&&(g.top+=p/2),h=x(w.at,f,p),g.left+=h[0],g.top+=h[1],this.each(function(){var n,t,r=k(this),s=r.outerWidth(),l=r.outerHeight(),e=C(this,"marginLeft"),i=C(this,"marginTop"),o=s+e+C(this,"marginRight")+_.width,a=l+i+C(this,"marginBottom")+_.height,u=k.extend({},g),d=x(w.my,r.outerWidth(),r.outerHeight());"right"===c.my[0]?u.left-=s:"center"===c.my[0]&&(u.left-=s/2),"bottom"===c.my[1]?u.top-=l:"center"===c.my[1]&&(u.top-=l/2),u.left+=d[0],u.top+=d[1],n={marginLeft:e,marginTop:i},k.each(["left","top"],function(t,e){k.ui.position[b[t]]&&k.ui.position[b[t]][e](u,{targetWidth:f,targetHeight:p,elemWidth:s,elemHeight:l,collisionPosition:n,collisionWidth:o,collisionHeight:a,offset:[h[0]+d[0],h[1]+d[1]],my:c.my,at:c.at,within:y,elem:r})}),c.using&&(t=function(t){var e=m.left-u.left,n=e+f-s,i=m.top-u.top,o=i+p-l,a={target:{element:v,left:m.left,top:m.top,width:f,height:p},element:{element:r,left:u.left,top:u.top,width:s,height:l},horizontal:n<0?"left":0<e?"right":"center",vertical:o<0?"top":0<i?"bottom":"middle"};f<s&&S(e+n)<f&&(a.horizontal="center"),p<l&&S(i+o)<p&&(a.vertical="middle"),L(S(e),S(n))>L(S(i),S(o))?a.important="horizontal":a.important="vertical",c.using.call(this,t,a)}),r.offset(k.extend(u,{using:t}))})},k.ui.position={fit:{left:function(t,e){var n,i=e.within,o=i.isWindow?i.scrollLeft:i.offset.left,a=i.width,r=t.left-e.collisionPosition.marginLeft,s=o-r,l=r+e.collisionWidth-a-o;e.collisionWidth>a?0<s&&l<=0?(n=t.left+s+e.collisionWidth-a-o,t.left+=s-n):t.left=0<l&&s<=0?o:l<s?o+a-e.collisionWidth:o:0<s?t.left+=s:0<l?t.left-=l:t.left=L(t.left-r,t.left)},top:function(t,e){var n,i=e.within,o=i.isWindow?i.scrollTop:i.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,s=o-r,l=r+e.collisionHeight-a-o;e.collisionHeight>a?0<s&&l<=0?(n=t.top+s+e.collisionHeight-a-o,t.top+=s-n):t.top=0<l&&s<=0?o:l<s?o+a-e.collisionHeight:o:0<s?t.top+=s:0<l?t.top-=l:t.top=L(t.top-r,t.top)}},flip:{left:function(t,e){var n,i,o=e.within,a=o.offset.left+o.scrollLeft,r=o.width,s=o.isWindow?o.scrollLeft:o.offset.left,l=t.left-e.collisionPosition.marginLeft,u=l-s,d=l+e.collisionWidth-r-s,c="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,h="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];u<0?((n=t.left+c+h+f+e.collisionWidth-r-a)<0||n<S(u))&&(t.left+=c+h+f):0<d&&(0<(i=t.left-e.collisionPosition.marginLeft+c+h+f-s)||S(i)<d)&&(t.left+=c+h+f)},top:function(t,e){var n,i,o=e.within,a=o.offset.top+o.scrollTop,r=o.height,s=o.isWindow?o.scrollTop:o.offset.top,l=t.top-e.collisionPosition.marginTop,u=l-s,d=l+e.collisionHeight-r-s,c="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,h="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];u<0?((i=t.top+c+h+f+e.collisionHeight-r-a)<0||i<S(u))&&(t.top+=c+h+f):0<d&&(0<(n=t.top-e.collisionPosition.marginTop+c+h+f-s)||S(n)<d)&&(t.top+=c+h+f)}},flipfit:{left:function(){k.ui.position.flip.left.apply(this,arguments),k.ui.position.fit.left.apply(this,arguments)},top:function(){k.ui.position.flip.top.apply(this,arguments),k.ui.position.fit.top.apply(this,arguments)}}}}(),k.ui.position}),function(t){"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}(function(t){return t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(n){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}(function(t){return t.fn.extend({uniqueId:(e=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}});var e}),function(t){"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}(function(d){var a,n=0,s=Array.prototype.slice;return d.cleanData=(a=d.cleanData,function(t){var e,n,i;for(i=0;null!=(n=t[i]);i++)try{(e=d._data(n,"events"))&&e.remove&&d(n).triggerHandler("remove")}catch(o){}a(t)}),d.widget=function(t,n,e){var i,o,a,r={},s=t.split(".")[0],l=s+"-"+(t=t.split(".")[1]);return e||(e=n,n=d.Widget),d.isArray(e)&&(e=d.extend.apply(null,[{}].concat(e))),d.expr[":"][l.toLowerCase()]=function(t){return!!d.data(t,l)},d[s]=d[s]||{},i=d[s][t],o=d[s][t]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},d.extend(o,i,{version:e.version,_proto:d.extend({},e),_childConstructors:[]}),(a=new n).options=d.widget.extend({},a.options),d.each(e,function(e,a){d.isFunction(a)?r[e]=function(){function i(){return n.prototype[e].apply(this,arguments)}function o(t){return n.prototype[e].apply(this,t)}return function(){var t,e=this._super,n=this._superApply;return this._super=i,this._superApply=o,t=a.apply(this,arguments),this._super=e,this._superApply=n,t}}():r[e]=a}),o.prototype=d.widget.extend(a,{widgetEventPrefix:i&&a.widgetEventPrefix||t},r,{constructor:o,namespace:s,widgetName:t,widgetFullName:l}),i?(d.each(i._childConstructors,function(t,e){var n=e.prototype;d.widget(n.namespace+"."+n.widgetName,o,e._proto)}),delete i._childConstructors):n._childConstructors.push(o),d.widget.bridge(t,o),o},d.widget.extend=function(t){for(var e,n,i=s.call(arguments,1),o=0,a=i.length;o<a;o++)for(e in i[o])n=i[o][e],i[o].hasOwnProperty(e)&&n!==undefined&&(d.isPlainObject(n)?t[e]=d.isPlainObject(t[e])?d.widget.extend({},t[e],n):d.widget.extend({},n):t[e]=n);return t},d.widget.bridge=function(a,e){var r=e.prototype.widgetFullName||a;d.fn[a]=function(n){var t="string"==typeof n,i=s.call(arguments,1),o=this;return t?this.length||"instance"!==n?this.each(function(){var t,e=d.data(this,r);return"instance"===n?(o=e,!1):e?d.isFunction(e[n])&&"_"!==n.charAt(0)?(t=e[n].apply(e,i))!==e&&t!==undefined?(o=t&&t.jquery?o.pushStack(t.get()):t,!1):void 0:d.error("no such method '"+n+"' for "+a+" widget instance"):d.error("cannot call methods on "+a+" prior to initialization; attempted to call method '"+n+"'")}):o=undefined:(i.length&&(n=d.widget.extend.apply(null,[n].concat(i))),this.each(function(){var t=d.data(this,r);t?(t.option(n||{}),t._init&&t._init()):d.data(this,r,new e(n,this))})),o}},d.Widget=function(){},d.Widget._childConstructors=[],d.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,e){e=d(e||this.defaultElement||this)[0],this.element=d(e),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=d(),this.hoverable=d(),this.focusable=d(),this.classesElementLookup={},e!==this&&(d.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=d(e.style?e.ownerDocument:e.document||e),this.window=d(this.document[0].defaultView||this.document[0].parentWindow)),this.options=d.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:d.noop,_create:d.noop,_init:d.noop,destroy:function(){var n=this;this._destroy(),d.each(this.classesElementLookup,function(t,e){n._removeClass(e,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:d.noop,widget:function(){return this.element},option:function(t,e){var n,i,o,a=t;if(0===arguments.length)return d.widget.extend({},this.options);if("string"==typeof t)if(a={},t=(n=t.split(".")).shift(),n.length){for(i=a[t]=d.widget.extend({},this.options[t]),o=0;o<n.length-1;o++)i[n[o]]=i[n[o]]||{},i=i[n[o]];if(t=n.pop(),1===arguments.length)return i[t]===undefined?null:i[t];i[t]=e}else{if(1===arguments.length)return this.options[t]===undefined?null:this.options[t];a[t]=e}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(t){var e,n,i;for(e in t)i=this.classesElementLookup[e],t[e]!==this.options.classes[e]&&i&&i.length&&(n=d(i.get()),this._removeClass(i,e),n.addClass(this._classes({element:n,keys:e,classes:t,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(o){function t(t,e){var n,i;for(i=0;i<t.length;i++)n=r.classesElementLookup[t[i]]||d(),n=o.add?d(d.unique(n.get().concat(o.element.get()))):d(n.not(o.element).get()),r.classesElementLookup[t[i]]=n,a.push(t[i]),e&&o.classes[t[i]]&&a.push(o.classes[t[i]])}var a=[],r=this;return o=d.extend({element:this.element,classes:this.options.classes||{}},o),this._on(o.element,{remove:"_untrackClassesElement"}),o.keys&&t(o.keys.match(/\S+/g)||[],!0),o.extra&&t(o.extra.match(/\S+/g)||[]),a.join(" ")},_untrackClassesElement:function(n){var i=this;d.each(i.classesElementLookup,function(t,e){-1!==d.inArray(n.target,e)&&(i.classesElementLookup[t]=d(e.not(n.target).get()))})},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,i){i="boolean"==typeof i?i:n;var o="string"==typeof t||null===t,a={extra:o?e:n,keys:o?t:e,element:o?this.element:t,add:i};return a.element.toggleClass(this._classes(a),i),this},_on:function(r,s,t){var l,u=this;"boolean"!=typeof r&&(t=s,s=r,r=!1),t?(s=l=d(s),this.bindings=this.bindings.add(s)):(t=s,s=this.element,l=this.widget()),d.each(t,function(t,e){function n(){if(r||!0!==u.options.disabled&&!d(this).hasClass("ui-state-disabled"))return("string"==typeof e?u[e]:e).apply(u,arguments)}"string"!=typeof e&&(n.guid=e.guid=e.guid||n.guid||d.guid++);var i=t.match(/^([\w:-]*)\s*(.*)$/),o=i[1]+u.eventNamespace,a=i[2];a?l.on(o,a,n):s.on(o,n)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e).off(e),this.bindings=d(this.bindings.not(t).get()),this.focusable=d(this.focusable.not(t).get()),this.hoverable=d(this.hoverable.not(t).get())},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(d(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(d(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(d(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(d(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,e,n){var i,o,a=this.options[t];if(n=n||{},(e=d.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],o=e.originalEvent)for(i in o)i in e||(e[i]=o[i]);return this.element.trigger(e,n),!(d.isFunction(a)&&!1===a.apply(this.element[0],[e].concat(n))||e.isDefaultPrevented())}},d.each({show:"fadeIn",hide:"fadeOut"},function(a,r){d.Widget.prototype["_"+a]=function(e,t,n){var i;"string"==typeof t&&(t={effect:t});var o=t?!0===t||"number"==typeof t?r:t.effect||r:a;"number"==typeof(t=t||{})&&(t={duration:t}),i=!d.isEmptyObject(t),t.complete=n,t.delay&&e.delay(t.delay),i&&d.effects&&d.effects.effect[o]?e[a](t):o!==a&&e[o]?e[o](t.duration,t.easing,n):e.queue(function(t){d(this)[a](),n&&n.call(e[0]),t()})}}),d.widget}),function(t){"function"==typeof define&&define.amd?define(["jquery","../keycode","../position","../safe-active-element","../unique-id","../version","../widget"],t):t(jQuery)}(function(s){return s.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(t){var e=s(t.target),n=s(s.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&e.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),e.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&n.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var e=s(t.target).closest(".ui-menu-item"),n=s(t.currentTarget);e[0]===n[0]&&(this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,n))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,n)},blur:function(t){this._delay(function(){!s.contains(this.element[0],s.ui.safeActiveElement(this.document[0]))&&this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each(function(){var t=s(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var e,n,i,o,a=!0;switch(t.keyCode){case s.ui.keyCode.PAGE_UP:this.previousPage(t);break;case s.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case s.ui.keyCode.HOME:this._move("first","first",t);break;case s.ui.keyCode.END:this._move("last","last",t);break;case s.ui.keyCode.UP:this.previous(t);break;case s.ui.keyCode.DOWN:this.next(t);break;case s.ui.keyCode.LEFT:this.collapse(t);break;case s.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case s.ui.keyCode.ENTER:case s.ui.keyCode.SPACE:this._activate(t);break;case s.ui.keyCode.ESCAPE:this.collapse(t);break;default:a=!1,n=this.previousFilter||"",o=!1,i=96<=t.keyCode&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),i===n?o=!0:i=n+i,e=this._filterMenuItems(i),(e=o&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e).length||(i=String.fromCharCode(t.keyCode),e=this._filterMenuItems(i)),e.length?(this.focus(t,e),this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}a&&t.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var t,e,n,i,o=this,a=this.options.icons.submenu,r=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),e=r.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=s(this),e=t.prev(),n=s("<span>").data("ui-menu-submenu-caret",!0);o._addClass(n,"ui-menu-icon","ui-icon "+a),e.attr("aria-haspopup","true").prepend(n),t.attr("aria-labelledby",e.attr("id"))}),this._addClass(e,"ui-menu","ui-widget ui-widget-content ui-front"),(t=r.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var t=s(this);o._isDivider(t)&&o._addClass(t,"ui-menu-divider","ui-widget-content")}),i=(n=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(n,"ui-menu-item")._addClass(i,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!s.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",String(t)),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var n,i,o;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),o=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(o,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(n=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(t){var e,n,i,o,a,r;this._hasScroll()&&(e=parseFloat(s.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(s.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-e-n,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=t.outerHeight(),i<0?this.activeMenu.scrollTop(o+i):a<i+r&&this.activeMenu.scrollTop(o+i-a+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(t){var e=s.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(e)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay(function(){var t=n?this.element:s(e&&e.target).closest(this.element.find(".ui-menu"));t.length||(t=this.element),this._close(t),this.blur(e),this._removeClass(t.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=t},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden",
"true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!s(t.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[e]()),this.focus(n,i)},nextPage:function(t){var e,n,i;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(e=s(this)).offset().top-n-i<0}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var e,n,i;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(e=s(this)).offset().top-n+i}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||s(t.target).closest(".ui-menu-item");var e={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,e)},_filterMenuItems:function(t){var e=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+e,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return n.test(s.trim(s(this).children(".ui-menu-item-wrapper").text()))})}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./menu","../keycode","../position","../safe-active-element","../version","../widget"],t):t(jQuery)}(function(r){return r.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var n,i,o,t=this.element[0].nodeName.toLowerCase(),e="textarea"===t,a="input"===t;this.isMultiLine=e||!a&&this._isContentEditable(this.element),this.valueMethod=this.element[e||a?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(t){if(this.element.prop("readOnly"))i=o=n=!0;else{i=o=n=!1;var e=r.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:n=!0,this._move("previousPage",t);break;case e.PAGE_DOWN:n=!0,this._move("nextPage",t);break;case e.UP:n=!0,this._keyEvent("previous",t);break;case e.DOWN:n=!0,this._keyEvent("next",t);break;case e.ENTER:this.menu.active&&(n=!0,t.preventDefault(),this.menu.select(t));break;case e.TAB:this.menu.active&&this.menu.select(t);break;case e.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(t),t.preventDefault());break;default:i=!0,this._searchTimeout(t)}}},keypress:function(t){if(n)return n=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||t.preventDefault());if(!i){var e=r.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:this._move("previousPage",t);break;case e.PAGE_DOWN:this._move("nextPage",t);break;case e.UP:this._keyEvent("previous",t);break;case e.DOWN:this._keyEvent("next",t)}}},input:function(t){if(o)return o=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=r("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==r.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(t,e){var n,i;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){r(t.target).trigger(t.originalEvent)});i=e.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:i})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value),(n=e.item.attr("aria-label")||i.value)&&r.trim(n).length&&(this.liveRegion.children().hide(),r("<div>").text(n).appendTo(this.liveRegion))},menuselect:function(t,e){var n=e.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==r.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",t,{item:n})&&this._value(n.value),this.term=this._value(),this.close(t),this.selectedItem=n}}),this.liveRegion=r("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var e=this.menu.element[0];return t.target===this.element[0]||t.target===e||r.contains(e,t.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?r(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var n,i,o=this;r.isArray(this.options.source)?(n=this.options.source,this.source=function(t,e){e(r.ui.autocomplete.filter(n,t.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,e){o.xhr&&o.xhr.abort(),o.xhr=r.ajax({url:i,data:t,dataType:"json",success:function(t){e(t)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(i){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),e=this.menu.element.is(":visible"),n=i.altKey||i.ctrlKey||i.metaKey||i.shiftKey;t&&(!t||e||n)||(this.selectedItem=null,this.search(null,i))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return r.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:r.map(t,function(t){return"string"==typeof t?{label:t,value:t}:r.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var e=this.menu.element.empty();this._renderMenu(e,t),this.isNewMenu=!0,this.menu.refresh(),e.show(),this._resizeMenu(),e.position(r.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(n,t){var i=this;r.each(t,function(t,e){i._renderItemData(n,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(t,e){return r("<li>").append(r("<div>").text(e.label)).appendTo(t)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),r.extend(r.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,e){var n=new RegExp(r.ui.autocomplete.escapeRegex(e),"i");return r.grep(t,function(t){return n.test(t.label||t.value||t)})}}),r.widget("ui.autocomplete",r.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(1<t?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),r("<div>").text(e).appendTo(this.liveRegion))}}),r.ui.autocomplete}),function(t){"function"==typeof define&&define.amd?define(["jquery","../version","../keycode"],t):t(jQuery)}(function(C){function l(t){for(var e,n;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(n=parseInt(t.css("zIndex"),10),!isNaN(n)&&0!==n))return n;t=t.parent()}return 0}function t(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},C.extend(this._defaults,this.regional[""]),this.regional.en=C.extend(!0,{},this.regional[""]),this.regional["en-US"]=C.extend(!0,{},this.regional.en),this.dpDiv=n(C("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var e="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",e,function(){C(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&C(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&C(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",e,r)}function r(){C.datepicker._isDisabledDatepicker(s.inline?s.dpDiv.parent()[0]:s.input[0])||(C(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),C(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&C(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&C(this).addClass("ui-datepicker-next-hover"))}function c(t,e){for(var n in C.extend(t,e),e)null==e[n]&&(t[n]=e[n]);return t}var s;return C.extend(C.ui,{datepicker:{version:"1.12.1"}}),C.extend(t.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return c(this._defaults,t||{}),this},_attachDatepicker:function(t,e){var n,i,o;i="div"===(n=t.nodeName.toLowerCase())||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(o=this._newInst(C(t),i)).settings=C.extend({},e||{}),"input"===n?this._connectDatepicker(t,o):i&&this._inlineDatepicker(t,o)},_newInst:function(t,e){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?n(C("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,e){var n=C(t);e.append=C([]),e.trigger=C([]),n.hasClass(this.markerClassName)||(this._attachments(n,e),n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(e),C.data(t,"datepicker",e),e.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var n,i,o,a=this._get(e,"appendText"),r=this._get(e,"isRTL");e.append&&e.append.remove(),a&&(e.append=C("<span class='"+this._appendClass+"'>"+a+"</span>"),t[r?"before":"after"](e.append)),t.off("focus",this._showDatepicker),e.trigger&&e.trigger.remove(),"focus"!==(n=this._get(e,"showOn"))&&"both"!==n||t.on("focus",this._showDatepicker),"button"!==n&&"both"!==n||(i=this._get(e,"buttonText"),o=this._get(e,"buttonImage"),e.trigger=C(this._get(e,"buttonImageOnly")?C("<img/>").addClass(this._triggerClass).attr({src:o,alt:i,title:i}):C("<button type='button'></button>").addClass(this._triggerClass).html(o?C("<img/>").attr({src:o,alt:i,title:i}):i)),t[r?"before":"after"](e.trigger),e.trigger.on("click",function(){return C.datepicker._datepickerShowing&&C.datepicker._lastInput===t[0]?C.datepicker._hideDatepicker():(C.datepicker._datepickerShowing&&C.datepicker._lastInput!==t[0]&&C.datepicker._hideDatepicker(),C.datepicker._showDatepicker(t[0])),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,i,o,a=new Date(2009,11,20),r=this._get(t,"dateFormat");r.match(/[DM]/)&&(e=function(t){for(o=i=n=0;o<t.length;o++)t[o].length>n&&(n=t[o].length,i=o);return i},a.setMonth(e(this._get(t,r.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(e(this._get(t,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),t.input.attr("size",this._formatDate(t,a).length)}},_inlineDatepicker:function(t,e){var n=C(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(e.dpDiv),C.data(t,"datepicker",e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(t),e.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,n,i,o){var a,r,s,l,u,d=this._dialogInst;return d||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=C("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),C("body").append(this._dialogInput),(d=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},C.data(this._dialogInput[0],"datepicker",d)),c(d.settings,i||{}),e=e&&e.constructor===Date?this._formatDate(d,e):e,this._dialogInput.val(e),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(r=document.documentElement.clientWidth,s=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[r/2-100+l,s/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),C.blockUI&&C.blockUI(this.dpDiv),C.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(t){var e,n=C(t),i=C.data(t,"datepicker");n.hasClass(this.markerClassName)&&(e=t.nodeName.toLowerCase(),C.removeData(t,"datepicker"),"input"===e?(i.append.remove(),i.trigger.remove(),n.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==e&&"span"!==e||n.removeClass(this.markerClassName).empty(),s===i&&(s=null))},_enableDatepicker:function(e){var t,n,i=C(e),o=C.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==t&&"span"!==t||((n=i.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=C.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var t,n,i=C(e),o=C.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==t&&"span"!==t||((n=i.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=C.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(t){try{return C.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,n){var i,o,a,r,s=this._getInst(t);if(2===arguments.length&&"string"==typeof e)return"defaults"===e?C.extend({},C.datepicker._defaults):s?"all"===e?C.extend({},s.settings):this._get(s,e):null;i=e||{},"string"==typeof e&&((i={})[e]=n),s&&(this._curInst===s&&this._hideDatepicker(),o=this._getDateDatepicker(t,!0),a=this._getMinMaxDate(s,"min"),r=this._getMinMaxDate(s,"max"),c(s.settings,i),null!==a&&i.dateFormat!==undefined&&i.minDate===undefined&&(s.settings.minDate=this._formatDate(s,a)),null!==r&&i.dateFormat!==undefined&&i.maxDate===undefined&&(s.settings.maxDate=this._formatDate(s,r)),"disabled"in i&&(i.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(C(t),s),this._autoSize(s),this._setDate(s,o),this._updateAlternate(s),this._updateDatepicker(s))},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);n&&(this._setDate(n,e),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(t,e){var n=this._getInst(t);return n&&!n.inline&&this._setDateFromField(n,e),n?this._getDate(n):null},_doKeyDown:function(t){var e,n,i,o=C.datepicker._getInst(t.target),a=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,C.datepicker._datepickerShowing)switch(t.keyCode){case 9:C.datepicker._hideDatepicker(),a=!1;break;case 13:return(i=C("td."+C.datepicker._dayOverClass+":not(."+C.datepicker._currentClass+")",o.dpDiv))[0]&&C.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,i[0]),(e=C.datepicker._get(o,"onSelect"))?(n=C.datepicker._formatDate(o),e.apply(o.input?o.input[0]:null,[n,o])):C.datepicker._hideDatepicker(),!1;case 27:C.datepicker._hideDatepicker();break;case 33:C.datepicker._adjustDate(t.target,t.ctrlKey?-C.datepicker._get(o,"stepBigMonths"):-C.datepicker._get(o,"stepMonths"),"M");break;case 34:C.datepicker._adjustDate(t.target,t.ctrlKey?+C.datepicker._get(o,"stepBigMonths"):+C.datepicker._get(o,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&C.datepicker._clearDate(t.target),a=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&C.datepicker._gotoToday(t.target),a=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&C.datepicker._adjustDate(t.target,r?1:-1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&C.datepicker._adjustDate(t.target,t.ctrlKey?-C.datepicker._get(o,"stepBigMonths"):-C.datepicker._get(o,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&C.datepicker._adjustDate(t.target,-7,"D"),a=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&C.datepicker._adjustDate(t.target,r?-1:1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&C.datepicker._adjustDate(t.target,t.ctrlKey?+C.datepicker._get(o,"stepBigMonths"):+C.datepicker._get(o,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&C.datepicker._adjustDate(t.target,7,"D"),a=t.ctrlKey||t.metaKey;break;default:a=!1}else 36===t.keyCode&&t.ctrlKey?C.datepicker._showDatepicker(this):a=!1;a&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var e,n,i=C.datepicker._getInst(t.target);if(C.datepicker._get(i,"constrainInput"))return e=C.datepicker._possibleChars(C.datepicker._get(i,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||n<" "||!e||-1<e.indexOf(n)},_doKeyUp:function(t){var e=C.datepicker._getInst(t.target);if(e.input.val()!==e.lastVal)try{C.datepicker.parseDate(C.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,C.datepicker._getFormatConfig(e))&&(C.datepicker._setDateFromField(e),C.datepicker._updateAlternate(e),C.datepicker._updateDatepicker(e))}catch(n){}return!0},_showDatepicker:function(t){var e,n,i,o,a,r,s;("input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=C("input",t.parentNode)[0]),C.datepicker._isDisabledDatepicker(t)||C.datepicker._lastInput===t)||(e=C.datepicker._getInst(t),C.datepicker._curInst&&C.datepicker._curInst!==e&&(C.datepicker._curInst.dpDiv.stop(!0,!0),e&&C.datepicker._datepickerShowing&&C.datepicker._hideDatepicker(C.datepicker._curInst.input[0])),!1!==(i=(n=C.datepicker._get(e,"beforeShow"))?n.apply(t,[t,e]):{})&&(c(e.settings,i),e.lastVal=null,C.datepicker._lastInput=t,C.datepicker._setDateFromField(e),C.datepicker._inDialog&&(t.value=""),C.datepicker._pos||(C.datepicker._pos=C.datepicker._findPos(t),C.datepicker._pos[1]+=t.offsetHeight),o=!1,C(t).parents().each(function(){return!(o|="fixed"===C(this).css("position"))}),a={left:C.datepicker._pos[0],top:C.datepicker._pos[1]},C.datepicker._pos=null,e.dpDiv.empty(),e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),C.datepicker._updateDatepicker(e),a=C.datepicker._checkOffset(e,a,o),e.dpDiv.css({position:C.datepicker._inDialog&&C.blockUI?"static":o?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),e.inline||(r=C.datepicker._get(e,"showAnim"),s=C.datepicker._get(e,"duration"),e.dpDiv.css("z-index",l(C(t))+1),C.datepicker._datepickerShowing=!0,C.effects&&C.effects.effect[r]?e.dpDiv.show(r,C.datepicker._get(e,"showOptions"),s):e.dpDiv[r||"show"](r?s:null),C.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),C.datepicker._curInst=e)))},_updateDatepicker:function(t){this.maxRows=4,(s=t).dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var e,n=this._getNumberOfMonths(t),i=n[1],o=17,a=t.dpDiv.find("."+this._dayOverClass+" a");0<a.length&&r.apply(a.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<i&&t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",o*i+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===C.datepicker._curInst&&C.datepicker._datepickerShowing&&C.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),t.yearshtml&&(e=t.yearshtml,setTimeout(function(){e===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),e=t.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(t,e,n){var i=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),a=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,s=document.documentElement.clientWidth+(n?0:C(document).scrollLeft()),l=document.documentElement.clientHeight+(n?0:C(document).scrollTop());return e.left-=this._get(t,"isRTL")?i-a:0,e.left-=n&&e.left===t.input.offset().left?C(document).scrollLeft():0,e.top-=n&&e.top===t.input.offset().top+r?C(document).scrollTop():0,e.left-=Math.min(e.left,e.left+i>s&&i<s?Math.abs(e.left+i-s):0),e.top-=Math.min(e.top,e.top+o>l&&o<l?Math.abs(o+r):0),e},_findPos:function(t){for(var e,n=this._getInst(t),i=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||C.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return[(e=C(t).offset()).left,e.top]},_hideDatepicker:function(t){var e,n,i,o,a=this._curInst;!a||t&&a!==C.data(t,"datepicker")||this._datepickerShowing&&(e=this._get(a,"showAnim"),n=this._get(a,"duration"),i=function(){C.datepicker._tidyDialog(a)},C.effects&&(C.effects.effect[e]||C.effects[e])?a.dpDiv.hide(e,C.datepicker._get(a,"showOptions"),n,i):a.dpDiv["slideDown"===e?"slideUp":"fadeIn"===e?"fadeOut":"hide"](e?n:null,i),e||i(),this._datepickerShowing=!1,(o=this._get(a,"onClose"))&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),C.blockUI&&(C.unblockUI(),C("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(C.datepicker._curInst){var e=C(t.target),n=C.datepicker._getInst(e[0]);(e[0].id===C.datepicker._mainDivId||0!==e.parents("#"+C.datepicker._mainDivId).length||e.hasClass(C.datepicker.markerClassName)||e.closest("."+C.datepicker._triggerClass).length||!C.datepicker._datepickerShowing||C.datepicker._inDialog&&C.blockUI)&&(!e.hasClass(C.datepicker.markerClassName)||C.datepicker._curInst===n)||C.datepicker._hideDatepicker()}},_adjustDate:function(t,e,n){var i=C(t),o=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(o,e+("M"===n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(t){var e,n=C(t),i=this._getInst(n[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(e=new Date,i.selectedDay=e.getDate(),i.drawMonth=i.selectedMonth=e.getMonth(),i.drawYear=i.selectedYear=e.getFullYear()),this._notifyChange(i),this._adjustDate(n)},_selectMonthYear:function(t,e,n){var i=C(t),o=this._getInst(i[0]);o["selected"+("M"===n?"Month":"Year")]=o["draw"+("M"===n?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(i)},_selectDay:function(t,e,n,i){var o,a=C(t);C(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||((o=this._getInst(a[0])).selectedDay=o.currentDay=C("a",i).html(),o.selectedMonth=o.currentMonth=e,o.selectedYear=o.currentYear=n,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(t){var e=C(t);this._selectDate(e,"")},_selectDate:function(t,e){var n,i=C(t),o=this._getInst(i[0]);e=null!=e?e:this._formatDate(o),o.input&&o.input.val(e),this._updateAlternate(o),(n=this._get(o,"onSelect"))?n.apply(o.input?o.input[0]:null,[e,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var e,n,i,o=this._get(t,"altField");o&&(e=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),i=this.formatDate(e,n,this._getFormatConfig(t)),C(o).val(i))},noWeekends:function(t){var e=t.getDay();return[0<e&&e<6,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(n,a,t){if(null==n||null==a)throw"Invalid arguments";if(""===(a="object"==typeof a?a.toString():a+""))return null;var i,e,o,r,s=0,l=(t?t.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,c=(t?t.dayNames:null)||this._defaults.dayNames,h=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,f=(t?t.monthNames:null)||this._defaults.monthNames,p=-1,m=-1,g=-1,v=-1,y=!1,_=function(t){var e=i+1<n.length&&n.charAt(i+1)===t;return e&&i++,e},b=function(t){var e=_(t),n="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,i=new RegExp("^\\d{"+("y"===t?n:1)+","+n+"}"),o=a.substring(s).match(i);if(!o)throw"Missing number at position "+s;return s+=o[0].length,parseInt(o[0],10)},w=function(t,e,n){var i=-1,o=C.map(_(t)?n:e,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(C.each(o,function(t,e){var n=e[1];if(a.substr(s,n.length).toLowerCase()===n.toLowerCase())return i=e[0],s+=n.length,!1}),-1!==i)return i+1;throw"Unknown name at position "+s},x=function(){if(a.charAt(s)!==n.charAt(i))throw"Unexpected literal at position "+s;s++};for(i=0;i<n.length;i++)if(y)"'"!==n.charAt(i)||_("'")?x():y=!1;else switch(n.charAt(i)){case"d":g=b("d");break;case"D":w("D",d,c);break;case"o":v=b("o");break;case"m":m=b("m");break;case"M":m=w("M",h,f);break;case"y":p=b("y");break;case"@":p=(r=new Date(b("@"))).getFullYear(),m=r.getMonth()+1,g=r.getDate();break;case"!":p=(r=new Date((b("!")-this._ticksTo1970)/1e4)).getFullYear(),m=r.getMonth()+1,g=r.getDate();break;case"'":_("'")?x():y=!0;break;default:x()}if(s<a.length&&(o=a.substr(s),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===p?p=(new Date).getFullYear():p<100&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=u?0:-100)),-1<v)for(m=1,g=v;;){if(g<=(e=this._getDaysInMonth(p,m-1)))break;m++,g-=e}if((r=this._daylightSavingAdjust(new Date(p,m-1,g))).getFullYear()!==p||r.getMonth()+1!==m||r.getDate()!==g)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(n,t,e){if(!t)return"";var i,o=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,a=(e?e.dayNames:null)||this._defaults.dayNames,r=(e?e.monthNamesShort:null
)||this._defaults.monthNamesShort,s=(e?e.monthNames:null)||this._defaults.monthNames,l=function(t){var e=i+1<n.length&&n.charAt(i+1)===t;return e&&i++,e},u=function(t,e,n){var i=""+e;if(l(t))for(;i.length<n;)i="0"+i;return i},d=function(t,e,n,i){return l(t)?i[e]:n[e]},c="",h=!1;if(t)for(i=0;i<n.length;i++)if(h)"'"!==n.charAt(i)||l("'")?c+=n.charAt(i):h=!1;else switch(n.charAt(i)){case"d":c+=u("d",t.getDate(),2);break;case"D":c+=d("D",t.getDay(),o,a);break;case"o":c+=u("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":c+=u("m",t.getMonth()+1,2);break;case"M":c+=d("M",t.getMonth(),r,s);break;case"y":c+=l("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?c+="'":h=!0;break;default:c+=n.charAt(i)}return c},_possibleChars:function(n){var i,t="",e=!1,o=function(t){var e=i+1<n.length&&n.charAt(i+1)===t;return e&&i++,e};for(i=0;i<n.length;i++)if(e)"'"!==n.charAt(i)||o("'")?t+=n.charAt(i):e=!1;else switch(n.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":o("'")?t+="'":e=!0;break;default:t+=n.charAt(i)}return t},_get:function(t,e){return t.settings[e]!==undefined?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,o=this._getDefaultDate(t),a=o,r=this._getFormatConfig(t);try{a=this.parseDate(n,i,r)||o}catch(s){i=e?"":i}t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),t.currentDay=i?a.getDate():0,t.currentMonth=i?a.getMonth():0,t.currentYear=i?a.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(l,t,e){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},i=null==t||""===t?e:"string"==typeof t?function(t){try{return C.datepicker.parseDate(C.datepicker._get(l,"dateFormat"),t,C.datepicker._getFormatConfig(l))}catch(s){}for(var e=(t.toLowerCase().match(/^c/)?C.datepicker._getDate(l):null)||new Date,n=e.getFullYear(),i=e.getMonth(),o=e.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,r=a.exec(t);r;){switch(r[2]||"d"){case"d":case"D":o+=parseInt(r[1],10);break;case"w":case"W":o+=7*parseInt(r[1],10);break;case"m":case"M":i+=parseInt(r[1],10),o=Math.min(o,C.datepicker._getDaysInMonth(n,i));break;case"y":case"Y":n+=parseInt(r[1],10),o=Math.min(o,C.datepicker._getDaysInMonth(n,i))}r=a.exec(t)}return new Date(n,i,o)}(t):"number"==typeof t?isNaN(t)?e:n(t):new Date(t.getTime());return(i=i&&"Invalid Date"===i.toString()?e:i)&&(i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)),this._daylightSavingAdjust(i)},_daylightSavingAdjust:function(t){return t?(t.setHours(12<t.getHours()?t.getHours()+2:0),t):null},_setDate:function(t,e,n){var i=!e,o=t.selectedMonth,a=t.selectedYear,r=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=r.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=r.getMonth(),t.drawYear=t.selectedYear=t.currentYear=r.getFullYear(),o===t.selectedMonth&&a===t.selectedYear||n||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(i?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(t){var e=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){C.datepicker._adjustDate(n,-e,"M")},next:function(){C.datepicker._adjustDate(n,+e,"M")},hide:function(){C.datepicker._hideDatepicker()},today:function(){C.datepicker._gotoToday(n)},selectDay:function(){return C.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return C.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return C.datepicker._selectMonthYear(n,this,"Y"),!1}};C(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,i,o,a,r,s,l,u,d,c,h,f,p,m,g,v,y,_,b,w,x,C,L,S,k,D,T,M,P,E,I,A,O,F,N,R,B,z,U=new Date,j=this._daylightSavingAdjust(new Date(U.getFullYear(),U.getMonth(),U.getDate())),$=this._get(t,"isRTL"),H=this._get(t,"showButtonPanel"),W=this._get(t,"hideIfNoPrevNext"),V=this._get(t,"navigationAsDateFormat"),Y=this._getNumberOfMonths(t),q=this._get(t,"showCurrentAtPos"),Z=this._get(t,"stepMonths"),G=1!==Y[0]||1!==Y[1],K=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(t,"min"),X=this._getMinMaxDate(t,"max"),Q=t.drawMonth-q,tt=t.drawYear;if(Q<0&&(Q+=12,tt--),X)for(e=this._daylightSavingAdjust(new Date(X.getFullYear(),X.getMonth()-Y[0]*Y[1]+1,X.getDate())),e=J&&e<J?J:e;this._daylightSavingAdjust(new Date(tt,Q,1))>e;)--Q<0&&(Q=11,tt--);for(t.drawMonth=Q,t.drawYear=tt,n=this._get(t,"prevText"),n=V?this.formatDate(n,this._daylightSavingAdjust(new Date(tt,Q-Z,1)),this._getFormatConfig(t)):n,i=this._canAdjustMonth(t,-1,tt,Q)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"e":"w")+"'>"+n+"</span></a>",o=this._get(t,"nextText"),o=V?this.formatDate(o,this._daylightSavingAdjust(new Date(tt,Q+Z,1)),this._getFormatConfig(t)):o,a=this._canAdjustMonth(t,1,tt,Q)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"w":"e")+"'>"+o+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"w":"e")+"'>"+o+"</span></a>",r=this._get(t,"currentText"),s=this._get(t,"gotoCurrent")&&t.currentDay?K:j,r=V?this.formatDate(r,s,this._getFormatConfig(t)):r,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",u=H?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+($?l:"")+(this._isInRange(t,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+($?"":l)+"</div>":"",d=parseInt(this._get(t,"firstDay"),10),d=isNaN(d)?0:d,c=this._get(t,"showWeek"),h=this._get(t,"dayNames"),f=this._get(t,"dayNamesMin"),p=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),_=this._getDefaultDate(t),b="",x=0;x<Y[0];x++){for(C="",this.maxRows=4,L=0;L<Y[1];L++){if(S=this._daylightSavingAdjust(new Date(tt,Q,t.selectedDay)),k=" ui-corner-all",D="",G){if(D+="<div class='ui-datepicker-group",1<Y[1])switch(L){case 0:D+=" ui-datepicker-group-first",k=" ui-corner-"+($?"right":"left");break;case Y[1]-1:D+=" ui-datepicker-group-last",k=" ui-corner-"+($?"left":"right");break;default:D+=" ui-datepicker-group-middle",k=""}D+="'>"}for(D+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+k+"'>"+(/all|left/.test(k)&&0===x?$?a:i:"")+(/all|right/.test(k)&&0===x?$?i:a:"")+this._generateMonthYearHeader(t,Q,tt,J,X,0<x||0<L,p,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",T=c?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;w<7;w++)T+="<th scope='col'"+(5<=(w+d+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+h[M=(w+d)%7]+"'>"+f[M]+"</span></th>";for(D+=T+"</tr></thead><tbody>",P=this._getDaysInMonth(tt,Q),tt===t.selectedYear&&Q===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,P)),E=(this._getFirstDayOfMonth(tt,Q)-d+7)%7,I=Math.ceil((E+P)/7),A=G&&this.maxRows>I?this.maxRows:I,this.maxRows=A,O=this._daylightSavingAdjust(new Date(tt,Q,1-E)),F=0;F<A;F++){for(D+="<tr>",N=c?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(O)+"</td>":"",w=0;w<7;w++)R=g?g.apply(t.input?t.input[0]:null,[O]):[!0,""],z=(B=O.getMonth()!==Q)&&!y||!R[0]||J&&O<J||X&&X<O,N+="<td class='"+(5<=(w+d+6)%7?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(O.getTime()===S.getTime()&&Q===t.selectedMonth&&t._keyEvent||_.getTime()===O.getTime()&&_.getTime()===S.getTime()?" "+this._dayOverClass:"")+(z?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!v?"":" "+R[1]+(O.getTime()===K.getTime()?" "+this._currentClass:"")+(O.getTime()===j.getTime()?" ui-datepicker-today":""))+"'"+(B&&!v||!R[2]?"":" title='"+R[2].replace(/'/g,"&#39;")+"'")+(z?"":" data-handler='selectDay' data-event='click' data-month='"+O.getMonth()+"' data-year='"+O.getFullYear()+"'")+">"+(B&&!v?"&#xa0;":z?"<span class='ui-state-default'>"+O.getDate()+"</span>":"<a class='ui-state-default"+(O.getTime()===j.getTime()?" ui-state-highlight":"")+(O.getTime()===K.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+"' href='#'>"+O.getDate()+"</a>")+"</td>",O.setDate(O.getDate()+1),O=this._daylightSavingAdjust(O);D+=N+"</tr>"}11<++Q&&(Q=0,tt++),C+=D+="</tbody></table>"+(G?"</div>"+(0<Y[0]&&L===Y[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}b+=C}return b+=u,t._keyEvent=!1,b},_generateMonthYearHeader:function(t,e,n,i,o,a,r,s){var l,u,d,c,h,f,p,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),_="<div class='ui-datepicker-title'>",b="";if(a||!g)b+="<span class='ui-datepicker-month'>"+r[e]+"</span>";else{for(l=i&&i.getFullYear()===n,u=o&&o.getFullYear()===n,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;d<12;d++)(!l||d>=i.getMonth())&&(!u||d<=o.getMonth())&&(b+="<option value='"+d+"'"+(d===e?" selected='selected'":"")+">"+s[d]+"</option>");b+="</select>"}if(y||(_+=b+(!a&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",a||!v)_+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(c=this._get(t,"yearRange").split(":"),h=(new Date).getFullYear(),p=(f=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?h+parseInt(t,10):parseInt(t,10);return isNaN(e)?h:e})(c[0]),m=Math.max(p,f(c[1]||"")),p=i?Math.max(p,i.getFullYear()):p,m=o?Math.min(m,o.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=m;p++)t.yearshtml+="<option value='"+p+"'"+(p===n?" selected='selected'":"")+">"+p+"</option>";t.yearshtml+="</select>",_+=t.yearshtml,t.yearshtml=null}return _+=this._get(t,"yearSuffix"),y&&(_+=(!a&&g&&v?"":"&#xa0;")+b),_+="</div>"},_adjustInstDate:function(t,e,n){var i=t.selectedYear+("Y"===n?e:0),o=t.selectedMonth+("M"===n?e:0),a=Math.min(t.selectedDay,this._getDaysInMonth(i,o))+("D"===n?e:0),r=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,o,a)));t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),o=n&&e<n?n:e;return i&&i<o?i:o},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,i){var o=this._getNumberOfMonths(t),a=this._daylightSavingAdjust(new Date(n,i+(e<0?e:o[0]*o[1]),1));return e<0&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(t,a)},_isInRange:function(t,e){var n,i,o=this._getMinMaxDate(t,"min"),a=this._getMinMaxDate(t,"max"),r=null,s=null,l=this._get(t,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),r=parseInt(n[0],10),s=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(r+=i),n[1].match(/[+\-].*/)&&(s+=i)),(!o||e.getTime()>=o.getTime())&&(!a||e.getTime()<=a.getTime())&&(!r||e.getFullYear()>=r)&&(!s||e.getFullYear()<=s)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,i){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var o=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(i,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),o,this._getFormatConfig(t))}}),C.fn.datepicker=function(t,e){if(!this.length)return this;C.datepicker.initialized||(C(document).on("mousedown",C.datepicker._checkExternalClick),C.datepicker.initialized=!0),0===C("#"+C.datepicker._mainDivId).length&&C("body").append(C.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof e?C.datepicker["_"+t+"Datepicker"].apply(C.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof t?C.datepicker["_"+t+"Datepicker"].apply(C.datepicker,[this].concat(n)):C.datepicker._attachDatepicker(this,t)}):C.datepicker["_"+t+"Datepicker"].apply(C.datepicker,[this[0]].concat(n))},C.datepicker=new t,C.datepicker.initialized=!1,C.datepicker.uuid=(new Date).getTime(),C.datepicker.version="1.12.1",C.datepicker}),function(s,g,L){function t(){var t=s.L;S.noConflict=function(){return s.L=t,this},s.L=S}var S={version:"1.0.2"};"object"==typeof module&&"object"==typeof module.exports?module.exports=S:"function"==typeof define&&define.amd&&define(S),void 0!==s&&t(),S.Util={extend:function(t){var e,n,i,o;for(n=1,i=arguments.length;n<i;n++)for(e in o=arguments[n])t[e]=o[e];return t},create:Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}(),bind:function(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}},stamp:function(t){return t._leaflet_id=t._leaflet_id||++S.Util.lastId,t._leaflet_id},lastId:0,throttle:function(t,e,n){var i,o,a,r;return r=function(){i=!1,o&&(a.apply(n,o),o=!1)},a=function(){i?o=arguments:(t.apply(n,arguments),setTimeout(r,e),i=!0)}},wrapNum:function(t,e,n){var i=e[1],o=e[0],a=i-o;return t===i&&n?t:((t-o)%a+a)%a+o},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return S.Util.trim(t).split(/\s+/)},setOptions:function(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?S.Util.create(t.options):{}),e)t.options[n]=e[n];return t.options},getParamString:function(t,e,n){var i=[];for(var o in t)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")},template:function(t,i){return t.replace(S.Util.templateRe,function(t,e){var n=i[e];if(n===L)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(i)),n})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},indexOf:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){return s["webkit"+t]||s["moz"+t]||s["ms"+t]}function i(t){var e=+new Date,n=Math.max(0,16-(e-o));return o=e+n,s.setTimeout(t,n)}var o=0,a=s.requestAnimationFrame||t("RequestAnimationFrame")||i,e=s.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){s.clearTimeout(t)};S.Util.requestAnimFrame=function(t,e,n){if(!n||a!==i)return a.call(s,S.bind(t,e));t.call(e)},S.Util.cancelAnimFrame=function(t){t&&e.call(s,t)}}(),S.extend=S.Util.extend,S.bind=S.Util.bind,S.stamp=S.Util.stamp,S.setOptions=S.Util.setOptions,S.Class=function(){},S.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,i=S.Util.create(n);for(var o in(i.constructor=e).prototype=i,this)this.hasOwnProperty(o)&&"prototype"!==o&&(e[o]=this[o]);return t.statics&&(S.extend(e,t.statics),delete t.statics),t.includes&&(S.Util.extend.apply(null,[i].concat(t.includes)),delete t.includes),i.options&&(t.options=S.Util.extend(S.Util.create(i.options),t.options)),S.extend(i,t),i._initHooks=[],i.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=i._initHooks.length;t<e;t++)i._initHooks[t].call(this)}},e},S.Class.include=function(t){return S.extend(this.prototype,t),this},S.Class.mergeOptions=function(t){return S.extend(this.prototype.options,t),this},S.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this},S.Evented=S.Class.extend({on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var o=0,a=(t=S.Util.splitWords(t)).length;o<a;o++)this._on(t[o],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else for(var o=0,a=(t=S.Util.splitWords(t)).length;o<a;o++)this._off(t[o],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=L);for(var o={fn:e,ctx:n},a=i,r=0,s=a.length;r<s;r++)if(a[r].fn===e&&a[r].ctx===n)return;a.push(o),i.count++},_off:function(t,e,n){var i,o,a;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=L),i)for(o=0,a=i.length;o<a;o++){var r=i[o];if(r.ctx===n&&r.fn===e)return r.fn=S.Util.falseFn,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(o,1)}}else{for(o=0,a=i.length;o<a;o++)i[o].fn=S.Util.falseFn;delete this._events[t]}},fire:function(t,e,n){if(!this.listens(t,n))return this;var i=S.Util.extend({},e,{type:t,target:this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,r=o.length;a<r;a++){var s=o[a];s.fn.call(s.ctx||this,i)}this._firingCount--}}return n&&this._propagateEvent(i),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var i in t)this.once(i,t[i],e);return this}var o=S.bind(function(){this.off(t,e,n).off(t,o,n)},this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[S.stamp(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[S.stamp(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,S.extend({layer:t.target},t),!0)}});var e,n,i,o,a,r,l,u,d,c,h,f,p,m,v,y,_,b,w,x=S.Evented.prototype;x.addEventListener=x.on,x.removeEventListener=x.clearAllEventListeners=x.off,x.addOneTimeEventListener=x.once,x.fireEvent=x.fire,x.hasEventListeners=x.listens,S.Mixin={Events:x},e=navigator.userAgent.toLowerCase(),n=g.documentElement,i="ActiveXObject"in s,o=-1!==e.indexOf("webkit"),a=-1!==e.indexOf("phantom"),r=-1!==e.search("android [23]"),l=-1!==e.indexOf("chrome"),u=-1!==e.indexOf("gecko")&&!o&&!s.opera&&!i,d=0===navigator.platform.indexOf("Win"),c="undefined"!=typeof orientation||-1!==e.indexOf("mobile"),h=!s.PointerEvent&&s.MSPointerEvent,f=s.PointerEvent||h,p=i&&"transition"in n.style,m="WebKitCSSMatrix"in s&&"m11"in new s.WebKitCSSMatrix&&!r,v="MozPerspective"in n.style,y="OTransition"in n.style,_=!s.L_NO_TOUCH&&(f||"ontouchstart"in s||s.DocumentTouch&&g instanceof s.DocumentTouch),S.Browser={ie:i,ielt9:i&&!g.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in g),webkit:o,gecko:u,android:-1!==e.indexOf("android"),android23:r,chrome:l,safari:!l&&-1!==e.indexOf("safari"),win:d,ie3d:p,webkit3d:m,gecko3d:v,opera12:y,any3d:!s.L_DISABLE_3D&&(p||m||v)&&!y&&!a,mobile:c,mobileWebkit:c&&o,mobileWebkit3d:c&&m,mobileOpera:c&&s.opera,mobileGecko:c&&u,touch:!!_,msPointer:!!h,pointer:!!f,retina:1<(s.devicePixelRatio||s.screen.deviceXDPI/s.screen.logicalXDPI)},S.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},S.Point.prototype={clone:function(){return new S.Point(this.x,this.y)},add:function(t){return this.clone()._add(S.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(S.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new S.Point(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new S.Point(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){var e=(t=S.point(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=S.point(t)).x===this.x&&t.y===this.y},contains:function(t){return t=S.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+S.Util.formatNum(this.x)+", "+S.Util.formatNum(this.y)+")"}},S.point=function(t,e,n){return t instanceof S.Point?t:S.Util.isArray(t)?new S.Point(t[0],t[1]):t===L||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new S.Point(t.x,t.y):new S.Point(t,e,n)},S.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])},S.Bounds.prototype={extend:function(t){return t=S.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new S.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new S.Point(this.min.x,this.max.y)},getTopRight:function(){return new S.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof S.Point?S.point(t):S.bounds(t))instanceof S.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=S.bounds(t);var e=this.min,n=this.max,i=t.min,o=t.max,a=o.x>=e.x&&i.x<=n.x,r=o.y>=e.y&&i.y<=n.y;return a&&r},overlaps:function(t){t=S.bounds(t);var e=this.min,n=this.max,i=t.min,o=t.max,a=o.x>e.x&&i.x<n.x,r=o.y>e.y&&i.y<n.y;return a&&r},isValid:function(){return!(!this.min||!this.max)}},S.bounds=function(t,e){return!t||t instanceof S.Bounds?t:new S.Bounds(t,e)},S.Transformation=function(t,e,n,i){this._a=t,this._b=e,this._c=n,this._d=i},S.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new S.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},S.DomUtil={get:function(t){return"string"==typeof t?g.getElementById(t):t},getStyle:function(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&g.defaultView){var i=g.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n},create:function(t,e,n){var i=g.createElement(t);return i.className=e||"",n&&n.appendChild(i),i},remove:function(t){var e=t.parentNode;e&&e.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},toFront:function(t){t.parentNode.appendChild(t)},toBack:function(t){var e=t.parentNode;e.insertBefore(t,e.firstChild)},hasClass:function(t,e){if(t.classList!==L)return t.classList.contains(e);var n=S.DomUtil.getClass(t);return 0<n.length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==L)for(var n=S.Util.splitWords(e),i=0,o=n.length;i<o;i++)t.classList.add(n[i]);else if(!S.DomUtil.hasClass(t,e)){var a=S.DomUtil.getClass(t);S.DomUtil.setClass(t,(a?a+" ":"")+e)}},removeClass:function(t,e){t.classList!==L?t.classList.remove(e):S.DomUtil.setClass(t,S.Util.trim((" "+S.DomUtil.getClass(t)+" ").replace(" "+e+" "," ")))},setClass:function(t,e){t.className.baseVal===L?t.className=e:t.className.baseVal=e},getClass:function(t){return t.className.baseVal===L?t.className:t.className.baseVal},setOpacity:function(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&S.DomUtil._setOpacityIE(t,e)},_setOpacityIE:function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(o){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"},testProp:function(t){for(var e=g.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1},setTransform:function(t,e,n){var i=e||new S.Point(0,0);t.style[S.DomUtil.TRANSFORM]=(S.Browser.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")},setPosition:function(t,e){t._leaflet_pos=e,S.Browser.any3d?S.DomUtil.setTransform(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos||new S.Point(0,0)}},function(){S.DomUtil.TRANSFORM=S.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var t=S.DomUtil.TRANSITION=S.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(S.DomUtil.TRANSITION_END="webkitTransition"===t||"OTransition"===t?t+"End":"transitionend","onselectstart"in g)S.DomUtil.disableTextSelection=function(){S.DomEvent.on(s,"selectstart",S.DomEvent.preventDefault)},S.DomUtil.enableTextSelection=function(){S.DomEvent.off(s,"selectstart",S.DomEvent.preventDefault)};else{var e=S.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);S.DomUtil.disableTextSelection=function(){if(e){var t=g.documentElement.style;this._userSelect=t[e],t[e]="none"}},S.DomUtil.enableTextSelection=function(){e&&(g.documentElement.style[e]=this._userSelect,delete this._userSelect)}}S.DomUtil.disableImageDrag=function(){S.DomEvent.on(s,"dragstart",S.DomEvent.preventDefault)},S.DomUtil.enableImageDrag=function(){S.DomEvent.off(s,"dragstart",S.DomEvent.preventDefault)},S.DomUtil.preventOutline=function(t){for(;-1===t.tabIndex;)t=t.parentNode;t&&t.style&&(S.DomUtil.restoreOutline(),this._outlineElement=t,this._outlineStyle=t.style.outline,t.style.outline="none",S.DomEvent.on(s,"keydown",S.DomUtil.restoreOutline,this))},S.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,S.DomEvent.off(s,"keydown",S.DomUtil.restoreOutline,this))}}(),S.LatLng=function(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,n!==L&&(this.alt=+n)},S.LatLng.prototype={equals:function(t,e){return!!t&&(t=S.latLng(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(e===L?1e-9:e))},toString:function(t){return"LatLng("+S.Util.formatNum(this.lat,t)+", "+S.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){return S.CRS.Earth.distance(this,S.latLng(t))},wrap:function(){return S.CRS.Earth.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return S.latLngBounds([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new S.LatLng(this.lat,this.lng,this.alt)}},S.latLng=function(t,e,n){return t instanceof S.LatLng?t:S.Util.isArray(t)&&"object"!=typeof t[0]?3===t.length?new S.LatLng(t[0],t[1],t[2]):2===t.length?new S.LatLng(t[0],t[1]):null:t===L||null===t?t:"object"==typeof t&&"lat"in t?new S.LatLng(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===L?null:new S.LatLng(t,e,n)},S.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])},S.LatLngBounds.prototype={extend:function(t){var e,n,i=this._southWest,o=this._northEast;if(t instanceof S.LatLng)n=e=t;else{if(!(t instanceof S.LatLngBounds))return t?this.extend(S.latLng(t)||S.latLngBounds(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||o?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),o.lat=Math.max(n.lat,o.lat),o.lng=Math.max(n.lng,o.lng)):(this._southWest=new S.LatLng(e.lat,e.lng),this._northEast=new S.LatLng(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,o=Math.abs(e.lng-n.lng)*t;return new S.LatLngBounds(new S.LatLng(e.lat-i,e.lng-o),new S.LatLng(n.lat+i,n.lng+o))},getCenter:function(){return new S.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new S.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new S.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof S.LatLng?S.latLng(t):S.latLngBounds(t);var e,n,i=this._southWest,o=this._northEast;return t instanceof S.LatLngBounds?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=o.lat&&e.lng>=i.lng&&n.lng<=o.lng},intersects:function(t){t=S.latLngBounds(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),a=o.lat>=e.lat&&i.lat<=n.lat,r=o.lng>=e.lng&&i.lng<=n.lng;return a&&r},overlaps:function(t){t=S.latLngBounds(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),a=o.lat>e.lat&&i.lat<n.lat,r=o.lng>e.lng&&i.lng<n.lng;return a&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=S.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},S.latLngBounds=function(t,e){return t instanceof S.LatLngBounds?t:new S.LatLngBounds(t,e)},S.Projection={},S.Projection.LonLat={project:function(t){return new S.Point(t.lng,t.lat)},unproject:function(t){return new S.LatLng(t.y,t.x)},bounds:S.bounds([-180,-90],[180,90])},S.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=Math.sin(i*e);return new S.Point(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new S.LatLng((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(b=6378137*Math.PI,S.bounds([-b,-b],[b,b]))},S.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},
zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),i=this.transformation.transform(e.min,n),o=this.transformation.transform(e.max,n);return S.bounds(i,o)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?S.Util.wrapNum(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?S.Util.wrapNum(t.lat,this.wrapLat,!0):t.lat,i=t.alt;return S.latLng(n,e,i)}},S.CRS.Simple=S.extend({},S.CRS,{projection:S.Projection.LonLat,transformation:new S.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0}),S.CRS.Earth=S.extend({},S.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,o=e.lat*n,a=Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos((e.lng-t.lng)*n);return this.R*Math.acos(Math.min(a,1))}}),S.CRS.EPSG3857=S.extend({},S.CRS.Earth,{code:"EPSG:3857",projection:S.Projection.SphericalMercator,transformation:(w=.5/(Math.PI*S.Projection.SphericalMercator.R),new S.Transformation(w,.5,-w,.5))}),S.CRS.EPSG900913=S.extend({},S.CRS.EPSG3857,{code:"EPSG:900913"}),S.CRS.EPSG4326=S.extend({},S.CRS.Earth,{code:"EPSG:4326",projection:S.Projection.LonLat,transformation:new S.Transformation(1/180,1,-1/180,.5)}),S.Map=S.Evented.extend({options:{crs:S.CRS.EPSG3857,center:L,zoom:L,minZoom:L,maxZoom:L,layers:[],maxBounds:L,renderer:L,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=S.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=S.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==L&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==L&&this.setView(S.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=S.DomUtil.TRANSITION&&S.Browser.any3d&&!S.Browser.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),S.DomEvent.on(this._proxy,S.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){if((e=e===L?this._zoom:this._limitZoom(e),t=this._limitCenter(S.latLng(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n)&&(n.animate!==L&&(n.zoom=S.extend({animate:n.animate},n.zoom),n.pan=S.extend({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(S.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(S.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),o=this.getSize().divideBy(2),a=(t instanceof S.Point?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/i),r=this.containerPointToLatLng(o.add(a));return this.setView(r,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():S.latLngBounds(t);var n=S.point(e.paddingTopLeft||e.padding||[0,0]),i=S.point(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,n.add(i));o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o;var a=i.subtract(n).divideBy(2),r=this.project(t.getSouthWest(),o),s=this.project(t.getNorthEast(),o);return{center:this.unproject(r.add(s).divideBy(2).add(a),o),zoom:o}},fitBounds:function(t,e){if(!(t=S.latLngBounds(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=S.point(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new S.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){S.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(n,i,t){function e(t){var e=(g*g-m*m+(t?-1:1)*_*_*v*v)/(2*(t?g:m)*_*v),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function a(t){return(Math.exp(t)+Math.exp(-t))/2}function r(t){return o(t)/a(t)}function s(t){return m*(a(b)/a(b+y*t))}function l(t){return m*(a(b)*r(b+y*t)-o(b))/_}function u(t){return 1-Math.pow(1-t,1.5)}function d(){var t=(Date.now()-w)/C,e=u(t)*x;t<=1?(this._flyToFrame=S.Util.requestAnimFrame(d,this),this._move(this.unproject(c.add(h.subtract(c).multiplyBy(l(e)/v)),p),this.getScaleZoom(m/s(e),p),{flyTo:!0})):this._move(n,i)._moveEnd(!0)}if(!1===(t=t||{}).animate||!S.Browser.any3d)return this.setView(n,i,t);this._stop();var c=this.project(this.getCenter()),h=this.project(n),f=this.getSize(),p=this._zoom;n=S.latLng(n),i=i===L?p:i;var m=Math.max(f.x,f.y),g=m*this.getZoomScale(p,i),v=h.distanceTo(c)||1,y=1.42,_=y*y,b=e(0),w=Date.now(),x=(e(1)-b)/y,C=t.duration?1e3*t.duration:1e3*x*.8;return this._moveStart(!0),d.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=S.latLngBounds(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,S.latLngBounds(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=S.extend({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),i=e.divideBy(2).round(),o=n.divideBy(2).round(),a=i.subtract(o);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(S.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=S.extend({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=S.bind(this._handleGeolocationResponse,this),n=S.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new S.LatLng(e,n),o=i.toBounds(t.coords.accuracy),a=this._locateOptions;if(a.setView){var r=this.getBoundsZoom(o);this.setView(i,a.maxZoom?Math.min(r,a.maxZoom):r)}var s={latlng:i,bounds:o,timestamp:t.timestamp};for(var l in t.coords)"number"==typeof t.coords[l]&&(s[l]=t.coords[l]);this.fire("locationfound",s)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=L,this._containerId=L}for(var t in S.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();return this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),i=S.DomUtil.create("div",n,e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new S.LatLngBounds(e,n)},getMinZoom:function(){return this.options.minZoom===L?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===L?this._layersMaxZoom===L?Infinity:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=S.latLngBounds(t),n=S.point(n||[0,0]);var i=this.getZoom()||0,o=this.getMinZoom(),a=this.getMaxZoom(),r=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(n),u=this.project(s,i).subtract(this.project(r,i)),d=S.Browser.any3d?this.options.zoomSnap:1,c=Math.min(l.x/u.x,l.y/u.y);return i=this.getScaleZoom(c,i),d&&(i=Math.round(i/(d/100))*(d/100),i=e?Math.ceil(i/d)*d:Math.floor(i/d)*d),Math.max(o,Math.min(a,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new S.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new S.Bounds(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===L?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=e===L?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=e===L?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?Infinity:i},project:function(t,e){return e=e===L?this._zoom:e,this.options.crs.latLngToPoint(S.latLng(t),e)},unproject:function(t,e){return e=e===L?this._zoom:e,this.options.crs.pointToLatLng(S.point(t),e)},layerPointToLatLng:function(t){var e=S.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(S.latLng(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(S.latLng(t))},distance:function(t,e){return this.options.crs.distance(S.latLng(t),S.latLng(e))},containerPointToLayerPoint:function(t){return S.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return S.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(S.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(S.latLng(t)))},mouseEventToContainerPoint:function(t){return S.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=S.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");S.DomEvent.addListener(e,"scroll",this._onScroll,this),this._containerId=S.Util.stamp(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&S.Browser.any3d,S.DomUtil.addClass(t,"leaflet-container"+(S.Browser.touch?" leaflet-touch":"")+(S.Browser.retina?" leaflet-retina":"")+(S.Browser.ielt9?" leaflet-oldie":"")+(S.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=S.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),S.DomUtil.setPosition(this._mapPane,new S.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(S.DomUtil.addClass(t.markerPane,"leaflet-zoom-hide"),S.DomUtil.addClass(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){S.DomUtil.setPosition(this._mapPane,new S.Point(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,e,n){e===L&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return S.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){S.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(S.DomEvent){this._targets={},this._targets[S.stamp(this._container)]=this;var e=t?"off":"on";S.DomEvent[e](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&S.DomEvent[e](s,"resize",this._onResize,this),S.Browser.any3d&&this.options.transform3DLimit&&this[e]("moveend",this._onMoveEnd)}},_onResize:function(){S.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=S.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],o="mouseout"===e||"mouseover"===e,a=t.target||t.srcElement,r=!1;a;){if((n=this._targets[S.stamp(a)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){r=!0;break}if(n&&n.listens(e,!0)){if(o&&!S.DomEvent._isExternalTarget(a,t))break;if(i.push(n),o)break}if(a===this._container)break;a=a.parentNode}return i.length||r||o||!S.DomEvent._isExternalTarget(a,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!S.DomEvent._skipped(t)){var e="keypress"===t.type&&13===t.keyCode?"click":t.type;"mousedown"===e&&S.DomUtil.preventOutline(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_fireDOMEvent:function(t,e,n){if("click"===t.type){var i=S.Util.extend({},t);i.type="preclick",this._fireDOMEvent(i,i.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e))).length){var o=n[0];"contextmenu"===e&&o.listens(e,!0)&&S.DomEvent.preventDefault(t);var a={originalEvent:t};if("keypress"!==t.type){var r=o instanceof S.Marker;a.containerPoint=r?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=r?o.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var s=0;s<n.length;s++)if(n[s].fire(e,a,!0),a.originalEvent._stopped||n[s].options.nonBubblingEvents&&-1!==S.Util.indexOf(n[s].options.nonBubblingEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return S.DomUtil.getPosition(this._mapPane)||new S.Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&e!==L?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return S.bounds([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),o=this.getSize().divideBy(2),a=new S.Bounds(i.subtract(o),i.add(o)),r=this._getBoundsOffset(a,n,e);return r.round().equals([0,0])?t:this.unproject(i.add(r),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new S.Bounds(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=S.bounds(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),o=i.min.subtract(t.min),a=i.max.subtract(t.max),r=this._rebound(o.x,-a.x),s=this._rebound(o.y,-a.y);return new S.Point(r,s)},_rebound:function(t,e){return 0<t+e?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=S.Browser.any3d?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){S.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)},_createAnimProxy:function(){var i=this._proxy=S.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(t){var e=S.DomUtil.TRANSFORM,n=i.style[e];S.DomUtil.setTransform(i,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===i.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();S.DomUtil.setTransform(i,this.project(t,e),this.getZoomScale(e,1))},this)},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(o))&&(S.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,n,i){n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,S.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),setTimeout(S.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(S.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),S.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}),S.map=function(t,e){return new S.Map(t,e)},S.Layer=S.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[],attribution:null},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[S.stamp(t)]=this},removeInteractiveTarget:function(t){return delete this._map._targets[S.stamp(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}}),S.Map.include({addLayer:function(t){var e=S.stamp(t);return this._layers[e]||((this._layers[e]=t)._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=S.stamp(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return!!t&&S.stamp(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?S.Util.isArray(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[S.stamp(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=S.stamp(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=Infinity,e=-Infinity,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var o=this._zoomBoundLayers[i].options;t=o.minZoom===L?t:Math.min(t,o.minZoom),e=o.maxZoom===L?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-Infinity?L:e,this._layersMinZoom=t===Infinity?L:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===L&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===L&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var C,k="_leaflet_events";S.DomEvent={on:function(t,e,n,i){if("object"==typeof e)for(var o in e)this._on(t,o,e[o],n);else for(var a=0,r=(e=S.Util.splitWords(e)).length;a<r;a++)this._on(t,e[a],n,i);return this},off:function(t,e,n,i){if("object"==typeof e)for(var o in e)this._off(t,o,e[o],n);else for(var a=0,r=(e=S.Util.splitWords(e)).length;a<r;a++)this._off(t,e[a],n,i);return this},_on:function(e,t,n,i){var o=t+S.stamp(n)+(i?"_"+S.stamp(i):"");if(e[k]&&e[k][o])return this;var a=function(t){return n.call(i||e,t||s.event)},r=a;return S.Browser.pointer&&0===t.indexOf("touch")?this.addPointerListener(e,t,a,o):S.Browser.touch&&"dblclick"===t&&this.addDoubleTapListener?this.addDoubleTapListener(e,a,o):"addEventListener"in e?"mousewheel"===t?e.addEventListener("onwheel"in e?"wheel":"mousewheel",a,!1):"mouseenter"===t||"mouseleave"===t?(a=function(t){t=t||s.event,S.DomEvent._isExternalTarget(e,t)&&r(t)},e.addEventListener("mouseenter"===t?"mouseover":"mouseout",a,!1)):("click"===t&&S.Browser.android&&(a=function(t){return S.DomEvent._filterClick(t,r)}),e.addEventListener(t,a,!1)):"attachEvent"in e&&e.attachEvent("on"+t,a),e[k]=e[k]||{},e[k][o]=a,this},_off:function(t,e,n,i){var o=e+S.stamp(n)+(i?"_"+S.stamp(i):""),a=t[k]&&t[k][o];return a&&(S.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,o):S.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,o):"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",a,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[k][o]=null),this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,S.DomEvent._skipped(t),this},disableScrollPropagation:function(t){return S.DomEvent.on(t,"mousewheel",S.DomEvent.stopPropagation)},disableClickPropagation:function(t){var e=S.DomEvent.stopPropagation;return S.DomEvent.on(t,S.Draggable.START.join(" "),e),S.DomEvent.on(t,{click:S.DomEvent._fakeStop,dblclick:e})},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return S.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new S.Point(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new S.Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},_wheelPxFactor:S.Browser.win&&S.Browser.chrome?2:S.Browser.gecko?s.devicePixelRatio:1,getWheelDelta:function(t){return S.Browser.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/S.DomEvent._wheelPxFactor:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(t){S.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_isExternalTarget:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(i){return!1}return n!==t},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,i=S.DomEvent._lastClick&&n-S.DomEvent._lastClick;i&&100<i&&i<500||t.target._simulatedClick&&!t._simulated?S.DomEvent.stop(t):(S.DomEvent._lastClick=n,e(t))}},S.DomEvent.addListener=S.DomEvent.on,S.DomEvent.removeListener=S.DomEvent.off,S.PosAnimation=S.Evented.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=S.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=S.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),S.DomUtil.setPosition(this._el,n),this.fire("step")},_complete:function(){S.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),S.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:S.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,o=this.R_MINOR/n,a=Math.sqrt(1-o*o),r=a*Math.sin(i),s=Math.tan(Math.PI/4-i/2)/Math.pow((1-r)/(1+r),a/2);return i=-n*Math.log(Math.max(s,1e-10)),new S.Point(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,o=this.R_MINOR/i,a=Math.sqrt(1-o*o),r=Math.exp(-t.y/i),s=Math.PI/2-2*Math.atan(r),l=0,u=.1;l<15&&1e-7<Math.abs(u);l++)e=a*Math.sin(s),e=Math.pow((1-e)/(1+e),a/2),s+=u=Math.PI/2-2*Math.atan(r*e)-s;return new S.LatLng(s*n,t.x*n/i)}},S.CRS.EPSG3395=S.extend({},S.CRS.Earth,{code:"EPSG:3395",projection:S.Projection.Mercator,transformation:(C=.5/(Math.PI*S.Projection.Mercator.R),new S.Transformation(C,.5,-C,.5))}),S.GridLayer=S.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:S.Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:L,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){S.setOptions(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),S.DomUtil.remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(S.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(S.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=S.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return g.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof S.Point?t:new S.Point(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==L&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-Infinity,Infinity),o=0,a=n.length;o<a;o++)e=n[o].style.zIndex,n[o]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!S.Browser.ielt9){S.DomUtil.setOpacity(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var o=this._tiles[i];if(o.current&&o.loaded){var a=Math.min(1,(t-o.loaded)/200);S.DomUtil.setOpacity(o.el,a),a<1?e=!0:(o.active&&(n=!0),o.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(S.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=S.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=S.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t===L)return L;for(var n in this._levels)this._levels[n].el.children.length||n===t?this._levels[n].el.style.zIndex=e-Math.abs(t-n):(S.DomUtil.remove(this._levels[n].el),this._removeTilesAtZoom(n),delete this._levels[n]);var i=this._levels[t],o=this._map;return i||((i=this._levels[t]={}).el=S.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,o.getCenter(),o.getZoom()),S.Util.falseFn(
i.el.offsetWidth)),this._level=i},_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)S.DomUtil.remove(this._levels[t].el),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,e,n,i){var o=Math.floor(t/2),a=Math.floor(e/2),r=n-1,s=new S.Point(+o,+a);s.z=+r;var l=this._tileCoordsToKey(s),u=this._tiles[l];return u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),i<r&&this._retainParent(o,a,r,i))},_retainChildren:function(t,e,n,i){for(var o=2*t;o<2*t+2;o++)for(var a=2*e;a<2*e+2;a++){var r=new S.Point(o,a);r.z=n+1;var s=this._tileCoordsToKey(r),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(o,a,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_setView:function(t,e,n,i){var o=Math.round(e);(this.options.maxZoom!==L&&o>this.options.maxZoom||this.options.minZoom!==L&&o<this.options.minZoom)&&(o=L);var a=this.options.updateWhenZooming&&o!==this._tileZoom;i&&!a||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),o!==L&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),o=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();S.Browser.any3d?S.DomUtil.setTransform(t.el,o,i):S.DomUtil.setPosition(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),o=e.project(t,this._tileZoom).floor(),a=e.getSize().divideBy(2*i);return new S.Bounds(o.subtract(a),o.add(a))},_update:function(t){var e=this._map;if(e){var n=e.getZoom();if(t===L&&(t=e.getCenter()),this._tileZoom!==L){var i=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(i),a=o.getCenter(),r=[],s=this.options.keepBuffer,l=new S.Bounds(o.getBottomLeft().subtract([s,-s]),o.getTopRight().add([s,-s]));for(var u in this._tiles){var d=this._tiles[u].coords;d.z===this._tileZoom&&l.contains(S.point(d.x,d.y))||(this._tiles[u].current=!1)}if(1<Math.abs(n-this._tileZoom))this._setView(t,n);else{for(var c=o.min.y;c<=o.max.y;c++)for(var h=o.min.x;h<=o.max.x;h++){var f=new S.Point(h,c);if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)];p?p.current=!0:r.push(f)}}if(r.sort(function(t,e){return t.distanceTo(a)-e.distanceTo(a)}),0!==r.length){this._loading||(this._loading=!0,this.fire("loading"));var m=g.createDocumentFragment();for(h=0;h<r.length;h++)this._addTile(r[h],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return S.latLngBounds(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),o=i.add(n),a=e.unproject(i,t.z),r=e.unproject(o,t.z);return this.options.noWrap||(a=e.wrapLatLng(a),r=e.wrapLatLng(r)),new S.LatLngBounds(a,r)},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new S.Point(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(S.DomUtil.remove(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){S.DomUtil.addClass(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=S.Util.falseFn,t.onmousemove=S.Util.falseFn,S.Browser.ielt9&&this.options.opacity<1&&S.DomUtil.setOpacity(t,this.options.opacity),S.Browser.android&&!S.Browser.android23&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),S.bind(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&S.Util.requestAnimFrame(S.bind(this._tileReady,this,t,null,o)),S.DomUtil.setPosition(o,n),this._tiles[i]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){if(this._map){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(S.DomUtil.setOpacity(n.el,0),S.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=S.Util.requestAnimFrame(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(S.DomUtil.addClass(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),S.Browser.ielt9||!this._map._fadeAnimated?S.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(S.bind(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new S.Point(this._wrapX?S.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?S.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new S.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),S.gridLayer=function(t){return new S.GridLayer(t)},S.TileLayer=S.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,minNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=S.setOptions(this,e)).detectRetina&&S.Browser.retina&&0<e.maxZoom&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),S.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=g.createElement("img");return S.DomEvent.on(n,"load",S.bind(this._tileOnLoad,this,e,n)),S.DomEvent.on(n,"error",S.bind(this._tileOnError,this,e,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:S.Browser.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return S.Util.template(this._url,S.extend(e,this.options))},_tileOnLoad:function(t,e){S.Browser.ielt9?setTimeout(S.bind(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&(e.src=i),t(n,e)},getTileSize:function(){var t=this._map,e=S.GridLayer.prototype.getTileSize.call(this),n=this._tileZoom+this.options.zoomOffset,i=this.options.minNativeZoom,o=this.options.maxNativeZoom;return null!==i&&n<i?e.divideBy(t.getZoomScale(i,n)).round():null!==o&&o<n?e.divideBy(t.getZoomScale(o,n)).round():e},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,i=this.options.zoomOffset,o=this.options.minNativeZoom,a=this.options.maxNativeZoom;return n&&(t=e-t),t+=i,null!==o&&t<o?o:null!==a&&a<t?a:t},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=S.Util.falseFn,e.onerror=S.Util.falseFn,e.complete||(e.src=S.Util.emptyImageUrl,S.DomUtil.remove(e)))}}),S.tileLayer=function(t,e){return new S.TileLayer(t,e)},S.TileLayer.WMS=S.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=S.extend({},this.defaultWmsParams);for(var i in e)i in this.options||(n[i]=e[i]);e=S.setOptions(this,e),n.width=n.height=e.tileSize*(e.detectRetina&&S.Browser.retina?2:1),this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[e]=this._crs.code,S.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),n=this._crs.project(e.getNorthWest()),i=this._crs.project(e.getSouthEast()),o=(1.3<=this._wmsVersion&&this._crs===S.CRS.EPSG4326?[i.y,n.x,n.y,i.x]:[n.x,i.y,i.x,n.y]).join(","),a=S.TileLayer.prototype.getTileUrl.call(this,t);return a+S.Util.getParamString(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(t,e){return S.extend(this.wmsParams,t),e||this.redraw(),this}}),S.tileLayer.wms=function(t,e){return new S.TileLayer.WMS(t,e)},S.ImageOverlay=S.Layer.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1},initialize:function(t,e,n){this._url=t,this._bounds=S.latLngBounds(e),S.setOptions(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(S.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){S.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&S.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&S.DomUtil.toBack(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=t,this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=S.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));t.onselectstart=S.Util.falseFn,t.onmousemove=S.Util.falseFn,t.onload=S.bind(this.fire,this,"load"),this.options.crossOrigin&&(t.crossOrigin=""),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;S.DomUtil.setTransform(this._image,n,e)},_reset:function(){var t=this._image,e=new S.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();S.DomUtil.setPosition(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){S.DomUtil.setOpacity(this._image,this.options.opacity)}}),S.imageOverlay=function(t,e,n){return new S.ImageOverlay(t,e,n)},S.Icon=S.Class.extend({initialize:function(t){S.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var o=S.point(i),a=S.point("shadow"===e&&n.shadowAnchor||n.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),a&&(t.style.marginLeft=-a.x+"px",t.style.marginTop=-a.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||g.createElement("img")).src=t,e},_getIconUrl:function(t){return S.Browser.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),S.icon=function(t){return new S.Icon(t)},S.Icon.Default=S.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return S.Icon.Default.imagePath||(S.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||S.Icon.Default.imagePath)+S.Icon.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=S.DomUtil.create("div","leaflet-default-icon-path",g.body),e=S.DomUtil.getStyle(t,"background-image")||S.DomUtil.getStyle(t,"backgroundImage");return g.body.removeChild(t),0===e.indexOf("url")?e.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}}),S.Marker=S.Layer.extend({options:{icon:new S.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(t,e){S.setOptions(this,e),this._latlng=S.latLng(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=S.latLng(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),t.alt&&(n.alt=t.alt)),S.DomUtil.addClass(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),a=!1;o!==this._shadow&&(this._removeShadow(),a=!0),o&&S.DomUtil.addClass(o,e),this._shadow=o,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&a&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),S.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&S.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(t){S.DomUtil.setPosition(this._icon,t),this._shadow&&S.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(S.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),S.Handler.MarkerDrag)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new S.Handler.MarkerDrag(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;S.DomUtil.setOpacity(this._icon,t),this._shadow&&S.DomUtil.setOpacity(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),S.marker=function(t,e){return new S.Marker(t,e)},S.DivIcon=S.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:g.createElement("div"),n=this.options;if(e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=S.point(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),S.divIcon=function(t){return new S.DivIcon(t)},S.DivOverlay=S.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){S.setOptions(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&S.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&S.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(S.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(S.bind(S.DomUtil.remove,S.DomUtil,this._container),200)):S.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=S.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&S.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&S.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=S.point(this.options.offset),n=this._getAnchor();this._zoomAnimated?S.DomUtil.setPosition(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),S.Popup=S.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){S.DivOverlay.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof S.Path||this._source.on("preclick",S.DomEvent.stopPropagation))},onRemove:function(t){S.DivOverlay.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof S.Path||this._source.off("preclick",S.DomEvent.stopPropagation))},getEvents:function(){var t=S.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=S.DomUtil.create("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var n=this._closeButton=S.DomUtil.create("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",S.DomEvent.on(n,"click",this._onCloseButtonClick,this)}var i=this._wrapper=S.DomUtil.create("div",t+"-content-wrapper",e);this._contentNode=S.DomUtil.create("div",t+"-content",i),S.DomEvent.disableClickPropagation(i).disableScrollPropagation(this._contentNode).on(i,"contextmenu",S.DomEvent.stopPropagation),this._tipContainer=S.DomUtil.create("div",t+"-tip-container",e),this._tip=S.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,o=this.options.maxHeight,a="leaflet-popup-scrolled";o&&o<i?(e.height=o+"px",S.DomUtil.addClass(t,a)):S.DomUtil.removeClass(t,a),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();S.DomUtil.setPosition(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(S.DomUtil.getStyle(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,o=new S.Point(this._containerLeft,-n-this._containerBottom);o._add(S.DomUtil.getPosition(this._container));var a=t.layerPointToContainerPoint(o),r=S.point(this.options.autoPanPadding),s=S.point(this.options.autoPanPaddingTopLeft||r),l=S.point(this.options.autoPanPaddingBottomRight||r),u=t.getSize(),d=0,c=0;a.x+i+l.x>u.x&&(d=a.x+i-u.x+l.x),a.x-d-s.x<0&&(d=a.x-s.x),a.y+n+l.y>u.y&&(c=a.y+n-u.y+l.y),a.y-c-s.y<0&&(c=a.y-s.y),(d||c)&&t.fire("autopanstart").panBy([d,c])}},_onCloseButtonClick:function(t){this._close(),S.DomEvent.stop(t)},_getAnchor:function(){return S.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),S.popup=function(t,e){return new S.Popup(t,e)},S.Map.mergeOptions({closePopupOnClick:!0}),S.Map.include({openPopup:function(t,e,n){return t instanceof S.Popup||(t=new S.Popup(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),S.Layer.include({bindPopup:function(t,e){return t instanceof S.Popup?(S.setOptions(t,e),(this._popup=t)._source=this):(this._popup&&!e||(this._popup=new S.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof S.Layer||(e=t,t=this),t instanceof S.FeatureGroup)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(S.DomEvent.stop(t),e instanceof S.Path?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),S.Tooltip=S.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){S.DivOverlay.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){S.DivOverlay.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=S.DivOverlay.prototype.getEvents.call(this);return S.Browser.touch&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip"+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=S.DomUtil.create("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,i=e.latLngToContainerPoint(e.getCenter()),o=e.layerPointToContainerPoint(t),a=this.options.direction,r=n.offsetWidth,s=n.offsetHeight,l=S.point(this.options.offset),u=this._getAnchor();"top"===a?t=t.add(S.point(-r/2+l.x,-s+l.y+u.y,!0)):"bottom"===a?t=t.subtract(S.point(r/2-l.x,-l.y,!0)):"center"===a?t=t.subtract(S.point(r/2+l.x,s/2-u.y+l.y,!0)):"right"===a||"auto"===a&&o.x<i.x?(a="right",t=t.add(S.point(l.x+u.x,u.y-s/2+l.y,!0))):(a="left",t=t.subtract(S.point(r+u.x-l.x,s/2-u.y-l.y,!0))),S.DomUtil.removeClass(n,"leaflet-tooltip-right"),S.DomUtil.removeClass(n,"leaflet-tooltip-left"),S.DomUtil.removeClass(n,"leaflet-tooltip-top"),S.DomUtil.removeClass(n,"leaflet-tooltip-bottom"),S.DomUtil.addClass(n,"leaflet-tooltip-"+a),S.DomUtil.setPosition(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&S.DomUtil.setOpacity(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return S.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),S.tooltip=function(t,e){return new S.Tooltip(t,e)},S.Map.include({openTooltip:function(t,e,n){return t instanceof S.Tooltip||(t=new S.Tooltip(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),S.Layer.include({bindTooltip:function(t,e){return t instanceof S.Tooltip?(S.setOptions(t,e),(this._tooltip=t)._source=this):(this._tooltip&&!e||(this._tooltip=S.tooltip(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),S.Browser.touch&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof S.Layer||(e=t,t=this),t instanceof S.FeatureGroup)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(S.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(S.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:L)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}}),S.LayerGroup=S.Layer.extend({initialize:function(t){var e,n;if(this._layers={},t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e])},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e])},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return S.stamp(t)}}),S.layerGroup=function(t){return new S.LayerGroup(t)},S.FeatureGroup=S.LayerGroup.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),S.LayerGroup.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),S.LayerGroup.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new S.LatLngBounds;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),S.featureGroup=function(t
){return new S.FeatureGroup(t)},S.Renderer=S.Layer.extend({options:{padding:.1},initialize:function(t){S.setOptions(this,t),S.stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&S.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){S.DomUtil.remove(this._container),this.off("update",this._updatePaths,this)},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=S.DomUtil.getPosition(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),a=this._map.project(this._center,e),r=this._map.project(t,e).subtract(a),s=o.multiplyBy(-n).add(i).add(o).subtract(r);S.Browser.any3d?S.DomUtil.setTransform(this._container,s,n):S.DomUtil.setPosition(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new S.Bounds(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),S.Map.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&S.canvas()||S.svg()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||t===L)return!1;var e=this._paneRenderers[t];return e===L&&(e=S.SVG&&S.svg({pane:t})||S.Canvas&&S.canvas({pane:t}),this._paneRenderers[t]=e),e}}),S.Path=S.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return S.setOptions(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(S.Browser.touch?10:0)}}),S.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),t=this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var n=t.length,i=new(typeof Uint8Array!=L+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,this._simplifyDPStep(t,i,e,0,n-1);var o,a=[];for(o=0;o<n;o++)i[o]&&a.push(t[o]);return a},_simplifyDPStep:function(t,e,n,i,o){var a,r,s,l=0;for(r=i+1;r<=o-1;r++)l<(s=this._sqClosestPointOnSegment(t[r],t[i],t[o],!0))&&(a=r,l=s);n<l&&(e[a]=1,this._simplifyDPStep(t,e,n,i,a),this._simplifyDPStep(t,e,n,a,o))},_reducePoints:function(t,e){for(var n=[t[0]],i=1,o=0,a=t.length;i<a;i++)this._sqDist(t[i],t[o])>e&&(n.push(t[i]),o=i);return o<a-1&&n.push(t[a-1]),n},clipSegment:function(t,e,n,i,o){var a,r,s,l=i?this._lastCode:this._getBitCode(t,n),u=this._getBitCode(e,n);for(this._lastCode=u;;){if(!(l|u))return[t,e];if(l&u)return!1;a=l||u,r=this._getEdgeIntersection(t,e,a,n,o),s=this._getBitCode(r,n),a===l?(t=r,l=s):(e=r,u=s)}},_getEdgeIntersection:function(t,e,n,i,o){var a,r,s=e.x-t.x,l=e.y-t.y,u=i.min,d=i.max;return 8&n?(a=t.x+s*(d.y-t.y)/l,r=d.y):4&n?(a=t.x+s*(u.y-t.y)/l,r=u.y):2&n?(a=d.x,r=t.y+l*(d.x-t.x)/s):1&n&&(a=u.x,r=t.y+l*(u.x-t.x)/s),new S.Point(a,r,o)},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i},_sqClosestPointOnSegment:function(t,e,n,i){var o,a=e.x,r=e.y,s=n.x-a,l=n.y-r,u=s*s+l*l;return 0<u&&(1<(o=((t.x-a)*s+(t.y-r)*l)/u)?(a=n.x,r=n.y):0<o&&(a+=s*o,r+=l*o)),s=t.x-a,l=t.y-r,i?s*s+l*l:new S.Point(a,r)}},S.Polyline=S.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){S.setOptions(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=Infinity,o=null,a=S.LineUtil._sqClosestPointOnSegment,r=0,s=this._parts.length;r<s;r++)for(var l=this._parts[r],u=1,d=l.length;u<d;u++){var c=a(t,e=l[u-1],n=l[u],!0);c<i&&(i=c,o=a(t,e,n))}return o&&(o.distance=Math.sqrt(i)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,a,r,s=this._rings[0],l=s.length;if(!l)return null;for(e=t=0;t<l-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(i=t=0;t<l-1;t++)if(o=s[t],a=s[t+1],e<(i+=n=o.distanceTo(a)))return r=(i-e)/n,this._map.layerPointToLatLng([a.x-r*(a.x-o.x),a.y-r*(a.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=S.latLng(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new S.LatLngBounds,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return S.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=S.Polyline._flat(t),i=0,o=t.length;i<o;i++)n?(e[i]=S.latLng(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new S.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new S.Point(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var i,o,a=t[0]instanceof S.LatLng,r=t.length;if(a){for(o=[],i=0;i<r;i++)o[i]=this._map.latLngToLayerPoint(t[i]),n.extend(o[i]);e.push(o)}else for(i=0;i<r;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,o,a,r,s,l=this._parts;for(i=e=0,o=this._rings.length;e<o;e++)for(n=0,a=(s=this._rings[e]).length;n<a-1;n++)(r=S.LineUtil.clipSegment(s[n],s[n+1],t,n,!0))&&(l[i]=l[i]||[],l[i].push(r[0]),r[1]===s[n+1]&&n!==a-2||(l[i].push(r[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=S.LineUtil.simplify(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),S.polyline=function(t,e){return new S.Polyline(t,e)},S.Polyline._flat=function(t){return!S.Util.isArray(t[0])||"object"!=typeof t[0][0]&&"undefined"!=typeof t[0][0]},S.PolyUtil={},S.PolyUtil.clipPolygon=function(t,e,n){var i,o,a,r,s,l,u,d,c,h=[1,4,2,8],f=S.LineUtil;for(o=0,u=t.length;o<u;o++)t[o]._code=f._getBitCode(t[o],e);for(r=0;r<4;r++){for(d=h[r],i=[],o=0,a=(u=t.length)-1;o<u;a=o++)s=t[o],l=t[a],s._code&d?l._code&d||((c=f._getEdgeIntersection(l,s,d,e,n))._code=f._getBitCode(c,e),i.push(c)):(l._code&d&&((c=f._getEdgeIntersection(l,s,d,e,n))._code=f._getBitCode(c,e),i.push(c)),i.push(s));t=i}return t},S.Polygon=S.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,a,r,s,l,u=this._rings[0],d=u.length;if(!d)return null;for(a=r=s=0,t=0,e=d-1;t<d;e=t++)n=u[t],i=u[e],o=n.y*i.x-i.y*n.x,r+=(n.x+i.x)*o,s+=(n.y+i.y)*o,a+=3*o;return l=0===a?u[0]:[r/a,s/a],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=S.Polyline.prototype._convertLatLngs.call(this,t),n=e.length;return 2<=n&&e[0]instanceof S.LatLng&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){S.Polyline.prototype._setLatLngs.call(this,t),S.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return S.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new S.Point(e,e);if(t=new S.Bounds(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,o=0,a=this._rings.length;o<a;o++)(i=S.PolyUtil.clipPolygon(this._rings[o],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),S.polygon=function(t,e){return new S.Polygon(t,e)},S.Rectangle=S.Polygon.extend({initialize:function(t,e){S.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=S.latLngBounds(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),S.rectangle=function(t,e){return new S.Rectangle(t,e)},S.CircleMarker=S.Path.extend({options:{fill:!0,radius:10},initialize:function(t,e){S.setOptions(this,e),this._latlng=S.latLng(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=S.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return S.Path.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new S.Bounds(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),S.circleMarker=function(t,e){return new S.CircleMarker(t,e)},S.Circle=S.CircleMarker.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=S.extend({},n,{radius:e})),S.setOptions(this,e),this._latlng=S.latLng(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new S.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:S.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===S.CRS.Earth.distance){var o=Math.PI/180,a=this._mRadius/S.CRS.Earth.R/o,r=n.project([e+a,t]),s=n.project([e-a,t]),l=r.add(s).divideBy(2),u=n.unproject(l).lat,d=Math.acos((Math.cos(a*o)-Math.sin(e*o)*Math.sin(u*o))/(Math.cos(e*o)*Math.cos(u*o)))/o;(isNaN(d)||0===d)&&(d=a/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(d)?0:Math.max(Math.round(l.x-n.project([u,t-d]).x),1),this._radiusY=Math.max(Math.round(l.y-r.y),1)}else{var c=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(c).x}this._updateBounds()}}),S.circle=function(t,e,n){return new S.Circle(t,e,n)},S.SVG=S.Renderer.extend({getEvents:function(){var t=S.Renderer.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=S.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=S.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){S.Renderer.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),S.DomUtil.setPosition(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=S.SVG.create("path");t.options.className&&S.DomUtil.addClass(e,t.options.className),t.options.interactive&&S.DomUtil.addClass(e,"leaflet-interactive"),this._updateStyle(t),this._layers[S.stamp(t)]=t},_addPath:function(t){this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){S.DomUtil.remove(t._path),t.removeInteractiveTarget(t._path),delete this._layers[S.stamp(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,S.SVG.pointsToPath(t._parts,e))},_updateCircle:function(t){var e=t._point,n=t._radius,i="a"+n+","+(t._radiusY||n)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){S.DomUtil.toFront(t._path)},_bringToBack:function(t){S.DomUtil.toBack(t._path)}}),S.extend(S.SVG,{create:function(t){return g.createElementNS("http://www.w3.org/2000/svg",t)},pointsToPath:function(t,e){var n,i,o,a,r,s,l="";for(n=0,o=t.length;n<o;n++){for(i=0,a=(r=t[n]).length;i<a;i++)l+=(i?"L":"M")+(s=r[i]).x+" "+s.y;l+=e?S.Browser.svg?"z":"x":""}return l||"M0 0"}}),S.Browser.svg=!(!g.createElementNS||!S.SVG.create("svg").createSVGRect),S.svg=function(t){return S.Browser.svg||S.Browser.vml?new S.SVG(t):null},S.Browser.vml=!S.Browser.svg&&function(){try{var t=g.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(n){return!1}}(),S.SVG.include(S.Browser.vml?{_initContainer:function(){this._container=S.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(S.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=S.SVG.create("shape");S.DomUtil.addClass(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=S.SVG.create("path"),e.appendChild(t._path),this._updateStyle(t)},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;S.DomUtil.remove(e),t.removeInteractiveTarget(e)},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,o=t._container;o.stroked=!!i.stroke,o.filled=!!i.fill,i.stroke?(e||(e=t._stroke=S.SVG.create("stroke")),o.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=S.Util.isArray(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(o.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=S.SVG.create("fill")),o.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(o.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){S.DomUtil.toFront(t._container)},_bringToBack:function(t){S.DomUtil.toBack(t._container)}}:{}),S.Browser.vml&&(S.SVG.create=function(){try{return g.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return g.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return g.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),S.Canvas=S.Renderer.extend({onAdd:function(){S.Renderer.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=g.createElement("canvas");S.DomEvent.on(t,"mousemove",S.Util.throttle(this._onMouseMove,32,this),this).on(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_updatePaths:function(){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},S.Renderer.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=S.Browser.retina?2:1;S.DomUtil.setPosition(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",S.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_initPath:function(t){this._updateDashArray(t);var e=(this._layers[S.stamp(t)]=t)._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[S.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,n=t.options.dashArray.split(","),i=[];for(e=0;e<n.length;e++)i.push(Number(n[e]));t.options._dashArray=i}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||S.Util.requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(t){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new S.Bounds,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))},_redraw:function(){this._redrawRequest=null,this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,o,a,r=t._parts,s=r.length,l=this._ctx;if(s){for(this._drawnLayers[t._leaflet_id]=t,l.beginPath(),l.setLineDash&&l.setLineDash(t.options&&t.options._dashArray||[]),n=0;n<s;n++){for(i=0,o=r[n].length;i<o;i++)a=r[n][i],l[i?"lineTo":"moveTo"](a.x,a.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=t._radius,o=(t._radiusY||i)/i;this._drawnLayers[t._leaflet_id]=t,1!==o&&(n.save(),n.scale(1,o)),n.beginPath(),n.arc(e.x,e.y/o,i,0,2*Math.PI,!1),1!==o&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(i)&&!this._map._draggableMoved(e)&&(n=e);n&&(S.DomEvent._fakeStop(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(S.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,i,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(S.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order,n=e.next,i=e.prev;n&&((n.prev=i)?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,(this._drawLast.next=e).next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,n=e.next,i=e.prev;i&&((i.next=n)?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}),S.Browser.canvas=!!g.createElement("canvas").getContext,S.canvas=function(t){return S.Browser.canvas?new S.Canvas(t):null},S.Polyline.prototype._containsPoint=function(t,e){var n,i,o,a,r,s,l=this._clickTolerance();if(!this._pxBounds.contains(t))return!1;for(n=0,a=this._parts.length;n<a;n++)for(i=0,o=(r=(s=this._parts[n]).length)-1;i<r;o=i++)if((e||0!==i)&&S.LineUtil.pointToSegmentDistance(t,s[o],s[i])<=l)return!0;return!1},S.Polygon.prototype._containsPoint=function(t){var e,n,i,o,a,r,s,l,u=!1;if(!this._pxBounds.contains(t))return!1;for(o=0,s=this._parts.length;o<s;o++)for(a=0,r=(l=(e=this._parts[o]).length)-1;a<l;r=a++)n=e[a],i=e[r],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(u=!u);return u||S.Polyline.prototype._containsPoint.call(this,t,!0)},S.CircleMarker.prototype._containsPoint=function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()},S.GeoJSON=S.FeatureGroup.extend({initialize:function(t,e){S.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,o=S.Util.isArray(t)?t:t.features;if(o){for(e=0,n=o.length;e<n;e++)((i=o[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var a=this.options;if(a.filter&&!a.filter(t))return this;var r=S.GeoJSON.geometryToLayer(t,a);return r?(r.feature=S.GeoJSON.asFeature(t),r.defaultOptions=r.options,this.resetStyle(r),a.onEachFeature&&a.onEachFeature(t,r),this.addLayer(r)):this},resetStyle:function(t){return t.options=S.Util.extend({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),S.extend(S.GeoJSON,{geometryToLayer:function(t,e){var n,i,o,a,r="Feature"===t.type?t.geometry:t,s=r?r.coordinates:null,l=[],u=e&&e.pointToLayer,d=e&&e.coordsToLatLng||this.coordsToLatLng;if(!s&&!r)return null;switch(r.type){case"Point":return n=d(s),u?u(t,n):new S.Marker(n);case"MultiPoint":for(o=0,a=s.length;o<a;o++)n=d(s[o]),l.push(u?u(t,n):new S.Marker(n));return new S.FeatureGroup(l);case"LineString":case"MultiLineString":return i=this.coordsToLatLngs(s,"LineString"===r.type?0:1,d),new S.Polyline(i,e);case"Polygon":case"MultiPolygon":return i=this.coordsToLatLngs(s,"Polygon"===r.type?1:2,d),new S.Polygon(i,e);case"GeometryCollection":for(o=0,a=r.geometries.length;o<a;o++){var c=this.geometryToLayer({geometry:r.geometries[o],type:"Feature",properties:t.properties},e);c&&l.push(c)}return new S.FeatureGroup(l);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new S.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,n){for(var i,o=[],a=0,r=t.length;a<r;a++)i=e?this.coordsToLatLngs(t[a],e-1,n):(n||this.coordsToLatLng)(t[a]),o.push(i);return o},latLngToCoords:function(t){return t.alt!==L?[t.lng,t.lat,t.alt]:[t.lng,t.lat]},latLngsToCoords:function(t,e,n){for(var i=[],o=0,a=t.length;o<a;o++)i.push(e?S.GeoJSON.latLngsToCoords(t[o],e-1,n):S.GeoJSON.latLngToCoords(t[o]));return!e&&n&&i.push(i[0]),i},getFeature:function(t,e){return t.feature?S.extend({},t.feature,{geometry:e}):S.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var D={toGeoJSON:function(){return S.GeoJSON.getFeature(this,{type:"Point",coordinates:S.GeoJSON.latLngToCoords(this.getLatLng())})}};S.Marker.include(D),S.Circle.include(D),S.CircleMarker.include(D),S.Polyline.prototype.toGeoJSON=function(){var t=!S.Polyline._flat(this._latlngs),e=S.GeoJSON.latLngsToCoords(this._latlngs,t?1:0);return S.GeoJSON.getFeature(this,{type:(t?"Multi":"")+"LineString",coordinates:e})},S.Polygon.prototype.toGeoJSON=function(){var t=!S.Polyline._flat(this._latlngs),e=t&&!S.Polyline._flat(this._latlngs[0]),n=S.GeoJSON.latLngsToCoords(this._latlngs,e?2:t?1:0,!0);return t||(n=[n]),S.GeoJSON.getFeature(this,{type:(e?"Multi":"")+"Polygon",coordinates:n})},S.LayerGroup.include({toMultiPoint:function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),S.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint();var n="GeometryCollection"===t,i=[];return this.eachLayer(function(t){if(t.toGeoJSON){var e=t.toGeoJSON();i.push(n?e.geometry:S.GeoJSON.asFeature(e))}}),n?S.GeoJSON.getFeature(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}}),S.geoJSON=function(t,e){return new S.GeoJSON(t,e)},S.geoJson=S.geoJSON,S.Draggable=S.Evented.extend({options:{clickTolerance:3},statics:{START:S.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e,n){this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(S.DomEvent.on(this._dragStartTarget,S.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(S.Draggable._dragging===this&&this.finishDrag(),S.DomEvent.off(this._dragStartTarget,S.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!S.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(S.Draggable._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||((S.Draggable._dragging=this)._preventOutline&&S.DomUtil.preventOutline(this._element),S.DomUtil.disableImageDrag(),S.DomUtil.disableTextSelection(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new S.Point(e.clientX,e.clientY),S.DomEvent.on(g,S.Draggable.MOVE[t.type],this._onMove,this).on(g,S.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&1<t.touches.length)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new S.Point(e.clientX,e.clientY).subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(S.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=S.DomUtil.getPosition(this._element).subtract(n),S.DomUtil.addClass(g.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,s.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),S.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,S.Util.cancelAnimFrame(this._animRequest),this._lastEvent=t,this._animRequest=S.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),S.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in S.DomUtil.removeClass(g.body,"leaflet-dragging"),this._lastTarget&&(S.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),S.Draggable.MOVE)S.DomEvent.off(g,S.Draggable.MOVE[t],this._onMove,this).off(g,S.Draggable.END[t],this._onUp,this);S.DomUtil.enableImageDrag(),S.DomUtil.enableTextSelection(),this._moved&&this._moving&&(S.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,S.Draggable._dragging=!1}}),S.Handler=S.Class.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}}),S.Map.mergeOptions({dragging:!0,inertia:!S.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),S.Map.Drag=S.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new S.Draggable(t._mapPane,t._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}S.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){S.DomUtil.removeClass(this._map._container,"leaflet-grab"),S.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var t=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=S.latLngBounds(this._map.options.maxBounds);this._offsetLimit=S.bounds(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),50<e-this._times[0]&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),
e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-e+n)%t+e-n,a=(i+e+n)%t-e-n,r=Math.abs(o+n)<Math.abs(a+n)?o:a;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{var o=this._lastPos.subtract(this._positions[0]),a=(this._lastTime-this._times[0])/1e3,r=n.easeLinearity,s=o.multiplyBy(r/a),l=s.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,l),d=s.multiplyBy(u/l),c=u/(n.inertiaDeceleration*r),h=d.multiplyBy(-c/2).round();h.x||h.y?(h=e._limitOffset(h,e.options.maxBounds),S.Util.requestAnimFrame(function(){e.panBy(h,{duration:c,easeLinearity:r,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}}),S.Map.addInitHook("addHandler","dragging",S.Map.Drag),S.Map.mergeOptions({doubleClickZoom:!0}),S.Map.DoubleClickZoom=S.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,o=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}}),S.Map.addInitHook("addHandler","doubleClickZoom",S.Map.DoubleClickZoom),S.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),S.Map.ScrollWheelZoom=S.Handler.extend({addHooks:function(){S.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){S.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=S.DomEvent.getWheelDelta(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(S.bind(this._performZoom,this),i),S.DomEvent.stop(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,a=n?Math.ceil(o/n)*n:o,r=t._limitZoom(e+(0<this._delta?a:-a))-e;this._delta=0,this._startTime=null,r&&("center"===t.options.scrollWheelZoom?t.setZoom(e+r):t.setZoomAround(this._lastMousePos,e+r))}}),S.Map.addInitHook("addHandler","scrollWheelZoom",S.Map.ScrollWheelZoom),S.extend(S.DomEvent,{_touchstart:S.Browser.msPointer?"MSPointerDown":S.Browser.pointer?"pointerdown":"touchstart",_touchend:S.Browser.msPointer?"MSPointerUp":S.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,i,e){function n(t){if(!(1<(S.Browser.pointer?S.DomEvent._pointersCount:t.touches.length))){var e=Date.now(),n=e-(a||e);r=t.touches?t.touches[0]:t,s=0<n&&n<=l,a=e}}function o(){if(s&&!r.cancelBubble){if(S.Browser.pointer){var t,e,n={};for(e in r)t=r[e],n[e]=t&&t.bind?t.bind(r):t;r=n}r.type="dblclick",i(r),a=null}}var a,r,s=!1,l=250,u="_leaflet_",d=this._touchstart,c=this._touchend;return t[u+d+e]=n,t[u+c+e]=o,t[u+"dblclick"+e]=i,t.addEventListener(d,n,!1),t.addEventListener(c,o,!1),S.Browser.edge||t.addEventListener("dblclick",i,!1),this},removeDoubleTapListener:function(t,e){var n="_leaflet_",i=t[n+this._touchstart+e],o=t[n+this._touchend+e],a=t[n+"dblclick"+e];return t.removeEventListener(this._touchstart,i,!1),t.removeEventListener(this._touchend,o,!1),S.Browser.edge||t.removeEventListener("dblclick",a,!1),this}}),S.extend(S.DomEvent,{POINTER_DOWN:S.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:S.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:S.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:S.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(t,e,n,i){return"touchstart"===e?this._addPointerStart(t,n,i):"touchmove"===e?this._addPointerMove(t,n,i):"touchend"===e&&this._addPointerEnd(t,n,i),this},removePointerListener:function(t,e,n){var i=t["_leaflet_"+e+n];return"touchstart"===e?t.removeEventListener(this.POINTER_DOWN,i,!1):"touchmove"===e?t.removeEventListener(this.POINTER_MOVE,i,!1):"touchend"===e&&(t.removeEventListener(this.POINTER_UP,i,!1),t.removeEventListener(this.POINTER_CANCEL,i,!1)),this},_addPointerStart:function(t,e,n){var i=S.bind(function(t){if("mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(t.target.tagName)<0))return;S.DomEvent.preventDefault(t)}this._handlePointer(t,e)},this);if(t["_leaflet_touchstart"+n]=i,t.addEventListener(this.POINTER_DOWN,i,!1),!this._pointerDocListener){var o=S.bind(this._globalPointerUp,this);g.documentElement.addEventListener(this.POINTER_DOWN,S.bind(this._globalPointerDown,this),!0),g.documentElement.addEventListener(this.POINTER_MOVE,S.bind(this._globalPointerMove,this),!0),g.documentElement.addEventListener(this.POINTER_UP,o,!0),g.documentElement.addEventListener(this.POINTER_CANCEL,o,!0),this._pointerDocListener=!0}},_globalPointerDown:function(t){this._pointers[t.pointerId]=t,this._pointersCount++},_globalPointerMove:function(t){this._pointers[t.pointerId]&&(this._pointers[t.pointerId]=t)},_globalPointerUp:function(t){delete this._pointers[t.pointerId],this._pointersCount--},_handlePointer:function(t,e){for(var n in t.touches=[],this._pointers)t.touches.push(this._pointers[n]);t.changedTouches=[t],e(t)},_addPointerMove:function(t,e,n){var i=S.bind(function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&this._handlePointer(t,e)},this);t["_leaflet_touchmove"+n]=i,t.addEventListener(this.POINTER_MOVE,i,!1)},_addPointerEnd:function(t,e,n){var i=S.bind(function(t){this._handlePointer(t,e)},this);t["_leaflet_touchend"+n]=i,t.addEventListener(this.POINTER_UP,i,!1),t.addEventListener(this.POINTER_CANCEL,i,!1)}}),S.Map.mergeOptions({touchZoom:S.Browser.touch&&!S.Browser.android23,bounceAtZoomLimits:!0}),S.Map.TouchZoom=S.Handler.extend({addHooks:function(){S.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),S.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){S.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),S.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),S.DomEvent.on(g,"touchmove",this._onTouchMove,this).on(g,"touchend",this._onTouchEnd,this),S.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&1<o)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0),this._moved=!0),S.Util.cancelAnimFrame(this._animRequest);var r=S.bind(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=S.Util.requestAnimFrame(r,this,!0),S.DomEvent.preventDefault(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,S.Util.cancelAnimFrame(this._animRequest),S.DomEvent.off(g,"touchmove",this._onTouchMove).off(g,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}}),S.Map.addInitHook("addHandler","touchZoom",S.Map.TouchZoom),S.Map.mergeOptions({tap:!0,tapTolerance:15}),S.Map.Tap=S.Handler.extend({addHooks:function(){S.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){S.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(S.DomEvent.preventDefault(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new S.Point(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&S.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(S.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),S.DomEvent.on(g,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),S.DomEvent.off(g,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&S.DomUtil.removeClass(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new S.Point(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=g.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,s,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}),S.Browser.touch&&!S.Browser.pointer&&S.Map.addInitHook("addHandler","tap",S.Map.Tap),S.Map.mergeOptions({boxZoom:!0}),S.Map.BoxZoom=S.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){S.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){S.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._resetState(),S.DomUtil.disableTextSelection(),S.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),S.DomEvent.on(g,{contextmenu:S.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=S.DomUtil.create("div","leaflet-zoom-box",this._container),S.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new S.Bounds(this._point,this._startPoint),n=e.getSize();S.DomUtil.setPosition(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(S.DomUtil.remove(this._box),S.DomUtil.removeClass(this._container,"leaflet-crosshair")),S.DomUtil.enableTextSelection(),S.DomUtil.enableImageDrag(),S.DomEvent.off(g,{contextmenu:S.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){setTimeout(S.bind(this._resetState,this),0);var e=new S.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),S.Map.addInitHook("addHandler","boxZoom",S.Map.BoxZoom),S.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),S.Map.Keyboard=S.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),S.DomEvent.on(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),S.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=g.body,e=g.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),s.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;e<n;e++)i[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;e<n;e++)i[o.right[e]]=[t,0];for(e=0,n=o.down.length;e<n;e++)i[o.down[e]]=[0,t];for(e=0,n=o.up.length;e<n;e++)i[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;e<n;e++)i[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;e<n;e++)i[o.zoomOut[e]]=-t},_addHooks:function(){S.DomEvent.on(g,"keydown",this._onKeyDown,this)},_removeHooks:function(){S.DomEvent.off(g,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;e=this._panKeys[n],t.shiftKey&&(e=S.point(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n)return;i.closePopup()}S.DomEvent.stop(t)}}}),S.Map.addInitHook("addHandler","keyboard",S.Map.Keyboard),S.Handler.MarkerDrag=S.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new S.Draggable(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),S.DomUtil.addClass(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&S.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,n=e._shadow,i=S.DomUtil.getPosition(e._icon),o=e._map.layerPointToLatLng(i);n&&S.DomUtil.setPosition(n,i),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),S.Control=S.Class.extend({options:{position:"topright"},initialize:function(t){S.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return S.DomUtil.addClass(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},remove:function(){return this._map&&(S.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}}),S.control=function(t){return new S.Control(t)},S.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,e){var n=o+t+" "+o+e;i[t+e]=S.DomUtil.create("div",n,a)}var i=this._controlCorners={},o="leaflet-",a=this._controlContainer=S.DomUtil.create("div",o+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){S.DomUtil.remove(this._controlContainer)}}),S.Control.Zoom=S.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=S.DomUtil.create("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,o){var a=S.DomUtil.create("a",n,i);return a.innerHTML=t,a.href="#",a.title=e,a.setAttribute("role","button"),a.setAttribute("aria-label",e),S.DomEvent.on(a,"mousedown dblclick",S.DomEvent.stopPropagation).on(a,"click",S.DomEvent.stop).on(a,"click",o,this).on(a,"click",this._refocusOnMap,this),a},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";S.DomUtil.removeClass(this._zoomInButton,e),S.DomUtil.removeClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&S.DomUtil.addClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&S.DomUtil.addClass(this._zoomInButton,e)}}),S.Map.mergeOptions({zoomControl:!0}),S.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new S.Control.Zoom,this.addControl(this.zoomControl))}),S.control.zoom=function(t){return new S.Control.Zoom(t)},S.Control.Attribution=S.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){S.setOptions(this,t),this._attributions={}},onAdd:function(t){for(var e in(t.attributionControl=this)._container=S.DomUtil.create("div","leaflet-control-attribution"),S.DomEvent&&S.DomEvent.disableClickPropagation(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}}),S.Map.mergeOptions({attributionControl:!0}),S.Map.addInitHook(function(){this.options.attributionControl&&(new S.Control.Attribution).addTo(this)}),S.control.attribution=function(t){return new S.Control.Attribution(t)},S.Control.Scale=S.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=S.DomUtil.create("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=S.DomUtil.create("div",e,n)),t.imperial&&(this._iScale=S.DomUtil.create("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,o=3.2808399*t;5280<o?(e=o/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(o),this._updateScale(this._iScale,i+" ft",i/o))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=10<=n?10:5<=n?5:3<=n?3:2<=n?2:1)}}),S.control.scale=function(t){return new S.Control.Scale(t)},S.Control.Layers=S.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in S.setOptions(this,n),this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){return this._initLayout(),this._update(),(this._map=t).on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(S.stamp(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){S.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(S.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):S.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return S.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=S.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),S.DomEvent.disableClickPropagation(e),S.Browser.touch||S.DomEvent.disableScrollPropagation(e);var n=this._form=S.DomUtil.create("form",t+"-list");S.Browser.android||S.DomEvent.on(e,{mouseenter:this.expand,mouseleave:this.collapse},this);var i=this._layersLink=S.DomUtil.create("a",t+"-toggle",e);i.href="#",i.title="Layers",S.Browser.touch?S.DomEvent.on(i,"click",S.DomEvent.stop).on(i,"click",this.expand,this):S.DomEvent.on(i,"focus",this.expand,this),S.DomEvent.on(n,"click",function(){setTimeout(S.bind(this._onInputClick,this),0)},this),this._map.on("click",this.collapse,this),this.options.collapsed||this.expand(),this._baseLayersList=S.DomUtil.create("div",t+"-base",n),this._separator=S.DomUtil.create("div",t+"-separator",n),this._overlaysList=S.DomUtil.create("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&S.stamp(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(S.bind(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;S.DomUtil.empty(this._baseLayersList),S.DomUtil.empty(this._overlaysList);var t,e,n,i,o=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,o+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&1<o,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(S.stamp(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=g.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=g.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=g.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers",i),e.layerId=S.stamp(t.layer),S.DomEvent.on(e,"click",this._onInputClick,this);var o=g.createElement("span");o.innerHTML=" "+t.name;var a=g.createElement("div");return n.appendChild(a),a.appendChild(e),a.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n,i=this._form.getElementsByTagName("input"),o=[],a=[];this._handlingClick=!0;for(var r=i.length-1;0<=r;r--)t=i[r],e=this._getLayer(t.layerId).layer,n=this._map.hasLayer(e),t.checked&&!n?o.push(e):!t.checked&&n&&a.push(e);for(r=0;r<a.length;r++)this._map.removeLayer(a[r]);for(r=0;r<o.length;r++)this._map.addLayer(o[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._form.getElementsByTagName("input"),i=this._map.getZoom(),o=n.length-1;0<=o;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.disabled=e.options.minZoom!==L&&i<e.options.minZoom||e.options.maxZoom!==L&&i>e.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),S.control.layers=function(t,e,n){return new S.Control.Layers(t,e,n)}}(window,document),L.Icon.Default=L.Icon.Default.extend({_getIconUrl:function(t){return{"icon-2x.png":"/assets/marker-icon-2x-2d77a2e4c2f08bbac41808324ef946b9a2fe61b6150480d011b72b379c3b238d.png","shadow.png":"/assets/marker-shadow-264f5c640339f042dd729062cfc04c17f8ea0f29882b538e3848ed8f10edb4da.png","icon.png":"/assets/marker-icon-574c3a5cca85f4114085b6841596d62f00d7c892c7b03f28cbfa301deb1dc437.png"}[t+".png"]},_detectIconPath:function(){}}),function(){var s={};L.TileLayer.Provider=L.TileLayer.extend({initialize:function(t){var e=t.split("."),n=e[0],i=e[1];if(!s[n])throw"No such provider ("+n+")";var o={url:s[n].url,options:s[n].options};if(i&&"variants"in s[n]){if(!(i in s[n].variants))throw"No such name in provider ("+i+")";var a=s[n].variants[i];o={url:a.url||o.url,options:L.Util.extend({},o.options,a.options)}}var r=o.options.attribution;-1!=r.indexOf("{attribution.")&&(o.options.attribution=r.replace(/\{attribution.(\w*)\}/,function(t,e){return s[e].options.attribution})),L.TileLayer.prototype.initialize.call(this,o.url,o.options)}}),s={OpenStreetMap:{url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'},variants:{Mapnik:{},BlackAndWhite:{url:"http://{s}.www.toolserver.org/tiles/bw-mapnik/{z}/{x}/{y}.png"},DE:{url:"http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png"}}},OpenCycleMap:{url:"http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="http://www.opencyclemap.org">OpenCycleMap</a>, <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'}},Thunderforest:{url:"http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png",options:{attribution:"{attribution.OpenCycleMap}"},variants:{OpenCycleMap:{},Transport:{url:"http://{s}.tile2.opencyclemap.org/transport/{z}/{x}/{y}.png"},Landscape:{url:"http://{s}.tile3.opencyclemap.org/landscape/{z}/{x}/{y}.png"}}},MapQuestOpen:{url:"http://otile{s}.mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png",options:{attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"1234"},variants:{OSM:{},Aerial:{url:"http://oatile{s}.mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.jpg",options:{attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency'}}}},MapBox:{url:"http://{s}.tiles.mapbox.com/v3/mapbox.mapbox-simple/{z}/{x}/{y}.png",options:{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd"},variants:{Simple:{},Streets:{url:"http://{s}.tiles.mapbox.com/v3/mapbox.mapbox-streets/{z}/{x}/{y}.png"},Light:{url:"http://{s}.tiles.mapbox.com/v3/mapbox.mapbox-light/{z}/{x}/{y}.png"},Lacquer:{url:"http://{s}.tiles.mapbox.com/v3/mapbox.mapbox-lacquer/{z}/{x}/{y}.png"},Warden:{url:"http://{s}.tiles.mapbox.com/v3/mapbox.mapbox-warden/{z}/{x}/{y}.png"}}},Stamen:{url:"http://{s}.tile.stamen.com/toner/{z}/{x}/{y}.png",options:{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd",minZoom:0,maxZoom:20},variants:{Toner:{},TonerBackground:{url:"http://{s}.tile.stamen.com/toner-background/{z}/{x}/{y}.png"},TonerHybrid:{url:"http://{s}.tile.stamen.com/toner-hybrid/{z}/{x}/{y}.png"},TonerLines:{url:"http://{s}.tile.stamen.com/toner-lines/{z}/{x}/{y}.png"},TonerLabels:{url:"http://{s}.tile.stamen.com/toner-labels/{z}/{x}/{y}.png"},TonerLite:{url:"http://{s}.tile.stamen.com/toner-lite/{z}/{x}/{y}.png"},Terrain:{url:"http://{s}.tile.stamen.com/terrain/{z}/{x}/{y}.png",options:{minZoom:4,maxZoom:18}},Watercolor:{url:"http://{s}.tile.stamen.com/watercolor/{z}/{x}/{y}.png",options:{minZoom:3,maxZoom:16}}}},Esri:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{},DeLorme:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/Specialty/DeLorme_World_Base_Map/MapServer/tile/{z}/{y}/{x}",options:{maxZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: \xa92012 DeLorme"}},WorldTopoMap:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},OceanBasemap:{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer/tile/{z}/{y}/{x}",options:{maxZoom:11,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},NatGeoWorldMap:{url:"http://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}}}}}}(),L.TileLayer.provider=function(t){return new L.TileLayer.Provider(t)},function(n,e){L.drawVersion="0.2.4-dev",L.drawLocal={draw:{toolbar:{actions:{
title:"Cancel drawing",text:"Cancel"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes.",text:"Save"},cancel:{title:"Cancel editing, discards all changes.",text:"Cancel"}},buttons:{edit:"Edit layers.",editDisabled:"No layers to edit.",remove:"Delete layers.",removeDisabled:"No layers to delete."}},handlers:{edit:{tooltip:{text:"Drag handles, or marker to edit feature.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove"}}}}},L.Draw={},L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(t,e){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.setOptions(this,e)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:drawstart",{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire("draw:drawstop",{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(L.DomUtil.disableTextSelection(),t.getContainer().focus(),this._tooltip=new L.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire("draw:created",{layer:t,layerType:this.type})},_cancelDrawing:function(t){27===t.keyCode&&this.disable()}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,showLength:!0,zIndexOffset:2e3},initialize:function(t,e){this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mousedown",this._onMouseDown,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this).on("mouseup",this._onMouseUp,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseup",this._onMouseUp,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mousemove",this._onMouseMove,this).off("zoomend",this._onZoomEnd,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var t=this._markers.pop(),e=this._poly,n=this._poly.spliceLatLngs(e.getLatLngs().length-1,1)[0];this._markerGroup.removeLayer(t),e.getLatLngs().length<2&&this._map.removeLayer(e),this._vertexChanged(n,!1)}},addVertex:function(t){0<this._markers.length&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t)?this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t)),this._poly.addLatLng(t),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(t,!0))},_finishShape:function(){var t=this._poly.newLatLngIntersects(this._poly.getLatLngs()[0],!0);!this.options.allowIntersection&&t||!this._shapeIsValid()?this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._updateGuide()},_onMouseMove:function(t){var e=t.layerPoint,n=t.latlng;this._currentLatLng=n,this._updateTooltip(n),this._updateGuide(e),this._mouseMarker.setLatLng(n),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._updateFinishHandler(),this._updateRunningMeasure(t,e),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(t){var e=t.originalEvent;this._mouseDownOrigin=L.point(e.clientX,e.clientY)},_onMouseUp:function(t){if(this._mouseDownOrigin){var e=L.point(t.originalEvent.clientX,t.originalEvent.clientY).distanceTo(this._mouseDownOrigin);Math.abs(e)<9*(n.devicePixelRatio||1)&&this.addVertex(t.latlng)}this._mouseDownOrigin=null},_updateFinishHandler:function(){var t=this._markers.length;1<t&&this._markers[t-1].on("click",this._finishShape,this),2<t&&this._markers[t-2].off("click",this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){var e=this._markers.length;0<e&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var n,i,o,a=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))),r=this.options.guidelineDistance,s=this.options.maxGuideLineLength,l=s<a?a-s:r;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));l<a;l+=this.options.guidelineDistance)n=l/a,i={x:Math.floor(t.x*(1-n)+n*e.x),y:Math.floor(t.y*(1-n)+n*e.y)},(o=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer)).style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(o,i)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,n=this._guidesContainer.childNodes.length;e<n;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,n=this.options.showLength;return 0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=n?this._getMeasurementString():"",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),t},_updateRunningMeasure:function(t,e){var n,i,o=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(n=o-(e?2:1),i=t.distanceTo(this._markers[n].getLatLng()),this._measurementRunningTotal+=i*(e?1:-1))},_getMeasurementString:function(){var t,e=this._currentLatLng,n=this._markers[this._markers.length-1].getLatLng();return t=this._measurementRunningTotal+e.distanceTo(n),L.GeometryUtil.readableDistance(t,this.options.metric)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_cleanUpShape:function(){1<this._markers.length&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(t,e){L.Draw.Polyline.prototype.initialize.call(this,t,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),2<t&&(this._markers[t-1].on("dblclick",this._finishShape,this),3<t&&this._markers[t-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t,e;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?t=L.drawLocal.draw.handlers.polygon.tooltip.cont:(t=L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._getMeasurementString()),{text:t,subtext:e}},_getMeasurementString:function(){var t=this._area;return t?L.GeometryUtil.readableArea(t,this.options.metric):null},_shapeIsValid:function(){return 3<=this._markers.length},_vertexChanged:function(t,e){var n;!this.options.allowIntersection&&this.options.showArea&&(n=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(n)),L.Draw.Polyline.prototype._vertexChanged.call(this,t,e)},_cleanUpShape:function(){var t=this._markers.length;0<t&&(this._markers[0].off("click",this._finishShape,this),2<t&&this._markers[t-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t,e){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this),L.DomEvent.off(e,"mouseup",this._onMouseUp,this),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(e,"mouseup",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0},initialize:function(t,e){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_getTooltipText:function(){var t,e,n,i=L.Draw.SimpleShape.prototype._getTooltipText.call(this);return this._shape&&(t=this._shape.getLatLngs(),e=L.GeometryUtil.geodesicArea(t),n=L.GeometryUtil.readableArea(e,this.options.metric)),{text:i.text,subtext:n}}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0},initialize:function(t,e){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){this._shape?this._shape.setRadius(this._startLatLng.distanceTo(t)):(this._shape=new L.Circle(this._startLatLng,this._startLatLng.distanceTo(t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_onMouseMove:function(t){var e,n=t.latlng,i=this.options.showRadius,o=this.options.metric;this._tooltip.updatePosition(n),this._isDrawing&&(this._drawShape(n),e=this._shape.getRadius().toFixed(1),this._tooltip.updateContent({text:this._endLabelText,subtext:i?L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(e,o):""}))}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.Marker.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._marker&&(this._marker.off("click",this._onClick,this),this._map.off("click",this._onClick,this).removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?(e=this._mouseMarker.getLatLng(),this._marker.setLatLng(e)):(this._marker=new L.Marker(e,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset}),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_fireCreatedEvent:function(){var t=new L.Marker(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(t,e){this._marker=t,L.setOptions(this,e)},addHooks:function(){var t=this._marker;t.dragging.enable(),t.on("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},removeHooks:function(){var t=this._marker;t.dragging.disable(),t.off("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},_onDragEnd:function(t){t.target.edited=!0},_toggleMarkerHighlight:function(){if(this._icon){var t=this._icon;t.style.display="none",L.DomUtil.hasClass(t,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,-4)):(L.DomUtil.addClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,4)),t.style.display=""}},_offsetMarker:function(t,e){var n=parseInt(t.style.marginTop,10)-e,i=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=n+"px",t.style.marginLeft=i+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(t,e){this._poly=t,L.setOptions(this,e)},addHooks:function(){var t=this._poly;t instanceof L.Polygon||(t.options.editing.fill=!1),t.setStyle(t.options.editing),this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var t=this._poly;t.setStyle(t.options.original),t._map&&(t._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,n,i,o,a,r=this._poly._latlngs;for(t=0,n=r.length;t<n;t++)(i=this._createMarker(r[t],t)).on("click",this._onMarkerClick,this),this._markers.push(i);for(t=0,e=n-1;t<n;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(o=this._markers[e],a=this._markers[t],this._createMiddleMarker(o,a),this._updatePrevNext(o,a))},_createMarker:function(t,e){var n=new L.Marker(t,{draggable:!0,icon:this.options.icon});return n._origLatLng=t,n._index=e,n.on("drag",this._onMarkerDrag,this),n.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(n),n},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._poly.spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("click",this._onMarkerClick,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit")},_onMarkerDrag:function(t){var e=t.target;L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),this._poly.redraw()},_onMarkerClick:function(t){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,n=t.target;this._poly._latlngs.length<e||(this._removeMarker(n),this._updatePrevNext(n._prev,n._next),n._middleLeft&&this._markerGroup.removeLayer(n._middleLeft),n._middleRight&&this._markerGroup.removeLayer(n._middleRight),n._prev&&n._next?this._createMiddleMarker(n._prev,n._next):n._prev?n._next||(n._prev._middleRight=null):n._next._middleLeft=null,this._fireEdit())},_updateIndexes:function(e,n){this._markerGroup.eachLayer(function(t){t._index>e&&(t._index+=n)})},_createMiddleMarker:function(e,n){var i,t,o,a=this._getMiddleLatLng(e,n),r=this._createMarker(a);r.setOpacity(.6),e._middleRight=n._middleLeft=r,t=function(){var t=n._index;r._index=t,r.off("click",i,this).on("click",this._onMarkerClick,this),a.lat=r.getLatLng().lat,a.lng=r.getLatLng().lng,this._poly.spliceLatLngs(t,0,a),this._markers.splice(t,0,r),r.setOpacity(1),this._updateIndexes(t,1),n._index++,this._updatePrevNext(e,r),this._updatePrevNext(r,n),this._poly.fire("editstart")},o=function(){r.off("dragstart",t,this),r.off("dragend",o,this),this._createMiddleMarker(e,r),this._createMiddleMarker(r,n)},i=function(){t.call(this),o.call(this),this._fireEdit()},r.on("click",i,this).on("dragstart",t,this).on("dragend",o,this),this._markerGroup.addLayer(r)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var n=this._poly._map,i=n.project(t.getLatLng()),o=n.project(e.getLatLng());return n.unproject(i._add(o)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"})},initialize:function(t,e){this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){var t=this._shape;t.setStyle(t.options.editing),t._map&&(this._map=t._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup))},removeHooks:function(){var t=this._shape;if(t.setStyle(t.options.original),t._map){this._unbindMarker(this._moveMarker);for(var e=0,n=this._resizeMarkers.length;e<n;e++)this._unbindMarker(this._resizeMarkers[e]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var n=new L.Marker(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(n),this._markerGroup.addLayer(n),n},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this)},_onMarkerDragStart:function(t){t.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target,n=e.getLatLng();e===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw()},_onMarkerDragEnd:function(t){t.target.setOpacity(1),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,n=t.length;e<n;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),n=t.target._cornerIndex;this._oppositeCorner=e[(n+2)%4],this._toggleCornerMarkers(0,n)},_onMarkerDragEnd:function(t){var e,n=t.target;n===this._moveMarker&&(e=this._shape.getBounds().getCenter(),n.setLatLng(e)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,n=this._shape.getLatLngs(),i=this._shape.getBounds().getCenter(),o=[],a=0,r=n.length;a<r;a++)e=[n[a].lat-i.lat,n[a].lng-i.lng],o.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(o),this._repositionCornerMarkers()},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter())},_getCorners:function(){var t=this._shape.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_toggleCornerMarkers:function(t){for(var e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getLatLng();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),n=this._map.project(t);return this._map.unproject([n.x+e,n.y-e])},_move:function(t){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e),this._shape.setLatLng(t)},_resize:function(t){var e=this._moveMarker.getLatLng().distanceTo(t);this._shape.setRadius(e)}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.LatLngUtil={cloneLatLngs:function(t){for(var e=[],n=0,i=t.length;n<i;n++)e.push(this.cloneLatLng(t[n]));return e},cloneLatLng:function(t){return L.latLng(t.lat,t.lng)}},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t){var e,n,i=t.length,o=0,a=L.LatLng.DEG_TO_RAD;if(2<i){for(var r=0;r<i;r++)e=t[r],o+=((n=t[(r+1)%i]).lng-e.lng)*a*(2+Math.sin(e.lat*a)+Math.sin(n.lat*a));o=6378137*o*6378137/2}return Math.abs(o)},readableArea:function(t,e){return e?1e4<=t?(1e-4*t).toFixed(2)+" ha":t.toFixed(2)+" m&sup2;":3097600<=(t/=.836127)?(t/3097600).toFixed(2)+" mi&sup2;":4840<=t?(t/4840).toFixed(2)+" acres":Math.ceil(t)+" yd&sup2;"},readableDistance:function(t,e){return e?1e3<t?(t/1e3).toFixed(2)+" km":Math.ceil(t)+" m":1760<(t*=1.09361)?(t/1760).toFixed(2)+" miles":Math.ceil(t)+" yd"}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,e,n,i){return this._checkCounterclockwise(t,n,i)!==this._checkCounterclockwise(e,n,i)&&this._checkCounterclockwise(t,e,n)!==this._checkCounterclockwise(t,e,i)},_checkCounterclockwise:function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}}),L.Polyline.include({intersects:function(){var t,e,n,i=this._originalPoints,o=i?i.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=o-1;3<=t;t--)if(e=i[t-1],n=i[t],this._lineSegmentsIntersectsRange(e,n,t-2))return!0;return!1},newLatLngIntersects:function(t,e){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(t),e)},newPointIntersects:function(t,e){var n=this._originalPoints,i=n?n.length:0,o=n?n[i-1]:null,a=i-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(o,t,a,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._originalPoints,n=e?e.length:0;return n+=t||0,!this._originalPoints||n<=3},_lineSegmentsIntersectsRange:function(t,e,n,i){var o,a,r=this._originalPoints;i=i||0;for(var s=n;i<s;s--)if(o=r[s-1],a=r[s],L.LineUtil.segmentsIntersect(t,e,o,a))return!0;return!1}}),L.Polygon.include({intersects:function(){var t,e,n,i,o=this._originalPoints;return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(t=o.length,e=o[0],n=o[t-1],i=t-2,this._lineSegmentsIntersectsRange(n,e,i,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(t){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");var e;L.Control.prototype.initialize.call(this,t),this._toolbars={},L.DrawToolbar&&this.options.draw&&(e=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=e,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(e=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=e,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this))},onAdd:function(t){var e,n=L.DomUtil.create("div","leaflet-draw"),i=!1,o="leaflet-draw-toolbar-top";for(var a in this._toolbars)this._toolbars.hasOwnProperty(a)&&(e=this._toolbars[a].addToolbar(t))&&(i||(L.DomUtil.hasClass(e,o)||L.DomUtil.addClass(e.childNodes[0],o),i=!0),n.appendChild(e));return n},onRemove:function(){for(var t in this._toolbars)this._toolbars.hasOwnProperty(t)&&this._toolbars[t].removeToolbar()},setDrawingOptions:function(t){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(t)},_toolbarEnabled:function(t){var e=t.target;for(var n in this._toolbars)this._toolbars[n]!==e&&this._toolbars[n].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(t){var e,n=L.DomUtil.create("div","leaflet-draw-section"),i=0,o=this._toolbarClass||"",a=this.getModeHandlers(t);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t,e=0;e<a.length;e++)a[e].enabled&&this._initModeHandler(a[e].handler,this._toolbarContainer,i++,o,a[e].title);if(i)return this._lastButtonIndex=--i,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),n.appendChild(this._toolbarContainer),n.appendChild(this._actionsContainer),n},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler),this._modes[t].handler.disable(),this._modes[t].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e=0,n=this._actionButtons.length;e<n;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,e,n,i,o){var a=t.type;this._modes[a]={},this._modes[a].handler=t,this._modes[a].button=this._createButton({title:o,className:i+"-"+a,container:e,callback:this._modes[a].handler.enable,context:this._modes[a].handler}),this._modes[a].buttonIndex=n,this._modes[a].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_createButton:function(t){var e=L.DomUtil.create("a",t.className||"",t.container);return e.href="#",t.text&&(e.innerHTML=t.text),t.title&&(e.title=t.title),L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,"click",t.callback,t.context),e},_disposeButton:function(t,e){L.DomEvent.off(t,"click",L.DomEvent.stopPropagation).off(t,"mousedown",L.DomEvent.stopPropagation).off(t,"dblclick",L.DomEvent.stopPropagation).off(t,"click",L.DomEvent.preventDefault).off(t,"click",e)},_handlerActivated:function(t){this.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(t){var e,n,i,o,a=this._actionsContainer,r=this.getActions(t),s=r.length;for(n=0,i=this._actionButtons.length;n<i;n++)this._disposeButton(this._actionButtons[n].button,this._actionButtons[n].callback);for(this._actionButtons=[];a.firstChild;)a.removeChild(a.firstChild)
;for(var l=0;l<s;l++)"enabled"in r[l]&&!r[l].enabled||(e=L.DomUtil.create("li","",a),o=this._createButton({title:r[l].title,text:r[l].text,container:e,callback:r[l].callback,context:r[l].context}),this._actionButtons.push({button:o,callback:r[l].callback}))},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,n=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=n+"px",0===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block"},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom")}}),L.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._container=t.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1},dispose:function(){this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container&&(t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?0<t.subtext.length&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(0<t.subtext.length?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span><br />":"")+"<span>"+t.text+"</span>"),this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),n=this._container;return this._container&&(n.style.visibility="inherit",L.DomUtil.setPosition(n,e)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(t){for(var e in this.options)this.options.hasOwnProperty(e)&&t[e]&&(t[e]=L.extend({},this.options[e],t[e]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker}]},getActions:function(t){return[{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){for(var e in L.setOptions(this,t),this._modes)this._modes.hasOwnProperty(e)&&t.hasOwnProperty(e)&&this._modes[e].handler.setOptions(t[e])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{color:"#fe57a1",opacity:.6,dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},featureGroup:null},initialize:function(t){t.edit&&("undefined"==typeof t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t.edit.selectedPathOptions)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(){return[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),e},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode.handler.disable()},_checkDisabled:function(){var t,e=0!==this.options.featureGroup.getLayers().length;this.options.edit&&(t=this._modes[L.EditToolbar.Edit.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t=this._modes[L.EditToolbar.Delete.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.setOptions(this,e),this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire("draw:editstart",{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire("draw:editstop",{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._featureGroup.eachLayer(function(t){this._revertLayer(t)},this)},save:function(){var e=new L.LayerGroup;this._featureGroup.eachLayer(function(t){t.edited&&(e.addLayer(t),t.edited=!1)}),this._map.fire("draw:edited",{layers:e})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:t instanceof L.Marker&&(this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())}))},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):t instanceof L.Marker&&t.setLatLng(this._uneditedLayerProps[e].latlng),t.fire("revert-edited",{layer:t}))},_enableLayerEdit:function(t){var e,n=t.layer||t.target||t;this._backupLayer(n),this.options.selectedPathOptions&&((e=L.Util.extend({},this.options.selectedPathOptions)).maintainColor&&(e.color=n.options.color,e.fillColor=n.options.fillColor),n.options.original=L.extend({},n.options),n.options.editing=e),n.editing.enable()},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,e.editing.disable(),delete e.options.editing,delete e.options.original},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.Util.setOptions(this,e),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire("draw:deletestart",{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire("draw:deletestop",{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(t){this._deletableLayers.addLayer(t),t.fire("revert-deleted",{layer:t})},this)},save:function(){this._map.fire("draw:deleted",{layers:this._deletedLayers})},_enableLayerDelete:function(t){(t.layer||t.target||t).on("click",this._removeLayer,this)},_disableLayerDelete:function(t){var e=t.layer||t.target||t;e.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(t){var e=t.layer||t.target||t;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e),e.fire("deleted")},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})}(window,document);var Hashtable=function(a){function o(t){return typeof t==l?t:""+t}function c(t){var e;return typeof t==l?t:typeof t.hashCode==u?typeof(e=t.hashCode())==l?e:c(e):o(t)}function h(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function e(t,e){return t.equals(e)}function n(t,e){return typeof e.equals==u?e.equals(t):t===e}function t(e){return function(t){if(null===t)throw new Error("null is not a valid "+e);if(t===a)throw new Error(e+" must not be undefined")}}function f(t,e,n,i){this[0]=t,this.entries=[],this.addEntry(e,n),null!==i&&(this.getEqualityFunction=function(){return i})}function i(o){return function(t){for(var e,n=this.entries.length,i=this.getEqualityFunction(t);n--;)if(i(t,(e=this.entries[n])[0]))switch(o){case d:return!0;case y:return e;case _:return[n,e[1]]}return!1}}function r(a){return function(t){for(var e=t.length,n=0,i=this.entries,o=i.length;n<o;++n)t[e+n]=i[n][a]}}function p(t,e){for(var n=t.length;n--;)if(e===t[n][0])return n;return null}function m(t,e){var n=t[e];return n&&n instanceof f?n:null}function s(t,e){var r=[],s={},l={replaceDuplicateKey:!0,hashCode:c,equals:null},n=t,i=e;i!==a?(l.hashCode=n,l.equals=i):n!==a&&h(l,n);var u=l.hashCode,d=l.equals;this.properties=l,this.put=function(t,e){g(t),v(e);var n,i,o=u(t),a=null;return(n=m(s,o))?(i=n.getEntryForKey(t))?(l.replaceDuplicateKey&&(i[0]=t),a=i[1],i[1]=e):n.addEntry(t,e):(n=new f(o,t,e,d),r.push(n),s[o]=n),a},this.get=function(t){g(t);var e=u(t),n=m(s,e);if(n){var i=n.getEntryForKey(t);if(i)return i[1]}return null},this.containsKey=function(t){g(t);var e=u(t),n=m(s,e);return!!n&&n.containsKey(t)},this.containsValue=function(t){v(t);for(var e=r.length;e--;)if(r[e].containsValue(t))return!0;return!1},this.clear=function(){r.length=0,s={}},this.isEmpty=function(){return!r.length};var o=function(n){return function(){for(var t=[],e=r.length;e--;)r[e][n](t);return t}};this.keys=o("keys"),this.values=o("values"),this.entries=o("getEntries"),this.remove=function(t){g(t);var e,n=u(t),i=null,o=m(s,n);return o&&(null!==(i=o.removeEntryForKey(t))&&0==o.entries.length&&(e=p(r,n),r.splice(e,1),delete s[n])),i},this.size=function(){for(var t=0,e=r.length;e--;)t+=r[e].entries.length;return t}}var u="function",l="string";if(typeof encodeURIComponent=="undefined"||Array.prototype.splice===a||Object.prototype.hasOwnProperty===a)return null;var g=t("key"),v=t("value"),d=0,y=1,_=2;return f.prototype={getEqualityFunction:function(t){return typeof t.equals==u?e:n},getEntryForKey:i(y),getEntryAndIndexForKey:i(_),removeEntryForKey:function(t){var e=this.getEntryAndIndexForKey(t);return e?(this.entries.splice(e[0],1),e[1]):null},addEntry:function(t,e){this.entries.push([t,e])},keys:r(0),values:r(1),getEntries:function(t){for(var e=t.length,n=0,i=this.entries,o=i.length;n<o;++n)t[e+n]=i[n].slice(0)},containsKey:i(d),containsValue:function(t){for(var e=this.entries,n=e.length;n--;)if(t===e[n][1])return!0;return!1}},s.prototype={each:function(t){for(var e,n=this.entries(),i=n.length;i--;)t((e=n[i])[0],e[1])},equals:function(t){var e,n,i,o=this.size();if(o!=t.size())return!1;for(e=this.keys();o--;)if(n=e[o],null===(i=t.get(n))||i!==this.get(n))return!1;return!0},putAll:function(t,e){for(var n,i,o,a,r=t.entries(),s=r.length,l=typeof e==u;s--;)i=(n=r[s])[0],o=n[1],l&&(a=this.get(i))&&(o=e(i,a,o)),this.put(i,o)},clone:function(){var t=new s(this.properties);return t.putAll(this),t}},s.prototype.toQueryString=function(){for(var t,e=this.entries(),n=e.length,i=[];n--;)t=e[n],i[n]=encodeURIComponent(o(t[0]))+"="+encodeURIComponent(o(t[1]));return i.join("&")},s}();!function(k){function s(t,e,n){this.dec=t,this.group=e,this.neg=n}function l(){for(var t=0;t<i.length;t++)for(var e=i[t],n=0;n<e.length;n++)u.put(e[n],t)}function D(t,e){0==u.size()&&l();var n=".",i=",",o="-";0==e&&(-1!=t.indexOf("_")?t=t.split("_")[1].toLowerCase():-1!=t.indexOf("-")&&(t=t.split("-")[1].toLowerCase()));var a=u.get(t);if(a){var r=d[a];r&&(n=r[0],i=r[1])}return new s(n,i,o)}var u=new Hashtable,d=[[".",","],[",","."],[","," "],[".","'"]],i=[["ae","au","ca","cn","eg","gb","hk","il","in","jp","sk","th","tw","us"],["at","br","de","dk","es","gr","it","nl","pt","tr","vn"],["bg","cz","fi","fr","no","pl","ru","se"],["ch"]];k.fn.formatNumber=function(n,i,o){return this.each(function(){var t;null==i&&(i=!0),null==o&&(o=!0),t=k(this).is(":input")?new String(k(this).val()):new String(k(this).text());var e=k.formatNumber(t,n);if(i&&(k(this).is(":input")?k(this).val(e):k(this).text(e)),o)return e})},k.formatNumber=function(t,e){for(var n=D((e=k.extend({},k.fn.formatNumber.defaults,e)).locale.toLowerCase(),e.isFullLocale),i=(n.dec,n.group,n.neg,"0#-,."),o="",a=!1,r=0;r<e.format.length;r++)if(-1==i.indexOf(e.format.charAt(r)))o+=e.format.charAt(r);else{if(0!=r||"-"!=e.format.charAt(r))break;a=!0}var s="";for(r=e.format.length-1;0<=r&&-1==i.indexOf(e.format.charAt(r));r--)s=e.format.charAt(r)+s;e.format=e.format.substring(o.length),e.format=e.format.substring(0,e.format.length-s.length);var l=new Number(t);return k._formatNumber(l,e,s,o,a)},k._formatNumber=function(t,e,n,i,o){var a=D((e=k.extend({},k.fn.formatNumber.defaults,e)).locale.toLowerCase(),e.isFullLocale),r=a.dec,s=a.group,l=a.neg;null!=e.overrideGroupSep&&(s=e.overrideGroupSep),null!=e.overrideDecSep&&(r=e.overrideDecSep),null!=e.overrideNegSign&&(l=e.overrideNegSign);var u=!1;if(isNaN(t)){if(1!=e.nanForceZero)return"";u=!(t=0)}(1==e.isPercentage||e.autoDetectPercentage&&"%"==n.charAt(n.length-1))&&(t*=100);var d="";if(-1<e.format.indexOf(".")){var c=r,h=e.format.substring(e.format.lastIndexOf(".")+1);if(1==e.round)t=new Number(t.toFixed(h.length));else{var f=t.toString();0<f.lastIndexOf(".")&&(f=f.substring(0,f.lastIndexOf(".")+h.length+1)),t=new Number(f)}var p=new Number(t.toString().substring(t.toString().indexOf(".")));decimalString=new String(p.toFixed(h.length)),decimalString=decimalString.substring(decimalString.lastIndexOf(".")+1);for(var m=0;m<h.length;m++)if("#"!=h.charAt(m)||"0"==decimalString.charAt(m)){if("#"==h.charAt(m)&&"0"==decimalString.charAt(m)){if(decimalString.substring(m).match("[1-9]")){c+=decimalString.charAt(m);continue}break}"0"==h.charAt(m)&&(c+=decimalString.charAt(m))}else c+=decimalString.charAt(m);d+=c}else t=Math.round(t);var g=Math.floor(t);t<0&&(g=Math.ceil(t));var v="";v=-1==e.format.indexOf(".")?e.format:e.format.substring(0,e.format.indexOf("."));var y="";if(0!=g||"#"!=v.substr(v.length-1)||u){var _=new String(Math.abs(g)),b=9999;-1!=v.lastIndexOf(",")&&(b=v.length-v.lastIndexOf(",")-1);var w=0;for(m=_.length-1;-1<m;m--)y=_.charAt(m)+y,++w==b&&0!=m&&(y=s+y,w=0);if(v.length>y.length){var x=v.indexOf("0");if(-1!=x)for(var C=v.length-x,L=v.length-y.length-1;y.length<C;){var S=v.charAt(L);","==S&&(S=s),y=S+y,L--}}}return y||-1===v.indexOf("0",v.length-1)||(y="0"),d=y+d,t<0&&o&&0<i.length?i=l+i:t<0&&(d=l+d),e.decimalSeparatorAlwaysShown||d.lastIndexOf(r)==d.length-1&&(d=d.substring(0,d.length-1)),d=i+d+n},k.fn.parseNumber=function(t,e,n){var i;null==e&&(e=!0),null==n&&(n=!0),i=k(this).is(":input")?new String(k(this).val()):new String(k(this).text());var o=k.parseNumber(i,t);if(o&&(e&&(k(this).is(":input")?k(this).val(o.toString()):k(this).text(o.toString())),n))return o},k.parseNumber=function(t,e){var n=D((e=k.extend({},k.fn.parseNumber.defaults,e)).locale.toLowerCase(),e.isFullLocale),i=n.dec,o=n.group,a=n.neg;null!=e.overrideGroupSep&&(o=e.overrideGroupSep),null!=e.overrideDecSep&&(i=e.overrideDecSep),null!=e.overrideNegSign&&(a=e.overrideNegSign);for(var r="1234567890",s=".-",l=e.strict;-1<t.indexOf(o);)t=t.replace(o,"");t=t.replace(i,".").replace(a,"-");var u="",d=!1;(1==e.isPercentage||e.autoDetectPercentage&&"%"==t.charAt(t.length-1))&&(d=!0);for(var c=0;c<t.length;c++)if(-1<r.indexOf(t.charAt(c)))u+=t.charAt(c);else if(-1<s.indexOf(t.charAt(c)))u+=t.charAt(c),s=s.replace(t.charAt(c),"");else{if(e.allowPostfix)break;if(l){u="NaN";break}}var h=new Number(u);if(d){h/=100;var f=u.indexOf(".");if(-1!=f){var p=u.length-f-1;h=h.toFixed(p+2)}else h=h.toFixed(2)}return h},k.fn.parseNumber.defaults={locale:"us",decimalSeparatorAlwaysShown:!1,isPercentage:!1,autoDetectPercentage:!0,isFullLocale:!1,strict:!1,overrideGroupSep:null,overrideDecSep:null,overrideNegSign:null,allowPostfix:!1},k.fn.formatNumber.defaults={format:"#,###.00",locale:"us",decimalSeparatorAlwaysShown:!1,nanForceZero:!0,round:!0,isFullLocale:!1,overrideGroupSep:null,overrideDecSep:null,overrideNegSign:null,isPercentage:!1,autoDetectPercentage:!0},Number.prototype.toFixed=function(t){return k._roundNumber(this,t)},k._roundNumber=function(t,e){var n=Math.pow(10,e||0),i=String(Math.round(t*n)/n);if(0<e){var o=i.indexOf(".");for(-1==o?(i+=".",o=0):o=i.length-(o+1);o<e;)i+="0",o++}return i}}(jQuery),function(c,t,d){function r(t){for(var e=[],n=0,i=t.length;n<i;n++)e[t[n]]=n;return e}function o(t,e,n){var i=t.splice(e,1)[0];t.splice(n,0,i)}c.fn.dataTableExt.oApi.fnColReorder=function(){!function(t,a,r){function y(t){for(var e=[],n=0,i=t.length;n<i;n++)e[t[n]]=n;return e}function _(t,e,n){var i=t.splice(e,1)[0];t.splice(n,0,i)}function b(t,e,n){for(var i=[],o=0,a=t.childNodes.length;o<a;o++)1==t.childNodes[o].nodeType&&i.push(t.childNodes[o]);var r=i[e];null!==n?t.insertBefore(r,i[n]):t.appendChild(r)}var e=function(v){"use strict";v.fn.dataTableExt.oApi.fnColReorder=function(n,t,e){var i,o,a,r,s,l,u=!!v.fn.dataTable.Api,d=n.aoColumns.length,c=function(t,e,n){if(t[e]){var i=t[e].split("."),o=i.shift();isNaN(1*o)||(t[e]=n[1*o]+"."+i.join("."))}};if(t!=e)if(t<0||d<=t)this.oApi._fnLog(n,1,"ColReorder 'from' index is out of bounds: "+t);else if(e<0||d<=e)this.oApi._fnLog(n,1,"ColReorder 'to' index is out of bounds: "+e);else{var h=[];for(i=0,o=d;i<o;i++)h[i]=i;_(h,t,e);var f=y(h);for(i=0,o=n.aaSorting.length;i<o;i++)n.aaSorting[i][0]=f[n.aaSorting[i][0]];if(null!==n.aaSortingFixed)for(i=0,o=n.aaSortingFixed.length;i<o;i++)n.aaSortingFixed[i][0]=f[n.aaSortingFixed[i][0]];for(i=0,o=d;i<o;i++){for(a=0,r=(l=n.aoColumns[i]).aDataSort.length;a<r;a++)l.aDataSort[a]=f[l.aDataSort[a]];u&&(l.idx=f[l.idx])}for(u&&v.each(n.aLastSort,function(t,e){n.aLastSort[t].src=f[e.src]}),i=0,o=d;i<o;i++)"number"==typeof(l=n.aoColumns[i]).mData?(l.mData=f[l.mData],n.oApi._fnColumnOptions(n,i,{})):v.isPlainObject(l.mData)&&(c(l.mData,"_",f),c(l.mData,"filter",f),c(l.mData,"sort",f),c(l.mData,"type",f),n.oApi._fnColumnOptions(n,i,{}));if(n.aoColumns[t].bVisible){var p=this.oApi._fnColumnIndexToVisible(n,t),m=null;for(i=e<t?e:e+1;null===m&&i<d;)m=this.oApi._fnColumnIndexToVisible(n,i),i++;for(i=0,o=(s=n.nTHead.getElementsByTagName("tr")).length;i<o;i++)b(s[i],p,m);if(null!==n.nTFoot)for(i=0,o=(s=n.nTFoot.getElementsByTagName("tr")).length;i<o;i++)b(s[i],p,m);for(i=0,o=n.aoData.length;i<o;i++)null!==n.aoData[i].nTr&&b(n.aoData[i].nTr,p,m)}for(_(n.aoColumns,t,e),_(n.aoPreSearchCols,t,e),i=0,o=n.aoData.length;i<o;i++){var g=n.aoData[i];u?(g.anCells&&_(g.anCells,t,e),"dom"!==g.src&&v.isArray(g._aData)&&_(g._aData,t,e)):(v.isArray(g._aData)&&_(g._aData,t,e),_(g._anHidden,t,e))}for(i=0,o=n.aoHeader.length;i<o;i++)_(n.aoHeader[i],t,e);if(null!==n.aoFooter)for(i=0,o=n.aoFooter.length;i<o;i++)_(n.aoFooter[i],t,e);if(u)new v.fn.dataTable.Api(n).rows().invalidate();for(i=0,o=d;i<o;i++)v(n.aoColumns[i].nTh).off("click.DT"),this.oApi._fnSortAttachListener(n,n.aoColumns[i].nTh,i);v(n.oInstance).trigger("column-reorder",[n,{iFrom:t,iTo:e,aiInvertMapping:f}])}};var o=function(t,e){var n;v.fn.dataTable.Api?n=new v.fn.dataTable.Api(t).settings()[0]:t.fnSettings?n=t.fnSettings():"string"==typeof t?v.fn.dataTable.fnIsDataTable(v(t)[0])&&(n=v(t).eq(0).dataTable().fnSettings()):t.nodeName&&"table"===t.nodeName.toLowerCase()?v.fn.dataTable.fnIsDataTable(t.nodeName)&&(n=v(t.nodeName).dataTable().fnSettings()):t instanceof jQuery?v.fn.dataTable.fnIsDataTable(t[0])&&(n=t.eq(0).dataTable().fnSettings()):n=t;var i=v.fn.dataTable.camelToHungarian;return i&&(i(o.defaults,o.defaults,!0),i(o.defaults,e||{})),this.s={dt:null,init:v.extend(!0,{},o.defaults,e),fixed:0,fixedRight:0,dropCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]},this.dom={drag:null,pointer:null},this.s.dt=n.oInstance.fnSettings(),(this.s.dt._colReorder=this)._fnConstruct(),n.oApi._fnCallbackReg(n,"aoDestroyCallback",v.proxy(this._fnDestroy,this),"ColReorder"),this};return o.prototype={fnReset:function(){for(var t=[],e=0,n=this.s.dt.aoColumns.length;e<n;e++)t.push(this.s.dt.aoColumns[e]._ColReorder_iOrigCol);return this._fnOrderColumns(t),this},fnGetCurrentOrder:function(){return this.fnOrder()},fnOrder:function(t){if(t!==r)return this._fnOrderColumns(y(t)),this;for(var e=[],n=0,i=this.s.dt.aoColumns.length;n<i;n++)e.push(this.s.dt.aoColumns[n]._ColReorder_iOrigCol);return e},_fnConstruct:function(){var t,n=this,e=this.s.dt.aoColumns.length;for(this.s.init.iFixedColumns&&(this.s.fixed=this.s.init.iFixedColumns),this.s.fixedRight=this.s.init.iFixedColumnsRight?this.s.init.iFixedColumnsRight:0,this.s.init.fnReorderCallback&&(this.s.dropCallback=this.s.init.fnReorderCallback),t=0;t<e;t++)t>this.s.fixed-1&&t<e-this.s.fixedRight&&this._fnMouseListener(t,this.s.dt.aoColumns[t].nTh),this.s.dt.aoColumns[t]._ColReorder_iOrigCol=t;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(t,e){n._fnStateSave.call(n,e)},"ColReorder_State");var i=null;if(this.s.init.aiOrder&&(i=this.s.init.aiOrder.slice()),this.s.dt.oLoadedState&&"undefined"!=typeof this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length&&(i=this.s.dt.oLoadedState.ColReorder),i)if(n.s.dt._bInitComplete){var o=y(i);n._fnOrderColumns.call(n,o)}else{var a=!1;this.s.dt.aoDrawCallback.push({fn:function(){if(!n.s.dt._bInitComplete&&!a){a=!0;var t=y(i);n._fnOrderColumns.call(n,t)}},sName:"ColReorder_Pre"})}else this._fnSetColumnIndexes()},_fnOrderColumns:function(t){if(t.length==this.s.dt.aoColumns.length){for(var e=0,n=t.length;e<n;e++){var i=v.inArray(e,t);e!=i&&(_(t,i,e),this.s.dt.oInstance.fnColReorder(i,e))}""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),this._fnSetColumnIndexes()}else this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.")},_fnStateSave:function(t){var e,n,i,o=this.s.dt.aoColumns;if(t.ColReorder=[],t.aaSorting){for(e=0;e<t.aaSorting.length;e++)t.aaSorting[e][0]=o[t.aaSorting[e][0]]._ColReorder_iOrigCol;var a=v.extend(!0,[],t.aoSearchCols);for(e=0,n=o.length;e<n;e++)i=o[e]._ColReorder_iOrigCol,t.aoSearchCols[i]=a[e],t.abVisCols[i]=o[e].bVisible,t.ColReorder.push(i)}else if(t.order){for(e=0;e<t.order.length;e++)t.order[e][0]=o[t.order[e][0]]._ColReorder_iOrigCol;var r=v.extend(!0,[],t.columns);for(e=0,n=o.length;e<n;e++)i=o[e]._ColReorder_iOrigCol,t.columns[i]=r[e],t.ColReorder.push(i)}},_fnMouseListener:function(t,e){var n=this;v(e).on("mousedown.ColReorder",function(t){t.preventDefault(),n._fnMouseDown.call(n,t,e)})},_fnMouseDown:function(t,e){var n=this,i=v(t.target).closest("th, td").offset(),o=parseInt(v(e).attr("data-column-index"),10);o!==r&&(this.s.mouse.startX=t.pageX,this.s.mouse.startY=t.pageY,this.s.mouse.offsetX=t.pageX-i.left,this.s.mouse.offsetY=t.pageY-i.top,this.s.mouse.target=this.s.dt.aoColumns[o].nTh,this.s.mouse.targetIndex=o,this.s.mouse.fromIndex=o,this._fnRegions(),v(a).on("mousemove.ColReorder",function(t){n._fnMouseMove.call(n,t)}).on("mouseup.ColReorder",function(t){n._fnMouseUp.call(n,t)}))},_fnMouseMove:function(t){if(null===this.dom.drag){if(Math.pow(Math.pow(t.pageX-this.s.mouse.startX,2)+Math.pow(t.pageY-this.s.mouse.startY,2),.5)<5)return;this._fnCreateDragNode()}this.dom.drag.css({left:t.pageX-this.s.mouse.offsetX,top:t.pageY-this.s.mouse.offsetY});for(var e=!1,n=this.s.mouse.toIndex,i=1,o=this.s.aoTargets.length;i<o;i++)if(t.pageX<this.s.aoTargets[i-1].x+(this.s.aoTargets[i].x-this.s.aoTargets[i-1].x)/2){this.dom.pointer.css("left",this.s.aoTargets[i-1].x),this.s.mouse.toIndex=this.s.aoTargets[i-1].to,e=!0;break}e||(this.dom.pointer.css("left",this.s.aoTargets[this.s.aoTargets.length-1].x),this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-1].to),this.s.init.bRealtime&&n!==this.s.mouse.toIndex&&(this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex),this.s.mouse.fromIndex=this.s.mouse.toIndex,this._fnRegions())},_fnMouseUp:function(){v(a).off("mousemove.ColReorder mouseup.ColReorder"),null!==this.dom.drag&&(this.dom.drag.remove(),this.dom.pointer.remove(),this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex),this._fnSetColumnIndexes(),""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(),null!==this.s.dropCallback&&this.s.dropCallback.call(this),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt))},_fnRegions:function(){var t=this.s.dt.aoColumns;this.s.aoTargets.splice(0,this.s.aoTargets.length),this.s.aoTargets.push({x:v(this.s.dt.nTable).offset().left,to:0});for(var e=0,n=0,i=t.length;n<i;n++)n!=this.s.mouse.fromIndex&&e++,t[n].bVisible&&this.s.aoTargets.push({x:v(t[n].nTh).offset().left+v(t[n].nTh).outerWidth(),to:e});0!==this.s.fixedRight&&this.s.aoTargets.splice(this.s.aoTargets.length-this.s.fixedRight),0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed)},_fnCreateDragNode:function(){var t=""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY,e=this.s.dt.aoColumns[this.s.mouse.targetIndex].nTh,n=e.parentNode,i=n.parentNode,o=i.parentNode,a=v(e).clone();this.dom.drag=v(o.cloneNode(!1)).addClass("DTCR_clonedTable").append(i.cloneNode(!1).appendChild(n.cloneNode(!1).appendChild(a[0]))).css({position:"absolute",top:0,left:0,width:v(e).outerWidth(),height:v(e).outerHeight()}).appendTo("body"),this.dom.pointer=v("<div></div>").addClass("DTCR_pointer").css({position:"absolute",top:t?v("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top:v(this.s.dt.nTable).offset().top,height:t?v("div.dataTables_scroll",this.s.dt.nTableWrapper).height():v(this.s.dt.nTable).height()}).appendTo("body")},_fnDestroy:function(){var t,e;for(t=0,e=this.s.dt.aoDrawCallback.length;t<e;t++)if("ColReorder_Pre"===this.s.dt.aoDrawCallback[t].sName){this.s.dt.aoDrawCallback.splice(t,1);break}v(this.s.dt.nTHead).find("*").off(".ColReorder"),v.each(this.s.dt.aoColumns,function(t,e){v(e.nTh).removeAttr("data-column-index")}),this.s.dt._colReorder=null,this.s=null},_fnSetColumnIndexes:function(){v.each(this.s.dt.aoColumns,function(t,e){v(e.nTh).attr("data-column-index",t)})}},o.defaults={aiOrder:null,bRealtime:!1,iFixedColumns:0,iFixedColumnsRight:0,fnReorderCallback:null},o.version="1.1.3-dev",v.fn.dataTable.ColReorder=o,v.fn.DataTable.ColReorder=o,"function"==typeof v.fn.dataTable&&"function"==typeof v.fn.dataTableExt.fnVersionCheck&&v.fn.dataTableExt.fnVersionCheck("1.9.3")?v.fn.dataTableExt.aoFeatures.push({fnInit:function(t){var e=t.oInstance;if(t._colReorder)e.oApi._fnLog(t,1,"ColReorder attempted to initialise twice. Ignoring second");else{var n=t.oInit,i=n.colReorder||n.oColReorder||{};new o(t,i)}return null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.9.3 or greater - www.datatables.net/download"),v.fn.dataTable.Api&&(v.fn.dataTable.Api.register("colReorder.reset()",function(){return this.iterator("table",function(t){t._colReorder.fnReset()})}),v.fn.dataTable.Api.register("colReorder.order()",function(e){return e?this.iterator("table",function(t){t._colReorder.fnOrder(e)}):this.context.length?this.context[0]._colReorder.fnOrder():null})),o};"function"==typeof define&&define.amd?define(["jquery","datatables"],e):"object"==typeof exports?e(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.ColReorder&&e(jQuery,jQuery.fn.dataTable)}(0,d)},ColReorder=function(t,e){return this.CLASS&&"ColReorder"==this.CLASS||alert("Warning: ColReorder must be initialised with the keyword 'new'"),void 0===e&&(e={}),this.s={dt:null,init:e,allowReorder:!0,allowResize:!0,fixed:0,dropCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]},this.dom={drag:null,resize:null,pointer:null},this.table_size=-1,this.s.dt=t.oInstance.fnSettings(),this._fnConstruct(),t.oApi._fnCallbackReg(t,"aoDestroyCallback",jQuery.proxy(this._fnDestroy,this),"ColReorder"),ColReorder.aoInstances.push(this),this},ColReorder.prototype={fnReset:function(){for(var t=[],e=0,n=this.s.dt.aoColumns.length;e<n;e++)t.push(this.s.dt.aoColumns[e]._ColReorder_iOrigCol);this._fnOrderColumns(t)},_fnConstruct:function(){var t,e,n=this;for("undefined"!=typeof this.s.init.allowReorder&&(
this.s.allowReorder=this.s.init.allowReorder),"undefined"!=typeof this.s.init.allowResize&&(this.s.allowResize=this.s.init.allowResize),"undefined"!=typeof this.s.init.iFixedColumns&&(this.s.fixed=this.s.init.iFixedColumns),"undefined"!=typeof this.s.init.fnReorderCallback&&(this.s.dropCallback=this.s.init.fnReorderCallback),t=0,e=this.s.dt.aoColumns.length;t<e;t++)t>this.s.fixed-1&&this._fnMouseListener(t,this.s.dt.aoColumns[t].nTh),this.s.dt.aoColumns[t]._ColReorder_iOrigCol=t;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(t,e){n._fnStateSave.call(n,e)},"ColReorder_State");var i=null;if("undefined"!=typeof this.s.init.aiOrder&&(i=this.s.init.aiOrder.slice()),this.s.dt.oLoadedState&&"undefined"!=typeof this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length&&(i=this.s.dt.oLoadedState.ColReorder),i)if(n.s.dt._bInitComplete){var o=r(i);n._fnOrderColumns.call(n,o)}else{var a=!1;this.s.dt.aoDrawCallback.push({fn:function(){if(!n.s.dt._bInitComplete&&!a){a=!0;var t=r(i);n._fnOrderColumns.call(n,t)}},sName:"ColReorder_Pre"})}},_fnOrderColumns:function(t){if(t.length==this.s.dt.aoColumns.length){for(var e=0,n=t.length;e<n;e++){var i=c.inArray(e,t);e!=i&&(o(t,i,e),this.s.dt.oInstance.fnColReorder(i,e))}""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt)}else this.s.dt.oInstance.oApi._fnLog(oDTSettings,1,"ColReorder - array reorder does not match known number of columns. Skipping.")},_fnStateSave:function(t){var e,n,i,o=this.s.dt;for(e=0;e<t.aaSorting.length;e++)t.aaSorting[e][0]=o.aoColumns[t.aaSorting[e][0]]._ColReorder_iOrigCol;for(aSearchCopy=c.extend(!0,[],t.aoSearchCols),t.ColReorder=[],e=0,n=o.aoColumns.length;e<n;e++)i=o.aoColumns[e]._ColReorder_iOrigCol,t.aoSearchCols[i]=aSearchCopy[e],t.abVisCols[i]=o.aoColumns[e].bVisible,t.ColReorder.push(i)},_fnMouseListener:function(e,n){var o=this;c(n).unbind("mousemove.ColReorder"),c(n).unbind("mousedown.ColReorder"),this.s.allowResize&&c(n).bind("mousemove.ColReorder",function(t){if(null===o.dom.drag&&null===o.dom.resize){var e="TH"==t.target.nodeName?t.target:c(t.target).parents("TH")[0],n=c(e).offset(),i=c(e).innerWidth();Math.abs(t.pageX-Math.round(n.left+i))<=5?c(e).css({cursor:"col-resize"}):c(e).css({cursor:"pointer"})}}),c(n).bind("mousedown.ColReorder",function(t){return o._fnMouseDown.call(o,t,n,e),!1})},_fnMouseDown:function(t,e,n){var i=this,o=this.s.dt.aoColumns;if("col-resize"==c(e).css("cursor")){this.s.mouse.startX=t.pageX,this.s.mouse.startWidth=c(e).width(),this.s.mouse.resizeElem=c(e);var a=c(e).next();this.s.mouse.nextStartWidth=c(a).width(),i.dom.resize=!0,this.s.dt.aoColumns[n].bSortable=!1,this.s.dt.oFeatures.bAutoWidth=!1}else if(this.s.allowReorder){i.dom.resize=null;var r="TH"==t.target.nodeName?t.target:c(t.target).parents("TH")[0],s=c(r).offset();this.s.mouse.startX=t.pageX,this.s.mouse.startY=t.pageY,this.s.mouse.offsetX=t.pageX-s.left,this.s.mouse.offsetY=t.pageY-s.top,this.s.mouse.target=e,this.s.mouse.targetIndex=c("th",e.parentNode).index(e),this.s.mouse.fromIndex=this.s.dt.oInstance.oApi._fnVisibleToColumnIndex(this.s.dt,this.s.mouse.targetIndex),this.s.aoTargets.splice(0,this.s.aoTargets.length),this.s.aoTargets.push({x:c(this.s.dt.nTable).offset().left,to:0});for(var l=0,u=(n=0,o.length);n<u;n++)n!=this.s.mouse.fromIndex&&l++,o[n].bVisible&&this.s.aoTargets.push({x:c(o[n].nTh).offset().left+c(o[n].nTh).outerWidth(),to:l});0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed)}c(d).bind("mousemove.ColReorder",function(t){i._fnMouseMove.call(i,t,n)}),c(d).bind("mouseup.ColReorder",function(t){setTimeout(function(){i._fnMouseUp.call(i,t,n)},10)})},_fnMouseMove:function(t,e){var n;if(n=""!==this.s.dt.oInit.sScrollX,this.table_size<0&&n&&c("div.dataTables_scrollHead",this.s.dt.nTableWrapper)!=undefined&&0<c("div.dataTables_scrollHead",this.s.dt.nTableWrapper).length&&(this.table_size=c(c("div.dataTables_scrollHead",this.s.dt.nTableWrapper)[0].childNodes[0].childNodes[0]).width()),this.dom.resize){var i,o=this.s.mouse.resizeElem,a=c(o).next(),r=t.pageX-this.s.mouse.startX;if(0==r||n||c(a).width(this.s.mouse.nextStartWidth-r),c(o).width(this.s.mouse.startWidth+r),n&&c("div.dataTables_scrollHead",this.s.dt.nTableWrapper)!=undefined&&0<c("div.dataTables_scrollHead",this.s.dt.nTableWrapper).length&&c(c("div.dataTables_scrollHead",this.s.dt.nTableWrapper)[0].childNodes[0].childNodes[0]).width(this.table_size+r),null!=c("div.dataTables_scrollBody")&&0<c("div.dataTables_scrollBody").length){var s;for(s=i=-1;s<this.s.dt.aoColumns.length-1&&s!=e;s++)this.s.dt.aoColumns[s+1].bVisible&&i++;tableScroller=c("div.dataTables_scrollBody",this.s.dt.nTableWrapper)[0],scrollingTableHead=c(tableScroller)[0].childNodes[0].childNodes[0].childNodes[0],0==r||n||c(c(scrollingTableHead)[0].childNodes[i+1]).width(this.s.mouse.nextStartWidth-r),c(c(scrollingTableHead)[0].childNodes[i]).width(this.s.mouse.startWidth+r),n&&c(c(tableScroller)[0].childNodes[0]).width(this.table_size+r)}}else if(this.s.allowReorder){if(null===this.dom.drag){if(Math.pow(Math.pow(t.pageX-this.s.mouse.startX,2)+Math.pow(t.pageY-this.s.mouse.startY,2),.5)<5)return;this._fnCreateDragNode()}this.dom.drag.style.left=t.pageX-this.s.mouse.offsetX+"px",this.dom.drag.style.top=t.pageY-this.s.mouse.offsetY+"px";for(var l=!1,u=1,d=this.s.aoTargets.length;u<d;u++)if(t.pageX<this.s.aoTargets[u-1].x+(this.s.aoTargets[u].x-this.s.aoTargets[u-1].x)/2){this.dom.pointer.style.left=this.s.aoTargets[u-1].x+"px",this.s.mouse.toIndex=this.s.aoTargets[u-1].to,l=!0;break}l||(this.dom.pointer.style.left=this.s.aoTargets[this.s.aoTargets.length-1].x+"px",this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-1].to)}},_fnMouseUp:function(t,e){if(c(d).unbind("mousemove.ColReorder"),c(d).unbind("mouseup.ColReorder"),null!==this.dom.drag)d.body.removeChild(this.dom.drag),d.body.removeChild(this.dom.pointer),this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex),""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(),null!==this.s.dropCallback&&this.s.dropCallback.call(this),this._fnConstruct(),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt);else if(null!==this.dom.resize){var n,i,o,a,r;if(this.s.dt.aoColumns[e].bSortable=!0,this.s.dt.aoColumns[e].sWidth=c(this.s.mouse.resizeElem).innerWidth()+"px",!(r=""!==this.s.dt.oInit.sScrollX)){for(o=e+1;o<this.s.dt.aoColumns.length&&!this.s.dt.aoColumns[o].bVisible;o++);for(a=e-1;0<=a&&!this.s.dt.aoColumns[a].bVisible;a--);if(this.s.dt.aoColumns.length>o)this.s.dt.aoColumns[o].sWidth=c(this.s.mouse.resizeElem).next().innerWidth()+"px";else for(i=this.s.mouse.resizeElem,n=a;0<n;n--)this.s.dt.aoColumns[n].bVisible&&(i=c(i).prev(),this.s.dt.aoColumns[n].sWidth=c(i).innerWidth()+"px")}r&&c("div.dataTables_scrollHead",this.s.dt.nTableWrapper)!=undefined&&0<c("div.dataTables_scrollHead",this.s.dt.nTableWrapper).length&&(this.table_size=c(c("div.dataTables_scrollHead",this.s.dt.nTableWrapper)[0].childNodes[0].childNodes[0]).width()),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt)}this.dom.resize=null},_fnCreateDragNode:function(){var t=this;for(this.dom.drag=c(this.s.dt.nTHead.parentNode).clone(!0)[0],this.dom.drag.className+=" DTCR_clonedTable";0<this.dom.drag.getElementsByTagName("caption").length;)this.dom.drag.removeChild(this.dom.drag.getElementsByTagName("caption")[0]);for(;0<this.dom.drag.getElementsByTagName("tbody").length;)this.dom.drag.removeChild(this.dom.drag.getElementsByTagName("tbody")[0]);for(;0<this.dom.drag.getElementsByTagName("tfoot").length;)this.dom.drag.removeChild(this.dom.drag.getElementsByTagName("tfoot")[0]);c("thead tr:eq(0)",this.dom.drag).each(function(){c("th:not(:eq("+t.s.mouse.targetIndex+"))",this).remove()}),c("tr",this.dom.drag).height(c("tr:eq(0)",t.s.dt.nTHead).height()),c("thead tr:gt(0)",this.dom.drag).remove(),c("thead th:eq(0)",this.dom.drag).each(function(){this.style.width=c("th:eq("+t.s.mouse.targetIndex+")",t.s.dt.nTHead).width()+"px"}),this.dom.drag.style.position="absolute",this.dom.drag.style.zIndex=1200,this.dom.drag.style.top="0px",this.dom.drag.style.left="0px",this.dom.drag.style.width=c("th:eq("+t.s.mouse.targetIndex+")",t.s.dt.nTHead).outerWidth()+"px",this.dom.pointer=d.createElement("div"),this.dom.pointer.className="DTCR_pointer",this.dom.pointer.style.position="absolute",""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY?(this.dom.pointer.style.top=c(this.s.dt.nTable).offset().top+"px",this.dom.pointer.style.height=c(this.s.dt.nTable).height()+"px"):(this.dom.pointer.style.top=c("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top+"px",this.dom.pointer.style.height=c("div.dataTables_scroll",this.s.dt.nTableWrapper).height()+"px"),d.body.appendChild(this.dom.pointer),d.body.appendChild(this.dom.drag)},_fnDestroy:function(){for(var t=0,e=ColReorder.aoInstances.length;t<e;t++)if(ColReorder.aoInstances[t]===this){ColReorder.aoInstances.splice(t,1);break}c(this.s.dt.nTHead).find("*").unbind(".ColReorder"),this.s.dt.oInstance._oPluginColReorder=null,this.s=null}},ColReorder.aoInstances=[],ColReorder.fnReset=function(t){for(var e=0,n=ColReorder.aoInstances.length;e<n;e++)ColReorder.aoInstances[e].s.dt.oInstance==t&&ColReorder.aoInstances[e].fnReset()},ColReorder.prototype.CLASS="ColReorder",ColReorder.VERSION="1.0.7",ColReorder.prototype.VERSION=ColReorder.VERSION,"function"==typeof c.fn.dataTable&&"function"==typeof c.fn.dataTableExt.fnVersionCheck&&c.fn.dataTableExt.fnVersionCheck("1.9.3")?c.fn.dataTableExt.aoFeatures.push({fnInit:function(t){var e=t.oInstance;if("undefined"==typeof e._oPluginColReorder){var n="undefined"!=typeof t.oInit.oColReorder?t.oInit.oColReorder:{};e._oPluginColReorder=new ColReorder(t,n)}else e.oApi._fnLog(t,1,"ColReorder attempted to initialise twice. Ignoring second");return null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.9.3 or greater - www.datatables.net/download")}(jQuery,window,document),function(d){var o=function(t,e){return this.CLASS&&"ColVis"==this.CLASS||alert("Warning: ColVis must be initialised with the keyword 'new'"),void 0===e&&(e={}),this.s={dt:null,oInit:e,hidden:!0,abOriginal:[]},this.dom={wrapper:null,button:null,collection:null,background:null,catcher:null,buttons:[],groupButtons:[],restore:null},o.aInstances.push(this),this.s.dt=d.fn.dataTable.Api?new d.fn.dataTable.Api(t).settings()[0]:t,console.log(this.s.dt),this._fnConstruct(e),this};o.prototype={button:function(){return this.dom.wrapper},fnRebuild:function(){this.rebuild()},rebuild:function(){for(var t=this.dom.buttons.length-1;0<=t;t--)this.dom.collection.removeChild(this.dom.buttons[t]);this.dom.buttons.splice(0,this.dom.buttons.length),this.dom.restore&&this.dom.restore.parentNode(this.dom.restore),this._fnAddGroups(),this._fnAddButtons(),this._fnDrawCallback()},_fnConstruct:function(t){this._fnApplyCustomisation(t);var o,a,r=this;for(this.dom.wrapper=document.createElement("div"),this.dom.wrapper.className="ColVis",this.dom.button=d("<button />",{"class":this.s.dt.bJUI?"ColVis_Button ColVis_MasterButton ui-button ui-state-default":"ColVis_Button ColVis_MasterButton"}).append("<span>"+this.s.buttonText+"</span>").bind("mouseover"==this.s.activate?"mouseover":"click",function(t){t.preventDefault(),r._fnCollectionShow()}).appendTo(this.dom.wrapper)[0],this.dom.catcher=this._fnDomCatcher(),this.dom.collection=this._fnDomCollection(),this.dom.background=this._fnDomBackground(),this._fnAddGroups(),this._fnAddButtons(),o=0,a=this.s.dt.aoColumns.length;o<a;o++)this.s.abOriginal.push(this.s.dt.aoColumns[o].bVisible);this.s.dt.aoDrawCallback.push({fn:function(){r._fnDrawCallback.call(r)},sName:"ColVis"}),d(this.s.dt.oInstance).bind("column-reorder",function(t,e,n){for(o=0,a=r.s.aiExclude.length;o<a;o++)r.s.aiExclude[o]=n.aiInvertMapping[r.s.aiExclude[o]];var i=r.s.abOriginal.splice(n.iFrom,1)[0];r.s.abOriginal.splice(n.iTo,0,i),r.fnRebuild()})},_fnApplyCustomisation:function(t){d.extend(!0,this.s,o.defaults,t),!this.s.showAll&&this.s.bShowAll&&(this.s.showAll=this.s.sShowAll),!this.s.restore&&this.s.bRestore&&(this.s.restore=this.s.sRestore)},_fnDrawCallback:function(){for(var t,i=this.s.dt.aoColumns,e=this.dom.buttons,n=this.s.aoGroups,o=0,a=e.length;o<a;o++)(t=e[o]).__columnIdx!==undefined&&d("input",t).prop("checked",i[t.__columnIdx].bVisible);for(var r=function(t){for(var e=0,n=t.length;e<n;e++)if(!1===i[t[e]].bVisible)return!1;return!0},s=function(t){for(var e=0,n=t.length;e<n;e++)if(!0===i[t[e]].bVisible)return!1;return!0},l=0,u=n.length;l<u;l++)r(n[l].aiColumns)?(d("input",this.dom.groupButtons[l]).prop("checked",!0),d("input",this.dom.groupButtons[l]).prop("indeterminate",!1)):s(n[l].aiColumns)?(d("input",this.dom.groupButtons[l]).prop("checked",!1),d("input",this.dom.groupButtons[l]).prop("indeterminate",!1)):d("input",this.dom.groupButtons[l]).prop("indeterminate",!0)},_fnAddGroups:function(){var t;if("undefined"!=typeof this.s.aoGroups)for(var e=0,n=this.s.aoGroups.length;e<n;e++)t=this._fnDomGroupButton(e),this.dom.groupButtons.push(t),this.dom.buttons.push(t),this.dom.collection.appendChild(t)},_fnAddButtons:function(){var t,o=this.s.dt.aoColumns;if(-1===d.inArray("all",this.s.aiExclude))for(var e=0,n=o.length;e<n;e++)-1===d.inArray(e,this.s.aiExclude)&&((t=this._fnDomColumnButton(e)).__columnIdx=e,this.dom.buttons.push(t));"alpha"===this.s.order&&this.dom.buttons.sort(function(t,e){var n=o[t.__columnIdx].sTitle,i=o[e.__columnIdx].sTitle;return n===i?0:n<i?-1:1}),this.s.restore&&((t=this._fnDomRestoreButton()).className+=" ColVis_Restore",this.dom.buttons.push(t)),this.s.showAll&&((t=this._fnDomShowAllButton()).className+=" ColVis_ShowAll",this.dom.buttons.push(t)),d(this.dom.collection).append(this.dom.buttons)},_fnDomRestoreButton:function(){var n=this,t=this.s.dt;return d('<li class="ColVis_Special '+(t.bJUI?"ui-button ui-state-default":"")+'">'+this.s.restore+"</li>").click(function(){for(var t=0,e=n.s.abOriginal.length;t<e;t++)n.s.dt.oInstance.fnSetColumnVis(t,n.s.abOriginal[t],!1);n._fnAdjustOpenRows(),n.s.dt.oInstance.fnAdjustColumnSizing(!1),n.s.dt.oInstance.fnDraw(!1)})[0]},_fnDomShowAllButton:function(){var n=this,t=this.s.dt;return d('<li class="ColVis_Special '+(t.bJUI?"ui-button ui-state-default":"")+'">'+this.s.showAll+"</li>").click(function(){for(var t=0,e=n.s.abOriginal.length;t<e;t++)-1===n.s.aiExclude.indexOf(t)&&n.s.dt.oInstance.fnSetColumnVis(t,!0,!1);n._fnAdjustOpenRows(),n.s.dt.oInstance.fnAdjustColumnSizing(!1),n.s.dt.oInstance.fnDraw(!1)})[0]},_fnDomGroupButton:function(t){var i=this,e=this.s.dt,o=this.s.aoGroups[t];return d('<li class="ColVis_Special '+(e.bJUI?"ui-button ui-state-default":"")+'"><label><input type="checkbox" /><span>'+o.sTitle+"</span></label></li>").click(function(t){var e=!d("input",this).is(":checked");"li"!==t.target.nodeName.toLowerCase()&&(e=!e);for(var n=0;n<o.aiColumns.length;n++)i.s.dt.oInstance.fnSetColumnVis(o.aiColumns[n],e)})[0]},_fnDomColumnButton:function(i){var o=this,t=this.s.dt.aoColumns[i],a=this.s.dt,e=null===this.s.fnLabel?t.sTitle:this.s.fnLabel(i,t.sTitle,t.nTh);return d("<li "+(a.bJUI?'class="ui-button ui-state-default"':"")+'><label><input type="checkbox" /><span>'+e+"</span></label></li>").click(function(t){var e=!d("input",this).is(":checked");"li"!==t.target.nodeName.toLowerCase()&&(e=!e);var n=d.fn.dataTableExt.iApiIndex;d.fn.dataTableExt.iApiIndex=o._fnDataTablesApiIndex.call(o),a.oFeatures.bServerSide?(o.s.dt.oInstance.fnSetColumnVis(i,e,!1),o.s.dt.oInstance.fnAdjustColumnSizing(!1),""===a.oScroll.sX&&""===a.oScroll.sY||o.s.dt.oInstance.oApi._fnScrollDraw(o.s.dt),o._fnDrawCallback()):o.s.dt.oInstance.fnSetColumnVis(i,e),d.fn.dataTableExt.iApiIndex=n,null!==o.s.fnStateChange&&o.s.fnStateChange.call(o,i,e)})[0]},_fnDataTablesApiIndex:function(){for(var t=0,e=this.s.dt.oInstance.length;t<e;t++)if(this.s.dt.oInstance[t]==this.s.dt.nTable)return t;return 0},_fnDomCollection:function(){return d("<ul />",{"class":this.s.dt.bJUI?"ColVis_collection ui-buttonset ui-buttonset-multi":"ColVis_collection"}).css({display:"none",opacity:0,position:this.s.bCssPosition?"":"absolute"})[0]},_fnDomCatcher:function(){var t=this,e=document.createElement("div");return e.className="ColVis_catcher",d(e).click(function(){t._fnCollectionHide.call(t,null,null)}),e},_fnDomBackground:function(){var t=this,e=d("<div></div>").addClass("ColVis_collectionBackground").css("opacity",0).click(function(){t._fnCollectionHide.call(t,null,null)});return"mouseover"==this.s.activate&&e.mouseover(function(){t.s.overcollection=!1,t._fnCollectionHide.call(t,null,null)}),e[0]},_fnCollectionShow:function(){var t,e=this,n=d(this.dom.button).offset(),i=this.dom.collection,o=this.dom.background,a=parseInt(n.left,10),r=parseInt(n.top+d(this.dom.button).outerHeight(),10);this.s.bCssPosition||(i.style.top=r+"px",i.style.left=a+"px"),d(i).css({display:"block",opacity:0}),o.style.bottom="0px",o.style.right="0px";var s=this.dom.catcher.style;if(s.height=d(this.dom.button).outerHeight()+"px",s.width=d(this.dom.button).outerWidth()+"px",s.top=n.top+"px",s.left=a+"px",document.body.appendChild(o),document.body.appendChild(i),document.body.appendChild(this.dom.catcher),d(i).animate({opacity:1},e.s.iOverlayFade),d(o).animate({opacity:.1},e.s.iOverlayFade,"linear",function(){d.browser&&d.browser.msie&&"6.0"==d.browser.version&&e._fnDrawCallback()}),!this.s.bCssPosition){t="left"==this.s.sAlign?a:a-d(i).outerWidth()+d(this.dom.button).outerWidth(),i.style.left=t+"px";var l=d(i).outerWidth(),u=(d(i).outerHeight(),d(document).width());u<t+l&&(i.style.left=u-l+"px")}this.s.hidden=!1},_fnCollectionHide:function(){var t=this;this.s.hidden||null===this.dom.collection||(this.s.hidden=!0,d(this.dom.collection).animate({opacity:0},t.s.iOverlayFade,function(){this.style.display="none"}),d(this.dom.background).animate({opacity:0},t.s.iOverlayFade,function(){document.body.removeChild(t.dom.background),document.body.removeChild(t.dom.catcher)}))},_fnAdjustOpenRows:function(){for(var t=this.s.dt.aoOpenRows,e=this.s.dt.oApi._fnVisbleColumns(this.s.dt),n=0,i=t.length;n<i;n++)t[n].nTr.getElementsByTagName("td")[0].colSpan=e}},o.fnRebuild=function(t){var e=null;void 0!==t&&(e=t.fnSettings().nTable);for(var n=0,i=o.aInstances.length;n<i;n++)void 0!==t&&e!=o.aInstances[n].s.dt.nTable||o.aInstances[n].fnRebuild()},o.defaults={active:"click",buttonText:"Show / hide columns",aiExclude:[],bRestore:!1,sRestore:"Restore original",bShowAll:!1,sShowAll:"Show All",sAlign:"left",fnStateChange:null,iOverlayFade:500,fnLabel:null,bCssPosition:!1,aoGroups:[],order:"column"},o.aInstances=[],o.prototype.CLASS="ColVis",o.VERSION="1.1.0-dev",o.prototype.VERSION=o.VERSION,"function"==typeof d.fn.dataTable&&"function"==typeof d.fn.dataTableExt.fnVersionCheck&&d.fn.dataTableExt.fnVersionCheck("1.7.0")?d.fn.dataTableExt.aoFeatures.push({fnInit:function(t){var e="undefined"==typeof t.oInit.oColVis?{}:t.oInit.oColVis;return new o(t,e).dom.wrapper},cFeature:"C",sFeature:"ColVis"}):alert("Warning: ColVis requires DataTables 1.7 or greater - www.datatables.net/download"),d.fn.dataTable.ColVis=o}(jQuery),function(){var t=this,e=t._,r={},o=Array.prototype,n=Object.prototype,i=Function.prototype,a=o.push,l=o.slice,s=o.concat,c=n.toString,u=n.hasOwnProperty,d=o.forEach,h=o.map,f=o.reduce,p=o.reduceRight,m=o.filter,g=o.every,v=o.some,y=o.indexOf,_=o.lastIndexOf,b=Array.isArray,w=Object.keys,x=i.bind,C=function(t){return t instanceof C?t:this instanceof C?void(this._wrapped=t):new C(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):t._=C,C.VERSION="1.6.0";var L=C.each=C.forEach=function(t,e,n){if(null==t)return t;if(d&&t.forEach===d)t.forEach(e,n);else if(t.length===+t.length){for(var i=0,o=t.length;i<o;i++)if(e.call(n,t[i],i,t)===r)return}else{var a=C.keys(t);for(i=0,o=a.length;i<o;i++)if(e.call(n,t[a[i]],a[i],t)===r)return}return t};C.map=C.collect=function(t,i,o){var a=[];return null==t?a:h&&t.map===h?t.map(i,o):(L(t,function(t,e,n){a.push(i.call(o,t,e,n))}),a)};var S="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(t,i,o,a){var r=2<arguments.length;if(null==t&&(t=[]),f&&t.reduce===f)return a&&(i=C.bind(i,a)),r?t.reduce(i,o):t.reduce(i);if(L(t,function(t,e,n){r?o=i.call(a,o,t,e,n):(o=t,r=!0)}),!r)throw new TypeError(S);return o},C.reduceRight=C.foldr=function(i,o,a,r){var s=2<arguments.length;if(null==i&&(i=[]),p&&i.reduceRight===p)return r&&(o=C.bind(o,r)),s?i.reduceRight(o,a):i.reduceRight(o);var l=i.length;if(l!==+l){var u=C.keys(i);l=u.length}if(L(i,function(t,e,n){e=u?u[--l]:--l,s?a=o.call(r,a,i[e],e,n):(a=i[e],s=!0)}),!s)throw new TypeError(S);return a},C.find=C.detect=function(t,i,o){var a;return k(t,function(t,e,n){return i.call(o,t,e,n)?(a=t,!0):void 0}),a},C.filter=C.select=function(t,i,o){var a=[];return null==t?a:m&&t.filter===m?t.filter(i,o):(L(t,function(t,e,n){i.call(o,t,e,n)&&a.push(t)}),a)},C.reject=function(t,i,o){return C.filter(t,function(t,e,n){return!i.call(o,t,e,n)},o)},C.every=C.all=function(t,i,o){i||(i=C.identity);var a=!0;return null==t?a:g&&t.every===g?t.every(i,o):(L(t,function(t,e,n){return(a=a&&i.call(o,t,e,n))?void 0:r}),!!a)};var k=C.some=C.any=function(t,i,o){i||(i=C.identity);var a=!1;return null==t?a:v&&t.some===v?t.some(i,o):(L(t,function(t,e,n){return a||(a=i.call(o,t,e,n))?r:void 0}),!!a)};C.contains=C.include=function(t,e){return null!=t&&(y&&t.indexOf===y?-1!=t.indexOf(e):k(t,function(t){return t===e}))},C.invoke=function(t,e){var n=l.call(arguments,2),i=C.isFunction(e);return C.map(t,function(t){return(i?e:t[e]).apply(t,n)})},C.pluck=function(t,e){return C.map(t,C.property(e))},C.where=function(t,e){return C.filter(t,C.matches(e))},C.findWhere=function(t,e){return C.find(t,C.matches(e))},C.max=function(t,o,a){if(!o&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var r=-1/0,s=-1/0;return L(t,function(t,e,n){var i=o?o.call(a,t,e,n):t;s<i&&(r=t,s=i)}),r},C.min=function(t,o,a){if(!o&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var r=1/0,s=1/0;return L(t,function(t,e,n){var i=o?o.call(a,t,e,n):t;i<s&&(r=t,s=i)}),r},C.shuffle=function(t){var e,n=0,i=[];return L(t,function(t){e=C.random(n++),i[n-1]=i[e],i[e]=t}),i},C.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=C.values(t)),t[C.random(t.length-1)]):C.shuffle(t).slice(0,Math.max(0,e))};var D=function(t){return null==t?C.identity:C.isFunction(t)?t:C.property(t)};C.sortBy=function(t,i,o){return i=D(i),C.pluck(C.map(t,function(t,e,n){return{value:t,index:e,criteria:i.call(o,t,e,n)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(i<n||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};var T=function(s){return function(i,o,a){var r={};return o=D(o),L(i,function(t,e){var n=o.call(a,t,e,i);s(r,n,t)}),r}};C.groupBy=T(function(t,e,n){C.has(t,e)?t[e].push(n):t[e]=[n]}),C.indexBy=T(function(t,e,n){t[e]=n}),C.countBy=T(function(t,e){C.has(t,e)?t[e]++:t[e]=1}),C.sortedIndex=function(t,e,n,i){for(var o=(n=D(n)).call(i,e),a=0,r=t.length;a<r;){var s=a+r>>>1;n.call(i,t[s])<o?a=s+1:r=s}return a},C.toArray=function(t){return t?C.isArray(t)?l.call(t):t.length===+t.length?C.map(t,C.identity):C.values(t):[]},C.size=function(t){return null==t?0:t.length===+t.length?t.length:C.keys(t).length},C.first=C.head=C.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:e<0?[]:l.call(t,0,e)},C.initial=function(t,e,n){return l.call(t,0,t.length-(null==e||n?1:e))},C.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:l.call(t,Math.max(t.length-e,0))},C.rest=C.tail=C.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},C.compact=function(t){return C.filter(t,C.identity)};var M=function(t,e,n){return e&&C.every(t,C.isArray)?s.apply(n,t):(L(t,function(t){C.isArray(t)||C.isArguments(t)?e?a.apply(n,t):M(t,e,n):n.push(t)}),n)};C.flatten=function(t,e){return M(t,e,[])},C.without=function(t){return C.difference(t,l.call(arguments,1))},C.partition=function(t,e){var n=[],i=[];return L(t,function(t){(e(t)?n:i).push(t)}),[n,i]},C.uniq=C.unique=function(n,i,t,e){C.isFunction(i)&&(e=t,t=i,i=!1);var o=t?C.map(n,t,e):n,a=[],r=[];return L(o,function(t,e){(i?e&&r[r.length-1]===t:C.contains(r,t))||(r.push(t),a.push(n[e]))}),a},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(t){var n=l.call(arguments,1);return C.filter(C.uniq(t),function(e){return C.every(n,function(t){return C.contains(t,e)})})},C.difference=function(t){var e=s.apply(o,l.call(arguments,1));return C.filter(t,function(t){return!C.contains(e,t)})},C.zip=function(){for(var t=C.max(C.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;n<t;n++)e[n]=C.pluck(arguments,""+n);return e},C.object=function(t,e){if(null==t)return{};for(var n={},i=0,o=t.length;i<o;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},C.indexOf=function(t,e,n){if(null==t)return-1;var i=0,o=t.length;if(n){if("number"!=typeof n)return t[i=C.sortedIndex(t,e)]===e?i:-1;i=n<0?Math.max(0,o+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;i<o;i++)if(t[i]===e)return i;return-1},C.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(_&&t.lastIndexOf===_)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var o=i?n:t.length;o--;)if(t[o]===e)return o;return-1},C.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),o=0,a=new Array(i);o<i;)a[o++]=t,t+=n;return a};var P=function(){};C.bind=function(n,i){var o,a;if(x&&n.bind===x)return x.apply(n,l.call(arguments,1));if(!C.isFunction(n))throw new TypeError;return o=l.call(arguments,2),a=function(){if(!(this instanceof a))return n.apply(i,o.concat(l.call(arguments)));P.prototype=n.prototype;var t=new P;P.prototype=null;var e=n.apply(t,o.concat(l.call(arguments)));return Object(e)===e?e:t}},C.partial=function(o){var a=l.call(arguments,1);return function(){for(var t=0,e=a.slice(),n=0,i=e.length;n<i;n++)e[n]===C&&(e[n]=arguments[t++]);for(;t<arguments.length;)e.push(arguments[t++]);return o.apply(this,e)}},C.bindAll=function(e){var t=l.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return L(t,function(t){e[t]=C.bind(e[t],e)}),e},C.memoize=function(e,n){var i={};return n||(n=C.identity),function(){var t=n.apply(this,arguments);return C.has(i,t)?i[t]:i[t]=e.apply(this,arguments)}},C.delay=function(t,e){var n=l.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},C.defer=function(t){return C.delay.apply(C,[t,1].concat(l.call(arguments,1)))},C.throttle=function(n,i,o){var a,r,s,l=null,u=0;o||(o={});var d=function(){u=!1===o.leading?0:C.now(),l=null,s=n.apply(a,r),a=r=null};return function(){var t=C.now();u||!1!==o.leading||(u=t);var e=i-(t-u);return a=this,r=arguments,e<=0?(clearTimeout(l),l=null,u=t,s=n.apply(a,r),a=r=null):l||!1===o.trailing||(l=setTimeout(d,e)),s}},C.debounce=function(e,n,i){var o,a,r,s,l,u=function(){var t=C.now()-s;t<n?o=setTimeout(u,n-t):(o=null,i||(l=e.apply(r,a),r=a=null))};return function(){r=this,a=arguments,s=C.now();var t=i&&!o;return o||(o=setTimeout(u,n)),t&&(l=e.apply(r,a),r=a=null),l}},C.once=function(t){var e,n=!1;return function(){return n||(n=!0,e=t.apply(this,arguments),t=null),e}},C.wrap=function(t,e){return C.partial(e,t)},C.compose=function(){var n=arguments;return function(){for(var t=arguments,e=n.length-1;0<=e;e--)t=[n[e].apply(this,t)];return t[0]}},C.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},C.keys=function(t){if(!C.isObject(t))return[];if(w)return w(t);var e=[];for(var n in t)C.has(t,n)&&e.push(n);return e},C.values=function(t){for(var e=C.keys(t),n=e.length,i=new Array(n),o=0;o<n;o++)i[o]=t[e[o]];return i},C.pairs=function(t){for(var e=C.keys(t),n=e.length,i=new Array(n),o=0;o<n;o++)i[o]=[e[o],t[e[o]]];return i},C.invert=function(t){for(var e={},n=C.keys(t),i=0,o=n.length;i<o;i++)e[t[n[i]]]=n[i];return e},C.functions=C.methods=function(t){var e=[];for(var n in t)C.isFunction(t[n])&&e.push(n);return e.sort()},C.extend=function(n){return L(l.call(arguments,1),function(t){if(t)for(var e in t)n[e]=t[e]}),n},C.pick=function(e){var n={},t=s.apply(o,l.call(arguments,1));return L(t,function(t){t in e&&(n[t]=e[t])}),n},C.omit=function(t){var e={},n=s.apply(o,l.call(arguments,1));for(var i in t)C.contains(n,i)||(e[i]=t[i]);return e},C.defaults=function(n){return L(l.call(arguments,1),function(t){if(t)for(var e in t)void 0===n[e]&&(n[e]=t[e])}),n},C.clone=function(t){return C.isObject(t)?C.isArray(t)?t.slice():C.extend({},t):t},C.tap=function(t,e){return e(t),t};var E=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof C&&(t=t._wrapped),e instanceof C&&(e=e._wrapped);var o=c.call(t);if(o!=c.call(e))return!1;switch(o){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var a=n.length;a--;)if(n[a]==t)return i[a]==e;var r=t.constructor,s=e.constructor;if(r!==s&&!(C.isFunction(r)&&r instanceof r&&C.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),i.push(e);var l=0,u=!0;if("[object Array]"==o){if(u=(l=t.length)==e.length)for(;l--&&(u=E(t[l],e[l],n,i)););}else{for(var d in t)if(C.has(t,d)&&(l++,!(u=C.has(e,d)&&E(t[d],e[d],n,i))))break;if(u){for(d in e)if(C.has(e,d)&&!l--)break;u=!l}}return n.pop(),i.pop(),u};C.isEqual=function(t,e){return E(t,e,[],[])},C.isEmpty=function(t){if(null==t)return!0;if(C.isArray(t)||C.isString(t))return 0===t.length;for(var e in t)if(C.has(t,e))return!1;return!0},C.isElement=function(t){return!(!t||1!==t.nodeType)},C.isArray=b||function(t){return"[object Array]"==c.call(t)},C.isObject=function(t){return t===Object(t)},L(["Arguments","Function","String","Number","Date","RegExp"],function(e){C["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),C.isArguments(arguments)||(C.isArguments=function(t){return!(!t||!C.has(t,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(t){return"function"==typeof t}),C.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},C.isNaN=function(t){return C.isNumber(t)&&t!=+t},C.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"==c.call(t)},C.isNull=function(t){return null===t},C.isUndefined=function(t){return void 0===t},C.has=function(t,e){return u.call(t,e)},C.noConflict=function(){return t._=e,this},C.identity=function(t){return t},C.constant=function(t){return function(){return t}},C.property=function(e){return function(t){return t[e]}},C.matches=function(n){return function(t){if(t===n)return!0;for(var e in n)if(n[e]!==t[e])return!1;return!0}},C.times=function(t,e,n){for(var i=Array(Math.max(0,t)),o=0;o<t;o++)i[o]=e.call(n,o);return i},C.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},C.now=Date.now||function(){return(new Date).getTime()};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=C.invert(I.escape);var A={escape:new RegExp("["+C.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(I.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(e){C[e]=function(t){return null==t?"":(""+t).replace(A[e],function(t){return I[e][t]})}}),C.result=function(t,e){if(null!=t){var n=t[e];return C.isFunction(n)?n.call(t):n}},C.mixin=function(n){L(C.functions(n),function(t){var e=C[t]=n[t];C.prototype[t]=function(){var t=[this._wrapped];return a.apply(t,arguments),B.call(this,e.apply(C,t))}})};var O=0;C.uniqueId=function(t){var e=++O+"";return t?t+e:e},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(a,t,e){var n;e=C.defaults({},e,C.templateSettings);var i=new RegExp([(e.escape||F).source,(e.interpolate||F).source,(e.evaluate||F).source].join("|")+"|$","g"),r=0,s="__p+='";a.replace(i,function(t,e,n,i,o){return s+=a.slice(r,o).replace(R,function(t){return"\\"+N[t]}),e&&(s+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),i&&(s+="';\n"+i+"\n__p+='"),r=o+t.length,t}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),
s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(e.variable||"obj","_",s)}catch(l){throw l.source=s,l}if(t)return n(t,C);var o=function(t){return n.call(this,t,C)};return o.source="function("+(e.variable||"obj")+"){\n"+s+"}",o},C.chain=function(t){return C(t).chain()};var B=function(t){return this._chain?C(t).chain():t};C.mixin(C),L(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=o[e];C.prototype[e]=function(){var t=this._wrapped;return n.apply(t,arguments),"shift"!=e&&"splice"!=e||0!==t.length||delete t[0],B.call(this,t)}}),L(["concat","join","slice"],function(t){var e=o[t];C.prototype[t]=function(){return B.call(this,e.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return C})}.call(this),document,L.labelVersion="0.2.1-dev",L.Label=L.Class.extend({includes:L.Mixin.Events,options:{className:"",clickable:!1,direction:"right",noHide:!1,offset:[12,-15],opacity:1,zoomAnimation:!0},initialize:function(t,e){L.setOptions(this,t),this._source=e,this._animated=L.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._pane=this._source instanceof L.Marker?t._panes.markerPane:t._panes.popupPane,this._container||this._initLayout(),this._pane.appendChild(this._container),this._initInteraction(),this._update(),this.setOpacity(this.options.opacity),t.on("moveend",this._onMoveEnd,this).on("viewreset",this._onViewReset,this),this._animated&&t.on("zoomanim",this._zoomAnimation,this),L.Browser.touch&&!this.options.noHide&&L.DomEvent.on(this._container,"click",this.close,this)},onRemove:function(t){this._pane.removeChild(this._container),t.off({zoomanim:this._zoomAnimation,moveend:this._onMoveEnd,viewreset:this._onViewReset},this),this._removeInteraction(),this._map=null},setLatLng:function(t){return this._latlng=L.latLng(t),this._map&&this._updatePosition(),this},setContent:function(t){return this._previousContent=this._content,this._content=t,this._updateContent(),this},close:function(){var t=this._map;t&&(L.Browser.touch&&!this.options.noHide&&L.DomEvent.off(this._container,"click",this.close),t.removeLayer(this))},updateZIndex:function(t){this._zIndex=t,this._container&&this._zIndex&&(this._container.style.zIndex=t)},setOpacity:function(t){this.options.opacity=t,this._container&&L.DomUtil.setOpacity(this._container,t)},_initLayout:function(){this._container=L.DomUtil.create("div","leaflet-label "+this.options.className+" leaflet-zoom-animated"),this.updateZIndex(this._zIndex)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updatePosition(),this._container.style.visibility="")},_updateContent:function(){this._content&&this._map&&this._prevContent!==this._content&&"string"==typeof this._content&&(this._container.innerHTML=this._content,this._prevContent=this._content,this._labelWidth=this._container.offsetWidth)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},_setPosition:function(t){var e=this._map,n=this._container,i=e.latLngToContainerPoint(e.getCenter()),o=e.layerPointToContainerPoint(t),a=this.options.direction,r=this._labelWidth,s=L.point(this.options.offset);"right"===a||"auto"===a&&o.x<i.x?(L.DomUtil.addClass(n,"leaflet-label-right"),L.DomUtil.removeClass(n,"leaflet-label-left"),t=t.add(s)):(L.DomUtil.addClass(n,"leaflet-label-left"),L.DomUtil.removeClass(n,"leaflet-label-right"),t=t.add(L.point(-s.x-r,s.y))),L.DomUtil.setPosition(n,t)},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPosition(e)},_onMoveEnd:function(){this._animated&&"auto"!==this.options.direction||this._updatePosition()},_onViewReset:function(t){t&&t.hard&&this._update()},_initInteraction:function(){if(this.options.clickable){var t=this._container,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];L.DomUtil.addClass(t,"leaflet-clickable"),L.DomEvent.on(t,"click",this._onMouseClick,this);for(var n=0;e.length>n;n++)L.DomEvent.on(t,e[n],this._fireMouseEvent,this)}},_removeInteraction:function(){if(this.options.clickable){var t=this._container,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];L.DomUtil.removeClass(t,"leaflet-clickable"),L.DomEvent.off(t,"click",this._onMouseClick,this);for(var n=0;e.length>n;n++)L.DomEvent.off(t,e[n],this._fireMouseEvent,this)}},_onMouseClick:function(t){this.hasEventListeners(t.type)&&L.DomEvent.stopPropagation(t),this.fire(t.type,{originalEvent:t})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&L.DomEvent.preventDefault(t),"mousedown"!==t.type?L.DomEvent.stopPropagation(t):L.DomEvent.preventDefault(t)}}),L.BaseMarkerMethods={showLabel:function(){return this.label&&this._map&&(this.label.setLatLng(this._latlng),this._map.showLabel(this.label)),this},hideLabel:function(){return this.label&&this.label.close(),this},setLabelNoHide:function(t){this._labelNoHide!==t&&((this._labelNoHide=t)?(this._removeLabelRevealHandlers(),this.showLabel()):(this._addLabelRevealHandlers(),this.hideLabel()))},bindLabel:function(t,e){var n=this.options.icon?this.options.icon.options.labelAnchor:this.options.labelAnchor,i=L.point(n)||L.point(0,0);return i=i.add(L.Label.prototype.options.offset),e&&e.offset&&(i=i.add(e.offset)),e=L.Util.extend({offset:i},e),this._labelNoHide=e.noHide,this.label||(this._labelNoHide||this._addLabelRevealHandlers(),this.on("remove",this.hideLabel,this).on("move",this._moveLabel,this).on("add",this._onMarkerAdd,this),this._hasLabelHandlers=!0),this.label=new L.Label(e,this).setContent(t),this},unbindLabel:function(){return this.label&&(this.hideLabel(),this.label=null,this._hasLabelHandlers&&(this._labelNoHide||this._removeLabelRevealHandlers(),this.off("remove",this.hideLabel,this).off("move",this._moveLabel,this).off("add",this._onMarkerAdd,this)),this._hasLabelHandlers=!1),this},updateLabelContent:function(t){this.label&&this.label.setContent(t)},getLabel:function(){return this.label},_onMarkerAdd:function(){this._labelNoHide&&this.showLabel()},_addLabelRevealHandlers:function(){this.on("mouseover",this.showLabel,this).on("mouseout",this.hideLabel,this),L.Browser.touch&&this.on("click",this.showLabel,this)},_removeLabelRevealHandlers:function(){this.off("mouseover",this.showLabel,this).off("mouseout",this.hideLabel,this),L.Browser.touch&&this.off("click",this.showLabel,this)},_moveLabel:function(t){this.label.setLatLng(t.latlng)}},L.Icon.Default.mergeOptions({labelAnchor:new L.Point(9,-20)}),L.Marker.mergeOptions({icon:new L.Icon.Default}),L.Marker.include(L.BaseMarkerMethods),L.Marker.include({_originalUpdateZIndex:L.Marker.prototype._updateZIndex,_updateZIndex:function(t){var e=this._zIndex+t;this._originalUpdateZIndex(t),this.label&&this.label.updateZIndex(e)},_originalSetOpacity:L.Marker.prototype.setOpacity,setOpacity:function(t,e){this.options.labelHasSemiTransparency=e,this._originalSetOpacity(t)},_originalUpdateOpacity:L.Marker.prototype._updateOpacity,_updateOpacity:function(){var t=0===this.options.opacity?0:1;this._originalUpdateOpacity(),this.label&&this.label.setOpacity(this.options.labelHasSemiTransparency?this.options.opacity:t)},_originalSetLatLng:L.Marker.prototype.setLatLng,setLatLng:function(t){return this.label&&!this._labelNoHide&&this.hideLabel(),this._originalSetLatLng(t)}}),L.CircleMarker.mergeOptions({labelAnchor:new L.Point(0,0)}),L.CircleMarker.include(L.BaseMarkerMethods),L.Path.include({bindLabel:function(t,e){return this.label&&this.label.options===e||(this.label=new L.Label(e,this)),this.label.setContent(t),this._showLabelAdded||(this.on("mouseover",this._showLabel,this).on("mousemove",this._moveLabel,this).on("mouseout remove",this._hideLabel,this),L.Browser.touch&&this.on("click",this._showLabel,this),this._showLabelAdded=!0),this},unbindLabel:function(){return this.label&&(this._hideLabel(),this.label=null,this._showLabelAdded=!1,this.off("mouseover",this._showLabel,this).off("mousemove",this._moveLabel,this).off("mouseout remove",this._hideLabel,this)),this},updateLabelContent:function(t){this.label&&this.label.setContent(t)},_showLabel:function(t){this.label.setLatLng(t.latlng),this._map.showLabel(this.label)},_moveLabel:function(t){this.label.setLatLng(t.latlng)},_hideLabel:function(){this.label.close()}}),L.Map.include({showLabel:function(t){return this.addLayer(t)}}),L.FeatureGroup.include({clearLayers:function(){return this.unbindLabel(),this.eachLayer(this.removeLayer,this),this},bindLabel:function(t,e){return this.invoke("bindLabel",t,e)},unbindLabel:function(){return this.invoke("unbindLabel")},updateLabelContent:function(t){this.invoke("updateLabelContent",t)}}),function(){L.Control.FullScreen=L.Control.extend({options:{position:"topleft",title:"Full Screen",forceSeparateButton:!1,forcePseudoFullscreen:!1,fullScreenEl:null},onAdd:function(t){var e,n="leaflet-control-zoom-fullscreen";return e=t.zoomControl&&!this.options.forceSeparateButton?t.zoomControl._container:L.DomUtil.create("div","leaflet-bar"),this._createButton(this.options.title,n,e,this.toggleFullScreen,this),e},_createButton:function(t,e,n,i,o){var a=L.DomUtil.create("a",e,n);return a.href="#",a.title=t,L.DomEvent.addListener(a,"click",L.DomEvent.stopPropagation).addListener(a,"click",L.DomEvent.preventDefault).addListener(a,"click",i,o),L.DomEvent.addListener(n,r.fullScreenEventName,L.DomEvent.stopPropagation).addListener(n,r.fullScreenEventName,L.DomEvent.preventDefault).addListener(n,r.fullScreenEventName,this._handleEscKey,o),L.DomEvent.addListener(document,r.fullScreenEventName,L.DomEvent.stopPropagation).addListener(document,r.fullScreenEventName,L.DomEvent.preventDefault).addListener(document,r.fullScreenEventName,this._handleEscKey,o),a},toggleFullScreen:function(){var t=this._map,e=this.options.fullScreenEl||t._container;t._exitFired=!1,t._isFullscreen?(r.supportsFullScreen&&!this.options.forcePseudoFullscreen?r.cancelFullScreen(e):L.DomUtil.removeClass(e,"leaflet-pseudo-fullscreen"),t.invalidateSize(),t.fire("exitFullscreen"),t._exitFired=!0,t._isFullscreen=!1):(r.supportsFullScreen&&!this.options.forcePseudoFullscreen?r.requestFullScreen(e):L.DomUtil.addClass(e,"leaflet-pseudo-fullscreen"),t.invalidateSize(),t.fire("enterFullscreen"),t._isFullscreen=!0)},_handleEscKey:function(){var t=this._map;r.isFullScreen(t)||t._exitFired||(t.fire("exitFullscreen"),t._exitFired=!0,t._isFullscreen=!1)}}),L.Map.addInitHook(function(){this.options.fullscreenControl&&(this.fullscreenControl=L.control.fullscreen(this.options.fullscreenControlOptions),this.addControl(this.fullscreenControl))});var r={supportsFullScreen:!(L.control.fullscreen=function(t){return new L.Control.FullScreen(t)}),isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},t="webkit moz o ms khtml".split(" ");if("undefined"!=typeof document.exitFullscreen)r.supportsFullScreen=!0;else for(var e=0,n=t.length;e<n;e++)if(r.prefix=t[e],"undefined"!=typeof document[r.prefix+"CancelFullScreen"]){r.supportsFullScreen=!0;break}r.supportsFullScreen&&(r.fullScreenEventName=r.prefix+"fullscreenchange",r.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},r.requestFullScreen=function(t){return""===this.prefix?t.requestFullscreen():t[this.prefix+"RequestFullScreen"]()},r.cancelFullScreen=function(){return""===this.prefix?document.exitFullscreen():document[this.prefix+"CancelFullScreen"]()}),"undefined"!=typeof jQuery&&(jQuery.fn.requestFullScreen=function(){return this.each(function(){var t=jQuery(this);r.supportsFullScreen&&r.requestFullScreen(t)})}),window.fullScreenApi=r}(),L.Control.Sidebar=L.Control.extend({includes:L.Mixin.Events,initialize:function(t,e){var n,i;for(L.setOptions(this,e),this._sidebar=L.DomUtil.get(t),L.Browser.touch&&L.DomUtil.addClass(this._sidebar,"leaflet-touch"),n=this._sidebar.children.length-1;0<=n;n--)"UL"==(i=this._sidebar.children[n]).tagName&&L.DomUtil.hasClass(i,"sidebar-tabs")?this._tabs=i:"DIV"==i.tagName&&L.DomUtil.hasClass(i,"sidebar-content")&&(this._container=i);for(this._tabitems=[],n=this._tabs.children.length-1;0<=n;n--)"LI"==(i=this._tabs.children[n]).tagName&&(this._tabitems.push(i),i._sidebar=this);for(this._panes=[],n=this._container.children.length-1;0<=n;n--)"DIV"==(i=this._container.children[n]).tagName&&L.DomUtil.hasClass(i,"sidebar-pane")&&this._panes.push(i);this._hasTouchStart=L.Browser.touch&&"ontouchstart"in document.documentElement},addTo:function(t){this._map=t;for(var e=this._hasTouchStart?"touchstart":"click",n=this._tabitems.length-1;0<=n;n--){var i=this._tabitems[n];L.DomEvent.on(i.firstChild,e,this._onClick,i)}return this},removeFrom:function(){this._map=null;for(var t=this._hasTouchStart?"touchstart":"click",e=this._tabitems.length-1;0<=e;e--){var n=this._tabitems[e];L.DomEvent.off(n.firstChild,t,this._onClick)}return this},open:function(t){var e,n;for(e=this._panes.length-1;0<=e;e--)(n=this._panes[e]).id==t?L.DomUtil.addClass(n,"active"):L.DomUtil.hasClass(n,"active")&&L.DomUtil.removeClass(n,"active");for(e=this._tabitems.length-1;0<=e;e--)(n=this._tabitems[e]).firstChild.hash=="#"+t?L.DomUtil.addClass(n,"active"):L.DomUtil.hasClass(n,"active")&&L.DomUtil.removeClass(n,"active");return this.fire("content",{id:t}),L.DomUtil.hasClass(this._sidebar,"collapsed")&&(this.fire("opening"),L.DomUtil.removeClass(this._sidebar,"collapsed")),this},close:function(){for(var t=this._tabitems.length-1;0<=t;t--){var e=this._tabitems[t];L.DomUtil.hasClass(e,"active")&&L.DomUtil.removeClass(e,"active")}return L.DomUtil.hasClass(this._sidebar,"collapsed")||(this.fire("closing"),L.DomUtil.addClass(this._sidebar,"collapsed")),this},_onClick:function(){L.DomUtil.hasClass(this,"active")?this._sidebar.close():this._sidebar.open(this.firstChild.hash.slice(1))}}),L.control.sidebar=function(t,e){return new L.Control.Sidebar(t,e)},L.Control.NavBar=L.Control.extend({options:{position:"topleft",forwardTitle:"Go forward in map view history",backTitle:"Go back in map view history",homeTitle:"Go to home map view"},onAdd:function(t){this.options.center||(this.options.center=t.getCenter()),this.options.zoom||(this.options.zoom=t.getZoom()),options=this.options;var e="leaflet-control-navbar",n=L.DomUtil.create("div",e+" leaflet-bar");return this._homeButton=this._createButton(options.homeTitle,e+"-home",n,this._goHome),this._fwdButton=this._createButton(options.forwardTitle,e+"-fwd",n,this._goFwd),this._backButton=this._createButton(options.backTitle,e+"-back",n,this._goBack),this._viewHistory=[{center:this.options.center,zoom:this.options.zoom}],this._curIndx=0,this._updateDisabled(),t.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this),t.setView(options.center,options.zoom),n},onRemove:function(t){t.off("moveend",this._updateHistory,this)},_goHome:function(){this.options.home_center&&this.options.home_zoom?this._map.setView(this.options.home_center,this.options.home_zoom):this._map.setView(this.options.center,this.options.zoom)},_goBack:function(){if(0!==this._curIndx){this._map.off("moveend",this._updateHistory,this),this._map.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this),this._curIndx--,this._updateDisabled();var t=this._viewHistory[this._curIndx];this._map.setView(t.center,t.zoom)}},_goFwd:function(){if(this._curIndx!=this._viewHistory.length-1){this._map.off("moveend",this._updateHistory,this),this._map.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this),this._curIndx++,this._updateDisabled();var t=this._viewHistory[this._curIndx];this._map.setView(t.center,t.zoom)}},_createButton:function(t,e,n,i){var o=L.DomUtil.create("a",e,n);return o.href="#",o.title=t,L.DomEvent.on(o,"mousedown dblclick",L.DomEvent.stopPropagation).on(o,"click",L.DomEvent.stop).on(o,"click",i,this).on(o,"click",this._refocusOnMap,this),o},_updateHistory:function(){var t={center:this._map.getCenter(),zoom:this._map.getZoom()},e=this._curIndx+1;this._viewHistory.splice(e,this._viewHistory.length-e,t),this._curIndx++,this._updateDisabled()},_setFwdEnabled:function(t){var e="leaflet-disabled",n="leaflet-control-navbar-fwd-disabled";!0===t?(L.DomUtil.removeClass(this._fwdButton,n),L.DomUtil.removeClass(this._fwdButton,e)):(L.DomUtil.addClass(this._fwdButton,n),L.DomUtil.addClass(this._fwdButton,e))},_setBackEnabled:function(t){var e="leaflet-disabled",n="leaflet-control-navbar-back-disabled";!0===t?(L.DomUtil.removeClass(this._backButton,n),L.DomUtil.removeClass(this._backButton,e)):(L.DomUtil.addClass(this._backButton,n),L.DomUtil.addClass(this._backButton,e))},_updateDisabled:function(){this._curIndx==this._viewHistory.length-1?this._setFwdEnabled(!1):this._setFwdEnabled(!0),this._curIndx<=0?this._setBackEnabled(!1):this._setBackEnabled(!0)}}),L.control.navbar=function(t){return new L.Control.NavBar(t)},function t(r,s,l){function u(n,e){if(!s[n]){if(!r[n]){var i="function"==typeof require&&require;if(!e&&i)return i(n,!0);if(d)return d(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var a=s[n]={exports:{}};r[n][0].call(a.exports,function(t){var e=r[n][1][t];return u(e||t)},a,a.exports,t,r,s,l)}return s[n].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(t,e){"use strict";function n(t){var e;t&&t.length&&(t=(e=t).length);var n=new Uint8Array(t||0);return e&&n.set(e),n.readUInt32LE=i.readUInt32LE,n.writeUInt32LE=i.writeUInt32LE,n.readInt32LE=i.readInt32LE,n.writeInt32LE=i.writeInt32LE,n.readFloatLE=i.readFloatLE,n.writeFloatLE=i.writeFloatLE,n.readDoubleLE=i.readDoubleLE,n.writeDoubleLE=i.writeDoubleLE,n.toString=i.toString,n.write=i.write,n.slice=i.slice,n.copy=i.copy,n._isBuffer=!0,n}function o(t){for(var e,n,i=t.length,o=[],a=0;a<i;a++){if(55295<(e=t.charCodeAt(a))&&e<57344){if(!n){56319<e||a+1===i?o.push(239,191,189):n=e;continue}if(e<56320){o.push(239,191,189),n=e;continue}e=n-55296<<10|e-56320|65536,n=null}else n&&(o.push(239,191,189),n=null);e<128?o.push(e):e<2048?o.push(e>>6|192,63&e|128):e<65536?o.push(e>>12|224,e>>6&63|128,63&e|128):o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}return o}e.exports=n;var i,a,r,s=t("ieee754");(i={readUInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},writeUInt32LE:function(t,e){this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24},readInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+(this[t+3]<<24)},readFloatLE:function(t){return s.read(this,t,!0,23,4)},readDoubleLE:function(t){return s.read(this,t,!0,52,8)},writeFloatLE:function(t,e){return s.write(this,t,e,!0,23,4)},writeDoubleLE:function(t,e){return s.write(this,t,e,!0,52,8)},toString:function(t,e,n){var i="",o="";e=e||0,n=Math.min(this.length,n||this.length);for(var a=e;a<n;a++){var r=this[a];r<=127?(i+=decodeURIComponent(o)+String.fromCharCode(r),o=""):o+="%"+r.toString(16)}return i+decodeURIComponent(o)},write:function(t,e){for(var n=t===a?r:o(t),i=0;i<n.length;i++)this[e+i]=n[i]},slice:function(t,e){return this.subarray(t,e)},copy:function(t,e){e=e||0;for(var n=0;n<this.length;n++)t[e+n]=this[n]}}).writeInt32LE=i.writeUInt32LE,n.byteLength=function(t){return(r=o(a=t)).length},n.isBuffer=function(t){return!(!t||!t._isBuffer)}},{ieee754:3}],2:[function(m,g){(function(t){"use strict";function i(t){this.buf=h.isBuffer(t)?t:new h(t||0),this.pos=0,this.length=this.buf.length}function n(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function o(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function a(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function r(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function s(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function l(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function u(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function c(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}g.exports=i;var h=t.Buffer||m("./buffer");i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var e=4294967296,f=1/e,p=Math.pow(2,63);i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),o=i>>3,a=this.pos;t(o,e,this),this.pos===a&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=this.buf.readUInt32LE(this.pos);return this.pos+=4,t},readSFixed32:function(){var t=this.buf.readInt32LE(this.pos);return this.pos+=4,t},readFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*e;return this.pos+=8,t},readSFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*e;return this.pos+=8,t},readFloat:function(){var t=this.buf.readFloatLE(this.pos);return this.pos+=4,t},readDouble:function(){var t=this.buf.readDoubleLE(this.pos);return this.pos+=8,t},readVarint:function(){var t,e,n,i,o,a,r=this.buf;if((n=r[this.pos++])<128)return n;if(n&=127,(i=r[this.pos++])<128)return n|i<<7;if(i=(127&i)<<7,(o=r[this.pos++])<128)return n|i|o<<14;if(o=(127&o)<<14,(a=r[this.pos++])<128)return n|i|o|a<<21;if(t=n|i|o|(127&a)<<21,t+=268435456*(127&(e=r[this.pos++])),e<128)return t;if(t+=34359738368*(127&(e=r[this.pos++])),e<128)return t;if(t+=4398046511104*(127&(e=r[this.pos++])),e<128)return t;if(t+=562949953421312*(127&(e=r[this.pos++])),e<128)return t;if(t+=72057594037927940*(127&(e=r[this.pos++])),e<128)return t;if(t+=0x8000000000000000*(127&(e=r[this.pos++])),e<128)return t;throw new Error("Expected varint not more than 10 bytes")},readVarint64:function(){var t=this.pos,e=this.readVarint();if(e<p)return e;for(var n=this.pos-2;255===this.buf[n];)n--;n<t&&(n=t);for(var i=e=0;i<n-t+1;i++){var o=127&~this.buf[t+i];e+=i<4?o<<7*i:o*Math.pow(2,7*i)}return-e-1},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.buf.toString("utf8",this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.slice(this.pos,t);return this.pos=t,e},readPackedVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readVarint());return e},readPackedSVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(t){var e=7&t;if(e===i.Varint)for(;127<this.buf[this.pos++];);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new h(e);this.buf.copy(n),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(t){this.realloc(4),this.buf.writeUInt32LE(t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),this.buf.writeInt32LE(t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(-1&t,this.pos),this.buf.writeUInt32LE(Math.floor(t*f),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(-1&t,this.pos),this.buf.writeInt32LE(Math.floor(t*f),this.pos+4),this.pos+=8},writeVarint:function(t){if((t=+t)<=127)this.realloc(1),this.buf[this.pos++]=t;else if(t<=16383)this.realloc(2),this.buf[this.pos++]=t>>>0&127|128,this.buf[this.pos++]=t>>>7&127;else if(t<=2097151)this.realloc(3),this.buf[this.pos++]=t>>>0&127|128,this.buf[this.pos++]=t>>>7&127|128,this.buf[this.pos++]=t>>>14&127;else if(t<=268435455)this.realloc(4),this.buf[this.pos++]=t>>>0&127|128,this.buf[this.pos++]=t>>>7&127|128,this.buf[this.pos++]=t>>>14&127|128,this.buf[this.pos++]=t>>>21&127;else{for(var e=this.pos;128<=t;)this.realloc(1),this.buf[this.pos++]=255&t|128,t/=128;if(this.realloc(1),this.buf[this.pos++]=0|t,10<this.pos-e)throw new Error("Given varint doesn't fit into 10 bytes")}},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t);var e=h.byteLength(t);this.writeVarint(e),this.realloc(e),this.buf.write(t,this.pos),this.pos+=e},writeFloat:function(t){this.realloc(4),this.buf.writeFloatLE(t,this.pos),this.pos+=4},writeDouble:function(t){this.realloc(8),this.buf.writeDoubleLE(t,this.pos),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n,o=i<=127?1:i<=16383?2:i<=2097151?3:i<=268435455?4:Math.ceil(Math.log(i)/(7*Math.LN2));if(1<o){this.realloc(o-1);for(var a=this.pos-1;n<=a;a--)this.buf[a+o-1]=this.buf[a]}this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,i.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,n,e)},writePackedSVarint:function(t,e){this.writeMessage(t,o,e)},writePackedBoolean:function(t,e){this.writeMessage(t,s,e)},writePackedFloat:function(t,e){this.writeMessage(t,a,e)},writePackedDouble:function(t,e){this.writeMessage(t,r,e)},writePackedFixed32:function(t,e){this.writeMessage(t,l,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,u,e)},writePackedFixed64:function(t,e){this.writeMessage(t,d,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,c,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./buffer":1}],3:[function(t,e,n){n.read=function(t,e,n,i,o){var a,r,s=8*o-i-1,l=(1<<s)-1,u=l>>1,d=-7,c=n?o-1:0,h=n?-1:1,f=t[e+c];for(c+=h,a=f&(1<<-d)-1,f>>=-d,d+=s;0<d;a=256*a+t[e+c],c+=h,d-=8);for(r=a&(1<<-d)-1,a>>=-d,d+=i;0<d;r=256*r+t[e+c],c+=h,d-=8);if(0===a)a=1-u;else{if(a===l)return r?NaN:1/0*(f?-1:1);r+=Math.pow(2,i),a-=u}return(f?-1:1)*r*Math.pow(2,a-i)},n.write=function(t,e,n,i,o,a){var r,s,l,u=8*a-o-1,d=(1<<u)-1,c=d>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:a-1,p=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,r=d):(r=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-r))<1&&(r--,l*=2),2<=(e+=1<=r+c?h/l:h*Math.pow(2,1-c))*l&&(r++,l/=2),d<=r+c?(s=0,r=d):1<=r+c?(s=(e*l-1)*Math.pow(2,o),r+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,o),r=0));8<=o;t[n+f]=255&s,f+=p,s/=256,o-=8);for(r=r<<o|s,u+=o;0<u;t[n+f]=255&r,f+=p,r/=256,u-=8);t[n+f-p]|=128*m}},{}],4:[function(t,e){"use strict";function n(t,e){this.x=t,this.y=e}(e.exports=n).prototype={clone:function(){return new n(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.x-n*this.y,o=n*this.x+e*this.y;return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(t){return t instanceof n?t:Array.isArray(t)?new n(t[0],t[1]):t}},{}],5:[function(t,e){e.exports.VectorTile=t("./lib/vectortile.js"),e.exports.VectorTileFeature=t("./lib/vectortilefeature.js"),e.exports.VectorTileLayer=t("./lib/vectortilelayer.js")},{"./lib/vectortile.js":6,"./lib/vectortilefeature.js":7,"./lib/vectortilelayer.js":8}],6:[function(t,e){"use strict";function n(t,e){this.layers=t.readFields(i,{},e)}function i(t,e,n){if(3===t){var i=new o(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}var o=t("./vectortilelayer");e.exports=n},{"./vectortilelayer":8}],7:[function(t,e){"use strict";function f(t,e,n,i,o){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=o,t.readFields(a,this,e)}function a(t,e,n){1==t?e._id=n.readVarint():2==t?i(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function i(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],o=e._values[t.readVarint()];e.properties[i]=o}}var u=t("point-geometry");(e.exports=f).types=["Unknown","Point","LineString","Polygon"],f.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,o=0,a=0,r=0,s=[];t.pos<n;){if(!o){var l=t.readVarint();i=7&l,o=l>>3}if(o--,1===i||2===i)a+=t.readSVarint(),r+=t.readSVarint(),1===i&&(e&&s.push(e),e=[]),e.push(new u(a,r));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&s.push(e),s},f.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,o=0,a=0,r=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(!i){var d=t.readVarint();n=7&d,i=d>>3}if(i--,1===n||2===n)(o+=t.readSVarint())<r&&(r=o),s<o&&(s=o),(a+=t.readSVarint())<l&&(l=a),u<a&&(u=a);else if(7!==n)throw new Error("unknown command "+n)}return[r,l,s,u]},f.prototype.toGeoJSON=function(t,e,n){for(var i=this.extent*Math.pow(2,n),o=this.extent*t,a=this.extent*e,r=this.loadGeometry(),s=f.types[this.type],l=0;l<r.length;l++)for(var u=r[l],d=0;d<u.length;d++){var c=u[d],h=180-360*(c.y+a)/i;u[d]=[360*(c.x+o)/i-180,360/Math.PI*Math.atan(Math.exp(h*Math.PI/180))-90]}return"Point"===s&&1===r.length?r=r[0][0]:"Point"===s?(r=r[0],s="MultiPoint"):"LineString"===s&&1===r.length?r=r[0]:"LineString"===s&&(s="MultiLineString"),{type:"Feature",geometry:{type:s,coordinates:r},
properties:this.properties}}},{"point-geometry":4}],8:[function(t,e){"use strict";function n(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(i,this,e),this.length=this._features.length}function i(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(o(n))}function o(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}var a=t("./vectortilefeature.js");(e.exports=n).prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,e,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":7}],9:[function(t,e){function n(t,e,n,i,o){if(!e)return null;for(var a in e)this[a]=e[a];this.mvtLayer=t,this.mvtSource=t.mvtSource,this.map=t.mvtSource.map,this.id=i,this.layerLink=this.mvtSource.layerLink,this.toggleEnabled=!0,this.selected=!1,this.divisor=e.extent/n.tileSize,this.extent=e.extent,this.tileSize=n.tileSize,this.tiles={},this.style=o,this.addTileFeature(e,n);var r=this;this.map.on("zoomend",function(){r.staticLabel=null}),o&&o.dynamicLabel&&"function"==typeof o.dynamicLabel&&(this.dynamicLabel=this.mvtSource.dynamicLabel.createFeature(this)),s(r)}function s(n){var t=n.style;if(t&&t.ajaxSource&&"function"==typeof t.ajaxSource){var e=t.ajaxSource(n);e&&r.getJSON(e,function(t,e){if(t)throw["ajaxSource AJAX Error",t];return o(n,e),!0})}return!1}function o(t,e){t.ajaxData=e,"function"==typeof t.ajaxDataReceived&&t.ajaxDataReceived(t,e),t._setStyle(t.mvtLayer.style),a(t)}function a(t){var e=t.tiles,n=t.mvtLayer;for(var i in e){parseInt(i.split(":")[0])===t.map.getZoom()&&n.redrawTile(i)}}var r=t("./MVTUtil"),l=t("./StaticLabel/StaticLabel.js");(e.exports=n).prototype._setStyle=function(t){this.style=t(this,this.ajaxData),this.removeLabel()},n.prototype.setStyle=function(t){this.ajaxData=null,this.style=t(this,null),s(this)||this.removeLabel()},n.prototype.draw=function(t){var e=this.tiles[t],n=e.vtf,i=e.ctx,o=t.split(":").slice(1,3).join(":");if(i.canvas=this.mvtLayer._tiles[o],this.selected)var a=this.style.selected||this.style;else a=this.style;switch(n.type){case 1:if(this._drawPoint(i,n.coordinates,a),!this.staticLabel&&"function"==typeof this.style.staticLabel){if(this.style.ajaxSource&&!this.ajaxData)break;this._drawStaticLabel(i,n.coordinates,a)}break;case 2:this._drawLineString(i,n.coordinates,a);break;case 3:this._drawPolygon(i,n.coordinates,a);break;default:throw new Error("Unmanaged type: "+n.type)}},n.prototype.getPathsForTile=function(t){return this.tiles[t].paths},n.prototype.addTileFeature=function(t,e){var n=this.map.getZoom();e.zoom==n&&(this.clearTileFeatures(n),this.tiles[e.id]={ctx:e,vtf:t,paths:[]})},n.prototype.clearTileFeatures=function(t){for(var e in this.tiles)e.split(":")[0]!=t&&delete this.tiles[e]},n.prototype.toggle=function(){this.selected?this.deselect():this.select()},n.prototype.select=function(){this.selected=!0,this.mvtSource.featureSelected(this),a(this);var t=this.linkedFeature();t&&t.staticLabel&&!t.staticLabel.selected&&t.staticLabel.select()},n.prototype.deselect=function(){this.selected=!1,this.mvtSource.featureDeselected(this),a(this);var t=this.linkedFeature();t&&t.staticLabel&&t.staticLabel.selected&&t.staticLabel.deselect()},n.prototype.on=function(t,e){this._eventHandlers[t]=e},n.prototype._drawPoint=function(t,e,n){if(n&&t&&t.canvas){var i=this.tiles[t.id],o=1;o="function"==typeof n.radius?n.radius(t.zoom):n.radius;var a,r=this._tilePoint(e[0][0]),s=t.canvas;try{a=s.getContext("2d")}catch(l){return void console.log("_drawPoint error: "+l)}a.beginPath(),a.fillStyle=n.color,a.arc(r.x,r.y,o,0,2*Math.PI),a.closePath(),a.fill(),n.lineWidth&&n.strokeStyle&&(a.lineWidth=n.lineWidth,a.strokeStyle=n.strokeStyle,a.stroke()),a.restore(),i.paths.push([r])}},n.prototype._drawLineString=function(t,e,n){if(n&&t&&t.canvas){var o=t.canvas.getContext("2d");o.strokeStyle=n.color,o.lineWidth=n.size,o.beginPath();var a=[],r=this.tiles[t.id];for(var s in e){var l=e[s];for(i=0;i<l.length;i++){var u=(0===i?"move":"line")+"To",d=this._tilePoint(l[i]);a.push(d),o[u](d.x,d.y)}}o.stroke(),o.restore(),r.paths.push(a)}},n.prototype._drawPolygon=function(t,e,n){if(n&&t&&t.canvas){var i=t.canvas.getContext("2d"),o=n.outline;i.fillStyle="function"==typeof n.color?n.color(i):n.color,o&&(i.strokeStyle=o.color,i.lineWidth=o.size),i.beginPath();var a=[],r=this.tiles[t.id],s=this.dynamicLabel;s&&s.addTilePolys(t,e);for(var l=0,u=e.length;l<u;l++)for(var d=e[l],c=0;c<d.length;c++){var h=(d[c],(0===c?"move":"line")+"To"),f=this._tilePoint(d[c]);a.push(f),i[h](f.x,f.y)}i.closePath(),i.fill(),o&&i.stroke(),r.paths.push(a)}},n.prototype._drawStaticLabel=function(t,e,n){if(n&&t&&this.mvtLayer._map){var i=this._tilePoint(e[0][0]),o=this._project(i,t.tile.x,t.tile.y,this.extent,this.tileSize),a=L.point(o.x,o.y),r=this.map.unproject(a);this.staticLabel=new l(this,t,r,n),this.mvtLayer.featureWithLabelAdded(this)}},n.prototype.removeLabel=function(){this.staticLabel&&(this.staticLabel.remove(),this.staticLabel=null)},n.prototype._project=function(t,e,n,i,o){var a=e*o,r=n*o;return{x:Math.floor(t.x+a),y:Math.floor(t.y+r)}},n.prototype._tilePoint=function(t){return new L.Point(t.x/this.divisor,t.y/this.divisor)},n.prototype.linkedFeature=function(){var t=this.mvtLayer.linkedLayer();return t?t.features[this.id]:null}},{"./MVTUtil":12,"./StaticLabel/StaticLabel.js":13}],10:[function(require,module,exports){function removeLabels(t){for(var e=t.featuresWithLabels,n=0,i=e.length;n<i;n++){e[n].removeLabel()}t.featuresWithLabels=[]}function in_circle(t,e,n,i,o){return Math.pow(t-i,2)+Math.pow(e-o,2)<=Math.pow(n,2)}function waitFor(testFx,onReady,timeOutMillis){var maxtimeOutMillis=timeOutMillis||3e3,start=(new Date).getTime(),condition="string"==typeof testFx?eval(testFx):testFx(),interval=setInterval(function(){(new Date).getTime()-start<maxtimeOutMillis&&!condition?condition="string"==typeof testFx?eval(testFx):testFx():condition?(console.log("'waitFor()' finished in "+((new Date).getTime()-start)+"ms."),clearInterval(interval),"string"==typeof onReady?eval(onReady):onReady("success")):(console.log("'waitFor()' timeout"),clearInterval(interval),"string"==typeof onReady?eval(onReady):onReady("timeout"))},50)}var MVTFeature=require("./MVTFeature"),Util=require("./MVTUtil");module.exports=L.TileLayer.Canvas.extend({options:{debug:!1,isHiddenLayer:!1,getIDForLayerFeature:function(){},tileSize:256,lineClickTolerance:2},_featureIsClicked:{},_isPointInPoly:function(t,e){if(e&&e.length){for(var n=!1,i=-1,o=e.length,a=o-1;++i<o;a=i)(e[i].y<=t.y&&t.y<e[a].y||e[a].y<=t.y&&t.y<e[i].y)&&t.x<(e[a].x-e[i].x)*(t.y-e[i].y)/(e[a].y-e[i].y)+e[i].x&&(n=!n);return n}},_getDistanceFromLine:function(t,e){var n=Number.POSITIVE_INFINITY;if(e&&1<e.length){t=L.point(t.x,t.y);for(var i=0,o=e.length-1;i<o;i++){var a=this._projectPointOnLineSegment(t,e[i],e[i+1]);a.distance<=n&&(n=a.distance)}}return n},_projectPointOnLineSegment:function(t,e,n){var i=e.distanceTo(n);if(i<1)return{distance:t.distanceTo(e),coordinate:e};var o=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/Math.pow(i,2);if(o<1e-7)return{distance:t.distanceTo(e),coordinate:e};if(.9999999<o)return{distance:t.distanceTo(n),coordinate:n};var a=L.point(e.x+o*(n.x-e.x),e.y+o*(n.y-e.y));return{distance:t.distanceTo(a),point:a}},initialize:function(t,e){this.mvtSource=t,L.Util.setOptions(this,e),this.style=e.style,this.name=e.name,this._canvasIDToFeatures={},this.features={},this.featuresWithLabels=[],this._highestCount=0},onAdd:function(t){var e=this;e.map=t,L.TileLayer.Canvas.prototype.onAdd.call(this,t),t.on("layerremove",function(t){t.layer._leaflet_id===e._leaflet_id&&removeLabels(e)})},drawTile:function(t,e,n){var i={canvas:t,tile:e,zoom:n,tileSize:this.options.tileSize};i.id=Util.getContextID(i),this._canvasIDToFeatures[i.id]||this._initializeFeaturesHash(i),this.features||(this.features={})},_initializeFeaturesHash:function(t){this._canvasIDToFeatures[t.id]={},this._canvasIDToFeatures[t.id].features=[],this._canvasIDToFeatures[t.id].canvas=t.canvas},_draw:function(){},getCanvas:function(t){var e=t.tile,n=this._tiles[e.x+":"+e.y];if(n)return t.canvas=n,void this.redrawTile(t.id);var i=this;waitFor(function(){return!!(n=i._tiles[e.x+":"+e.y])||void 0},function(){n=i._tiles[e.x+":"+e.y],t.canvas=n,i.redrawTile(t.id)},2e3)},parseVectorTileLayer:function(t,e){var n=this,i=e.tile,o={canvas:null,id:e.id,tile:e.tile,zoom:e.zoom,tileSize:e.tileSize};o.canvas=n._tiles[i.x+":"+i.y],this._canvasIDToFeatures[o.id]?this.clearTileFeatureHash(o.id):this._initializeFeaturesHash(o);for(var a=t.parsedFeatures,r=0,s=a.length;r<s;r++){var l=a[r];l.layer=t;var u=n.options.filter;if("function"!=typeof u||!1!==u(l,o)){"function"==typeof n.options.getIDForLayerFeature?n.options.getIDForLayerFeature:Util.getIDForLayerFeature;var d,c=n.options.getIDForLayerFeature(l)||r,h=n.features[c];if("function"==typeof(d=n.options.layerOrdering)&&d(l,o),h)h.addTileFeature(l,o);else{var f=n.style(l);n.features[c]=h=new MVTFeature(n,l,o,c,f),f&&f.dynamicLabel&&"function"==typeof f.dynamicLabel&&n.featuresWithLabels.push(h)}o&&o.id&&n._canvasIDToFeatures[o.id].features.push(h)}}(d=n.options.layerOrdering)&&(n._canvasIDToFeatures[o.id].features=n._canvasIDToFeatures[o.id].features.sort(function(t,e){return-(e.properties.zIndex-t.properties.zIndex)})),n.redrawTile(o.id)},setStyle:function(t){for(var e in this._highestCount=0,this._lowestCount=null,this.style=t,this.features){this.features[e].setStyle(t)}var n=this.map.getZoom();for(var e in this._tiles){var i=n+":"+e;this.redrawTile(i)}},setHighestCount:function(t){t>this._highestCount&&(this._highestCount=t)},getHighestCount:function(){return this._highestCount},setLowestCount:function(t){(!this._lowestCount||t<this._lowestCount)&&(this._lowestCount=t)},getLowestCount:function(){return this._lowestCount},setCountRange:function(t){this.setHighestCount(t),this.setLowestCount(t)},handleClickEvent:function(t,e){var n=t.tileID.split(":").slice(1,3).join(":"),i=t.tileID.split(":")[0],o=this._tiles[n];o||e(t);for(var a,r,s=t.layerPoint.x-o._leaflet_pos.x,l=t.layerPoint.y-o._leaflet_pos.y,u={x:s,y:l},d=this._canvasIDToFeatures[t.tileID].features,c=Number.POSITIVE_INFINITY,h=null,f=0;f<d.length;f++){var p=d[f];switch(p.type){case 1:var m=3;for(m="function"==typeof p.style.radius?p.style.radius(i):p.style.radius,r=p.getPathsForTile(t.tileID),a=0;a<r.length;a++)in_circle(r[a][0].x,r[a][0].y,m,s,l)&&(h=p,c=0);break;case 2:for(r=p.getPathsForTile(t.tileID),a=0;a<r.length;a++)if(p.style){var g;(g=this._getDistanceFromLine(u,r[a]))<(p.selected&&p.style.selected?p.style.selected.size:p.style.size)/2+this.options.lineClickTolerance&&g<c&&(h=p,c=g)}break;case 3:for(r=p.getPathsForTile(t.tileID),a=0;a<r.length;a++)this._isPointInPoly(u,r[a])&&(h=p,c=0)}if(0==c)break}h&&h.toggleEnabled&&h.toggle(),t.feature=h,e(t)},clearTile:function(t){var e=t.split(":"),n=e[1]+":"+e[2];if("undefined"!=typeof this._tiles[n]){var i=this._tiles[n];i.getContext("2d").clearRect(0,0,i.width,i.height)}else console.error("typeof this._tiles[canvasId] === 'undefined'")},clearTileFeatureHash:function(t){this._canvasIDToFeatures[t]={features:[]}},clearLayerFeatureHash:function(){this.features={}},redrawTile:function(t){this.clearTile(t);var e=this._canvasIDToFeatures[t];if(e){for(var n=e.features,i=[],o=0;o<n.length;o++){var a=n[o];a.selected?i.push(a):a.draw(t)}for(var r=0,s=i.length;r<s;r++){i[r].draw(t)}}},_resetCanvasIDToFeatures:function(t,e){this._canvasIDToFeatures[t]={},this._canvasIDToFeatures[t].features=[],this._canvasIDToFeatures[t].canvas=e},linkedLayer:function(){if(this.mvtSource.layerLink){var t=this.mvtSource.layerLink(this.name);return this.mvtSource.layers[t]}return null},featureWithLabelAdded:function(t){this.featuresWithLabels.push(t)}})},{"./MVTFeature":9,"./MVTUtil":12}],11:[function(t,e){function l(t,e,n){return n+":"+parseInt(Math.floor((e+180)/360*(1<<n)))+":"+parseInt(Math.floor((1-Math.log(Math.tan(t.toRad())+1/Math.cos(t.toRad()))/Math.PI)/2*(1<<n)))}function r(t,e){t.loadedTiles[e.id]=e}function s(t){for(var e in t.layers){n(t.layers[e])}return t}function n(t){t.parsedFeatures=[];for(var e=0,n=t._features.length;e<n;e++){var i=t.feature(e);i.coordinates=i.loadGeometry(),t.parsedFeatures.push(i)}return t}var u=t("vector-tile").VectorTile,d=t("pbf"),a=(t("point-geometry"),t("./MVTUtil")),i=t("./MVTLayer");e.exports=L.TileLayer.MVTSource=L.TileLayer.Canvas.extend({options:{debug:!1,url:"",getIDForLayerFeature:function(){},tileSize:256,visibleLayers:[]},layers:{},processedTiles:{},_eventHandlers:{},_triggerOnTilesLoadedEvent:!0,_url:"",style:function(t){var e={};switch(t.type){case 1:e.color="rgba(49,79,79,1)",e.radius=5,e.selected={color:"rgba(255,255,0,0.5)",radius:6};break;case 2:e.color="rgba(161,217,155,0.8)",e.size=3,e.selected={color:"rgba(255,25,0,0.5)",size:4};break;case 3:e.color="rgba(49,79,79,1)",e.outline={color:"rgba(161,217,155,0.8)",size:1},e.selected={color:"rgba(255,140,0,0.3)",outline:{color:"rgba(255,140,0,1)",size:2}}}return e},initialize:function(t){L.Util.setOptions(this,t),this.layers={},this.activeTiles={},this.loadedTiles={},this._url=this.options.url,this.zIndex=t.zIndex,"function"==typeof t.style&&(this.style=t.style),"function"==typeof t.ajaxSource&&(this.ajaxSource=t.ajaxSource),this.layerLink=t.layerLink,this._eventHandlers={},this._tilesToProcess=0},redraw:function(t){!1===t&&(this._triggerOnTilesLoadedEvent=!1),L.TileLayer.Canvas.prototype.redraw.call(this)},onAdd:function(e){var n=this;n.map=e,L.TileLayer.Canvas.prototype.onAdd.call(this,e);var i=function(t){n._onClick(t)};e.on("click",i),e.on("layerremove",function(t){t.layer._leaflet_id===n._leaflet_id&&t.layer.removeChildLayers&&(t.layer.removeChildLayers(e),e.off("click",i))}),n.addChildLayers(e),"function"==typeof DynamicLabel&&(this.dynamicLabel=new DynamicLabel(e,this,{}))},drawTile:function(t,e,n){var i={id:[n,e.x,e.y].join(":"),canvas:t,tile:e,zoom:n,tileSize:this.options.tileSize};this._tilesToProcess<this._tilesToLoad&&(this._tilesToProcess=this._tilesToLoad);var o=i.id=a.getContextID(i);this.activeTiles[o]=i,this.processedTiles[i.zoom]||(this.processedTiles[i.zoom]={}),this.options.debug&&this._drawDebugInfo(i),this._draw(i)},setOpacity:function(t){this._setVisibleLayersStyle("opacity",t)},setZIndex:function(t){this._setVisibleLayersStyle("zIndex",t)},_setVisibleLayersStyle:function(t,e){for(var n in this.layers)this.layers[n]._tileContainer.style[t]=e},_drawDebugInfo:function(t){var e=this.options.tileSize,n=t.canvas.getContext("2d");n.strokeStyle="#000000",n.fillStyle="#FFFF00",n.strokeRect(0,0,e,e),n.font="12px Arial",n.fillRect(0,0,5,5),n.fillRect(0,e-5,5,5),n.fillRect(e-5,0,5,5),n.fillRect(e-5,e-5,5,5),n.fillRect(e/2-5,e/2-5,10,10),n.strokeText(t.zoom+" "+t.tile.x+" "+t.tile.y,e/2-30,e/2-10)},_draw:function(i){var o=this;if(this._url){var t=this.getTileUrl({x:i.tile.x,y:i.tile.y,z:i.zoom}),a=new XMLHttpRequest;a.onload=function(){if("200"==a.status){if(!a.response)return;var t=new Uint8Array(a.response),e=new d(t),n=new u(e);if(o.map&&o.map.getZoom()!=i.zoom)return void console.log("Fetched tile for zoom level "+i.zoom+". Map is at zoom level "+o._map.getZoom());o.checkVectorTileLayers(s(n),i),r(o,i)}o.reduceTilesToProcessCount()},a.onerror=function(){console.log("xhr error: "+a.status)},a.open("GET",t,!0),a.responseType="arraybuffer",a.send()}},reduceTilesToProcessCount:function(){this._tilesToProcess--,this._tilesToProcess||(this._eventHandlers.PBFLoad&&this._eventHandlers.PBFLoad(),this._pbfLoaded())},checkVectorTileLayers:function(t,e,n){var i=this;if(i.options.visibleLayers&&0<i.options.visibleLayers.length)for(var o=0;o<i.options.visibleLayers.length;o++){var a=i.options.visibleLayers[o];t.layers[a]&&i.prepareMVTLayers(t.layers[a],a,e,n)}else for(var r in t.layers)i.prepareMVTLayers(t.layers[r],r,e,n)},prepareMVTLayers:function(t,e,n,i){var o=this;o.layers[e]||(o.layers[e]=o.createMVTLayer(e,t.parsedFeatures[0].type||null)),i?o.layers[e].getCanvas(n,t):o.layers[e].parseVectorTileLayer(t,n)},createMVTLayer:function(t){var e=this,n={getIDForLayerFeature:"function"==typeof e.options.getIDForLayerFeature?e.options.getIDForLayerFeature:a.getIDForLayerFeature,filter:e.options.filter,layerOrdering:e.options.layerOrdering,style:e.style,name:t,asynch:!0};return e.options.zIndex&&(n.zIndex=e.zIndex),new i(e,n).addTo(e.map)},getLayers:function(){return this.layers},hideLayer:function(t){this.layers[t]&&(this._map.removeLayer(this.layers[t]),-1<this.options.visibleLayers.indexOf("id")&&this.visibleLayers.splice(this.options.visibleLayers.indexOf("id"),1))},showLayer:function(t){this.layers[t]&&(this._map.addLayer(this.layers[t]),-1==this.options.visibleLayers.indexOf("id")&&this.visibleLayers.push(t)),this.bringToFront()},removeChildLayers:function(t){for(var e in this.layers){var n=this.layers[e];t.removeLayer(n)}},addChildLayers:function(t){var e=this;if(0<e.options.visibleLayers.length)for(var n=0;n<e.options.visibleLayers.length;n++){var i=e.options.visibleLayers[n];(a=this.layers[i])&&t.addLayer(a)}else for(var o in this.layers){var a;(a=this.layers[o])._map||t.addLayer(a)}},bind:function(t,e){this._eventHandlers[t]=e},_onClick:function(t){var e=this,n=e.options.onClick,i=e.options.clickableLayers,o=e.layers;if(t.tileID=l(t.latlng.lat,t.latlng.lng,this.map.getZoom()),i||(i=Object.keys(e.layers)),i&&0<i.length)for(var a=0,r=i.length;a<r;a++){var s=o[i[a]];s&&s.handleClickEvent(t,function(t){"function"==typeof n&&n(t)})}else"function"==typeof n&&n(t)},setFilter:function(t,e){for(var n in this.layers){var i=this.layers[n];e?n.toLowerCase()==e.toLowerCase()&&(i.options.filter=t,i.clearLayerFeatureHash()):(i.options.filter=t,i.clearLayerFeatureHash())}},setStyle:function(t,e){for(var n in this.layers){var i=this.layers[n];e?n.toLowerCase()==e.toLowerCase()&&i.setStyle(t):i.setStyle(t)}},featureSelected:function(t){this.options.mutexToggle&&(this._selectedFeature&&this._selectedFeature.deselect(),this._selectedFeature=t),this.options.onSelect&&this.options.onSelect(t)},featureDeselected:function(t){this.options.mutexToggle&&this._selectedFeature&&(this._selectedFeature=null),this.options.onDeselect&&this.options.onDeselect(t)},_pbfLoaded:function(){this.bringToFront();var t=this,e=t.options.onTilesLoaded;e&&"function"==typeof e&&!0===this._triggerOnTilesLoadedEvent&&e(this),t._triggerOnTilesLoadedEvent=!0}}),"undefined"==typeof Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*Math.PI/180})},{"./MVTLayer":10,"./MVTUtil":12,pbf:2,"point-geometry":4,"vector-tile":5}],12:[function(t,e){var n=e.exports={};n.getContextID=function(t){return[t.zoom,t.tile.x,t.tile.y].join(":")},n.getIDForLayerFeature=function(t){return t.properties.id},n.getJSON=function(t,n){var i="undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");i.onreadystatechange=function(){var t=i.status;if(4===i.readyState&&200<=t&&t<300){var e=JSON.parse(i.responseText);n(null,e)}else n({error:!0,status:t})},i.open("GET",t,!0),i.send()}},{}],13:[function(t,e){function n(t,e,n,i){var o=this;if(this.mvtFeature=t,this.map=t.map,this.zoom=e.zoom,this.latLng=n,this.selected=!1,t.linkedFeature){var a=t.linkedFeature();a&&a.selected&&(o.selected=!0)}r(o,t,e,n,i)}function r(n,t,e,i,o){var a=t.ajaxData,r=n.style=o.staticLabel(t,a),s=n.icon=L.divIcon({className:r.cssClass||"label-icon-text",html:r.html,iconSize:r.iconSize||[50,50]});n.marker=L.marker(i,{icon:s}).addTo(n.map),n.selected&&n.marker._icon.classList.add(n.style.cssSelectedClass||"label-icon-text-selected"),n.marker.on("click",function(){n.toggle()}),n.map.on("zoomend",function(t){var e=t.target.getZoom();n.zoom!==e&&n.map.removeLayer(n.marker)})}t("../MVTUtil"),(e.exports=n).prototype.toggle=function(){this.selected?this.deselect():this.select()},n.prototype.select=function(){this.selected=!0,this.marker._icon.classList.add(this.style.cssSelectedClass||"label-icon-text-selected");var t=this.mvtFeature.linkedFeature();t.selected||t.select()},n.prototype.deselect=function(){this.selected=!1,this.marker._icon.classList.remove(this.style.cssSelectedClass||"label-icon-text-selected");var t=this.mvtFeature.linkedFeature();t.selected&&t.deselect()},n.prototype.remove=function(){this.map&&this.marker&&this.map.removeLayer(this.marker)}},{"../MVTUtil":12}],14:[function(t,e){e.exports=t("./MVTSource")},{"./MVTSource":11}]},{},[14]),function(t){var e;if("function"==typeof define&&define.amd)define(["leaflet"],t);else if("undefined"!=typeof module)e=require("leaflet"),module.exports=t(e);else{if("undefined"==typeof window.L)throw new Error("Leaflet must be loaded first");t(window.L)}}(function(a){"use strict";var e;a.Control.Zoomslider=(e=a.Draggable.extend({initialize:function(t,e,n){a.Draggable.prototype.initialize.call(this,t,t),this._element=t,this._stepHeight=e,this._knobHeight=n,this.on("predrag",function(){this._newPos.x=0,this._newPos.y=this._adjust(this._newPos.y)},this)},_adjust:function(t){var e=Math.round(this._toValue(t));return e=Math.max(0,Math.min(this._maxValue,e)),this._toY(e)},_toY:function(t){return this._k*t+this._m},_toValue:function(t){return(t-this._m)/this._k},setSteps:function(t){var e=t*this._stepHeight;this._maxValue=t-1,this._k=-this._stepHeight,this._m=e-(this._stepHeight+this._knobHeight)/2},setPosition:function(t){a.DomUtil.setPosition(this._element,a.point(0,this._adjust(t)))},setValue:function(t){this.setPosition(this._toY(t))},getValue:function(){return this._toValue(a.DomUtil.getPosition(this._element).y)}}),a.Control.extend({options:{position:"topleft",stepHeight:6,knobHeight:4,styleNS:"leaflet-control-zoomslider"},onAdd:function(t){return this._map=t,this._ui=this._createUI(),this._knob=new e(this._ui.knob,this.options.stepHeight,this.options.knobHeight),t.whenReady(this._initKnob,this).whenReady(this._initEvents,this).whenReady(this._updateSize,this).whenReady(this._updateKnobValue,this).whenReady(this._updateDisabled,this),this._ui.bar},onRemove:function(t){t.off("zoomlevelschange",this._updateSize,this).off("zoomend zoomlevelschange",this._updateKnobValue,this).off("zoomend zoomlevelschange",this._updateDisabled,this)},_createUI:function(){var t={},e=this.options.styleNS;return t.bar=a.DomUtil.create("div",e+" leaflet-bar"),t.zoomIn=this._createZoomBtn("in","top",t.bar),t.wrap=a.DomUtil.create("div",e+"-wrap leaflet-bar-part",t.bar),t.zoomOut=this._createZoomBtn("out","bottom",t.bar),t.body=a.DomUtil.create("div",e+"-body",t.wrap),t.knob=a.DomUtil.create("div",e+"-knob"),a.DomEvent.disableClickPropagation(t.bar),a.DomEvent.disableClickPropagation(t.knob),t},_createZoomBtn:function(t,e,n){var i=this.options.styleNS+"-"+t+" leaflet-bar-part leaflet-bar-part-"+e,o=a.DomUtil.create("a",i,n);return o.href="#",o.title="Zoom "+t,a.DomEvent.on(o,"click",a.DomEvent.preventDefault),o},_initKnob:function(){this._knob.enable(),this._ui.body.appendChild(this._ui.knob)},_initEvents:function(){this._map.on("zoomlevelschange",this._updateSize,this).on("zoomend zoomlevelschange",this._updateKnobValue,this).on("zoomend zoomlevelschange",this._updateDisabled,this),a.DomEvent.on(this._ui.body,"click",this._onSliderClick,this),a.DomEvent.on(this._ui.zoomIn,"click",this._zoomIn,this),a.DomEvent.on(this._ui.zoomOut,"click",this._zoomOut,this),this._knob.on("dragend",this._updateMapZoom,this)},_onSliderClick:function(t){var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=a.DomEvent.getMousePosition(e,this._ui.body).y;this._knob.setPosition(n),this._updateMapZoom()},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_zoomLevels:function(){var t=this._map.getMaxZoom()-this._map.getMinZoom()+1;return t<Infinity?t:0},_toZoomLevel:function(t){return t+this._map.getMinZoom()},_toValue:function(t){return t-this._map.getMinZoom()},_updateSize:function(){var t=this._zoomLevels();this._ui.body.style.height=this.options.stepHeight*t+"px",this._knob.setSteps(t)},_updateMapZoom:function(){this._map.setZoom(this._toZoomLevel(this._knob.getValue()))},_updateKnobValue:function(){this._knob.setValue(this._toValue(this._map.getZoom()))},_updateDisabled:function(){var t=this._map.getZoom(),e=this.options.styleNS+"-disabled";a.DomUtil.removeClass(this._ui.zoomIn,e),a.DomUtil.removeClass(this._ui.zoomOut,e),t===this._map.getMinZoom()&&a.DomUtil.addClass(this._ui.zoomOut,e),t===this._map.getMaxZoom()&&a.DomUtil.addClass(this._ui.zoomIn,e)}})),a.Map.addInitHook(function(){this.options.zoomsliderControl&&(this.zoomsliderControl=new a.Control.Zoomslider,this.addControl(this.zoomsliderControl))}),a.control.zoomslider=function(t){return new a.Control.Zoomslider(t)}}),function(){var r,s,l,d,c,h,f,ot,m,u,i,v,y,_,b,p,w,g,x,C,L,e,o,S,t,n,a,k,D,T,M,P,at,E,I,A;ot=function(t,e,n,i){return new r(t,e,n,i)},"undefined"!=typeof module&&null!==module&&null!=module.exports&&(module.exports=ot),"function"==typeof define&&define.amd?define([],function(){return ot}):("undefined"!=typeof exports&&null!==exports?exports:this).chroma=ot,ot.color=function(t,e,n,i){return new r(t,e,n,i)},ot.hsl=function(t,e,n,i){return new r(t,e,n,i,"hsl")},ot.hsv=function(t,e,n,i){return new r(t,e,n,i,"hsv")},ot.rgb=function(t,e,n,i){return new r(t,e,n,i,"rgb")},ot.hex=function(t){return new r(t)},ot.css=function(t){return new r(t)},ot.lab=function(t,e,n){return new r(t,e,n,"lab")},ot.lch=function(t,e,n){return new r(t,e,n,"lch")},ot.hsi=function(t,e,n){return new r(t,e,n,"hsi")},ot.gl=function(t,e,n,i){return new r(255*t,255*e,255*n,i,"gl")},ot.num=function(t){return new r(t,"num")},ot.random=function(){var t,e,n;for(e="0123456789abcdef",t="#",n=0;n<6;++n)t+=e.charAt(Math.floor(16*Math.random()));return new r(t)},ot.interpolate=function(t,e,n,i){var o,a;return null==t||null==e?"#000":("string"!==(o=at(t))&&"number"!==o||(t=new r(t)),"string"!==(a=at(e))&&"number"!==a||(e=new r(e)),t.interpolate(n,e,i))},ot.mix=ot.interpolate,ot.contrast=function(t,e){var n,i,o,a;return"string"!==(o=at(t))&&"number"!==o||(t=new r(t)),"string"!==(a=at(e))&&"number"!==a||(e=new r(e)),n=t.luminance(),(i=e.luminance())<n?(n+.05)/(i+.05):(i+.05)/(n+.05)},ot.luminance=function(t){return ot(t).luminance()},ot._Color=r,r=function(){function g(){var t,e,n,i,o,a,r,s,l,u,d,c,h,f,p;for(o=this,n=[],l=0,u=arguments.length;l<u;l++)null!=(e=arguments[l])&&n.push(e);if(0===n.length)a=(d=[255,0,255,1,"rgb"])[0],r=d[1],s=d[2],t=d[3],i=d[4];else if("array"===at(n[0])){if(3===n[0].length)a=(c=n[0])[0],r=c[1],s=c[2],t=1;else{if(4!==n[0].length)throw"unknown input argument";a=(h=n[0])[0],r=h[1],s=h[2],t=h[3]}i=null!=(f=n[1])?f:"rgb"}else"string"===at(n[0])?(a=n[0],i="hex"):"object"===at(n[0])?(a=(p=n[0]._rgb)[0],r=p[1],s=p[2],t=p[3],i="rgb"):n.length<=2&&"number"===at(n[0])?(a=n[0],i="num"):3<=n.length&&(a=n[0],r=n[1],s=n[2]);3===n.length?(i="rgb",t=1):4===n.length?"string"===at(n[3])?(i=n[3],t=1):"number"===at(n[3])&&(i="rgb",t=n[3]):5===n.length&&(t=n[3],i=n[4]),null==t&&(t=1),"rgb"===i?o._rgb=[a,r,s,t]:"gl"===i?o._rgb=[255*a,255*r,255*s,t]:"hsl"===i?(o._rgb=_(a,r,s),o._rgb[3]=t):"hsv"===i?(o._rgb=b(a,r,s),o._rgb[3]=t):"hex"===i?o._rgb=v(a):"lab"===i?(o._rgb=w(a,r,s),o._rgb[3]=t):"lch"===i?(o._rgb=C(a,r,s),o._rgb[3]=t):"hsi"===i?(o._rgb=y(a,r,s),o._rgb[3]=t):"num"===i&&(o._rgb=S(a)),m(o._rgb)}return g.prototype.rgb=function(){return this._rgb.slice(0,3)},g.prototype.rgba=function(){return this._rgb},g.prototype.hex=function(){return t(this._rgb)},g.prototype.toString=function(){return this.name()},g.prototype.hsl=function(){return a(this._rgb)},g.prototype.hsv=function(){return k(this._rgb)},g.prototype.lab=function(){return D(this._rgb)},g.prototype.lch=function(){return T(this._rgb)},g.prototype.hsi=function(){return n(this._rgb)},g.prototype.gl=function(){return[this._rgb[0]/255,this._rgb[1]/255,this._rgb[2]/255,this._rgb[3]]},g.prototype.num=function(){return M(this._rgb)},g.prototype.luminance=function(o,a){var t,r,s,l;return null==a&&(a="rgb"),arguments.length?(0===o&&(this._rgb=[0,0,0,this._rgb[3]]),1===o&&(this._rgb=[255,255,255,this._rgb[3]]),t=e(this._rgb),r=1e-7,s=20,l=function(t,e){var n,i;return n=(i=t.interpolate(.5,e,a)).luminance(),Math.abs(o-n)<r||!s--?i:o<n?l(t,i):l(i,e)},this._rgb=(o<t?l(new g("black"),this):l(this,new g("white"))).rgba(),this):e(this._rgb)},g.prototype.name=function(){var t,e;for(e in t=this.hex(),ot.colors)if(t===ot.colors[e])return e;return t},g.prototype.alpha=function(t){return arguments.length?(this._rgb[3]=t,this):this._rgb[3]},g.prototype.css=function(t){var e,n,i,o;return null==t&&(t="rgb"),i=(n=this)._rgb,3===t.length&&i[3]<1&&(t+="a"),"rgb"===t?t+"("+i.slice(0,3).map(Math.round).join(",")+")":"rgba"===t?t+"("+i.slice(0,3).map(Math.round).join(",")+","+i[3]+")":"hsl"===t||"hsla"===t?(o=function(t){return Math.round(100*t)/100},(e=n.hsl())[0]=o(e[0]),e[1]=o(100*e[1])+"%",e[2]=o(100*e[2])+"%",4===t.length&&(e[3]=i[3]),t+"("+e.join(",")+")"):void 0},g.prototype.interpolate=function(t,e,n){var i,o,a,r,s,l,u,d,c,h,f,p,m;if(u=this,null==n&&(n="rgb"),"string"===at(e)&&(e=new g(e)),"hsl"===n||"hsv"===n||"lch"===n||"hsi"===n)"hsl"===n?(p=u.hsl(),m=e.hsl()):"hsv"===n?(p=u.hsv(),m=e.hsv()):"hsi"===n?(p=u.hsi(),m=e.hsi()):"lch"===n&&(p=u.lch(),m=e.lch()),"h"===n.substr(0,1)?(o=p[0],h=p[1],s=p[2],a=m[0],f=m[1],l=m[2]):(s=p[0],h=p[1],o=p[2],l=m[0],f=m[1],a=m[2]),isNaN(o)||isNaN(a)?isNaN(o)?isNaN(a)?i=Number.NaN:(i=a,1!==s&&0!==s||"hsv"===n||(c=f)):(i=o,1!==l&&0!==l||"hsv"===n||(c=h)):i=o+t*(o<a&&180<a-o?a-(o+360):a<o&&180<o-a?a+360-o:a-o),null==c&&(c=h+t*(f-h)),r=s+t*(l-s),d="h"===n.substr(0,1)?new g(i,c,r,n):new g(r,c,i,n);else if("rgb"===n)p=u._rgb,m=e._rgb,d=new g(p[0]+t*(m[0]-p[0]),p[1]+t*(m[1]-p[1]),p[2]+t*(m[2]-p[2]),n);else if("num"===n)e instanceof g||(e=new g(e,n)),p=u._rgb,m=e._rgb,d=new g((p[0]+t*(m[0]-p[0])<<16)+(p[1]+t*(m[1]-p[1])<<8)+(p[2]+t*(m[2]-p[2])&255),n);else{if("lab"!==n)throw"color mode "+n+" is not supported";p=u.lab(),m=e.lab(),d=new g(p[0]+t*(m[0]-p[0]),p[1]+t*(m[1]-p[1]),p[2]+t*(m[2]-p[2]),n)}return d.alpha(u.alpha()+t*(e.alpha()-u.alpha())),d},g.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),ot(e[0]*t,e[1]*t,e[2]*t,t)},g.prototype.darken=function(t){var e,n;return null==t&&(t=20),(e=(n=this).lch())[0]-=t,ot.lch(e).alpha(n.alpha())},g.prototype.darker=function(t){return this.darken(t)},g.prototype.brighten=function(t){return null==t&&(t=20),this.darken(-t)},g.prototype.brighter=function(t){return this.brighten(t)},g.prototype.saturate=function(t){var e,n;return null==t&&(t=20),(e=(n=this).lch())[1]+=t,ot.lch(e).alpha(n.alpha())},g.prototype.desaturate=function(t){return null==t&&(t=20),this.saturate(-t)},g}(),m=function(t){var e;for(e in t)e<3?(t[e]<0&&(t[e]=0),255<t[e]&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),1<t[e]&&(t[e]=1));return t},i=function(t){var e,n,i,o,a,r,s,l;if(t=t.toLowerCase(),null!=ot.colors&&ot.colors[t])return v(ot.colors[t]);if(i=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(o=i.slice(1,4),n=a=0;a<=2;n=++a)o[n]=+o[n];o[3]=1}else if(i=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(o=i.slice(1,5),n=r=0;r<=3;n=++r)o[n]=+o[n];else if(i=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(o=i.slice(1,4),n=s=0;s<=2;n=++s)o[n]=Math.round(2.55*o[n]);o[3]=1}else if(i=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(o=i.slice(1,5),n=l=0;l<=2;n=++l)o[n]=Math.round(2.55*o[n]);o[3]=+o[3]}else(i=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((e=i.slice(1,4))[1]*=.01,e[2]*=.01,(o=_(e))[3]=1):(i=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((e=i.slice(1,4))[1]*=.01,e[2]*=.01,(o=_(e))[3]=+i[4]);return o},v=function(t){var e,n;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[(n=parseInt(t,16))>>16,n>>8&255,255&n,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),[(n=parseInt(t,16))>>24&255,n>>16&255,n>>8&255,255&n];if(e=i(t))return e;throw"unknown color: "+t},y=function(t,e,n){var i,o,a,r;return t=(r=E(arguments))[0],e=r[1],n=r[2],(t/=360
)<1/3?o=1-((i=(1-e)/3)+(a=(1+e*u(l*t)/u(s-l*t))/3)):t<2/3?i=1-((a=(1-e)/3)+(o=(1+e*u(l*(t-=1/3))/u(s-l*t))/3)):a=1-((o=(1-e)/3)+(i=(1+e*u(l*(t-=2/3))/u(s-l*t))/3)),[255*(a=L(n*a*3)),255*(o=L(n*o*3)),255*(i=L(n*i*3))]},_=function(){var t,e,n,i,o,a,r,s,l,u,d,c,h,f;if(i=(h=E(arguments))[0],s=h[1],a=h[2],0===s)r=n=t=255*a;else{for(e=[0,0,0],l=2*a-(u=a<.5?a*(1+s):a+s-a*s),i/=360,(d=[0,0,0])[0]=i+1/3,d[1]=i,d[2]=i-1/3,o=c=0;c<=2;o=++c)d[o]<0&&(d[o]+=1),1<d[o]&&(d[o]-=1),6*d[o]<1?e[o]=l+6*(u-l)*d[o]:2*d[o]<1?e[o]=u:3*d[o]<2?e[o]=l+(u-l)*(2/3-d[o])*6:e[o]=l;r=(f=[Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])])[0],n=f[1],t=f[2]}return[r,n,t]},b=function(){var t,e,n,i,o,a,r,s,l,u,d,c,h,f,p,m,g,v;if(i=(c=E(arguments))[0],l=c[1],d=c[2],d*=255,0===l)s=n=t=d;else switch(360===i&&(i=0),360<i&&(i-=360),i<0&&(i+=360),a=d*(1-l),r=d*(1-l*(e=(i/=60)-(o=Math.floor(i)))),u=d*(1-l*(1-e)),o){case 0:s=(h=[d,u,a])[0],n=h[1],t=h[2];break;case 1:s=(f=[r,d,a])[0],n=f[1],t=f[2];break;case 2:s=(p=[a,d,u])[0],n=p[1],t=p[2];break;case 3:s=(m=[a,r,d])[0],n=m[1],t=m[2];break;case 4:s=(g=[u,a,d])[0],n=g[1],t=g[2];break;case 5:s=(v=[d,a,r])[0],n=v[1],t=v[2]}return[s=Math.round(s),n=Math.round(n),t=Math.round(t)]},d=.95047,c=1,h=1.08883,p=function(){var t,e,n,i;return n=(i=E(arguments))[0],t=i[1],e=i[2],[n,Math.sqrt(t*t+e*e),(Math.atan2(e,t)/Math.PI*180+360)%360]},w=function(t,e,n){var i,o,a,r,s,l,u;return void 0!==t&&3===t.length&&(t=(l=t)[0],e=l[1],n=l[2]),void 0!==t&&3===t.length&&(t=(u=t)[0],e=u[1],n=u[2]),s=(r=(t+16)/116)-n/200,a=g(a=r+e/500)*d,r=g(r)*c,s=g(s)*h,o=A(3.2404542*a-1.5371385*r-.4985314*s),i=A(-.969266*a+1.8760108*r+.041556*s),n=A(.0556434*a-.2040259*r+1.0572252*s),[L(o,0,255),L(i,0,255),L(n,0,255),1]},g=function(t){return.206893034<t?t*t*t:(t-4/29)/7.787037},A=function(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))},x=function(){var t,e,n,i;return n=(i=E(arguments))[0],t=i[1],e=(e=i[2])*Math.PI/180,[n,Math.cos(e)*t,Math.sin(e)*t]},C=function(t,e,n){var i,o,a,r,s,l,u;return i=(l=x(t,e,n))[0],o=l[1],a=l[2],s=(u=w(i,o,a))[0],r=u[1],a=u[2],[L(s,0,255),L(r,0,255),L(a,0,255)]},e=function(t,e,n){var i;return t=(i=E(arguments))[0],e=i[1],n=i[2],.2126*(t=o(t))+.7152*(e=o(e))+.0722*(n=o(n))},o=function(t){return(t/=255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)},S=function(t){if("number"===at(t)&&0<=t&&t<=16777215)return[t>>16,t>>8&255,255&t,1];throw"unknown num color: "+t},t=function(){var t,e;return"#"+(t="000000"+((e=E(arguments))[0]<<16|e[1]<<8|e[2]).toString(16)).substr(t.length-6)},n=function(){var t,e,n,i,o,a,r,s;return a=(s=E(arguments))[0],n=s[1],e=s[2],t=2*Math.PI,a/=255,n/=255,e/=255,0===(r=1-Math.min(a,n,e)/(o=(a+n+e)/3))?i=0:(i=(a-n+(a-e))/2,i/=Math.sqrt((a-n)*(a-n)+(a-e)*(n-e)),i=Math.acos(i),n<e&&(i=t-i),i/=t),[360*i,r,o]},a=function(t,e,n){var i,o,a,r,s,l;return void 0!==t&&3<=t.length&&(t=(l=t)[0],e=l[1],n=l[2]),t/=255,e/=255,n/=255,r=Math.min(t,e,n),o=((a=Math.max(t,e,n))+r)/2,a===r?(s=0,i=Number.NaN):s=o<.5?(a-r)/(a+r):(a-r)/(2-a-r),t===a?i=(e-n)/(a-r):e===a?i=2+(n-t)/(a-r):n===a&&(i=4+(t-e)/(a-r)),(i*=60)<0&&(i+=360),[i,s,o]},k=function(){var t,e,n,i,o,a,r,s,l,u;return r=(u=E(arguments))[0],n=u[1],t=u[2],a=Math.min(r,n,t),e=(o=Math.max(r,n,t))-a,l=o/255,0===o?(i=Number.NaN,s=0):(s=e/o,r===o&&(i=(n-t)/e),n===o&&(i=2+(t-r)/e),t===o&&(i=4+(r-n)/e),(i*=60)<0&&(i+=360)),[i,s,l]},D=function(){var t,e,n,i,o,a;return n=(a=E(arguments))[0],e=a[1],t=a[2],n=P(n),e=P(e),t=P(t),i=I((.4124564*n+.3575761*e+.1804375*t)/d),[116*(o=I((.2126729*n+.7151522*e+.072175*t)/c))-16,500*(i-o),200*(o-I((.0193339*n+.119192*e+.9503041*t)/h))]},P=function(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},I=function(t){return.008856<t?Math.pow(t,1/3):7.787037*t+4/29},T=function(){var t,e,n,i,o,a,r;return o=(a=E(arguments))[0],n=a[1],e=a[2],i=(r=D(o,n,e))[0],t=r[1],e=r[2],p(i,t,e)},M=function(){var t;return((t=E(arguments))[0]<<16)+(t[1]<<8)+t[2]},ot.scale=function(s,t){var l,u,d,c,n,a,h,f,p,e,m,g,v,y,_,b,i,w,r;return y="rgb",_=ot("#ccc"),!1,m=[r=0,1],i=!(p=[]),w=[],e=!(g=1),b=v=0,f={},n=function(t,e){var n,i,o,a,r,s,l;if(null==t&&(t=["#ddd","#222"]),null!=t&&"string"===at(t)&&null!=(null!=(r=ot.brewer)?r[t]:void 0)&&(t=ot.brewer[t]),"array"===at(t)){for(n=o=0,s=(t=t.slice(0)).length-1;0<=s?o<=s:s<=o;n=0<=s?++o:--o)i=t[n],"string"===at(i)&&(t[n]=ot(i));if(null!=e)w=e;else for(w=[],n=a=0,l=t.length-1;0<=l?a<=l:l<=a;n=0<=l?++a:--a)w.push(n/(t.length-1))}return c(),p=t},a=function(t){return null==t&&(t=[]),v=(m=t)[0],g=t[t.length-1],c(),b=2===t.length?0:t.length-1},u=function(t){var e,n;if(null==m)return 0;for(n=m.length-1,e=0;e<n&&t>=m[e];)e++;return e-1},h=function(t){return t},function(t){var e,n,i,o,a;return a=t,2<m.length&&(o=m.length-1,e=u(t),i=m[0]+(m[1]-m[0])*(0+.5*r),n=m[o-1]+(m[o]-m[o-1])*(1-.5*r),a=v+(m[e]+.5*(m[e+1]-m[e])-i)/(n-i)*(g-v)),a},d=function(t,e){var n,i,o,a,r,s,l;if(null==e&&(e=!1),isNaN(t))return _;if(e?r=t:2<m.length?r=u(t)/(b-1):(r=v!==g?(t-v)/(g-v):0,r=(t-v)/(g-v),r=Math.min(1,Math.max(0,r))),e||(r=h(r)),o=Math.floor(1e4*r),f[o])n=f[o];else{if("array"===at(p))for(i=s=0,l=w.length-1;0<=l?s<=l:l<=s;i=0<=l?++s:--s){if(r<=(a=w[i])){n=p[i];break}if(a<=r&&i===w.length-1){n=p[i];break}if(a<r&&r<w[i+1]){r=(r-a)/(w[i+1]-a),n=ot.interpolate(p[i],p[i+1],r,y);break}}else"function"===at(p)&&(n=p(r));f[o]=n}return n},c=function(){return f={}},n(s,t),(l=function(t){var e;return e=d(t),i&&e[i]?e[i]():e}).domain=function(t,e,n,i){var o;return null==n&&(n="e"),arguments.length?(null!=e&&(o=ot.analyze(t,i),t=0===e?[o.min,o.max]:ot.limits(o,n,e)),a(t),l):m},l.mode=function(t){return arguments.length?(y=t,c(),l):y},l.range=function(t,e){return n(t,e),l},l.out=function(t){return i=t,l},l.spread=function(t){return arguments.length?(r=t,l):r},l.correctLightness=function(t){return arguments.length?(e=t,c(),h=e?function(t){var e,n,i,o,a,r,s,l,u;for(e=d(0,!0).lab()[0],n=d(1,!0).lab()[0],s=n<e,i=d(t,!0).lab()[0],o=i-(a=e+(n-e)*t),l=0,u=1,r=20;.01<Math.abs(o)&&0<r--;)s&&(o*=-1),t+=o<0?.5*(u-(l=t)):.5*(l-(u=t)),i=d(t,!0).lab()[0],o=i-a;return t}:function(t){return t},l):e},l.colors=function(t){var e,n,i,o,a,r;if(null==t&&(t="hex"),s=[],n=[],2<m.length)for(e=i=1,r=m.length;1<=r?i<r:r<i;e=1<=r?++i:--i)n.push(.5*(m[e-1]+m[e]));else n=m;for(o=0,a=n.length;o<a;o++)e=n[o],s.push(l(e)[t]());return s},l},null==ot.scales&&(ot.scales={}),ot.scales.cool=function(){return ot.scale([ot.hsl(180,1,.9),ot.hsl(250,.7,.4)])},ot.scales.hot=function(){return ot.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},ot.analyze=function(t,n,i){var o,e,a,r,s,l;if(a={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==i&&(i=function(){return!0}),o=function(t){null==t||isNaN(t)||(a.values.push(t),a.sum+=t,t<a.min&&(a.min=t),t>a.max&&(a.max=t),a.count+=1)},r=function(t,e){if(i(t,e))return null!=n&&"function"===at(n)?o(n(t)):null!=n&&"string"===at(n)||"number"===at(n)?o(t[n]):o(t)},"array"===at(t))for(s=0,l=t.length;s<l;s++)r(t[s]);else for(e in t)r(t[e],e);return a.domain=[a.min,a.max],a.limits=function(t,e){return ot.limits(a,t,e)},a},ot.limits=function(t,e,n){var i,o,a,r,s,l,u,d,c,h,f,p,m,g,v,y,_,b,w,x,C,L,S,k,D,T,M,P,E,I,A,O,F,N,R,B,z,U,j,$,H,W,V,Y,q,Z,G,K,J,X,Q,tt,et,nt,it;if(null==e&&(e="equal"),null==n&&(n=7),"array"===at(t)&&(t=ot.analyze(t)),m=t.min,f=t.max,t.sum,D=t.values.sort(function(t,e){return t-e}),h=[],"c"===e.substr(0,1)&&(h.push(m),h.push(f)),"e"===e.substr(0,1)){for(h.push(m),u=T=1,B=n-1;1<=B?T<=B:B<=T;u=1<=B?++T:--T)h.push(m+u/n*(f-m));h.push(f)}else if("l"===e.substr(0,1)){if(m<=0)throw"Logarithmic scales are only possible for values > 0";for(g=Math.LOG10E*Math.log(m),p=Math.LOG10E*Math.log(f),h.push(m),u=M=1,V=n-1;1<=V?M<=V:V<=M;u=1<=V?++M:--M)h.push(Math.pow(10,g+u/n*(p-g)));h.push(f)}else if("q"===e.substr(0,1)){for(h.push(m),u=P=1,Y=n-1;1<=Y?P<=Y:Y<=P;u=1<=Y?++P:--P)w=D.length*u/n,(x=Math.floor(w))===w?h.push(D[x]):(C=w-x,h.push(D[x]*C+D[x+1]*(1-C)));h.push(f)}else if("k"===e.substr(0,1)){for(y=D.length,i=new Array(y),s=new Array(n),L=!0,_=0,a=null,(a=[]).push(m),u=E=1,q=n-1;1<=q?E<=q:q<=E;u=1<=q?++E:--E)a.push(m+u/n*(f-m));for(a.push(f);L;){for(d=I=0,Z=n-1;0<=Z?I<=Z:Z<=I;d=0<=Z?++I:--I)s[d]=0;for(u=A=0,G=y-1;0<=G?A<=G:G<=A;u=0<=G?++A:--A){for(k=D[u],v=Number.MAX_VALUE,d=O=0,K=n-1;0<=K?O<=K:K<=O;d=0<=K?++O:--O)(l=Math.abs(a[d]-k))<v&&(v=l,o=d);s[o]++,i[u]=o}for(b=new Array(n),d=F=0,J=n-1;0<=J?F<=J:J<=F;d=0<=J?++F:--F)b[d]=null;for(u=N=0,X=y-1;0<=X?N<=X:X<=N;u=0<=X?++N:--N)null===b[r=i[u]]?b[r]=D[u]:b[r]+=D[u];for(d=R=0,z=n-1;0<=z?R<=z:z<=R;d=0<=z?++R:--R)b[d]*=1/s[d];for(L=!1,d=Q=0,U=n-1;0<=U?Q<=U:U<=Q;d=0<=U?++Q:--Q)if(b[d]!==a[u]){L=!0;break}a=b,200<++_&&(L=!1)}for(c={},d=tt=0,j=n-1;0<=j?tt<=j:j<=tt;d=0<=j?++tt:--tt)c[d]=[];for(u=et=0,$=y-1;0<=$?et<=$:$<=et;u=0<=$?++et:--et)c[r=i[u]].push(D[u]);for(S=[],d=nt=0,H=n-1;0<=H?nt<=H:H<=nt;d=0<=H?++nt:--nt)S.push(c[d][0]),S.push(c[d][c[d].length-1]);for(S=S.sort(function(t,e){return t-e}),h.push(S[0]),u=it=1,W=S.length-1;it<=W;u=it+=2)isNaN(S[u])||h.push(S[u])}return h},ot.brewer={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},ot.colors={indigo:"#4b0082",gold:"#ffd700",hotpink:"#ff69b4",firebrick:"#b22222",indianred:"#cd5c5c",yellow:"#ffff00",mistyrose:"#ffe4e1",darkolivegreen:"#556b2f",olive:"#808000",darkseagreen:"#8fbc8f",pink:"#ffc0cb",tomato:"#ff6347",lightcoral:"#f08080",orangered:"#ff4500",navajowhite:"#ffdead",lime:"#00ff00",palegreen:"#98fb98",darkslategrey:"#2f4f4f",greenyellow:"#adff2f",burlywood:"#deb887",seashell:"#fff5ee",mediumspringgreen:"#00fa9a",fuchsia:"#ff00ff",papayawhip:"#ffefd5",blanchedalmond:"#ffebcd",chartreuse:"#7fff00",dimgray:"#696969",black:"#000000",peachpuff:"#ffdab9",springgreen:"#00ff7f",aquamarine:"#7fffd4",white:"#ffffff",orange:"#ffa500",lightsalmon:"#ffa07a",darkslategray:"#2f4f4f",brown:"#a52a2a",ivory:"#fffff0",dodgerblue:"#1e90ff",peru:"#cd853f",lawngreen:"#7cfc00",chocolate:"#d2691e",crimson:"#dc143c",forestgreen:"#228b22",darkgrey:"#a9a9a9",lightseagreen:"#20b2aa",cyan:"#00ffff",mintcream:"#f5fffa",silver:"#c0c0c0",antiquewhite:"#faebd7",mediumorchid:"#ba55d3",skyblue:"#87ceeb",gray:"#808080",darkturquoise:"#00ced1",goldenrod:"#daa520",darkgreen:"#006400",floralwhite:"#fffaf0",darkviolet:"#9400d3",darkgray:"#a9a9a9",moccasin:"#ffe4b5",saddlebrown:"#8b4513",grey:"#808080",darkslateblue:"#483d8b",lightskyblue:"#87cefa",lightpink:"#ffb6c1",mediumvioletred:"#c71585",slategrey:"#708090",red:"#ff0000",deeppink:"#ff1493",limegreen:"#32cd32",darkmagenta:"#8b008b",palegoldenrod:"#eee8aa",plum:"#dda0dd",turquoise:"#40e0d0",lightgrey:"#d3d3d3",lightgoldenrodyellow:"#fafad2",darkgoldenrod:"#b8860b",lavender:"#e6e6fa",maroon:"#800000",yellowgreen:"#9acd32",sandybrown:"#f4a460",thistle:"#d8bfd8",violet:"#ee82ee",navy:"#000080",magenta:"#ff00ff",dimgrey:"#696969",tan:"#d2b48c",rosybrown:"#bc8f8f",olivedrab:"#6b8e23",blue:"#0000ff",lightblue:"#add8e6",ghostwhite:"#f8f8ff",honeydew:"#f0fff0",cornflowerblue:"#6495ed",slateblue:"#6a5acd",linen:"#faf0e6",darkblue:"#00008b",powderblue:"#b0e0e6",seagreen:"#2e8b57",darkkhaki:"#bdb76b",snow:"#fffafa",sienna:"#a0522d",mediumblue:"#0000cd",royalblue:"#4169e1",lightcyan:"#e0ffff",green:"#008000",mediumpurple:"#9370db",midnightblue:"#191970",cornsilk:"#fff8dc",paleturquoise:"#afeeee",bisque:"#ffe4c4",slategray:"#708090",darkcyan:"#008b8b",khaki:"#f0e68c",wheat:"#f5deb3",teal:"#008080",darkorchid:"#9932cc",deepskyblue:"#00bfff",salmon:"#fa8072",darkred:"#8b0000",steelblue:"#4682b4",palevioletred:"#db7093",lightslategray:"#778899",aliceblue:"#f0f8ff",lightslategrey:"#778899",lightgreen:"#90ee90",orchid:"#da70d6",gainsboro:"#dcdcdc",mediumseagreen:"#3cb371",lightgray:"#d3d3d3",mediumturquoise:"#48d1cc",lemonchiffon:"#fffacd",cadetblue:"#5f9ea0",lightyellow:"#ffffe0",lavenderblush:"#fff0f5",coral:"#ff7f50",purple:"#800080",aqua:"#00ffff",whitesmoke:"#f5f5f5",mediumslateblue:"#7b68ee",darkorange:"#ff8c00",mediumaquamarine:"#66cdaa",darksalmon:"#e9967a",beige:"#f5f5dc",blueviolet:"#8a2be2",azure:"#f0ffff",lightsteelblue:"#b0c4de",oldlace:"#fdf5e6"},at=function(){var n,t,e,i,o;for(n={},e=0,i=(o="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;e<i;e++)t=o[e],n["[object "+t+"]"]=t.toLowerCase();return function(t){var e;return e=Object.prototype.toString.call(t),n[e]||"object"}}(),L=function(t,e,n){return null==e&&(e=0),null==n&&(n=1),t<e&&(t=e),n<t&&(t=n),t},E=function(t){return 3<=t.length?t:t[0]},l=2*Math.PI,s=Math.PI/3,u=Math.cos,f=function(i){var t,e,n,o,a,r,s,l,u,d,c;return 2===(i=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)o=i[t],n.push(ot(o));return n}()).length?(u=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)o=i[t],n.push(o.lab());return n}(),a=u[0],r=u[1],t=function(n){var i,t;return t=function(){var t,e;for(e=[],i=t=0;t<=2;i=++t)e.push(a[i]+n*(r[i]-a[i]));return e}(),ot.lab.apply(ot,t)}):3===i.length?(d=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)o=i[t],n.push(o.lab());return n}(),a=d[0],r=d[1],s=d[2],t=function(n){var i,t;return t=function(){var t,e;for(e=[],i=t=0;t<=2;i=++t)e.push((1-n)*(1-n)*a[i]+2*(1-n)*n*r[i]+n*n*s[i]);return e}(),ot.lab.apply(ot,t)}):4===i.length?(c=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)o=i[t],n.push(o.lab());return n}(),a=c[0],r=c[1],s=c[2],l=c[3],t=function(n){var i,t;return t=function(){var t,e;for(e=[],i=t=0;t<=2;i=++t)e.push((1-n)*(1-n)*(1-n)*a[i]+3*(1-n)*(1-n)*n*r[i]+3*(1-n)*n*n*s[i]+n*n*n*l[i]);return e}(),ot.lab.apply(ot,t)}):5===i.length&&(e=f(i.slice(0,3)),n=f(i.slice(2,5)),t=function(t){return t<.5?e(2*t):n(2*(t-.5))}),t},ot.interpolate.bezier=f}.call(this),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";function m(t,e){var n,i=document.createElement(t||"div");for(n in e)i[n]=e[n];return i}function d(t){for(var e=1,n=arguments.length;e<n;e++)t.appendChild(arguments[e]);return t}function r(t,e,n,i){var o=["opacity",e,~~(100*t),n,i].join("-"),a=.01+n/i*100,r=Math.max(1-(1-t)/e*(100-a),t),s=y.substring(0,y.indexOf("Animation")).toLowerCase(),l=s&&"-"+s+"-"||"";return u[o]||(h.insertRule("@"+l+"keyframes "+o+"{0%{opacity:"+r+"}"+a+"%{opacity:"+t+"}"+(a+.01)+"%{opacity:1}"+(a+e)%100+"%{opacity:"+t+"}100%{opacity:"+r+"}}",h.cssRules.length),u[o]=1),o}function i(t,e){var n,i,o=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<a.length;i++)if(o[n=a[i]+e]!==undefined)return n;if(o[e]!==undefined)return e}function g(t,e){for(var n in e)t.style[i(t,n)||n]=e[n];return t}function e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]===undefined&&(t[i]=n[i])}return t}function v(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function c(t,e){return"string"==typeof t?t:t[e%t.length]}function n(t){if(void 0===this)return new n(t);this.opts=e(t||{},n.defaults,s)}function t(){function u(t,e){return m("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}h.addRule(".spin-vml","behavior:url(#default#VML)"),n.prototype.lines=function(t,i){function o(){return g(u("group",{coordsize:r+" "+r,coordorigin:-a+" "+-a}),{width:r,height:r})}function e(t,e,n){d(l,d(g(o(),{rotation:360/i.lines*t+"deg",left:~~e}),d(g(u("roundrect",{arcsize:i.corners}),{width:a,height:i.width,left:i.radius,top:-i.width>>1,filter:n}),u("fill",{color:c(i.color,t),opacity:i.opacity}),u("stroke",{opacity:0}))))}var n,a=i.length+i.width,r=2*a,s=2*-(i.width+i.length)+"px",l=g(o(),{position:"absolute",top:s,left:s});if(i.shadow)for(n=1;n<=i.lines;n++)e(n,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(n=1;n<=i.lines;n++)e(n);return d(t,l)},n.prototype.opacity=function(t,e,n,i){var o=t.firstChild;i=i.shadow&&i.lines||0,o&&e+i<o.childNodes.length&&(o=(o=(o=o.childNodes[e+i])&&o.firstChild)&&o.firstChild)&&(o.opacity=n)}}var y,o,a=["webkit","Moz","ms","O"],u={},h=(o=m("style",{type:"text/css"}),d(document.getElementsByTagName("head")[0],o),o.sheet||o.styleSheet),s={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};n.defaults={},e(n.prototype,{spin:function(t){this.stop();var e,n,i=this,o=i.opts,a=i.el=g(m(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),r=o.radius+o.length+o.width;if(t&&(t.insertBefore(a,t.firstChild||null),n=v(t),e=v(a),g(a,{left:("auto"==o.left?n.x-e.x+(t.offsetWidth>>1):parseInt(o.left,10)+r)+"px",top:("auto"==o.top?n.y-e.y+(t.offsetHeight>>1):parseInt(o.top,10)+r)+"px"})),a.setAttribute("role","progressbar"),i.lines(a,i.opts),!y){var s,l=0,u=(o.lines-1)*(1-o.direction)/2,d=o.fps,c=d/o.speed,h=(1-o.opacity)/(c*o.trail/100),f=c/o.lines;!function p(){l++;for(var t=0;t<o.lines;t++)s=Math.max(1-(l+(o.lines-t)*f)%c*h,o.opacity),i.opacity(a,t*o.direction+u,s,o);i.timeout=i.el&&setTimeout(p,~~(1e3/d))}()}return i},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=undefined),this},lines:function(t,n){function e(t,e){return g(m(),{position:"absolute",width:n.length+n.width+"px",height:n.width+"px",background:t,boxShadow:e,transformOrigin:"left",transform:"rotate("+~~(360/n.lines*o+n.rotate)+"deg) translate("+n.radius+"px,0)",borderRadius:(n.corners*n.width>>1)+"px"})}for(var i,o=0,a=(n.lines-1)*(1-n.direction)/2;o<n.lines;o++)i=g(m(),{position:"absolute",top:1+~(n.width/2)+"px",transform:n.hwaccel?"translate3d(0,0,0)":"",opacity:n.opacity,animation:y&&r(n.opacity,n.trail,a+o*n.direction,n.lines)+" "+1/n.speed+"s linear infinite"}),n.shadow&&d(i,g(e("#000","0 0 4px #000"),{top:"2px"})),d(t,d(i,e(c(n.color,o),"0 0 1px rgba(0,0,0,.1)")));return t},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}});var l=g(m("group"),{behavior:"url(#default#VML)"});return!i(l,"transform")&&l.adj?t():y=i(l,"animation"),n}),function(t){if("object"==typeof exports)t(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define(["jquery","spin"],t);else{if(!window.Spinner)throw new Error("Spin.js not present");t(window.jQuery,window.Spinner)}}(function(o,a){o.fn.spin=function(n,i){return this.each(function(){var t=o(this),e=t.data();e.spinner&&(e.spinner.stop(),delete e.spinner),!1!==n&&(n=o.extend({color:i||t.css("color")},o.fn.spin.presets[n]||n),e.spinner=new a(n).spin(this))})},o.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),L.SpinMapMixin={spin:function(t,e){t?(this._spinner||(this._spinner=new Spinner(e).spin(this._container),this._spinning=0),this._spinning++):(this._spinning--,this._spinning<=0&&this._spinner&&(this._spinner.stop(),this._spinner=null))}},L.Map.include(L.SpinMapMixin),L.Map.addInitHook(function(){this.on("layeradd",function(t){t.layer.loading&&this.spin(!0),"function"==typeof t.layer.on&&(t.layer.on("data:loading",function(){this.spin(!0)},this),t.layer.on("data:loaded",function(){this.spin(!1)},this))},this),this.on("layerremove",function(t){t.layer.loading&&this.spin(!1),"function"==typeof t.layer.on&&(t.layer.off("data:loaded"),t.layer.off("data:loading"))},this)});var Wkt=function(){var n,i;return n=function(t,e){return t.substring(0,e.length)===e},i=function(t,e){return t.substring(t.length-e.length)===e},{delimiter:" ",isArray:function(t){return!(!t||t.constructor!==Array)},trim:function(t,e){for(e=e||" ";n(t,e);)t=t.substring(1);for(;i(t,e);)t=t.substring(0,t.length-1);return t},Wkt:function(t){this.delimiter=Wkt.delimiter||" ",this.wrapVertices=!0,this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+|\+/,numeric:/-*\d+(\.*\d+)?/,comma:/\s*,\s*/,parenComma:/\)\s*,\s*\(/,coord:/-*\d+\.*\d+ -*\d+\.*\d+/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/,ogcTypes:/^(multi)?(point|line|polygon|box)?(string)?$/i,crudeJson:/^{.*"(type|coordinates|geometries|features)":.*}$/},this.components=undefined,t&&"string"==typeof t?this.read(t):t&&typeof t!==undefined&&this.fromObject(t)}}}();Wkt.Wkt.prototype.isCollection=function(){switch(this.type.slice(0,5)){case"multi":case"polyg":return!0;default:return!1}},Wkt.Wkt.prototype.sameCoords=function(t,e){return t.x===e.x&&t.y===e.y},Wkt.Wkt.prototype.fromObject=function(t){var e;return e=t.hasOwnProperty("type")&&t.hasOwnProperty("coordinates")?this.fromJson(t):this.deconstruct.call(this,t),this.components=e.components,this.isRectangle=e.isRectangle||!1,this.type=e.type,this},Wkt.Wkt.prototype.toObject=function(t){return this.construct[this.type].call(this,t)},Wkt.Wkt.prototype.toString=function(){return this.write()},Wkt.Wkt.prototype.fromJson=function(t){var e,n,i,o,a,r;if(this.type=t.type.toLowerCase(),this.components=[],o=t.coordinates,Wkt.isArray(o[0])){for(e in o)if(o.hasOwnProperty(e))if(Wkt.isArray(o[e][0])){for(n in r=[],o[e])if(o[e].hasOwnProperty(n))if(Wkt.isArray(o[e][n][0])){for(i in a=[],o[e][n])o[e][n].hasOwnProperty(i)&&a.push({x:o[e][n][i][0],y:o[e][n][i][1]});r.push(a)}else r.push({x:o[e][n][0],y:o[e][n][1]});this.components.push(r)}else"multipoint"===this.type?this.components.push([{x:o[e][0],y:o[e][1]}]):this.components.push({x:o[e][0],y:o[e][1]})}else this.components.push({x:o[0],y:o[1]});return this},Wkt.Wkt.prototype.toJson=function(){var t,e,n,i,o,a,r;if(t=this.components,e={coordinates:[],type:function(){var t,e,n;for(t in n=[],e=this.regExes.ogcTypes.exec(this.type).slice(1))e.hasOwnProperty(t)&&e[t]!==undefined&&n.push(e[t].toLowerCase().slice(0,1).toUpperCase()+e[t].toLowerCase().slice(1));return n}.call(this).join("")},"box"===this.type.toLowerCase()){for(n in e.type="Polygon",e.bbox=[],t)t.hasOwnProperty(n)&&(e.bbox=e.bbox.concat([t[n].x,t[n].y]));return e.coordinates=[[[t[0].x,t[0].y],[t[0].x,t[1].y],[t[1].x,t[1].y],[t[1].x,t[0].y],[t[0].x,t[0].y]]],e}for(n in t)if(t.hasOwnProperty(n))if(Wkt.isArray(t[n])){for(i in r=[],t[n])if(t[n].hasOwnProperty(i))if(Wkt.isArray(t[n][i])){for(o in a=[],t[n][i])t[n][i].hasOwnProperty(o)&&a.push([t[n][i][o].x,t[n][i][o].y]);r.push(a)}else 1<t[n].length?r.push([t[n][i].x,t[n][i].y]):r=r.concat([t[n][i].x,t[n][i].y]);e.coordinates.push(r)}else 1<t.length?e.coordinates.push([t[n].x,t[n].y]):e.coordinates=e.coordinates.concat([t[n].x,t[n].y]);return e},Wkt.Wkt.prototype.merge=function(t){var e=this.type.slice(0,5);if(this.type!==t.type&&this.type.slice(5,this.type.length)!==t.type)throw TypeError("The input geometry types must agree or the calling Wkt.Wkt instance must be a multigeometry of the other");switch(e){case"point":this.components=[this.components.concat(t.components)];break;case"multi":this.components=this.components.concat("multi"===t.type.slice(0,5)?t.components:[t.components]);break;default:this.components=[this.components,t.components]}"multi"!==e&&(this.type="multi"+this.type)},Wkt.Wkt.prototype.read=function(t){var e;if(e=this.regExes.typeStr.exec(t))this.type=e[1].toLowerCase(),this.base=e[2],this.ingest[this.type]&&(this.components=this.ingest[this.type].apply(this,[this.base]));else{if(!this.regExes.crudeJson.test(t))throw console.log("Invalid WKT string provided to read()"),{name:"WKTError",message:"Invalid WKT string provided to read()"};if("object"!=typeof JSON||"function"!=typeof JSON.parse)throw console.log("JSON.parse() is not available; cannot parse GeoJSON strings"),{name:"JSONError",message:"JSON.parse() is not available; cannot parse GeoJSON strings"};this.fromJson(JSON.parse(t))}return this.components},Wkt.Wkt.prototype.write=function(t){var e,n,i;for(t=t||this.components,(n=[]).push(this.type.toUpperCase()+"("),e=0;e<t.length;e+=1){if(this.isCollection()&&0<e&&n.push(","),!this.extract[this.type])return null;i=this.extract[this.type].apply(this,[t[e]]),this.isCollection()&&"multipoint"!==this.type?n.push("("+i+")"):(n.push(i),e!==t.length-1&&"multipoint"!==this.type&&n.push(","))}return n.push(")"),n.join("")},Wkt.Wkt.prototype.extract={point:function(t){return String(t.x)+this.delimiter+String(t.y)},multipoint:function(t){var e,n,i=[];for(e=0;e<t.length;e+=1)n=this.extract.point.apply(this,[t[e]]),this.wrapVertices&&(n="("+n+")"),i.push(n);return i.join(",")},linestring:function(t){return this.extract.point.apply(this,[t])},multilinestring:function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(this.extract.linestring.apply(this,[t[e]]));return n.join(",")},polygon:function(t){return this.extract.multilinestring.apply(this,[t])},multipolygon:function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push("("+this.extract.polygon.apply(this,[t[e]])+")");return n.join(",")},box:function(t){return this.extract.linestring.apply(this,[t])},geometrycollection:function(){console.log("The geometrycollection WKT type is not yet supported.")}},Wkt.Wkt.prototype.ingest={point:function(t){var e=Wkt.trim(t).split(this.regExes.spaces);return[{x:parseFloat(this.regExes.numeric.exec(e[0])[0]),y:parseFloat(this.regExes.numeric.exec(e[1])[0])}]},multipoint:function(t){var e,n,i;for(n=[],i=Wkt.trim(t).split(this.regExes.comma),e=0;e<i.length;e+=1)n.push(this.ingest.point.apply(this,[i[e]]));return n},linestring:function(t){var e,n,i;for(n=this.ingest.multipoint.apply(this,[t]),i=[],e=0;e<n.length;e+=1)i=i.concat(n[e]);return i},multilinestring:function(t){var e,n,i,o;for(n=[],1===(o=Wkt.trim(t).split(this.regExes.doubleParenComma)).length&&(o=Wkt.trim(t).split(this.regExes.parenComma)),e=0;e<o.length;e+=1)i=o[e].replace(this.regExes.trimParens,"$1"),n.push(this.ingest.linestring.apply(this,[i]));return n},polygon:function(t){var e,n,i,o,a,r;for(r=Wkt.trim(t).split(this.regExes.parenComma),i=[],e=0;e<r.length;e+=1){for(a=r[e].replace(this.regExes.trimParens,"$1").split(this.regExes.comma),o=[],n=0;n<a.length;n+=1)o.push({x:parseFloat(a[n].split(this.regExes.spaces)[0]),y:parseFloat(a[n].split(this.regExes.spaces)[1])});i.push(o)}return i},box:function(t){var e,n,i;for(n=this.ingest.multipoint.apply(this,[t]),i=[],e=0;e<n.length;e+=1)i=i.concat(n[e]);return i},multipolygon:function(t){var e,n,i,o;for(n=[],o=Wkt.trim(t).split(this.regExes.doubleParenComma),e=0;e<o.length;e+=1)i=o[e].replace(this.regExes.trimParens,"$1"),n.push(this.ingest.polygon.apply(this,[i]));return n},geometrycollection:function(){console.log("The geometrycollection WKT type is not yet supported.")}},Wkt.Wkt.prototype.isRectangle=!1,Wkt.Wkt.prototype.trunc=function(t){var e,n=[];for(e=0;e<t.length;e+=1)Wkt.isArray(t[e])?n.push(this.trunc(t[e])):0!==e&&this.sameCoords(t[0],t[e])||n.push(t[e]);return n},Wkt.Wkt.prototype.construct={point:function(t,e){var n=e||this.components;return n instanceof Array&&(n=n[0]),L.marker(this.coordsToLatLng(n),t)},multipoint:function(t){var e,n=[],i=this.components;for(e=0;e<i.length;e+=1)n.push(this.construct.point.call(this,t,i[e]));return L.featureGroup(n,t)},linestring:function(t,e){var n=e||this.components,i=this.coordsToLatLngs(n);return L.polyline(i,t)},multilinestring:function(t){var e=this.components,n=this.coordsToLatLngs(e,1);return L.multiPolyline(n,t)},polygon:function(t){var e=this.trunc(this.components),n=this.coordsToLatLngs(e,1);return L.polygon(n,t)},multipolygon:function(t){var e=this.trunc(this.components),n=this.coordsToLatLngs(e,2);return L.multiPolygon(n,t)},geometrycollection:function(t){var e,n,i;for(e=this.trunc(this.components),i=[],n=0;n<this.components.length;n+=1)i.push(this.construct[e[n].type].call(this,e[n]));return L.featureGroup(i,t)}},L.Util.extend(Wkt.Wkt.prototype,{coordsToLatLngs:L.GeoJSON.coordsToLatLngs,coordsToLatLng:function(t,e){var n=e?t.x:t.y,i=e?t.y:t.x;return L.latLng(n,i,!0)}}),Wkt.Wkt.prototype.deconstruct=function(o){var t,i,n,e,a,r,s;if(i=function(t){var e,n;for(n=[],e=0;e<t.length;e+=1)Wkt.isArray(t[e])?n.push(i(t[e])):n.push({x:t[e].lng,y:t[e].lat});return n},o.constructor===L.Marker||o.constructor===L.marker)return{type:"point",components:[{x:o.getLatLng().lng,y:o.getLatLng().lat}]};if(o.constructor===L.Rectangle||o.constructor===L.rectangle)return{type:"polygon",isRectangle:!0,components:[[{x:(s=o.getBounds()).getSouthWest().lng,y:s.getNorthEast().lat},{x:s.getNorthEast().lng,y:s.getNorthEast().lat},{x:s.getNorthEast().lng,y:s.getSouthWest().lat},{x:s.getSouthWest().lng,y:s.getSouthWest().lat},{x:s.getSouthWest().lng,y:s.getNorthEast().lat}]]};if((o.constructor===L.Polyline||o.constructor===L.polyline)&&(a=[],!(s=o.getLatLngs())[0].equals(s[s.length-1]))){for(e=0;e<s.length;e+=1)a.push({x:s[e].lng,y:s[e].lat});return{type:"linestring",components:a}}if(o.constructor===L.Polygon||o.constructor===L.polygon){for(r=[],a=[],s=o.getLatLngs(),e=0;e<o._latlngs.length;e+=1)a.push({x:s[e].lng,y:s[e].lat});if(a.push({x:s[0].lng,y:s[0].lat}),r.push(a),o._holes&&0<o._holes.length)for(a=i(o._holes),e=0;e<a.length;e++)a[e].push(a[e][0]),r.push(a[e]);return{type:"polygon",components:r}}if(o.constructor===L.MultiPolyline||o.constructor===L.MultiPolygon||o.constructor===L.LayerGroup||o.constructor===L.FeatureGroup){for(t in n=[],s=o._layers)s.hasOwnProperty(t)&&(s[t].getLatLngs||s[t].getLatLng)&&n.push(this.deconstruct(s[t]));return{type:function(){switch(o.constructor){case L.MultiPolyline:
return"multilinestring";case L.MultiPolygon:return"multipolygon";case L.FeatureGroup:return function(){var t,e,n,i;for(t in i=n=e=!0,o._layers)o._layers.hasOwnProperty(t)&&(o._layers[t].constructor!==L.Marker&&(i=!1),o._layers[t].constructor!==L.Polyline&&(n=!1),o._layers[t].constructor!==L.Polygon&&(e=!1));return i?"multipoint":n?"multilinestring":e?"multipolygon":"geometrycollection"}();default:return"geometrycollection"}}(),components:function(){var t,e;for(e=[],t=0;t<n.length;t+=1)n[t].components&&e.push(n[t].components);return e}()}}o.constructor===L.Rectangle||o.constructor===L.rectangle?console.log("Deconstruction of L.Circle objects is not yet supported"):console.log("The passed object does not have any recognizable properties.")},"function"!=typeof Object.create&&(Object.create=function(t){var e=function(){};return e.prototype=t,new e});var CsLeaflet=CsLeaflet||{};CsLeaflet.Leaflet={_options:null,LMmarkers:new Array,LMcircles:new Array,LMpolylines:new Array,LMmultipolygons:new Array,LMmap:null,LMbounds:null,LMcacheBounds:null,LMcurrent_popup:null,LMsidewalk_feedback_tool:null,OPENSTREETMAP_URL:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",OPENSTREETMAP_ATTRIB:"Map data \xa9 OpenStreetMap contributors",CLOUDMADE_URL:"http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/{styleId}/256/{z}/{x}/{y}.png",CLOUDMADE_ATTRIB:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery \xa9 <a href="http://cloudmade.com">CloudMade</a>',STREET_VIEW:"streetView",CURRENT_LOCATION:"currentLocation",LOCATION_SELECT:"locationSelect",SIDEWALK_FEEDBACK:"sidewalkFeedback",init:function(t,e){var n={zoomControl:(this._options=e).show_default_zoom_control,scrollWheelZoom:e.scroll_wheel_zoom,zoomAnimation:e.zoom_animation};if("number"==typeof e.min_zoom&&(n.minZoom=e.min_zoom),"number"==typeof e.max_zoom&&(n.maxZoom=e.max_zoom),this.LMmap=L.map(t,n),"OPENSTREETMAP"==e.tile_provider){var i=this.OPENSTREETMAP_URL,o=this.OPENSTREETMAP_ATTRIB;L.tileLayer(i,{minZoom:e.min_zoom,maxZoom:e.max_zoom,attribution:o}).addTo(this.LMmap)}else if("GOOGLEMAP"==e.tile_provider){var a=new L.Google("ROADMAP");this.LMmap.addLayer(a)}else if("CLOUDMADE"==e.tile_provider){i=this.CLOUDMADE_URL,o=this.CLOUDMADE_ATTRIB;L.tileLayer(i,{minZoom:e.min_zoom,maxZoom:e.max_zoom,attribution:o,styleId:e.tile_style_id}).addTo(this.LMmap)}if(e.show_my_location&&this.addCurrentLocationControl(),e.show_street_view&&this.addStreetViewControl(),e.show_location_select&&this.addLocationSelectControl(),e.show_sidewalk_feedback&&CsLeaflet.SidewalkFeedbackTool){var r=Object.create(CsLeaflet.SidewalkFeedbackTool);r.init(this,e.sidewalk_feedback_options),this.LMsidewalk_feedback_tool=r}this.registerMapClickEvent(),this.registerPopupOpenEvent()},centerOnMarker:function(t){var e=findMarkerById(t);if(e){var n=e.getLatLng();this.panTo(n.lat,n.lng)}},panTo:function(t,e){var n=new L.LatLng(t,e);this.LMmap.panTo(n)},showMap:function(){for(var t=0;t<this.LMmarkers.length;t++)this.LMmap.addLayer(this.LMmarkers[t]);for(t=0;t<this.LMcircles.length;t++)this.LMmap.addLayer(this.LMcircles[t]);for(t=0;t<this.LMpolylines.length;t++)this.LMmap.addLayer(this.LMpolylines[t]);for(t=0;t<this.LMmultipolygons.length;t++)this.LMmap.addLayer(this.LMmultipolygons[t]);var e;e=0<this.LMmarkers.length?this.calcMapBounds(this.LMmarkers):this.LMbounds,this.LMmap.fitBounds(e)},showMapOriginal:function(){mapBounds=this.LMcacheBounds,this.LMmap.fitBounds(mapBounds)},replaceMarkers:function(t,e){if(this.removeMarkers(),this.addMarkers(t),e)this.showMap();else for(var n=0;n<this.LMmarkers.length;n++)this.LMmap.addLayer(this.LMmarkers[n])},replaceSidewalkFeedbackMarkers:function(t,e){var n=this.LMsidewalk_feedback_tool;n&&(n.removeSidewalkFeedbackMarkers(),n.addSidewalkFeedbackMarkers(t),e?this.showMap():this.LMmap.addLayer(n.LMsidewalk_feedback_layergroup))},refreshMarkers:function(){for(var t=0;t<this.LMmarkers.length;t++)this.LMmap.removeLayer(this.LMmarkers[t]);for(t=0;t<this.LMmarkers.length;t++)this.LMmap.addLayer(this.LMmarkers[t])},replaceCircles:function(t,e){if(this.removeCircles(),this.addCircles(t),e)this.showMap();else for(var n=0;n<this.LMcircles.length;n++)this.LMmap.addLayer(this.LMcircles[n])},replacePolylines:function(t,e){if(this.removePolylines(),this.addPolylines(t),e)this.showMap();else for(var n=0;n<this.LMpolylines.length;n++)this.LMmap.addLayer(this.LMpolylines[n])},removeMarkersKeepCache:function(){for(var t=0;t<this.LMmarkers.length;t++)this.LMmap.removeLayer(this.LMmarkers[t])},removeMarkers:function(){for(var t=0;t<this.LMmarkers.length;t++)this.LMmap.removeLayer(this.LMmarkers[t]);this.LMmarkers=new Array},removeCircles:function(){for(var t=0;t<this.LMcircles.length;t++)this.LMmap.removeLayer(this.LMcircles[t]);this.LMcircles=new Array},removePolylines:function(){for(var t=0;t<this.LMpolylines.length;t++)this.LMmap.removeLayer(this.LMpolylines[t]);this.LMpolylines=new Array},addMarkers:function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null!=n.lat&&null!=n.lng){var i=n.id,o=n.lat,a=n.lng,r=n.iconClass,s=n.description,l=n.title,u=n.open;marker=this.createMarker(i,o,a,r,s,l,u),this.LMmarkers.push(marker)}}},addMarkerToMap:function(t,e){e&&this.LMmarkers.push(t),this.LMmap.addLayer(t)},removeMarkerFromMap:function(t){match_marker=null,markers=new Array;for(var e=0;e<this.LMmarkers.length;e++)t.id!=this.LMmarkers[e].id?markers.push(this.LMmarkers[e]):match_marker=this.LMmarkers[e];this.LMmarkers=markers,match_marker&&this.LMmap.removeLayer(match_marker)},removeMatchingMarkers:function(t){markers=new Array;for(var e=0;e<this.LMmarkers.length;e++){var n=this.LMmarkers[e],i=n.id;null==i||-1==i.indexOf(t)?markers.push(n):this.LMmap.removeLayer(n)}this.LMmarkers=markers},addCircles:function(t){for(var e=0;e<t.length;e++){var n=t[e],i=n.lat,o=n.lng,a=n.radius,r={};n.options&&(r=n.options),this.addCircle(i,o,a,r)}},addMultipolygons:function(t){for(var e=0;e<t.length;e++){var n=t[e],i=(n.id,n.geom),o={};n.options&&(o=n.options),this.addMultipolygon(i,o)}},addPolylines:function(t){for(var e=0;e<t.length;e++){var n=t[e],i=(n.id,n.geom),o={};n.options&&(o=n.options),this.addPolyline(i,o)}},selectMarkerById:function(t){marker=this.findMarkerById(t),marker&&this.selectMarker(marker)},selectMarkerByName:function(t){marker=this.findMarkerByName(t),marker&&this.selectMarker(marker)},findMarkerInStorage:function(t){var e=localStorage.getItem("marker:"+t);if(e){var n=JSON.parse(e);return this.createMarker(n.id,n.lat,n.lng,n.iconClass,n.popupText,n.name,n.open)}},findMarkerById:function(e){var t;if(this.LMmarkers.forEach(function(t){if(t.id==e)return t}),t=this.findMarkerInStorage(e))return t},findMarkerByName:function(t){for(var e=0;e<this.LMmarkers.length;e++)if(this.LMmarkers[e].name===t)return this.LMmarkers[e]},createMarker:function(id,lat,lng,iconClass,popupText,name,open,options){options&&"object"==typeof options||(options={}),name&&(options.title=name);var latlng=new L.LatLng(lat,lng),marker=L.marker(latlng,options);return marker.id=id,marker.name=name,iconClass&&marker.setIcon(eval(iconClass)),popupText&&(marker.bindPopup(popupText).openPopup(),open&&marker.openPopup()),localStorage.setItem("marker:"+id,JSON.stringify({id:id,lat:lat,lng:lng,iconClass:iconClass,popupText:popupText,name:name,open:open})),marker},addPolyline:function(t,e){for(var n=new Array,i=0;i<t.length;i++){var o=t[i],a=new L.LatLng(o[0],o[1]);n.push(a)}var r=L.polyline(n,e);this.LMpolylines.push(r)},addCircle:function(t,e,n,i){var o=new L.LatLng(t,e),a=L.circle(o,n,i);this.LMcircles.push(a)},addMultipolygon:function(t,e){for(var n=new Array,i=0;i<t.length;i++){for(var o=new Array,a=0;a<t[i].length;a++){for(var r=new Array,s=0;s<t[i][a].length;s++){var l=t[i][a][s],u=new L.LatLng(l[0],l[1]);r.push(u)}o.push(r)}n.push(o)}var d=L.multiPolygon(n,e);this.LMmultipolygons.push(d)},selectMarker:function(t){t&&(t.openPopup(),this.LMmap.panTo(t.getLatLng()))},calcMapBounds:function(t){if(null==t||t.length<1||null==t[0])return nil;var e=t[0].getLatLng().lat,n=t[0].getLatLng().lng,i=t[0].getLatLng().lat,o=t[0].getLatLng().lng;if(1<t.length)for(var a=1;a<t.length;a++)e=e<t[a].getLatLng().lat?e:t[a].getLatLng().lat,n=n<t[a].getLatLng().lng?n:t[a].getLatLng().lng,i=i>t[a].getLatLng().lat?i:t[a].getLatLng().lat,o=o>t[a].getLatLng().lng?o:t[a].getLatLng().lng;return[[e,n],[i,o]]},calcMarkerBounds:function(t){return null==t?nil:[[t.getLatLng().lat,t.getLatLng().lng],[t.getLatLng().lat,t.getLatLng().lng]]},setMapToBounds:function(t){null==t&&(t=this.LMmarkers),0<t.length&&(this.LMbounds=this.calcMapBounds(t),this.LMmap.fitBounds(this.LMbounds))},setMapToMarkerBounds:function(t){t&&this.LMmap.fitBounds(this.calcMarkerBounds(t))},setMapBounds:function(t,e,n,i){this.LMbounds=[[t,e],[n,i]]},cacheMapBounds:function(t,e,n,i){this.LMcacheBounds=[[t,e],[n,i]]},closePopup:function(){this.LMcurrent_popup&&this.LMcurrent_popup._source.closePopup()},invalidateMap:function(){this.LMmap.invalidateSize(!1)},resetMap:function(){this.removeMarkers(),this.removeCircles(),this.removePolylines()},resetMapView:function(){this.LMmap._resetView(this.LMmap.getCenter(),this.LMmap.getZoom(),!0)},getFormattedAddrForMarker:function(t){return"<div class='well well-small'><div class='row'><div class='col-sm-3'><i class='fa fa-3x fa-building-o'></i></div><div class='col-sm-9'><div class='caption'><h4>"+t+"</h4></div></div></div></div>"},refresh:function(){this.LMmap.invalidateSize(!1),this.LMmap.fitBounds(this.LMbounds)},getMapControlTooltips:function(){return(this._options?this._options:{}).map_control_tooltips||{}},addZoomControl:function(){var t=this.getMapControlTooltips();new L.Control.Zoom({zoomInTitle:t.zoom_in,zoomOutTitle:t.zoom_out}).addTo(this.LMmap)},registerCustomControl:function(){L.Control.CustomButton=L.Control.extend({_pressed:!1,_button:null,options:{position:"topleft",title:"",iconCls:"",toggleable:!1,ignorePopupWhenClick:!1,pressedCls:"leaflet-button-pressed",depressedCursorType:"",pressedCursorType:"crosshair",disabled:!1,disabledCls:"leaflet-disabled",clickCallback:function(){}},initialize:function(t,e){this.id=t,L.Util.setOptions(this,e)},checkIfIgnorePopupWhenClick:function(){return this.options.ignorePopupWhenClick},getToggleable:function(){return this.options.toggleable},getDisabled:function(){return!0===this._disabled||!1},setDisabled:function(t){t=!0===t||!1,this._disabled=t;var e=this._button||{};t?L.DomUtil.addClass(e,this.options.disabledCls):L.DomUtil.removeClass(e,this.options.disabledCls)},getPressed:function(){return this._pressed},setPressed:function(t){if(this.getToggleable()){this._pressed=t;var e=this._map;if(this._pressed){if(L.DomUtil.addClass(this._button,this.options.pressedCls),e){var n=e.customControls;if(n instanceof Array){var i=n.indexOf(this);n.forEach(function(t){i!=n.indexOf(t)&&t.setPressed(!1)})}L.DomUtil.get(e.getContainer().id).style.cursor=this.options.pressedCursorType||"crosshair"}}else L.DomUtil.removeClass(this._button,this.options.pressedCls),e&&(L.DomUtil.get(e.getContainer().id).style.cursor=this.options.depressedCursorType||"")}},onAdd:function(t){var e=L.DomUtil.create("div","leaflet-bar leaflet-control");return this._button=L.DomUtil.create("a","leaflet-bar-part",e),L.DomUtil.create("i",this.options.iconCls,this._button),this._button.href="#",this._button.title=this.options.title,L.DomEvent.on(this._button,"click",this._click,this),this.setDisabled(this.options.disabled),t.customControls||(t.customControls=[]),t.customControls.push(this),e},_click:function(t){L.DomEvent.stopPropagation(t),L.DomEvent.preventDefault(t),this.getDisabled()||(this.options.toggleable&&this.setPressed(!this._pressed),this.options.clickCallback())}})},addCurrentLocationControl:function(){if("geolocation"in navigator){L.Control.CustomButton||this.registerCustomControl();var t=this.getMapControlTooltips(),e=this.LMmap;new L.Control.CustomButton(this.CURRENT_LOCATION,{title:t.my_location,iconCls:"fa fa-lg fa-location-arrow",clickCallback:function(){e.locate({setView:!0})}}).addTo(e)}},addStreetViewControl:function(){L.Control.CustomButton||this.registerCustomControl();var t=this.getMapControlTooltips(),e=this.LMmap;new L.Control.CustomButton(this.STREET_VIEW,{title:t.display_street_view,iconCls:"fa fa-lg leaflet-street-view-icon",toggleable:!0,ignorePopupWhenClick:!0}).addTo(e)},openStreetView:function(t){var e=(this._options?this._options:{}).street_view_url||"";t=t||{};window.open(e+"?lat="+t.lat+"&lng="+t.lng,"_blank")},addLocationSelectControl:function(){L.Control.CustomButton||this.registerCustomControl();var t=this.getMapControlTooltips(),e=this.LMmap;new L.Control.CustomButton(this.LOCATION_SELECT,{title:t.select_location_on_map,iconCls:"fa fa-lg fa-map-marker",toggleable:!0}).addTo(e)},getActiveCustomControl:function(){var t=this.LMmap.customControls;if(t instanceof Array)for(var e=0,n=t.length;e<n;e++){var i=t[e];if(i.getToggleable()&&i.getPressed())return i}return null},executeActiveCustomControl:function(t){var e=this.LMmap,n=(e.customControls,this.getActiveCustomControl());if(n)switch(n.id){case this.STREET_VIEW:this.openStreetView(t);break;case this.LOCATION_SELECT:e.fire("placechange",{latlng:t});break;case this.SIDEWALK_FEEDBACK:e.fire("newsidewalkfeedback",{latlng:t})}},registerMapClickEvent:function(){var e=this,t=e.LMmap,n=0;t.on("click",function(t){n++,setTimeout(function(){1===n&&e.executeActiveCustomControl(t.latlng),n=0},200)})},registerPopupOpenEvent:function(){var n=this;n.LMmap.on("popupopen",function(t){n.LMcurrent_popup=t.popup;var e=n.getActiveCustomControl();e&&e.checkIfIgnorePopupWhenClick()&&n.executeActiveCustomControl(t.popup.getLatLng())})}},CsLeaflet.Leaflet.prototype=CsLeaflet.Leaflet,L.Google=L.Class.extend({includes:L.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1},initialize:function(t,e){L.Util.setOptions(this,e),this._type=google.maps.MapTypeId[t||"SATELLITE"]},onAdd:function(t,e){this._map=t,this._insertAtTheBottom=e,this._initContainer(),this._initMapObject(),t.on("viewreset",this._resetCallback,this),this._limitedUpdate=L.Util.limitExecByInterval(this._update,150,this),t.on("move",this._update,this),this._reset(),this._update()},onRemove:function(){this._map._container.removeChild(this._container),this._map.off("viewreset",this._resetCallback,this),this._map.off("move",this._update,this)},getAttribution:function(){return this.options.attribution},setOpacity:function(t){(this.options.opacity=t)<1&&L.DomUtil.setOpacity(this._container,t)},_initContainer:function(){var t=this._map._container;first=t.firstChild,this._container||(this._container=L.DomUtil.create("div","leaflet-google-layer leaflet-top leaflet-left"),this._container.id="_GMapContainer"),t.insertBefore(this._container,first),this.setOpacity(this.options.opacity);var e=this._map.getSize();this._container.style.width=e.x+"px",this._container.style.height=e.y+"px",this._container.style.zIndex=0},_initMapObject:function(){this._google_center=new google.maps.LatLng(0,0);var t=new google.maps.Map(this._container,{center:this._google_center,zoom:0,mapTypeId:this._type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1}),e=this;this._reposition=google.maps.event.addListenerOnce(t,"center_changed",function(){e.onReposition()}),t.backgroundColor="#ff0000",this._google=t},_resetCallback:function(t){this._reset(t.hard)},_reset:function(){this._initContainer()},_update:function(){this._resize();var t=this._map.getBounds(),e=t.getNorthEast(),n=t.getSouthWest(),i=(new google.maps.LatLngBounds(new google.maps.LatLng(n.lat,n.lng),new google.maps.LatLng(e.lat,e.lng)),this._map.getCenter()),o=new google.maps.LatLng(i.lat,i.lng);this._google.setCenter(o),this._google.setZoom(this._map.getZoom())},_resize:function(){var t=this._map.getSize();this._container.style.width==t.x&&this._container.style.height==t.y||(this._container.style.width=t.x+"px",this._container.style.height=t.y+"px",google.maps.event.trigger(this._google,"resize"))},onReposition:function(){}});var baseIcon=L.Icon.extend({options:{shadowUrl:"http://maps.google.com/intl/en_us/mapfiles/ms/micons/msmarker.shadow.png",iconSize:[32,32],iconAnchor:[16,32],shadowAnchor:[16,32],popupAnchor:[0,-24]}}),redIcon=new baseIcon({iconUrl:"http://maps.google.com/intl/en_us/mapfiles/ms/micons/red-dot.png"}),blueIcon=new baseIcon({iconUrl:"http://maps.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.pngg"}),purpleIcon=new baseIcon({iconUrl:"http://maps.google.com/intl/en_us/mapfiles/ms/micons/purple-dot.png"}),yellowIcon=new baseIcon({iconUrl:"http://maps.google.com/intl/en_us/mapfiles/ms/micons/yellow-dot.png"}),greenIcon=new baseIcon({iconUrl:"http://maps.google.com/intl/en_us/mapfiles/ms/micons/green-dot.png"}),orangeIcon=new baseIcon({iconUrl:"http://maps.google.com/intl/en_us/mapfiles/ms/micons/orange-dot.png"}),baseRouteIcon=L.Icon.extend({options:{shadowUrl:"http://maps.google.com/mapfiles/shadow50.png",iconSize:[24,34],iconAnchor:[12,34],shadowAnchor:[12,34],popupAnchor:[0,-24]}}),startIcon=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/dd-start.png"}),stopIcon=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/dd-end.png"}),startCandidateA=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenA.png"}),startCandidateB=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenB.png"}),startCandidateC=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenC.png"}),startCandidateD=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenD.png"}),startCandidateE=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenE.png"}),startCandidateF=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenF.png"}),startCandidateG=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenG.png"}),startCandidateH=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenH.png"}),startCandidateI=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenI.png"}),startCandidateJ=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenJ.png"}),startCandidateK=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenK.png"}),startCandidateL=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenL.png"}),startCandidateM=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenK.png"}),startCandidateN=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenN.png"}),startCandidateO=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenO.png"}),startCandidateP=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenP.png"}),startCandidateQ=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenQ.png"}),startCandidateR=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenR.png"}),startCandidateS=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenS.png"}),startCandidateT=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenT.png"}),stopCandidateA=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerA.png"}),stopCandidateB=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerB.png"}),stopCandidateC=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerC.png"}),stopCandidateD=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerD.png"}),stopCandidateE=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerE.png"}),stopCandidateF=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerF.png"}),stopCandidateG=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerG.png"}),stopCandidateH=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerH.png"}),stopCandidateI=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerI.png"}),stopCandidateJ=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerJ.png"}),stopCandidateK=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerK.png"}),stopCandidateL=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerL.png"}),stopCandidateM=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerK.png"}),stopCandidateN=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerN.png"}),stopCandidateO=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerO.png"}),stopCandidateP=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerP.png"}),stopCandidateQ=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerQ.png"}),stopCandidateR=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerR.png"}),stopCandidateS=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerS.png"}),stopCandidateT=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerT.png"}),placeCandidateA=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowA.png"}),placeCandidateB=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowB.png"}),placeCandidateC=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowC.png"}),placeCandidateD=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowD.png"}),placeCandidateE=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowE.png"}),placeCandidateF=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowF.png"}),placeCandidateG=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowG.png"}),placeCandidateH=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowH.png"}),placeCandidateI=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowI.png"}),placeCandidateJ=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowJ.png"}),placeCandidateK=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowK.png"}),placeCandidateL=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowL.png"}),placeCandidateM=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowM.png"}),placeCandidateN=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowN.png"}),placeCandidateO=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowO.png"}),placeCandidateP=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowP.png"}),placeCandidateQ=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowQ.png"}),placeCandidateR=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowR.png"}),placeCandidateS=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowS.png"}),placeCandidateT=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowT.png"}),baseMiniIcon=L.Icon.extend({options:{iconSize:[7,7],iconAnchor:[3,7],popupAnchor:[0,-5]}}),blueMiniIcon=new baseMiniIcon({iconUrl:"https://maps.gstatic.com/intl/en_us/mapfiles/markers2/measle_blue.png"}),sidewalkFeedbackIcon=new L.icon({iconUrl:"/init-assets/map/warning.png",iconSize:[16,16]}),GatewayMapUtil={getData:function(t,e){$.ajax({url:t}).done(e)},getColorsFromStartEnd:function(t,e,n,i){if(t instanceof Array&&3==t.length&&e instanceof Array&&3==e.length&&"number"==typeof n&&!(n<1)){for(var o,a,r,s=t[0],l=t[1],u=t[2],d=e[0],c=e[1],h=e[2],f=(d-s)/n,p=(c-l)/n,m=(h-u)/n,g=function(t,e,n){return i&&0!=i?"rgba("+t+","+e+","+n+","+i+")":"rgb("+t+","+e+","+n+")"},v=[],y=0;y<n;y++)0===y?(o=s,a=l,r=u):y===n-1?(o=d,a=c,r=h):(o+=f,a+=p,r+=m),v.push(g(parseInt(o),parseInt(a),parseInt(r)));return v}},cloneObject:function(t){if("object"!=typeof t)return{};var e={};for(var n in t)e[n]=t[n];return e},formatNumber:function(t,e){if("number"!=typeof t)return t;var n=(e=e||{}).format,i=e.options||{},o=t;switch(n){case"number":o=$.formatNumber(t,i);break;case"currency":o="$"+$.formatNumber(t,i);break;case"percent":var a=i.decimal||0;o=(100*t).toFixed(a)+"%"}return o},randString:function(t){t||(t=5);for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}},CsLeaflet=CsLeaflet||{};CsLeaflet.Leaflet=CsLeaflet.Leaflet||function(){},CsLeaflet.Leaflet.prototype.exportParameters=function(){var t={},e=this.LMmap._layers;if(this.layerControl){var n=this.layerControl._layers;for(var i in n){var o=n[i];if(!o.overlay&&e[i]){t.basemap=o.name;break}}}t.zoom=this.LMmap.getZoom();var a=this.LMmap.getCenter();t.lat=a.lat,t.lng=a.lng;var r=this.LMmap.getBounds();return t.bounds={ymin:r.getWest(),ymax:r.getEast(),xmin:r.getSouth(),xmax:r.getNorth()},visible_baseoverlays=[],this.baseOverlayIds&&0<this.baseOverlayIds.length&&this.baseOverlayIds.forEach(function(t){e[t]&&visible_baseoverlays.push(e[t].name)}),t.visible_baseoverlays=visible_baseoverlays,t},CsLeaflet.Leaflet.prototype.setZoomExtent=function(t,e,n){this.LMmap.setView([t,e],n)},CsLeaflet.Leaflet.prototype.zoomToWKT=function(t){var e,n=new Wkt.Wkt;n.read(t),"function"==typeof(e=n.toObject()).getBounds?this.LMmap.fitBounds(e.getBounds()):(this.LMmap.setZoom(15),this.LMmap.panTo(e.getLatLng()))},CsLeaflet.Leaflet.prototype.addSidebar=function(t){L.control.sidebar&&(this.sidebarControl=L.control.sidebar(t).addTo(this.LMmap))},CsLeaflet.Leaflet.prototype.addNavbar=function(t){L.control.navbar&&(t=t||{},this.navbarControl=L.control.navbar(t).addTo(this.LMmap))},CsLeaflet.Leaflet.prototype.addFullscreenControl=function(t){L.control.fullscreen&&(this.fullscreenControl=L.control.fullscreen({title:"Show map in fullscreen",fullScreenEl:t}).addTo(this.LMmap))},CsLeaflet.Leaflet.prototype.addZoomSliderControl=function(){L.control.zoomslider&&($(".leaflet-control-zoom").remove(),this.zoomSliderControl=L.control.zoomslider().addTo(this.LMmap))},CsLeaflet.Leaflet.prototype.addStudyAreaControl=function(){if(L.Control.Draw){L.drawLocal.draw.toolbar.buttons.polygon="Define study area";var t=this.LMmap,e=new L.FeatureGroup;t.addLayer(e);var n=new L.Control.Draw({draw:{polyline:!1,marker:!1,circle:!1,rectangle:!1},edit:!1,remove:!1});t.addControl(n),this.studyAreaEditingLayer=e,this.studyAreaControl=n}},CsLeaflet.Leaflet.prototype.addLayerControl=function(){this.layerControl=L.control.layers().addTo(this.LMmap)},CsLeaflet.Leaflet.prototype.getLayerControl=function(){return this.layerControl||this.addLayerControl(),this.layerControl},CsLeaflet.Leaflet.prototype.getLegends=function(){return this.legends||(this.legends={}),this.legends},CsLeaflet.Leaflet.prototype.getLabels=function(){return this.labels||(this.labels={}),this.labels},CsLeaflet.Leaflet.prototype.registerAddOverlayEvent=function(){var s=this,l=s.LMmap,u=s.getLabels();l.on("overlayadd",function(t){var e=t.layer.layerId,n="#layer-legend-"+e;0<$(n).length&&$(n).show(),s.baseOverlayIds&&0<=s.baseOverlayIds.indexOf(e)&&t.layer.bringToBack();var i=t.name,o=u[i];if(o instanceof Array)for(var a=0,r=o.length;a<r;a++)l.showLabel(o[a])})},CsLeaflet.Leaflet.prototype.registerRemoveOverlayEvent=function(){var t=this.LMmap,r=this.getLabels();t.on("overlayremove",function(t){var e="#layer-legend-"+t.layer.layerId;0<$(e).length&&$(e).hide();var n=t.name,i=r[n];if(i instanceof Array)for(var o=0,a=i.length;o<a;o++)i[o].close()})},CsLeaflet.Leaflet.prototype.zoomToExtent=function(t,e,n){this.LMmap.setView([t,e],n)},CsLeaflet.Leaflet.prototype.addAttribution=function(t,e){if(t){var n="";(e||0===e)&&(n="id='attribution-"+e+"'"),$("#attribution").append("<p "+n+">"+t+"</p>")}},CsLeaflet.Leaflet.prototype.deleteLayerAttribution=function(t){(t||0===t)&&$("#attribution-"+t).remove()},CsLeaflet.Leaflet.prototype.addBasemaps=function(t,e){if(t instanceof Array)for(var n=this,i=n.LMmap,o=n.getLayerControl(),a=function(t){var e=null;switch(t.type){case"OpenStreetMap":e=new L.TileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png");break;case"CloudMade":e=new L.TileLayer("http://{s}.tile.cloudmade.com/"+t.key+"/{styleId}/"+t.resolution+"/{z}/{x}/{y}.png",{styleId:t.styleId});break;case"Google":e=new L.Google(t.layerName);break;case"Esri":e=new L.esri.BasemapLayer(t.layerName)}return n.addAttribution(t.attribution),e},r=!1,s=0,l=t.length;s<l;s++){var u=t[s];if(u.hasOwnProperty("type")){var d=u.name;e||(e=d);var c=a(u);c&&(r||d!==e||(i.addLayer(c),r=!0),o.addBaseLayer(c,d))}}},CsLeaflet.Leaflet.prototype.addBaseOverlay=function(t){this.baseOverlayIds=this.baseOverlayIds||[];var n=this,i=this.LMmap;i.spin(!0),t.non_clickable=!0,this.addOverlayLayer(t,function(t){i.spin(!1);var e=t.layerId;"number"!=typeof e&&(e=t._leaflet_id),n.baseOverlayIds.indexOf(e)<0&&n.baseOverlayIds.push(e)})},CsLeaflet.Leaflet.prototype.overwriteLayerStyleFromLegend=function(t,e,n){if(t=t||{},(e=e||{}).field&&e.colors&&"unique_value"===e.symbology_type){var i=t;t=function(t){return n?i.fillColor=e.colors[t.properties[e.field]]:i.color=e.colors[t.properties[e.field]],i}}return t},CsLeaflet.Leaflet.prototype.addOverlayLayer=function(t,e){if(t.hasOwnProperty("type"))switch(t.type){case"Geojson":this.addGeojsonLayer(t,e);break;case"PBF_TILE":this.addVectorTilePBF(t,e)}},CsLeaflet.Leaflet.prototype.addGeojsonLayer=function(t,e){var n=this.LMmap,i=this.getLayerControl(),o=(this.overlayers,this),a=t.name,r=(t.viewId,"POLYGON"===t.geometry_type),s=t.style;t.predefined_symbology&&(s=o.overwriteLayerStyleFromLegend(s,t.predefined_symbology,r));var l=L.geoJson([],{style:s});t.turn_off_by_default||n.addLayer(l),l.layerId=l._leaflet_id||GatewayMapUtil.randString(6),l.name=a,l.geometryType=t.geometry_type,t.predefined_symbology&&o.addSimpleLegend(l,[{subject:a}],a,t.predefined_symbology.colors,t.predefined_symbology.labels,t.turn_off_by_default),i.addOverlay(l,a),"string"==typeof t.attribution&&o.addAttribution(t.attribution,l.layerId);var u=function(t){l.clearLayers(),l.addData(t),"function"==typeof e&&e.apply(this,[l]),n.spin(!1)};n.spin(!0),t.url?GatewayMapUtil&&GatewayMapUtil.getData(t.url,u):u(t.data)},CsLeaflet.Leaflet.prototype.getColumnIndex=function(t,e){for(var n=null,i=0,o=(t=t||[]).length;i<o;i++){var a=t[i];if(a.name===e){n=a.index;break}}return n},CsLeaflet.Leaflet.prototype.getDisplayColumnConfig=function(t,e){for(var n=null,i=0,o=(t=t||[]).length;i<o;i++){var a=t[i];if(a.index===e){n=a;break}}return n},CsLeaflet.Leaflet.prototype.getLayerDisplayColumnConfig=function(t,e){return t.displayConfig||this.setLayerDisplayColumnConfig(t,e),t.displayConfig},CsLeaflet.Leaflet.prototype.setLayerDisplayColumnConfig=function(t,e){var n=t.symbology||e||{},i=t.displayColumnIndex;i||0==i||(i=n.default_column_index),t.displayConfig=this.getDisplayColumnConfig(n.columns,i)},CsLeaflet.Leaflet.prototype.calculateNaturalValueBreaks=function(t,e,n){for(var i=[],o=(e-t)/(n-1),a=t;a<=e;)i.push(a),a+=o;return i},CsLeaflet.Leaflet.prototype.calculateEqualValueBreaks=function(t,e,n){for(var i=[],o=t-t%n;o<e;)i.push(o),o+=n;return e<=o&&i.push(o),i},CsLeaflet.Leaflet.prototype.calculateQuantileBreaks=function(t,e){if(!t||0==t.totalCount)return[];var n=Math.round(t.totalCount/e),i=t.minValue,o=[i],a=t.valueCounts,r=a.length,s=a[0][1],l=!1;n<=s&&(l=!0,o.push(i),n=Math.round((t.totalCount-s)/(e-1)));for(var u=0,d=0;d<r;d++){var c=a[d],h=c[0];if(!l||h!=i)if(n<=(u+=c[1])&&(o.push(h),u=0),o.length==e)break}return o.indexOf(t.maxValue)<0&&o.push(t.maxValue),o},CsLeaflet.Leaflet.prototype.calculateGeometricBreaks=function(t,e,n,i){for(var o=[],a=t-t%n,r=i;a<=e;)o.push(a),a=n*r,r*=i;return e<a&&o.push(a),o},CsLeaflet.Leaflet.prototype.calculateTileFeatureValueBounds=function(t){function e(t,e){return t-e}var n=t.options.features;if(!n)return null;var o=t.symbology,a=o.columns;switch(o.symbology_type){case"geometric_breaks":case"natural_breaks":var r,s;for(var l in n)for(var u=n[l],d=0,c=a.length;d<c;d++){var h=a[d].name,f=parseFloat(u[h]);isNaN(f)||(("number"!=typeof r||f<r)&&(r=f),("number"!=typeof s||s<f)&&(s=f))}"number"==typeof r&&"number"==typeof s&&(o.minValue=r,o.maxValue=s);break;case"quantile_breaks":var p=[];for(var l in n)for(u=n[l],d=0,c=a.length;d<c;d++){h=a[d].name,f=parseFloat(u[h]);isNaN(f)||p.push(f)}var m={},g=[],v=p.length;for(i=0;i<v;++i){var y=p[i];m[y]||(g.push(y),m[y]=0),++m[y]}g=g.sort(e);var _=[];g.forEach(function(t){_.push([t,m[t]])}),o.values={totalCount:v,minValue:g[0],maxValue:g[g.length-1],valueCounts:_}}},CsLeaflet.Leaflet.prototype.prepareLayerSymbologyValues=function(t,e){var n=e.color_scheme;if(n)switch(e.symbology_type){case"quantile_breaks":e.breaks=this.calculateQuantileBreaks(e.values,
n.class_count);var i=e.breaks.slice();1<i.length&&i[0]==i[1]&&(i[0]=i[1]-1),e.scale=chroma.scale([n.start_color,n.end_color]).domain(i).mode("hsv"),e.colors=e.scale.colors();break;case"geometric_breaks":var o=n.gap_value,a=n.multiplier;e.breaks=a?this.calculateGeometricBreaks(0,e.maxValue,o,a):this.calculateEqualValueBreaks(0,e.maxValue,o),e.scale=chroma.scale([n.start_color,n.end_color]).domain(e.breaks).mode("hsv"),e.colors=e.scale.colors();break;case"natural_breaks":e.breaks=this.calculateNaturalValueBreaks(0,maxValue,n.class_count),e.scale=chroma.scale([n.start_color,n.end_color]).domain(e.breaks).mode("hsv"),e.colors=e.scale.colors()}},CsLeaflet.Leaflet.prototype.addVectorTilePBF=function(m,i){var g=this.LMmap,o=this.getLayerControl(),v=(this.overlayers,this),t=function(t){t=t||[];var u={},d=!1,s=m.referenceColumn;$.grep(t,function(t){d||(d=!0),u[t[s]]=t});var l=m.name,c=m.viewId,h=m.geomReferenceColumn,f=m.symbology||{},e=[];m.non_clickable||e.push(m.tileName);var p=new L.TileLayer.MVTSource({features:u,url:m.url,clickableLayers:e,mutexToggle:!0,onSelect:function(t){if(t&&d){var e=p.symbology||f,n=v.getLayerDisplayColumnConfig(p,f),i="n/a",o="",a="",r=u[t.properties[h]];n&&(a=n.title,o=r[n.name]),(0==o||o)&&(i=GatewayMapUtil.formatNumber(o,e.number_formatter)),g.fireEvent("updateDisplayInfo",{info:{layerName:l,viewId:c,title:a,attributes:r,key:r[s],type:r.area_type,column:n.name,value:i,showDemoStats:m.is_demo,showTMCStats:m.is_tmc,showLinkStats:m.is_link}})}p.fireEvent("featureSelected",{feature:t})},onDeselect:function(){g.fireEvent("updateDisplayInfo")},onClick:function(t){!t.feature&&p._selectedFeature&&p._selectedFeature.deselect()},getIDForLayerFeature:function(t){return t.properties[h]},filter:function(t){var e=!0;d&&(e=u[t.properties[h]]||!1);return!m.showLabel&&-1<t.layer.name.indexOf("_LabelPoint")&&(e=!1),e},layerLink:function(t){return-1<t.indexOf("_LabelPoint")?returnedLayerName=t.replace("_LabelPoint",""):returnedLayerName=t+"_LabelPoint",returnedLayerName},style:function(t){p.hasOwnProperty("showAreaBoundary")||(p.showAreaBoundary=m.showAreaBoundary);var e=GatewayMapUtil.cloneObject(m.style)||{};m.highlightStyle&&(e.selected=GatewayMapUtil.cloneObject(m.highlightStyle));var n=m.predefined_symbology;if(n)n.field&&n.colors&&"unique_value"===n.symbology_type&&(e.color=n.colors[t.properties[n.field]]);else if(!m.non_clickable){var i=v.getLayerDisplayColumnConfig(p,f),o=null,a=null;if(d&&(a=u[t.properties[h]]),a&&i&&(o=a[i.name]),!o&&0!=o)return{color:"transparent",fillColor:"transparent",size:0,radius:0,outline:{color:"transparent",size:0}};var r=p.symbology||f;p.displayColumnIndex||0==p.displayColumnIndex||(v.calculateTileFeatureValueBounds(p),v.prepareLayerSymbologyValues(p,r),p.displayColumnIndex=r.default_column_index);var s=v.getDisplayColumnConfig(r.columns,p.displayColumnIndex||r.default_column_index);if(!s)return{};var l=v.findColor(p,r,a[s.name],.5);if(!l)return{};e.color=l}return 3===t.type&&(p.showAreaBoundary?e.outline={color:"rgb(119,119,119)",size:.8}:e.outline={color:"transparent",size:.1},e.selected={color:l,outline:{color:"rgb(0,0,0)",size:1.5}}),m.showLabel&&m.labelColumnName&&-1<t.layer.name.indexOf("_LabelPoint")&&(e.staticLabel=function(){return e.radius=0,{html:t.properties[m.labelColumnName],iconSize:[125,30]}}),e}});if(m.turn_off_by_default||g.addLayer(p),p.layerId=p._leaflet_id||GatewayMapUtil.randString(6),p.name=l,p.geometryType=m.geometry_type,m.predefined_symbology){var n=m.predefined_symbology;v.addSimpleLegend(p,[{subject:l}],l,n.colors,n.labels,m.turn_off_by_default)}else p.symbology=f,p.displayColumnIndex||0==p.displayColumnIndex||(v.calculateTileFeatureValueBounds(p),v.prepareLayerSymbologyValues(p,f),p.displayColumnIndex=f.default_column_index);o.addOverlay(p,l),"string"==typeof m.attribution&&v.addAttribution(m.attribution,p.layerId),"function"==typeof i&&i.apply(this,[p]),g.spin(!1)};g.spin(!0),t(m.data)},CsLeaflet.Leaflet.prototype.showLabel=function(t,e,n){if(t&&"string"==typeof e&&e){var i=this.LMmap;if(i){for(var o=[],a=t.getLayers(),r=0,s=a.length;r<s;r++){var l=a[r],u=new L.Label(n);u.setContent(l.feature.properties[e]),u.setLatLng(l.getBounds().getCenter()),i.showLabel(u),o.push(u)}this.getLabels()[t.name]=o}}},CsLeaflet.Leaflet.prototype.updateLayerDisplayProperties=function(t,e,n){t&&"string"==typeof e&&(t[e]=n)},CsLeaflet.Leaflet.prototype.registerEventsForLayer=function(a,t){function e(t){if(t){var e=a.symbology.number_formatter;l&&t.setStyle(l),L.Browser.ie||L.Browser.opera||t.bringToFront();var n=t.feature;if("object"==typeof n&&n.hasOwnProperty("properties")){var i="n/a";if(0==t.displayValue||t.displayValue){i=GatewayMapUtil.formatNumber(t.displayValue,e);var o=s.getLayerDisplayColumnConfig(a);r.fireEvent("updateDisplayInfo",{info:{layerName:a.name,title:a.displayTitle,attributes:n.properties,key:n.properties[a.displayLabelPropertyName],type:featProp.properties.area_type,column:o.name,value:i}})}}}}function n(t){t&&(t.hasOwnProperty("prevStyle")?t.setStyle(t.prevStyle):a.resetStyle(t),r.fireEvent("updateDisplayInfo",{}))}function i(t){t&&r.fitBounds(t.getBounds())}function o(t){t.on({click:d,mouseover:c,mouseout:h})}var r=this.LMmap,s=(r.displayInfo,this),l=t.highlightStyle,u=(t.displayInfoConfig,null),d=function(t){n(u),e(u=t.target),i(u)};r.on("click",function(){n(u)});for(var c=function(t){e(t.target)},h=function(t){n(t.target)},f=a.getLayers(),p=0,m=f.length;p<m;p++)o(f[p])},CsLeaflet.Leaflet.prototype.setAreaColumnNameForLayer=function(t,e){t&&"string"==typeof e&&(t.areaColumnName=e)},CsLeaflet.Leaflet.prototype.setExternalDataForLayer=function(t,e){t&&(t.externalData=e)},CsLeaflet.Leaflet.prototype.setDisplayColumnIndexForLayer=function(t,e){t&&(t.displayColumnIndex=e,this.setLayerDisplayColumnConfig(t))},CsLeaflet.Leaflet.prototype.setValueLocaterForLayer=function(t,e){t&&"function"==typeof e&&(t.valueLocatorFn=e)},CsLeaflet.Leaflet.prototype.findColor=function(t,e,n,i){var o=t.symbology||e,a=o.color_scheme,r=null;switch(o.symbology_type){case"quantile_breaks":r=n==e.breaks[0]?chroma.color(e.colors[0]).alpha(i).css():e.scale(n).alpha(i).css();break;case"geometric_breaks":case"natural_breaks":r=e.scale(n).alpha(i).css();break;case"custom_breaks":for(var s=0,l=(c=a).length;s<l;s++){var u=(h=c[s]).min_value,d=h.max_value;if((!u&&0!=u||u<=n)&&(!d&&0!=d||n<d)){r=h.color;break}}break;case"unique_value":var c;for(s=0,l=(c=a).length;s<l;s++){var h;if((h=c[s]).value==n){r=h.color;break}}}return r},CsLeaflet.Leaflet.prototype.renderThematicColor=function(t,e){if(GatewayMapUtil&&t&&"function"==typeof t.getLayers){var n=t.options.style;n||(n={});var i=t.valueLocatorFn;if("function"==typeof i)for(var o="POLYGON"===t.geometryType,a=t.areaColumnName,r=t.getLayers(),s=0,l=r.length;s<l;s++){var u=GatewayMapUtil.cloneObject(n),d=r[s],c=d.feature.properties,h=(c[a],i(c,t.displayColumnIndex));color=this.findColor(t,e,h,.5),o?(u.fillColor=color,null!=color?u.fillOpacity=.4:u.opacity=.2):(u.color=color,null===color&&(u.opacity=.2)),d.setStyle(u),d.displayValue=h,d.prevStyle=u}}},CsLeaflet.Leaflet.prototype.deleteLayerLegendContainer=function(t){$("#legend #"+("layer-legend-"+t)).remove()},CsLeaflet.Leaflet.prototype.addLayerLegendContainer=function(t,e,n,i){var o="layer-legend-"+t.layerId;if(0===$("#legend #"+o).length){var a="";i&&(a='style="display: none;"');var r="info legend "+(t.geometryType||"").toLowerCase(),s="<div id='"+o+"' data-layer-id='"+t.layerId+"' class='"+r+"' "+a+"><h4><b>"+t.name+"</b></h4><div class='legend-title'></div><div class='legend-body'></div></div>";$("#legend").append(s),$("#"+o+" .legend-title").append("<h5><b>"+n+"</b></h5>")}},CsLeaflet.Leaflet.prototype.addColorGradientLegend=function(t,e,n){this.addLayerLegendContainer(t,e,t.symbology.subject,n);var i=t.symbology,o=i.number_formatter,a="",r=[];switch(i.symbology_type){case"quantile_breaks":var s=(i.colors||[]).slice();1<(c=(i.breaks||[]).slice()).length&&c[0]==c[1]&&(r.push('<h5><i style="background:'+s[0]+'"></i> '+GatewayMapUtil.formatNumber(c[0],o)+"</h5>"),c.shift(),s.shift());for(var l=0;l<c.length-1;l++){var u=c[l],d=c[l+1];r.push('<h5><i style="background:'+s[l]+'"></i> '+GatewayMapUtil.formatNumber(u,o)+" &ndash; "+GatewayMapUtil.formatNumber(d,o)+"</h5>")}break;case"geometric_breaks":case"natural_breaks":s=i.colors||[];var c=i.breaks||[];if(s.length!=c.length-1)return;for(l=0;l<c.length-1;l++){u=c[l],d=c[l+1];r.push('<h5><i style="background:'+s[l]+'"></i> '+GatewayMapUtil.formatNumber(u,o)+"&ndash;"+GatewayMapUtil.formatNumber(d,o)+"</h5>")}break;case"unique_value":case"custom_breaks":for(var h=i.color_scheme,f=(l=0,h.length);l<f;l++){var p=h[l];r.push('<h5><i style="background:'+p.color+'"></i> '+p.label+"</h5>")}}a+=r.join("");var m="layer-legend-"+t.layerId;$("#legend #"+m+" .legend-body").empty(),$("#legend #"+m+" .legend-body").append(a),$("#"+m+" .legend-title").empty(),$("#"+m+" .legend-title").append("<h5><b>"+i.subject+"</b></h5>")},CsLeaflet.Leaflet.prototype.addSimpleLegend=function(t,e,n,i,o,a,r,s){this.addLayerLegendContainer(t,e,n,a);var l="",u=[];for(var d in i){var c=d;o&&(c=o[d]);var h="";h=r?'style="background:transparent; border: 2px solid '+i[d]+'"':'style="background:'+i[d]+'"';var f=null;s&&(f=s[d]),u.push("<h5><i "+h+"></i> "+(f?'<div class="'+f.options.className+' image-legend"></div>':"")+c+"</h5>")}l+=u.join("")+"</div>";var p="layer-legend-"+t.layerId;$("#legend #"+p+" .legend-body").empty(),$("#legend #"+p+" .legend-body").append(l)},CsLeaflet.Leaflet.prototype.addRTPWkt=function(t,e,n,s,l){var u=n.default_column_index,i=this.LMmap;e=e||[];var d,c=new Wkt.Wkt,h={},o={};n.color_scheme.forEach(function(t){h[t.value]=t.color,o[t.label]=t.color});var f={};for(var a in h)f[a]=L.divIcon({className:a.replace(/\s+/g,"-")+"-div-image",iconSize:null});f.fallback=L.divIcon({className:"project-div-icon",iconSize:null});var p=L.layerGroup(),m=[];return e.forEach(function(t){if("MULTILINESTRING EMPTY"!=t.geography){if(""==t.geography)return console.log("WARNING: empty geography."),void console.log(t);var e=f[t[u]];null==e&&(e=f.fallback),c.read(t.geography);var n=function(t,e){return'<tr><td style="text-align: right;"><b>'+t+'</b> </td><td style="text-align:left; padding-left: 10px;">'+e+"</span></td></tr>"},i=function(t){return"<a target='_blank' href="+t+">View in Table</a>"},o="";if(((d=c.toObject({riseOnHover:!0,icon:e,weight:4,color:h[t[u]],lineCap:"butt"})).properties=t).rtp_id){var a=s+"?search="+t.rtp_id;(r=t.estimated_cost)&&(r="$"+r+"M"),o=i(a)+"<table>"+n("Project ID:",t.rtp_id)+n("Year:",t.year)+n("Plan Portion:",t.plan_portion)+n("Sponsor:",t.sponsor)+n("Project Type:",t.ptype)+n("Cost:",r)+n("Description:",t.description)+"</table>"}else if(t.tip_id){var r;a=s+"?search="+t.tip_id;(r=t.cost)&&(r="$"+r+"M"),o=i(a)+"<table>"+n("Project ID:",t.tip_id)+n("Sponsor:",t.sponsor)+n("MPO:",t.mpo)+n("Project Type:",t.ptype)+n("Cost:",r)+n("Description:",t.description)+"</table>"}d.bindPopup(o),p.addLayer(d),!l||l!=t.rtp_id&&l!=t.tip_id||m.push(d)}}),p.name=t,p.layerId=p._leaflet_id||GatewayMapUtil.randString(6),this.layerControl.addOverlay(p,p.name),p.addTo(i),p.geometryType="MULTIPLE",0<m.length&&i.fitBounds(new L.featureGroup(m).getBounds().pad(.25)),this.addSimpleLegend(p,[{subject:n.subject}],n.subject,o,null,!1,!1,f),this.addAttribution('Project data &copy; <a href="http://nymtc.org/">NY Metropolitan Transportation Council</a>',p.layerId),[p]},CsLeaflet.Leaflet.prototype.addCountFactPoints=function(t,e,n,i,o,a){var r=this.LMmap,s=L.layerGroup();t=t||[],a=a||{},direction=a.direction,transit_mode=a.transit_mode,year=a.year,hour=a.hour;var l={},u={};e.color_scheme.forEach(function(t){l[t.value]=t.color,u[t.label]=t.color});var d=this.getLayerDisplayColumnConfig(s,e),c={};t.forEach(function(t){var e=t.loc_id;c[e]||(c[e]={location_name:t.loc_name,sector_name:t.sector_name,mode_name:t.mode_name,lat:t.lat,lng:t.lng,routes:{},route_count:0});var n=c[e].routes,i=t.route_name,o={};n[i]?o=n[i]:(n[i]=o,c[e].route_count++);var a=t.var_name,r=parseFloat(t.count.toString().split(",").join(""));if("Occupancy Rates"==a)if(o[a]){var s=o[a],l=s.counter+1,u=s.total+r,d=u/l;o[a]={value:d,total:u,counter:l}}else o[a]={value:r,total:r,counter:1};else o[a]?o[a]+=r:o[a]=r});var h="Inbound"==direction,f=d.name;for(var p in c){var m=c[p],g=l[m[f]],v=L.circleMarker(new L.LatLng(m.lat,m.lng),{fill:!0,radius:h?4:5,fillColor:h?g:"transparent",fillOpacity:1,opacity:1,weight:2,color:g}),y=function(t,e){return'<tr><td style="text-align: right;"><b>'+t+'</b> </td><td style="text-align:left; padding-left: 10px;">'+e+"</span></td></tr>"},_="<a target='_blank' href="+(n+"?year="+year+"&hour="+hour+"&transit_mode="+encodeURIComponent(transit_mode)+"&direction="+direction+"&location="+encodeURIComponent(m.location_name))+">View in Table</a>",b=_+"<table>"+y("Facility Name:",m.location_name)+y("Sector:",m.sector_name)+y("Mode:",m.mode_name)+"</table>";if(7<m.route_count)b+="<p><b style='margin-top: 10px;'>Too many routes to display. Please </b>"+_+"</p>";else for(var w in m.routes){b+='<table style="margin-top: 10px;">',b+=y(" "," "),b+=y("Route:",w);var x=m.routes[w];for(var C in x){var S=x[C];"Occupancy Rates"==C&&(S=S.value.toFixed(2)),b+=y(C+":",GatewayMapUtil.formatNumber(S,{type:"number",options:{format:"#,##0.##",locale:"us"}}))}b+="</table>"}v.bindPopup(b),s.addLayer(v)}s.name=i,s.layerId=s._leaflet_id||GatewayMapUtil.randString(6),s.symbology=e,this.layerControl.addOverlay(s,i);var k=!(0==o);return k&&s.addTo(r),s.geometryType="POINT",this.addSimpleLegend(s,[{subject:i}],e.subject+" ("+direction+")",u,null,!k,!h),this.addAttribution(i+' data &copy; <a href="http://nymtc.org/">NY Metropolitan Transportation Council</a>',s.layerId),[s]},CsLeaflet.Leaflet.prototype.getBoundsInWKT=function(){var t=this.LMmap.getBounds(),e=t.getWest(),n=t.getEast(),i=t.getSouth(),o=t.getNorth();return"POLYGON (("+(e+" "+i+", "+e+" "+o+", "+n+" "+o+", "+n+" "+i+", "+e+" "+i)+"))"},CsLeaflet.Leaflet.prototype.addAreaBoundaryLayerFromWKT=function(t){try{var e,n=new Wkt.Wkt;n.read(t),e=n.toObject({fill:!1,color:"red",weight:2,clickable:!1,className:"area-boundary"});var i=this.LMmap,o=L.layerGroup();o.addLayer(e),o.name="Area Boundary",o.layerId=o._leaflet_id||GatewayMapUtil.randString(6),this.layerControl.addOverlay(o,o.name),o.addTo(i),o.geometryType="POLYGON"}catch(a){console.log(a)}},function(t,e){if("function"==typeof define&&define.amd)define(["jquery"],e);else if("object"==typeof module&&module.exports){var n;try{n=require("jquery")}catch(i){n=null}module.exports=e(n)}else t.Slider=e(t.jQuery)}(this,function(t){var e;return function(t){"use strict";function e(){}function n(d){function n(t){t.prototype.option||(t.prototype.option=function(t){d.isPlainObject(t)&&(this.options=d.extend(!0,this.options,t))})}function i(l,u){d.fn[l]=function(e){if("string"==typeof e){for(var t=h.call(arguments,1),n=0,i=this.length;n<i;n++){var o=this[n],a=d.data(o,l);if(a)if(d.isFunction(a[e])&&"_"!==e.charAt(0)){var r=a[e].apply(a,t);if(r!==undefined&&r!==a)return r}else c("no such method '"+e+"' for "+l+" instance");else c("cannot call methods on "+l+" prior to initialization; attempted to call '"+e+"'")}return this}var s=this.map(function(){var t=d.data(this,l);return t?(t.option(e),t._init()):(t=new u(this,e),d.data(this,l,t)),d(this)});return!s||1<s.length?s:s[0]}}if(d){var c="undefined"==typeof console?e:function(t){console.error(t)};return d.bridget=function(t,e){n(e),i(t,e)},d.bridget}}var h=Array.prototype.slice;n(t)}(t),function(L){function n(t,e){function n(t,e){var n="data-slider-"+e.replace(/_/g,"-"),i=t.getAttribute(n);try{return JSON.parse(i)}catch(o){return i}}this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},"string"==typeof t?this.element=document.querySelector(t):t instanceof HTMLElement&&(this.element=t),e=e||{};for(var i=Object.keys(this.defaultOptions),o=0;o<i.length;o++){var a=i[o],r=e[a];r=null!==(r=void 0!==r?r:n(this.element,a))?r:this.defaultOptions[a],this.options||(this.options={}),this.options[a]=r}"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position="right";var s,l,u,d,c,h=this.element.style.width,f=!1,p=this.element.parentNode;if(this.sliderElem)f=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var m=document.createElement("div");if(m.className="slider-track",(l=document.createElement("div")).className="slider-track-low",(s=document.createElement("div")).className="slider-selection",(u=document.createElement("div")).className="slider-track-high",(d=document.createElement("div")).className="slider-handle min-slider-handle",(c=document.createElement("div")).className="slider-handle max-slider-handle",m.appendChild(l),m.appendChild(s),m.appendChild(u),this.ticks=[],Array.isArray(this.options.ticks)&&0<this.options.ticks.length){for(o=0;o<this.options.ticks.length;o++){var g=document.createElement("div");g.className="slider-tick",this.ticks.push(g),m.appendChild(g)}s.className+=" tick-slider-selection"}if(m.appendChild(d),m.appendChild(c),this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&0<this.options.ticks_labels.length)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",o=0;o<this.options.ticks_labels.length;o++){var v=document.createElement("div"),y=0===this.options.ticks_positions.length,_=this.options.reversed&&y?this.options.ticks_labels.length-(o+1):o;v.className="slider-tick-label",v.innerHTML=this.options.ticks_labels[_],this.tickLabels.push(v),this.tickLabelContainer.appendChild(v)}var b=function(t){var e=document.createElement("div");e.className="tooltip-arrow";var n=document.createElement("div");n.className="tooltip-inner",t.appendChild(e),t.appendChild(n)},w=document.createElement("div");w.className="tooltip tooltip-main",b(w);var x=document.createElement("div");x.className="tooltip tooltip-min",b(x);var C=document.createElement("div");C.className="tooltip tooltip-max",b(C),this.sliderElem.appendChild(m),this.sliderElem.appendChild(w),this.sliderElem.appendChild(x),this.sliderElem.appendChild(C),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),p.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(L&&(this.$element=L(this.element),this.$sliderElem=L(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),S[this.options.scale]&&(this.options.scale=S[this.options.scale]),!0===f&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","top","width","height"].forEach(function(t){this._removeProperty(this.trackLow,t),this._removeProperty(this.trackSelection,t),this._removeProperty(this.trackHigh,t)},this),[this.handle1,this.handle2].forEach(function(t){this._removeProperty(t,"left"),this._removeProperty(t,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(t){this._removeProperty(t,"left"),this._removeProperty(t,"top"),this._removeProperty(t,"margin-left"),this._removeProperty(t,"margin-top"),this._removeClass(t,"right"),this._removeClass(t,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=h,this.options.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&0<this.options.ticks.length&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this.options.range?this._state.value=[this.options.value,this.options.max]:this._state.value=this.options.value,this.trackLow=l||this.trackLow,this.trackSelection=s||this.trackSelection,this.trackHigh=u||this.trackHigh,"none"===this.options.selection&&(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")),this.handle1=d||this.handle1,this.handle2=c||this.handle2,!0===f)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),o=0;o<this.ticks.length;o++)this._removeClass(this.ticks[o],"round triangle hide");if(-1!==["round","triangle","custom"].indexOf(this.options.handle))for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),o=0;o<this.ticks.length;o++)this._addClass(this.ticks[o],this.options.handle);this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchCapable&&this.sliderElem.addEventListener("touchstart",this.mousedown,!1),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)),this.options.enabled?this.enable():this.disable()}var i={formatInvalidInputErrorMsg:function(t){return"Invalid input value '"+t+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},S={linear:{toValue:function(t){var e=t/100*(this.options.max-this.options.min);if(0<this.options.ticks_positions.length){for(var n,i,o,a=0,r=0;r<this.options.ticks_positions.length;r++)if(t<=this.options.ticks_positions[r]){n=0<r?this.options.ticks[r-1]:0,o=0<r?this.options.ticks_positions[r-1]:0,i=this.options.ticks[r],a=this.options.ticks_positions[r];break}if(0<r)e=n+(t-o)/(a-o)*(i-n)}var s=this.options.min+Math.round(e/this.options.step)*this.options.step;return s<this.options.min?this.options.min:s>this.options.max?this.options.max:s},toPercentage:function(t){if(this.options.max===this.options.min)return 0;if(0<this.options.ticks_positions.length){for(var e,n,i,o=0,a=0;a<this.options.ticks.length;a++)if(t<=this.options.ticks[a]){e=0<a?this.options.ticks[a-1]:0,i=0<a?this.options.ticks_positions[a-1]:0,n=this.options.ticks[a],o=this.options.ticks_positions[a];break}if(0<a)return i+(t-e)/(n-e)*(o-i)}return 100*(t-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(t){var e=0===this.options.min?0:Math.log(this.options.min),n=Math.log(this.options.max),i=Math.exp(e+(n-e)*t/100);return(i=this.options.min+Math.round((i-this.options.min)/this.options.step)*this.options.step)<this.options.min?this.options.min:i>this.options.max?this.options.max:i},toPercentage:function(t){if(this.options.max===this.options.min)return 0;var e=Math.log(this.options.max),n=0===this.options.min?0:Math.log(this.options.min);return 100*((0===t?0:Math.log(t))-n)/(e-n)}}};if((e=function(t,e){return n.call(this,t,e),this}).prototype={_init:function(){},constructor:e,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formatter:function(t){return Array.isArray(t)?t[0]+" : "+t[1]:t},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,scale:"linear",focus:!1,tooltip_position:null},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(t,e,n){t||(t=0);var i=this.getValue();this._state.value=this._validateInputValue(t);var o=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=o(this._state.value[0]),this._state.value[1]=o(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=o(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),"after"===this.options.selection?this._state.value[1]=this.options.max:this._state.value[1]=this.options.min),this.options.max>this.options.min?this._state.percentage=[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:this._state.percentage=[0,0,100],this._layout();var a=this.options.range?this._state.value:this._state.value[0];return!0===e&&this._trigger("slide",a),i!==a&&!0===n&&this._trigger("change",{oldValue:i,newValue:a}),this._setDataVal(a),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),L&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(t,e){return this._bindNonQueryEventHandler(t,e),this},off:function(t,e){L?(this.$element.off(t,e),this.$sliderElem.off(t,e)):this._unbindNonQueryEventHandler(t,e)},getAttribute:function(t){return t?this.options[t]:this.options},setAttribute:function(t,e){return this.options[t]=e,this},refresh:function(){return this._removeSliderEventHandlers(),n.call(this,this.element,this.options),L&&L.data(this.element,"slider",this),this},relayout:function(){return this._layout(),this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.showTooltip&&(this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle2.removeEventListener("focus",this.showTooltip,!1)),this.hideTooltip&&(this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("blur",this.hideTooltip,!1)),this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.mousedown,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1)},_bindNonQueryEventHandler:function(t,e){this.eventToCallbackMap[t]===undefined&&(this.eventToCallbackMap[t]=[]),this.eventToCallbackMap[t].push(e)},_unbindNonQueryEventHandler:function(t,e){var n=this.eventToCallbackMap[t];if(n!==undefined)for(var i=0;i<n.length;i++)if(n[i]===e){n.splice(i,1);break}},_cleanUpEventCallbacksMap:function(){for(var t=Object.keys(this.eventToCallbackMap),e=0;e<t.length;e++){var n=t[e];this.eventToCallbackMap[n]=null}},_showTooltip:function(){!1===this.options.tooltip_split?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){!1===this._state.inDrag&&!0!==this.alwaysShowTooltip&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_layout:function(){var t,e;if(t=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=t[0]+"%",this.handle2.style[this.stylePos]=t[1]+"%",Array.isArray(this.options.ticks)&&0<this.options.ticks.length){var n="vertical"===this.options.orientation?"height":"width",i="vertical"===this.options.orientation?"marginTop":"marginLeft",o=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var a=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[i]=-o/2+"px"),a=this.tickLabelContainer.offsetHeight;else for(r=0;r<this.tickLabelContainer.childNodes.length;r++)this.tickLabelContainer.childNodes[r].offsetHeight>a&&(a=this.tickLabelContainer.childNodes[r].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=a+"px")}for(var r=0;r<this.options.ticks.length;r++){var s=this.options.ticks_positions[r]||this._toPercentage(this.options.ticks[r]);this.options.reversed&&(s=100-s),this.ticks[r].style[this.stylePos]=s+"%",this._removeClass(this.ticks[r],"in-selection"),this.options.range?s>=t[0]&&s<=t[1]&&this._addClass(this.ticks[r],"in-selection"):"after"===this.options.selection&&s>=t[0]?this._addClass(this.ticks[r],"in-selection"):"before"===this.options.selection&&s<=t[0]&&this._addClass(this.ticks[r],"in-selection"),this.tickLabels[r]&&(this.tickLabels[r].style[n]=o+"px","vertical"!==this.options.orientation&&this.options.ticks_positions[r]!==undefined?(this.tickLabels[r].style.position="absolute",this.tickLabels[r].style[this.stylePos]=s+"%",this.tickLabels[r].style[i]=-o/2+"px"):"vertical"===this.options.orientation&&(this.tickLabels[r].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style.marginTop=this.sliderElem.offsetWidth/2*-1+"px"))}}if(this.options.range){e=this.options.formatter(this._state.value),this._setText(this.tooltipInner,e),this.tooltip.style[this.stylePos]=(t[1]+t[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),"vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");var l=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,l);var u=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,u),this.tooltip_min.style[this.stylePos]=t[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=t[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")}else e=this.options.formatter(this._state.value[0]),this._setText(
this.tooltipInner,e),this.tooltip.style[this.stylePos]=t[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(t[0],t[1])+"%",this.trackSelection.style.top=Math.min(t[0],t[1])+"%",this.trackSelection.style.height=Math.abs(t[0]-t[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(t[0],t[1])-Math.abs(t[0]-t[1])+"%";else{this.trackLow.style.left="0",this.trackLow.style.width=Math.min(t[0],t[1])+"%",this.trackSelection.style.left=Math.min(t[0],t[1])+"%",this.trackSelection.style.width=Math.abs(t[0]-t[1])+"%",this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(t[0],t[1])-Math.abs(t[0]-t[1])+"%";var d=this.tooltip_min.getBoundingClientRect(),c=this.tooltip_max.getBoundingClientRect();d.right>c.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_removeProperty:function(t,e){t.style.removeProperty?t.style.removeProperty(e):t.style.removeAttribute(e)},_mousedown:function(t){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var e=this._getPercentage(t);if(this.options.range){var n=Math.abs(this._state.percentage[0]-e),i=Math.abs(this._state.percentage[1]-e);this._state.dragged=n<i?0:1}else this._state.dragged=0;this._state.percentage[this._state.dragged]=e,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var o=this._calculateValue();return this._trigger("slideStart",o),this._setDataVal(o),this.setValue(o,!1,!0),this._pauseEvent(t),this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_triggerFocusOnHandle:function(t){0===t&&this.handle1.focus(),1===t&&this.handle2.focus()},_keydown:function(t,e){if(!this._state.enabled)return!1;var n;switch(e.keyCode){case 37:case 40:n=-1;break;case 39:case 38:n=1}if(n){if(this.options.natural_arrow_keys){var i="vertical"===this.options.orientation&&!this.options.reversed,o="horizontal"===this.options.orientation&&this.options.reversed;(i||o)&&(n=-n)}var a=this._state.value[t]+n*this.options.step;return this.options.range&&(a=[t?this._state.value[0]:a,t?a:this._state.value[1]]),this._trigger("slideStart",a),this._setDataVal(a),this.setValue(a,!0,!0),this._setDataVal(a),this._trigger("slideStop",a),this._layout(),this._pauseEvent(e),!1}},_pauseEvent:function(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1},_mousemove:function(t){if(!this._state.enabled)return!1;var e=this._getPercentage(t);this._adjustPercentageForRangeSliders(e),this._state.percentage[this._state.dragged]=e,this._layout();var n=this._calculateValue(!0);return this.setValue(n,!0,!0),!1},_adjustPercentageForRangeSliders:function(t){if(this.options.range){var e=this._getNumDigitsAfterDecimalPlace(t);e=e?e-1:0;var n=this._applyToFixedAndParseFloat(t,e);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],e)<n?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],e)>n&&(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0)}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),(this._state.inDrag=!1)===this._state.over&&this._hideTooltip();var t=this._calculateValue(!0);return this._layout(),this._setDataVal(t),this._trigger("slideStop",t),!1},_calculateValue:function(t){var e;if(this.options.range?(e=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(e[0]=this._toValue(this._state.percentage[0]),e[0]=this._applyPrecision(e[0])),100!==this._state.percentage[1]&&(e[1]=this._toValue(this._state.percentage[1]),e[1]=this._applyPrecision(e[1]))):(e=this._toValue(this._state.percentage[0]),e=parseFloat(e),e=this._applyPrecision(e)),t){for(var n=[e,Infinity],i=0;i<this.options.ticks.length;i++){var o=Math.abs(this.options.ticks[i]-e);o<=n[1]&&(n=[this.options.ticks[i],o])}if(n[1]<=this.options.ticks_snap_bounds)return n[0]}return e},_applyPrecision:function(t){var e=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(t,e)},_getNumDigitsAfterDecimalPlace:function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},_applyToFixedAndParseFloat:function(t,e){var n=t.toFixed(e);return parseFloat(n)},_getPercentage:function(t){!this.touchCapable||"touchstart"!==t.type&&"touchmove"!==t.type||(t=t.touches[0]);var e=(t[this.mousePos]-this._state.offset[this.stylePos])/this._state.size*100;return e=Math.round(e/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(e=100-e),Math.max(0,Math.min(100,e))},_validateInputValue:function(t){if("number"==typeof t)return t;if(Array.isArray(t))return this._validateArray(t),t;throw new Error(i.formatInvalidInputErrorMsg(t))},_validateArray:function(t){for(var e=0;e<t.length;e++){var n=t[e];if("number"!=typeof n)throw new Error(i.formatInvalidInputErrorMsg(n))}},_setDataVal:function(t){this.element.setAttribute("data-value",t),this.element.setAttribute("value",t),this.element.value=t},_trigger:function(t,e){e=e||0===e?e:undefined;var n=this.eventToCallbackMap[t];if(n&&n.length)for(var i=0;i<n.length;i++){(0,n[i])(e)}L&&this._triggerJQueryEvent(t,e)},_triggerJQueryEvent:function(t,e){var n={type:t,value:e};this.$element.trigger(n),this.$sliderElem.trigger(n)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(t,e){"undefined"!=typeof t.innerText?t.innerText=e:"undefined"!=typeof t.textContent&&(t.textContent=e)},_removeClass:function(t,e){for(var n=e.split(" "),i=t.className,o=0;o<n.length;o++){var a=n[o],r=new RegExp("(?:\\s|^)"+a+"(?:\\s|$)");i=i.replace(r," ")}t.className=i.trim()},_addClass:function(t,e){for(var n=e.split(" "),i=t.className,o=0;o<n.length;o++){var a=n[o];new RegExp("(?:\\s|^)"+a+"(?:\\s|$)").test(i)||(i+=" "+a)}t.className=i.trim()},_offsetLeft:function(t){return t.getBoundingClientRect().left},_offsetTop:function(t){for(var e=t.offsetTop;(t=t.offsetParent)&&!isNaN(t.offsetTop);)e+=t.offsetTop;return e},_offset:function(t){return{left:this._offsetLeft(t),top:this._offsetTop(t)}},_css:function(t,e,n){if(L)L.style(t,e,n);else{var i=e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()});t.style[i]=n}},_toValue:function(t){return this.options.scale.toValue.apply(this,[t])},_toPercentage:function(t){return this.options.scale.toPercentage.apply(this,[t])},_setTooltipPosition:function(){var t=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var e=this.options.tooltip_position||"right",n="left"===e?"right":"left";t.forEach(function(t){this._addClass(t,e),t.style[n]="100%"}.bind(this))}else"bottom"===this.options.tooltip_position?t.forEach(function(t){this._addClass(t,"bottom"),t.style.top="22px"}.bind(this)):t.forEach(function(t){this._addClass(t,"top"),t.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},L){var t=L.fn.slider?"bootstrapSlider":"slider";L.bridget(t,e)}}(t),e}),function(l){"use strict";function r(t){return ko.isObservable(t)&&!(t.destroyAll===undefined)}function a(t,e){for(var n=0;n<t.length;++n)e(t[n])}function o(t,e){this.options=this.mergeOptions(e),this.$select=l(t),this.originalOptions=this.$select.clone()[0].options,this.query="",this.searchTimeout=null,this.options.multiple="multiple"===this.$select.attr("multiple"),this.options.onChange=l.proxy(this.options.onChange,this),this.options.onDropdownShow=l.proxy(this.options.onDropdownShow,this),this.options.onDropdownHide=l.proxy(this.options.onDropdownHide,this),this.options.onDropdownShown=l.proxy(this.options.onDropdownShown,this),this.options.onDropdownHidden=l.proxy(this.options.onDropdownHidden,this),this.buildContainer(),this.buildButton(),this.buildDropdown(),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(),this.options.disableIfEmpty&&this.disableIfEmpty(),this.$select.hide().after(this.$container)}"undefined"!=typeof ko&&ko.bindingHandlers&&!ko.bindingHandlers.multiselect&&(ko.bindingHandlers.multiselect={init:function(i,t,e){var n=e().selectedOptions,o=ko.utils.unwrapObservable(t());l(i).multiselect(o),r(n)&&(l(i).multiselect("select",ko.utils.unwrapObservable(n)),n.subscribe(function(t){var e=[],n=[];a(t,function(t){switch(t.status){case"added":e.push(t.value);break;case"deleted":n.push(t.value)}}),0<e.length&&l(i).multiselect("select",e),0<n.length&&l(i).multiselect("deselect",n)},null,"arrayChange"))},update:function(t,e,n){var i=n().options,o=l(t).data("multiselect"),a=ko.utils.unwrapObservable(e());r(i)&&i.subscribe(function(){l(t).multiselect("rebuild")}),o?o.updateOriginalOptions():l(t).multiselect(a)}}),o.prototype={defaults:{buttonText:function(t){if(0===t.length)return this.nonSelectedText+' <b class="caret"></b>';if(t.length>this.numberDisplayed)return t.length+" "+this.nSelectedText+' <b class="caret"></b>';var e="";return t.each(function(){var t=l(this).attr("label")!==undefined?l(this).attr("label"):l(this).html();e+=t+", "}),e.substr(0,e.length-2)+' <b class="caret"></b>'},buttonTitle:function(t){if(0===t.length)return this.nonSelectedText;var e="";return t.each(function(){e+=l(this).text()+", "}),e.substr(0,e.length-2)},label:function(t){return l(t).attr("label")||l(t).html()},onChange:function(){},onDropdownShow:function(){},onDropdownHide:function(){},onDropdownShown:function(){},onDropdownHidden:function(){},buttonClass:"btn btn-default",dropRight:!1,selectedClass:"active",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',maxHeight:!1,checkboxName:!1,includeSelectAllOption:!1,includeSelectAllIfMoreThan:0,selectAllText:" Select all",selectAllValue:"multiselect-all",enableFiltering:!1,enableCaseInsensitiveFiltering:!1,filterPlaceholder:"Search",filterBehavior:"text",preventInputChangeEvent:!1,nonSelectedText:"None selected",nSelectedText:"selected",numberDisplayed:3,disableIfEmpty:!1,templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown"></button>',ul:'<ul class="multiselect-container dropdown-menu"></ul>',filter:'<li class="multiselect-item filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div></li>',li:'<li><a href="javascript:void(0);"><label></label></a></li>',divider:'<li class="multiselect-item divider"></li>',liGroup:'<li class="multiselect-item group"><label class="multiselect-group"></label></li>'}},constructor:o,buildContainer:function(){this.$container=l(this.options.buttonContainer),this.$container.on("show.bs.dropdown",this.options.onDropdownShow),this.$container.on("hide.bs.dropdown",this.options.onDropdownHide),this.$container.on("shown.bs.dropdown",this.options.onDropdownShown),this.$container.on("hidden.bs.dropdown",this.options.onDropdownHidden)},buildButton:function(){this.$button=l(this.options.templates.button).addClass(this.options.buttonClass),this.$select.prop("disabled")?this.disable():this.enable(),this.options.buttonWidth&&"auto"!==this.options.buttonWidth&&(this.$button.css({width:this.options.buttonWidth}),this.$container.css({width:this.options.buttonWidth}));var t=this.$select.attr("tabindex");t&&this.$button.attr("tabindex",t),this.$container.prepend(this.$button)},buildDropdown:function(){this.$ul=l(this.options.templates.ul),this.options.dropRight&&this.$ul.addClass("pull-right"),this.options.maxHeight&&this.$ul.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"}),this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each(l.proxy(function(t,e){var n=l(e).prop("tagName").toLowerCase();l(e).prop("value")!==this.options.selectAllValue&&("optgroup"===n?this.createOptgroup(e):"option"===n&&("divider"===l(e).data("role")?this.createDivider():this.createOptionValue(e)))},this)),l("li input",this.$ul).on("change",l.proxy(function(t){var e=l(t.target),n=e.prop("checked")||!1,i=e.val()===this.options.selectAllValue;this.options.selectedClass&&(n?e.parents("li").addClass(this.options.selectedClass):e.parents("li").removeClass(this.options.selectedClass));var o=e.val(),a=this.getOptionByValue(o),r=l("option",this.$select).not(a),s=l("input",this.$container).not(e);if(i&&(n?this.selectAll():this.deselectAll()),i||(n?(a.prop("selected",!0),this.options.multiple?a.prop("selected",!0):(this.options.selectedClass&&l(s).parents("li").removeClass(this.options.selectedClass),l(s).prop("checked",!1),r.prop("selected",!1),this.$button.click()),"active"===this.options.selectedClass&&r.parents("a").css("outline","")):a.prop("selected",!1)),this.$select.change(),this.updateButtonText(),this.updateSelectAll(),this.options.onChange(a,n),this.options.preventInputChangeEvent)return!1},this)),l("li a",this.$ul).on("touchstart click",function(t){t.stopPropagation();var e=l(t.target);if(t.shiftKey&&(e.prop("checked")||!1)){var n=e.parents("li:last").siblings('li[class="active"]:first'),i=e.parents("li").index();n.index()<i?e.parents("li:last").prevUntil(n).each(function(){l(this).find("input:first").prop("checked",!0).trigger("change")}):e.parents("li:last").nextUntil(n).each(function(){l(this).find("input:first").prop("checked",!0).trigger("change")})}e.blur()}),this.$container.off("keydown.multiselect").on("keydown.multiselect",l.proxy(function(t){if(!l('input[type="text"]',this.$container).is(":focus"))if(9!==t.keyCode&&27!==t.keyCode||!this.$container.hasClass("open")){var e=l(this.$container).find("li:not(.divider):not(.disabled) a").filter(":visible");if(!e.length)return;var n=e.index(e.filter(":focus"));38===t.keyCode&&0<n?n--:40===t.keyCode&&n<e.length-1?n++:~n||(n=0);var i=e.eq(n);if(i.focus(),32===t.keyCode||13===t.keyCode){var o=i.find("input");o.prop("checked",!o.prop("checked")),o.change()}t.stopPropagation(),t.preventDefault()}else this.$button.click()},this))},createOptionValue:function(t){l(t).is(":selected")&&l(t).prop("selected",!0);var e=this.options.label(t),n=l(t).val(),i=this.options.multiple?"checkbox":"radio",o=l(this.options.templates.li);l("label",o).addClass(i),this.options.checkboxName?l("label",o).append('<input type="'+i+'" name="'+this.options.checkboxName+'" />'):l("label",o).append('<input type="'+i+'" />');var a=l(t).prop("selected")||!1,r=l("input",o);r.val(n),n===this.options.selectAllValue&&(o.addClass("multiselect-item multiselect-all"),r.parent().parent().addClass("multiselect-all")),l("label",o).append(" "+e),this.$ul.append(o),l(t).is(":disabled")&&r.attr("disabled","disabled").prop("disabled",!0).parents("a").attr("tabindex","-1").parents("li").addClass("disabled"),r.prop("checked",a),a&&this.options.selectedClass&&r.parents("li").addClass(this.options.selectedClass)},createDivider:function(){var t=l(this.options.templates.divider);this.$ul.append(t)},createOptgroup:function(t){var e=l(t).prop("label"),n=l(this.options.templates.liGroup);l("label",n).text(e),this.$ul.append(n),l(t).is(":disabled")&&n.addClass("disabled"),l("option",t).each(l.proxy(function(t,e){this.createOptionValue(e)},this))},buildSelectAll:function(){if(!this.hasSelectAll()&&this.options.includeSelectAllOption&&this.options.multiple&&l("option",this.$select).length>this.options.includeSelectAllIfMoreThan){this.options.includeSelectAllDivider&&this.$ul.prepend(l(this.options.templates.divider));var t=l(this.options.templates.li);l("label",t).addClass("checkbox"),this.options.checkboxName?l("label",t).append('<input type="checkbox" name="'+this.options.checkboxName+'" />'):l("label",t).append('<input type="checkbox" />');var e=l("input",t);e.val(this.options.selectAllValue),t.addClass("multiselect-item multiselect-all"),e.parent().parent().addClass("multiselect-all"),l("label",t).append(" "+this.options.selectAllText),this.$ul.prepend(t),e.prop("checked",!1)}},buildFilter:function(){if(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering){var t=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering);this.$select.find("option").length>=t&&(this.$filter=l(this.options.templates.filter),l("input",this.$filter).attr("placeholder",this.options.filterPlaceholder),this.$ul.prepend(this.$filter),this.$filter.val(this.query).on("click",function(t){t.stopPropagation()}).on("input keydown",l.proxy(function(t){clearTimeout(this.searchTimeout),this.searchTimeout=this.asyncFunction(l.proxy(function(){this.query!==t.target.value&&(this.query=t.target.value,l.each(l("li",this.$ul),l.proxy(function(t,e){var n=l("input",e).val(),i=l("label",e).text(),o="";if("text"===this.options.filterBehavior?o=i:"value"===this.options.filterBehavior?o=n:"both"===this.options.filterBehavior&&(o=i+"\n"+n),n!==this.options.selectAllValue&&i){var a=!1;this.options.enableCaseInsensitiveFiltering&&-1<o.toLowerCase().indexOf(this.query.toLowerCase())?a=!0:-1<o.indexOf(this.query)&&(a=!0),a?l(e).show().removeClass("filter-hidden"):l(e).hide().addClass("filter-hidden")}},this))),this.updateSelectAll()},this),300,this)},this)))}},destroy:function(){this.$container.remove(),this.$select.show(),this.$select.data("multiselect",null)},refresh:function(){l("option",this.$select).each(l.proxy(function(t,e){var n=l("li input",this.$ul).filter(function(){return l(this).val()===l(e).val()});l(e).is(":selected")?(n.prop("checked",!0),this.options.selectedClass&&n.parents("li").addClass(this.options.selectedClass)):(n.prop("checked",!1),this.options.selectedClass&&n.parents("li").removeClass(this.options.selectedClass)),l(e).is(":disabled")?n.attr("disabled","disabled").prop("disabled",!0).parents("li").addClass("disabled"):n.prop("disabled",!1).parents("li").removeClass("disabled")},this)),this.updateButtonText(),this.updateSelectAll()},select:function(t,e){l.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var i=t[n],o=this.getOptionByValue(i),a=this.getInputByValue(i);o!==undefined&&a!==undefined&&(this.options.multiple||this.deselectAll(!1),this.options.selectedClass&&a.parents("li").addClass(this.options.selectedClass),a.prop("checked",!0),o.prop("selected",!0))}this.updateButtonText(),e&&1===t.length&&this.options.onChange(o,!0)},clearSelection:function(){this.deselectAll(!1),this.updateButtonText(),this.updateSelectAll()},deselect:function(t,e){l.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var i=t[n],o=this.getOptionByValue(i),a=this.getInputByValue(i);o!==undefined&&a!==undefined&&(this.options.selectedClass&&a.parents("li").removeClass(this.options.selectedClass),a.prop("checked",!1),o.prop("selected",!1))}this.updateButtonText(),e&&1===t.length&&this.options.onChange(o,!1)},selectAll:function(){var t=l("li input[type='checkbox']:enabled",this.$ul),e=t.filter(":visible"),n=t.length,i=e.length;if(e.prop("checked",!0),l("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").addClass(this.options.selectedClass),n===i)l("option:enabled",this.$select).prop("selected",!0);else{var o=e.map(function(){return l(this).val()}).get();l("option:enabled",this.$select).filter(function(){return-1!==l.inArray(l(this).val(),o)}).prop("selected",!0)}},deselectAll:function(t){if(t=void 0===t||t){var e=l("li input[type='checkbox']:enabled",this.$ul).filter(":visible");e.prop("checked",!1);var n=e.map(function(){return l(this).val()}).get();l("option:enabled",this.$select).filter(function(){return-1!==l.inArray(l(this).val(),n)}).prop("selected",!1),this.options.selectedClass&&l("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").removeClass(this.options.selectedClass)}else l("li input[type='checkbox']:enabled",this.$ul).prop("checked",!1),l("option:enabled",this.$select).prop("selected",!1),this.options.selectedClass&&l("li:not(.divider):not(.disabled)",this.$ul).removeClass(this.options.selectedClass)},rebuild:function(){this.$ul.html(""),this.options.multiple="multiple"===this.$select.attr("multiple"),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(),this.options.disableIfEmpty&&this.disableIfEmpty(),this.options.dropRight&&this.$ul.addClass("pull-right")},dataprovider:function(t){var n="",i=0;l.each(t,function(t,e){l.isArray(e.children)?(i++,n+='<optgroup label="'+(e.title||"Group "+i)+'">',a(e.children,function(t){n+='<option value="'+t.value+'">'+(t.label||t.value)+"</option>"}),n+="</optgroup>"):n+='<option value="'+e.value+'">'+(e.label||e.value)+"</option>"}),this.$select.html(n),this.rebuild()},enable:function(){this.$select.prop("disabled",!1),this.$button.prop("disabled",!1).removeClass("disabled")},disable:function(){this.$select.prop("disabled",!0),this.$button.prop("disabled",!0).addClass("disabled")},disableIfEmpty:function(){l("option",this.$select).length<=0?this.disable():this.enable()},setOptions:function(t){this.options=this.mergeOptions(t)},mergeOptions:function(t){return l.extend(!0,{},this.defaults,t)},hasSelectAll:function(){return 0<l("li."+this.options.selectAllValue,this.$ul).length},updateSelectAll:function(){if(this.hasSelectAll()){var t=l("li:not(.multiselect-item):not(.filter-hidden) input:enabled",this.$ul),e=t.length,n=t.filter(":checked").length,i=l("li."+this.options.selectAllValue,this.$ul),o=i.find("input");0<n&&n===e?(o.prop("checked",!0),i.addClass(this.options.selectedClass)):(o.prop("checked",!1),i.removeClass(this.options.selectedClass))}},updateButtonText:function(){var t=this.getSelected();l("button.multiselect",this.$container).html(this.options.buttonText(t,this.$select)),l("button.multiselect",this.$container).attr("title",this.options.buttonTitle(t,this.$select))},getSelected:function(){return l("option",this.$select).filter(":selected")},getOptionByValue:function(t){for(var e=l("option",this.$select),n=t.toString(),i=0;i<e.length;i+=1){var o=e[i];if(o.value===n)return l(o)}},getInputByValue:function(t){for(var e=l("li input",this.$ul),n=t.toString(),i=0;i<e.length;i+=1){var o=e[i];if(o.value===n)return l(o)}},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(t,e,n){var i=Array.prototype.slice.call(arguments,3);return setTimeout(function(){t.apply(n||window,i)},e)}},l.fn.multiselect=function(e,n,i){return this.each(function(){var t=l(this).data("multiselect");t||(t=new o(this,"object"==typeof e&&e),l(this).data("multiselect",t)),"string"==typeof e&&(t[e](n,i),"destroy"===e&&l(this).data("multiselect",!1))})},l.fn.multiselect.Constructor=o,l(function(){l("select[data-role=multiselect]").multiselect()})}(window.jQuery),function(t,e){"function"==typeof define&&define.amd?define("sifter",e):"object"==typeof exports?module.exports=e():t.Sifter=e()}(this,function(){var t=function(t,e){this.items=t,this.settings=e||{diacritics:!0}};t.prototype.tokenize=function(t){if(!(t=s(String(t||"").toLowerCase()))||!t.length)return[];var e,n,i,o,a=[],r=t.split(/ +/);for(e=0,n=r.length;e<n;e++){if(i=l(r[e]),this.settings.diacritics)for(o in u)u.hasOwnProperty(o)&&(i=i.replace(new RegExp(o,"g"),u[o]));a.push({string:r[e],regex:new RegExp(i,"i")})}return a},t.prototype.iterator=function(t,e){(r(t)?Array.prototype.forEach||function(t){for(var e=0,n=this.length;e<n;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)}).apply(t,[e])},t.prototype.getScoreFunction=function(t,e){var o,a,r,s;t=this.prepareSearch(t,e),a=t.tokens,o=t.options.fields,r=a.length,s=t.options.nesting;var l,u=function(t,e){var n,i;return t?-1===(i=(t=String(t||"")).search(e.regex))?0:(n=e.string.length/t.length,0===i&&(n+=.5),n):0},d=(l=o.length)?1===l?function(t,e){return u(p(e,o[0],s),t)}:function(t,e){for(var n=0,i=0;n<l;n++)i+=u(p(e,o[n],s),t);return i/l}:function(){return 0};return r?1===r?function(t){return d(a[0],t)}:"and"===t.options.conjunction?function(t){for(var e,n=0,i=0;n<r;n++){if((e=d(a[n],t))<=0)return 0;i+=e}return i/r}:function(t){for(var e=0,n=0;e<r;e++)n+=d(a[e],t);return n/r}:function(){return 0}},t.prototype.getSortFunction=function(t,n){var e,i,o,a,r,s,l,u,d,c,h;if(h=!(t=(o=this).prepareSearch(t,n)).query&&n.sort_empty||n.sort,d=function(t,e){return"$score"===t?e.score:p(o.items[e.id],t,n.nesting)},r=[],h)for(e=0,i=h.length;e<i;e++)(t.query||"$score"!==h[e].field)&&r.push(h[e]);if(t.query){for(c=!0,e=0,i=r.length;e<i;e++)if("$score"===r[e].field){c=!1;break}c&&r.unshift({field:"$score",direction:"desc"})}else for(e=0,i=r.length;e<i;e++)if("$score"===r[e].field){r.splice(e,1);break}for(u=[],e=0,i=r.length;e<i;e++)u.push("desc"===r[e].direction?-1:1);return(s=r.length)?1===s?(a=r[0].field,l=u[0],function(t,e){return l*f(d(a,t),d(a,e))}):function(t,e){var n,i,o;for(n=0;n<s;n++)if(o=r[n].field,i=u[n]*f(d(o,t),d(o,e)))return i;return 0}:null},t.prototype.prepareSearch=function(t,e){if("object"==typeof t)return t;var n=(e=a({},e)).fields,i=e.sort,o=e.sort_empty;return n&&!r(n)&&(e.fields=[n]),i&&!r(i)&&(e.sort=[i]),o&&!r(o)&&(e.sort_empty=[o]),{options:e,query:String(t||"").toLowerCase(),tokens:this.tokenize(t),total:0,items:[]}},t.prototype.search=function(t,n){var i,o,e,a,r=this;return o=this.prepareSearch(t,n),n=o.options,t=o.query,a=n.score||r.getScoreFunction(o),t.length?r.iterator(r.items,function(t,e){i=a(t),(!1===n.filter||0<i)&&o.items.push({score:i,id:e})}):r.iterator(r.items,function(t,e){o.items.push({score:1,id:e})}),(e=r.getSortFunction(o,n))&&o.items.sort(e),o.total=o.items.length,"number"==typeof n.limit&&(o.items=o.items.slice(0,n.limit)),o};var f=function(t,e){return"number"==typeof t&&"number"==typeof e?e<t?1:t<e?-1:0:(t=n(String(t||"")),(e=n(String(e||"")))<t?1:t<e?-1:0)},a=function(t){var e,n,i,o;for(e=1,n=arguments.length;e<n;e++)if(o=arguments[e])for(i in o)o.hasOwnProperty(i)&&(t[i]=o[i]);return t},p=function(t,e,n){if(t&&e){if(!n)return t[e];for(var i=e.split(".");i.length&&(t=t[i.shift()]););return t}},s=function(t){return(t+"").replace(/^\s+|\s+$|/g,"")},l=function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},r=Array.isArray||"undefined"!=typeof $&&$.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},u={a:"[a\u1e00\u1e01\u0102\u0103\xc2\xe2\u01cd\u01ce\u023a\u2c65\u0226\u0227\u1ea0\u1ea1\xc4\xe4\xc0\xe0\xc1\xe1\u0100\u0101\xc3\xe3\xc5\xe5\u0105\u0104\xc3\u0105\u0104]",b:"[b\u2422\u03b2\u0392B\u0e3f\ud800\udf01\u16d2]",c:"[c\u0106\u0107\u0108\u0109\u010c\u010d\u010a\u010bC\u0304c\u0304\xc7\xe7\u1e08\u1e09\u023b\u023c\u0187\u0188\u0255\u1d04\uff23\uff43]",d:"[d\u010e\u010f\u1e0a\u1e0b\u1e10\u1e11\u1e0c\u1e0d\u1e12\u1e13\u1e0e\u1e0f\u0110\u0111D\u0326d\u0326\u0189\u0256\u018a\u0257\u018b\u018c\u1d6d\u1d81\u1d91\u0221\u1d05\uff24\uff44\xf0]",e:"[e\xc9\xe9\xc8\xe8\xca\xea\u1e18\u1e19\u011a\u011b\u0114\u0115\u1ebc\u1ebd\u1e1a\u1e1b\u1eba\u1ebb\u0116\u0117\xcb\xeb\u0112\u0113\u0228\u0229\u0118\u0119\u1d92\u0246\u0247\u0204\u0205\u1ebe\u1ebf\u1ec0\u1ec1\u1ec4\u1ec5\u1ec2\u1ec3\u1e1c\u1e1d\u1e16\u1e17\u1e14\u1e15\u0206\u0207\u1eb8\u1eb9\u1ec6\u1ec7\u2c78\u1d07\uff25\uff45\u0258\u01dd\u018f\u0190\u03b5]",f:"[f\u0191\u0192\u1e1e\u1e1f]",g:"[g\u0262\u20b2\u01e4\u01e5\u011c\u011d\u011e\u011f\u0122\u0123\u0193\u0260\u0120\u0121]",h:"[h\u0124\u0125\u0126\u0127\u1e28\u1e29\u1e96\u1e96\u1e24\u1e25\u1e22\u1e23\u0266\u02b0\u01f6\u0195]",i:"[i\xcd\xed\xcc\xec\u012c\u012d\xce\xee\u01cf\u01d0\xcf\xef\u1e2e\u1e2f\u0128\u0129\u012e\u012f\u012a\u012b\u1ec8\u1ec9\u0208\u0209\u020a\u020b\u1eca\u1ecb\u1e2c\u1e2d\u0197\u0268\u0268\u0306\u1d7b\u1d96\u0130iI\u0131\u026a\uff29\uff49]",j:"[j\u0237\u0134\u0135\u0248\u0249\u029d\u025f\u02b2]",k:"[k\u0198\u0199\ua740\ua741\u1e30\u1e31\u01e8\u01e9\u1e32\u1e33\u1e34\u1e35\u03ba\u03f0\u20ad]",l:"[l\u0141\u0142\u013d\u013e\u013b\u013c\u0139\u013a\u1e36\u1e37\u1e38\u1e39\u1e3c\u1e3d\u1e3a\u1e3b\u013f\u0140\u023d\u019a\u2c60\u2c61\u2c62\u026b\u026c\u1d85\u026d\u0234\u029f\uff2c\uff4c]",n:"[n\u0143\u0144\u01f8\u01f9\u0147\u0148\xd1\xf1\u1e44\u1e45\u0145\u0146\u1e46\u1e47\u1e4a\u1e4b\u1e48\u1e49N\u0308n\u0308\u019d\u0272\u0220\u019e\u1d70\u1d87\u0273\u0235\u0274\uff2e\uff4e\u014a\u014b]",o:"[o\xd8\xf8\xd6\xf6\xd3\xf3\xd2\xf2\xd4\xf4\u01d1\u01d2\u0150\u0151\u014e\u014f\u022e\u022f\u1ecc\u1ecd\u019f\u0275\u01a0\u01a1\u1ece\u1ecf\u014c\u014d\xd5\xf5\u01ea\u01eb\u020c\u020d\u0555\u0585]",p:"[p\u1e54\u1e55\u1e56\u1e57\u2c63\u1d7d\u01a4\u01a5\u1d71]",q:"[q\ua756\ua757\u02a0\u024a\u024b\ua758\ua759q\u0303]",r:"[r\u0154\u0155\u024c\u024d\u0158\u0159\u0156\u0157\u1e58\u1e59\u0210\u0211\u0212\u0213\u1e5a\u1e5b\u2c64\u027d]",s:"[s\u015a\u015b\u1e60\u1e61\u1e62\u1e63\ua7a8\ua7a9\u015c\u015d\u0160\u0161\u015e\u015f\u0218\u0219S\u0308s\u0308]",t:"[t\u0164\u0165\u1e6a\u1e6b\u0162\u0163\u1e6c\u1e6d\u01ae\u0288\u021a\u021b\u1e70\u1e71\u1e6e\u1e6f\u01ac\u01ad]",u:"[u\u016c\u016d\u0244\u0289\u1ee4\u1ee5\xdc\xfc\xda\xfa\xd9\xf9\xdb\xfb\u01d3\u01d4\u0170\u0171\u016c\u016d\u01af\u01b0\u1ee6\u1ee7\u016a\u016b\u0168\u0169\u0172\u0173\u0214\u0215\u222a]",v:"[v\u1e7c\u1e7d\u1e7e\u1e7f\u01b2\u028b\ua75e\ua75f\u2c71\u028b]",w:"[w\u1e82\u1e83\u1e80\u1e81\u0174\u0175\u1e84\u1e85\u1e86\u1e87\u1e88\u1e89]",x:"[x\u1e8c\u1e8d\u1e8a\u1e8b\u03c7]",y:"[y\xdd\xfd\u1ef2\u1ef3\u0176\u0177\u0178\xff\u1ef8\u1ef9\u1e8e\u1e8f\u1ef4\u1ef5\u024e\u024f\u01b3\u01b4]",z:"[z\u0179\u017a\u1e90\u1e91\u017d\u017e\u017b\u017c\u1e92\u1e93\u1e94\u1e95\u01b5\u01b6]"},n=function(){var t,e,n,i,o="",a={};for(n in u)if(u.hasOwnProperty(n))for(o+=i=u[n].substring(2,u[n].length-1),t=0,e=i.length;t<e;t++)a[i.charAt(t)]=n;var r=new RegExp("["+o+"]","g");return function(t){return t.replace(r,function(t){return a[t]}).toLowerCase()}}();return t}),function(t,e){"function"==typeof define&&define.amd?define("microplugin",e):"object"==typeof exports?module.exports=e():t.MicroPlugin=e()}(this,function(){var t={mixin:function(o){o.plugins={},o.prototype.initializePlugins=function(t){var e,n,i,o=this,a=[];if(o.plugins={names:[],settings:{},requested:{},loaded:{}},r.isArray(t))for(e=0,n=t.length;e<n;e++)"string"==typeof t[e]?a.push(t[e]):(o.plugins.settings[t[e].name]=t[e].options,a.push(t[e].name));else if(t)for(i in t)t.hasOwnProperty(i)&&(o.plugins.settings[i]=t[i],a.push(i));for(;a.length;)o.require(a.shift())},o.prototype.loadPlugin=function(t){var e=this,n=e.plugins,i=o.plugins[t];if(!o.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');n.requested[t]=!0,n.loaded[t]=i.fn.apply(e,[e.plugins.settings[t]||{}]),n.names.push(t)},o.prototype.require=function(t){var e=this,n=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(n.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return n.loaded[t]},o.define=function(t,e){o.plugins[t]={name:t,fn:e}}}},r={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}};return t}),function(t,e){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("sifter"),require("microplugin")):t.Selectize=e(t.jQuery,t.Sifter,t.MicroPlugin)}(this,function(x,l,t){"use strict";var C=function(t,e){if("string"!=typeof e||e.length){var l="string"==typeof e?new RegExp(e,"i"):e,u=function(t){var e=0;if(3===t.nodeType){var n=t.data.search(l);if(0<=n&&0<t.data.length){var i=t.data.match(l),o=document.createElement("span");o.className="highlight";var a=t.splitText(n),r=(a.splitText(i[0].length),a.cloneNode(!0));o.appendChild(r),
a.parentNode.replaceChild(o,a),e=1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName)&&("highlight"!==t.className||"SPAN"!==t.tagName))for(var s=0;s<t.childNodes.length;++s)s+=u(t.childNodes[s]);return e};return t.each(function(){u(this)})}};x.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var t=this.parentNode;t.replaceChild(this.firstChild,this),t.normalize()}).end()};var i=function(){};i.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},off:function(t,e){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[t]:(this._events=this._events||{},void(t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(e),1)))},trigger:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},i.mixin=function(t){for(var e=["on","off","trigger"],n=0;n<e.length;n++)t.prototype[e[n]]=i.prototype[e[n]]};var v=/Mac/.test(navigator.userAgent),o=65,a=13,r=27,d=37,s=38,u=80,c=39,h=40,f=78,p=8,m=46,y=16,_=v?91:17,b=v?18:17,g=9,w=1,L=2,S=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("input").validity,k=function(t){return void 0!==t},D=function(t){return null==t?null:"boolean"==typeof t?t?"1":"0":t+""},T=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e={before:function(t,e,n){var i=t[e];t[e]=function(){return n.apply(t,arguments),i.apply(t,arguments)}},after:function(e,t,n){var i=e[t];e[t]=function(){var t=i.apply(e,arguments);return n.apply(e,arguments),t}}},M=function(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}},P=function(n,i){var o;return function(){var t=this,e=arguments;window.clearTimeout(o),o=window.setTimeout(function(){n.apply(t,e)},i)}},n=function(n,i,t){var e,o=n.trigger,a={};for(e in n.trigger=function(t){var e=t;if(-1===i.indexOf(e))return o.apply(n,arguments);a[e]=arguments},t.apply(n,[]),n.trigger=o,a)a.hasOwnProperty(e)&&o.apply(n,a[e])},E=function(n,t,e,i){n.on(t,e,function(t){for(var e=t.target;e&&e.parentNode!==n[0];)e=e.parentNode;return t.currentTarget=e,i.apply(this,[t])})},I=function(t){var e={};if("selectionStart"in t)e.start=t.selectionStart,e.length=t.selectionEnd-e.start;else if(document.selection){t.focus();var n=document.selection.createRange(),i=document.selection.createRange().text.length;n.moveStart("character",-t.value.length),e.start=n.text.length-i,e.length=i}return e},A=function(t,e,n){var i,o,a={};if(n)for(i=0,o=n.length;i<o;i++)a[n[i]]=t.css(n[i]);else a=t.css();e.css(a)},O=function(t,e){return t?(B.$testInput||(B.$testInput=x("<span />").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).appendTo("body")),B.$testInput.text(t),A(e,B.$testInput,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),B.$testInput.width()):0},F=function(d){var c=null,t=function(t,e){var n,i,o,a,r,s,l,u;e=e||{},(t=t||window.event||{}).metaKey||t.altKey||(e.force||!1!==d.data("grow"))&&(n=d.val(),t.type&&"keydown"===t.type.toLowerCase()&&(o=48<=(i=t.keyCode)&&i<=57||65<=i&&i<=90||96<=i&&i<=111||186<=i&&i<=222||32===i,i===m||i===p?(u=I(d[0])).length?n=n.substring(0,u.start)+n.substring(u.start+u.length):i===p&&u.start?n=n.substring(0,u.start-1)+n.substring(u.start+1):i===m&&"undefined"!=typeof u.start&&(n=n.substring(0,u.start)+n.substring(u.start+1)):o&&(s=t.shiftKey,l=String.fromCharCode(t.keyCode),n+=l=s?l.toUpperCase():l.toLowerCase())),a=d.attr("placeholder"),!n&&a&&(n=a),(r=O(n,d)+4)!==c&&(c=r,d.width(r),d.triggerHandler("resize")))};d.on("keydown keyup update blur",t),t()},N=function(t){var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML},R=function(t,e){e||(e={});var n="Selectize";console.error(n+": "+t),e.explanation&&(console.group&&console.group(),console.error(e.explanation),console.group&&console.groupEnd())},B=function(t,e){var n,i,o,a,r=this;(a=t[0]).selectize=r;var s=window.getComputedStyle&&window.getComputedStyle(a,null);if(o=(o=s?s.getPropertyValue("direction"):a.currentStyle&&a.currentStyle.direction)||t.parents("[dir]:first").attr("dir")||"",x.extend(r,{order:0,settings:e,$input:t,tabIndex:t.attr("tabindex")||"",tagType:"select"===a.tagName.toLowerCase()?w:L,rtl:/rtl/i.test(o),eventNS:".selectize"+ ++B.count,highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:t.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===e.loadThrottle?r.onSearchChange:P(r.onSearchChange,e.loadThrottle)}),r.sifter=new l(this.options,{diacritics:e.diacritics}),r.settings.options){for(n=0,i=r.settings.options.length;n<i;n++)r.registerOption(r.settings.options[n]);delete r.settings.options}if(r.settings.optgroups){for(n=0,i=r.settings.optgroups.length;n<i;n++)r.registerOptionGroup(r.settings.optgroups[n]);delete r.settings.optgroups}r.settings.mode=r.settings.mode||(1===r.settings.maxItems?"single":"multi"),"boolean"!=typeof r.settings.hideSelected&&(r.settings.hideSelected="multi"===r.settings.mode),r.initializePlugins(r.settings.plugins),r.setupCallbacks(),r.setupTemplates(),r.setup()};return i.mixin(B),void 0!==t?t.mixin(B):R("Dependency MicroPlugin is missing",{explanation:'Make sure you either: (1) are using the "standalone" version of Selectize, or (2) require MicroPlugin before you load Selectize.'}),x.extend(B.prototype,{setup:function(){var t,e,n,i,o,a,r,s,l,u,d=this,c=d.settings,h=d.eventNS,f=x(window),p=x(document),m=d.$input;if(r=d.settings.mode,s=m.attr("class")||"",t=x("<div>").addClass(c.wrapperClass).addClass(s).addClass(r),e=x("<div>").addClass(c.inputClass).addClass("items").appendTo(t),n=x('<input type="text" autocomplete="off" />').appendTo(e).attr("tabindex",m.is(":disabled")?"-1":d.tabIndex),a=x(c.dropdownParent||t),i=x("<div>").addClass(c.dropdownClass).addClass(r).hide().appendTo(a),o=x("<div>").addClass(c.dropdownContentClass).appendTo(i),(u=m.attr("id"))&&(n.attr("id",u+"-selectized"),x("label[for='"+u+"']").attr("for",u+"-selectized")),d.settings.copyClassesToDropdown&&i.addClass(s),t.css({width:m[0].style.width}),d.plugins.names.length&&(l="plugin-"+d.plugins.names.join(" plugin-"),t.addClass(l),i.addClass(l)),(null===c.maxItems||1<c.maxItems)&&d.tagType===w&&m.attr("multiple","multiple"),d.settings.placeholder&&n.attr("placeholder",c.placeholder),!d.settings.splitOn&&d.settings.delimiter){var g=d.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");d.settings.splitOn=new RegExp("\\s*"+g+"+\\s*")}m.attr("autocorrect")&&n.attr("autocorrect",m.attr("autocorrect")),m.attr("autocapitalize")&&n.attr("autocapitalize",m.attr("autocapitalize")),n[0].type=m[0].type,d.$wrapper=t,d.$control=e,d.$control_input=n,d.$dropdown=i,d.$dropdown_content=o,i.on("mouseenter mousedown click","[data-disabled]>[data-selectable]",function(t){t.stopImmediatePropagation()}),i.on("mouseenter","[data-selectable]",function(){return d.onOptionHover.apply(d,arguments)}),i.on("mousedown click","[data-selectable]",function(){return d.onOptionSelect.apply(d,arguments)}),E(e,"mousedown","*:not(input)",function(){return d.onItemSelect.apply(d,arguments)}),F(n),e.on({mousedown:function(){return d.onMouseDown.apply(d,arguments)},click:function(){return d.onClick.apply(d,arguments)}}),n.on({mousedown:function(t){t.stopPropagation()},keydown:function(){return d.onKeyDown.apply(d,arguments)},keyup:function(){return d.onKeyUp.apply(d,arguments)},keypress:function(){return d.onKeyPress.apply(d,arguments)},resize:function(){d.positionDropdown.apply(d,[])},blur:function(){return d.onBlur.apply(d,arguments)},focus:function(){return d.ignoreBlur=!1,d.onFocus.apply(d,arguments)},paste:function(){return d.onPaste.apply(d,arguments)}}),p.on("keydown"+h,function(t){d.isCmdDown=t[v?"metaKey":"ctrlKey"],d.isCtrlDown=t[v?"altKey":"ctrlKey"],d.isShiftDown=t.shiftKey}),p.on("keyup"+h,function(t){t.keyCode===b&&(d.isCtrlDown=!1),t.keyCode===y&&(d.isShiftDown=!1),t.keyCode===_&&(d.isCmdDown=!1)}),p.on("mousedown"+h,function(t){if(d.isFocused){if(t.target===d.$dropdown[0]||t.target.parentNode===d.$dropdown[0])return!1;d.$control.has(t.target).length||t.target===d.$control[0]||d.blur(t.target)}}),f.on(["scroll"+h,"resize"+h].join(" "),function(){d.isOpen&&d.positionDropdown.apply(d,arguments)}),f.on("mousemove"+h,function(){d.ignoreHover=!1}),this.revertSettings={$children:m.children().detach(),tabindex:m.attr("tabindex")},m.attr("tabindex",-1).hide().after(d.$wrapper),x.isArray(c.items)&&(d.setValue(c.items),delete c.items),S&&m.on("invalid"+h,function(t){t.preventDefault(),d.isInvalid=!0,d.refreshState()}),d.updateOriginalInput(),d.refreshItems(),d.refreshState(),d.updatePlaceholder(),d.isSetup=!0,m.is(":disabled")&&d.disable(),d.on("change",this.onChange),m.data("selectize",d),m.addClass("selectized"),d.trigger("initialize"),!0===c.preload&&d.onSearchChange("")},setupTemplates:function(){var t=this,n=t.settings.labelField,i=t.settings.optgroupLabelField,e={optgroup:function(t){return'<div class="optgroup">'+t.html+"</div>"},optgroup_header:function(t,e){return'<div class="optgroup-header">'+e(t[i])+"</div>"},option:function(t,e){return'<div class="option">'+e(t[n])+"</div>"},item:function(t,e){return'<div class="item">'+e(t[n])+"</div>"},option_create:function(t,e){return'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>"}};t.settings.render=x.extend({},e,t.settings.render)},setupCallbacks:function(){var t,e,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in n)n.hasOwnProperty(t)&&(e=this.settings[n[t]])&&this.on(t,e)},onClick:function(t){var e=this;e.isFocused&&e.isOpen||(e.focus(),t.preventDefault())},onMouseDown:function(t){var e=this,n=t.isDefaultPrevented();x(t.target);if(e.isFocused){if(t.target!==e.$control_input[0])return"single"===e.settings.mode?e.isOpen?e.close():e.open():n||e.setActiveItem(null),!1}else n||window.setTimeout(function(){e.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(t){var o=this;o.isFull()||o.isInputHidden||o.isLocked?t.preventDefault():o.settings.splitOn&&setTimeout(function(){var t=o.$control_input.val();if(t.match(o.settings.splitOn))for(var e=x.trim(t).split(o.settings.splitOn),n=0,i=e.length;n<i;n++)o.createItem(e[n])},0)},onKeyPress:function(t){if(this.isLocked)return t&&t.preventDefault();var e=String.fromCharCode(t.keyCode||t.which);return this.settings.create&&"multi"===this.settings.mode&&e===this.settings.delimiter?(this.createItem(),t.preventDefault(),!1):void 0},onKeyDown:function(t){t.target,this.$control_input[0];var e=this;if(e.isLocked)t.keyCode!==g&&t.preventDefault();else{switch(t.keyCode){case o:if(e.isCmdDown)return void e.selectAll();break;case r:return void(e.isOpen&&(t.preventDefault(),t.stopPropagation(),e.close()));case f:if(!t.ctrlKey||t.altKey)break;case h:if(!e.isOpen&&e.hasOptions)e.open();else if(e.$activeOption){e.ignoreHover=!0;var n=e.getAdjacentOption(e.$activeOption,1);n.length&&e.setActiveOption(n,!0,!0)}return void t.preventDefault();case u:if(!t.ctrlKey||t.altKey)break;case s:if(e.$activeOption){e.ignoreHover=!0;var i=e.getAdjacentOption(e.$activeOption,-1);i.length&&e.setActiveOption(i,!0,!0)}return void t.preventDefault();case a:return void(e.isOpen&&e.$activeOption&&(e.onOptionSelect({currentTarget:e.$activeOption}),t.preventDefault()));case d:return void e.advanceSelection(-1,t);case c:return void e.advanceSelection(1,t);case g:return e.settings.selectOnTab&&e.isOpen&&e.$activeOption&&(e.onOptionSelect({currentTarget:e.$activeOption}),e.isFull()||t.preventDefault()),void(e.settings.create&&e.createItem()&&t.preventDefault());case p:case m:return void e.deleteSelection(t)}!e.isFull()&&!e.isInputHidden||(v?t.metaKey:t.ctrlKey)||t.preventDefault()}},onKeyUp:function(t){var e=this;if(e.isLocked)return t&&t.preventDefault();var n=e.$control_input.val()||"";e.lastValue!==n&&(e.lastValue=n,e.onSearchChange(n),e.refreshOptions(),e.trigger("type",n))},onSearchChange:function(e){var n=this,i=n.settings.load;i&&(n.loadedSearches.hasOwnProperty(e)||(n.loadedSearches[e]=!0,n.load(function(t){i.apply(n,[e,t])})))},onFocus:function(t){var e=this,n=e.isFocused;if(e.isDisabled)return e.blur(),t&&t.preventDefault(),!1;e.ignoreFocus||(e.isFocused=!0,"focus"===e.settings.preload&&e.onSearchChange(""),n||e.trigger("focus"),e.$activeItems.length||(e.showInput(),e.setActiveItem(null),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())},onBlur:function(t,e){var n=this;if(n.isFocused&&(n.isFocused=!1,!n.ignoreFocus)){if(!n.ignoreBlur&&document.activeElement===n.$dropdown_content[0])return n.ignoreBlur=!0,void n.onFocus(t);var i=function(){n.close(),n.setTextboxValue(""),n.setActiveItem(null),n.setActiveOption(null),n.setCaret(n.items.length),n.refreshState(),e&&e.focus&&e.focus(),n.isBlurring=!1,n.ignoreFocus=!1,n.trigger("blur")};n.isBlurring=!0,n.ignoreFocus=!0,n.settings.create&&n.settings.createOnBlur?n.createItem(null,!1,i):i()}},onOptionHover:function(t){this.ignoreHover||this.setActiveOption(t.currentTarget,!1)},onOptionSelect:function(t){var e,n,i=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),(n=x(t.currentTarget)).hasClass("create")?i.createItem(null,function(){i.settings.closeAfterSelect&&i.close()}):void 0!==(e=n.attr("data-value"))&&(i.lastQuery=null,i.setTextboxValue(""),i.addItem(e),i.settings.closeAfterSelect?i.close():!i.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&i.setActiveOption(i.getOption(e)))},onItemSelect:function(t){var e=this;e.isLocked||"multi"===e.settings.mode&&(t.preventDefault(),e.setActiveItem(t.currentTarget,t))},load:function(t){var e=this,n=e.$wrapper.addClass(e.settings.loadingClass);e.loading++,t.apply(e,[function(t){e.loading=Math.max(e.loading-1,0),t&&t.length&&(e.addOption(t),e.refreshOptions(e.isFocused&&!e.isInputHidden)),e.loading||n.removeClass(e.settings.loadingClass),e.trigger("load",t)}])},setTextboxValue:function(t){var e=this.$control_input;e.val()!==t&&(e.val(t).triggerHandler("update"),this.lastValue=t)},getValue:function(){return this.tagType===w&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(t,e){n(this,e?[]:["change"],function(){this.clear(e),this.addItems(t,e)})},setActiveItem:function(t,e){var n,i,o,a,r,s,l,u,d=this;if("single"!==d.settings.mode){if(!(t=x(t)).length)return x(d.$activeItems).removeClass("active"),d.$activeItems=[],void(d.isFocused&&d.showInput());if("mousedown"===(n=e&&e.type.toLowerCase())&&d.isShiftDown&&d.$activeItems.length){for(u=d.$control.children(".active:last"),a=Array.prototype.indexOf.apply(d.$control[0].childNodes,[u[0]]),(r=Array.prototype.indexOf.apply(d.$control[0].childNodes,[t[0]]))<a&&(l=a,a=r,r=l),i=a;i<=r;i++)s=d.$control[0].childNodes[i],-1===d.$activeItems.indexOf(s)&&(x(s).addClass("active"),d.$activeItems.push(s));e.preventDefault()}else"mousedown"===n&&d.isCtrlDown||"keydown"===n&&this.isShiftDown?t.hasClass("active")?(o=d.$activeItems.indexOf(t[0]),d.$activeItems.splice(o,1),t.removeClass("active")):d.$activeItems.push(t.addClass("active")[0]):(x(d.$activeItems).removeClass("active"),d.$activeItems=[t.addClass("active")[0]]);d.hideInput(),this.isFocused||d.focus()}},setActiveOption:function(t,e,n){var i,o,a,r,s,l=this;l.$activeOption&&l.$activeOption.removeClass("active"),l.$activeOption=null,(t=x(t)).length&&(l.$activeOption=t.addClass("active"),!e&&k(e)||(i=l.$dropdown_content.height(),o=l.$activeOption.outerHeight(!0),e=l.$dropdown_content.scrollTop()||0,s=(r=a=l.$activeOption.offset().top-l.$dropdown_content.offset().top+e)-i+o,i+e<a+o?l.$dropdown_content.stop().animate({scrollTop:s},n?l.settings.scrollDuration:0):a<e&&l.$dropdown_content.stop().animate({scrollTop:r},n?l.settings.scrollDuration:0)))},selectAll:function(){var t=this;"single"!==t.settings.mode&&(t.$activeItems=Array.prototype.slice.apply(t.$control.children(":not(input)").addClass("active")),t.$activeItems.length&&(t.hideInput(),t.close()),t.focus())},hideInput:function(){var t=this;t.setTextboxValue(""),t.$control_input.css({opacity:0,position:"absolute",left:t.rtl?1e4:-1e4}),t.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var t=this;t.isDisabled||(t.ignoreFocus=!0,t.$control_input[0].focus(),window.setTimeout(function(){t.ignoreFocus=!1,t.onFocus()},0))},blur:function(t){this.$control_input[0].blur(),this.onBlur(null,t)},getScoreFunction:function(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())},getSearchOptions:function(){var t=this.settings,e=t.sortField;return"string"==typeof e&&(e=[{field:e}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}},search:function(t){var e,n,i,o=this,a=o.settings,r=this.getSearchOptions();if(a.score&&"function"!=typeof(i=o.settings.score.apply(this,[t])))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==o.lastQuery?(o.lastQuery=t,n=o.sifter.search(t,x.extend(r,{score:i})),o.currentResults=n):n=x.extend(!0,{},o.currentResults),a.hideSelected)for(e=n.items.length-1;0<=e;e--)-1!==o.items.indexOf(D(n.items[e].id))&&n.items.splice(e,1);return n},refreshOptions:function(t){var e,n,i,o,a,r,s,l,u,d,c,h,f,p,m,g;void 0===t&&(t=!0);var v=this,y=x.trim(v.$control_input.val()),_=v.search(y),b=v.$dropdown_content,w=v.$activeOption&&D(v.$activeOption.attr("data-value"));for(o=_.items.length,"number"==typeof v.settings.maxOptions&&(o=Math.min(o,v.settings.maxOptions)),a={},r=[],e=0;e<o;e++)for(s=v.options[_.items[e].id],l=v.render("option",s),u=s[v.settings.optgroupField]||"",n=0,i=(d=x.isArray(u)?u:[u])&&d.length;n<i;n++)u=d[n],v.optgroups.hasOwnProperty(u)||(u=""),a.hasOwnProperty(u)||(a[u]=document.createDocumentFragment(),r.push(u)),a[u].appendChild(l);for(this.settings.lockOptgroupOrder&&r.sort(function(t,e){return(v.optgroups[t].$order||0)-(v.optgroups[e].$order||0)}),c=document.createDocumentFragment(),e=0,o=r.length;e<o;e++)u=r[e],v.optgroups.hasOwnProperty(u)&&a[u].childNodes.length?((h=document.createDocumentFragment()).appendChild(v.render("optgroup_header",v.optgroups[u])),h.appendChild(a[u]),c.appendChild(v.render("optgroup",x.extend({},v.optgroups[u],{html:N(h),dom:h})))):c.appendChild(a[u]);if(b.html(c),v.settings.highlight&&(b.removeHighlight(),_.query.length&&_.tokens.length))for(e=0,o=_.tokens.length;e<o;e++)C(b,_.tokens[e].regex);if(!v.settings.hideSelected)for(e=0,o=v.items.length;e<o;e++)v.getOption(v.items[e]).addClass("selected");(f=v.canCreate(y))&&(b.prepend(v.render("option_create",{input:y})),g=x(b[0].childNodes[0])),v.hasOptions=0<_.items.length||f,v.hasOptions?(0<_.items.length?((m=w&&v.getOption(w))&&m.length?p=m:"single"===v.settings.mode&&v.items.length&&(p=v.getOption(v.items[0])),p&&p.length||(p=g&&!v.settings.addPrecedence?v.getAdjacentOption(g,1):b.find("[data-selectable]:first"))):p=g,v.setActiveOption(p),t&&!v.isOpen&&v.open()):(v.setActiveOption(null),t&&v.isOpen&&v.close())},addOption:function(t){var e,n,i,o=this;if(x.isArray(t))for(e=0,n=t.length;e<n;e++)o.addOption(t[e]);else(i=o.registerOption(t))&&(o.userOptions[i]=!0,o.lastQuery=null,o.trigger("option_add",i,t))},registerOption:function(t){var e=D(t[this.settings.valueField]);return null!=e&&!this.options.hasOwnProperty(e)&&(t.$order=t.$order||++this.order,this.options[e]=t,e)},registerOptionGroup:function(t){var e=D(t[this.settings.optgroupValueField]);return!!e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)},addOptionGroup:function(t,e){e[this.settings.optgroupValueField]=t,(t=this.registerOptionGroup(e))&&this.trigger("optgroup_add",t,e)},removeOptionGroup:function(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.renderCache={},this.trigger("optgroup_remove",t))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,e){var n,i,o,a,r,s,l,u=this;if(t=D(t),o=D(e[u.settings.valueField]),null!==t&&u.options.hasOwnProperty(t)){if("string"!=typeof o)throw new Error("Value must be set in option data");l=u.options[t].$order,o!==t&&(delete u.options[t],-1!==(a=u.items.indexOf(t))&&u.items.splice(a,1,o)),e.$order=e.$order||l,u.options[o]=e,r=u.renderCache.item,s=u.renderCache.option,r&&(delete r[t],delete r[o]),s&&(delete s[t],delete s[o]),-1!==u.items.indexOf(o)&&(n=u.getItem(t),i=x(u.render("item",e)),n.hasClass("active")&&i.addClass("active"),n.replaceWith(i)),u.lastQuery=null,u.isOpen&&u.refreshOptions(!1)}},removeOption:function(t,e){var n=this;t=D(t);var i=n.renderCache.item,o=n.renderCache.option;i&&delete i[t],o&&delete o[t],delete n.userOptions[t],delete n.options[t],n.lastQuery=null,n.trigger("option_remove",t),n.removeItem(t,e)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={};var n=e.options;x.each(e.options,function(t){-1==e.items.indexOf(t)&&delete n[t]}),e.options=e.sifter.items=n,e.lastQuery=null,e.trigger("option_clear")},getOption:function(t){return this.getElementWithValue(t,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,e){var n=this.$dropdown.find("[data-selectable]"),i=n.index(t)+e;return 0<=i&&i<n.length?n.eq(i):x()},getElementWithValue:function(t,e){if(null!=(t=D(t)))for(var n=0,i=e.length;n<i;n++)if(e[n].getAttribute("data-value")===t)return x(e[n]);return x()},getItem:function(t){return this.getElementWithValue(t,this.$control.children())},addItems:function(t,e){this.buffer=document.createDocumentFragment();for(var n=this.$control[0].childNodes,i=0;i<n.length;i++)this.buffer.appendChild(n[i]);for(var o=x.isArray(t)?t:[t],a=(i=0,o.length);i<a;i++)this.isPending=i<a-1,this.addItem(o[i],e);var r=this.$control[0];r.insertBefore(this.buffer,r.firstChild),this.buffer=null},addItem:function(s,l){n(this,l?[]:["change"],function(){var t,e,n,i,o,a=this,r=a.settings.mode;s=D(s),-1===a.items.indexOf(s)?a.options.hasOwnProperty(s)&&("single"===r&&a.clear(l),"multi"===r&&a.isFull()||(t=x(a.render("item",a.options[s])),o=a.isFull(),a.items.splice(a.caretPos,0,s),a.insertAtCaret(t),(!a.isPending||!o&&a.isFull())&&a.refreshState(),a.isSetup&&(n=a.$dropdown_content.find("[data-selectable]"),a.isPending||(e=a.getOption(s),i=a.getAdjacentOption(e,1).attr("data-value"),a.refreshOptions(a.isFocused&&"single"!==r),i&&a.setActiveOption(a.getOption(i))),!n.length||a.isFull()?a.close():a.isPending||a.positionDropdown(),a.updatePlaceholder(),a.trigger("item_add",s,t),a.isPending||a.updateOriginalInput({silent:l})))):"single"===r&&a.close()})},removeItem:function(t,e){var n,i,o,a=this;n=t instanceof x?t:a.getItem(t),t=D(n.attr("data-value")),-1!==(i=a.items.indexOf(t))&&(n.remove(),n.hasClass("active")&&(o=a.$activeItems.indexOf(n[0]),a.$activeItems.splice(o,1)),a.items.splice(i,1),a.lastQuery=null,!a.settings.persist&&a.userOptions.hasOwnProperty(t)&&a.removeOption(t,e),i<a.caretPos&&a.setCaret(a.caretPos-1),a.refreshState(),a.updatePlaceholder(),a.updateOriginalInput({silent:e}),a.positionDropdown(),a.trigger("item_remove",t,n))},createItem:function(t,n){var i=this,o=i.caretPos;t=t||x.trim(i.$control_input.val()||"");var a=arguments[arguments.length-1];if("function"!=typeof a&&(a=function(){}),"boolean"!=typeof n&&(n=!0),!i.canCreate(t))return a(),!1;i.lock();var e="function"==typeof i.settings.create?this.settings.create:function(t){var e={};return e[i.settings.labelField]=t,e[i.settings.valueField]=t,e},r=M(function(t){if(i.unlock(),!t||"object"!=typeof t)return a();var e=D(t[i.settings.valueField]);if("string"!=typeof e)return a();i.setTextboxValue(""),i.addOption(t),i.setCaret(o),i.addItem(e),i.refreshOptions(n&&"single"!==i.settings.mode),a(t)}),s=e.apply(this,[t,r]);return void 0!==s&&r(s),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var t=!this.items.length;this.isInvalid=t,this.$control_input.prop("required",t),this.$input.prop("required",!t)},refreshClasses:function(){var t=this,e=t.isFull(),n=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",n).toggleClass("full",e).toggleClass("not-full",!e).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!x.isEmptyObject(t.options)).toggleClass("has-items",0<t.items.length),t.$control_input.data("grow",!e&&!n)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(t){var e,n,i,o,a=this;if(t=t||{},a.tagType===w){for(i=[],e=0,n=a.items.length;e<n;e++)o=a.options[a.items[e]][a.settings.labelField]||"",i.push('<option value="'+T(a.items[e])+'" selected="selected">'+T(o)+"</option>");i.length||this.$input.attr("multiple")||i.push('<option value="" selected="selected"></option>'),a.$input.html(i.join(""))}else a.$input.val(a.getValue()),a.$input.attr("value",a.$input.val());a.isSetup&&(t.silent||a.trigger("change",a.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var t=this.$control_input;this.items.length?t.removeAttr("placeholder"):t.attr("placeholder",this.settings.placeholder),t.triggerHandler("update",{force:!0})}},open:function(){var t=this;t.isLocked||t.isOpen||"multi"===t.settings.mode&&t.isFull()||(t.focus(),t.isOpen=!0,t.refreshState(),t.$dropdown.css({visibility:"hidden",display:"block"}),t.positionDropdown(),t.$dropdown.css({visibility:"visible"}),t.trigger("dropdown_open",t.$dropdown))},close:function(){var t=this,e=t.isOpen;"single"===t.settings.mode&&t.items.length&&(t.hideInput(),t.isBlurring||t.$control_input.blur()),t.isOpen=!1,t.$dropdown.hide(),t.setActiveOption(null),t.refreshState(),e&&t.trigger("dropdown_close",t.$dropdown)},positionDropdown:function(){var t=this.$control,e="body"===this.settings.dropdownParent?t.offset():t.position();e.top+=t.outerHeight(!0),this.$dropdown.css({width:t[0].getBoundingClientRect().width,top:e.top,left:e.left})},clear:function(t){var e=this;e.items.length&&(e.$control.children(":not(input)").remove(),e.items=[],e.lastQuery=null,e.setCaret(0),e.setActiveItem(null),e.updatePlaceholder(),e.updateOriginalInput({silent:t}),e.refreshState(),e.showInput(),e.trigger("clear"))},insertAtCaret:function(t){var e=Math.min(this.caretPos,this.items.length),n=t[0],i=this.buffer||this.$control[0];0===e?i.insertBefore(n,i.firstChild):i.insertBefore(n,i.childNodes[e]),this.setCaret(e+1)},deleteSelection:function(t){var e,n,i,o,a,r,s,l,u,d=this;if(i=t&&t.keyCode===p?-1:1,o=I(d.$control_input[0]),d.$activeOption&&!d.settings.hideSelected&&(s=d.getAdjacentOption(d.$activeOption,-1).attr("data-value")),a=[],d.$activeItems.length){for(u=d.$control.children(".active:"+(0<i?"last":"first")),r=d.$control.children(":not(input)").index(u),0<i&&r++,e=0,n=d.$activeItems.length;e<n;e++)a.push(x(d.$activeItems[e]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(d.isFocused||"single"===d.settings.mode)&&d.items.length&&(i<0&&0===o.start&&0===o.length?a.push(d.items[d.caretPos-1]):0<i&&o.start===d.$control_input.val().length&&a.push(d.items[d.caretPos]));if(!a.length||"function"==typeof d.settings.onDelete&&!1===d.settings.onDelete.apply(d,[a]))return!1;for(void 0!==r&&d.setCaret(r);a.length;)d.removeItem(a.pop());return d.showInput(),d.positionDropdown(),d.refreshOptions(!0),s&&(l=d.getOption(s)).length&&d.setActiveOption(l),!0},advanceSelection:function(t,e){var n,i,o,a,r,s=this;0!==t&&(s.rtl&&(t*=-1),n=0<t?"last":"first",i=I(s.$control_input[0]),s.isFocused&&!s.isInputHidden?(a=s.$control_input.val().length,(t<0?0===i.start&&0===i.length:i.start===a)&&!a&&s.advanceCaret(t,e)):(r=s.$control.children(".active:"+n)).length&&(o=s.$control.children(":not(input)").index(r),s.setActiveItem(null),s.setCaret(0<t?o+1:o)))},advanceCaret:function(t,e){var n,i,o=this;0!==t&&(n=0<t?"next":"prev",o.isShiftDown?(i=o.$control_input[n]()).length&&(o.hideInput(),o.setActiveItem(i),e&&e.preventDefault()):o.setCaret(o.caretPos+t))},setCaret:function(t){var e,n,i,o,a=this;if(t="single"===a.settings.mode?a.items.length:Math.max(0,Math.min(a.items.length,t)),!a.isPending)for(e=0,n=(i=a.$control.children(":not(input)")).length;e<n;e++)o=x(i[e]).detach(),e<t?a.$control_input.before(o):a.$control.append(o);a.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var t=this;t.$input.prop("disabled",!0),t.$control_input.prop("disabled",!0).prop("tabindex",-1),t.isDisabled=!0,t.lock()},enable:function(){var t=this;t.$input.prop("disabled",!1),t.$control_input.prop("disabled",!1).prop("tabindex",t.tabIndex),t.isDisabled=!1,t.unlock()},destroy:function(){var t=this,e=t.eventNS,n=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(n.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:n.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),0==--B.count&&B.$testInput&&(B.$testInput.remove(),B.$testInput=undefined),x(window).off(e),x(document).off(e),x(document.body).off(e),delete t.$input[0].selectize},render:function(t,e){var n,i,o="",a=!1,r=this;return"option"!==t&&"item"!==t||(a=!!(n=D(e[r.settings.valueField]))),a&&(k(r.renderCache[t])||(r.renderCache[t]={}),r.renderCache[t].hasOwnProperty(n))?r.renderCache[t][n]:(o=x(r.settings.render[t].apply(this,[e,T])),"option"===t||"option_create"===t?e[r.settings.disabledField]||o.attr("data-selectable",""):"optgroup"===t&&(i=e[r.settings.optgroupValueField]||"",o.attr("data-group",i),e[r.settings.disabledField]&&o.attr("data-disabled","")),"option"!==t&&"item"!==t||o.attr("data-value",n||""),a&&(r.renderCache[t][n]=o[0]),o[0])},clearCache:function(t){var e=this;void 0===t?e.renderCache={}:delete e.renderCache[t]},canCreate:function(t){var e=this;if(!e.settings.create)return!1;var n=e.settings.createFilter;return t.length&&("function"!=typeof n||n.apply(e,[t]))&&("string"!=typeof n||new RegExp(n).test(t))&&(!(n instanceof RegExp)||n.test(t))}}),B.count=0,B.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},x.fn.selectize=function(o){var a=x.fn.selectize.defaults,c=x.extend({},a,o),h=c.dataAttr,f=c.labelField,p=c.valueField,m=c.disabledField,g=c.optgroupField,v=c.optgroupLabelField,y=c.optgroupValueField,r=function(t,e){var n,i,o,a,r=t.attr(h);if(r)for(e.options=JSON.parse(r),n=0,i=e.options.length;n<i;n++)e.items.push(e.options[n][p]);else{var s=x.trim(t.val()||"");if(!c.allowEmptyOption&&!s.length)return;for(n=0,i=(o=s.split(c.delimiter)).length;n<i;n++)(a={})[f]=o[n],a[p]=o[n],e.options.push(a);e.items=o}},s=function(t,r){var e,n,i,o,a=r.options,s={},l=function(t){var e=h&&t.attr(h);return"string"==typeof e&&e.length?JSON.parse(e):null},u=function(t,e){t=x(t);var n=D(t.val());if(n||c.allowEmptyOption)if(
s.hasOwnProperty(n)){if(e){var i=s[n][g];i?x.isArray(i)?i.push(e):s[n][g]=[i,e]:s[n][g]=e}}else{var o=l(t)||{};o[f]=o[f]||t.text(),o[p]=o[p]||n,o[m]=o[m]||t.prop("disabled"),o[g]=o[g]||e,s[n]=o,a.push(o),t.is(":selected")&&r.items.push(n)}},d=function(t){var e,n,i,o,a;for((i=(t=x(t)).attr("label"))&&((o=l(t)||{})[v]=i,o[y]=i,o[m]=t.prop("disabled"),r.optgroups.push(o)),e=0,n=(a=x("option",t)).length;e<n;e++)u(a[e],i)};for(r.maxItems=t.attr("multiple")?null:1,e=0,n=(o=t.children()).length;e<n;e++)"optgroup"===(i=o[e].tagName.toLowerCase())?d(o[e]):"option"===i&&u(o[e])};return this.each(function(){if(!this.selectize){var t=x(this),e=this.tagName.toLowerCase(),n=t.attr("placeholder")||t.attr("data-placeholder");n||c.allowEmptyOption||(n=t.children('option[value=""]').text());var i={placeholder:n,options:[],optgroups:[],items:[]};"select"===e?s(t,i):r(t,i),new B(t,x.extend(!0,{},a,i,o))}})},x.fn.selectize.defaults=B.defaults,x.fn.selectize.support={validity:S},B.define("drag_drop",function(){if(!x.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var e,n,t,i=this;i.lock=(e=i.lock,function(){var t=i.$control.data("sortable");return t&&t.disable(),e.apply(i,arguments)}),i.unlock=(n=i.unlock,function(){var t=i.$control.data("sortable");return t&&t.enable(),n.apply(i,arguments)}),i.setup=(t=i.setup,function(){t.apply(this,arguments);var n=i.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:i.isLocked,start:function(t,e){e.placeholder.css("width",e.helper.css("width")),n.css({overflow:"visible"})},stop:function(){n.css({overflow:"hidden"});var t=i.$activeItems?i.$activeItems.slice():null,e=[];n.children("[data-value]").each(function(){e.push(x(this).attr("data-value"))}),i.setValue(e),i.setActiveItem(t)}})})}}),B.define("dropdown_header",function(t){var e,n=this;t=x.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(t){return'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a href="javascript:void(0)" class="'+t.closeClass+'">&times;</a></div></div>'}},t),n.setup=(e=n.setup,function(){e.apply(n,arguments),n.$dropdown_header=x(t.html(t)),n.$dropdown.prepend(n.$dropdown_header)})}),B.define("optgroup_columns",function(s){var a,l=this;s=x.extend({equalizeWidth:!0,equalizeHeight:!0},s),this.getAdjacentOption=function(t,e){var n=t.closest("[data-group]").find("[data-selectable]"),i=n.index(t)+e;return 0<=i&&i<n.length?n.eq(i):x()},this.onKeyDown=(a=l.onKeyDown,function(t){var e,n,i,o;return!this.isOpen||t.keyCode!==d&&t.keyCode!==c?a.apply(this,arguments):(l.ignoreHover=!0,e=(o=this.$activeOption.closest("[data-group]")).find("[data-selectable]").index(this.$activeOption),void((n=(i=(o=t.keyCode===d?o.prev("[data-group]"):o.next("[data-group]")).find("[data-selectable]")).eq(Math.min(i.length-1,e))).length&&this.setActiveOption(n)))});var u=function(){var t,e=u.width,n=document;return void 0===e&&((t=n.createElement("div")).innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',t=t.firstChild,n.body.appendChild(t),e=u.width=t.offsetWidth-t.clientWidth,n.body.removeChild(t)),e},t=function(){var t,e,n,i,o,a,r;if((e=(r=x("[data-group]",l.$dropdown_content)).length)&&l.$dropdown_content.width()){if(s.equalizeHeight){for(t=n=0;t<e;t++)n=Math.max(n,r.eq(t).height());r.css({height:n})}s.equalizeWidth&&(a=l.$dropdown_content.innerWidth()-u(),i=Math.round(a/e),r.css({width:i}),1<e&&(o=a-i*(e-1),r.eq(e-1).css({width:o})))}};(s.equalizeHeight||s.equalizeWidth)&&(e.after(this,"positionDropdown",t),e.after(this,"refreshOptions",t))}),B.define("remove_button",function(t){t=x.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t);var e=function(n,i){i.className="remove-single";var o,a=n,r='<a href="javascript:void(0)" class="'+i.className+'" tabindex="-1" title="'+T(i.title)+'">'+i.label+"</a>",s=function(t,e){return x("<span>").append(t).append(e)};n.setup=(o=a.setup,function(){if(i.append){var t=x(a.$input.context).attr("id"),e=(x("#"+t),a.settings.render.item);a.settings.render.item=function(t){return s(e.apply(n,arguments),r)}}o.apply(n,arguments),n.$control.on("click","."+i.className,function(t){t.preventDefault(),a.isLocked||a.clear()})})},n=function(n,t){var i,o=n,a='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+T(t.title)+'">'+t.label+"</a>",r=function(t,e){var n=t.search(/(<\/[^>]+>\s*)$/);return t.substring(0,n)+e+t.substring(n)};n.setup=(i=o.setup,function(){if(t.append){var e=o.settings.render.item;o.settings.render.item=function(t){return r(e.apply(n,arguments),a)}}i.apply(n,arguments),n.$control.on("click","."+t.className,function(t){if(t.preventDefault(),!o.isLocked){var e=x(t.currentTarget).parent();o.setActiveItem(e),o.deleteSelection()&&o.setCaret(o.items.length)}})})};"single"!==this.settings.mode?n(this,t):e(this,t)}),B.define("restore_on_backspace",function(i){var o,t=this;i.text=i.text||function(t){return t[this.settings.labelField]},this.onKeyDown=(o=t.onKeyDown,function(t){var e,n;return t.keyCode===p&&""===this.$control_input.val()&&!this.$activeItems.length&&0<=(e=this.caretPos-1)&&e<this.items.length?(n=this.options[this.items[e]],this.deleteSelection(t)&&(this.setTextboxValue(i.text.apply(this,[n])),this.refreshOptions(!0)),void t.preventDefault()):o.apply(this,arguments)})}),B}),function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.download=e()}(this,function(){return function v(t,e,n){function i(t){for(var e=t.split(/[:;,]/),n=e[1],i=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),o=i.length,a=0,r=new Uint8Array(o);a<o;++a)r[a]=i.charCodeAt(a);return new h([r],{type:n})}function o(t,e){if("download"in d)return d.href=t,d.setAttribute("download",m),d.innerHTML="downloading...",u.body.appendChild(d),setTimeout(function(){d.click(),u.body.removeChild(d),!0===e&&setTimeout(function(){a.URL.revokeObjectURL(d.href)},250)},66),!0;if("undefined"!=typeof safari)return t="data:"+t.replace(/^data:([\w\/\-\+]+)/,r),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=u.createElement("iframe");u.body.appendChild(n),e||(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,r)),n.src=t,setTimeout(function(){u.body.removeChild(n)},333)}var a=window,r="application/octet-stream",s=n||r,l=t,u=document,d=u.createElement("a"),c=function(t){return String(t)},h=a.Blob||a.MozBlob||a.WebKitBlob||c;h=h.call?h.bind(a):Blob;var f,p,m=e||"download";if("true"===String(this)&&(s=(l=[l,s])[0],l=l[1]),String(l).match(/^data\:[\w+\-]+\/[\w+\-]+[,;]/))return navigator.msSaveBlob?navigator.msSaveBlob(i(l),m):o(l);if(f=l instanceof h?l:new h([l],{type:s}),navigator.msSaveBlob)return navigator.msSaveBlob(f,m);if(a.URL)o(a.URL.createObjectURL(f),!0);else{if("string"==typeof f||f.constructor===c)try{return o("data:"+s+";base64,"+a.btoa(f))}catch(g){return o("data:"+s+","+encodeURIComponent(f))}(p=new FileReader).onload=function(){o(this.result)},p.readAsDataURL(f)}return!0}}),void 0===jQuery.migrateMute&&(jQuery.migrateMute=!0),function(u,n,d){function c(t){var e=n.console;i[t]||(i[t]=!0,u.migrateWarnings.push(t),e&&e.warn&&!u.migrateMute&&(e.warn("JQMIGRATE: "+t),u.migrateTrace&&e.trace&&e.trace()))}function t(t,e,n,i){if(Object.defineProperty)try{return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return c(i),n},set:function(t){c(i),n=t}}),d}catch(s){}u._definePropertyBroken=!0,t[e]=n}var i={};u.migrateWarnings=[],!u.migrateMute&&n.console&&n.console.log&&n.console.log("JQMIGRATE: Logging is active"),u.migrateTrace===d&&(u.migrateTrace=!0),u.migrateReset=function(){i={},u.migrateWarnings.length=0},"BackCompat"===document.compatMode&&c("jQuery is not compatible with Quirks Mode");var r=u("<input/>",{size:1}).attr("size")&&u.attrFn,s=u.attr,o=u.attrHooks.value&&u.attrHooks.value.get||function(){return null},a=u.attrHooks.value&&u.attrHooks.value.set||function(){return d},l=/^(?:input|button)$/i,h=/^[238]$/,f=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,p=/^(?:checked|selected)$/i;t(u,"attrFn",r||{},"jQuery.attrFn is deprecated"),u.attr=function(t,e,n,i){var o=e.toLowerCase(),a=t&&t.nodeType;return i&&(s.length<4&&c("jQuery.fn.attr( props, pass ) is deprecated"),t&&!h.test(a)&&(r?e in r:u.isFunction(u.fn[e])))?u(t)[e](n):("type"===e&&n!==d&&l.test(t.nodeName)&&t.parentNode&&c("Can't change the 'type' of an input or button in IE 6/7/8"),!u.attrHooks[o]&&f.test(o)&&(u.attrHooks[o]={get:function(t,e){var n,i=u.prop(t,e);return!0===i||"boolean"!=typeof i&&(n=t.getAttributeNode(e))&&!1!==n.nodeValue?e.toLowerCase():d},set:function(t,e,n){var i;return!1===e?u.removeAttr(t,n):((i=u.propFix[n]||n)in t&&(t[i]=!0),t.setAttribute(n,n.toLowerCase())),n}},p.test(o)&&c("jQuery.fn.attr('"+o+"') may use property instead of attribute")),s.call(u,t,e,n))},u.attrHooks.value={get:function(t,e){var n=(t.nodeName||"").toLowerCase();return"button"===n?o.apply(this,arguments):("input"!==n&&"option"!==n&&c("jQuery.fn.attr('value') no longer gets properties"),e in t?t.value:null)},set:function(t,e){var n=(t.nodeName||"").toLowerCase();return"button"===n?a.apply(this,arguments):("input"!==n&&"option"!==n&&c("jQuery.fn.attr('value', val) no longer sets properties"),t.value=e,d)}};var e,m,g=u.fn.init,v=u.parseJSON,y=/^([^<]*)(<[\w\W]+>)([^>]*)$/;u.fn.init=function(t,e,n){var i;return t&&"string"==typeof t&&!u.isPlainObject(e)&&(i=y.exec(u.trim(t)))&&i[0]&&("<"!==t.charAt(0)&&c("$(html) HTML strings must start with '<' character"),i[3]&&c("$(html) HTML text after last tag is ignored"),"#"===i[0].charAt(0)&&(c("HTML string cannot start with a '#' character"),u.error("JQMIGRATE: Invalid selector string (XSS)")),e&&e.context&&(e=e.context),u.parseHTML)?g.call(this,u.parseHTML(i[2],e,!0),e,n):g.apply(this,arguments)},u.fn.init.prototype=u.fn,u.parseJSON=function(t){return t||null===t?v.apply(this,arguments):(c("jQuery.parseJSON requires a valid JSON string"),null)},u.uaMatch=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},u.browser||(m={},(e=u.uaMatch(navigator.userAgent)).browser&&(m[e.browser]=!0,m.version=e.version),m.chrome?m.webkit=!0:m.webkit&&(m.safari=!0),u.browser=m),t(u,"browser",u.browser,"jQuery.browser is deprecated"),u.sub=function(){function n(t,e){return new n.fn.init(t,e)}u.extend(!0,n,this),n.superclass=this,n.fn=n.prototype=this(),(n.fn.constructor=n).sub=this.sub,n.fn.init=function(t,e){return e&&e instanceof u&&!(e instanceof n)&&(e=n(e)),u.fn.init.call(this,t,e,i)},n.fn.init.prototype=n.fn;var i=n(document);return c("jQuery.sub() is deprecated"),n},u.ajaxSetup({converters:{"text json":u.parseJSON}});var _=u.fn.data;u.fn.data=function(t){var e,n,i=this[0];return!i||"events"!==t||1!==arguments.length||(e=u.data(i,t),n=u._data(i,t),e!==d&&e!==n||n===d)?_.apply(this,arguments):(c("Use of jQuery.fn.data('events') is deprecated"),n)};var b=/\/(java|ecma)script/i,w=u.fn.andSelf||u.fn.addBack;u.fn.andSelf=function(){return c("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),w.apply(this,arguments)},u.clean||(u.clean=function(t,e,n,i){e=(e=!(e=e||document).nodeType&&e[0]||e).ownerDocument||e,c("jQuery.clean() is deprecated");var o,a,r,s,l=[];if(u.merge(l,u.buildFragment(t,e).childNodes),n)for(r=function(t){return!t.type||b.test(t.type)?i?i.push(t.parentNode?t.parentNode.removeChild(t):t):n.appendChild(t):d},o=0;null!=(a=l[o]);o++)u.nodeName(a,"script")&&r(a)||(n.appendChild(a),a.getElementsByTagName!==d&&(s=u.grep(u.merge([],a.getElementsByTagName("script")),r),l.splice.apply(l,[o+1,0].concat(s)),o+=s.length));return l});var x=u.event.add,C=u.event.remove,L=u.event.trigger,S=u.fn.toggle,k=u.fn.live,D=u.fn.die,T="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",M=RegExp("\\b(?:"+T+")\\b"),P=/(?:^|\s)hover(\.\S+|)\b/,E=function(t){return"string"!=typeof t||u.event.special.hover?t:(P.test(t)&&c("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(P,"mouseenter$1 mouseleave$1"))};u.event.props&&"attrChange"!==u.event.props[0]&&u.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),u.event.dispatch&&t(u.event,"handle",u.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),u.event.add=function(t,e,n,i,o){t!==document&&M.test(e)&&c("AJAX events should be attached to document: "+e),x.call(this,t,E(e||""),n,i,o)},u.event.remove=function(t,e,n,i,o){C.call(this,t,E(e)||"",n,i,o)},u.fn.error=function(){var t=Array.prototype.slice.call(arguments,0);return c("jQuery.fn.error() is deprecated"),t.splice(0,0,"error"),arguments.length?this.bind.apply(this,t):(this.triggerHandler.apply(this,t),this)},u.fn.toggle=function(n,t){if(!u.isFunction(n)||!u.isFunction(t))return S.apply(this,arguments);c("jQuery.fn.toggle(handler, handler...) is deprecated");var i=arguments,e=n.guid||u.guid++,o=0,a=function(t){var e=(u._data(this,"lastToggle"+n.guid)||0)%o;return u._data(this,"lastToggle"+n.guid,e+1),t.preventDefault(),i[e].apply(this,arguments)||!1};for(a.guid=e;i.length>o;)i[o++].guid=e;return this.click(a)},u.fn.live=function(t,e,n){return c("jQuery.fn.live() is deprecated"),k?k.apply(this,arguments):(u(this.context).on(t,this.selector,e,n),this)},u.fn.die=function(t,e){return c("jQuery.fn.die() is deprecated"),D?D.apply(this,arguments):(u(this.context).off(t,this.selector||"**",e),this)},u.event.trigger=function(t,e,n,i){return n||M.test(t)||c("Global events are undocumented and deprecated"),L.call(this,t,e,n||document,i)},u.each(T.split("|"),function(t,e){u.event.special[e]={setup:function(){var t=this;return t!==document&&(u.event.add(document,e+"."+u.guid,function(){u.event.trigger(e,null,t,!0)}),u._data(this,e,u.guid++)),!1},teardown:function(){return this!==document&&u.event.remove(document,e+"."+u._data(this,e)),!1}}})}(jQuery,window);var yadcf=function(O){"use strict";function F(t){var e;return O.fn.dataTable.Api?e=new O.fn.dataTable.Api(t).settings()[0]:t.fnSettings?e=t.fnSettings():"string"==typeof t?O.fn.dataTable.fnIsDataTable(O(t)[0])&&(e=O(t).eq(0).dataTable().fnSettings()):t.nodeName&&"table"===t.nodeName.toLowerCase()?O.fn.dataTable.fnIsDataTable(t.nodeName)&&(e=O(t.nodeName).dataTable().fnSettings()):t instanceof jQuery?O.fn.dataTable.fnIsDataTable(t[0])&&(e=t.eq(0).dataTable().fnSettings()):e=t,e}function n(t){var e,n=[];for(e=0;e<t.length;e++)n[t[e]]=e;return n}function N(t,e){t!=undefined&&t.ColReorder!==undefined&&Ct[e]===undefined&&(Ct[e]={},Ct[e].ColReorder=n(t.ColReorder))}function o(t){Ct[t]=undefined}function p(t){var e={};return t!==undefined?t instanceof Array?e.column_number_str=t.join("_"):(e.column_number_str=t,(t=[]).push(e.column_number_str)):e.column_number_str="global",e.column_number=t,e}function R(t){return xt[t]}function h(t){return t.target===undefined&&(t.target=t.srcElement),t}function b(t,e){var n=0;for(e=e.split("."),n=0;n<e.length;n++)t=t[e[n]];return t}function u(t,e,n){var i,o,a={},r={filter_type:"select",enable_auto_complete:!1,sort_as:"alpha",sort_order:"asc",date_format:"mm/dd/yyyy",ignore_char:undefined,filter_match_mode:"contains",select_type:undefined,select_type_options:{},case_insensitive:!0,column_data_type:"text",html_data_type:"text",exclude_label:"exclude",style_class:""},s=function(){return""};if(O.extend(!0,r,n),e.length!==undefined){for(i=0;i<e.length;i++){if("select2"===e[i].select_type&&(r.select_type_options={adaptContainerCssClass:s}),!0===r.externally_triggered&&(e[i].filter_reset_button_text=!1),e[i].filter_type!==undefined&&-1!==e[i].filter_type.indexOf("custom_func")&&e[i].custom_func===undefined)return void alert('You are trying to use filter_type: "custom_func / multi_select_custom_func" for column '+e[i].column_number+' but there is no such custom_func attribute provided (custom_func: "function reference goes here...")');o=+e[i].column_number,isNaN(o)?a[e[i].column_number_str]=O.extend(!0,{},r,e[i]):a[o]=O.extend(!0,{},r,e[i])}xt[t]=a}else xt[t]=e}function s(t){var e,n,i,o,a=O.fn.dataTable.ext.sVersion.split("."),r=t.split(".");for(i=0,o=r.length;i<o;i++)if((e=parseInt(a[i],10)||0)!==(n=parseInt(r[i],10)||0))return n<e;return!0}function y(){O.fn.dataTableExt.iApiIndex=0}function l(t){return t.replace(":","-").replace("(","").replace(")","").replace(".","-").replace("#","-")}function d(t){return t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function e(t,e,n){return t.replace(new RegExp(d(e),"g"),n)}function t(t){return t=e(t=e(t=e(t=e(t=e(t=e(t,":","-"),"(",""),")",""),",",""),".","-"),"#","-")}function m(t,e,n,i,o){var a,r=yadcf.getOptions(t.selector)[e].case_insensitive;return t.fnSettings().aoPreSearchCols[e].bSmart=!1,t.fnSettings().aoPreSearchCols[e].bRegex=!0,t.fnSettings().aoPreSearchCols[e].bCaseInsensitive=r,o===undefined||!1===o?"contains"===i?(t.fnSettings().aoPreSearchCols[e].bSmart=!0,t.fnSettings().aoPreSearchCols[e].bRegex=!1,a=n):"exact"===i?a="^"+n+"$":"startsWith"===i?a="^"+n:"regex"===i&&(a=n):"contains"===i?a=n.join("|"):"exact"===i?a="^("+n.join("|")+")$":"startsWith"===i?a="^("+n.join("|")+")":"regex"===i&&(a=n),a}function c(t,e,n,i,o){var a=yadcf.getOptions(t.selector)[i].case_insensitive;if(!0!==o){if("contains"===n)t.fnFilter(e,i,!1,!0,!0,a);else if("exact"===n)e=d(e),t.fnFilter("^"+e+"$",i,!0,!1,!0,a);else if("startsWith"===n)e=d(e),t.fnFilter("^"+e,i,!0,!1,!0,a);else if("regex"===n){try{new RegExp(e)}catch(r){return}t.fnFilter(e,i,!0,!1,!0,a)}}else t.fnFilter("^((?!"+e+").)*$",i,!0,!1,!0,a)}function B(t,e){var n;return"contains"===e?n=t:"exact"===e?n=(n=t.substring(1,t.length-1)).replace(/([\\])/g,""):"startsWith"===e?n=(n=t.substring(1,t.length)).replace(/([\\])/g,""):"regex"===e&&(n=t),n}function i(t,e,n){var i,o=bt[e],a=R(o.selector)[n];if("clear"===t||"-1"===t.value){if(""===ct(o,n))return;O("#yadcf-filter-"+e+"-"+n).val("-1").focus(),O("#yadcf-filter-"+e+"-"+n).removeClass("inuse"),"chosen"===a.select_type?O("#yadcf-filter-"+e+"-"+n).trigger("chosen:updated"):a.select_type!==undefined&&"select2"===a.select_type&&O("#yadcf-filter-"+e+"-"+n).select2("val","-1")}else O("#yadcf-filter-"+e+"-"+n).addClass("inuse");o.fnSettings().oLoadedState||(o.fnSettings().oLoadedState={},o.fnSettings().oApi._fnSaveState(o.fnSettings())),!0===o.fnSettings().oFeatures.bStateSave&&(o.fnSettings().oLoadedState.yadcfState!==undefined&&o.fnSettings().oLoadedState.yadcfState[e]!==undefined?o.fnSettings().oLoadedState.yadcfState[e][n]={from:t.value}:((i={})[e]=[],i[e][n]={from:t.value},o.fnSettings().oLoadedState.yadcfState=i),o.fnSettings().oApi._fnSaveState(o.fnSettings())),o.fnDraw()}function a(t,e,n,i){O.fn.dataTableExt.iApiIndex=wt[e];var o,a,r,s=bt[e],l=F(s);if(l.oSavedState!=undefined&&l.oSavedState.ColReorder!==undefined||Ct[e]!==undefined&&Ct[e].ColReorder!==undefined?(N(l.oSavedState,e),a=Ct[e].ColReorder[n]):a=n,r=R(s.selector)[n],"clear"===t){if(""===ct(s,n))return;return O("#yadcf-filter-"+e+"-"+n).val("-1").focus(),O("#yadcf-filter-"+e+"-"+n).removeClass("inuse"),O(document).data("#yadcf-filter-"+e+"-"+n+"_val","-1"),s.fnFilter("",a),y(),void("chosen"===R(s.selector)[n].select_type?O("#yadcf-filter-"+e+"-"+n).trigger("chosen:updated"):r.select_type!==undefined&&"select2"===r.select_type&&O("#yadcf-filter-"+e+"-"+n).select2("val","-1"))}O("#yadcf-filter-"+e+"-"+n).addClass("inuse"),O(document).data("#yadcf-filter-"+e+"-"+n+"_val",t.value),o=O.trim(O(t).find("option:selected").val()),"-1"!==t.value?c(s,o,i,a):(s.fnFilter("",a),O("#yadcf-filter-"+e+"-"+n).removeClass("inuse")),y()}function r(t,e,n,i){O.fn.dataTableExt.iApiIndex=wt[e];var o,a,r,s=bt[e],l=O(t).val(),u=[],d=F(s);if(d.oSavedState!=undefined&&d.oSavedState.ColReorder!==undefined||Ct[e]!==undefined&&Ct[e].ColReorder!==undefined?(N(d.oSavedState,e),r=Ct[e].ColReorder[n]):r=n,O(document).data("#yadcf-filter-"+e+"-"+n+"_val",l),null!==l){for(o=l.length-1;0<=o;o--)if("-1"===l[o]){l.splice(o,1);break}for(o=0;o<l.length;o++)u.push(O.trim(l[o]));0!==u.length?(a=(a=(a=u.join("narutouzomaki")).replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")).split("narutouzomaki").join("|"),"contains"===i?s.fnFilter(a,r,!0,!1,!0):"exact"===i?s.fnFilter("^("+a+")$",r,!0,!1,!0):"startsWith"===i?s.fnFilter("^("+a+")",r,!0,!1,!0):"regex"===i&&s.fnFilter(a,r,!0,!1,!0)):s.fnFilter("",r)}else s.fnFilter("",r);y()}function z(t,e){var n;return"contains"===e?n=t:"exact"===e?n=(n=t.substring(1,t.length-1)).substring(1,n.length-1):"startsWith"===e?n=(n=t.substring(1,t.length)).substring(1,n.length-1):"regex"===e&&(n=t),n}function f(t,e,n,i){O.fn.dataTableExt.iApiIndex=wt[e];var o,a=bt[e],r=F(a);if(r.oSavedState!=undefined&&r.oSavedState.ColReorder!==undefined||Ct[e]!==undefined&&Ct[e].ColReorder!==undefined?(N(r.oSavedState,e),o=Ct[e].ColReorder[n]):o=n,"clear"===t){if(""===ct(a,n))return;return O("#yadcf-filter-"+e+"-"+n).val("").focus(),O("#yadcf-filter-"+e+"-"+n).removeClass("inuse"),O(document).removeData("#yadcf-filter-"+e+"-"+n+"_val"),a.fnFilter("",o),void y()}O("#yadcf-filter-"+e+"-"+n).addClass("inuse"),O(document).data("#yadcf-filter-"+e+"-"+n+"_val",t.value),c(a,t.value,i,o),y()}function U(t,e){var n=(t=h(t)).target.id.replace("yadcf-filter-",""),i=n.lastIndexOf("-"),o=n.substring(0,i),a=parseInt(n.substring(i+1),10),r=O(t.target).attr("filter_match_mode");f(e.item,o,a,r)}function g(t,e){return t-e}function v(t,e){return e-t}function j(t,e){var n,i,o=[];for(n=0;n<t.length;n++)null!==t[n]&&(e!==undefined&&(t[n]=t[n].toString().replace(e,"")),i=+t[n],isNaN(i)||o.push(i));return Math.min.apply(Math,o)}function $(t,e){var n,i,o=[];for(n=0;n<t.length;n++)null!==t[n]&&(e!==undefined&&(t[n]=t[n].toString().replace(e,"")),i=+t[n],isNaN(i)||o.push(i));return Math.max.apply(Math,o)}function _(m,g,v,y,_){O.fn.dataTableExt.afnFiltering.push(function(t,e,n,i){var o,a,r,s,l,u,d,c=!1,h=m,f=yadcf.generateTableSelectorJQFriendly(t.oInstance.selector),p=_;if(h!==f)return!0;if("range_number_slider"===(u=R(t.oInstance.selector)[y]).filter_type?(o=O("#"+g).text(),a=O("#"+v).text()):(o=document.getElementById(g).value,a=document.getElementById(v).value),t.oSavedState!=undefined&&t.oSavedState.ColReorder!==undefined||Ct[m]!==undefined&&Ct[m].ColReorder!==undefined?(N(t.oSavedState,m),d=Ct[m].ColReorder[y]):d=y,i!==undefined?(e=i,r=u.column_number_data!==undefined?b(e,d=u.column_number_data):e[d]):r=e[d],!isFinite(o)||!isFinite(a))return!0;if(s=u.column_data_type,l=u.html_data_type,"html"===s||"rendered_html"===s){if(l===undefined&&(l="text"),0!==O(r).length)switch(l){case"text":r=O(r).text();break;case"value":r=O(r).val();break;case"id":r=r.id;break;case"selector":r=O(r).find(u.html_data_selector).text()}}else"object"==typeof r&&u.html5_data!==undefined&&(r=r["@"+u.html5_data]);return p!==undefined&&(o=o.replace(p,""),a=a.replace(p,""),r=r?r.toString().replace(p,""):""),a=""!==a?+a:a,r=""!==r?+r:r,""===(o=""!==o?+o:o)&&""===a?c=!0:""===o&&r<=a?c=!0:o<=r&&""===a?c=!0:o<=r&&r<=a?c=!0:(""===r||isNaN(r))&&(c=!0),c})}function H(a,r,s){O.fn.dataTableExt.afnFiltering.push(function(t,e){var n,i,o=O("#"+r).val();return a!==yadcf.generateTableSelectorJQFriendly(t.oInstance.selector)||(t.oSavedState!=undefined&&t.oSavedState.ColReorder!==undefined||Ct[a]!==undefined&&Ct[a].ColReorder!==undefined?(N(t.oSavedState,a),i=Ct[a].ColReorder[s]):i=s,n="-"===e[i]?0:e[i],(0,R(t.oInstance.selector)[s].custom_func)(o,n,e))})}function w(m,g,v,y,_){O.fn.dataTableExt.afnFiltering.push(function(t,e,n,i){var o,a,r,s,l,u=null!==document.getElementById(g)?document.getElementById(g).value:"",d=null!==document.getElementById(v)?document.getElementById(v).value:"",c=!1;if(m!==yadcf.generateTableSelectorJQFriendly(t.oInstance.selector))return!0;if(s=R(t.oInstance.selector)[y],t.oSavedState!=undefined&&t.oSavedState.ColReorder!==undefined||Ct[m]!==undefined&&Ct[m].ColReorder!==undefined?(N(t.oSavedState,m),l=Ct[m].ColReorder[y]):l=y,i!==undefined?(e=i,o=s.column_number_data!==undefined?b(e,l=s.column_number_data):e[l]):o=e[l],a=s.column_data_type,r=s.html_data_type,"html"===a||"rendered_html"===a){if(r===undefined&&(r="text"),0!==O(o).length)switch(r){case"text":o=O(o).text();break;case"value":o=O(o).val();break;case"id":o=o.id;break;case"selector":o=O(o).find(s.html_data_selector).text()}}else"object"==typeof o&&s.html5_data!==undefined&&(o=o["@"+s.html5_data]);try{u.length===_.length+2&&(u=""!==u?O.datepicker.parseDate(_,u):u)}catch(h){}try{d.length===_.length+2&&(d=""!==d?O.datepicker.parseDate(_,d):d)}catch(f){}try{o=""!==o?O.datepicker.parseDate(_,o):o}catch(p){}return""!==u&&u instanceof Date||""!==d&&d instanceof Date?""===u&&o<=d?c=!0:u<=o&&""===d?c=!0:u<=o&&o<=d&&(c=!0):c=!0,c})}function W(t,e,n,i,o,a){var r,s,l,u,d,c="yadcf-filter-"+e+"-from-"+n,h="yadcf-filter-"+e+"-to-"+n;0<O("#"+(s="yadcf-filter-wrapper-"+e+"-"+n)).length||(O.fn.dataTableExt.iApiIndex=wt[e],u=R((l=bt[e]).selector)[n],O(t).append('<div onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);"  id="'+s+'" class="yadcf-filter-wrapper"></div>'),O(r=t+=" div.yadcf-filter-wrapper").append('<div id="yadcf-filter-wrapper-inner-'+e+"-"+n+'" class="yadcf-filter-wrapper-inner"></div>'),t+=" div.yadcf-filter-wrapper-inner",d="onkeyup=\"yadcf.rangeNumberKeyUP('"+e+"',event);\"",!0===u.externally_triggered&&(d=""),O(t).append('<input placeholder="'+o[0]+'" id="'+c+'" class="yadcf-filter-range-number yadcf-filter-range" '+d+"></input>"),O(t).append('<span class="yadcf-filter-range-number-seperator" ></span>'),O(t).append('<input placeholder="'+o[1]+'" id="'+h+'" class="yadcf-filter-range-number yadcf-filter-range" '+d+"></input>"),!1!==i&&O(r).append('<button type="button" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.rangeClear(\''+e+'\',event); return false;" class="yadcf-filter-reset-button">'+i+"</button>"),!0===l.fnSettings().oFeatures.bStateSave&&l.fnSettings().oLoadedState&&l.fnSettings().oLoadedState.yadcfState&&l.fnSettings().oLoadedState.yadcfState[e]&&l.fnSettings().oLoadedState.yadcfState[e][n]&&(O("#"+c).val(l.fnSettings().oLoadedState.yadcfState[e][n].from),""!==l.fnSettings().oLoadedState.yadcfState[e][n].from&&O("#"+c).addClass("inuse"),O("#"+h).val(l.fnSettings().oLoadedState.yadcfState[e][n].to),""!==l.fnSettings().oLoadedState.yadcfState[e][n].to&&O("#"+h).addClass("inuse")),y(),!0!==l.fnSettings().oFeatures.bServerSide&&_(e,c,h,n,a))}function x(t,e,n){var i,o,a,r=O(e).attr("id").replace("yadcf-filter-","").replace("-date","").replace("-reset",""),s=r.lastIndexOf("-"),l=r.substring(0,s);if(r=r.substring(s+1),O.fn.dataTableExt.iApiIndex=wt[l],(a=F(i=bt[l])).oSavedState!=undefined&&a.oSavedState.ColReorder!==undefined||Ct[l]!==undefined&&Ct[l].ColReorder!==undefined?(N(a.oSavedState,l),o=Ct[l].ColReorder[r]):o=r,n===undefined)document.getElementById(O(e).attr("id")).value,i.fnFilter(t,o),O("#yadcf-filter-"+l+"-"+r).addClass("inuse");else if("clear"===n){if(""===ct(i,r))return;i.fnFilter("",o),O("#yadcf-filter-"+l+"-"+r).val("").removeClass("inuse")}y()}function C(t,e){var n,i,o,a,r=O(e).attr("id").replace("yadcf-filter-","").replace("-from-date","").replace("-to-date",""),s=r.lastIndexOf("-"),l=r.substring(0,s);r=r.substring(s+1),O.fn.dataTableExt.iApiIndex=wt[l],n=bt[l],yadcf.getOptions(n.selector)[r].date_format.replace("yyyy","yy"),O("#"+O(e).attr("id")).addClass("inuse"),-1!==O(e).attr("id").indexOf("-from-")?(o=document.getElementById(O(e).attr("id")).value,a=document.getElementById(O(e).attr("id").replace("-from-","-to-")).value):(a=document.getElementById(O(e).attr("id")).value,o=document.getElementById(O(e).attr("id").replace("-to-","-from-")).value),!0!==n.fnSettings().oFeatures.bServerSide?n.fnDraw():n.fnFilter(o+"-yadcf_delim-"+a,r),n.fnSettings().oLoadedState||(n.fnSettings().oLoadedState={},n.fnSettings().oApi._fnSaveState(n.fnSettings())),!0===n.fnSettings().oFeatures.bStateSave&&(n.fnSettings().oLoadedState.yadcfState!==undefined&&n.fnSettings().oLoadedState.yadcfState[l]!==undefined?n.fnSettings().oLoadedState.yadcfState[l][r]={from:o,to:a}:((i={})[l]=[],i[l][r]={from:o,to:a},n.fnSettings().oLoadedState.yadcfState=i),n.fnSettings().oApi._fnSaveState(n.fnSettings())),y()}function V(t,e,n,i,o,a){var r,s,l,u,d,c="yadcf-filter-"+e+"-from-date-"+n,h="yadcf-filter-"+e+"-to-date-"+n,f={};0<O("#"+(s="yadcf-filter-wrapper-"+e+"-"+n)).length||(O(t).append('<div onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);"  id="'+s+'" class="yadcf-filter-wrapper"></div>'),O(r=t+=" div.yadcf-filter-wrapper").append('<div id="yadcf-filter-wrapper-inner-'+e+"-"+n+'" class="yadcf-filter-wrapper-inner"></div>'),t+=" div.yadcf-filter-wrapper-inner",O.fn.dataTableExt.iApiIndex=wt[e],d="onkeyup=\"yadcf.rangeDateKeyUP('"+e+"','"+a+"',event);\"",!0===(u=R((l=bt[e]).selector)[n]).externally_triggered&&(d=""),O(t).append('<input placeholder="'+o[0]+'" id="'+c+'" class="yadcf-filter-range-date yadcf-filter-range" '+d+"></input>"),O(t).append('<span class="yadcf-filter-range-date-seperator" ></span>'),O(t).append('<input placeholder="'+o[1]+'" id="'+h+'" class="yadcf-filter-range-date yadcf-filter-range" '+d+"></input>"),!1!==i&&O(r).append('<button type="button" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.rangeClear(\''+e+'\',event); return false;" class="yadcf-filter-reset-button">'+i+"</button>"),f.dateFormat=a,!0!==u.externally_triggered&&(f.onSelect=C),O("#"+c).datepicker(f),O("#"+h).datepicker(f),!0===l.fnSettings().oFeatures.bStateSave&&l.fnSettings().oLoadedState&&l.fnSettings().oLoadedState.yadcfState&&l.fnSettings().oLoadedState.yadcfState[e]&&l.fnSettings().oLoadedState.yadcfState[e][n]&&(O("#"+c).val(l.fnSettings().oLoadedState.yadcfState[e][n].from),""!==l.fnSettings().oLoadedState.yadcfState[e][n].from&&O("#"+c).addClass("inuse"),O("#"+h).val(l.fnSettings().oLoadedState.yadcfState[e][n].to),""!==l.fnSettings().oLoadedState.yadcfState[e][n].to&&O("#"+h).addClass("inuse")),!0!==l.fnSettings().oFeatures.bServerSide&&w(e,c,h,n,a),y())}function Y(t,e,n,i,o,a){var r,s,l,u,d,c="yadcf-filter-"+e+"-"+n,h={};0<O("#"+(s="yadcf-filter-wrapper-"+e+"-"+n)).length||(O.fn.dataTableExt.iApiIndex=wt[e],u=R((l=bt[e]).selector)[n],O(t).append('<div onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);"  id="'+s+'" class="yadcf-filter-wrapper"></div>'),r=t+=" div.yadcf-filter-wrapper",d="onkeyup=\"yadcf.dateKeyUP('"+e+"','"+a+"',event);\"",!0===u.externally_triggered&&(d=""),O(t).append('<input placeholder="'+o+'" id="'+c+'" class="yadcf-filter-date" '+d+"></input>"),!1!==i&&O(r).append('<button type="button" id="'+c+'-reset" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.dateSelectSingle(\''+e+"',yadcf.eventTargetFixUp(event).target, 'clear'); return false;\" class=\"yadcf-filter-reset-button\">"+i+"</button>"),h.dateFormat=a,!0!==u.externally_triggered&&(h.onSelect=x),O("#"+c).datepicker(h),""!==l.fnSettings().aoPreSearchCols[n].sSearch&&O("#yadcf-filter-"+e+"-"+n).val(l.fnSettings().aoPreSearchCols[n].sSearch).addClass("inuse"),y())}function L(t,e,n,i,o,a){var r,s,l=O("#yadcf-filter-wrapper-inner-"+o+"-"+a+" .ui-slider-handle:first"),u=O("#yadcf-filter-wrapper-inner-"+o+"-"+a+" .ui-slider-handle:last");r='<div id="'+n+'" class="yadcf-filter-range-number-slider-min-tip-inner">'+t+"</div>",s='<div id="'+i+'" class="yadcf-filter-range-number-slider-max-tip-inner">'+e+"</div>",O(l).addClass("yadcf-filter-range-number-slider-min-tip").html(r),O(u).addClass("yadcf-filter-range-number-slider-max-tip").html(s)}function S(t,e,n){e=h(e);var i,o,a,r,s,l,u,d=O(e.target).attr("id").replace("yadcf-filter-","").replace(t,"").replace("-slider-","");l=R((i=bt[t]).selector)[d],u=function(){O.fn.dataTableExt.iApiIndex=wt[t],!0!==i.fnSettings().oFeatures.bServerSide?i.fnDraw():i.fnFilter(n.values[0]+"-yadcf_delim-"+n.values[1],d),o=+O(O(e.target).parent().find(".yadcf-filter-range-number-slider-min-tip-hidden")).text(),a=+O(O(e.target).parent().find(".yadcf-filter-range-number-slider-max-tip-hidden")).text(),o!==n.values[0]?(O(O(e.target).find(".ui-slider-handle")[0]).addClass("inuse"),r=!0):O(O(e.target).find(".ui-slider-handle")[0]).removeClass("inuse"),a!==n.values[1]?(O(O(
e.target).find(".ui-slider-handle")[1]).addClass("inuse"),r=!0):O(O(e.target).find(".ui-slider-handle")[1]).removeClass("inuse"),!0===r?O(e.target).find(".ui-slider-range").addClass("inuse"):O(e.target).find(".ui-slider-range").removeClass("inuse"),i.fnSettings().oLoadedState||(i.fnSettings().oLoadedState={},i.fnSettings().oApi._fnSaveState(i.fnSettings())),!0===i.fnSettings().oFeatures.bStateSave&&(i.fnSettings().oLoadedState.yadcfState!==undefined&&i.fnSettings().oLoadedState.yadcfState[t]!==undefined?i.fnSettings().oLoadedState.yadcfState[t][d]={from:n.values[0],to:n.values[1]}:((s={})[t]=[],s[t][d]={from:n.values[0],to:n.values[1]},i.fnSettings().oLoadedState.yadcfState=s),i.fnSettings().oApi._fnSaveState(i.fnSettings())),y()},l.filter_delay===undefined?u():vt(function(){u()},l.filter_delay)}function q(t,n,i,e,o,a,r){var s,l,u,d,c,h,f="yadcf-filter-"+n+"-slider-"+i,p="yadcf-filter-"+n+"-min_tip-"+i,m="yadcf-filter-"+n+"-max_tip-"+i,g=o,v=a;0<O("#"+(l="yadcf-filter-wrapper-"+n+"-"+i)).length||(O.fn.dataTableExt.iApiIndex=wt[n],d=R((u=bt[n]).selector)[i],!0===u.fnSettings().oFeatures.bStateSave&&u.fnSettings().oLoadedState&&u.fnSettings().oLoadedState.yadcfState&&u.fnSettings().oLoadedState.yadcfState[n]&&u.fnSettings().oLoadedState.yadcfState[n][i]&&(o!==u.fnSettings().oLoadedState.yadcfState[n][i].from&&(g=u.fnSettings().oLoadedState.yadcfState[n][i].from),a!==u.fnSettings().oLoadedState.yadcfState[n][i].to&&(v=u.fnSettings().oLoadedState.yadcfState[n][i].to)),isFinite(o)&&isFinite(a)&&isFinite(g)&&isFinite(v)&&(O(t).append('<div onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);"  id="'+l+'" class="yadcf-filter-wrapper"></div>'),O(s=t+=" div.yadcf-filter-wrapper").append('<div id="yadcf-filter-wrapper-inner-'+n+"-"+i+'" class="yadcf-number-slider-filter-wrapper-inner"></div>'),O(t+=" div.yadcf-number-slider-filter-wrapper-inner").append('<div id="'+f+'" class="yadcf-filter-range-number-slider"></div>'),O(t=t+" #"+f).append('<span class="yadcf-filter-range-number-slider-min-tip-hidden hide">'+o+"</span>"),O(t).append('<span class="yadcf-filter-range-number-slider-max-tip-hidden hide">'+a+"</span>"),!0!==d.externally_triggered?(c=function(t,e){L(e.values[0],e.values[1],p,m,n,i),S(n,t,e)},h=function(t,e){L(e.values[0],e.values[1],p,m,n,i),(t.originalEvent||!0===O(t.target).slider("option","yadcf-reset"))&&(O(t.target).slider("option","yadcf-reset",!1),S(n,t,e))}):(c=function(t,e){L(e.values[0],e.values[1],p,m,n,i)},h=function(t,e){L(e.values[0],e.values[1],p,m,n,i)}),O("#"+f).slider({range:!0,min:o,max:a,values:[g,v],create:function(){L(g,v,p,m,n,i)},slide:c,change:h}),!1!==e&&O(s).append('<button type="button" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.rangeNumberSliderClear(\''+n+'\',event); return false;" class="yadcf-filter-reset-button range-number-slider-reset-button">'+e+"</button>")),O.fn.dataTableExt.iApiIndex=wt[n],!0===(u=bt[n]).fnSettings().oFeatures.bStateSave&&u.fnSettings().oLoadedState&&u.fnSettings().oLoadedState.yadcfState&&u.fnSettings().oLoadedState.yadcfState[n]&&u.fnSettings().oLoadedState.yadcfState[n][i]&&(isFinite(o)&&o!==u.fnSettings().oLoadedState.yadcfState[n][i].from&&O(O(t).find(".ui-slider-handle")[0]).addClass("inuse"),isFinite(a)&&a!==u.fnSettings().oLoadedState.yadcfState[n][i].to&&O(O(t).find(".ui-slider-handle")[1]).addClass("inuse"),isFinite(o)&&isFinite(a)&&(o!==u.fnSettings().oLoadedState.yadcfState[n][i].from||a!==u.fnSettings().oLoadedState.yadcfState[n][i].to)&&O(O(t).find(".ui-slider-range")).addClass("inuse")),y(),!0!==u.fnSettings().oFeatures.bServerSide&&_(n,p,m,i,r))}function k(t){O(".yadcf-filter-wrapper").remove(),s("1.10")?(O(document).off("draw.dt",t.selector),O(document).off("xhr.dt",t.selector),O(document).off("column-visibility.dt",t.selector),O(document).off("destroy.dt",t.selector)):(O(document).off("draw",t.selector),O(document).off("destroy",t.selector))}function D(t,e){var n,i,o=t.replace(St,""),a=e.replace(St,"");return o===a?(n=parseInt(t.replace(kt,""),10))===(i=parseInt(e.replace(kt,""),10))?0:i<n?1:-1:a<o?1:-1}function Z(t,e){return"select"!==e.filter_type&&"auto_complete"!==e.filter_type&&"multi_select"!==e.filter_type&&"multi_select_custom_func"!==e.filter_type&&"custom_func"!==e.filter_type||("alpha"===e.sort_as?"asc"===e.sort_order?t.sort():"desc"===e.sort_order&&(t.sort(),t.reverse()):"num"===e.sort_as?"asc"===e.sort_order?t.sort(g):"desc"===e.sort_order&&t.sort(v):"alphaNum"===e.sort_as?"asc"===e.sort_order?t.sort(D):"desc"===e.sort_order&&(t.sort(D),t.reverse()):"custom"===e.sort_as&&t.sort(e.sort_as_custom_func)),t}function G(t,e,n){var i,o,a,r,s,l,u={},d=[],c=t.fnSettings().aoData,h=c.length;for(s=F(t),e.col_filter_array!==undefined&&(u=e.col_filter_array),(s.oSavedState!=undefined&&s.oSavedState.ColReorder!==undefined||Ct[n]!==undefined&&Ct[n].ColReorder!==undefined)&&N(s.oSavedState,n),l=Ct[n]!==undefined&&Ct[n].ColReorder!==undefined?Ct[n].ColReorder[e.column_number]:e.column_number,isNaN(t.fnSettings().aoColumns[l].mData)&&"object"!=typeof t.fnSettings().aoColumns[l].mData&&(e.column_number_data=t.fnSettings().aoColumns[l].mData),a=0;a<h;a++)if("html"===e.column_data_type)if(e.column_number_data===undefined?i=O(c[a]._aData[l]):(i=b(c[a]._aData,e.column_number_data),i=O(i)),0<i.length)for(r=0;r<i.length;r++){switch(e.html_data_type){case"text":o=O(i[r]).text();break;case"value":o=O(i[r]).val();break;case"id":o=i[r].id;break;case"selector":o=O(i[r]).find(e.html_data_selector).text()}""===O.trim(o)||u.hasOwnProperty(o)||(u[o]=o,d.push(o))}else o=i.selector,""===O.trim(o)||u.hasOwnProperty(o)||(u[o]=o,d.push(o));else if("text"===e.column_data_type)if(e.text_data_delimiter!==undefined)for(i=e.column_number_data===undefined?c[a]._aData[l].split(e.text_data_delimiter):((i=b(c[a]._aData,e.column_number_data))+"").split(e.text_data_delimiter),r=0;r<i.length;r++)o=i[r],""===O.trim(o)||u.hasOwnProperty(o)||(u[o]=o,d.push(o));else{if(e.column_number_data===undefined){if("object"==typeof(o=c[a]._aData[l])){if(e.html5_data===undefined)return void alert("Looks like you have forgot to define the html5_data attribute for the "+e.column_number+" column");o=o["@"+e.html5_data]}}else o=c[a]._aFilterData!==undefined&&null!==c[a]._aFilterData?c[a]._aFilterData[l]:b(c[a]._aData,e.column_number_data);""===O.trim(o)||u.hasOwnProperty(o)||(u[o]=o,d.push(o))}else if("rendered_html"===e.column_data_type){if(i=c[a]._aFilterData[l],0<(i=O(i)).length)for(r=0;r<i.length;r++)switch(e.html_data_type){case"text":o=O(i[r]).text();break;case"value":o=O(i[r]).val();break;case"id":o=i[r].id;break;case"selector":o=O(i[r]).find(e.html_data_selector).text()}else o=i.selector;""===O.trim(o)||u.hasOwnProperty(o)||(u[o]=o,d.push(o))}return e.col_filter_array=u,d}function T(t,e,n){var i,o,a,r,s,l,u,d,c,h,f,p,m,g,v,y,_,b,w,x,C,L,S,k,D,T,M,P,E,I,A;for(k in P=F(t),b=yadcf.generateTableSelectorJQFriendly(n),_t[b],N(P.oSavedState,b),T=O(document).data(n+"_filters_position"),""===P.oScroll.sX&&""===P.oScroll.sY||(n=".yadcf-datatables-table-"+b),t._fnGetUniqueThs()!==undefined&&(M=t._fnGetUniqueThs()),e)if(e.hasOwnProperty(k)){if(S="",a=(D=e[k]).data,g=[],v=[],r=D.filter_container_id,u=l=+(l=D.column_number),Ct[b]!==undefined&&Ct[b]!==undefined&&Ct[b].ColReorder!==undefined&&(u=Ct[b].ColReorder[l]),D.column_number=l,s=undefined,isNaN(P.aoColumns[u].mData)&&"object"!=typeof P.aoColumns[u].mData&&(s=P.aoColumns[u].mData,D.column_number_data=s),D.column_data_type,D.html_data_type,D.text_data_delimiter,d=D.filter_default_label,c=D.filter_reset_button_text,h=D.enable_auto_complete,D.sort_as,D.sort_order,f=(f=D.date_format).replace("yyyy","yy"),D.date_format=f,D.ignore_char===undefined||D.ignore_char instanceof RegExp||(p=new RegExp(D.ignore_char,"g"),D.ignore_char=p),m=D.filter_match_mode,l===undefined)return void alert("You must specify column number");if(!0===h&&(D.filter_type="auto_complete"),d===undefined&&("select"===D.filter_type||"custom_func"===D.filter_type?d="Select value":"multi_select"===D.filter_type||"multi_select_custom_func"===D.filter_type?d="Select values":"auto_complete"===D.filter_type||"text"===D.filter_type?d="Type to filter":"range_number"===D.filter_type||"range_date"===D.filter_type?d=["from","to"]:"date"===D.filter_type&&(d="Select a date"),D.filter_default_label=d),c===undefined&&(c="x"),a!==undefined)for(_=0;_<a.length;_++)g.push(a[_]);if(a!==undefined&&D.append_data_to_table_data===undefined||(D.col_filter_array=undefined,v=G(t,D,b),"before"!==D.append_data_to_table_data||(v=Z(v,D)),g=g.concat(v)),D.append_data_to_table_data!==undefined&&"sorted"!==D.append_data_to_table_data||(g=Z(g,D)),"range_number_slider"===D.filter_type&&(w=j(g,p),x=$(g,p)),r===undefined){if(!1===P.aoColumns[u].bVisible)continue;if("thead"!==T)if(M===undefined){for(C=u,L=0;L<P.aoColumns.length&&L<u;L++)!1===P.aoColumns[L].bVisible&&C--;o=n+" "+T+" th:eq("+(u=C)+")"}else o=n+" "+T+" th:eq("+O(M[u]).index()+")";else o=n+" "+T+" tr:eq("+O(M[u]).parent().index()+") th:eq("+O(M[u]).index()+")";i=O(o).find(".yadcf-filter")}else{if(0===O("#"+r).length)return void alert("Filter container could not be found.");i=O(o="#"+r).find(".yadcf-filter")}if("select"===D.filter_type||"custom_func"===D.filter_type?(y='<option value="-1">'+d+"</option>","select2"===D.select_type&&D.select_type_options.placeholder!==undefined&&!0===D.select_type_options.allowClear&&(y='<option value=""></option>')):"multi_select"!==D.filter_type&&"multi_select_custom_func"!==D.filter_type||(y=D.select_type===undefined?'<option data-placeholder="true" value="-1">'+d+"</option>":""),D.append_data_to_table_data===undefined)if("object"==typeof g[0])for(_=0;_<g.length;_++)y+='<option value="'+g[_].value+'">'+g[_].label+"</option>";else for(_=0;_<g.length;_++)y+='<option value="'+g[_]+'">'+g[_]+"</option>";else for(_=0;_<g.length;_++)"object"==typeof g[_]?y+='<option value="'+g[_].value+'">'+g[_].label+"</option>":y+='<option value="'+g[_]+'">'+g[_]+"</option>";g=y,1===i.length?"select"===D.filter_type||"multi_select"===D.filter_type||"custom_func"===D.filter_type||"multi_select_custom_func"===D.filter_type?("custom_func"!==D.filter_type&&"multi_select_custom_func"!==D.filter_type||(I=O("#yadcf-filter-"+b+"-"+l).val()),i.empty(),i.append(g),""!==P.aoPreSearchCols[u].sSearch&&(S=P.aoPreSearchCols[u].sSearch,"select"===D.filter_type?(S=B(S,R(t.selector)[l].filter_match_mode),O("#yadcf-filter-"+b+"-"+l).val(S).addClass("inuse")):"multi_select"===D.filter_type&&(S=(S=(S=z(S,R(t.selector)[l].filter_match_mode)).replace(/\\/g,"")).split("|"),O("#yadcf-filter-"+b+"-"+l).val(S))),"custom_func"!==D.filter_type&&"multi_select_custom_func"!==D.filter_type||("-1"===(S=I)||S===undefined?O("#yadcf-filter-"+b+"-"+l).val(S):O("#yadcf-filter-"+b+"-"+l).val(S).addClass("inuse")),"chosen"===D.select_type?O("#yadcf-filter-"+b+"-"+l).trigger("chosen:updated"):D.select_type!==undefined&&"select2"===D.select_type&&O("#yadcf-filter-"+b+"-"+l).select2("val",S)):"auto_complete"===D.filter_type&&O(document).data("yadcf-filter-"+b+"-"+l,g):(r===undefined?0<O(o+" div.DataTables_sort_wrapper").length&&O(o+" div.DataTables_sort_wrapper").css("display","inline-block"):(0===O("#yadcf-filter-wrapper-"+r).length&&O("#"+r).append('<div id="yadcf-filter-wrapper-'+r+'"></div>'),o="#yadcf-filter-wrapper-"+r),"select"===D.filter_type||"custom_func"===D.filter_type?(O(o).append('<div id="yadcf-filter-wrapper-'+b+"-"+l+'" class="yadcf-filter-wrapper"></div>'),o+=" div.yadcf-filter-wrapper","select"===D.filter_type?(E="onchange=\"yadcf.doFilter(this, '"+b+"', "+l+", '"+m+"');\"",!0===D.externally_triggered&&(E=""),O(o).append('<select id="yadcf-filter-'+b+"-"+l+'" class="yadcf-filter '+D.style_class+'" '+E+" onmousedown=\"yadcf.stopPropagation(event);\" onclick='yadcf.stopPropagation(event);'>"+g+"</select>"),!1!==c&&O(o).find(".yadcf-filter").after('<button type="button" id="yadcf-filter-'+b+"-"+l+'-reset" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.doFilter(\'clear\', \''+b+"', "+l+'); return false;" class="yadcf-filter-reset-button">'+c+"</button>")):(E="onchange=\"yadcf.doFilterCustomDateFunc(this, '"+b+"', "+l+');"',!0===D.externally_triggered&&(E=""),O(o).append('<select id="yadcf-filter-'+b+"-"+l+'" class="yadcf-filter '+D.style_class+'" '+E+" onmousedown=\"yadcf.stopPropagation(event);\" onclick='yadcf.stopPropagation(event);'>"+g+"</select>"),!1!==c&&O(o).find(".yadcf-filter").after('<button type="button" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.doFilterCustomDateFunc(\'clear\', \''+b+"', "+l+'); return false;" class="yadcf-filter-reset-button">'+c+"</button>"),!0===P.oFeatures.bStateSave&&P.oLoadedState&&P.oLoadedState.yadcfState&&P.oLoadedState.yadcfState[b]&&P.oLoadedState.yadcfState[b][l]&&("-1"===(S=P.oLoadedState.yadcfState[b][l].from)||S===undefined?O("#yadcf-filter-"+b+"-"+l).val(S):O("#yadcf-filter-"+b+"-"+l).val(S).addClass("inuse")),!0!==P.oFeatures.bServerSide&&H(b,"yadcf-filter-"+b+"-"+l,l)),""!==P.aoPreSearchCols[u].sSearch&&(S=B(S=P.aoPreSearchCols[u].sSearch,R(t.selector)[l].filter_match_mode),O("#yadcf-filter-"+b+"-"+l).val(S).addClass("inuse")),D.select_type!==undefined&&"chosen"===D.select_type?(O("#yadcf-filter-"+b+"-"+l).chosen(D.select_type_options),O("#yadcf-filter-"+b+"-"+l).next().attr("onclick","yadcf.stopPropagation(event);").attr("onmousedown","yadcf.stopPropagation(event);")):D.select_type!==undefined&&"select2"===D.select_type&&(O("#yadcf-filter-"+b+"-"+l).select2(D.select_type_options),O("#yadcf-filter-"+b+"-"+l).next().hasClass("select2-container")&&O("#yadcf-filter-"+b+"-"+l).next().attr("onclick","yadcf.stopPropagation(event);").attr("onmousedown","yadcf.stopPropagation(event);"))):"multi_select"===D.filter_type||"multi_select_custom_func"===D.filter_type?(O(o).append('<div id="yadcf-filter-wrapper-'+b+"-"+l+'" class="yadcf-filter-wrapper"></div>'),o+=" div.yadcf-filter-wrapper","multi_select"===D.filter_type?(E="onchange=\"yadcf.doFilterMultiSelect(this, '"+b+"', "+l+", '"+m+"');\"",!0===D.externally_triggered&&(E=""),O(o).append('<select multiple data-placeholder="'+d+'" id="yadcf-filter-'+b+"-"+l+'" class="yadcf-filter '+D.style_class+'" '+E+" onmousedown=\"yadcf.stopPropagation(event);\" onclick='yadcf.stopPropagation(event);'>"+g+"</select>"),!1!==c&&O(o).find(".yadcf-filter").after('<button type="button" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.doFilter(\'clear\', \''+b+"', "+l+'); return false;" class="yadcf-filter-reset-button">'+c+"</button>"),""!==P.aoPreSearchCols[u].sSearch&&(S=(S=(S=z(S=P.aoPreSearchCols[u].sSearch,R(t.selector)[l].filter_match_mode)).replace(/\\/g,"")).split("|"),O("#yadcf-filter-"+b+"-"+l).val(S))):(E="onchange=\"yadcf.doFilterCustomDateFunc(this, '"+b+"', "+l+');"',!0===D.externally_triggered&&(E=""),O(o).append('<select multiple data-placeholder="'+d+'" id="yadcf-filter-'+b+"-"+l+'" class="yadcf-filter '+D.style_class+'" '+E+" onmousedown=\"yadcf.stopPropagation(event);\" onclick='yadcf.stopPropagation(event);'>"+g+"</select>"),!1!==c&&O(o).find(".yadcf-filter").after('<button type="button" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.doFilterCustomDateFunc(\'clear\', \''+b+"', "+l+'); return false;" class="yadcf-filter-reset-button">'+c+"</button>"),!0===P.oFeatures.bStateSave&&P.oLoadedState&&P.oLoadedState.yadcfState&&P.oLoadedState.yadcfState[b]&&P.oLoadedState.yadcfState[b][l]&&("-1"===(S=P.oLoadedState.yadcfState[b][l].from)||S===undefined?O("#yadcf-filter-"+b+"-"+l).val(S):O("#yadcf-filter-"+b+"-"+l).val(S).addClass("inuse")),!0!==P.oFeatures.bServerSide&&H(b,"yadcf-filter-"+b+"-"+l,l)),D.filter_container_id===undefined&&D.select_type_options.width===undefined&&(D.select_type_options=O.extend(D.select_type_options,{width:O(o).closest("th").width()+"px"})),D.filter_container_id!==undefined&&D.select_type_options.width===undefined&&(D.select_type_options=O.extend(D.select_type_options,{width:O(o).closest("#"+D.filter_container_id).width()+"px"})),D.select_type!==undefined&&"chosen"===D.select_type?(O("#yadcf-filter-"+b+"-"+l).chosen(D.select_type_options),O("#yadcf-filter-"+b+"-"+l).next().attr("onclick","yadcf.stopPropagation(event);").attr("onmousedown","yadcf.stopPropagation(event);")):D.select_type!==undefined&&"select2"===D.select_type&&(O("#yadcf-filter-"+b+"-"+l).select2(D.select_type_options),O("#yadcf-filter-"+b+"-"+l).next().hasClass("select2-container")&&O("#yadcf-filter-"+b+"-"+l).next().attr("onclick","yadcf.stopPropagation(event);").attr("onmousedown","yadcf.stopPropagation(event);"))):"auto_complete"===D.filter_type?(O(o).append('<div id="yadcf-filter-wrapper-'+b+"-"+l+'" class="yadcf-filter-wrapper"></div>'),o+=" div.yadcf-filter-wrapper",E="onkeyup=\"yadcf.autocompleteKeyUP('"+b+"',event);\"",!0===D.externally_triggered&&(E=""),O(o).append('<input id="yadcf-filter-'+b+"-"+l+'" class="yadcf-filter" onmousedown="yadcf.stopPropagation(event);" onclick=\'yadcf.stopPropagation(event);\' placeholder=\''+d+"' filter_match_mode='"+m+"' "+E+"></input>"),O(document).data("yadcf-filter-"+b+"-"+l,g),!1!==c&&O(o).find(".yadcf-filter").after('<button type="button" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.doFilterAutocomplete(\'clear\', \''+b+"', "+l+'); return false;" class="yadcf-filter-reset-button">'+c+"</button>")):"text"===D.filter_type?(O(o).append('<div id="yadcf-filter-wrapper-'+b+"-"+l+'" class="yadcf-filter-wrapper"></div>'),o+=" div.yadcf-filter-wrapper",E="onkeyup=\"yadcf.textKeyUP('"+b+"', "+l+');"',!0===D.externally_triggered&&(E=""),!(A="")===D.exclude&&(A='<span class="yadcf-exclude-wrapper" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);"><div class="yadcf-label small">'+D.exclude_label+'</div><input type="checkbox" title="'+D.exclude_label+'" onclick="yadcf.stopPropagation(event);yadcf.textKeyUP(\''+b+"',"+l+');"></span>'),O(o).append(A+'<input type="text" id="yadcf-filter-'+b+"-"+l+'" class="yadcf-filter '+D.style_class+"\" onmousedown=\"yadcf.stopPropagation(event);\" onclick='yadcf.stopPropagation(event);' placeholder='"+d+"' filter_match_mode='"+m+"' "+E+"></input>"),!1!==c&&O(o).find(".yadcf-filter").after('<button type="button"  id="yadcf-filter-'+b+"-"+l+'-reset" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.textKeyUP(\''+b+"', '"+l+"', 'clear'); return false;\" class=\"yadcf-filter-reset-button\">"+c+"</button>"),""!==P.aoPreSearchCols[u].sSearch&&(S=P.aoPreSearchCols[u].sSearch,!0===D.exclude&&(-1!==S.indexOf("^((?!")&&O("#yadcf-filter-wrapper-"+b+"-"+l).find(":checkbox").prop("checked",!0),S=S.substring(5,S.indexOf(").)"))),S=B(S,R(t.selector)[l].filter_match_mode),O("#yadcf-filter-"+b+"-"+l).val(S).addClass("inuse"))):"date"===D.filter_type?Y(o,b,l,c,d,f):"range_number"===D.filter_type?W(o,b,l,c,d,p):"range_number_slider"===D.filter_type?q(o,b,l,c,w,x,p):"range_date"===D.filter_type&&V(o,b,l,c,d,f)),O(document).data("#yadcf-filter-"+b+"-"+l+"_val")!==undefined&&"-1"!==O(document).data("#yadcf-filter-"+b+"-"+l+"_val")&&O(o).find(".yadcf-filter").val(O(document).data("#yadcf-filter-"+b+"-"+l+"_val")),"auto_complete"===D.filter_type&&(D.filter_plugin_options!==undefined?(D.filter_plugin_options.source!==undefined||(D.filter_plugin_options.source=O(document).data("yadcf-filter-"+b+"-"+l)),D.filter_plugin_options.select=U):D.filter_plugin_options={source:O(document).data("yadcf-filter-"+b+"-"+l),select:U},!0===D.externally_triggered&&delete D.filter_plugin_options.select,O("#yadcf-filter-"+b+"-"+l).autocomplete(D.filter_plugin_options),""!==P.aoPreSearchCols[u].sSearch&&(S=B(S=P.aoPreSearchCols[u].sSearch,R(t.selector)[l].filter_match_mode),O("#yadcf-filter-"+b+"-"+l).val(S).addClass("inuse")))}0<Lt.length&&Lt.shift()()}function M(t,e){e=h(e),O.fn.dataTableExt.iApiIndex=wt[t];var n,i,o,a,r,s=bt[t];i=F(s),o=parseInt(O(e.target).parent().attr("id").replace("yadcf-filter-wrapper-"+t+"-",""),10),i.oSavedState!=undefined&&i.oSavedState.ColReorder!==undefined||Ct[t]!==undefined&&Ct[t].ColReorder!==undefined?(N(i.oSavedState,t),a=Ct[t].ColReorder[o]):a=o,""===(r=ct(s,o)).from&&""===r.to||(O(e.target).parent().find(".yadcf-filter-range").val(""),0<O(e.target).parent().find(".yadcf-filter-range-number").length&&O(O(e.target).parent().find(".yadcf-filter-range")[0]).focus(),!0!==s.fnSettings().oFeatures.bServerSide?s.fnDraw():s.fnFilter("-yadcf_delim-",a),s.fnSettings().oLoadedState||(s.fnSettings().oLoadedState={},s.fnSettings().oApi._fnSaveState(s.fnSettings())),!0===s.fnSettings().oFeatures.bStateSave&&(s.fnSettings().oLoadedState.yadcfState!==undefined&&s.fnSettings().oLoadedState.yadcfState[t]!==undefined?s.fnSettings().oLoadedState.yadcfState[t][o]={from:"",to:""}:((n={})[t]=[],n[t][o]={from:"",to:""},s.fnSettings().oLoadedState.yadcfState=n),s.fnSettings().oApi._fnSaveState(s.fnSettings())),y(),O(e.target).parent().find(".yadcf-filter-range").removeClass("inuse"))}function P(t,e){e=h(e),O.fn.dataTableExt.iApiIndex=wt[t];var n,i,o,a,r=bt[t];a=parseInt(O(e.target).prev().find(".yadcf-filter-range-number-slider").attr("id").replace("yadcf-filter-"+t+"-slider-",""),10),n=+O(O(e.target).parent().find(".yadcf-filter-range-number-slider-min-tip-hidden")).text(),i=+O(O(e.target).parent().find(".yadcf-filter-range-number-slider-max-tip-hidden")).text(),+(o=ct(r,a)).from===n&&+o.to===i||(O("#"+O(e.target).prev().find(".yadcf-filter-range-number-slider").attr("id")).slider("option","yadcf-reset",!0),O("#"+O(e.target).prev().find(".yadcf-filter-range-number-slider").attr("id")).slider("option","values",[n,i]),O(O(e.target).prev().find(".ui-slider-handle")[0]).attr("tabindex",-1).focus(),O(O(e.target).prev().find(".ui-slider-handle")[0]).removeClass("inuse"),O(O(e.target).prev().find(".ui-slider-handle")[1]).removeClass("inuse"),O(e.target).prev().find(".ui-slider-range").removeClass("inuse"),r.fnDraw(),y())}function E(t,e,n){var i,o,a,r;a=(n=h(n)).target.id,o=document.getElementById(a).value;try{o.length===e.length+2&&(o=""!==o?O.datepicker.parseDate(e,o):o)}catch(s){}o instanceof Date||""===o?(O.fn.dataTableExt.iApiIndex=wt[t],i=bt[t],r=parseInt(a.replace("yadcf-filter-"+t+"-",""),10),o instanceof Date?(O("#"+a).addClass("inuse"),i.fnFilter(document.getElementById(a).value,r)):O("#"+a).removeClass("inuse"),""===O.trim(n.target.value)&&O(n.target).hasClass("inuse")&&(O("#"+n.target.id).removeClass("inuse"),i.fnFilter("",r)),y()):O(n.target).hasClass("inuse")&&(O.fn.dataTableExt.iApiIndex=wt[t],i=bt[t],r=parseInt(a.replace("yadcf-filter-"+t+"-",""),10),O("#"+a).removeClass("inuse"),i.fnFilter("",r),y())}function I(t,n,i){i=h(i),O.fn.dataTableExt.iApiIndex=wt[t];var o,a,r,s,l,e,u,d=bt[t];l=parseInt(O(i.target).attr("id").replace("-from-date-","").replace("-to-date-","").replace("yadcf-filter-"+t,""),10),e=R(d.selector)[l],u=function(){-1!==i.target.id.indexOf("-from-")?(r=i.target.id,s=i.target.id.replace("-from-","-to-"),o=document.getElementById(r).value,a=document.getElementById(s).value):(s=i.target.id,r=i.target.id.replace("-to-","-from-"),a=document.getElementById(s).value,o=document.getElementById(r).value);try{o.length===n.length+2&&(o=""!==o?O.datepicker.parseDate(n,o):o)}catch(t){}try{a.length===n.length+2&&(a=""!==a?O.datepicker.parseDate(n,a):a)}catch(e){}(a instanceof Date&&o instanceof Date&&o<=a||""===o||""===a)&&(!0!==d.fnSettings().oFeatures.bServerSide?d.fnDraw():d.fnFilter(document.getElementById(r).value+"-yadcf_delim-"+document.getElementById(s).value,l),o instanceof Date?O("#"+r).addClass("inuse"):O("#"+r).removeClass("inuse"),a instanceof Date?O("#"+s).addClass("inuse"):O("#"+s).removeClass("inuse"),""===O.trim(i.target.value)&&O(i.target).hasClass("inuse")&&O("#"+i.target.id).removeClass("inuse")),y()},e.filter_delay===undefined?u(t,i):vt(function(){u(t,i)},e.filter_delay)}function A(t,e){e=h(e),O.fn.dataTableExt.iApiIndex=wt[t];var n,i,o,a,r,s,l,u,d=bt[t];s=parseInt(O(e.target).attr("id").replace("-from-","").replace("-to-","").replace("yadcf-filter-"+t,""),10),l=R(d.selector)[s],u=function(){-1!==e.target.id.indexOf("-from-")?(o=e.target.id,a=e.target.id.replace("-from-","-to-"),n=document.getElementById(o).value,i=document.getElementById(a).value):(a=e.target.id,o=e.target.id.replace("-to-","-from-"),i=document.getElementById(a).value,n=document.getElementById(o).value),l.ignore_char!==undefined&&(n=n.replace(l.ignore_char,""),i=i.replace(l.ignore_char,"")),n=""!==n?+n:n,i=""!==i?+i:i,(!isNaN(i)&&!isNaN(n)&&n<=i||""===n||""===i)&&(!0!==d.fnSettings().oFeatures.bServerSide?d.fnDraw():d.fnFilter(n+"-yadcf_delim-"+i,s),""!==document.getElementById(o).value&&O("#"+o).addClass("inuse"),""!==document.getElementById(a).value&&O("#"+a).addClass("inuse"),""===O.trim(e.target.value)&&O(e.target).hasClass("inuse")&&O("#"+e.target.id).removeClass("inuse"),d.fnSettings().oLoadedState||(d.fnSettings().oLoadedState={},d.fnSettings().oApi._fnSaveState(d.fnSettings())),!0===d.fnSettings().oFeatures.bStateSave&&(d.fnSettings().oLoadedState.yadcfState!==undefined&&d.fnSettings().oLoadedState.yadcfState[t]!==undefined?d.fnSettings().oLoadedState.yadcfState[t][s]={from:n,to:i}:((r={})[t]=[],r[t][s]={from:n,to:i},d.fnSettings().oLoadedState.yadcfState=r),d.fnSettings().oApi._fnSaveState(d.fnSettings()))),y()},l.filter_delay===undefined?u():vt(function(){u()},l.filter_delay)}function K(t,e,n,i){var o,a,r=R(t+"_"+n)[n],s=!1,l=!0,u=!0,d=bt[t],c=O(e.target).val();if(e=h(e),o=new O.fn.dataTable.Api(d),i!==undefined||c==undefined||0===c.length)return i!==undefined&&(O(e.target).parent().find("select").val("-1").focus(),O(e.target).parent().find("select").removeClass("inuse")),r.column_number instanceof Array?o.columns(r.column_number).search("").draw():o.search("").draw(),void("chosen"===r.select_type?O("#"+r.filter_container_id+" select").trigger("chosen:updated"):"select2"===r.select_type&&O("#"+r.filter_container_id+" select").select2("val","-1"));if(O(e.target).addClass("inuse"),l=!(s=!0),u=r.case_insensitive,null!==c){for(a=c.length-1;0<=a;a--)if("-1"===c[a]){c.splice(a,1);break}0!==c.length&&(c=(c=(c=c.join("narutouzomaki")).replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")).split("narutouzomaki").join("|"))}"exact"===r.filter_match_mode?c="^"+c+"$":"startsWith"===r.filter_match_mode&&(c="^"+c),r.column_number instanceof Array?o.columns(r.column_number).search(c,s,l,u).draw():o.search(c,s,l,u).draw()}function J(t,e,n,i){var o,a,r=R(t+"_"+n)[n],s=!1,l=!0,u=!0,d=bt[t];if(e=h(e),a=new O.fn.dataTable.Api(d),i!==undefined||"-1"===e.target.value)return i!==undefined&&(O(e.target).parent().find("select").val("-1").focus(),O(e.target).parent().find("select").removeClass("inuse")),r.column_number instanceof Array?a.columns(r.column_number).search("").draw():a.search("").draw(),void("chosen"===r.select_type?O("#"+r.filter_container_id+" select").trigger("chosen:updated"):"select2"===r.select_type&&O("#"+r.filter_container_id+" select").select2("val","-1"));O(e.target).addClass("inuse"),o=e.target.value,l=!1,u=r.case_insensitive,r.column_number instanceof Array?a.columns(r.column_number).search(o,s,l,u).draw():a.search(o,s,l,u).draw()}function X(t,e,n,i){var o,a,r,s=R(t+"_"+n)[n],l=!1,u=!0,d=!0,c=bt[t];e=h(e),r=new O.fn.dataTable.Api(c),o=function(t,e,n){if(n!==undefined||""===e.target.value)return n!==undefined?(O(e.target).prev().val("").focus(),O(e.target).prev().removeClass("inuse")):(O(e.target).val("").focus(),O(e.target).removeClass("inuse")),void(s.column_number instanceof Array?t.columns(s.column_number).search("").draw():t.search("").draw());O(e.target).addClass("inuse"),a=e.target.value,u=!1,d=s.case_insensitive,s.column_number instanceof Array?t.columns(s.column_number).search(a,l,u,d).draw():t.search(a,l,u,d).draw()},s.filter_delay===undefined?o(r,e,i):vt(function(){o(r,e,i)},s.filter_delay)}function Q(t,e,n){var i,o,a,r,s=bt[t],l=F(s);l.oSavedState!=undefined&&l.oSavedState.ColReorder!==undefined||Ct[t]!==undefined&&Ct[t].ColReorder!==undefined?(N(l.oSavedState,t),i=Ct[t].ColReorder[e]):i=e,a=R(s.selector)[e],o=function(t,e,n){if(O.fn.dataTableExt.iApiIndex=wt[t],"clear"===n||""===O("#yadcf-filter-"+t+"-"+e).val()){if("clear"===n&&""===ct(s,e))return;return O("#yadcf-filter-"+t+"-"+e).val("").focus(),O("#yadcf-filter-"+t+"-"+e).removeClass("inuse"),s.fnFilter("",i),void y()}!0===a.exclude&&(r=O("#yadcf-filter-"+t+"-"+e).closest(".yadcf-filter-wrapper").find(".yadcf-exclude-wrapper :checkbox").prop("checked")),O("#yadcf-filter-"+t+"-"+e).addClass("inuse"),c(s,O("#yadcf-filter-"+t+"-"+e).val(),a.filter_match_mode,i,r),y()},a.filter_delay===undefined?o(t,e,n):vt(function(){o(t,e,n)},a.filter_delay)}function tt(t,e){if(""===(e=h(e)).target.value&&8===e.keyCode&&O(e.target).hasClass("inuse")){O.fn.dataTableExt.iApiIndex=wt[t];var n=bt[t],i=parseInt(O(e.target).attr("id").replace("yadcf-filter-"+t+"-",""),10);O("#yadcf-filter-"+t+"-"+i).removeClass("inuse"),O(document).removeData("#yadcf-filter-"+t+"-"+i+"_val"),n.fnFilter("",i),y()}}function et(t){return t.fnSettings().sAjaxSource==undefined&&t.fnSettings().ajax==undefined}function nt(t,e){var n=O(document).data(e+"_filters_position"),i=yadcf.generateTableSelectorJQFriendly(e);n="thead"===n?".dataTables_scrollHead":".dataTables_scrollFoot",""===t.fnSettings().oScroll.sX&&""===t.fnSettings().oScroll.sY||O(e).closest(".dataTables_scroll").find(n+" table").addClass("yadcf-datatables-table-"+i)}function it(r,t,e,n){var i,a=yadcf.generateTableSelectorJQFriendly(t);bt[a]=r,_t[a]=n,wt[a]=e,nt(r,t),et(r)?(-1!==(i=t).indexOf(":eq")&&(i=t.substring(0,t.lastIndexOf(":eq"))),T(r,yadcf.getOptions(i),t)):(T(r,yadcf.getOptions(t),t),s("1.10")?(O(document).off("draw.dt",r.selector).on("draw.dt",r.selector,function(t,e){T(r,yadcf.getOptions(e.oInstance.selector),e.oInstance.selector)}),O(document).off("xhr.dt",r.selector).on("xhr.dt",r.selector,function(t,e,n){var i,o,a=l(r.selector);for(i in null!==e.oSavedState&&N(e.oSavedState,a),yadcf.getOptions(e.oInstance.selector))yadcf.getOptions(e.oInstance.selector).hasOwnProperty(i)&&n["yadcf_data_"+i]!==undefined&&(o=i,(null!==e.oSavedState&&e.oSavedState.ColReorder!==undefined||Ct[a]!==undefined&&Ct[a].ColReorder!==undefined)&&(o=Ct[a].ColReorder[i]),yadcf.getOptions(e.oInstance.selector)[i].data=n["yadcf_data_"+o])}),O(document).off("column-visibility.dt",r.selector).on("column-visibility.dt",r.selector,function(t,e,n,i){var o={};!0===i&&(Ct[a]!==undefined&&Ct[a].ColReorder!==undefined?n=Ct[a].ColReorder[n]:e.oSavedState!=undefined&&e.oSavedState.ColReorder!==undefined&&(n=e.oSavedState.ColReorder[n]),o[n]=yadcf.getOptions(e.oInstance.selector)[n],o[n].column_number=n,o[n]!==undefined&&T(bt[yadcf.generateTableSelectorJQFriendly(e.oInstance.selector)],o,e.oInstance.selector))}),O(document).off("destroy.dt",r.selector).on("destroy.dt",r.selector,function(t,e){k(r,yadcf.getOptions(e.oInstance.selector),e.oInstance.selector)})):(O(document).off("draw",r.selector).on("draw",r.selector,function(t,e){T(r,yadcf.getOptions(e.oInstance.selector),e.oInstance.selector)}),O(document).off("destroy",r.selector).on("destroy",r.selector,function(t,e){k(r,yadcf.getOptions(e.oInstance.selector),e.oInstance.selector)}))),s("1.10")?O(document).off("destroy.dt",r.selector).on("destroy.dt",r.selector,function(t,e){k(r,yadcf.getOptions(e.oInstance.selector),e.oInstance.selector)}):O(document).off("destroy",r.selector).on("destroy",r.selector,function(t,e){k(r,yadcf.getOptions(e.oInstance.selector),e.oInstance.selector)}),O(document).off("column-reorder.dt",r.selector).on("column-reorder.dt",r.selector,function(){o(l(r.selector))}),!0===r.fnSettings().oFeatures.bStateSave&&(s("1.10")?O(r.selector).off("stateSaveParams.dt").on("stateSaveParams.dt",function(t,e,n){e.oLoadedState&&e.oLoadedState.yadcfState!==undefined?n.yadcfState=e.oLoadedState.yadcfState:n.naruto="kurama"}):O(r.selector).off("stateSaveParams").on("stateSaveParams",function(t,e,n){e.oLoadedState&&e.oLoadedState.yadcfState!==undefined?n.yadcfState=e.oLoadedState.yadcfState:n.naruto="kurama"}),et(r)&&(r.fnSettings().oApi._fnSaveState(r.fnSettings()),r.fnDraw(!1)))}function ot(t,e,n){var i,o,a=t.settings()[0].oInstance,r=0;if(n===undefined&&(n={}),"string"==typeof n&&(o=n,(n={}).filters_position=o),n.filters_position===undefined||"header"===n.filters_position?n.filters_position="thead":n.filters_position="tfoot",O(document).data(a.selector+"_filters_position",n.filters_position),1===O(a.selector).length)u(a.selector,e,n),it(a,a.selector,0,t);else{for(;r<O(a.selector).length;r++)O.fn.dataTableExt.iApiIndex=r,i=a.selector+":eq("+r+")",u(a.selector,e,n),it(a,i,r,t);O.fn.dataTableExt.iApiIndex=0}}function at(t,e,n){
var i,o,a,r,s,l,u,d="#"+n.filter_container_id,c=(O(d).find(".yadcf-filter"),yadcf.generateTableSelectorJQFriendlyNew(e)),h=p(n.column_number).column_number_str,f=R(e+"_"+h)[h];switch(O(d).append('<div id="yadcf-filter-wrapper-'+c+"-"+h+'" class="yadcf-filter-wrapper"></div>'),d+=" div.yadcf-filter-wrapper",f.filter_type){case"text":O(d).append('<input type="text" id="yadcf-filter-'+c+"-"+h+'" class="yadcf-filter" onmousedown="yadcf.stopPropagation(event);" onclick=\'yadcf.stopPropagation(event);\' placeholder=\''+f.filter_default_label+"' onkeyup=\"yadcf.textKeyUpMultiTables('"+e+"',event,'"+h+"');\"></input>"),!1!==f.filter_reset_button_text&&O(d).find(".yadcf-filter").after('<button type="button"  id="yadcf-filter-'+c+"-"+h+'-reset" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.textKeyUpMultiTables(\''+e+"', event,'"+h+"','clear'); return false;\" class=\"yadcf-filter-reset-button\">"+f.filter_reset_button_text+"</button>");break;case"select":case"multi_select":if(i=f.select_type===undefined?'<option data-placeholder="true" value="-1">'+f.filter_default_label+"</option>":"","select2"===f.select_type&&f.select_type_options.placeholder!==undefined&&!0===f.select_type_options.allowClear&&(i='<option value=""></option>'),f.data===undefined)for(f.data=[],r=e.split(","),s=0;s<r.length;s++)if(et(a=O("#"+t[s].table().node().id).dataTable())){for(u=f.column_number,l=0;l<u.length;l++)f.column_number=u[l],f.data=f.data.concat(G(a,f,c));f.column_number=u}else O(document).off("draw.dt","#"+t[s].table().node().id).on("draw.dt","#"+t[s].table().node().id,function(){var t,e="";for(u=f.column_number,l=0;l<u.length;l++)f.column_number=u[l],f.data=f.data.concat(G(a,f,c));for(f.column_number=u,f.data=Z(f.data,f),t=0;t<f.data.length;t++)e+='<option value="'+f.data[t]+'">'+f.data[t]+"</option>";O("#"+f.filter_container_id+" select").empty().append(e),f.select_type!==undefined&&"chosen"===f.select_type?(O("#"+f.filter_container_id+" select").chosen(f.select_type_options),O("#"+f.filter_container_id+" select").next().attr("onclick","yadcf.stopPropagation(event);").attr("onmousedown","yadcf.stopPropagation(event);")):f.select_type!==undefined&&"select2"===f.select_type&&(O("#"+f.filter_container_id+" select").select2(f.select_type_options),O("#"+f.filter_container_id+" select").next().hasClass("select2-container")&&O("#"+f.filter_container_id+" select").next().attr("onclick","yadcf.stopPropagation(event);").attr("onmousedown","yadcf.stopPropagation(event);"))});if(f.data=Z(f.data,f),"object"==typeof f.data[0])for(o=0;o<f.data.length;o++)i+='<option value="'+f.data[o].value+'">'+f.data[o].label+"</option>";else for(o=0;o<f.data.length;o++)i+='<option value="'+f.data[o]+'">'+f.data[o]+"</option>";"select"===f.filter_type?O(d).append('<select id="yadcf-filter-'+c+"-"+h+'" class="yadcf-filter" onchange="yadcf.doFilterMultiTables(\''+e+"',event,'"+h+"')\" onmousedown=\"yadcf.stopPropagation(event);\" onclick='yadcf.stopPropagation(event);'>"+i+"</select>"):"multi_select"===f.filter_type&&O(d).append('<select multiple data-placeholder="'+f.filter_default_label+'" id="yadcf-filter-'+c+"-"+h+'" class="yadcf-filter" onchange="yadcf.doFilterMultiTablesMultiSelect(\''+e+"',event,'"+h+"')\" onmousedown=\"yadcf.stopPropagation(event);\" onclick='yadcf.stopPropagation(event);'>"+i+"</select>"),"select"===f.filter_type?!1!==f.filter_reset_button_text&&O(d).find(".yadcf-filter").after('<button type="button"  id="yadcf-filter-'+c+"-"+h+'-reset" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.doFilterMultiTables(\''+e+"', event,'"+h+"','clear'); return false;\" class=\"yadcf-filter-reset-button\">"+f.filter_reset_button_text+"</button>"):"multi_select"===f.filter_type&&!1!==f.filter_reset_button_text&&O(d).find(".yadcf-filter").after('<button type="button"  id="yadcf-filter-'+c+"-"+h+'-reset" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.doFilterMultiTablesMultiSelect(\''+e+"', event,'"+h+"','clear'); return false;\" class=\"yadcf-filter-reset-button\">"+f.filter_reset_button_text+"</button>"),f.select_type!==undefined&&"chosen"===f.select_type?(O("#yadcf-filter-"+c+"-"+h).chosen(f.select_type_options),O("#yadcf-filter-"+c+"-"+h).next().attr("onclick","yadcf.stopPropagation(event);").attr("onmousedown","yadcf.stopPropagation(event);")):f.select_type!==undefined&&"select2"===f.select_type&&(O("#yadcf-filter-"+c+"-"+h).select2(f.select_type_options),O("#yadcf-filter-"+c+"-"+h).next().hasClass("select2-container")&&O("#yadcf-filter-"+c+"-"+h).next().attr("onclick","yadcf.stopPropagation(event);").attr("onmousedown","yadcf.stopPropagation(event);"));break;default:alert("Filters Multiple Tables does not support "+f.filter_type)}}function rt(t,e){var n,i,o,a,r,s="",l={filter_type:"text",filter_container_id:"",filter_reset_button_text:"x",case_insensitive:!0};for(o=0;o<e.length;o++){for(r=[],(i=e[o]).filter_default_label===undefined&&("select"===i.filter_type||"custom_func"===i.filter_type?i.filter_default_label="Select value":"multi_select"===i.filter_type||"multi_select_custom_func"===i.filter_type?i.filter_default_label="Select values":"auto_complete"===i.filter_type||"text"===i.filter_type?i.filter_default_label="Type to filter":"range_number"===i.filter_type||"range_date"===i.filter_type?i.filter_default_label=["from","to"]:"date"===i.filter_type&&(i.filter_default_label="Select a date")),a=p((i=O.extend({},l,i)).column_number).column_number_str,i.column_number_str=a,r.push(i),s="",n=0;n<t.length;n++)s+=t[n].table().node().id+",";u((s=s.substring(0,s.length-1))+"_"+a,r),at(bt[s]=t,s,i)}}function st(t,e){var n=[];n.push(t),rt(n,e)}function lt(t){t.stopPropagation!==undefined?t.stopPropagation():t.cancelBubble=!0}function ut(t,e){return function(){dt(t,e,!0)}}function dt(t,e,n){var i,o,a,r,s,l,u,d,c,h,f,p;if(t.settings!==undefined&&(t=t.settings()[0].oInstance),i=yadcf.generateTableSelectorJQFriendly(t.selector),et(t)||!0===n){for(o=0;o<e.length;o++)switch(s=r=e[o][0],Ct[i]!==undefined&&Ct[i]!==undefined&&Ct[i].ColReorder!==undefined&&(s=Ct[i].ColReorder[r]),h=R(t.selector)[r],l=e[o][1],h.filter_type){case"auto_complete":case"text":case"date":O("#yadcf-filter-"+i+"-"+r).val(l).addClass("inuse"),a=m(t,s,l,h.filter_match_mode,!1),t.fnSettings().aoPreSearchCols[s].sSearch=a;break;case"select":O("#yadcf-filter-"+i+"-"+r).val(l).addClass("inuse"),a=m(t,s,l,h.filter_match_mode,!1),t.fnSettings().aoPreSearchCols[s].sSearch=a,h.select_type!==undefined&&("chosen"===h.select_type?O("#yadcf-filter-"+i+"-"+r).trigger("chosen:updated"):"select2"===h.select_type&&O("#yadcf-filter-"+i+"-"+r).select2("val",l));break;case"multi_select":O("#yadcf-filter-"+i+"-"+r).val(l),a=m(t,s,l,h.filter_match_mode,!0),t.fnSettings().aoPreSearchCols[s].sSearch=a,h.select_type!==undefined&&("chosen"===h.select_type?O("#yadcf-filter-"+i+"-"+r).trigger("chosen:updated"):"select2"===h.select_type&&O("#yadcf-filter-"+i+"-"+r).select2("val",l));break;case"range_date":u="yadcf-filter-"+i+"-from-date-"+r,d="yadcf-filter-"+i+"-to-date-"+r,""!==l.from&&(O("#"+u).val(l.from),O("#"+u).addClass("inuse")),""!==l.to&&(O("#"+d).val(l.to),O("#"+d).addClass("inuse")),!0===t.fnSettings().oFeatures.bServerSide&&(f=l.from,p=l.to,t.fnSettings().aoPreSearchCols[s].sSearch=f+"-yadcf_delim-"+p),ft(t,r,i,l.from,l.to);break;case"range_number":u="yadcf-filter-"+i+"-from-"+r,d="yadcf-filter-"+i+"-to-"+r,""!==l.from&&(O("#"+u).val(l.from),O("#"+u).addClass("inuse")),""!==l.to&&(O("#"+d).val(l.to),O("#"+d).addClass("inuse")),!0===t.fnSettings().oFeatures.bServerSide&&(t.fnSettings().aoPreSearchCols[s].sSearch=l.from+"-yadcf_delim-"+l.to),ft(t,r,i,l.from,l.to);break;case"range_number_slider":c="yadcf-filter-"+i+"-slider-"+r,u="yadcf-filter-"+i+"-min_tip-"+r,d="yadcf-filter-"+i+"-max_tip-"+r,""!==l.from&&(f=O("#"+u).closest(".yadcf-filter-range-number-slider").find(".yadcf-filter-range-number-slider-min-tip-hidden").text(),p=O("#"+u).closest(".yadcf-filter-range-number-slider").find(".yadcf-filter-range-number-slider-max-tip-hidden").text(),O("#"+u).text(l.from),f!==l.from&&(O("#"+u).parent().addClass("inuse"),O("#"+u).parent().parent().find("ui-slider-range").addClass("inuse")),O("#"+c).slider("values",0,l.from)),""!==l.to&&(O("#"+d).text(l.to),p!==l.to&&(O("#"+d).parent().addClass("inuse"),O("#"+d).parent().parent().find(".ui-slider-range").addClass("inuse")),O("#"+c).slider("values",1,l.to)),!0===t.fnSettings().oFeatures.bServerSide&&(t.fnSettings().aoPreSearchCols[s].sSearch=l.from+"-yadcf_delim-"+l.to),ft(t,r,i,l.from,l.to);break;case"custom_func":case"multi_select_custom_func":O("#yadcf-filter-"+i+"-"+r).val(l).addClass("inuse"),!0===t.fnSettings().oFeatures.bServerSide&&(t.fnSettings().aoPreSearchCols[s].sSearch=l),h.select_type!==undefined&&("chosen"===h.select_type?O("#yadcf-filter-"+i+"-"+r).trigger("chosen:updated"):"select2"===h.select_type&&O("#yadcf-filter-"+i+"-"+r).select2("val",l)),ft(t,r,i,l,"")}!0!==t.fnSettings().oFeatures.bServerSide?t.fnDraw():setTimeout(function(){t.fnDraw()},10)}else Lt.push(ut(t,e))}function ct(t,e){var n,i,o,a,r;switch(t.settings!==undefined&&(t=t.settings()[0].oInstance),r=R(t.selector)[e],a=yadcf.generateTableSelectorJQFriendly(t.selector),r.filter_type){case"select":case"custom_func":"-1"===(n=O("#yadcf-filter-"+a+"-"+e).val())&&(n="");break;case"auto_complete":case"text":case"date":n=O("#yadcf-filter-"+a+"-"+e).val();break;case"multi_select":null===(n=O("#yadcf-filter-"+a+"-"+e).val())&&(n="");break;case"range_date":i="yadcf-filter-"+a+"-from-date-"+e,o="yadcf-filter-"+a+"-to-date-"+e,(n={}).from=O("#"+i).val(),n.to=O("#"+o).val();break;case"range_number":i="yadcf-filter-"+a+"-from-"+e,o="yadcf-filter-"+a+"-to-"+e,(n={}).from=O("#"+i).val(),n.to=O("#"+o).val();break;case"range_number_slider":i="yadcf-filter-"+a+"-min_tip-"+e,o="yadcf-filter-"+a+"-max_tip-"+e,(n={}).from=O("#"+i).text(),n.to=O("#"+o).text();break;default:console.log("exGetColumnFilterVal error: no such filter_type: "+r.filter_type)}return n}function ht(t,e,n){var i;!0===t.fnSettings().oFeatures.bStateSave&&(t.fnSettings().oLoadedState||(t.fnSettings().oLoadedState={},t.fnSettings().oApi._fnSaveState(t.fnSettings())),t.fnSettings().oLoadedState.yadcfState!==undefined&&t.fnSettings().oLoadedState.yadcfState[n]!==undefined?t.fnSettings().oLoadedState.yadcfState[n][e]=undefined:((i={})[n]=[],i[n][e]=undefined,t.fnSettings().oLoadedState.yadcfState=i),t.fnSettings().oApi._fnSaveState(t.fnSettings()))}function ft(t,e,n,i,o){var a;!0===t.fnSettings().oFeatures.bStateSave&&(t.fnSettings().oLoadedState||(t.fnSettings().oLoadedState={}),t.fnSettings().oLoadedState.yadcfState!==undefined&&t.fnSettings().oLoadedState.yadcfState[n]!==undefined?t.fnSettings().oLoadedState.yadcfState[n][e]={from:i,to:o}:((a={})[n]=[],a[n][e]={from:i,to:o},t.fnSettings().oLoadedState.yadcfState=a),t.fnSettings().oApi._fnSaveState(t.fnSettings()))}function pt(t,e,n){var i,o,a,r,s,l,u,d,c,h=F(t);for(d in t.settings!==undefined&&(t=t.settings()[0].oInstance),l=R(t.selector),i=yadcf.generateTableSelectorJQFriendly(t.selector),h=F(t),l)if(l.hasOwnProperty(d)){if(o=(u=l[d]).column_number,n!==undefined&&-1===O.inArray(o,n))continue;switch(O(document).removeData("#yadcf-filter-"+i+"-"+o+"_val"),u.filter_type){case"select":case"custom_func":O("#yadcf-filter-"+i+"-"+o).val("-1").removeClass("inuse"),t.fnSettings().aoPreSearchCols[o].sSearch="",u.select_type!==undefined&&("chosen"===u.select_type?O("#yadcf-filter-"+i+"-"+o).trigger("chosen:updated"):"select2"===u.select_type&&O("#yadcf-filter-"+i+"-"+o).select2("val","-1"));break;case"auto_complete":case"text":case"date":O("#yadcf-filter-"+i+"-"+o).val("").removeClass("inuse"),t.fnSettings().aoPreSearchCols[o].sSearch="";break;case"multi_select":case"multi_select_custom_func":O("#yadcf-filter-"+i+"-"+o).val("-1"),O(document).data("#yadcf-filter-"+i+"-"+o+"_val",undefined),t.fnSettings().aoPreSearchCols[o].sSearch="",u.select_type!==undefined&&("chosen"===u.select_type?O("#yadcf-filter-"+i+"-"+o).trigger("chosen:updated"):"select2"===u.select_type&&O("#yadcf-filter-"+i+"-"+o).select2("val","-1"));break;case"range_date":r="yadcf-filter-"+i+"-to-date-"+o,O("#"+(a="yadcf-filter-"+i+"-from-date-"+o)).val(""),O("#"+a).removeClass("inuse"),O("#"+r).val(""),O("#"+r).removeClass("inuse"),!0===t.fnSettings().oFeatures.bServerSide&&(t.fnSettings().aoPreSearchCols[o].sSearch=""),ht(t,o,i);break;case"range_number":r="yadcf-filter-"+i+"-to-"+o,O("#"+(a="yadcf-filter-"+i+"-from-"+o)).val(""),O("#"+a).removeClass("inuse"),O("#"+r).val(""),O("#"+r).removeClass("inuse"),!0===t.fnSettings().oFeatures.bServerSide&&(t.fnSettings().aoPreSearchCols[o].sSearch=""),ht(t,o,i);break;case"range_number_slider":s="yadcf-filter-"+i+"-slider-"+o,r="yadcf-filter-"+i+"-max_tip-"+o,O("#"+(a="yadcf-filter-"+i+"-min_tip-"+o)).text(""),O("#"+a).parent().removeClass("inuse"),O("#"+a).parent().parent().find("ui-slider-range").removeClass("inuse"),O("#"+r).text(""),O("#"+r).parent().removeClass("inuse"),O("#"+r).parent().parent().find(".ui-slider-range").removeClass("inuse"),O("#"+s).slider("option","values",[O("#"+a).parent().parent().find(".yadcf-filter-range-number-slider-min-tip-hidden").text(),O("#"+a).parent().parent().find(".yadcf-filter-range-number-slider-max-tip-hidden").text()]),!0===t.fnSettings().oFeatures.bServerSide&&(t.fnSettings().aoPreSearchCols[o].sSearch=""),ht(t,o,i)}}if(!0!==e){if(h.oPreviousSearch.sSearch="","undefined"!==h.aanFeatures.f)for(c=0;c<h.aanFeatures.f.length;c++)O("input",h.aanFeatures.f[c]).val("");t.fnDraw(h)}}function mt(t,e){pt(t,!1,e)}function gt(t){var e,n,i,o,a,r=[];for(n in t.settings!==undefined&&(t=t.settings()[0].oInstance),e=R(t.selector))e.hasOwnProperty(n)&&("string"==typeof(o=ct(t,(i=e[n]).column_number))&&""!==o||"object"==typeof o&&(""!==o.from||""!==o.to))&&((a=[]).push(i.column_number),a.push(o),r.push(a));dt(t,r,!0)}var vt,yt,_t={},bt={},wt={},xt={},Ct={},Lt=[],St=/[^a-zA-Z]/g,kt=/[^0-9]/g;return yt=0,vt=function(t,e,n){return clearTimeout(yt),yt=setTimeout(function(){t(n)},e)},O.fn.yadcf=function(t,e){var n,i,o=0;if(e===undefined&&(e={}),"string"==typeof e&&(n=e,(e={}).filters_position=n),e.filters_position===undefined||"header"===e.filters_position?e.filters_position="thead":e.filters_position="tfoot",O(document).data(this.selector+"_filters_position",e.filters_position),1===O(this.selector).length)u(this.selector,t,e),it(this,this.selector,0);else{for(;o<O(this.selector).length;o++)O.fn.dataTableExt.iApiIndex=o,i=this.selector+":eq("+o+")",u(this.selector,t,e),it(this,i,o);O.fn.dataTableExt.iApiIndex=0}return this},{init:ot,doFilter:a,doFilterMultiSelect:r,doFilterAutocomplete:f,autocompleteKeyUP:tt,getOptions:R,rangeNumberKeyUP:A,rangeDateKeyUP:I,rangeClear:M,rangeNumberSliderClear:P,stopPropagation:lt,generateTableSelectorJQFriendly:l,exFilterColumn:dt,exGetColumnFilterVal:ct,exResetAllFilters:pt,dateKeyUP:E,dateSelectSingle:x,textKeyUP:Q,doFilterCustomDateFunc:i,eventTargetFixUp:h,initMultipleTables:rt,initMultipleColumns:st,textKeyUpMultiTables:X,doFilterMultiTables:J,doFilterMultiTablesMultiSelect:K,generateTableSelectorJQFriendlyNew:t,exFilterExternallyTriggered:gt,exResetFilters:mt}}(jQuery),waitForFinalEvent=function(){var i={};return function(t,e,n){n||(n="Don't call this twice without a uniqueId"),i[n]&&clearTimeout(i[n]),i[n]=setTimeout(t,e)}}();$(document).ready(function(){$(".breadcrumb_link:has(span.dropdown)")&&($(".breadcrumb_link:has(span.dropdown)").css("padding","0"),$(".breadcrumb_link:has(span.dropdown) > .dropdown > .dropdown-toggle").css("margin-top","-0.15em"))});var checkForRangeChange=function(n){var i=function(t,e){2<t.split(" ").length&&(newTxt=t.replace(/\d*/g,""),$("."+n+"_limit").html(newTxt)),e&&("upper"===n?null!==e.match(/(to)\s+\d*/)&&(newTxt=e.replace(/(to)\s+\d*/,"to "),$(".map_range label").html(newTxt)):null!==e.match(/(from)\s+\d*/)&&(newTxt=e.replace(/(from)\s+\d*/,"from "),$(".map_range label").html(newTxt)))};$("#"+n).change(function(){var t=$("."+n+"_limit").html(),e=$(".map_range label").html();$(this).val()?(i(t,e),$("."+n+"_limit").append(" "+$(this).val()).show(),e&&(newTxt="upper"===n?$(".map_range label").html().replace(/(to\s*)/,"to "+$(this).val()):$(".map_range label").html().replace(/(from\s*)/,"from "+$(this).val()+" "),$(".map_range label").html(newTxt),$(".map_range").show())):(i(t,e),$("#lower").val()||$("#upper").val()||$(".map_range").css("display","none"),$("."+n+"_limit").css("display","none")),"upper"===n?$("#snapshot_range_high").val($("#"+n).val()):$("#snapshot_range_low").val($("#"+n).val())})},checkForMapFilterChange=function(){$("#filters").change(function(t){"upper"!==t.target.name&&"lower"!==t.target.name&&(key=":"+t.target.id+"=>",regex=new RegExp(key+'(")?(\\d*\\s?)*(")?'),"day_of_week"==t.target.id?$("#snapshot_filters").val($("#snapshot_filters").val().replace(regex,key+'"'+t.target.value+'"')):$("#snapshot_filters").val($("#snapshot_filters").val().replace(regex,key+t.target.value)))})},checkForChartSliderChange=function(t){0!=$("#snapshot_filters").length&&(key=":slider_value=>",regex=new RegExp(key+'(")?(\\d*\\s?)*(")?'),$("#snapshot_filters").val($("#snapshot_filters").val().replace(regex,key+t)))},getAdditionalFilterValues=function(t){var e={};for(i=0;i<t.length;i++)key=$(t[i]).closest(".checkbox").attr("data-view-id"),$("#filter-form-"+key)&&(lowVal=$("#filter-form-"+key).find(".number_range_filter#lower").val(),highVal=$("#filter-form-"+key).find(".number_range_filter#upper").val(),$("#filter-form-"+key+" #vehicle_class")&&(year=$("#filter-form-"+key).find("#year").val(),month=$("#filter-form-"+key).find("#month").val(),hour=$("#filter-form-"+key).find("#hour").val(),day_of_week=$("#filter-form-"+key).find("#day_of_week").val(),vehicle_class=$("#filter-form-"+key).find("#vehicle_class").val(),e["year"+key]=year,e["month"+key]=month,e["hour"+key]=hour,e["day_of_week"+key]=day_of_week,e["vehicle_class"+key]=vehicle_class),$("#filter-form-"+key+" #transit_mode")&&(year=$("#filter-form-"+key).find("#year").val(),hour=$("#filter-form-"+key).find("#hour").val(),transit_mode=$("#filter-form-"+key).find("#transit_mode").val(),transit_direction=$("#filter-form-"+key).find("#transit_direction").val(),e["year"+key]=year,e["hour"+key]=hour,e["transit_mode"+key]=transit_mode,e["transit_direction"+key]=transit_direction),e["lower"+key]=lowVal,e["upper"+key]=highVal),$("#yearSlider")&&(e.year=$("#yearSlider").val());$("#snapshot_filters").val(JSON.stringify(e))},getUrlParam=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(window.location.href);return null==e?"":e[1].replace("+"," ")};window.console&&console.log||(console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}});