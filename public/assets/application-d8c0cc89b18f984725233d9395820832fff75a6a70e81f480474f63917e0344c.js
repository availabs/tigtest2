/*!
 * jQuery JavaScript Library v1.11.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-05-01T17:42Z
 */
function GatewayMapApp(t,e,n,i,o){var a=t||"map",r=e||{},s=n||{},l=n.default_basemap,u=i.home_map_view_options,c=n.map_bounds||null,d=c,h=n.basemaps||[],p=n.overlays||[],f=null,m={},g=i||{},v=g.area_id,y=g.year_slider_value;if(o&&o.exported_at){var _=new Date(Date.parse(o.exported_at)),b=new Date-_;b>864e5&&(o={})}var w=o||{},x=w.overlays||{},C=!0,S=function(t){p.forEach(function(e){f.LMmap.spin(!0),$.ajax({url:t,data:e}).done(function(t){f.LMmap.spin(!1),t=t||{},t.turn_off_by_default=H(t.name,t.turn_off_by_default),f.addBaseOverlay(t)}).fail(function(t){console.log(t),f.LMmap.spin(!1)})})},k=function(t,e,n){f.LMmap.spin(!0);var i=v!=w.area_id&&G(),o=null;e.value_column_changed||(o=n||x[t]);var a=new GatewayOverlayLayer(f,e,o,i,t);console.log("DATA",a),m[t]=a,i&&-1==v&&c&&(f.setMapBounds(c.xmin,c.ymin,c.xmax,c.ymax),f.LMmap.fitBounds(f.LMbounds)),a.render(),a.renderSymbologyPanel(),f.LMmap.spin(!1)},D=function(t,e,n){f.LMmap.spin(!0);var i={url:e};(0===v||v)&&(i.data=i.data||{},i.data.area_id=v),n&&(i.data=i.data||{},i.data.year=y),$.ajax(i).done(function(e){f.LMmap.spin(!1),E(t,e)}).fail(function(t){console.log(t),show_alert("The attempt to load map data has failed. Please try again."),f.LMmap.spin(!1)})},T=function(t){var e=null;for(var n in m){var i=m[n],o=i.getLayers();for(var a in o){var r=o[a];if(r&&r.layerId===t){e=i;break}}}return e},M=function(t){return m[t]},P=function(t){var e=m[t];e&&e.removeFromMap(),delete m[t]},E=function(t,e){e=e||{};var n;if(!e.value_column_changed){var i=M(t);i&&(n=i.exportParameters())}P(t),k(t,e,n)},I=function(t,e){var n=T(t);n&&n.switchLayerSymbology(t,e)},A=function(t){y=t;for(var e in m){var n=m[e];n.include_year_slider&&n.switchDisplayColumn(t.toString())}},F=function(t,e){$.ajax({url:g.feature_geometry_path,data:{view_name:t,key:e}}).done(function(t){f.zoomToWKT(t)}).fail(function(t){console.log(t)})},O=function(t){return t%1!=0?$.formatNumber(t):$.formatNumber(t,{format:"#,##0",locale:"us"})},N=function(t,e){$.ajax({url:g.tmc_roadname_path,data:{tmc_name:t,view_id:e}}).done(function(t){t&&t.name&&$("#tmcRoadName").html("<b>Road Name: </b><span>"+t.name+"</span>")}).fail(function(t){console.log(t)})},R=function(t,e){$.ajax({url:g.link_roadname_path,data:{link_id:t,view_id:e}}).done(function(t){t&&t.name&&$("#linkRoadName").html("<b>Road Name: </b><span>"+t.name+"</span>")}).fail(function(t){console.log(t)})},B=function(t,e,n){$.ajax({url:g.demo_statistics_path,data:{area_name:t,area_type:e,year:n}}).done(function(t){if(t){$("#allStats").hide(),$("#hideAllStats").show();var e="<div  class='row demo-stats' style='padding: 5px 10px;'><h4>All Statistics for Year "+n+"</h4><div style='max-height: 130px; overflow-y: scroll;'><table class='table table-condensed' style='margin: 0px;'>";t.forEach(function(t){e+="<tr><td style='text-align: right;'><b>"+t.name+"</b></td><td style='text-align:right; padding-left: 10px;'>"+O(t.value)+"</td></tr>"}),e+="</table></div></div>",$(".info-window div:first").append(e)}}).fail(function(t){console.log(t)})},U=function(t,e,n){if(n){$("#allYears").hide(),$("#hideAllYears").show();var i="<div  class='row all-year-stats' style='padding: 5px 10px;'><h4>All Year Statistics for "+e.toUpperCase()+" "+t+"</h4><div style='max-height: 130px; overflow-y: scroll;'><table class='table table-condensed' style='margin: 0px;'>";for(var o in n)"area_type"!=o&&"area"!=o&&(i+="<tr><td style='text-align: right;'><b>"+o+"</b></td><td style='text-align:right; padding-left: 10px;'>"+O(n[o])+"</td></tr>");i+="</table></div></div>",$(".info-window div:first").append(i)}},z=function(){var t=L.control(),e=f.LMmap;t.onAdd=function(){return this._div=L.DomUtil.create("div","info info-window"),this.update(),this._div},t.update=function(e){if($(t.getContainer()).show(),"object"==typeof e){var n="";e.title&&(n="<h4>"+e.title+"</h4>");var i="";switch(e.type){case"taz":i="TAZ ID";break;case"tcc":i="TCC";break;default:var o=(e.type||"").split("_"),a=[];o.forEach(function(t){a.push(t.charAt(0).toUpperCase()+t.slice(1).toLowerCase())}),i=a.join(" "),e.showTMCStats?i="TMC ID":e.showLinkStats&&(i="Link ID")}var r="";e.key&&(r="<b>"+i+"</b>: "+e.key);var s="",l="",u="";if(e.showDemoStats)s+="<button id='allStats' style='margin: 3px;' class='btn btn-xs btn-primary pull-left'>All Stats...</button>",s+="<button id='hideAllStats' style='display: none; margin: 3px;' class='btn btn-xs btn-primary pull-left'>Hide All Stats...</button>",s+="<button id='allYears' style='margin: 3px;' class='btn btn-xs btn-primary pull-left'>All Years...</button>",s+="<button id='hideAllYears' style='display: none; margin: 3px;' class='btn btn-xs btn-primary pull-left'>Hide All Years...</button>";else if(e.showTMCStats){l+="<div id='tmcRoadName' class='row' style='padding: 5px 10px;'></div>";var c={N:"Northbound",S:"Southbound",W:"Westbound",E:"Eastbound"},d=e.attributes.direction,h=c[d]||d;h&&(l+="<div id='tmcDirName' class='row' style='padding: 5px 10px;'><b>Direction: </b><span>"+h+"</span></div>"),console.log(e),N(e.key,e.viewId)}else if(e.showLinkStats){u+="<div id='linkRoadName' class='row' style='padding: 5px 10px;'></div>";var c={N:"Northbound",S:"Southbound",W:"Westbound",E:"Eastbound"},d=e.attributes.direction,h=c[d]||d;h&&(u+="<div id='linkDirName' class='row' style='padding: 5px 10px;'><b>Direction: </b><span>"+h+"</span></div>"),R(e.key,e.viewId)}var p="<button id='zoomToFeature' style='margin: 3px;' title='zoom to' class='btn btn-xs btn-primary fa fa-search-plus pull-right'/>";this._div.innerHTML='<div style="padding: 6px 8px;">'+n+"<div id='baseInfo' class='row' style='padding: 10px 10px 5px 10px;'><span style='font-size: large;'>"+e.value+(e.showTMCStats||e.showLinkStats?" mph":"")+"</span><p>"+r+"</p></div>"+l+u+"<div class='row' style='padding: 5px 10px;'>"+s+p+"</div></div>"}else this._div.innerHTML="";t.properties=e},t.addTo(e);var n=function(){e.dragging.disable(),e.touchZoom.disable(),e.doubleClickZoom.disable(),e.scrollWheelZoom.disable(),e.tap&&e.tap.disable()},i=function(){e.dragging.enable(),e.touchZoom.enable(),e.doubleClickZoom.enable(),e.scrollWheelZoom.enable(),e.tap&&e.tap.enable()},o=t.getContainer();o.addEventListener("mouseover",function(){n()}),o.addEventListener("touchstart",function(){n()}),o.addEventListener("mouseout",function(){i()}),o.addEventListener("touchend",function(){i()}),L.DomEvent.addListener(o,"click",L.DomEvent.stopPropagation).addListener(o,"click",L.DomEvent.preventDefault),e.displayInfo=t,$(o).on("click","#zoomToFeature",function(){t.properties.layerName&&t.properties.key&&F(t.properties.layerName,t.properties.key)}),$(o).on("click","#allStats",function(){$(".demo-stats").length>0?($(".demo-stats").show(),$(this).hide(),$("#hideAllStats").show()):B(t.properties.key,t.properties.type,t.properties.column)}),$(o).on("click","#hideAllStats",function(){$(".demo-stats").length>0&&$(".demo-stats").hide(),$(this).hide(),$("#allStats").show()}),$(o).on("click","#allYears",function(){$(".all-year-stats").length>0?($(".all-year-stats").show(),$(this).hide(),$("#hideAllYears").show()):U(t.properties.key,t.properties.type,t.properties.attributes)}),$(o).on("click","#hideAllYears",function(){$(".all-year-stats").length>0&&$(".all-year-stats").hide(),$(this).hide(),$("#allYears").show()})},j=function(){var t=w.map||{};l=t.basemap||l,d=t.bounds||d},H=function(t,e){var n=w.map||{};return n.hasOwnProperty("visible_baseoverlays")&&(e=!(n.visible_baseoverlays.indexOf(t)>=0)),e},W=function(){var t=w.yearSlider||{};t.hasYearSlider&&(y=t.year)},V=function(){var t=w.overlays||{};for(var e in t)e!=g.id&&$("#layers .checkbox[data-view-id="+e+"] input").attr("checked",!0).change()},q=(function(){j(),W();var t=t||{};t[a]=Object.create(CsLeaflet.Leaflet),f=t[a],f.init(a,r),f.LMmap.removeControl(f.LMmap.attributionControl);var e=d;e&&f.setMapBounds(e.xmin,e.ymin,e.xmax,e.ymax),f.showMap(),f.LMmap.on("updateDisplayInfo",function(t){var e=this.displayInfo;e instanceof L.Control||(z(),e=this.displayInfo),e.update(t.info)}),f.LMmap.on("click",function(t){t.originalEvent.preventDefault()}),f.addBasemaps(h,l),S(g.base_overlay_path),D(g.id,g.data_overlay_path),f.addZoomSliderControl(),f.addFullscreenControl(document.getElementById("mapContainer")),f.addNavbar({home_center:new L.latLng(u.center_x,u.center_y),home_zoom:u.zoom}),f.addSidebar("sidebar"),s.study_area_control_enabled&&(f.addStudyAreaControl(),f.LMmap.on("draw:created",function(t){var e=t.layer;f.studyAreaEditingLayer&&(f.studyAreaEditingLayer.clearLayers(),f.studyAreaEditingLayer.addLayer(e),$("#studyAreaModal").modal("show"))})),f.registerAddOverlayEvent(),f.registerRemoveOverlayEvent()}(),function(){return f}),G=function(){for(var t in m)return!1;return!0},Y=function(){return m},Z=function(t,e){var n=M(t);if(n){n.setViewAreaBoundaryVisibility(e);var i=n.getLayers();for(var o in i){var a=i[o];a&&(a.showAreaBoundary=e,a.setStyle(a.options.style))}}},K=function(){var t=!1;for(var e in m)if(m[e].include_year_slider){t=!0;break}return t},J=function(){var t=f.exportParameters(),e={};for(var n in m)e[n]=m[n].exportParameters();var i={hasYearSlider:K(),year:y},o={area_id:v,map:t,yearSlider:i,overlays:e};return o},X=function(){return C},Q=function(){C=!1},te=function(t,e){console.log("resetting symbology");var n=M(t);n&&n.resetViewSymbology(e)},ee=function(t,e){console.log("updating symbology");var n=M(t);n&&n.updateViewSymbology(e)},ne=function(t,e){var n=M(t);n&&n.searchMap(e)},ie=function(){var t=null,e=q().studyAreaEditingLayer;if(e){var n=e.getLayers();n.length>0&&(t=(new Wkt.Wkt).fromObject(n[0]).write())}return t},oe=function(){var t=q().studyAreaEditingLayer;t&&t.clearLayers()};return{getMap:q,exportParameters:J,isCaching:X,disableCache:Q,getDataOverlays:Y,addDataOverlay:k,getViewLayer:M,removeViewLayer:P,updateViewLayer:E,checkYearSlider:K,requestDataOverlayConfigs:D,processDataOverlaysFromSnapshot:V,switchYearColumn:A,switchLayerSymbology:I,updateViewSymbology:ee,resetViewSymbology:te,showAreaBoundary:Z,searchViewLayer:ne,getStudyAreaWkt:ie,clearStudyArea:oe}}function GatewayOverlayLayer(t,e,n,i,o){_layerSnapshotParams=n||{};var a=this;e=e||{};var r=e.name,s=e.data||[],l=e.referenceLayerConfig||{};l.is_demo=e.is_demo,l.is_tmc=e.is_tmc,l.is_link=e.is_link,l.showAreaBoundary=_layerSnapshotParams.hasOwnProperty("showAreaBoundary")?_layerSnapshotParams.showAreaBoundary:e.showAreaBoundary,a.showAreaBoundary=l.showAreaBoundary;var u=e.referenceColumn||"",c=e.zoomExtentWKT||null,d=e.symbologies||[],h=[];d.forEach(function(t){h.push(GatewayMapUtil.cloneObject(t))});var p=function(){return d.length>0?d[0]:{}},f=p(),m=function(){return d},g=function(t){d=t||[],h=[],d.forEach(function(t){h.push(GatewayMapUtil.cloneObject(t))}),_()},v=function(t){d.push(t),h.push(GatewayMapUtil.cloneObject(t))},y=function(t){var e=b(t),n=d.indexOf(e);n>=0&&d.slice(n,1);var i=(w(t),h.indexOf(e));i>=0&&h.slice(i,1),_()},_=function(){a.symbology=p(),W(a.symbology)},b=function(t){for(var e=null,n=m(),i=0,o=n.length;o>i;i++)if(n[i].subject===t){e=n[i];break}return e},w=function(t){for(var e=null,n=h,i=0,o=n.length;o>i;i++)if(n[i].subject===t){e=n[i];break}return e},x=function(t){for(var e=null,n=m(),i=0,o=n.length;o>i;i++)if(n[i].id===t){e=n[i];break}return e};if(_layerSnapshotParams.symbology){var C=_layerSnapshotParams.symbology[r]||{},S=b(C.subject);S&&(f=S);var k=C.columnIndex;k==f.default_column_index||!k&&0!==k||(f.default_column_index=k),C.symbology_type&&(f.symbology_type=C.symbology_type),C.color_scheme&&(f.color_scheme=C.color_scheme)}_layerSnapshotParams.visibility&&_layerSnapshotParams.visibility[r]===!1&&(l.turn_off_by_default=!0);var D=function(){return f.columns||[]},T=function(){var t=D(),e=f.default_column_index;return e||0!=t.length?e?e:t[0].index:null},M=function(t,e){if(!t||!e)return null;var n=null,i=E(e);return i&&"object"==typeof i&&(n=t[i.column]),n},P=function(t){function e(t,e){return t-e}var n=t.symbology,i=s.features;if(!(i instanceof Array)||0===i.length)return null;var o=D();switch(n.symbology_type){case"geometric_breaks":case"natural_breaks":for(var a,r,l=0,u=i.length;u>l;l++)for(var c=i[l].properties,d=0,h=o.length;h>d;d++){var p=o[d].column,m=parseFloat(c[p]);isNaN(m)||(("number"!=typeof a||a>m)&&(a=m),("number"!=typeof r||m>r)&&(r=m))}"number"==typeof a&&"number"==typeof r&&(n.minValue=a,n.maxValue=r);break;case"quantile_breaks":for(var g=[],l=0,u=i.length;u>l;l++)for(var c=i[l].properties,d=0,h=o.length;h>d;d++){var p=o[d].column,m=parseFloat(c[p]);isNaN(m)||g.push(m)}var v={},y=[],_=g.length;for(l=0;_>l;++l){var b=g[l];v[b]||(y.push(b),v[b]=0),++v[b]}y=y.sort(e);var w=[];y.forEach(function(t){w.push([t,v[t]])}),f.values={totalCount:_,minValue:y[0],maxValue:y[y.length-1],valueCounts:w}}},E=function(t){for(var e=null,n=D(),i=0,o=n.length;o>i;i++){var a=n[i];if(a.index===t){e=a;break}}return e},I=function(e){var n=e.displayColumnIndex,i=E(n),o="";i&&(o=i.title),t.updateLayerDisplayProperties(e,"displayTitle",o),t.updateLayerDisplayProperties(e,"displayLabelPropertyName",u),t.renderThematicColor(e,f)},A=function(e){if("Geojson"===l.type)P(e),t.prepareLayerSymbologyValues(e,e.symbology||f),I(e);else{if(t.calculateTileFeatureValueBounds(e),t.prepareLayerSymbologyValues(e,e.symbology||f),f.show_legend){var n=m();t.addColorGradientLegend(e,n,l.turn_off_by_default)}e.setStyle(e.options.style)}},F=function(e){var n=t.getLayerControl();n&&n.removeLayer(e),t.LMmap.removeLayer(e),t.deleteLayerLegendContainer(e.layerId),t.deleteLayerAttribution(e.layerId)},O=function(){var t=this.getLayers();if(t)for(var e in t){var n=t[e];n&&F(n)}delete this},N=function(e){if(e.symbology=f,a.layer=e,t.setAreaColumnNameForLayer(e,u),f.show_legend){var n=m();t.addColorGradientLegend(e,n,l.turn_off_by_default)}if("Geojson"===l.type){var i=T();t.setDisplayColumnIndexForLayer(e,i),l.showLabel&&t.showLabel(e,u,l.labelOptions),t.setValueLocaterForLayer(e,M),A(e),t.registerEventsForLayer(e,l)}},R=function(t){if("PBF_TILE"===l.type){var e=t._selectedFeature;e&&(e.deselect(),e.select())}else console.log("TODO: feature popup change along with column change for layer type "+l.type)},B=function(e){var n=G();for(var i in n){var o=n[i];if(o&&o.symbology){var a=t.getColumnIndex(o.symbology.columns,e);t.setDisplayColumnIndexForLayer(o,a),"Geojson"===l.type?I(o):o.setStyle(o.options.style),R(o)}}},U=function(t,e){if(f=x(e)){var n=G()[t];n.displayColumnIndex=T(f),z(n,f),R(n)}},z=function(n,i){if(n&&i)if(e.addCountFactPoint){var o=n._map?!0:!1;F(n),a.layer=t.addCountFactPoints(s,i,e.baseUrl||"",r,o,e.request_data,e.hub_bound_file_path)}else n.symbology=i,t.setDisplayColumnIndexForLayer(n,i.default_column_index),A(n)},j=function(){var t=e.showAreaBoundary;_layerSnapshotParams&&_layerSnapshotParams.hasOwnProperty("showAreaBoundary")&&(t=_layerSnapshotParams.showAreaBoundary);var n="/views/"+o+"/symbology",i="POLYGON"===e.geometry_type||e.referenceLayerConfig&&"POLYGON"===e.referenceLayerConfig.geometry_type,a={};i&&(a.show_area_boundary=t);var r=null,s=G();for(var l in s){r=s[l].symbology;break}r&&(a.symbology_subject=r.subject,a.color_scheme=r.color_scheme),$.ajax({url:n,method:"POST",data:a})},H=function(t){var e=G();for(var n in e)z(e[n],w(t));j()},W=function(t){t=t||{};var e=b(t.subject);if(e){e.symbology_type=t.symbology_type,e.color_scheme=t.color_scheme;var n=G();for(var i in n)z(n[i],e)}},V=function(e){if(e)try{var n=(new Wkt.Wkt).read(e),i=L.latLng(n[0][0].y,n[0][0].x),o=L.latLng(n[0][2].y,n[0][2].x),a=L.latLngBounds(i,o);t.LMmap.fitBounds(a)}catch(r){console.log(r)}},q=function(){i&&c&&V(c),l.referenceColumn=u,l.symbology=f,l.data=s,r&&(l.name=r),e.addRTPWkt?a.layer=t.addRTPWkt(e.name,s,f,e.baseUrl||"",e.zoom_to_rtp_id||null,_layerSnapshotParams.visibility):e.addCountFactPoint?a.layer=t.addCountFactPoints(s,f,e.baseUrl||"",r,(_layerSnapshotParams.visibility||{})[r],e.request_data,e.hub_bound_file_path):t.addOverlayLayer(l,N)},G=function(){var t=a.layer;t instanceof Array||(t=[t]);var e={};return t.forEach(function(t){t&&(e[t.layerId]=t)}),e},Y=function(t){return a.showAreaBoundary=t},Z=function(){var t={},n={},i=G();for(var o in i){var r=i[o];r&&(t[r.name]={subject:r.symbology?r.symbology.subject:"",columnIndex:r.displayColumnIndex,symbology_type:r.symbology?r.symbology.symbology_type:null,color_scheme:r.symbology?r.symbology.color_scheme:null},n[r.name]=r._map?!0:!1)}return{symbology:t,visibility:n,include_year_slider:e.include_year_slider||!1,showAreaBoundary:a.showAreaBoundary}},K=function(n){if(n=(n||"").toLowerCase(),e.addRTPWkt){var i=!1;if(""!=n){var o=this.getLayers();for(var a in o)for(var r=o[a],s=r.getLayers(),u=0,c=s.length;c>u;u++){var d=s[u],h=d.properties;if(h){var p=h.hasOwnProperty("rtp_id")?h.rtp_id:h.tip_id;if((p||"").toLowerCase().indexOf(n)>=0||(h.description||"").toLowerCase().indexOf(n)>=0){t.zoomToWKT(h.geography),d.openPopup(),i=!0;break}}}}i||t.closePopup()}else if("Geojson"===l.type)console.log("geojson layer search to be implemented");else if("PBF_TILE"===l.type){var f=l.tileName,m=l.geomReferenceColumn,o=this.getLayers();for(var a in o){var r=o[a];if(r._selectedFeature&&r._selectedFeature.deselect(),""!=n){var g=r.layers[f];if(g)for(var p in g.features){var d=g.features[p],v=d.properties[m].toString().toLowerCase();if(v==n){d.select(),$("#zoomToFeature").click();break}}}}}};return{include_year_slider:e.include_year_slider||!1,render:q,switchDisplayColumn:B,switchLayerSymbology:U,resetViewSymbology:H,addSymbology:v,deleteSymbology:y,resetSymbologyList:g,renderSymbologyPanel:j,updateViewSymbology:W,setViewAreaBoundaryVisibility:Y,removeFromMap:O,getLayers:G,searchMap:K,exportParameters:Z}}function show_alert(t,e){var n="alert-"+(e||"danger");$("#messages").html('<div class="alert '+n+' fade in"><a class="close" data-dismiss="alert">x</a><div id="flash_notice">'+t+"</div></div>")}function hide_alert(){$("#flash_notice").parents(".alert").hide()}function toggleShowMoreLink(){$("#source_views, #contributors, #users, #librarians").on("shown.bs.collapse hidden.bs.collapse",function(){$(this).siblings("a").text($(this).hasClass("in")?"show less":"show more")})}function setupTreeview(t){$.get("/sources/state.json",function(e){if(e){for(console.log("setupTreeview",t,e),toClick=[],i=0;i<e.length;i++)toClick.push($("#"+e[i]));toClick.forEach(function(t){t.click()}),setTimeout(function(){t&&(parentSource=$("#view"+t).closest("ul").siblings(".source-name"),parentSource.hasClass("collapsed")&&parentSource.click(),$("#view"+t).click())},200)}}),$(".btn-link").click(function(){existing=$(this).html(),prevClick=$(".btn-link:has(strong)"),null==existing.match(/<\/?(strong|u)>/g)&&(prevClick.length>0&&(prevClickHtml=prevClick.html(),$(".btn-link:has(strong)").html(prevClickHtml.replace(/<\/?(strong|u)>/g,"")),$(this).html("<strong><u>"+existing+"</u></strong>")),$(this).html("<strong><u>"+existing+"</u></strong>"),$(this).click())}),$("ul.tree").on("shown.bs.collapse hidden.bs.collapse",function(){for(header=$(this).parent().children("h4"),txt=header.text(),header.html($(this).hasClass("in")?header.has("em").length>0?"<strong><em>"+txt.replace(/(\.\.\.)/,"")+"</em></strong>":"<strong>"+txt.replace(/(\.\.\.)/,"")+"</strong>":null==txt.match(/(\.\.\.)/)?header.has("em").length>0?"<strong><em>"+txt+"...</em></strong>":"<strong>"+txt+"...</strong>":header.has("em").length>0?"<strong><em>"+txt+"</em></strong>":"<strong>"+txt+"</strong>"),expanded=$("h4:not(.collapsed)"),dataToSend={state:[]},i=0;i<expanded.length;i++)dataToSend.state.push($(expanded)[i].id);currentState=dataToSend,$.ajax({type:"patch",url:"/sources/update_state",data:currentState,dataType:"script"})})}function expandAllSources(){$(".treeview h4.source-name.collapsed").click()}function collapseAllSources(){$(".treeview h4.source-name:not(.collapsed)").click()}function fadeModal(t,e,n){modal=$("#"+t),form=modal.find("form"),modalBody=modal.find(".modal-body"),modalContent=modal.find(".modal-content"),successMsg="<div id='successMsg' class='text-center'><label>"+e+" saved.</label></div>",n?(detachedBody=modalBody.detach(),modalContent.append(successMsg)):(form.toggle(),modalBody.prepend(successMsg)),setTimeout(function(){modal.modal("hide")},2e3),modal.on("hidden.bs.modal",function(t){n?modalContent.empty().append(detachedBody):(form.toggle().trigger("reset"),form.find("select.multiselect").multiselect("refresh"),$("#successMsg").remove()),$(this).off(t)})}function sortAlpha(t,e){return crossBrowserA=t.textContent||t.innerText,crossBrowserB=e.textContent||e.innerText,crossBrowserA.toLowerCase()>crossBrowserB.toLowerCase()?1:-1}function drawGoogleChart(t,e,n){function i(){a=google.visualization.arrayToDataTable(t),o="pie"==n?new google.visualization.PieChart(document.getElementById(e)):new google.visualization.BarChart(document.getElementById(e)),o.draw(a,r)}var o,a,r;google.load("visualization","1",{packages:["corechart"]}),google.setOnLoadCallback(i),$(function(){$(window).resize(function(){o.draw(a,r)})})}function createPopover(t){$(t).popover({html:!0,container:"body",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><p></p></div></div></div>',trigger:"manual focus",animation:!1,placement:"auto"}).on("show.bs.popover",function(){$(t).not(this).popover("hide")}).on("mouseenter",function(){var t=this;$(this).popover("show"),$(".popover").on("mouseleave",function(){$(t).popover("hide")})}).on("mouseleave",function(){var t=this;setTimeout(function(){$(".popover:hover").length||$(t).popover("hide")},0)})}function showSymbologySaveAsDialog(t){var e=$("#symbologySaveAsDialog"),n=e.find("form");n.find("input[name=base_symbology_id]").val(t.base_symbology_id),n.find("input[name=color_schemes]").val(JSON.stringify(t.color_schemes)),e.modal("show")}function makeColumnsInteractive(){$(document).on("click",".remove_col",function(){var t=$(this).parent().index(),e=$("#column_data tr td:nth-child("+(t+2)+")"),n=$("tr th:nth-child("+(t+2)+")");e.remove(),n.remove()}).on("click",".add_col",function(){var t=$(this).parent().index(),e=$("#column_data tr td:nth-child("+(t+1)+")"),n=$("tr th:nth-child("+(t+1)+")"),i="<td><input class='string required form-control-mock' name='view[columns][new_col_"+(t+2)+"]' type='text' value=''></td>",o="<th class='text-center'><a class='add_col' style='padding-right:5px;'><div class='fa fa-plus'></div></a><a class='remove_col'><div class='fa fa-minus'></div></a></th>",a="<td class='text-center'><label class='checkbox'><input class='boolean optional' name='view[value_columns][new_col_"+(t+2)+"]' type='checkbox' value='0'></label></td>";0==e.length?(e=$("#column_data tr td:nth-child("+(t+2)+")"),0==e.length?(e=$("#column_data tr th:gt(0)"),e.after(i),4==e.length&&e.last().siblings().first().replaceWith(a)):(e.before(i),4==e.length&&e.last().prev("td").replaceWith(a)),n.first().after(o)):(clone=e.clone(),$.each(e,function(t,e){clonedInput=$(clone[t]).find("input"),clonedName=$(clonedInput).attr("name").replace(/(col_)\d+/g,"new_col_"+Math.floor(1e6*Math.random())),cleanInput=clonedInput.is(":checkbox")?clonedInput.removeAttr("checked").attr("name",clonedName).end():clonedInput.val("").attr("name",clonedName).end(),$(e).after(cleanInput)}),n.after(o))})}/*!
 * Bootstrap v3.3.4 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if(function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=oe.type(t);return"function"===n||oe.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function i(t,e,n){if(oe.isFunction(e))return oe.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return oe.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(he.test(e))return oe.filter(e,t,n);e=oe.filter(e,t)}return oe.grep(t,function(t){return oe.inArray(t,e)>=0!==n})}function o(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function a(t){var e=be[t]={};return oe.each(t.match(_e)||[],function(t,n){e[n]=!0}),e}function r(){fe.addEventListener?(fe.removeEventListener("DOMContentLoaded",s,!1),t.removeEventListener("load",s,!1)):(fe.detachEvent("onreadystatechange",s),t.detachEvent("onload",s))}function s(){(fe.addEventListener||"load"===event.type||"complete"===fe.readyState)&&(r(),oe.ready())}function l(t,e,n){if(void 0===n&&1===t.nodeType){var i="data-"+e.replace(Se,"-$1").toLowerCase();if(n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Le.test(n)?oe.parseJSON(n):n}catch(o){}oe.data(t,e,n)}else n=void 0}return n}function u(t){var e;for(e in t)if(("data"!==e||!oe.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function c(t,e,n,i){if(oe.acceptData(t)){var o,a,r=oe.expando,s=t.nodeType,l=s?oe.cache:t,u=s?t[r]:t[r]&&r;if(u&&l[u]&&(i||l[u].data)||void 0!==n||"string"!=typeof e)return u||(u=s?t[r]=Y.pop()||oe.guid++:r),l[u]||(l[u]=s?{}:{toJSON:oe.noop}),("object"==typeof e||"function"==typeof e)&&(i?l[u]=oe.extend(l[u],e):l[u].data=oe.extend(l[u].data,e)),a=l[u],i||(a.data||(a.data={}),a=a.data),void 0!==n&&(a[oe.camelCase(e)]=n),"string"==typeof e?(o=a[e],null==o&&(o=a[oe.camelCase(e)])):o=a,o}}function d(t,e,n){if(oe.acceptData(t)){var i,o,a=t.nodeType,r=a?oe.cache:t,s=a?t[oe.expando]:oe.expando;if(r[s]){if(e&&(i=n?r[s]:r[s].data)){oe.isArray(e)?e=e.concat(oe.map(e,oe.camelCase)):e in i?e=[e]:(e=oe.camelCase(e),e=e in i?[e]:e.split(" ")),o=e.length;for(;o--;)delete i[e[o]];if(n?!u(i):!oe.isEmptyObject(i))return}(n||(delete r[s].data,u(r[s])))&&(a?oe.cleanData([t],!0):ne.deleteExpando||r!=r.window?delete r[s]:r[s]=null)}}}function h(){return!0}function p(){return!1}function f(){try{return fe.activeElement}catch(t){}}function m(t){var e=Ne.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function g(t,e){var n,i,o=0,a=typeof t.getElementsByTagName!==Ce?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==Ce?t.querySelectorAll(e||"*"):void 0;if(!a)for(a=[],n=t.childNodes||t;null!=(i=n[o]);o++)!e||oe.nodeName(i,e)?a.push(i):oe.merge(a,g(i,e));return void 0===e||e&&oe.nodeName(t,e)?oe.merge([t],a):a}function v(t){Pe.test(t.type)&&(t.defaultChecked=t.checked)}function y(t,e){return oe.nodeName(t,"table")&&oe.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function _(t){return t.type=(null!==oe.find.attr(t,"type"))+"/"+t.type,t}function b(t){var e=Ge.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function w(t,e){for(var n,i=0;null!=(n=t[i]);i++)oe._data(n,"globalEval",!e||oe._data(e[i],"globalEval"))}function x(t,e){if(1===e.nodeType&&oe.hasData(t)){var n,i,o,a=oe._data(t),r=oe._data(e,a),s=a.events;if(s){delete r.handle,r.events={};for(n in s)for(i=0,o=s[n].length;o>i;i++)oe.event.add(e,n,s[n][i])}r.data&&(r.data=oe.extend({},r.data))}}function C(t,e){var n,i,o;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!ne.noCloneEvent&&e[oe.expando]){o=oe._data(e);for(i in o.events)oe.removeEvent(e,i,o.handle);e.removeAttribute(oe.expando)}"script"===n&&e.text!==t.text?(_(e).text=t.text,b(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),ne.html5Clone&&t.innerHTML&&!oe.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Pe.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function L(e,n){var i,o=oe(n.createElement(e)).appendTo(n.body),a=t.getDefaultComputedStyle&&(i=t.getDefaultComputedStyle(o[0]))?i.display:oe.css(o[0],"display");return o.detach(),a}function S(t){var e=fe,n=Qe[t];return n||(n=L(t,e),"none"!==n&&n||(Xe=(Xe||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Xe[0].contentWindow||Xe[0].contentDocument).document,e.write(),e.close(),n=L(t,e),Xe.detach()),Qe[t]=n),n}function k(t,e){return{get:function(){var n=t();if(null!=n)return n?void delete this.get:(this.get=e).apply(this,arguments)}}}function D(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,o=pn.length;o--;)if(e=pn[o]+n,e in t)return e;return i}function T(t,e){for(var n,i,o,a=[],r=0,s=t.length;s>r;r++)i=t[r],i.style&&(a[r]=oe._data(i,"olddisplay"),n=i.style.display,e?(a[r]||"none"!==n||(i.style.display=""),""===i.style.display&&Te(i)&&(a[r]=oe._data(i,"olddisplay",S(i.nodeName)))):(o=Te(i),(n&&"none"!==n||!o)&&oe._data(i,"olddisplay",o?n:oe.css(i,"display"))));for(r=0;s>r;r++)i=t[r],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?a[r]||"":"none"));return t}function M(t,e,n){var i=un.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function P(t,e,n,i,o){for(var a=n===(i?"border":"content")?4:"width"===e?1:0,r=0;4>a;a+=2)"margin"===n&&(r+=oe.css(t,n+De[a],!0,o)),i?("content"===n&&(r-=oe.css(t,"padding"+De[a],!0,o)),"margin"!==n&&(r-=oe.css(t,"border"+De[a]+"Width",!0,o))):(r+=oe.css(t,"padding"+De[a],!0,o),"padding"!==n&&(r+=oe.css(t,"border"+De[a]+"Width",!0,o)));return r}function E(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,a=tn(t),r=ne.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,a);if(0>=o||null==o){if(o=en(t,e,a),(0>o||null==o)&&(o=t.style[e]),on.test(o))return o;i=r&&(ne.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+P(t,e,n||(r?"border":"content"),i,a)+"px"}function I(t,e,n,i,o){return new I.prototype.init(t,e,n,i,o)}function A(){return setTimeout(function(){fn=void 0}),fn=oe.now()}function F(t,e){var n,i={height:t},o=0;for(e=e?1:0;4>o;o+=2-e)n=De[o],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function O(t,e,n){for(var i,o=(bn[e]||[]).concat(bn["*"]),a=0,r=o.length;r>a;a++)if(i=o[a].call(n,e,t))return i}function N(t,e,n){var i,o,a,r,s,l,u,c,d=this,h={},p=t.style,f=t.nodeType&&Te(t),m=oe._data(t,"fxshow");n.queue||(s=oe._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,oe.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=oe.css(t,"display"),c="none"===u?oe._data(t,"olddisplay")||S(t.nodeName):u,"inline"===c&&"none"===oe.css(t,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==S(t.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",ne.shrinkWrapBlocks()||d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in e)if(o=e[i],gn.exec(o)){if(delete e[i],a=a||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!m||void 0===m[i])continue;f=!0}h[i]=m&&m[i]||oe.style(t,i)}else u=void 0;if(oe.isEmptyObject(h))"inline"===("none"===u?S(t.nodeName):u)&&(p.display=u);else{m?"hidden"in m&&(f=m.hidden):m=oe._data(t,"fxshow",{}),a&&(m.hidden=!f),f?oe(t).show():d.done(function(){oe(t).hide()}),d.done(function(){var e;oe._removeData(t,"fxshow");for(e in h)oe.style(t,e,h[e])});for(i in h)r=O(f?m[i]:0,i,d),i in m||(m[i]=r.start,f&&(r.end=r.start,r.start="width"===i||"height"===i?1:0))}}function R(t,e){var n,i,o,a,r;for(n in t)if(i=oe.camelCase(n),o=e[i],a=t[n],oe.isArray(a)&&(o=a[1],a=t[n]=a[0]),n!==i&&(t[i]=a,delete t[n]),r=oe.cssHooks[i],r&&"expand"in r){a=r.expand(a),delete t[i];for(n in a)n in t||(t[n]=a[n],e[n]=o)}else e[i]=o}function B(t,e,n){var i,o,a=0,r=_n.length,s=oe.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=fn||A(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,a=1-i,r=0,l=u.tweens.length;l>r;r++)u.tweens[r].run(a);return s.notifyWith(t,[u,a,n]),1>a&&l?n:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:oe.extend({},e),opts:oe.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:fn||A(),duration:n.duration,tweens:[],createTween:function(e,n){var i=oe.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)u.tweens[n].run(1);return e?s.resolveWith(t,[u,e]):s.rejectWith(t,[u,e]),this}}),c=u.props;for(R(c,u.opts.specialEasing);r>a;a++)if(i=_n[a].call(u,t,c,u.opts))return i;return oe.map(c,O,u),oe.isFunction(u.opts.start)&&u.opts.start.call(t,u),oe.fx.timer(oe.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function U(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,a=e.toLowerCase().match(_e)||[];if(oe.isFunction(n))for(;i=a[o++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function z(t,e,n,i){function o(s){var l;return a[s]=!0,oe.each(t[s]||[],function(t,s){var u=s(e,n,i);return"string"!=typeof u||r||a[u]?r?!(l=u):void 0:(e.dataTypes.unshift(u),o(u),!1)}),l}var a={},r=t===Wn;return o(e.dataTypes[0])||!a["*"]&&o("*")}function j(t,e){var n,i,o=oe.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&oe.extend(!0,t,n),t}function $(t,e,n){for(var i,o,a,r,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(r in s)if(s[r]&&s[r].test(o)){l.unshift(r);break}if(l[0]in n)a=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){a=r;break}i||(i=r)}a=a||i}return a?(a!==l[0]&&l.unshift(a),n[a]):void 0}function H(t,e,n,i){var o,a,r,s,l,u={},c=t.dataTypes.slice();if(c[1])for(r in t.converters)u[r.toLowerCase()]=t.converters[r];for(a=c.shift();a;)if(t.responseFields[a]&&(n[t.responseFields[a]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(r=u[l+" "+a]||u["* "+a],!r)for(o in u)if(s=o.split(" "),s[1]===a&&(r=u[l+" "+s[0]]||u["* "+s[0]])){r===!0?r=u[o]:u[o]!==!0&&(a=s[0],c.unshift(s[1]));break}if(r!==!0)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(d){return{state:"parsererror",error:r?d:"No conversion from "+l+" to "+a}}}return{state:"success",data:e}}function W(t,e,n,i){var o;if(oe.isArray(e))oe.each(e,function(e,o){n||Yn.test(t)?i(t,o):W(t+"["+("object"==typeof o?e:"")+"]",o,n,i)});else if(n||"object"!==oe.type(e))i(t,e);else for(o in e)W(t+"["+o+"]",e[o],n,i)}function V(){try{return new t.XMLHttpRequest}catch(e){}}function q(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function G(t){return oe.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var Y=[],Z=Y.slice,K=Y.concat,J=Y.push,X=Y.indexOf,Q={},te=Q.toString,ee=Q.hasOwnProperty,ne={},ie="1.11.1",oe=function(t,e){return new oe.fn.init(t,e)},ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,re=/^-ms-/,se=/-([\da-z])/gi,le=function(t,e){return e.toUpperCase()};oe.fn=oe.prototype={jquery:ie,constructor:oe,selector:"",length:0,toArray:function(){return Z.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:Z.call(this)},pushStack:function(t){var e=oe.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return oe.each(this,t,e)},map:function(t){return this.pushStack(oe.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(Z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:Y.sort,splice:Y.splice},oe.extend=oe.fn.extend=function(){var t,e,n,i,o,a,r=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof r&&(u=r,r=arguments[s]||{},s++),"object"==typeof r||oe.isFunction(r)||(r={}),s===l&&(r=this,s--);l>s;s++)if(null!=(o=arguments[s]))for(i in o)t=r[i],n=o[i],r!==n&&(u&&n&&(oe.isPlainObject(n)||(e=oe.isArray(n)))?(e?(e=!1,a=t&&oe.isArray(t)?t:[]):a=t&&oe.isPlainObject(t)?t:{},r[i]=oe.extend(u,a,n)):void 0!==n&&(r[i]=n));return r},oe.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===oe.type(t)},isArray:Array.isArray||function(t){return"array"===oe.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!oe.isArray(t)&&t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==oe.type(t)||t.nodeType||oe.isWindow(t))return!1;try{if(t.constructor&&!ee.call(t,"constructor")&&!ee.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ne.ownLast)for(e in t)return ee.call(t,e);for(e in t);return void 0===e||ee.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Q[te.call(t)]||"object":typeof t},globalEval:function(e){e&&oe.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(re,"ms-").replace(se,le)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var o,a=0,r=t.length,s=n(t);if(i){if(s)for(;r>a&&(o=e.apply(t[a],i),o!==!1);a++);else for(a in t)if(o=e.apply(t[a],i),o===!1)break}else if(s)for(;r>a&&(o=e.call(t[a],a,t[a]),o!==!1);a++);else for(a in t)if(o=e.call(t[a],a,t[a]),o===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(ae,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?oe.merge(i,"string"==typeof t?[t]:t):J.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(X)return X.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;n>i;)t[o++]=e[i++];if(n!==n)for(;void 0!==e[i];)t[o++]=e[i++];return t.length=o,t},grep:function(t,e,n){for(var i,o=[],a=0,r=t.length,s=!n;r>a;a++)i=!e(t[a],a),i!==s&&o.push(t[a]);return o},map:function(t,e,i){var o,a=0,r=t.length,s=n(t),l=[];if(s)for(;r>a;a++)o=e(t[a],a,i),null!=o&&l.push(o);else for(a in t)o=e(t[a],a,i),null!=o&&l.push(o);return K.apply([],l)},guid:1,proxy:function(t,e){var n,i,o;return"string"==typeof e&&(o=t[e],e=t,t=o),oe.isFunction(t)?(n=Z.call(arguments,2),i=function(){return t.apply(e||this,n.concat(Z.call(arguments)))},i.guid=t.guid=t.guid||oe.guid++,i):void 0},now:function(){return+new Date},support:ne}),oe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Q["[object "+e+"]"]=e.toLowerCase()});var ue=/*!
 * Sizzle CSS Selector Engine v1.10.19
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-04-18
 */
function(t){function e(t,e,n,i){var o,a,r,s,l,u,d,p,f,m;if((e?e.ownerDocument||e:z)!==I&&E(e),e=e||I,n=n||[],!t||"string"!=typeof t)return n;if(1!==(s=e.nodeType)&&9!==s)return[];if(F&&!i){if(o=ye.exec(t))if(r=o[1]){if(9===s){if(a=e.getElementById(r),!a||!a.parentNode)return n;if(a.id===r)return n.push(a),n}else if(e.ownerDocument&&(a=e.ownerDocument.getElementById(r))&&B(e,a)&&a.id===r)return n.push(a),n}else{if(o[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((r=o[3])&&w.getElementsByClassName&&e.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(r)),n}if(w.qsa&&(!O||!O.test(t))){if(p=d=U,f=e,m=9===s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(u=S(t),(d=e.getAttribute("id"))?p=d.replace(be,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=u.length;l--;)u[l]=p+h(u[l]);f=_e.test(t)&&c(e.parentNode)||e,m=u.join(",")}if(m)try{return Q.apply(n,f.querySelectorAll(m)),n}catch(g){}finally{d||e.removeAttribute("id")}}}return D(t.replace(le,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>x.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[U]=!0,t}function o(t){var e=I.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function a(t,e){for(var n=t.split("|"),i=t.length;i--;)x.attrHandle[n[i]]=e}function r(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Y)-(~t.sourceIndex||Y);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return i(function(e){return e=+e,i(function(n,i){for(var o,a=t([],n.length,e),r=a.length;r--;)n[o=a[r]]&&(n[o]=!(i[o]=n[o]))})})}function c(t){return t&&typeof t.getElementsByTagName!==G&&t}function d(){}function h(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function p(t,e,n){var i=e.dir,o=n&&"parentNode"===i,a=$++;return e.first?function(e,n,a){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,a)}:function(e,n,r){var s,l,u=[j,a];if(r){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,r))return!0}else for(;e=e[i];)if(1===e.nodeType||o){if(l=e[U]||(e[U]={}),(s=l[i])&&s[0]===j&&s[1]===a)return u[2]=s[2];if(l[i]=u,u[2]=t(e,n,r))return!0}}}function f(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function m(t,n,i){for(var o=0,a=n.length;a>o;o++)e(t,n[o],i);return i}function g(t,e,n,i,o){for(var a,r=[],s=0,l=t.length,u=null!=e;l>s;s++)(a=t[s])&&(!n||n(a,i,o))&&(r.push(a),u&&e.push(s));return r}function v(t,e,n,o,a,r){return o&&!o[U]&&(o=v(o)),a&&!a[U]&&(a=v(a,r)),i(function(i,r,s,l){var u,c,d,h=[],p=[],f=r.length,v=i||m(e||"*",s.nodeType?[s]:s,[]),y=!t||!i&&e?v:g(v,h,t,s,l),_=n?a||(i?t:f||o)?[]:r:y;if(n&&n(y,_,s,l),o)for(u=g(_,p),o(u,[],s,l),c=u.length;c--;)(d=u[c])&&(_[p[c]]=!(y[p[c]]=d));if(i){if(a||t){if(a){for(u=[],c=_.length;c--;)(d=_[c])&&u.push(y[c]=d);a(null,_=[],u,l)}for(c=_.length;c--;)(d=_[c])&&(u=a?ee.call(i,d):h[c])>-1&&(i[u]=!(r[u]=d))}}else _=g(_===r?_.splice(f,_.length):_),a?a(null,r,_,l):Q.apply(r,_)})}function y(t){for(var e,n,i,o=t.length,a=x.relative[t[0].type],r=a||x.relative[" "],s=a?1:0,l=p(function(t){return t===e},r,!0),u=p(function(t){return ee.call(e,t)>-1},r,!0),c=[function(t,n,i){return!a&&(i||n!==T)||((e=n).nodeType?l(t,n,i):u(t,n,i))}];o>s;s++)if(n=x.relative[t[s].type])c=[p(f(c),n)];else{if(n=x.filter[t[s].type].apply(null,t[s].matches),n[U]){for(i=++s;o>i&&!x.relative[t[i].type];i++);return v(s>1&&f(c),s>1&&h(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(le,"$1"),n,i>s&&y(t.slice(s,i)),o>i&&y(t=t.slice(i)),o>i&&h(t))}c.push(n)}return f(c)}function _(t,n){var o=n.length>0,a=t.length>0,r=function(i,r,s,l,u){var c,d,h,p=0,f="0",m=i&&[],v=[],y=T,_=i||a&&x.find.TAG("*",u),b=j+=null==y?1:Math.random()||.1,w=_.length;for(u&&(T=r!==I&&r);f!==w&&null!=(c=_[f]);f++){if(a&&c){for(d=0;h=t[d++];)if(h(c,r,s)){l.push(c);break}u&&(j=b)}o&&((c=!h&&c)&&p--,i&&m.push(c))}if(p+=f,o&&f!==p){for(d=0;h=n[d++];)h(m,v,r,s);if(i){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=J.call(l));v=g(v)}Q.apply(l,v),u&&!i&&v.length>0&&p+n.length>1&&e.uniqueSort(l)}return u&&(j=b,T=y),m};return o?i(r):r}var b,w,x,C,L,S,k,D,T,M,P,E,I,A,F,O,N,R,B,U="sizzle"+-new Date,z=t.document,j=0,$=0,H=n(),W=n(),V=n(),q=function(t,e){return t===e&&(P=!0),0},G="undefined",Y=1<<31,Z={}.hasOwnProperty,K=[],J=K.pop,X=K.push,Q=K.push,te=K.slice,ee=K.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",oe="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ae=oe.replace("w","w#"),re="\\["+ie+"*("+oe+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ae+"))|)"+ie+"*\\]",se=":("+oe+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",le=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),ue=new RegExp("^"+ie+"*,"+ie+"*"),ce=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),de=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),he=new RegExp(se),pe=new RegExp("^"+ae+"$"),fe={ID:new RegExp("^#("+oe+")"),CLASS:new RegExp("^\\.("+oe+")"),TAG:new RegExp("^("+oe.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_e=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),xe=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Q.apply(K=te.call(z.childNodes),z.childNodes),K[z.childNodes.length].nodeType}catch(Ce){Q={apply:K.length?function(t,e){X.apply(t,te.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}w=e.support={},L=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},E=e.setDocument=function(t){var e,n=t?t.ownerDocument||t:z,i=n.defaultView;return n!==I&&9===n.nodeType&&n.documentElement?(I=n,A=n.documentElement,F=!L(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){E()},!1):i.attachEvent&&i.attachEvent("onunload",function(){E()})),w.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=o(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=ve.test(n.getElementsByClassName)&&o(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),w.getById=o(function(t){return A.appendChild(t).id=U,!n.getElementsByName||!n.getElementsByName(U).length}),w.getById?(x.find.ID=function(t,e){if(typeof e.getElementById!==G&&F){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(t){var e=t.replace(we,xe);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var e=t.replace(we,xe);return function(t){var n=typeof t.getAttributeNode!==G&&t.getAttributeNode("id");return n&&n.value===e}}),x.find.TAG=w.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==G?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],o=0,a=e.getElementsByTagName(t);if("*"===t){for(;n=a[o++];)1===n.nodeType&&i.push(n);return i}return a},x.find.CLASS=w.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==G&&F?e.getElementsByClassName(t):void 0},N=[],O=[],(w.qsa=ve.test(n.querySelectorAll))&&(o(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&O.push("[*^$]="+ie+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||O.push("\\["+ie+"*(?:value|"+ne+")"),t.querySelectorAll(":checked").length||O.push(":checked")}),o(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&O.push("name"+ie+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),O.push(",.*:")})),(w.matchesSelector=ve.test(R=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&o(function(t){w.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),N.push("!=",se)}),O=O.length&&new RegExp(O.join("|")),N=N.length&&new RegExp(N.join("|")),e=ve.test(A.compareDocumentPosition),B=e||ve.test(A.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},q=e?function(t,e){if(t===e)return P=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!w.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===z&&B(z,t)?-1:e===n||e.ownerDocument===z&&B(z,e)?1:M?ee.call(M,t)-ee.call(M,e):0:4&i?-1:1)}:function(t,e){if(t===e)return P=!0,0;var i,o=0,a=t.parentNode,s=e.parentNode,l=[t],u=[e];if(!a||!s)return t===n?-1:e===n?1:a?-1:s?1:M?ee.call(M,t)-ee.call(M,e):0;if(a===s)return r(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)u.unshift(i);for(;l[o]===u[o];)o++;return o?r(l[o],u[o]):l[o]===z?-1:u[o]===z?1:0},n):I},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==I&&E(t),n=n.replace(de,"='$1']"),!(!w.matchesSelector||!F||N&&N.test(n)||O&&O.test(n)))try{var i=R.call(t,n);if(i||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(o){}return e(n,I,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==I&&E(t),B(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==I&&E(t);var n=x.attrHandle[e.toLowerCase()],i=n&&Z.call(x.attrHandle,e.toLowerCase())?n(t,e,!F):void 0;return void 0!==i?i:w.attributes||!F?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,o=0;if(P=!w.detectDuplicates,M=!w.sortStable&&t.slice(0),t.sort(q),P){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return M=null,t},C=e.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=C(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=C(e);return n},x=e.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(we,xe),t[3]=(t[3]||t[4]||t[5]||"").replace(we,xe),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return fe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&he.test(n)&&(e=S(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(we,xe).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=H[t+" "];return e||(e=new RegExp("(^|"+ie+")"+t+"("+ie+"|$)"))&&H(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==G&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(o){var a=e.attr(o,t);return null==a?"!="===n:n?(a+="","="===n?a===i:"!="===n?a!==i:"^="===n?i&&0===a.indexOf(i):"*="===n?i&&a.indexOf(i)>-1:"$="===n?i&&a.slice(-i.length)===i:"~="===n?(" "+a+" ").indexOf(i)>-1:"|="===n?a===i||a.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,o){var a="nth"!==t.slice(0,3),r="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var u,c,d,h,p,f,m=a!==r?"nextSibling":"previousSibling",g=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s;if(g){if(a){for(;m;){for(d=e;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?g.firstChild:g.lastChild],r&&y){for(c=g[U]||(g[U]={}),u=c[t]||[],p=u[0]===j&&u[1],h=u[0]===j&&u[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(h=p=0)||f.pop();)if(1===d.nodeType&&++h&&d===e){c[t]=[j,p,h];break}}else if(y&&(u=(e[U]||(e[U]={}))[t])&&u[0]===j)h=u[1];else for(;(d=++p&&d&&d[m]||(h=p=0)||f.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(y&&((d[U]||(d[U]={}))[t]=[j,h]),d!==e)););return h-=o,h===i||h%i===0&&h/i>=0}}},PSEUDO:function(t,n){var o,a=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return a[U]?a(n):a.length>1?(o=[t,t,"",n],x.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,o=a(t,n),r=o.length;r--;)i=ee.call(t,o[r]),t[i]=!(e[i]=o[r])}):function(t){return a(t,0,o)}):a}},pseudos:{not:i(function(t){var e=[],n=[],o=k(t.replace(le,"$1"));return o[U]?i(function(t,e,n,i){for(var a,r=o(t,null,i,[]),s=t.length;s--;)(a=r[s])&&(t[s]=!(e[s]=a))}):function(t,i,a){return e[0]=t,o(e,null,a,n),!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return function(e){return(e.textContent||e.innerText||C(e)).indexOf(t)>-1}}),lang:i(function(t){return pe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(we,xe).toLowerCase(),function(e){var n;do if(n=F?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===A},focus:function(t){return t===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return ge.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:u(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=l(b);return d.prototype=x.filters=x.pseudos,x.setFilters=new d,S=e.tokenize=function(t,n){var i,o,a,r,s,l,u,c=W[t+" "];if(c)return n?0:c.slice(0);for(s=t,l=[],u=x.preFilter;s;){(!i||(o=ue.exec(s)))&&(o&&(s=s.slice(o[0].length)||s),l.push(a=[])),i=!1,(o=ce.exec(s))&&(i=o.shift(),a.push({value:i,type:o[0].replace(le," ")}),s=s.slice(i.length));for(r in x.filter)!(o=fe[r].exec(s))||u[r]&&!(o=u[r](o))||(i=o.shift(),a.push({value:i,type:r,matches:o}),s=s.slice(i.length));if(!i)break}return n?s.length:s?e.error(t):W(t,l).slice(0)},k=e.compile=function(t,e){var n,i=[],o=[],a=V[t+" "];if(!a){for(e||(e=S(t)),n=e.length;n--;)a=y(e[n]),a[U]?i.push(a):o.push(a);a=V(t,_(o,i)),a.selector=t}return a},D=e.select=function(t,e,n,i){var o,a,r,s,l,u="function"==typeof t&&t,d=!i&&S(t=u.selector||t);if(n=n||[],1===d.length){if(a=d[0]=d[0].slice(0),a.length>2&&"ID"===(r=a[0]).type&&w.getById&&9===e.nodeType&&F&&x.relative[a[1].type]){if(e=(x.find.ID(r.matches[0].replace(we,xe),e)||[])[0],!e)return n;u&&(e=e.parentNode),t=t.slice(a.shift().value.length)}for(o=fe.needsContext.test(t)?0:a.length;o--&&(r=a[o],!x.relative[s=r.type]);)if((l=x.find[s])&&(i=l(r.matches[0].replace(we,xe),_e.test(a[0].type)&&c(e.parentNode)||e))){if(a.splice(o,1),t=i.length&&h(a),!t)return Q.apply(n,i),n;break}}return(u||k(t,d))(i,e,!F,n,_e.test(t)&&c(e.parentNode)||e),n},w.sortStable=U.split("").sort(q).join("")===U,w.detectDuplicates=!!P,E(),w.sortDetached=o(function(t){return 1&t.compareDocumentPosition(I.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||a("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||a("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||a(ne,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);oe.find=ue,oe.expr=ue.selectors,oe.expr[":"]=oe.expr.pseudos,oe.unique=ue.uniqueSort,oe.text=ue.getText,oe.isXMLDoc=ue.isXML,oe.contains=ue.contains;var ce=oe.expr.match.needsContext,de=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,he=/^.[^:#\[\.,]*$/;oe.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?oe.find.matchesSelector(i,t)?[i]:[]:oe.find.matches(t,oe.grep(e,function(t){return 1===t.nodeType}))},oe.fn.extend({find:function(t){var e,n=[],i=this,o=i.length;if("string"!=typeof t)return this.pushStack(oe(t).filter(function(){for(e=0;o>e;e++)if(oe.contains(i[e],this))return!0}));for(e=0;o>e;e++)oe.find(t,i[e],n);return n=this.pushStack(o>1?oe.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&ce.test(t)?oe(t):t||[],!1).length}});var pe,fe=t.document,me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ge=oe.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:me.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||pe).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof oe?e[0]:e,oe.merge(this,oe.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:fe,!0)),de.test(n[1])&&oe.isPlainObject(e))for(n in e)oe.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if(i=fe.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return pe.find(t);this.length=1,this[0]=i}return this.context=fe,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):oe.isFunction(t)?"undefined"!=typeof pe.ready?pe.ready(t):t(oe):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),oe.makeArray(t,this))};ge.prototype=oe.fn,pe=oe(fe);var ve=/^(?:parents|prev(?:Until|All))/,ye={children:!0,contents:!0,next:!0,prev:!0};oe.extend({dir:function(t,e,n){for(var i=[],o=t[e];o&&9!==o.nodeType&&(void 0===n||1!==o.nodeType||!oe(o).is(n));)1===o.nodeType&&i.push(o),o=o[e];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),oe.fn.extend({has:function(t){var e,n=oe(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(oe.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,o=this.length,a=[],r=ce.test(t)||"string"!=typeof t?oe(t,e||this.context):0;o>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(r?r.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,t))){a.push(n);break}return this.pushStack(a.length>1?oe.unique(a):a)},index:function(t){return t?"string"==typeof t?oe.inArray(this[0],oe(t)):oe.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(oe.unique(oe.merge(this.get(),oe(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),oe.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return oe.dir(t,"parentNode")},parentsUntil:function(t,e,n){return oe.dir(t,"parentNode",n)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return oe.dir(t,"nextSibling")},prevAll:function(t){return oe.dir(t,"previousSibling")},nextUntil:function(t,e,n){return oe.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return oe.dir(t,"previousSibling",n)},siblings:function(t){return oe.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return oe.sibling(t.firstChild)},contents:function(t){return oe.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:oe.merge([],t.childNodes)}},function(t,e){oe.fn[t]=function(n,i){var o=oe.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=oe.filter(i,o)),this.length>1&&(ye[t]||(o=oe.unique(o)),ve.test(t)&&(o=o.reverse())),this.pushStack(o)}});var _e=/\S+/g,be={};oe.Callbacks=function(t){t="string"==typeof t?be[t]||a(t):oe.extend({},t);var e,n,i,o,r,s,l=[],u=!t.once&&[],c=function(a){for(n=t.memory&&a,i=!0,r=s||0,s=0,o=l.length,e=!0;l&&o>r;r++)if(l[r].apply(a[0],a[1])===!1&&t.stopOnFalse){n=!1;break}e=!1,l&&(u?u.length&&c(u.shift()):n?l=[]:d.disable())},d={add:function(){if(l){var i=l.length;!function a(e){oe.each(e,function(e,n){var i=oe.type(n);"function"===i?t.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!==i&&a(n)})}(arguments),e?o=l.length:n&&(s=i,c(n))}return this},remove:function(){return l&&oe.each(arguments,function(t,n){for(var i;(i=oe.inArray(n,l,i))>-1;)l.splice(i,1),e&&(o>=i&&o--,r>=i&&r--)}),this},has:function(t){return t?oe.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||d.disable(),this},locked:function(){return!u},fireWith:function(t,n){return!l||i&&!u||(n=n||[],n=[t,n.slice?n.slice():n],e?u.push(n):c(n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},oe.extend({Deferred:function(t){var e=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return oe.Deferred(function(n){oe.each(e,function(e,a){var r=oe.isFunction(t[e])&&t[e];o[a[1]](function(){var t=r&&r.apply(this,arguments);t&&oe.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a[0]+"With"](this===i?n.promise():this,r?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?oe.extend(t,i):i}},o={};return i.pipe=i.then,oe.each(e,function(t,a){var r=a[2],s=a[3];i[a[1]]=r.add,s&&r.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),o[a[0]]=function(){return o[a[0]+"With"](this===o?i:this,arguments),this},o[a[0]+"With"]=r.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,i,o=0,a=Z.call(arguments),r=a.length,s=1!==r||t&&oe.isFunction(t.promise)?r:0,l=1===s?t:oe.Deferred(),u=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?Z.call(arguments):o,i===e?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(r>1)for(e=new Array(r),n=new Array(r),i=new Array(r);r>o;o++)a[o]&&oe.isFunction(a[o].promise)?a[o].promise().done(u(o,i,a)).fail(l.reject).progress(u(o,n,e)):--s;return s||l.resolveWith(i,a),l.promise()}});var we;oe.fn.ready=function(t){return oe.ready.promise().done(t),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(t){t?oe.readyWait++:oe.ready(!0)},ready:function(t){if(t===!0?!--oe.readyWait:!oe.isReady){if(!fe.body)return setTimeout(oe.ready);oe.isReady=!0,t!==!0&&--oe.readyWait>0||(we.resolveWith(fe,[oe]),oe.fn.triggerHandler&&(oe(fe).triggerHandler("ready"),oe(fe).off("ready")))}}}),oe.ready.promise=function(e){if(!we)if(we=oe.Deferred(),"complete"===fe.readyState)setTimeout(oe.ready);else if(fe.addEventListener)fe.addEventListener("DOMContentLoaded",s,!1),t.addEventListener("load",s,!1);else{fe.attachEvent("onreadystatechange",s),t.attachEvent("onload",s);var n=!1;try{n=null==t.frameElement&&fe.documentElement}catch(i){}n&&n.doScroll&&!function o(){if(!oe.isReady){try{n.doScroll("left")}catch(t){return setTimeout(o,50)}r(),oe.ready()}}()}return we.promise(e)};var xe,Ce="undefined";for(xe in oe(ne))break;ne.ownLast="0"!==xe,ne.inlineBlockNeedsLayout=!1,oe(function(){var t,e,n,i;n=fe.getElementsByTagName("body")[0],n&&n.style&&(e=fe.createElement("div"),i=fe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==Ce&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ne.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(i))}),function(){var t=fe.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(e){ne.deleteExpando=!1}}t=null}(),oe.acceptData=function(t){var e=oe.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return 1!==n&&9!==n?!1:!e||e!==!0&&t.getAttribute("classid")===e};var Le=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Se=/([A-Z])/g;oe.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?oe.cache[t[oe.expando]]:t[oe.expando],!!t&&!u(t)},data:function(t,e,n){return c(t,e,n)},removeData:function(t,e){return d(t,e)},_data:function(t,e,n){return c(t,e,n,!0)},_removeData:function(t,e){return d(t,e,!0)}}),oe.fn.extend({data:function(t,e){var n,i,o,a=this[0],r=a&&a.attributes;if(void 0===t){if(this.length&&(o=oe.data(a),1===a.nodeType&&!oe._data(a,"parsedAttrs"))){for(n=r.length;n--;)r[n]&&(i=r[n].name,0===i.indexOf("data-")&&(i=oe.camelCase(i.slice(5)),l(a,i,o[i])));oe._data(a,"parsedAttrs",!0)}return o}return"object"==typeof t?this.each(function(){oe.data(this,t)}):arguments.length>1?this.each(function(){oe.data(this,t,e)}):a?l(a,t,oe.data(a,t)):void 0},removeData:function(t){return this.each(function(){oe.removeData(this,t)})}}),oe.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=oe._data(t,e),n&&(!i||oe.isArray(n)?i=oe._data(t,e,oe.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=oe.queue(t,e),i=n.length,o=n.shift(),a=oe._queueHooks(t,e),r=function(){oe.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete a.stop,o.call(t,r,a)),!i&&a&&a.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return oe._data(t,n)||oe._data(t,n,{empty:oe.Callbacks("once memory").add(function(){oe._removeData(t,e+"queue"),oe._removeData(t,n)})})}}),oe.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?oe.queue(this[0],t):void 0===e?this:this.each(function(){var n=oe.queue(this,t,e);oe._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&oe.dequeue(this,t)})},dequeue:function(t){return this.each(function(){oe.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=oe.Deferred(),a=this,r=this.length,s=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)n=oe._data(a[r],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),o.promise(e)}});var ke=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,De=["Top","Right","Bottom","Left"],Te=function(t,e){return t=e||t,"none"===oe.css(t,"display")||!oe.contains(t.ownerDocument,t)},Me=oe.access=function(t,e,n,i,o,a,r){var s=0,l=t.length,u=null==n;if("object"===oe.type(n)){o=!0;for(s in n)oe.access(t,e,s,n[s],!0,a,r)}else if(void 0!==i&&(o=!0,oe.isFunction(i)||(r=!0),u&&(r?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(oe(t),n)})),e))for(;l>s;s++)e(t[s],n,r?i:i.call(t[s],s,e(t[s],n)));return o?t:u?e.call(t):l?e(t[0],n):a},Pe=/^(?:checkbox|radio)$/i;!function(){var t=fe.createElement("input"),e=fe.createElement("div"),n=fe.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ne.leadingWhitespace=3===e.firstChild.nodeType,ne.tbody=!e.getElementsByTagName("tbody").length,ne.htmlSerialize=!!e.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==fe.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,n.appendChild(t),ne.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,n.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){ne.noCloneEvent=!1}),e.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(i){ne.deleteExpando=!1}}}(),function(){var e,n,i=fe.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})n="on"+e,(ne[e+"Bubbles"]=n in t)||(i.setAttribute(n,"t"),ne[e+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var Ee=/^(?:input|select|textarea)$/i,Ie=/^key/,Ae=/^(?:mouse|pointer|contextmenu)|click/,Fe=/^(?:focusinfocus|focusoutblur)$/,Oe=/^([^.]*)(?:\.(.+)|)$/;oe.event={global:{},add:function(t,e,n,i,o){var a,r,s,l,u,c,d,h,p,f,m,g=oe._data(t);if(g){for(n.handler&&(l=n,n=l.handler,o=l.selector),n.guid||(n.guid=oe.guid++),(r=g.events)||(r=g.events={}),(c=g.handle)||(c=g.handle=function(t){return typeof oe===Ce||t&&oe.event.triggered===t.type?void 0:oe.event.dispatch.apply(c.elem,arguments)},c.elem=t),e=(e||"").match(_e)||[""],s=e.length;s--;)a=Oe.exec(e[s])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p&&(u=oe.event.special[p]||{},p=(o?u.delegateType:u.bindType)||p,u=oe.event.special[p]||{},d=oe.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&oe.expr.match.needsContext.test(o),namespace:f.join(".")},l),(h=r[p])||(h=r[p]=[],h.delegateCount=0,u.setup&&u.setup.call(t,i,f,c)!==!1||(t.addEventListener?t.addEventListener(p,c,!1):t.attachEvent&&t.attachEvent("on"+p,c))),u.add&&(u.add.call(t,d),d.handler.guid||(d.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,d):h.push(d),oe.event.global[p]=!0);t=null}},remove:function(t,e,n,i,o){var a,r,s,l,u,c,d,h,p,f,m,g=oe.hasData(t)&&oe._data(t);if(g&&(c=g.events)){for(e=(e||"").match(_e)||[""],u=e.length;u--;)if(s=Oe.exec(e[u])||[],p=m=s[1],f=(s[2]||"").split(".").sort(),p){for(d=oe.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,h=c[p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=h.length;a--;)r=h[a],!o&&m!==r.origType||n&&n.guid!==r.guid||s&&!s.test(r.namespace)||i&&i!==r.selector&&("**"!==i||!r.selector)||(h.splice(a,1),r.selector&&h.delegateCount--,d.remove&&d.remove.call(t,r));l&&!h.length&&(d.teardown&&d.teardown.call(t,f,g.handle)!==!1||oe.removeEvent(t,p,g.handle),delete c[p])}else for(p in c)oe.event.remove(t,p+e[u],n,i,!0);oe.isEmptyObject(c)&&(delete g.handle,oe._removeData(t,"events"))}},trigger:function(e,n,i,o){var a,r,s,l,u,c,d,h=[i||fe],p=ee.call(e,"type")?e.type:e,f=ee.call(e,"namespace")?e.namespace.split("."):[];if(s=c=i=i||fe,3!==i.nodeType&&8!==i.nodeType&&!Fe.test(p+oe.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),r=p.indexOf(":")<0&&"on"+p,e=e[oe.expando]?e:new oe.Event(p,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:oe.makeArray(n,[e]),u=oe.event.special[p]||{},o||!u.trigger||u.trigger.apply(i,n)!==!1)){if(!o&&!u.noBubble&&!oe.isWindow(i)){for(l=u.delegateType||p,Fe.test(l+p)||(s=s.parentNode);s;s=s.parentNode)h.push(s),c=s;
c===(i.ownerDocument||fe)&&h.push(c.defaultView||c.parentWindow||t)}for(d=0;(s=h[d++])&&!e.isPropagationStopped();)e.type=d>1?l:u.bindType||p,a=(oe._data(s,"events")||{})[e.type]&&oe._data(s,"handle"),a&&a.apply(s,n),a=r&&s[r],a&&a.apply&&oe.acceptData(s)&&(e.result=a.apply(s,n),e.result===!1&&e.preventDefault());if(e.type=p,!o&&!e.isDefaultPrevented()&&(!u._default||u._default.apply(h.pop(),n)===!1)&&oe.acceptData(i)&&r&&i[p]&&!oe.isWindow(i)){c=i[r],c&&(i[r]=null),oe.event.triggered=p;try{i[p]()}catch(m){}oe.event.triggered=void 0,c&&(i[r]=c)}return e.result}},dispatch:function(t){t=oe.event.fix(t);var e,n,i,o,a,r=[],s=Z.call(arguments),l=(oe._data(this,"events")||{})[t.type]||[],u=oe.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(r=oe.event.handlers.call(this,t,l),e=0;(o=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,a=0;(i=o.handlers[a++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(i.namespace))&&(t.handleObj=i,t.data=i.data,n=((oe.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,o,a,r=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(o=[],a=0;s>a;a++)i=e[a],n=i.selector+" ",void 0===o[n]&&(o[n]=i.needsContext?oe(n,this).index(l)>=0:oe.find(n,this,null,[l]).length),o[n]&&o.push(i);o.length&&r.push({elem:l,handlers:o})}return s<e.length&&r.push({elem:this,handlers:e.slice(s)}),r},fix:function(t){if(t[oe.expando])return t;var e,n,i,o=t.type,a=t,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=Ae.test(o)?this.mouseHooks:Ie.test(o)?this.keyHooks:{}),i=r.props?this.props.concat(r.props):this.props,t=new oe.Event(a),e=i.length;e--;)n=i[e],t[n]=a[n];return t.target||(t.target=a.srcElement||fe),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,r.filter?r.filter(t,a):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,o,a=e.button,r=e.fromElement;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||fe,o=i.documentElement,n=i.body,t.pageX=e.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&r&&(t.relatedTarget=r===t.target?e.toElement:r),t.which||void 0===a||(t.which=1&a?1:2&a?3:4&a?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return oe.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return oe.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var o=oe.extend(new oe.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?oe.event.trigger(o,null,e):oe.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},oe.removeEvent=fe.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===Ce&&(t[i]=null),t.detachEvent(i,n))},oe.Event=function(t,e){return this instanceof oe.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?h:p):this.type=t,e&&oe.extend(this,e),this.timeStamp=t&&t.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(t,e)},oe.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=h,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=h,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=h,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){oe.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,a=t.handleObj;return(!o||o!==i&&!oe.contains(i,o))&&(t.type=a.origType,n=a.handler.apply(this,arguments),t.type=e),n}}}),ne.submitBubbles||(oe.event.special.submit={setup:function(){return oe.nodeName(this,"form")?!1:void oe.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=oe.nodeName(e,"input")||oe.nodeName(e,"button")?e.form:void 0;n&&!oe._data(n,"submitBubbles")&&(oe.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),oe._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&oe.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return oe.nodeName(this,"form")?!1:void oe.event.remove(this,"._submit")}}),ne.changeBubbles||(oe.event.special.change={setup:function(){return Ee.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(oe.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),oe.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),oe.event.simulate("change",this,t,!0)})),!1):void oe.event.add(this,"beforeactivate._change",function(t){var e=t.target;Ee.test(e.nodeName)&&!oe._data(e,"changeBubbles")&&(oe.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||oe.event.simulate("change",this.parentNode,t,!0)}),oe._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return oe.event.remove(this,"._change"),!Ee.test(this.nodeName)}}),ne.focusinBubbles||oe.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){oe.event.simulate(e,t.target,oe.event.fix(t),!0)};oe.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=oe._data(i,e);o||i.addEventListener(t,n,!0),oe._data(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=oe._data(i,e)-1;o?oe._data(i,e,o):(i.removeEventListener(t,n,!0),oe._removeData(i,e))}}}),oe.fn.extend({on:function(t,e,n,i,o){var a,r;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(a in t)this.on(a,e,n,t[a],o);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=p;else if(!i)return this;return 1===o&&(r=i,i=function(t){return oe().off(t),r.apply(this,arguments)},i.guid=r.guid||(r.guid=oe.guid++)),this.each(function(){oe.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,oe(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=p),this.each(function(){oe.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){oe.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?oe.event.trigger(t,e,n,!0):void 0}});var Ne="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Re=/ jQuery\d+="(?:null|\d+)"/g,Be=new RegExp("<(?:"+Ne+")[\\s/>]","i"),Ue=/^\s+/,ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,je=/<([\w:]+)/,$e=/<tbody/i,He=/<|&#?\w+;/,We=/<(?:script|style|link)/i,Ve=/checked\s*(?:[^=]|=\s*.checked.)/i,qe=/^$|\/(?:java|ecma)script/i,Ge=/^true\/(.*)/,Ye=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ze={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ke=m(fe),Je=Ke.appendChild(fe.createElement("div"));Ze.optgroup=Ze.option,Ze.tbody=Ze.tfoot=Ze.colgroup=Ze.caption=Ze.thead,Ze.th=Ze.td,oe.extend({clone:function(t,e,n){var i,o,a,r,s,l=oe.contains(t.ownerDocument,t);if(ne.html5Clone||oe.isXMLDoc(t)||!Be.test("<"+t.nodeName+">")?a=t.cloneNode(!0):(Je.innerHTML=t.outerHTML,Je.removeChild(a=Je.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||oe.isXMLDoc(t)))for(i=g(a),s=g(t),r=0;null!=(o=s[r]);++r)i[r]&&C(o,i[r]);if(e)if(n)for(s=s||g(t),i=i||g(a),r=0;null!=(o=s[r]);r++)x(o,i[r]);else x(t,a);return i=g(a,"script"),i.length>0&&w(i,!l&&g(t,"script")),i=s=o=null,a},buildFragment:function(t,e,n,i){for(var o,a,r,s,l,u,c,d=t.length,h=m(e),p=[],f=0;d>f;f++)if(a=t[f],a||0===a)if("object"===oe.type(a))oe.merge(p,a.nodeType?[a]:a);else if(He.test(a)){for(s=s||h.appendChild(e.createElement("div")),l=(je.exec(a)||["",""])[1].toLowerCase(),c=Ze[l]||Ze._default,s.innerHTML=c[1]+a.replace(ze,"<$1></$2>")+c[2],o=c[0];o--;)s=s.lastChild;if(!ne.leadingWhitespace&&Ue.test(a)&&p.push(e.createTextNode(Ue.exec(a)[0])),!ne.tbody)for(a="table"!==l||$e.test(a)?"<table>"!==c[1]||$e.test(a)?0:s:s.firstChild,o=a&&a.childNodes.length;o--;)oe.nodeName(u=a.childNodes[o],"tbody")&&!u.childNodes.length&&a.removeChild(u);for(oe.merge(p,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=h.lastChild}else p.push(e.createTextNode(a));for(s&&h.removeChild(s),ne.appendChecked||oe.grep(g(p,"input"),v),f=0;a=p[f++];)if((!i||-1===oe.inArray(a,i))&&(r=oe.contains(a.ownerDocument,a),s=g(h.appendChild(a),"script"),r&&w(s),n))for(o=0;a=s[o++];)qe.test(a.type||"")&&n.push(a);return s=null,h},cleanData:function(t,e){for(var n,i,o,a,r=0,s=oe.expando,l=oe.cache,u=ne.deleteExpando,c=oe.event.special;null!=(n=t[r]);r++)if((e||oe.acceptData(n))&&(o=n[s],a=o&&l[o])){if(a.events)for(i in a.events)c[i]?oe.event.remove(n,i):oe.removeEvent(n,i,a.handle);l[o]&&(delete l[o],u?delete n[s]:typeof n.removeAttribute!==Ce?n.removeAttribute(s):n[s]=null,Y.push(o))}}}),oe.fn.extend({text:function(t){return Me(this,function(t){return void 0===t?oe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||fe).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?oe.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||oe.cleanData(g(n)),n.parentNode&&(e&&oe.contains(n.ownerDocument,n)&&w(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&oe.cleanData(g(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&oe.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return oe.clone(this,t,e)})},html:function(t){return Me(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Re,""):void 0;if(!("string"!=typeof t||We.test(t)||!ne.htmlSerialize&&Be.test(t)||!ne.leadingWhitespace&&Ue.test(t)||Ze[(je.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(ze,"<$1></$2>");try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(oe.cleanData(g(e,!1)),e.innerHTML=t);e=0}catch(o){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,oe.cleanData(g(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=K.apply([],t);var n,i,o,a,r,s,l=0,u=this.length,c=this,d=u-1,h=t[0],p=oe.isFunction(h);if(p||u>1&&"string"==typeof h&&!ne.checkClone&&Ve.test(h))return this.each(function(n){var i=c.eq(n);p&&(t[0]=h.call(this,n,i.html())),i.domManip(t,e)});if(u&&(s=oe.buildFragment(t,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(a=oe.map(g(s,"script"),_),o=a.length;u>l;l++)i=s,l!==d&&(i=oe.clone(i,!0,!0),o&&oe.merge(a,g(i,"script"))),e.call(this[l],i,l);if(o)for(r=a[a.length-1].ownerDocument,oe.map(a,b),l=0;o>l;l++)i=a[l],qe.test(i.type||"")&&!oe._data(i,"globalEval")&&oe.contains(r,i)&&(i.src?oe._evalUrl&&oe._evalUrl(i.src):oe.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Ye,"")));s=n=null}return this}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){oe.fn[t]=function(t){for(var n,i=0,o=[],a=oe(t),r=a.length-1;r>=i;i++)n=i===r?this:this.clone(!0),oe(a[i])[e](n),J.apply(o,n.get());return this.pushStack(o)}});var Xe,Qe={};!function(){var t;ne.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,n,i;return n=fe.getElementsByTagName("body")[0],n&&n.style?(e=fe.createElement("div"),i=fe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==Ce&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(fe.createElement("div")).style.width="5px",t=3!==e.offsetWidth),n.removeChild(i),t):void 0}}();var tn,en,nn=/^margin/,on=new RegExp("^("+ke+")(?!px)[a-z%]+$","i"),an=/^(top|right|bottom|left)$/;t.getComputedStyle?(tn=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},en=function(t,e,n){var i,o,a,r,s=t.style;return n=n||tn(t),r=n?n.getPropertyValue(e)||n[e]:void 0,n&&(""!==r||oe.contains(t.ownerDocument,t)||(r=oe.style(t,e)),on.test(r)&&nn.test(e)&&(i=s.width,o=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=r,r=n.width,s.width=i,s.minWidth=o,s.maxWidth=a)),void 0===r?r:r+""}):fe.documentElement.currentStyle&&(tn=function(t){return t.currentStyle},en=function(t,e,n){var i,o,a,r,s=t.style;return n=n||tn(t),r=n?n[e]:void 0,null==r&&s&&s[e]&&(r=s[e]),on.test(r)&&!an.test(e)&&(i=s.left,o=t.runtimeStyle,a=o&&o.left,a&&(o.left=t.currentStyle.left),s.left="fontSize"===e?"1em":r,r=s.pixelLeft+"px",s.left=i,a&&(o.left=a)),void 0===r?r:r+""||"auto"}),function(){function e(){var e,n,i,o;n=fe.getElementsByTagName("body")[0],n&&n.style&&(e=fe.createElement("div"),i=fe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a=r=!1,l=!0,t.getComputedStyle&&(a="1%"!==(t.getComputedStyle(e,null)||{}).top,r="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,o=e.appendChild(fe.createElement("div")),o.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",o.style.marginRight=o.style.width="0",e.style.width="1px",l=!parseFloat((t.getComputedStyle(o,null)||{}).marginRight)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=e.getElementsByTagName("td"),o[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===o[0].offsetHeight,s&&(o[0].style.display="",o[1].style.display="none",s=0===o[0].offsetHeight),n.removeChild(i))}var n,i,o,a,r,s,l;n=fe.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=n.getElementsByTagName("a")[0],i=o&&o.style,i&&(i.cssText="float:left;opacity:.5",ne.opacity="0.5"===i.opacity,ne.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===n.style.backgroundClip,ne.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,oe.extend(ne,{reliableHiddenOffsets:function(){return null==s&&e(),s},boxSizingReliable:function(){return null==r&&e(),r},pixelPosition:function(){return null==a&&e(),a},reliableMarginRight:function(){return null==l&&e(),l}}))}(),oe.swap=function(t,e,n,i){var o,a,r={};for(a in e)r[a]=t.style[a],t.style[a]=e[a];o=n.apply(t,i||[]);for(a in e)t.style[a]=r[a];return o};var rn=/alpha\([^)]*\)/i,sn=/opacity\s*=\s*([^)]*)/,ln=/^(none|table(?!-c[ea]).+)/,un=new RegExp("^("+ke+")(.*)$","i"),cn=new RegExp("^([+-])=("+ke+")","i"),dn={position:"absolute",visibility:"hidden",display:"block"},hn={letterSpacing:"0",fontWeight:"400"},pn=["Webkit","O","Moz","ms"];oe.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=en(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,a,r,s=oe.camelCase(e),l=t.style;if(e=oe.cssProps[s]||(oe.cssProps[s]=D(l,s)),r=oe.cssHooks[e]||oe.cssHooks[s],void 0===n)return r&&"get"in r&&void 0!==(o=r.get(t,!1,i))?o:l[e];if(a=typeof n,"string"===a&&(o=cn.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(oe.css(t,e)),a="number"),null!=n&&n===n&&("number"!==a||oe.cssNumber[s]||(n+="px"),ne.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(r&&"set"in r&&void 0===(n=r.set(t,n,i)))))try{l[e]=n}catch(u){}}},css:function(t,e,n,i){var o,a,r,s=oe.camelCase(e);return e=oe.cssProps[s]||(oe.cssProps[s]=D(t.style,s)),r=oe.cssHooks[e]||oe.cssHooks[s],r&&"get"in r&&(a=r.get(t,!0,n)),void 0===a&&(a=en(t,e,i)),"normal"===a&&e in hn&&(a=hn[e]),""===n||n?(o=parseFloat(a),n===!0||oe.isNumeric(o)?o||0:a):a}}),oe.each(["height","width"],function(t,e){oe.cssHooks[e]={get:function(t,n,i){return n?ln.test(oe.css(t,"display"))&&0===t.offsetWidth?oe.swap(t,dn,function(){return E(t,e,i)}):E(t,e,i):void 0},set:function(t,n,i){var o=i&&tn(t);return M(t,n,i?P(t,e,i,ne.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,o),o):0)}}}),ne.opacity||(oe.cssHooks.opacity={get:function(t,e){return sn.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,o=oe.isNumeric(e)?"alpha(opacity="+100*e+")":"",a=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===oe.trim(a.replace(rn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=rn.test(a)?a.replace(rn,o):a+" "+o)}}),oe.cssHooks.marginRight=k(ne.reliableMarginRight,function(t,e){return e?oe.swap(t,{display:"inline-block"},en,[t,"marginRight"]):void 0}),oe.each({margin:"",padding:"",border:"Width"},function(t,e){oe.cssHooks[t+e]={expand:function(n){for(var i=0,o={},a="string"==typeof n?n.split(" "):[n];4>i;i++)o[t+De[i]+e]=a[i]||a[i-2]||a[0];return o}},nn.test(t)||(oe.cssHooks[t+e].set=M)}),oe.fn.extend({css:function(t,e){return Me(this,function(t,e,n){var i,o,a={},r=0;if(oe.isArray(e)){for(i=tn(t),o=e.length;o>r;r++)a[e[r]]=oe.css(t,e[r],!1,i);return a}return void 0!==n?oe.style(t,e,n):oe.css(t,e)},t,e,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Te(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=I,I.prototype={constructor:I,init:function(t,e,n,i,o,a){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=a||(oe.cssNumber[n]?"":"px")},cur:function(){var t=I.propHooks[this.prop];return t&&t.get?t.get(this):I.propHooks._default.get(this)},run:function(t){var e,n=I.propHooks[this.prop];return this.pos=e=this.options.duration?oe.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):I.propHooks._default.set(this),this}},I.prototype.init.prototype=I.prototype,I.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=oe.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){oe.fx.step[t.prop]?oe.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[oe.cssProps[t.prop]]||oe.cssHooks[t.prop])?oe.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},I.propHooks.scrollTop=I.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},oe.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},oe.fx=I.prototype.init,oe.fx.step={};var fn,mn,gn=/^(?:toggle|show|hide)$/,vn=new RegExp("^(?:([+-])=|)("+ke+")([a-z%]*)$","i"),yn=/queueHooks$/,_n=[N],bn={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),o=vn.exec(e),a=o&&o[3]||(oe.cssNumber[t]?"":"px"),r=(oe.cssNumber[t]||"px"!==a&&+i)&&vn.exec(oe.css(n.elem,t)),s=1,l=20;if(r&&r[3]!==a){a=a||r[3],o=o||[],r=+i||1;do s=s||".5",r/=s,oe.style(n.elem,t,r+a);while(s!==(s=n.cur()/i)&&1!==s&&--l)}return o&&(r=n.start=+r||+i||0,n.unit=a,n.end=o[1]?r+(o[1]+1)*o[2]:+o[2]),n}]};oe.Animation=oe.extend(B,{tweener:function(t,e){oe.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,o=t.length;o>i;i++)n=t[i],bn[n]=bn[n]||[],bn[n].unshift(e)},prefilter:function(t,e){e?_n.unshift(t):_n.push(t)}}),oe.speed=function(t,e,n){var i=t&&"object"==typeof t?oe.extend({},t):{complete:n||!n&&e||oe.isFunction(t)&&t,duration:t,easing:n&&e||e&&!oe.isFunction(e)&&e};return i.duration=oe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in oe.fx.speeds?oe.fx.speeds[i.duration]:oe.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){oe.isFunction(i.old)&&i.old.call(this),i.queue&&oe.dequeue(this,i.queue)},i},oe.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Te).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=oe.isEmptyObject(t),a=oe.speed(e,n,i),r=function(){var e=B(this,oe.extend({},t),a);(o||oe._data(this,"finish"))&&e.stop(!0)};return r.finish=r,o||a.queue===!1?this.each(r):this.queue(a.queue,r)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",a=oe.timers,r=oe._data(this);if(o)r[o]&&r[o].stop&&i(r[o]);else for(o in r)r[o]&&r[o].stop&&yn.test(o)&&i(r[o]);for(o=a.length;o--;)a[o].elem!==this||null!=t&&a[o].queue!==t||(a[o].anim.stop(n),e=!1,a.splice(o,1));(e||!n)&&oe.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=oe._data(this),i=n[t+"queue"],o=n[t+"queueHooks"],a=oe.timers,r=i?i.length:0;for(n.finish=!0,oe.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===t&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;r>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),oe.each(["toggle","show","hide"],function(t,e){var n=oe.fn[e];oe.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(F(e,!0),t,i,o)}}),oe.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){oe.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),oe.timers=[],oe.fx.tick=function(){var t,e=oe.timers,n=0;for(fn=oe.now();n<e.length;n++)t=e[n],t()||e[n]!==t||e.splice(n--,1);e.length||oe.fx.stop(),fn=void 0},oe.fx.timer=function(t){oe.timers.push(t),t()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){mn||(mn=setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){clearInterval(mn),mn=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,e){return t=oe.fx?oe.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t,e,n,i,o;e=fe.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=e.getElementsByTagName("a")[0],n=fe.createElement("select"),o=n.appendChild(fe.createElement("option")),t=e.getElementsByTagName("input")[0],i.style.cssText="top:1px",ne.getSetAttribute="t"!==e.className,ne.style=/top/.test(i.getAttribute("style")),ne.hrefNormalized="/a"===i.getAttribute("href"),ne.checkOn=!!t.value,ne.optSelected=o.selected,ne.enctype=!!fe.createElement("form").enctype,n.disabled=!0,ne.optDisabled=!o.disabled,t=fe.createElement("input"),t.setAttribute("value",""),ne.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ne.radioValue="t"===t.value}();var wn=/\r/g;oe.fn.extend({val:function(t){var e,n,i,o=this[0];{if(arguments.length)return i=oe.isFunction(t),this.each(function(n){var o;1===this.nodeType&&(o=i?t.call(this,n,oe(this).val()):t,null==o?o="":"number"==typeof o?o+="":oe.isArray(o)&&(o=oe.map(o,function(t){return null==t?"":t+""})),e=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return e=oe.valHooks[o.type]||oe.valHooks[o.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(wn,""):null==n?"":n)}}}),oe.extend({valHooks:{option:{get:function(t){var e=oe.find.attr(t,"value");return null!=e?e:oe.trim(oe.text(t))}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,a="select-one"===t.type||0>o,r=a?null:[],s=a?o+1:i.length,l=0>o?s:a?o:0;s>l;l++)if(n=i[l],!(!n.selected&&l!==o||(ne.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&oe.nodeName(n.parentNode,"optgroup"))){if(e=oe(n).val(),a)return e;r.push(e)}return r},set:function(t,e){for(var n,i,o=t.options,a=oe.makeArray(e),r=o.length;r--;)if(i=o[r],oe.inArray(oe.valHooks.option.get(i),a)>=0)try{i.selected=n=!0}catch(s){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(t,e){return oe.isArray(e)?t.checked=oe.inArray(oe(t).val(),e)>=0:void 0}},ne.checkOn||(oe.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var xn,Cn,Ln=oe.expr.attrHandle,Sn=/^(?:checked|selected)$/i,kn=ne.getSetAttribute,Dn=ne.input;oe.fn.extend({attr:function(t,e){return Me(this,oe.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){oe.removeAttr(this,t)})}}),oe.extend({attr:function(t,e,n){var i,o,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return typeof t.getAttribute===Ce?oe.prop(t,e,n):(1===a&&oe.isXMLDoc(t)||(e=e.toLowerCase(),i=oe.attrHooks[e]||(oe.expr.match.bool.test(e)?Cn:xn)),void 0===n?i&&"get"in i&&null!==(o=i.get(t,e))?o:(o=oe.find.attr(t,e),null==o?void 0:o):null!==n?i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:(t.setAttribute(e,n+""),n):void oe.removeAttr(t,e))},removeAttr:function(t,e){var n,i,o=0,a=e&&e.match(_e);if(a&&1===t.nodeType)for(;n=a[o++];)i=oe.propFix[n]||n,oe.expr.match.bool.test(n)?Dn&&kn||!Sn.test(n)?t[i]=!1:t[oe.camelCase("default-"+n)]=t[i]=!1:oe.attr(t,n,""),t.removeAttribute(kn?n:i)},attrHooks:{type:{set:function(t,e){if(!ne.radioValue&&"radio"===e&&oe.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),Cn={set:function(t,e,n){return e===!1?oe.removeAttr(t,n):Dn&&kn||!Sn.test(n)?t.setAttribute(!kn&&oe.propFix[n]||n,n):t[oe.camelCase("default-"+n)]=t[n]=!0,n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(t,e){var n=Ln[e]||oe.find.attr;Ln[e]=Dn&&kn||!Sn.test(e)?function(t,e,i){var o,a;return i||(a=Ln[e],Ln[e]=o,o=null!=n(t,e,i)?e.toLowerCase():null,Ln[e]=a),o}:function(t,e,n){return n?void 0:t[oe.camelCase("default-"+e)]?e.toLowerCase():null}}),Dn&&kn||(oe.attrHooks.value={set:function(t,e,n){return oe.nodeName(t,"input")?void(t.defaultValue=e):xn&&xn.set(t,e,n)}}),kn||(xn={set:function(t,e,n){var i=t.getAttributeNode(n);return i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n)?e:void 0}},Ln.id=Ln.name=Ln.coords=function(t,e,n){var i;return n?void 0:(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},oe.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:void 0},set:xn.set},oe.attrHooks.contenteditable={set:function(t,e,n){xn.set(t,""===e?!1:e,n)}},oe.each(["width","height"],function(t,e){oe.attrHooks[e]={set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}}})),ne.style||(oe.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Tn=/^(?:input|select|textarea|button|object)$/i,Mn=/^(?:a|area)$/i;oe.fn.extend({prop:function(t,e){return Me(this,oe.prop,t,e,arguments.length>1)},removeProp:function(t){return t=oe.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),oe.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,o,a,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return a=1!==r||!oe.isXMLDoc(t),a&&(e=oe.propFix[e]||e,o=oe.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=oe.find.attr(t,"tabindex");return e?parseInt(e,10):Tn.test(t.nodeName)||Mn.test(t.nodeName)&&t.href?0:-1}}}}),ne.hrefNormalized||oe.each(["href","src"],function(t,e){oe.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ne.optSelected||(oe.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this}),ne.enctype||(oe.propFix.enctype="encoding");var Pn=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(t){var e,n,i,o,a,r,s=0,l=this.length,u="string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(_e)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Pn," "):" ")){for(a=0;o=e[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r=oe.trim(i),n.className!==r&&(n.className=r)}return this},removeClass:function(t){var e,n,i,o,a,r,s=0,l=this.length,u=0===arguments.length||"string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(_e)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Pn," "):"")){for(a=0;o=e[a++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");r=t?oe.trim(i):"",n.className!==r&&(n.className=r)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(oe.isFunction(t)?function(n){oe(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,i=0,o=oe(this),a=t.match(_e)||[];e=a[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(n===Ce||"boolean"===n)&&(this.className&&oe._data(this,"__className__",this.className),this.className=this.className||t===!1?"":oe._data(this,"__className__")||"")
})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Pn," ").indexOf(e)>=0)return!0;return!1}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){oe.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),oe.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var En=oe.now(),In=/\?/,An=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;oe.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var n,i=null,o=oe.trim(e+"");return o&&!oe.trim(o.replace(An,function(t,e,o,a){return n&&e&&(i=0),0===i?t:(n=o||e,i+=!a-!o,"")}))?Function("return "+o)():oe.error("Invalid JSON: "+e)},oe.parseXML=function(e){var n,i;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(i=new DOMParser,n=i.parseFromString(e,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e))}catch(o){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+e),n};var Fn,On,Nn=/#.*$/,Rn=/([?&])_=[^&]*/,Bn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Un=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,zn=/^(?:GET|HEAD)$/,jn=/^\/\//,$n=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hn={},Wn={},Vn="*/".concat("*");try{On=location.href}catch(qn){On=fe.createElement("a"),On.href="",On=On.href}Fn=$n.exec(On.toLowerCase())||[],oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:On,type:"GET",isLocal:Un.test(Fn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?j(j(t,oe.ajaxSettings),e):j(oe.ajaxSettings,t)},ajaxPrefilter:U(Hn),ajaxTransport:U(Wn),ajax:function(t,e){function n(t,e,n,i){var o,c,v,y,b,x=e;2!==_&&(_=2,s&&clearTimeout(s),u=void 0,r=i||"",w.readyState=t>0?4:0,o=t>=200&&300>t||304===t,n&&(y=$(d,w,n)),y=H(d,y,w,o),o?(d.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(oe.lastModified[a]=b),b=w.getResponseHeader("etag"),b&&(oe.etag[a]=b)),204===t||"HEAD"===d.type?x="nocontent":304===t?x="notmodified":(x=y.state,c=y.data,v=y.error,o=!v)):(v=x,(t||!x)&&(x="error",0>t&&(t=0))),w.status=t,w.statusText=(e||x)+"",o?f.resolveWith(h,[c,x,w]):f.rejectWith(h,[w,x,v]),w.statusCode(g),g=void 0,l&&p.trigger(o?"ajaxSuccess":"ajaxError",[w,d,o?c:v]),m.fireWith(h,[w,x]),l&&(p.trigger("ajaxComplete",[w,d]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,o,a,r,s,l,u,c,d=oe.ajaxSetup({},e),h=d.context||d,p=d.context&&(h.nodeType||h.jquery)?oe(h):oe.event,f=oe.Deferred(),m=oe.Callbacks("once memory"),g=d.statusCode||{},v={},y={},_=0,b="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!c)for(c={};e=Bn.exec(r);)c[e[1].toLowerCase()]=e[2];e=c[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?r:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return _||(t=y[n]=y[n]||t,v[t]=e),this},overrideMimeType:function(t){return _||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>_)for(e in t)g[e]=[g[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||b;return u&&u.abort(e),n(0,e),this}};if(f.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,d.url=((t||d.url||On)+"").replace(Nn,"").replace(jn,Fn[1]+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=oe.trim(d.dataType||"*").toLowerCase().match(_e)||[""],null==d.crossDomain&&(i=$n.exec(d.url.toLowerCase()),d.crossDomain=!(!i||i[1]===Fn[1]&&i[2]===Fn[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Fn[3]||("http:"===Fn[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=oe.param(d.data,d.traditional)),z(Hn,d,e,w),2===_)return w;l=d.global,l&&0===oe.active++&&oe.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!zn.test(d.type),a=d.url,d.hasContent||(d.data&&(a=d.url+=(In.test(a)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Rn.test(a)?a.replace(Rn,"$1_="+En++):a+(In.test(a)?"&":"?")+"_="+En++)),d.ifModified&&(oe.lastModified[a]&&w.setRequestHeader("If-Modified-Since",oe.lastModified[a]),oe.etag[a]&&w.setRequestHeader("If-None-Match",oe.etag[a])),(d.data&&d.hasContent&&d.contentType!==!1||e.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Vn+"; q=0.01":""):d.accepts["*"]);for(o in d.headers)w.setRequestHeader(o,d.headers[o]);if(d.beforeSend&&(d.beforeSend.call(h,w,d)===!1||2===_))return w.abort();b="abort";for(o in{success:1,error:1,complete:1})w[o](d[o]);if(u=z(Wn,d,e,w)){w.readyState=1,l&&p.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},d.timeout));try{_=1,u.send(v,n)}catch(x){if(!(2>_))throw x;n(-1,x)}}else n(-1,"No Transport");return w},getJSON:function(t,e,n){return oe.get(t,e,n,"json")},getScript:function(t,e){return oe.get(t,void 0,e,"script")}}),oe.each(["get","post"],function(t,e){oe[e]=function(t,n,i,o){return oe.isFunction(n)&&(o=o||i,i=n,n=void 0),oe.ajax({url:t,type:e,dataType:o,data:n,success:i})}}),oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){oe.fn[e]=function(t){return this.on(e,t)}}),oe._evalUrl=function(t){return oe.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},oe.fn.extend({wrapAll:function(t){if(oe.isFunction(t))return this.each(function(e){oe(this).wrapAll(t.call(this,e))});if(this[0]){var e=oe(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(oe.isFunction(t)?function(e){oe(this).wrapInner(t.call(this,e))}:function(){var e=oe(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=oe.isFunction(t);return this.each(function(n){oe(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||oe.css(t,"display"))},oe.expr.filters.visible=function(t){return!oe.expr.filters.hidden(t)};var Gn=/%20/g,Yn=/\[\]$/,Zn=/\r?\n/g,Kn=/^(?:submit|button|image|reset|file)$/i,Jn=/^(?:input|select|textarea|keygen)/i;oe.param=function(t,e){var n,i=[],o=function(t,e){e=oe.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(t)||t.jquery&&!oe.isPlainObject(t))oe.each(t,function(){o(this.name,this.value)});else for(n in t)W(n,t[n],e,o);return i.join("&").replace(Gn,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=oe.prop(this,"elements");return t?oe.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!oe(this).is(":disabled")&&Jn.test(this.nodeName)&&!Kn.test(t)&&(this.checked||!Pe.test(t))}).map(function(t,e){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(t){return{name:e.name,value:t.replace(Zn,"\r\n")}}):{name:e.name,value:n.replace(Zn,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&V()||q()}:V;var Xn=0,Qn={},ti=oe.ajaxSettings.xhr();t.ActiveXObject&&oe(t).on("unload",function(){for(var t in Qn)Qn[t](void 0,!0)}),ne.cors=!!ti&&"withCredentials"in ti,ti=ne.ajax=!!ti,ti&&oe.ajaxTransport(function(t){if(!t.crossDomain||ne.cors){var e;return{send:function(n,i){var o,a=t.xhr(),r=++Xn;if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(o in n)void 0!==n[o]&&a.setRequestHeader(o,n[o]+"");a.send(t.hasContent&&t.data||null),e=function(n,o){var s,l,u;if(e&&(o||4===a.readyState))if(delete Qn[r],e=void 0,a.onreadystatechange=oe.noop,o)4!==a.readyState&&a.abort();else{u={},s=a.status,"string"==typeof a.responseText&&(u.text=a.responseText);try{l=a.statusText}catch(c){l=""}s||!t.isLocal||t.crossDomain?1223===s&&(s=204):s=u.text?200:404}u&&i(s,l,u,a.getAllResponseHeaders())},t.async?4===a.readyState?setTimeout(e):a.onreadystatechange=Qn[r]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return oe.globalEval(t),t}}}),oe.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),oe.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=fe.head||oe("head")[0]||fe.documentElement;return{send:function(i,o){e=fe.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||o(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var ei=[],ni=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ei.pop()||oe.expando+"_"+En++;return this[t]=!0,t}}),oe.ajaxPrefilter("json jsonp",function(e,n,i){var o,a,r,s=e.jsonp!==!1&&(ni.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(o=e.jsonpCallback=oe.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(ni,"$1"+o):e.jsonp!==!1&&(e.url+=(In.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return r||oe.error(o+" was not called"),r[0]},e.dataTypes[0]="json",a=t[o],t[o]=function(){r=arguments},i.always(function(){t[o]=a,e[o]&&(e.jsonpCallback=n.jsonpCallback,ei.push(o)),r&&oe.isFunction(a)&&a(r[0]),r=a=void 0}),"script"):void 0}),oe.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||fe;var i=de.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=oe.buildFragment([t],e,o),o&&o.length&&oe(o).remove(),oe.merge([],i.childNodes))};var ii=oe.fn.load;oe.fn.load=function(t,e,n){if("string"!=typeof t&&ii)return ii.apply(this,arguments);var i,o,a,r=this,s=t.indexOf(" ");return s>=0&&(i=oe.trim(t.slice(s,t.length)),t=t.slice(0,s)),oe.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(a="POST"),r.length>0&&oe.ajax({url:t,type:a,dataType:"html",data:e}).done(function(t){o=arguments,r.html(i?oe("<div>").append(oe.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){r.each(n,o||[t.responseText,e,t])}),this},oe.expr.filters.animated=function(t){return oe.grep(oe.timers,function(e){return t===e.elem}).length};var oi=t.document.documentElement;oe.offset={setOffset:function(t,e,n){var i,o,a,r,s,l,u,c=oe.css(t,"position"),d=oe(t),h={};"static"===c&&(t.style.position="relative"),s=d.offset(),a=oe.css(t,"top"),l=oe.css(t,"left"),u=("absolute"===c||"fixed"===c)&&oe.inArray("auto",[a,l])>-1,u?(i=d.position(),r=i.top,o=i.left):(r=parseFloat(a)||0,o=parseFloat(l)||0),oe.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(h.top=e.top-s.top+r),null!=e.left&&(h.left=e.left-s.left+o),"using"in e?e.using.call(t,h):d.css(h)}},oe.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){oe.offset.setOffset(this,t,e)});var e,n,i={top:0,left:0},o=this[0],a=o&&o.ownerDocument;if(a)return e=a.documentElement,oe.contains(e,o)?(typeof o.getBoundingClientRect!==Ce&&(i=o.getBoundingClientRect()),n=G(a),{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):i},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===oe.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),oe.nodeName(t[0],"html")||(n=t.offset()),n.top+=oe.css(t[0],"borderTopWidth",!0),n.left+=oe.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-oe.css(i,"marginTop",!0),left:e.left-n.left-oe.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||oi;t&&!oe.nodeName(t,"html")&&"static"===oe.css(t,"position");)t=t.offsetParent;return t||oi})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);oe.fn[t]=function(i){return Me(this,function(t,i,o){var a=G(t);return void 0===o?a?e in a?a[e]:a.document.documentElement[i]:t[i]:void(a?a.scrollTo(n?oe(a).scrollLeft():o,n?o:oe(a).scrollTop()):t[i]=o)},t,i,arguments.length,null)}}),oe.each(["top","left"],function(t,e){oe.cssHooks[e]=k(ne.pixelPosition,function(t,n){return n?(n=en(t,e),on.test(n)?oe(t).position()[e]+"px":n):void 0})}),oe.each({Height:"height",Width:"width"},function(t,e){oe.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){oe.fn[i]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),r=n||(i===!0||o===!0?"margin":"border");return Me(this,function(e,n,i){var o;return oe.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?oe.css(e,n,r):oe.style(e,n,i,r)},e,a?i:void 0,a,null)}})}),oe.fn.size=function(){return this.length},oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var ai=t.jQuery,ri=t.$;return oe.noConflict=function(e){return t.$===oe&&(t.$=ri),e&&t.jQuery===oe&&(t.jQuery=ai),oe},typeof e===Ce&&(t.jQuery=t.$=oe),oe}),/*!
 * jQuery Validation Plugin v1.13.1
 *
 * http://jqueryvalidation.org/
 *
 * Copyright (c) 2014 Jörn Zaefferer
 * Released under the MIT license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var n=t.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new t.validator(e,this[0]),t.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){n.settings.submitHandler&&(n.submitButton=e.target),t(e.target).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.submit(function(e){function i(){var i,o;return n.settings.submitHandler?(n.submitButton&&(i=t("<input type='hidden'/>").attr("name",n.submitButton.name).val(t(n.submitButton).val()).appendTo(n.currentForm)),o=n.settings.submitHandler.call(n,n.currentForm,e),n.submitButton&&i.remove(),void 0!==o?o:!1):!0}return n.settings.debug&&e.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)},valid:function(){var e,n;return t(this[0]).is("form")?e=this.validate().form():(e=!0,n=t(this[0].form).validate(),this.each(function(){e=n.element(this)&&e})),e},removeAttrs:function(e){var n={},i=this;return t.each(e.split(/\s/),function(t,e){n[e]=i.attr(e),i.removeAttr(e)}),n},rules:function(e,n){var i,o,a,r,s,l,u=this[0];if(e)switch(i=t.data(u.form,"validator").settings,o=i.rules,a=t.validator.staticRules(u),e){case"add":t.extend(a,t.validator.normalizeRule(n)),delete a.messages,o[u.name]=a,n.messages&&(i.messages[u.name]=t.extend(i.messages[u.name],n.messages));break;case"remove":return n?(l={},t.each(n.split(/\s/),function(e,n){l[n]=a[n],delete a[n],"required"===n&&t(u).removeAttr("aria-required")}),l):(delete o[u.name],a)}return r=t.validator.normalizeRules(t.extend({},t.validator.classRules(u),t.validator.attributeRules(u),t.validator.dataRules(u),t.validator.staticRules(u)),u),r.required&&(s=r.required,delete r.required,r=t.extend({required:s},r),t(u).attr("aria-required","true")),r.remote&&(s=r.remote,delete r.remote,r=t.extend(r,{remote:s})),r}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,n){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=n,this.init()},t.validator.format=function(e,n){return 1===arguments.length?function(){var n=t.makeArray(arguments);return n.unshift(e),t.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=t.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),t.each(n,function(t,n){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return n})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).addClass(n).removeClass(i):t(e).addClass(n).removeClass(i)},unhighlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).removeClass(n).addClass(i):t(e).removeClass(n).addClass(i)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var n=t.data(this[0].form,"validator"),i="on"+e.type.replace(/^validate/,""),o=n.settings;o[i]&&!this.is(o.ignore)&&o[i].call(n,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,i=this.groups={};t.each(this.settings.groups,function(e,n){"string"==typeof n&&(n=n.split(/\s/)),t.each(n,function(t,n){i[n]=e})}),n=this.settings.rules,t.each(n,function(e,i){n[e]=t.validator.normalizeRule(i)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",e).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var n=this.clean(e),i=this.validationTargetFor(n),o=!0;return this.lastElement=i,void 0===i?delete this.invalid[n.name]:(this.prepareElement(i),this.currentElements=t(i),o=this.check(i)!==!1,o?delete this.invalid[i.name]:this.invalid[i.name]=!0),t(e).attr("aria-invalid",!o),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),o},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var n in e)this.errorList.push({message:e[n],element:this.findByName(n)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,n=0;for(e in t)n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,n={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in n||!e.objectLength(t(this).rules())?!1:(n[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var n,i=t(e),o=e.type;return"radio"===o||"checkbox"===o?t("input[name='"+e.name+"']:checked").val():"number"===o&&"undefined"!=typeof e.validity?e.validity.badInput?!1:i.val():(n=i.val(),"string"==typeof n?n.replace(/\r/g,""):n)},check:function(e){e=this.validationTargetFor(this.clean(e));var n,i,o,a=t(e).rules(),r=t.map(a,function(t,e){return e}).length,s=!1,l=this.elementValue(e);for(i in a){o={method:i,parameters:a[i]};try{if(n=t.validator.methods[i].call(this,l,e,o.parameters),"dependency-mismatch"===n&&1===r){s=!0;continue}if(s=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!n)return this.formatAndAdd(e,o),!1}catch(u){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+o.method+"' method.",u),u}}if(!s)return this.objectLength(a)&&this.successList.push(e),!0},customDataMessage:function(e,n){return t(e).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var n=this.settings.messages[t];return n&&(n.constructor===String?n:n[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t];return void 0},defaultMessage:function(e,n){return this.findDefined(this.customMessage(e.name,n),this.customDataMessage(e,n),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[n],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,n){var i=this.defaultMessage(e,n.method),o=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,n.parameters,e):o.test(i)&&(i=t.validator.format(i.replace(o,"{$1}"),n.parameters)),this.errorList.push({message:i,element:e,method:n.method}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,n;for(t=0;this.errorList[t];t++)n=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,n){var i,o,a,r=this.errorsFor(e),s=this.idOrName(e),l=t(e).attr("aria-describedby");r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(n)):(r=t("<"+this.settings.errorElement+">").attr("id",s+"-error").addClass(this.settings.errorClass).html(n||""),i=r,this.settings.wrapper&&(i=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement(i,t(e)):i.insertAfter(e),r.is("label")?r.attr("for",s):0===r.parents("label[for='"+s+"']").length&&(a=r.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),l?l.match(new RegExp("\\b"+a+"\\b"))||(l+=" "+a):l=a,t(e).attr("aria-describedby",l),o=this.groups[e.name],o&&t.each(this.groups,function(e,n){n===o&&t("[name='"+e+"']",this.currentForm).attr("aria-describedby",r.attr("id"))}))),!n&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,e)),this.toShow=this.toShow.add(r)},errorsFor:function(e){var n=this.idOrName(e),i=t(e).attr("aria-describedby"),o="label[for='"+n+"'], label[for='"+n+"'] *";return i&&(o=o+", #"+i.replace(/\s+/g,", #")),this.errors().filter(o)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,n){switch(n.nodeName.toLowerCase()){case"select":return t("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t){return t},string:function(e,n){return!!t(e,n.form).length},"function":function(t,e){return t(e)}},optional:function(e){var n=this.elementValue(e);return!t.validator.methods.required.call(this,n,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,n){e.constructor===String?this.classRuleSettings[e]=n:t.extend(this.classRuleSettings,e)},classRules:function(e){var n={},i=t(e).attr("class");return i&&t.each(i.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(n,t.validator.classRuleSettings[this])}),n},attributeRules:function(e){var n,i,o={},a=t(e),r=e.getAttribute("type");for(n in t.validator.methods)"required"===n?(i=e.getAttribute(n),""===i&&(i=!0),i=!!i):i=a.attr(n),/min|max/.test(n)&&(null===r||/number|range|text/.test(r))&&(i=Number(i)),i||0===i?o[n]=i:r===n&&"range"!==r&&(o[n]=!0);return o.maxlength&&/-1|2147483647|524288/.test(o.maxlength)&&delete o.maxlength,o},dataRules:function(e){var n,i,o={},a=t(e);for(n in t.validator.methods)i=a.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),void 0!==i&&(o[n]=i);return o},staticRules:function(e){var n={},i=t.data(e.form,"validator");return i.settings.rules&&(n=t.validator.normalizeRule(i.settings.rules[e.name])||{}),n},normalizeRules:function(e,n){return t.each(e,function(i,o){if(o===!1)return void delete e[i];if(o.param||o.depends){var a=!0;switch(typeof o.depends){case"string":a=!!t(o.depends,n.form).length;break;case"function":a=o.depends.call(n,n)}a?e[i]=void 0!==o.param?o.param:!0:delete e[i]}}),t.each(e,function(i,o){e[i]=t.isFunction(o)?o(n):o}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var n;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(n=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(n[0]),Number(n[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var n={};t.each(e.split(/\s/),function(){n[this]=!0}),e=n}return e},addMethod:function(e,n,i){t.validator.methods[e]=n,t.validator.messages[e]=void 0!==i?i:t.validator.messages[e],n.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var o=t(n).val();return o&&o.length>0}return this.checkable(n)?this.getLength(e,n)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var n,i,o=0,a=0,r=!1;if(t=t.replace(/\D/g,""),t.length<13||t.length>19)return!1;for(n=t.length-1;n>=0;n--)i=t.charAt(n),a=parseInt(i,10),r&&(a*=2)>9&&(a-=9),o+=a,r=!r;return o%10===0},minlength:function(e,n,i){var o=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||o>=i},maxlength:function(e,n,i){var o=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||i>=o},rangelength:function(e,n,i){var o=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||o>=i[0]&&o<=i[1]},min:function(t,e,n){return this.optional(e)||t>=n},max:function(t,e,n){return this.optional(e)||n>=t},range:function(t,e,n){return this.optional(e)||t>=n[0]&&t<=n[1]},equalTo:function(e,n,i){var o=t(i);return this.settings.onfocusout&&o.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(n).valid()}),e===o.val()},remote:function(e,n,i){if(this.optional(n))return"dependency-mismatch";var o,a,r=this.previousValue(n);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),r.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=r.message,i="string"==typeof i&&{url:i}||i,r.old===e?r.valid:(r.old=e,o=this,this.startRequest(n),a={},a[n.name]=e,t.ajax(t.extend(!0,{url:i,mode:"abort",port:"validate"+n.name,dataType:"json",data:a,context:o.currentForm,success:function(i){var a,s,l,u=i===!0||"true"===i;o.settings.messages[n.name].remote=r.originalMessage,u?(l=o.formSubmitted,o.prepareElement(n),o.formSubmitted=l,o.successList.push(n),delete o.invalid[n.name],o.showErrors()):(a={},s=i||o.defaultMessage(n,"remote"),a[n.name]=r.message=t.isFunction(s)?s(e):s,o.invalid[n.name]=!0,o.showErrors(a)),r.valid=u,o.stopRequest(n,u)}},i)),"pending")}}}),t.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var e,n={};t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,i){var o=t.port;"abort"===t.mode&&(n[o]&&n[o].abort(),n[o]=i)}):(e=t.ajax,t.ajax=function(i){var o=("mode"in i?i:t.ajaxSettings).mode,a=("port"in i?i:t.ajaxSettings).port;return"abort"===o?(n[a]&&n[a].abort(),n[a]=e.apply(this,arguments),n[a]):e.apply(this,arguments)}),t.extend(t.fn,{validateDelegate:function(e,n,i){return this.bind(n,function(n){var o=t(n.target);return o.is(e)?i.apply(o,arguments):void 0})}})}),/*!
 * jQuery Validation Plugin v1.13.1
 *
 * http://jqueryvalidation.org/
 *
 * Copyright (c) 2014 Jörn Zaefferer
 * Released under the MIT license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","./jquery.validate"],t):t(jQuery)}(function(t){!function(){function e(t){return t.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[.(),;:!?%#$'\"_+=\/\-\u201c\u201d\u2019]*/g,"")}t.validator.addMethod("maxWords",function(t,n,i){return this.optional(n)||e(t).match(/\b\w+\b/g).length<=i},t.validator.format("Please enter {0} words or less.")),t.validator.addMethod("minWords",function(t,n,i){return this.optional(n)||e(t).match(/\b\w+\b/g).length>=i},t.validator.format("Please enter at least {0} words.")),t.validator.addMethod("rangeWords",function(t,n,i){var o=e(t),a=/\b\w+\b/g;return this.optional(n)||o.match(a).length>=i[0]&&o.match(a).length<=i[1]},t.validator.format("Please enter between {0} and {1} words."))}(),t.validator.addMethod("accept",function(e,n,i){var o,a,r="string"==typeof i?i.replace(/\s/g,"").replace(/,/g,"|"):"image/*",s=this.optional(n);if(s)return s;if("file"===t(n).attr("type")&&(r=r.replace(/\*/g,".*"),n.files&&n.files.length))for(o=0;o<n.files.length;o++)if(a=n.files[o],!a.type.match(new RegExp(".?("+r+")$","i")))return!1;return!0},t.validator.format("Please enter a value with a valid mimetype.")),t.validator.addMethod("alphanumeric",function(t,e){return this.optional(e)||/^\w+$/i.test(t)},"Letters, numbers, and underscores only please"),t.validator.addMethod("bankaccountNL",function(t,e){if(this.optional(e))return!0;if(!/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(t))return!1;var n,i,o,a=t.replace(/ /g,""),r=0,s=a.length;for(n=0;s>n;n++)i=s-n,o=a.substring(n,n+1),r+=i*o;return r%11===0},"Please specify a valid bank account number"),t.validator.addMethod("bankorgiroaccountNL",function(e,n){return this.optional(n)||t.validator.methods.bankaccountNL.call(this,e,n)||t.validator.methods.giroaccountNL.call(this,e,n)},"Please specify a valid bank or giro account number"),t.validator.addMethod("bic",function(t,e){return this.optional(e)||/^([A-Z]{6}[A-Z2-9][A-NP-Z1-2])(X{3}|[A-WY-Z0-9][A-Z0-9]{2})?$/.test(t)},"Please specify a valid BIC code"),t.validator.addMethod("cifES",function(t){"use strict";var e,n,i,o,a,r,s=[];if(t=t.toUpperCase(),!t.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)"))return!1;for(i=0;9>i;i++)s[i]=parseInt(t.charAt(i),10);for(n=s[2]+s[4]+s[6],o=1;8>o;o+=2)a=(2*s[o]).toString(),r=a.charAt(1),n+=parseInt(a.charAt(0),10)+(""===r?0:parseInt(r,10));return/^[ABCDEFGHJNPQRSUVW]{1}/.test(t)?(n+="",e=10-parseInt(n.charAt(n.length-1),10),t+=e,s[8].toString()===String.fromCharCode(64+e)||s[8].toString()===t.charAt(t.length-1)):!1},"Please specify a valid CIF number."),t.validator.addMethod("creditcardtypes",function(t,e,n){if(/[^0-9\-]+/.test(t))return!1;t=t.replace(/\D/g,"");var i=0;return n.mastercard&&(i|=1),n.visa&&(i|=2),n.amex&&(i|=4),n.dinersclub&&(i|=8),n.enroute&&(i|=16),n.discover&&(i|=32),n.jcb&&(i|=64),n.unknown&&(i|=128),n.all&&(i=255),1&i&&/^(5[12345])/.test(t)?16===t.length:2&i&&/^(4)/.test(t)?16===t.length:4&i&&/^(3[47])/.test(t)?15===t.length:8&i&&/^(3(0[012345]|[68]))/.test(t)?14===t.length:16&i&&/^(2(014|149))/.test(t)?15===t.length:32&i&&/^(6011)/.test(t)?16===t.length:64&i&&/^(3)/.test(t)?16===t.length:64&i&&/^(2131|1800)/.test(t)?15===t.length:128&i?!0:!1},"Please enter a valid credit card number."),t.validator.addMethod("currency",function(t,e,n){var i,o="string"==typeof n,a=o?n:n[0],r=o?!0:n[1];return a=a.replace(/,/g,""),a=r?a+"]":a+"]?",i="^["+a+"([1-9]{1}[0-9]{0,2}(\\,[0-9]{3})*(\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\.[0-9]{0,2})?|0(\\.[0-9]{0,2})?|(\\.[0-9]{1,2})?)$",i=new RegExp(i),this.optional(e)||i.test(t)},"Please specify a valid currency"),t.validator.addMethod("dateFA",function(t,e){return this.optional(e)||/^[1-4]\d{3}\/((0?[1-6]\/((3[0-1])|([1-2][0-9])|(0?[1-9])))|((1[0-2]|(0?[7-9]))\/(30|([1-2][0-9])|(0?[1-9]))))$/.test(t)},"Please enter a correct date"),t.validator.addMethod("dateITA",function(t,e){var n,i,o,a,r,s=!1,l=/^\d{1,2}\/\d{1,2}\/\d{4}$/;return l.test(t)?(n=t.split("/"),i=parseInt(n[0],10),o=parseInt(n[1],10),a=parseInt(n[2],10),r=new Date(a,o-1,i,12,0,0,0),s=r.getUTCFullYear()===a&&r.getUTCMonth()===o-1&&r.getUTCDate()===i?!0:!1):s=!1,this.optional(e)||s},"Please enter a correct date"),t.validator.addMethod("dateNL",function(t,e){return this.optional(e)||/^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(t)},"Please enter a correct date"),t.validator.addMethod("extension",function(t,e,n){return n="string"==typeof n?n.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(e)||t.match(new RegExp(".("+n+")$","i"))},t.validator.format("Please enter a value with a valid extension.")),t.validator.addMethod("giroaccountNL",function(t,e){return this.optional(e)||/^[0-9]{1,7}$/.test(t)},"Please specify a valid giro account number"),t.validator.addMethod("iban",function(t,e){if(this.optional(e))return!0;var n,i,o,a,r,s,l,u,c,d=t.replace(/ /g,"").toUpperCase(),h="",p=!0,f="",m="";if(!/^([a-zA-Z0-9]{4} ){2,8}[a-zA-Z0-9]{1,4}|[a-zA-Z0-9]{12,34}$/.test(d))return!1;if(n=d.substring(0,2),s={AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"},r=s[n],"undefined"!=typeof r&&(l=new RegExp("^[A-Z]{2}\\d{2}"+r+"$",""),!l.test(d)))return!1;for(i=d.substring(4,d.length)+d.substring(0,4),u=0;u<i.length;u++)o=i.charAt(u),"0"!==o&&(p=!1),p||(h+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(o));for(c=0;c<h.length;c++)a=h.charAt(c),m=""+f+a,f=m%97;return 1===f},"Please specify a valid IBAN"),t.validator.addMethod("integer",function(t,e){return this.optional(e)||/^-?\d+$/.test(t)},"A positive or negative non-decimal number please"),t.validator.addMethod("ipv4",function(t,e){return this.optional(e)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(t)},"Please enter a valid IP v4 address."),t.validator.addMethod("ipv6",function(t,e){return this.optional(e)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(t)},"Please enter a valid IP v6 address."),t.validator.addMethod("lettersonly",function(t,e){return this.optional(e)||/^[a-z]+$/i.test(t)},"Letters only please"),t.validator.addMethod("letterswithbasicpunc",function(t,e){return this.optional(e)||/^[a-z\-.,()'"\s]+$/i.test(t)},"Letters or punctuation only please"),t.validator.addMethod("mobileNL",function(t,e){return this.optional(e)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(t)},"Please specify a valid mobile number"),t.validator.addMethod("mobileUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||t.length>9&&t.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[1345789]\d{2}|624)\s?\d{3}\s?\d{3})$/)},"Please specify a valid mobile number"),t.validator.addMethod("nieES",function(t){"use strict";return t=t.toUpperCase(),t.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")?/^[T]{1}/.test(t)?t[8]===/^[T]{1}[A-Z0-9]{8}$/.test(t):/^[XYZ]{1}/.test(t)?t[8]==="TRWAGMYFPDXBNJZSQVHLCKE".charAt(t.replace("X","0").replace("Y","1").replace("Z","2").substring(0,8)%23):!1:!1},"Please specify a valid NIE number."),t.validator.addMethod("nifES",function(t){"use strict";return t=t.toUpperCase(),t.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")?/^[0-9]{8}[A-Z]{1}$/.test(t)?"TRWAGMYFPDXBNJZSQVHLCKE".charAt(t.substring(8,0)%23)===t.charAt(8):/^[KLM]{1}/.test(t)?t[8]===String.fromCharCode(64):!1:!1},"Please specify a valid NIF number."),t.validator.addMethod("nowhitespace",function(t,e){return this.optional(e)||/^\S+$/i.test(t)},"No white space please"),t.validator.addMethod("pattern",function(t,e,n){return this.optional(e)?!0:("string"==typeof n&&(n=new RegExp("^(?:"+n+")$")),n.test(t))},"Invalid format."),t.validator.addMethod("phoneNL",function(t,e){return this.optional(e)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(t)},"Please specify a valid phone number."),t.validator.addMethod("phoneUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||t.length>9&&t.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/)},"Please specify a valid phone number"),t.validator.addMethod("phoneUS",function(t,e){return t=t.replace(/\s+/g,""),this.optional(e)||t.length>9&&t.match(/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]([02-9]\d|1[02-9])-?\d{4}$/)},"Please specify a valid phone number"),t.validator.addMethod("phonesUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||t.length>9&&t.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[1345789]\d{8}|624\d{6})))$/)},"Please specify a valid uk phone number"),t.validator.addMethod("postalCodeCA",function(t,e){return this.optional(e)||/^[ABCEGHJKLMNPRSTVXY]\d[A-Z] \d[A-Z]\d$/.test(t)},"Please specify a valid postal code"),t.validator.addMethod("postalcodeBR",function(t,e){return this.optional(e)||/^\d{2}.\d{3}-\d{3}?$|^\d{5}-?\d{3}?$/.test(t)},"Informe um CEP v\xe1lido."),t.validator.addMethod("postalcodeIT",function(t,e){return this.optional(e)||/^\d{5}$/.test(t)},"Please specify a valid postal code"),t.validator.addMethod("postalcodeNL",function(t,e){return this.optional(e)||/^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(t)},"Please specify a valid postal code"),t.validator.addMethod("postcodeUK",function(t,e){return this.optional(e)||/^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(t)},"Please specify a valid UK postcode"),t.validator.addMethod("require_from_group",function(e,n,i){var o=t(i[1],n.form),a=o.eq(0),r=a.data("valid_req_grp")?a.data("valid_req_grp"):t.extend({},this),s=o.filter(function(){return r.elementValue(this)}).length>=i[0];return a.data("valid_req_grp",r),t(n).data("being_validated")||(o.data("being_validated",!0),o.each(function(){r.element(this)}),o.data("being_validated",!1)),s},t.validator.format("Please fill at least {0} of these fields.")),t.validator.addMethod("skip_or_fill_minimum",function(e,n,i){var o=t(i[1],n.form),a=o.eq(0),r=a.data("valid_skip")?a.data("valid_skip"):t.extend({},this),s=o.filter(function(){return r.elementValue(this)}).length,l=0===s||s>=i[0];return a.data("valid_skip",r),t(n).data("being_validated")||(o.data("being_validated",!0),o.each(function(){r.element(this)}),o.data("being_validated",!1)),l},t.validator.format("Please either skip these fields or fill at least {0} of them.")),jQuery.validator.addMethod("stateUS",function(t,e,n){var i,o="undefined"==typeof n,a=o||"undefined"==typeof n.caseSensitive?!1:n.caseSensitive,r=o||"undefined"==typeof n.includeTerritories?!1:n.includeTerritories,s=o||"undefined"==typeof n.includeMilitary?!1:n.includeMilitary;return i=r||s?r&&s?"^(A[AEKLPRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":r?"^(A[KLRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":"^(A[AEKLPRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$":"^(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$",i=a?new RegExp(i):new RegExp(i,"i"),this.optional(e)||i.test(t)},"Please specify a valid state"),t.validator.addMethod("strippedminlength",function(e,n,i){return t(e).text().length>=i},t.validator.format("Please enter at least {0} characters")),t.validator.addMethod("time",function(t,e){return this.optional(e)||/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/.test(t)},"Please enter a valid time, between 00:00 and 23:59"),t.validator.addMethod("time12h",function(t,e){return this.optional(e)||/^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(t)},"Please enter a valid time in 12-hour am/pm format"),t.validator.addMethod("url2",function(t,e){return this.optional(e)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},t.validator.messages.url),t.validator.addMethod("vinUS",function(t){if(17!==t.length)return!1;var e,n,i,o,a,r,s=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y","Z"],l=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],u=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],c=0;for(e=0;17>e;e++){if(o=u[e],i=t.slice(e,e+1),8===e&&(r=i),isNaN(i)){for(n=0;n<s.length;n++)if(i.toUpperCase()===s[n]){i=l[n],i*=o,isNaN(r)&&8===n&&(r=s[n]);break}}else i*=o;c+=i}return a=c%11,10===a&&(a="X"),a===r?!0:!1},"The specified vehicle identification number (VIN) is invalid."),t.validator.addMethod("zipcodeUS",function(t,e){return this.optional(e)||/^\d{5}(-\d{4})?$/.test(t)},"The specified US ZIP Code is invalid"),t.validator.addMethod("ziprange",function(t,e){return this.optional(e)||/^90[2-5]\d\{2\}-\d{4}$/.test(t)},"Your ZIP-code must be in the range 902xx-xxxx to 905xx-xxxx")}),/*
 *
 * Copyright (c) 2006-2014 Sam Collett (http://www.texotela.co.uk)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version 1.4.1
 * Demo: http://www.texotela.co.uk/code/jquery/numeric/
 *
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){t.fn.numeric=function(e,n){"boolean"==typeof e&&(e={decimal:e,negative:!0,decimalPlaces:-1}),e=e||{},"undefined"==typeof e.negative&&(e.negative=!0);var i=e.decimal===!1?"":e.decimal||".",o=e.negative===!0?!0:!1,a="undefined"==typeof e.decimalPlaces?-1:e.decimalPlaces;return n="function"==typeof n?n:function(){},this.data("numeric.decimal",i).data("numeric.negative",o).data("numeric.callback",n).data("numeric.decimalPlaces",a).keypress(t.fn.numeric.keypress).keyup(t.fn.numeric.keyup).blur(t.fn.numeric.blur)},t.fn.numeric.keypress=function(e){var n=t.data(this,"numeric.decimal"),i=t.data(this,"numeric.negative"),o=t.data(this,"numeric.decimalPlaces"),a=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(13==a&&"input"==this.nodeName.toLowerCase())return!0;if(13==a)return!1;if(35==a||36==a||37==a)return!1;var r=!1;if(e.ctrlKey&&97==a||e.ctrlKey&&65==a)return!0;if(e.ctrlKey&&120==a||e.ctrlKey&&88==a)return!0;if(e.ctrlKey&&99==a||e.ctrlKey&&67==a)return!0;if(e.ctrlKey&&122==a||e.ctrlKey&&90==a)return!0;if(e.ctrlKey&&118==a||e.ctrlKey&&86==a||e.shiftKey&&45==a)return!0;if(48>a||a>57){var s=t(this).val();if(0!==t.inArray("-",s.split(""))&&i&&45==a&&(0===s.length||0===parseInt(t.fn.getSelectionStart(this),10)))return!0;n&&a==n.charCodeAt(0)&&-1!=t.inArray(n,s.split(""))&&(r=!1),8!=a&&9!=a&&13!=a&&35!=a&&36!=a&&37!=a&&39!=a&&46!=a?r=!1:"undefined"!=typeof e.charCode&&(e.keyCode==e.which&&0!==e.which?(r=!0,46==e.which&&(r=!1)):0!==e.keyCode&&0===e.charCode&&0===e.which&&(r=!0)),n&&a==n.charCodeAt(0)&&(r=-1==t.inArray(n,s.split(""))?!0:!1)}else if(r=!0,n&&o>0){var l=t.fn.getSelectionStart(this),u=t.fn.getSelectionEnd(this),c=t.inArray(n,t(this).val().split(""));l===u&&c>=0&&l>c&&t(this).val().length>c+o&&(r=!1)}return r},t.fn.numeric.keyup=function(){var e=t(this).val();if(e&&e.length>0){var n=t.fn.getSelectionStart(this),i=t.fn.getSelectionEnd(this),o=t.data(this,"numeric.decimal"),a=t.data(this,"numeric.negative"),r=t.data(this,"numeric.decimalPlaces");if(""!==o&&null!==o){var s=t.inArray(o,e.split(""));0===s&&(this.value="0"+e,n++,i++),1==s&&"-"==e.charAt(0)&&(this.value="-0"+e.substring(1),n++,i++),e=this.value}for(var l=[0,1,2,3,4,5,6,7,8,9,"-",o],u=e.length,c=u-1;c>=0;c--){var d=e.charAt(c);0!==c&&"-"==d?e=e.substring(0,c)+e.substring(c+1):0!==c||a||"-"!=d||(e=e.substring(1));for(var h=!1,p=0;p<l.length;p++)if(d==l[p]){h=!0;break}h&&" "!=d||(e=e.substring(0,c)+e.substring(c+1))}var f=t.inArray(o,e.split(""));if(f>0)for(var m=u-1;m>f;m--){var g=e.charAt(m);g==o&&(e=e.substring(0,m)+e.substring(m+1))}if(o&&r>0){var s=t.inArray(o,e.split(""));s>=0&&(e=e.substring(0,s+r+1),i=Math.min(e.length,i))}this.value=e,t.fn.setSelection(this,[n,i])}},t.fn.numeric.blur=function(){var e=t.data(this,"numeric.decimal"),n=t.data(this,"numeric.callback"),i=t.data(this,"numeric.negative"),o=this.value;if(""!==o){var a=new RegExp("^"+(i?"-?":"")+"\\d+$|^"+(i?"-?":"")+"\\d*"+e+"\\d+$");a.exec(o)||n.apply(this)}},t.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).data("numeric.decimalPlaces",null).unbind("keypress",t.fn.numeric.keypress).unbind("keyup",t.fn.numeric.keyup).unbind("blur",t.fn.numeric.blur)},t.fn.getSelectionStart=function(t){if("number"===t.type)return void 0;if(t.createTextRange&&document.selection){var e=document.selection.createRange().duplicate();return e.moveEnd("character",t.value.length),""==e.text?t.value.length:Math.max(0,t.value.lastIndexOf(e.text))}try{return t.selectionStart}catch(n){return 0}},t.fn.getSelectionEnd=function(t){if("number"===t.type)return void 0;if(t.createTextRange&&document.selection){var e=document.selection.createRange().duplicate();return e.moveStart("character",-t.value.length),e.text.length}return t.selectionEnd},t.fn.setSelection=function(t,e){if("number"==typeof e&&(e=[e,e]),e&&e.constructor==Array&&2==e.length)if("number"===t.type)t.focus();else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveStart("character",e[0]),n.moveEnd("character",e[1]-e[0]),n.select()}else{t.focus();try{t.setSelectionRange&&t.setSelectionRange(e[0],e[1])}catch(i){}}}}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),/* ========================================================================
 * Bootstrap: transition.js v3.3.4
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});var o=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),/* ========================================================================
 * Bootstrap: alert.js v3.3.4
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new i(this)),"string"==typeof e&&o[e].call(n)})}var n='[data-dismiss="alert"]',i=function(e){t(e).on("click",n,this.close)};i.VERSION="3.3.4",i.TRANSITION_DURATION=150,i.prototype.close=function(e){function n(){r.detach().trigger("closed.bs.alert").remove()}var o=t(this),a=o.attr("data-target");a||(a=o.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,""));var r=t(a);e&&e.preventDefault(),r.length||(r=o.closest(".alert")),r.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var o=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=o,this},t(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),/* ========================================================================
 * Bootstrap: button.js v3.3.4
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.button"),a="object"==typeof e&&e;o||i.data("bs.button",o=new n(this,a)),"toggle"==e?o.toggle():e&&o.setState(e)})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.4",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",i=this.$element,o=i.is("input")?"val":"html",a=i.data();e+="Text",null==a.resetText&&i.data("resetText",i[o]()),setTimeout(t.proxy(function(){i[o](null==a[e]?this.options[e]:a[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=t(n.target);i.hasClass("btn")||(i=i.closest(".btn")),e.call(i,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),/* ========================================================================
 * Bootstrap: carousel.js v3.3.4
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.carousel"),a=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e),r="string"==typeof e?e:a.slide;o||i.data("bs.carousel",o=new n(this,a)),"number"==typeof e?o.to(e):r?o[r]():a.interval&&o.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e),i="prev"==t&&0===n||"next"==t&&n==this.$items.length-1;if(i&&!this.options.wrap)return e;var o="prev"==t?-1:1,a=(n+o)%this.$items.length;return this.$items.eq(a)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(e,i){var o=this.$element.find(".item.active"),a=i||this.getItemForDirection(e,o),r=this.interval,s="next"==e?"left":"right",l=this;if(a.hasClass("active"))return this.sliding=!1;var u=a[0],c=t.Event("slide.bs.carousel",{relatedTarget:u,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=t(this.$indicators.children()[this.getItemIndex(a)]);d&&d.addClass("active")}var h=t.Event("slid.bs.carousel",{relatedTarget:u,direction:s});return t.support.transition&&this.$element.hasClass("slide")?(a.addClass(e),a[0].offsetWidth,o.addClass(s),a.addClass(s),o.one("bsTransitionEnd",function(){a.removeClass([e,s].join(" ")).addClass("active"),o.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(h)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(o.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger(h)),r&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var o=function(n){var i,o=t(this),a=t(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(a.hasClass("carousel")){var r=t.extend({},a.data(),o.data()),s=o.attr("data-slide-to");s&&(r.interval=!1),e.call(a,r),s&&a.data("bs.carousel").to(s),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),/* ========================================================================
 * Bootstrap: collapse.js v3.3.4
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){var n,i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function n(e){return this.each(function(){var n=t(this),o=n.data("bs.collapse"),a=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!o&&a.toggle&&/show|hide/.test(e)&&(a.toggle=!1),o||n.data("bs.collapse",o=new i(this,a)),"string"==typeof e&&o[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.4",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"),e&&e.transitioning))){var a=t.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),e||o.data("bs.collapse",null));var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var l=t.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[r](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(i.TRANSITION_DURATION):o.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,i){var o=t(i);this.addAriaAndCollapsedClass(e(o),o)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var o=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var o=t(this);o.attr("data-target")||i.preventDefault();var a=e(o),r=a.data("bs.collapse"),s=r?"toggle":o.data();n.call(a,s)})}(jQuery),/* ========================================================================
 * Bootstrap: dropdown.js v3.3.4
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){e&&3===e.which||(t(o).remove(),t(a).each(function(){var i=t(this),o=n(i),a={relatedTarget:this};o.hasClass("open")&&(o.trigger(e=t.Event("hide.bs.dropdown",a)),e.isDefaultPrevented()||(i.attr("aria-expanded","false"),o.removeClass("open").trigger("hidden.bs.dropdown",a)))}))}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),"string"==typeof e&&i[e].call(n)})}var o=".dropdown-backdrop",a='[data-toggle="dropdown"]',r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.VERSION="3.3.4",r.prototype.toggle=function(i){var o=t(this);if(!o.is(".disabled, :disabled")){var a=n(o),r=a.hasClass("open");if(e(),!r){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var s={relatedTarget:this};if(a.trigger(i=t.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},r.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var o=n(i),r=o.hasClass("open");if(!r&&27!=e.which||r&&27==e.which)return 27==e.which&&o.find(a).trigger("focus"),i.trigger("click");var s=" li:not(.disabled):visible a",l=o.find('[role="menu"]'+s+', [role="listbox"]'+s);if(l.length){var u=l.index(e.target);38==e.which&&u>0&&u--,40==e.which&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",a,r.prototype.toggle).on("keydown.bs.dropdown.data-api",a,r.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',r.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',r.prototype.keydown)}(jQuery),/* ========================================================================
 * Bootstrap: modal.js v3.3.4
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e,i){return this.each(function(){var o=t(this),a=o.data("bs.modal"),r=t.extend({},n.DEFAULTS,o.data(),"object"==typeof e&&e);a||o.data("bs.modal",a=new n(this,r)),"string"==typeof e?a[e](i):r.show&&a.show(i)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var i=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),o&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var a=t.Event("shown.bs.modal",{relatedTarget:e});o?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(a)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=t.support.transition&&o;if(this.$backdrop=t('<div class="modal-backdrop '+o+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;a?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):r()}else e&&e()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),o=i.attr("href"),a=t(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),r=a.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},a.data(),i.data());i.is("a")&&n.preventDefault(),a.one("show.bs.modal",function(t){t.isDefaultPrevented()||a.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(a,r,this)})}(jQuery),/* ========================================================================
 * Bootstrap: tooltip.js v3.3.4
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.tooltip"),a="object"==typeof e&&e;(o||!/destroy|hide/.test(e))&&(o||i.data("bs.tooltip",o=new n(this,a)),"string"==typeof e&&o[e]())})}var n=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",t,e)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),a=o.length;a--;){var r=o[a];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var s="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var o=this,a=this.tip(),r=this.getUID(this.type);this.setContent(),a.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&a.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(s);u&&(s=s.replace(l,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element);var c=this.getPosition(),d=a[0].offsetWidth,h=a[0].offsetHeight;if(u){var p=s,f=this.options.container?t(this.options.container):this.$element.parent(),m=this.getPosition(f);s="bottom"==s&&c.bottom+h>m.bottom?"top":"top"==s&&c.top-h<m.top?"bottom":"right"==s&&c.right+d>m.width?"left":"left"==s&&c.left-d<m.left?"right":s,a.removeClass(p).addClass(s)}var g=this.getCalculatedOffset(s,c,d,h);this.applyPlacement(g,s);var v=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),o=i[0].offsetWidth,a=i[0].offsetHeight,r=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(s)&&(s=0),e.top=e.top+r,e.left=e.left+s,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;"top"==n&&u!=a&&(e.top=e.top+a-u);var c=this.getViewportAdjustedDelta(n,e,l,u);c.left?e.left+=c.left:e.top+=c.top;var d=/top|bottom/.test(n),h=d?2*c.left-o+l:2*c.top-a+u,p=d?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(h,i[0][p],d)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=o.hoverState&&a.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),e&&e()}var o=this,a=t(this.$tip),r=t.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],i="BODY"==n.tagName,o=n.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var a=i?{top:0,left:0}:e.offset(),r={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},s=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,r,s,a)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var a=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-a-r.scroll,l=e.top+a-r.scroll+i;s<r.top?o.top=r.top-s:l>r.top+r.height&&(o.top=r.top+r.height-l)}else{var u=e.left-a,c=e.left+a+n;u<r.left?o.left=r.left-u:c>r.width&&(o.left=r.left+r.width-c)}return o},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),/* ========================================================================
 * Bootstrap: popover.js v3.3.4
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.popover"),a="object"==typeof e&&e;(o||!/destroy|hide/.test(e))&&(o||i.data("bs.popover",o=new n(this,a)),"string"==typeof e&&o[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.4",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),/* ========================================================================
 * Bootstrap: scrollspy.js v3.3.4
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(n,i){this.$body=t(document.body),this.$scrollElement=t(t(n).is(document.body)?window:n),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=t(this),o=i.data("bs.scrollspy"),a="object"==typeof n&&n;o||i.data("bs.scrollspy",o=new e(this,a)),"string"==typeof n&&o[n]()})}e.VERSION="3.3.4",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),o=e.data("target")||e.attr("href"),a=/^#./.test(o)&&t(o);return a&&a.length&&a.is(":visible")&&[[a[n]().top+i,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),o=this.offsets,a=this.targets,r=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=i)return r!=(t=a[a.length-1])&&this.activate(t);if(r&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)r!=a[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(a[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),/* ========================================================================
 * Bootstrap: tab.js v3.3.4
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.tab");o||i.data("bs.tab",o=new n(this)),"string"==typeof e&&o[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=n.find(".active:last a"),a=t.Event("hide.bs.tab",{relatedTarget:e[0]}),r=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(a),e.trigger(r),!r.isDefaultPrevented()&&!a.isDefaultPrevented()){var s=t(i);this.activate(e.closest("li"),n),this.activate(s,s.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},n.prototype.activate=function(e,i,o){function a(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var r=i.find("> .active"),s=o&&t.support.transition&&(r.length&&r.hasClass("fade")||!!i.find("> .fade").length);r.length&&s?r.one("bsTransitionEnd",a).emulateTransitionEnd(n.TRANSITION_DURATION):a(),r.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var o=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),/* ========================================================================
 * Bootstrap: affix.js v3.3.4
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.affix"),a="object"==typeof e&&e;o||i.data("bs.affix",o=new n(this,a)),"string"==typeof e&&o[e]()})}var n=function(e,i){this.options=t.extend({},n.DEFAULTS,i),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.4",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,i){var o=this.$target.scrollTop(),a=this.$element.offset(),r=this.$target.height();if(null!=n&&"top"==this.affixed)return n>o?"top":!1;if("bottom"==this.affixed)return null!=n?o+this.unpin<=a.top?!1:"bottom":t-i>=o+r?!1:"bottom";var s=null==this.affixed,l=s?o:a.top,u=s?r:e;return null!=n&&n>=o?"top":null!=i&&l+u>=t-i?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),i=this.options.offset,o=i.top,a=i.bottom,r=t(document.body).height();"object"!=typeof i&&(a=o=i),"function"==typeof o&&(o=i.top(this.$element)),"function"==typeof a&&(a=i.bottom(this.$element));var s=this.getState(r,e,o,a);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),u=t.Event(l+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:r-e-a})}};var i=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),e.call(n,i)})})}(jQuery),//! moment.js
//! version : 2.10.2
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function t(){return Di.apply(null,arguments)}function e(t){Di=t}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function o(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function a(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function s(t,e){for(var n in e)r(e,n)&&(t[n]=e[n]);return r(e,"toString")&&(t.toString=e.toString),r(e,"valueOf")&&(t.valueOf=e.valueOf),t}function l(t,e,n,i){return Le(t,e,n,i,!0).utc()}function u(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&void 0===t._pf.bigHour)),t._isValid}function c(t){var e=l(0/0);return null!=t?s(e._pf,t):e._pf.userInvalidated=!0,e}function d(t,e){var n,i,o;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),Mi.length>0)for(n in Mi)i=Mi[n],o=e[i],"undefined"!=typeof o&&(t[i]=o);return t}function h(e){d(this,e),this._d=new Date(+e._d),Pi===!1&&(Pi=!0,t.updateOffset(this),Pi=!1)}function p(t){return t instanceof h||null!=t&&r(t,"_isAMomentObject")}function f(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function m(t,e,n){var i,o=Math.min(t.length,e.length),a=Math.abs(t.length-e.length),r=0;for(i=0;o>i;i++)(n&&t[i]!==e[i]||!n&&f(t[i])!==f(e[i]))&&r++;return r+a}function g(){}function v(t){return t?t.toLowerCase().replace("_","-"):t}function y(t){for(var e,n,i,o,a=0;a<t.length;){for(o=v(t[a]).split("-"),e=o.length,n=v(t[a+1]),n=n?n.split("-"):null;e>0;){if(i=_(o.slice(0,e).join("-")))return i;if(n&&n.length>=e&&m(o,n,!0)>=e-1)break;e--}a++}return null}function _(t){var e=null;if(!Ei[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=Ti._abbr,require("./locale/"+t),b(e)}catch(n){}return Ei[t]}function b(t,e){var n;return t&&(n="undefined"==typeof e?x(t):w(t,e),n&&(Ti=n)),Ti._abbr}function w(t,e){return null!==e?(e.abbr=t,Ei[t]||(Ei[t]=new g),Ei[t].set(e),b(t),Ei[t]):(delete Ei[t],null)}function x(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Ti;if(!i(t)){if(e=_(t))return e;t=[t]}return y(t)}function C(t,e){var n=t.toLowerCase();Ii[n]=Ii[n+"s"]=Ii[e]=t}function L(t){return"string"==typeof t?Ii[t]||Ii[t.toLowerCase()]:void 0}function S(t){var e,n,i={};for(n in t)r(t,n)&&(e=L(n),e&&(i[e]=t[n]));return i}function k(e,n){return function(i){return null!=i?(T(this,e,i),t.updateOffset(this,n),this):D(this,e)}}function D(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function T(t,e,n){return t._d["set"+(t._isUTC?"UTC":"")+e](n)}function M(t,e){var n;if("object"==typeof t)for(n in t)this.set(n,t[n]);else if(t=L(t),"function"==typeof this[t])return this[t](e);return this}function P(t,e,n){for(var i=""+Math.abs(t),o=t>=0;i.length<e;)i="0"+i;return(o?n?"+":"":"-")+i}function E(t,e,n,i){var o=i;"string"==typeof i&&(o=function(){return this[i]()}),t&&(Ni[t]=o),e&&(Ni[e[0]]=function(){return P(o.apply(this,arguments),e[1],e[2])}),n&&(Ni[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function I(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function A(t){var e,n,i=t.match(Ai);for(e=0,n=i.length;n>e;e++)i[e]=Ni[i[e]]?Ni[i[e]]:I(i[e]);return function(o){var a="";for(e=0;n>e;e++)a+=i[e]instanceof Function?i[e].call(o,t):i[e];return a}}function F(t,e){return t.isValid()?(e=O(e,t.localeData()),Oi[e]||(Oi[e]=A(e)),Oi[e](t)):t.localeData().invalidDate()}function O(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(Fi.lastIndex=0;i>=0&&Fi.test(t);)t=t.replace(Fi,n),Fi.lastIndex=0,i-=1;return t}function N(t,e,n){Ji[t]="function"==typeof e?e:function(t){return t&&n?n:e}}function R(t,e){return r(Ji,t)?Ji[t](e._strict,e._locale):new RegExp(B(t))}function B(t){return t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,o){return e||n||i||o}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function U(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(i=function(t,n){n[e]=f(t)}),n=0;n<t.length;n++)Xi[t[n]]=i}function z(t,e){U(t,function(t,n,i,o){i._w=i._w||{},e(t,i._w,i,o)})}function j(t,e,n){null!=e&&r(Xi,t)&&Xi[t](e,n._a,n,t)}function $(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function H(t){return this._months[t.month()]}function W(t){return this._monthsShort[t.month()]}function V(t,e,n){var i,o,a;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(o=l([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(a="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function q(t,e){var n;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),$(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function G(e){return null!=e?(q(this,e),t.updateOffset(this,!0),this):D(this,"Month")}function Y(){return $(this.year(),this.month())}function Z(t){var e,n=t._a;return n&&-2===t._pf.overflow&&(e=n[to]<0||n[to]>11?to:n[eo]<1||n[eo]>$(n[Qi],n[to])?eo:n[no]<0||n[no]>24||24===n[no]&&(0!==n[io]||0!==n[oo]||0!==n[ao])?no:n[io]<0||n[io]>59?io:n[oo]<0||n[oo]>59?oo:n[ao]<0||n[ao]>999?ao:-1,t._pf._overflowDayOfYear&&(Qi>e||e>eo)&&(e=eo),t._pf.overflow=e),t}function K(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function J(t,e){var n=!0;return s(function(){return n&&(K(t),n=!1),e.apply(this,arguments)},e)}function X(t,e){lo[t]||(K(e),lo[t]=!0)}function Q(t){var e,n,i=t._i,o=uo.exec(i);if(o){for(t._pf.iso=!0,e=0,n=co.length;n>e;e++)if(co[e][1].exec(i)){t._f=co[e][0]+(o[6]||" ");break}for(e=0,n=ho.length;n>e;e++)if(ho[e][1].exec(i)){t._f+=ho[e][0];break}i.match(Yi)&&(t._f+="Z"),ye(t)}else t._isValid=!1}function te(e){var n=po.exec(e._i);return null!==n?void(e._d=new Date(+n[1])):(Q(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function ee(t,e,n,i,o,a,r){var s=new Date(t,e,n,i,o,a,r);return 1970>t&&s.setFullYear(t),s}function ne(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function ie(t){return oe(t)?366:365}function oe(t){return t%4===0&&t%100!==0||t%400===0}function ae(){return oe(this.year())}function re(t,e,n){var i,o=n-e,a=n-t.day();return a>o&&(a-=7),o-7>a&&(a+=7),i=Se(t).add(a,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function se(t){return re(t,this._week.dow,this._week.doy).week}function le(){return this._week.dow}function ue(){return this._week.doy}function ce(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function de(t){var e=re(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function he(t,e,n,i,o){var a,r,s=ne(t,0,1).getUTCDay();return s=0===s?7:s,n=null!=n?n:o,a=o-s+(s>i?7:0)-(o>s?7:0),r=7*(e-1)+(n-o)+a+1,{year:r>0?t:t-1,dayOfYear:r>0?r:ie(t-1)+r}}function pe(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function fe(t,e,n){return null!=t?t:null!=e?e:n}function me(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function ge(t){var e,n,i,o,a=[];if(!t._d){for(i=me(t),t._w&&null==t._a[eo]&&null==t._a[to]&&ve(t),t._dayOfYear&&(o=fe(t._a[Qi],i[Qi]),t._dayOfYear>ie(o)&&(t._pf._overflowDayOfYear=!0),n=ne(o,0,t._dayOfYear),t._a[to]=n.getUTCMonth(),t._a[eo]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=a[e]=i[e];for(;7>e;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[no]&&0===t._a[io]&&0===t._a[oo]&&0===t._a[ao]&&(t._nextDay=!0,t._a[no]=0),t._d=(t._useUTC?ne:ee).apply(null,a),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[no]=24)}}function ve(t){var e,n,i,o,a,r,s;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(a=1,r=4,n=fe(e.GG,t._a[Qi],re(Se(),1,4).year),i=fe(e.W,1),o=fe(e.E,1)):(a=t._locale._week.dow,r=t._locale._week.doy,n=fe(e.gg,t._a[Qi],re(Se(),a,r).year),i=fe(e.w,1),null!=e.d?(o=e.d,a>o&&++i):o=null!=e.e?e.e+a:a),s=he(n,i,o,r,a),t._a[Qi]=s.year,t._dayOfYear=s.dayOfYear}function ye(e){if(e._f===t.ISO_8601)return void Q(e);e._a=[],e._pf.empty=!0;var n,i,o,a,r,s=""+e._i,l=s.length,u=0;for(o=O(e._f,e._locale).match(Ai)||[],n=0;n<o.length;n++)a=o[n],i=(s.match(R(a,e))||[])[0],i&&(r=s.substr(0,s.indexOf(i)),r.length>0&&e._pf.unusedInput.push(r),s=s.slice(s.indexOf(i)+i.length),u+=i.length),Ni[a]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(a),j(a,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(a);e._pf.charsLeftOver=l-u,s.length>0&&e._pf.unusedInput.push(s),e._pf.bigHour===!0&&e._a[no]<=12&&(e._pf.bigHour=void 0),e._a[no]=_e(e._locale,e._a[no],e._meridiem),ge(e),Z(e)}function _e(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(i=t.isPM(n),i&&12>e&&(e+=12),i||12!==e||(e=0),e):e}function be(t){var e,i,o,a,r;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(a=0;a<t._f.length;a++)r=0,e=d({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._pf=n(),e._f=t._f[a],ye(e),u(e)&&(r+=e._pf.charsLeftOver,r+=10*e._pf.unusedTokens.length,e._pf.score=r,(null==o||o>r)&&(o=r,i=e));s(t,i||e)}function we(t){if(!t._d){var e=S(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],ge(t)}}function xe(t){var e,n=t._i,o=t._f;return t._locale=t._locale||x(t._l),null===n||void 0===o&&""===n?c({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),p(n)?new h(Z(n)):(i(o)?be(t):o?ye(t):Ce(t),e=new h(Z(t)),e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e))}function Ce(e){var n=e._i;void 0===n?e._d=new Date:o(n)?e._d=new Date(+n):"string"==typeof n?te(e):i(n)?(e._a=a(n.slice(0),function(t){return parseInt(t,10)}),ge(e)):"object"==typeof n?we(e):"number"==typeof n?e._d=new Date(n):t.createFromInputFallback(e)}function Le(t,e,i,o,a){var r={};return"boolean"==typeof i&&(o=i,i=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=a,r._l=i,r._i=t,r._f=e,r._strict=o,r._pf=n(),xe(r)}function Se(t,e,n,i){return Le(t,e,n,i,!1)}function ke(t,e){var n,o;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Se();for(n=e[0],o=1;o<e.length;++o)e[o][t](n)&&(n=e[o]);return n}function De(){var t=[].slice.call(arguments,0);return ke("isBefore",t)}function Te(){var t=[].slice.call(arguments,0);return ke("isAfter",t)}function Me(t){var e=S(t),n=e.year||0,i=e.quarter||0,o=e.month||0,a=e.week||0,r=e.day||0,s=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*s,this._days=+r+7*a,this._months=+o+3*i+12*n,this._data={},this._locale=x(),this._bubble()}function Pe(t){return t instanceof Me}function Ee(t,e){E(t,0,0,function(){var t=this.utcOffset(),n="+";return 0>t&&(t=-t,n="-"),n+P(~~(t/60),2)+e+P(~~t%60,2)})}function Ie(t){var e=(t||"").match(Yi)||[],n=e[e.length-1]||[],i=(n+"").match(yo)||["-",0,0],o=+(60*i[1])+f(i[2]);return"+"===i[0]?o:-o}function Ae(e,n){var i,a;return n._isUTC?(i=n.clone(),a=(p(e)||o(e)?+e:+Se(e))-+i,i._d.setTime(+i._d+a),t.updateOffset(i,!1),i):Se(e).local()}function Fe(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Oe(e,n){var i,o=this._offset||0;return null!=e?("string"==typeof e&&(e=Ie(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&n&&(i=Fe(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!n||this._changeInProgress?Je(this,qe(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?o:Fe(this)}function Ne(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Re(t){return this.utcOffset(0,t)}function Be(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Fe(this),"m")),this}function Ue(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ie(this._i)),this}function ze(t){return t=t?Se(t).utcOffset():0,(this.utcOffset()-t)%60===0}function je(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function $e(){if(this._a){var t=this._isUTC?l(this._a):Se(this._a);return this.isValid()&&m(this._a,t.toArray())>0}return!1}function He(){return!this._isUTC}function We(){return this._isUTC}function Ve(){return this._isUTC&&0===this._offset}function qe(t,e){var n,i,o,a=t,s=null;return Pe(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(a={},e?a[e]=t:a.milliseconds=t):(s=_o.exec(t))?(n="-"===s[1]?-1:1,a={y:0,d:f(s[eo])*n,h:f(s[no])*n,m:f(s[io])*n,s:f(s[oo])*n,ms:f(s[ao])*n}):(s=bo.exec(t))?(n="-"===s[1]?-1:1,a={y:Ge(s[2],n),M:Ge(s[3],n),d:Ge(s[4],n),h:Ge(s[5],n),m:Ge(s[6],n),s:Ge(s[7],n),w:Ge(s[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(o=Ze(Se(a.from),Se(a.to)),a={},a.ms=o.milliseconds,a.M=o.months),i=new Me(a),Pe(t)&&r(t,"_locale")&&(i._locale=t._locale),i}function Ge(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Ye(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Ze(t,e){var n;return e=Ae(e,t),t.isBefore(e)?n=Ye(t,e):(n=Ye(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Ke(t,e){return function(n,i){var o,a;return null===i||isNaN(+i)||(X(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),a=n,n=i,i=a),n="string"==typeof n?+n:n,o=qe(n,i),Je(this,o,t),this}}function Je(e,n,i,o){var a=n._milliseconds,r=n._days,s=n._months;o=null==o?!0:o,a&&e._d.setTime(+e._d+a*i),r&&T(e,"Date",D(e,"Date")+r*i),s&&q(e,D(e,"Month")+s*i),o&&t.updateOffset(e,r||s)}function Xe(t){var e=t||Se(),n=Ae(e,this).startOf("day"),i=this.diff(n,"days",!0),o=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(o,this,Se(e)))}function Qe(){return new h(this)}function tn(t,e){var n;return e=L("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=p(t)?t:Se(t),+this>+t):(n=p(t)?+t:+Se(t),n<+this.clone().startOf(e))}function en(t,e){var n;return e=L("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=p(t)?t:Se(t),+t>+this):(n=p(t)?+t:+Se(t),+this.clone().endOf(e)<n)}function nn(t,e,n){return this.isAfter(t,n)&&this.isBefore(e,n)}function on(t,e){var n;return e=L(e||"millisecond"),"millisecond"===e?(t=p(t)?t:Se(t),+this===+t):(n=+Se(t),+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e))}function an(t){return 0>t?Math.ceil(t):Math.floor(t)}function rn(t,e,n){var i,o,a=Ae(t,this),r=6e4*(a.utcOffset()-this.utcOffset());return e=L(e),"year"===e||"month"===e||"quarter"===e?(o=sn(this,a),"quarter"===e?o/=3:"year"===e&&(o/=12)):(i=this-a,o="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-r)/864e5:"week"===e?(i-r)/6048e5:i),n?o:an(o)}function sn(t,e){var n,i,o=12*(e.year()-t.year())+(e.month()-t.month()),a=t.clone().add(o,"months");return 0>e-a?(n=t.clone().add(o-1,"months"),i=(e-a)/(a-n)):(n=t.clone().add(o+1,"months"),i=(e-a)/(n-a)),-(o+i)}function ln(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function un(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():F(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function cn(e){var n=F(this,e||t.defaultFormat);return this.localeData().postformat(n)}function dn(t,e){return qe({to:this,from:t}).locale(this.locale()).humanize(!e)}function hn(t){return this.from(Se(),t)}function pn(t){var e;return void 0===t?this._locale._abbr:(e=x(t),null!=e&&(this._locale=e),this)}function fn(){return this._locale}function mn(t){switch(t=L(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function gn(t){return t=L(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function vn(){return+this._d-6e4*(this._offset||0)}function yn(){return Math.floor(+this/1e3)}function _n(){return this._offset?new Date(+this):this._d}function bn(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function wn(){return u(this)}function xn(){return s({},this._pf)}function Cn(){return this._pf.overflow}function Ln(t,e){E(0,[t,t.length],0,e)}function Sn(t,e,n){return re(Se([t,11,31+e-n]),e,n).week}function kn(t){var e=re(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")}function Dn(t){var e=re(this,1,4).year;return null==t?e:this.add(t-e,"y")}function Tn(){return Sn(this.year(),1,4)}function Mn(){var t=this.localeData()._week;return Sn(this.year(),t.dow,t.doy)}function Pn(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function En(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function In(t){return this._weekdays[t.day()]}function An(t){return this._weekdaysShort[t.day()]}function Fn(t){return this._weekdaysMin[t.day()]}function On(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=Se([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e}function Nn(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=En(t,this.localeData()),this.add(t-e,"d")):e}function Rn(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Bn(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)}function Un(t,e){E(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function zn(t,e){return e._meridiemParse}function jn(t){return"p"===(t+"").toLowerCase().charAt(0)}function $n(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function Hn(t){E(0,[t,3],0,"millisecond")}function Wn(){return this._isUTC?"UTC":""}function Vn(){return this._isUTC?"Coordinated Universal Time":""}function qn(t){return Se(1e3*t)}function Gn(){return Se.apply(null,arguments).parseZone()}function Yn(t,e,n){var i=this._calendar[t];return"function"==typeof i?i.call(e,n):i}function Zn(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e}function Kn(){return this._invalidDate}function Jn(t){return this._ordinal.replace("%d",t)}function Xn(t){return t}function Qn(t,e,n,i){var o=this._relativeTime[n];return"function"==typeof o?o(t,e,n,i):o.replace(/%d/i,t)}function ti(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)}function ei(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function ni(t,e,n,i){var o=x(),a=l().set(i,e);return o[n](a,t)}function ii(t,e,n,i,o){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return ni(t,e,n,o);var a,r=[];for(a=0;i>a;a++)r[a]=ni(t,a,n,o);return r}function oi(t,e){return ii(t,e,"months",12,"month")}function ai(t,e){return ii(t,e,"monthsShort",12,"month")}function ri(t,e){return ii(t,e,"weekdays",7,"day")}function si(t,e){return ii(t,e,"weekdaysShort",7,"day")}function li(t,e){return ii(t,e,"weekdaysMin",7,"day")}function ui(){var t=this._data;return this._milliseconds=$o(this._milliseconds),this._days=$o(this._days),this._months=$o(this._months),t.milliseconds=$o(t.milliseconds),t.seconds=$o(t.seconds),t.minutes=$o(t.minutes),t.hours=$o(t.hours),t.months=$o(t.months),t.years=$o(t.years),this}function ci(t,e,n,i){var o=qe(e,n);return t._milliseconds+=i*o._milliseconds,t._days+=i*o._days,t._months+=i*o._months,t._bubble()}function di(t,e){return ci(this,t,e,1)}function hi(t,e){return ci(this,t,e,-1)}function pi(){var t,e,n,i=this._milliseconds,o=this._days,a=this._months,r=this._data,s=0;return r.milliseconds=i%1e3,t=an(i/1e3),r.seconds=t%60,e=an(t/60),r.minutes=e%60,n=an(e/60),r.hours=n%24,o+=an(n/24),s=an(fi(o)),o-=an(mi(s)),a+=an(o/30),o%=30,s+=an(a/12),a%=12,r.days=o,r.months=a,r.years=s,this}function fi(t){return 400*t/146097}function mi(t){return 146097*t/400}function gi(t){var e,n,i=this._milliseconds;if(t=L(t),"month"===t||"year"===t)return e=this._days+i/864e5,n=this._months+12*fi(e),"month"===t?n:n/12;switch(e=this._days+Math.round(mi(this._months/12)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 24*e*60+i/6e4;case"second":return 24*e*60*60+i/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+i;default:throw new Error("Unknown unit "+t)}}function vi(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*f(this._months/12)}function yi(t){return function(){return this.as(t)}}function _i(t){return t=L(t),this[t+"s"]()}function bi(t){return function(){return this._data[t]}}function wi(){return an(this.days()/7)}function xi(t,e,n,i,o){return o.relativeTime(e||1,!!n,t,i)}function Ci(t,e,n){var i=qe(t).abs(),o=oa(i.as("s")),a=oa(i.as("m")),r=oa(i.as("h")),s=oa(i.as("d")),l=oa(i.as("M")),u=oa(i.as("y")),c=o<aa.s&&["s",o]||1===a&&["m"]||a<aa.m&&["mm",a]||1===r&&["h"]||r<aa.h&&["hh",r]||1===s&&["d"]||s<aa.d&&["dd",s]||1===l&&["M"]||l<aa.M&&["MM",l]||1===u&&["y"]||["yy",u];return c[2]=e,c[3]=+t>0,c[4]=n,xi.apply(null,c)}function Li(t,e){return void 0===aa[t]?!1:void 0===e?aa[t]:(aa[t]=e,!0)}function Si(t){var e=this.localeData(),n=Ci(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function ki(){var t=ra(this.years()),e=ra(this.months()),n=ra(this.days()),i=ra(this.hours()),o=ra(this.minutes()),a=ra(this.seconds()+this.milliseconds()/1e3),r=this.asSeconds();return r?(0>r?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||o||a?"T":"")+(i?i+"H":"")+(o?o+"M":"")+(a?a+"S":""):"P0D"}var Di,Ti,Mi=t.momentProperties=[],Pi=!1,Ei={},Ii={},Ai=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Fi=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Oi={},Ni={},Ri=/\d/,Bi=/\d\d/,Ui=/\d{3}/,zi=/\d{4}/,ji=/[+-]?\d{6}/,$i=/\d\d?/,Hi=/\d{1,3}/,Wi=/\d{1,4}/,Vi=/[+-]?\d{1,6}/,qi=/\d+/,Gi=/[+-]?\d+/,Yi=/Z|[+-]\d\d:?\d\d/gi,Zi=/[+-]?\d+(\.\d{1,3})?/,Ki=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ji={},Xi={},Qi=0,to=1,eo=2,no=3,io=4,oo=5,ao=6;E("M",["MM",2],"Mo",function(){return this.month()+1}),E("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),E("MMMM",0,0,function(t){return this.localeData().months(this,t)}),C("month","M"),N("M",$i),N("MM",$i,Bi),N("MMM",Ki),N("MMMM",Ki),U(["M","MM"],function(t,e){e[to]=f(t)-1}),U(["MMM","MMMM"],function(t,e,n,i){var o=n._locale.monthsParse(t,i,n._strict);null!=o?e[to]=o:n._pf.invalidMonth=t});var ro="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),so="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),lo={};t.suppressDeprecationWarnings=!1;var uo=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,co=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ho=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],po=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=J("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),E(0,["YY",2],0,function(){return this.year()%100}),E(0,["YYYY",4],0,"year"),E(0,["YYYYY",5],0,"year"),E(0,["YYYYYY",6,!0],0,"year"),C("year","y"),N("Y",Gi),N("YY",$i,Bi),N("YYYY",Wi,zi),N("YYYYY",Vi,ji),N("YYYYYY",Vi,ji),U(["YYYY","YYYYY","YYYYYY"],Qi),U("YY",function(e,n){n[Qi]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(t){return f(t)+(f(t)>68?1900:2e3)};var fo=k("FullYear",!1);E("w",["ww",2],"wo","week"),E("W",["WW",2],"Wo","isoWeek"),C("week","w"),C("isoWeek","W"),N("w",$i),N("ww",$i,Bi),N("W",$i),N("WW",$i,Bi),z(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=f(t)});var mo={dow:0,doy:6};E("DDD",["DDDD",3],"DDDo","dayOfYear"),C("dayOfYear","DDD"),N("DDD",Hi),N("DDDD",Ui),U(["DDD","DDDD"],function(t,e,n){n._dayOfYear=f(t)}),t.ISO_8601=function(){};var go=J("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Se.apply(null,arguments);return this>t?this:t}),vo=J("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Se.apply(null,arguments);return t>this?this:t});Ee("Z",":"),Ee("ZZ",""),N("Z",Yi),N("ZZ",Yi),U(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Ie(t)});var yo=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var _o=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,bo=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;qe.fn=Me.prototype;var wo=Ke(1,"add"),xo=Ke(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Co=J("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});E(0,["gg",2],0,function(){return this.weekYear()%100}),E(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ln("gggg","weekYear"),Ln("ggggg","weekYear"),Ln("GGGG","isoWeekYear"),Ln("GGGGG","isoWeekYear"),C("weekYear","gg"),C("isoWeekYear","GG"),N("G",Gi),N("g",Gi),N("GG",$i,Bi),N("gg",$i,Bi),N("GGGG",Wi,zi),N("gggg",Wi,zi),N("GGGGG",Vi,ji),N("ggggg",Vi,ji),z(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=f(t)}),z(["gg","GG"],function(e,n,i,o){n[o]=t.parseTwoDigitYear(e)}),E("Q",0,0,"quarter"),C("quarter","Q"),N("Q",Ri),U("Q",function(t,e){e[to]=3*(f(t)-1)}),E("D",["DD",2],"Do","date"),C("date","D"),N("D",$i),N("DD",$i,Bi),N("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),U(["D","DD"],eo),U("Do",function(t,e){e[eo]=f(t.match($i)[0],10)});var Lo=k("Date",!0);E("d",0,"do","day"),E("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),E("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),E("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),E("e",0,0,"weekday"),E("E",0,0,"isoWeekday"),C("day","d"),C("weekday","e"),C("isoWeekday","E"),N("d",$i),N("e",$i),N("E",$i),N("dd",Ki),N("ddd",Ki),N("dddd",Ki),z(["dd","ddd","dddd"],function(t,e,n){var i=n._locale.weekdaysParse(t);null!=i?e.d=i:n._pf.invalidWeekday=t}),z(["d","e","E"],function(t,e,n,i){e[i]=f(t)});var So="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ko="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Do="Su_Mo_Tu_We_Th_Fr_Sa".split("_");E("H",["HH",2],0,"hour"),E("h",["hh",2],0,function(){return this.hours()%12||12}),Un("a",!0),Un("A",!1),C("hour","h"),N("a",zn),N("A",zn),N("H",$i),N("h",$i),N("HH",$i,Bi),N("hh",$i,Bi),U(["H","HH"],no),U(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),U(["h","hh"],function(t,e,n){e[no]=f(t),n._pf.bigHour=!0});var To=/[ap]\.?m?\.?/i,Mo=k("Hours",!0);E("m",["mm",2],0,"minute"),C("minute","m"),N("m",$i),N("mm",$i,Bi),U(["m","mm"],io);var Po=k("Minutes",!1);E("s",["ss",2],0,"second"),C("second","s"),N("s",$i),N("ss",$i,Bi),U(["s","ss"],oo);var Eo=k("Seconds",!1);E("S",0,0,function(){return~~(this.millisecond()/100)}),E(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Hn("SSS"),Hn("SSSS"),C("millisecond","ms"),N("S",Hi,Ri),N("SS",Hi,Bi),N("SSS",Hi,Ui),N("SSSS",qi),U(["S","SS","SSS","SSSS"],function(t,e){e[ao]=f(1e3*("0."+t))});var Io=k("Milliseconds",!1);E("z",0,0,"zoneAbbr"),E("zz",0,0,"zoneName");var Ao=h.prototype;Ao.add=wo,Ao.calendar=Xe,Ao.clone=Qe,Ao.diff=rn,Ao.endOf=gn,Ao.format=cn,Ao.from=dn,Ao.fromNow=hn,Ao.get=M,Ao.invalidAt=Cn,Ao.isAfter=tn,Ao.isBefore=en,Ao.isBetween=nn,Ao.isSame=on,Ao.isValid=wn,Ao.lang=Co,Ao.locale=pn,Ao.localeData=fn,Ao.max=vo,Ao.min=go,Ao.parsingFlags=xn,Ao.set=M,Ao.startOf=mn,Ao.subtract=xo,Ao.toArray=bn,Ao.toDate=_n,Ao.toISOString=un,Ao.toJSON=un,Ao.toString=ln,Ao.unix=yn,Ao.valueOf=vn,Ao.year=fo,Ao.isLeapYear=ae,Ao.weekYear=kn,Ao.isoWeekYear=Dn,Ao.quarter=Ao.quarters=Pn,Ao.month=G,Ao.daysInMonth=Y,Ao.week=Ao.weeks=ce,Ao.isoWeek=Ao.isoWeeks=de,Ao.weeksInYear=Mn,Ao.isoWeeksInYear=Tn,Ao.date=Lo,Ao.day=Ao.days=Nn,Ao.weekday=Rn,Ao.isoWeekday=Bn,Ao.dayOfYear=pe,Ao.hour=Ao.hours=Mo,Ao.minute=Ao.minutes=Po,Ao.second=Ao.seconds=Eo,Ao.millisecond=Ao.milliseconds=Io,Ao.utcOffset=Oe,Ao.utc=Re,Ao.local=Be,Ao.parseZone=Ue,Ao.hasAlignedHourOffset=ze,Ao.isDST=je,Ao.isDSTShifted=$e,Ao.isLocal=He,Ao.isUtcOffset=We,Ao.isUtc=Ve,Ao.isUTC=Ve,Ao.zoneAbbr=Wn,Ao.zoneName=Vn,Ao.dates=J("dates accessor is deprecated. Use date instead.",Lo),Ao.months=J("months accessor is deprecated. Use month instead",G),Ao.years=J("years accessor is deprecated. Use year instead",fo),Ao.zone=J("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Ne);var Fo=Ao,Oo={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},No={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},Ro="Invalid date",Bo="%d",Uo=/\d{1,2}/,zo={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},jo=g.prototype;jo._calendar=Oo,jo.calendar=Yn,jo._longDateFormat=No,jo.longDateFormat=Zn,jo._invalidDate=Ro,jo.invalidDate=Kn,jo._ordinal=Bo,jo.ordinal=Jn,jo._ordinalParse=Uo,jo.preparse=Xn,jo.postformat=Xn,jo._relativeTime=zo,jo.relativeTime=Qn,jo.pastFuture=ti,jo.set=ei,jo.months=H,jo._months=ro,jo.monthsShort=W,jo._monthsShort=so,jo.monthsParse=V,jo.week=se,jo._week=mo,jo.firstDayOfYear=ue,jo.firstDayOfWeek=le,jo.weekdays=In,jo._weekdays=So,jo.weekdaysMin=Fn,jo._weekdaysMin=Do,jo.weekdaysShort=An,jo._weekdaysShort=ko,jo.weekdaysParse=On,jo.isPM=jn,jo._meridiemParse=To,jo.meridiem=$n,b("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===f(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),t.lang=J("moment.lang is deprecated. Use moment.locale instead.",b),t.langData=J("moment.langData is deprecated. Use moment.localeData instead.",x);var $o=Math.abs,Ho=yi("ms"),Wo=yi("s"),Vo=yi("m"),qo=yi("h"),Go=yi("d"),Yo=yi("w"),Zo=yi("M"),Ko=yi("y"),Jo=bi("milliseconds"),Xo=bi("seconds"),Qo=bi("minutes"),ta=bi("hours"),ea=bi("days"),na=bi("months"),ia=bi("years"),oa=Math.round,aa={s:45,m:45,h:22,d:26,M:11},ra=Math.abs,sa=Me.prototype;
sa.abs=ui,sa.add=di,sa.subtract=hi,sa.as=gi,sa.asMilliseconds=Ho,sa.asSeconds=Wo,sa.asMinutes=Vo,sa.asHours=qo,sa.asDays=Go,sa.asWeeks=Yo,sa.asMonths=Zo,sa.asYears=Ko,sa.valueOf=vi,sa._bubble=pi,sa.get=_i,sa.milliseconds=Jo,sa.seconds=Xo,sa.minutes=Qo,sa.hours=ta,sa.days=ea,sa.weeks=wi,sa.months=na,sa.years=ia,sa.humanize=Si,sa.toISOString=ki,sa.toString=ki,sa.toJSON=ki,sa.locale=pn,sa.localeData=fn,sa.toIsoString=J("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ki),sa.lang=Co,E("X",0,0,"unix"),E("x",0,0,"valueOf"),N("x",Gi),N("X",Zi),U("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),U("x",function(t,e,n){n._d=new Date(f(t))}),t.version="2.10.2",e(Se),t.fn=Fo,t.min=De,t.max=Te,t.utc=l,t.unix=qn,t.months=oi,t.isDate=o,t.locale=b,t.invalid=c,t.duration=qe,t.isMoment=p,t.weekdays=ri,t.parseZone=Gn,t.localeData=x,t.isDuration=Pe,t.monthsShort=ai,t.weekdaysMin=li,t.defineLocale=w,t.weekdaysShort=si,t.normalizeUnits=L,t.relativeTimeThreshold=Li;var la=t;return la}),/*
 //! version : 4.0.0
 =========================================================
 bootstrap-datetimejs
 https://github.com/Eonasdan/bootstrap-datetimepicker
 =========================================================
 The MIT License (MIT)

 Copyright (c) 2015 Jonathan Peterson

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 */
function(t){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],t);else if("object"==typeof exports)t(require("jquery"),require("moment"));else{if(!jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if(!moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";t(jQuery,moment)}}(function(t,e){"use strict";if(!e)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var n=function(n,i){var o,a,r,s,l,u={},c=e(),d=c.clone(),h=!0,p=!1,f=!1,m=0,g=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10}],v=["days","months","years"],y=["top","bottom","auto"],_=["left","right","auto"],b=["default","top","bottom"],w=function(t){if("string"!=typeof t||t.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(t){case"y":return-1!==r.indexOf("Y");case"M":return-1!==r.indexOf("M");case"d":return-1!==r.toLowerCase().indexOf("d");case"h":case"H":return-1!==r.toLowerCase().indexOf("h");case"m":return-1!==r.indexOf("m");case"s":return-1!==r.indexOf("s");default:return!1}},x=function(){return w("h")||w("m")||w("s")},C=function(){return w("y")||w("M")||w("d")},L=function(){var e=t("<thead>").append(t("<tr>").append(t("<th>").addClass("prev").attr("data-action","previous").append(t("<span>").addClass(i.icons.previous))).append(t("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",i.calendarWeeks?"6":"5")).append(t("<th>").addClass("next").attr("data-action","next").append(t("<span>").addClass(i.icons.next)))),n=t("<tbody>").append(t("<tr>").append(t("<td>").attr("colspan",i.calendarWeeks?"8":"7")));return[t("<div>").addClass("datepicker-days").append(t("<table>").addClass("table-condensed").append(e).append(t("<tbody>"))),t("<div>").addClass("datepicker-months").append(t("<table>").addClass("table-condensed").append(e.clone()).append(n.clone())),t("<div>").addClass("datepicker-years").append(t("<table>").addClass("table-condensed").append(e.clone()).append(n.clone()))]},S=function(){var e=t("<tr>"),n=t("<tr>"),o=t("<tr>");return w("h")&&(e.append(t("<td>").append(t("<a>").attr("href","#").addClass("btn").attr("data-action","incrementHours").append(t("<span>").addClass(i.icons.up)))),n.append(t("<td>").append(t("<span>").addClass("timepicker-hour").attr("data-time-component","hours").attr("data-action","showHours"))),o.append(t("<td>").append(t("<a>").attr("href","#").addClass("btn").attr("data-action","decrementHours").append(t("<span>").addClass(i.icons.down))))),w("m")&&(w("h")&&(e.append(t("<td>").addClass("separator")),n.append(t("<td>").addClass("separator").html(":")),o.append(t("<td>").addClass("separator"))),e.append(t("<td>").append(t("<a>").attr("href","#").addClass("btn").attr("data-action","incrementMinutes").append(t("<span>").addClass(i.icons.up)))),n.append(t("<td>").append(t("<span>").addClass("timepicker-minute").attr("data-time-component","minutes").attr("data-action","showMinutes"))),o.append(t("<td>").append(t("<a>").attr("href","#").addClass("btn").attr("data-action","decrementMinutes").append(t("<span>").addClass(i.icons.down))))),w("s")&&(w("m")&&(e.append(t("<td>").addClass("separator")),n.append(t("<td>").addClass("separator").html(":")),o.append(t("<td>").addClass("separator"))),e.append(t("<td>").append(t("<a>").attr("href","#").addClass("btn").attr("data-action","incrementSeconds").append(t("<span>").addClass(i.icons.up)))),n.append(t("<td>").append(t("<span>").addClass("timepicker-second").attr("data-time-component","seconds").attr("data-action","showSeconds"))),o.append(t("<td>").append(t("<a>").attr("href","#").addClass("btn").attr("data-action","decrementSeconds").append(t("<span>").addClass(i.icons.down))))),a||(e.append(t("<td>").addClass("separator")),n.append(t("<td>").append(t("<button>").addClass("btn btn-primary").attr("data-action","togglePeriod"))),o.append(t("<td>").addClass("separator"))),t("<div>").addClass("timepicker-picker").append(t("<table>").addClass("table-condensed").append([e,n,o]))},k=function(){var e=t("<div>").addClass("timepicker-hours").append(t("<table>").addClass("table-condensed")),n=t("<div>").addClass("timepicker-minutes").append(t("<table>").addClass("table-condensed")),i=t("<div>").addClass("timepicker-seconds").append(t("<table>").addClass("table-condensed")),o=[S()];return w("h")&&o.push(e),w("m")&&o.push(n),w("s")&&o.push(i),o},D=function(){var e=[];return i.showTodayButton&&e.push(t("<td>").append(t("<a>").attr("data-action","today").append(t("<span>").addClass(i.icons.today)))),!i.sideBySide&&C()&&x()&&e.push(t("<td>").append(t("<a>").attr("data-action","togglePicker").append(t("<span>").addClass(i.icons.time)))),i.showClear&&e.push(t("<td>").append(t("<a>").attr("data-action","clear").append(t("<span>").addClass(i.icons.clear)))),t("<table>").addClass("table-condensed").append(t("<tbody>").append(t("<tr>").append(e)))},T=function(){var e=t("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),n=t("<div>").addClass("datepicker").append(L()),o=t("<div>").addClass("timepicker").append(k()),r=t("<ul>").addClass("list-unstyled"),s=t("<li>").addClass("picker-switch"+(i.collapse?" accordion-toggle":"")).append(D());return a&&e.addClass("usetwentyfour"),i.sideBySide&&C()&&x()?(e.addClass("timepicker-sbs"),e.append(t("<div>").addClass("row").append(n.addClass("col-sm-6")).append(o.addClass("col-sm-6"))),e.append(s),e):("top"===i.toolbarPlacement&&r.append(s),C()&&r.append(t("<li>").addClass(i.collapse&&x()?"collapse in":"").append(n)),"default"===i.toolbarPlacement&&r.append(s),x()&&r.append(t("<li>").addClass(i.collapse&&C()?"collapse":"").append(o)),"bottom"===i.toolbarPlacement&&r.append(s),e.append(r))},M=function(){var e=n.data(),o={};return e.dateOptions&&e.dateOptions instanceof Object&&(o=t.extend(!0,o,e.dateOptions)),t.each(i,function(t){var n="date"+t.charAt(0).toUpperCase()+t.slice(1);void 0!==e[n]&&(o[t]=e[n])}),o},P=function(){var e,o=(p||n).position(),a=i.widgetPositioning.vertical,r=i.widgetPositioning.horizontal;if(i.widgetParent?e=i.widgetParent.append(f):n.is("input")?e=n.parent().append(f):(e=n,n.children().first().after(f)),"auto"===a&&(a=(p||n).offset().top+f.height()>t(window).height()+t(window).scrollTop()&&f.height()+n.outerHeight()<(p||n).offset().top?"top":"bottom"),"auto"===r&&(r=e.width()<o.left+f.outerWidth()?"right":"left"),"top"===a?f.addClass("top").removeClass("bottom"):f.addClass("bottom").removeClass("top"),"right"===r?f.addClass("pull-right"):f.removeClass("pull-right"),"relative"!==e.css("position")&&(e=e.parents().filter(function(){return"relative"===t(this).css("position")}).first()),0===e.length)throw new Error("datetimepicker component should be placed within a relative positioned container");f.css({top:"top"===a?"auto":o.top+n.outerHeight(),bottom:"top"===a?o.top+n.outerHeight():"auto",left:"left"===r?e.css("padding-left"):"auto",right:"left"===r?"auto":e.css("padding-right")})},E=function(t){"dp.change"===t.type&&(t.date&&t.date.isSame(t.oldDate)||!t.date&&!t.oldDate)||n.trigger(t)},I=function(t){f&&(t&&(l=Math.max(m,Math.min(2,l+t))),f.find(".datepicker > div").hide().filter(".datepicker-"+g[l].clsName).show())},A=function(){var e=t("<tr>"),n=d.clone().startOf("w");for(i.calendarWeeks===!0&&e.append(t("<th>").addClass("cw").text("#"));n.isBefore(d.clone().endOf("w"));)e.append(t("<th>").addClass("dow").text(n.format("dd"))),n.add(1,"d");f.find(".datepicker-days thead").append(e)},F=function(t){return i.disabledDates?i.disabledDates[t.format("YYYY-MM-DD")]===!0:!1},O=function(t){return i.enabledDates?i.enabledDates[t.format("YYYY-MM-DD")]===!0:!1},N=function(t,e){return t.isValid()?i.disabledDates&&F(t)?!1:i.enabledDates&&O(t)?!0:i.minDate&&t.isBefore(i.minDate,e)?!1:i.maxDate&&t.isAfter(i.maxDate,e)?!1:"d"===e&&-1!==i.daysOfWeekDisabled.indexOf(t.day())?!1:!0:!1},R=function(){for(var e=[],n=d.clone().startOf("y").hour(12);n.isSame(d,"y");)e.push(t("<span>").attr("data-action","selectMonth").addClass("month").text(n.format("MMM"))),n.add(1,"M");f.find(".datepicker-months td").empty().append(e)},B=function(){var e=f.find(".datepicker-months"),n=e.find("th"),i=e.find("tbody").find("span");e.find(".disabled").removeClass("disabled"),N(d.clone().subtract(1,"y"),"y")||n.eq(0).addClass("disabled"),n.eq(1).text(d.year()),N(d.clone().add(1,"y"),"y")||n.eq(2).addClass("disabled"),i.removeClass("active"),c.isSame(d,"y")&&i.eq(c.month()).addClass("active"),i.each(function(e){N(d.clone().month(e),"M")||t(this).addClass("disabled")})},U=function(){var t=f.find(".datepicker-years"),e=t.find("th"),n=d.clone().subtract(5,"y"),o=d.clone().add(6,"y"),a="";for(t.find(".disabled").removeClass("disabled"),i.minDate&&i.minDate.isAfter(n,"y")&&e.eq(0).addClass("disabled"),e.eq(1).text(n.year()+"-"+o.year()),i.maxDate&&i.maxDate.isBefore(o,"y")&&e.eq(2).addClass("disabled");!n.isAfter(o,"y");)a+='<span data-action="selectYear" class="year'+(n.isSame(c,"y")?" active":"")+(N(n,"y")?"":" disabled")+'">'+n.year()+"</span>",n.add(1,"y");t.find("td").html(a)},z=function(){var n,o,a,r=f.find(".datepicker-days"),s=r.find("th"),l=[];if(C()){for(r.find(".disabled").removeClass("disabled"),s.eq(1).text(d.format(i.dayViewHeaderFormat)),N(d.clone().subtract(1,"M"),"M")||s.eq(0).addClass("disabled"),N(d.clone().add(1,"M"),"M")||s.eq(2).addClass("disabled"),n=d.clone().startOf("M").startOf("week");!d.clone().endOf("M").endOf("w").isBefore(n,"d");)0===n.weekday()&&(o=t("<tr>"),i.calendarWeeks&&o.append('<td class="cw">'+n.week()+"</td>"),l.push(o)),a="",n.isBefore(d,"M")&&(a+=" old"),n.isAfter(d,"M")&&(a+=" new"),n.isSame(c,"d")&&!h&&(a+=" active"),N(n,"d")||(a+=" disabled"),n.isSame(e(),"d")&&(a+=" today"),(0===n.day()||6===n.day())&&(a+=" weekend"),o.append('<td data-action="selectDay" class="day'+a+'">'+n.date()+"</td>"),n.add(1,"d");r.find("tbody").empty().append(l),B(),U()}},j=function(){var e=f.find(".timepicker-hours table"),n=d.clone().startOf("d"),i=[],o=t("<tr>");for(d.hour()>11&&!a&&n.hour(12);n.isSame(d,"d")&&(a||d.hour()<12&&n.hour()<12||d.hour()>11);)n.hour()%4===0&&(o=t("<tr>"),i.push(o)),o.append('<td data-action="selectHour" class="hour'+(N(n,"h")?"":" disabled")+'">'+n.format(a?"HH":"hh")+"</td>"),n.add(1,"h");e.empty().append(i)},$=function(){for(var e=f.find(".timepicker-minutes table"),n=d.clone().startOf("h"),o=[],a=t("<tr>"),r=1===i.stepping?5:i.stepping;d.isSame(n,"h");)n.minute()%(4*r)===0&&(a=t("<tr>"),o.push(a)),a.append('<td data-action="selectMinute" class="minute'+(N(n,"m")?"":" disabled")+'">'+n.format("mm")+"</td>"),n.add(r,"m");e.empty().append(o)},H=function(){for(var e=f.find(".timepicker-seconds table"),n=d.clone().startOf("m"),i=[],o=t("<tr>");d.isSame(n,"m");)n.second()%20===0&&(o=t("<tr>"),i.push(o)),o.append('<td data-action="selectSecond" class="second'+(N(n,"s")?"":" disabled")+'">'+n.format("ss")+"</td>"),n.add(5,"s");e.empty().append(i)},W=function(){var t=f.find(".timepicker span[data-time-component]");a||f.find(".timepicker [data-action=togglePeriod]").text(c.format("A")),t.filter("[data-time-component=hours]").text(c.format(a?"HH":"hh")),t.filter("[data-time-component=minutes]").text(c.format("mm")),t.filter("[data-time-component=seconds]").text(c.format("ss")),j(),$(),H()},V=function(){f&&(z(),W())},q=function(t){var e=h?null:c;return t?(t=t.clone().locale(i.locale),1!==i.stepping&&t.minutes(Math.round(t.minutes()/i.stepping)*i.stepping%60).seconds(0),void(N(t)?(c=t,d=c.clone(),o.val(c.format(r)),n.data("date",c.format(r)),V(),h=!1,E({type:"dp.change",date:c.clone(),oldDate:e})):(o.val(h?"":c.format(r)),E({type:"dp.error",date:t})))):(h=!0,o.val(""),n.data("date",""),E({type:"dp.change",date:null,oldDate:e}),void V())},G=function(){var e=!1;return f?(f.find(".collapse").each(function(){var n=t(this).data("collapse");return n&&n.transitioning?(e=!0,!1):void 0}),e?u:(p&&p.hasClass("btn")&&p.toggleClass("active"),f.hide(),t(window).off("resize",P),f.off("click","[data-action]"),f.off("mousedown",!1),f.remove(),f=!1,E({type:"dp.hide",date:c.clone()}),u)):u},Y={next:function(){d.add(g[l].navStep,g[l].navFnc),z()},previous:function(){d.subtract(g[l].navStep,g[l].navFnc),z()},pickerSwitch:function(){I(1)},selectMonth:function(e){var n=t(e.target).closest("tbody").find("span").index(t(e.target));d.month(n),l===m&&(q(c.clone().year(d.year()).month(d.month())),G()),I(-1),z()},selectYear:function(e){var n=parseInt(t(e.target).text(),10)||0;d.year(n),l===m&&(q(c.clone().year(d.year())),G()),I(-1),z()},selectDay:function(e){var n=d.clone();t(e.target).is(".old")&&n.subtract(1,"M"),t(e.target).is(".new")&&n.add(1,"M"),q(n.date(parseInt(t(e.target).text(),10))),x()||i.keepOpen||G()},incrementHours:function(){q(c.clone().add(1,"h"))},incrementMinutes:function(){q(c.clone().add(i.stepping,"m"))},incrementSeconds:function(){q(c.clone().add(1,"s"))},decrementHours:function(){q(c.clone().subtract(1,"h"))},decrementMinutes:function(){q(c.clone().subtract(i.stepping,"m"))},decrementSeconds:function(){q(c.clone().subtract(1,"s"))},togglePeriod:function(){q(c.clone().add(c.hours()>=12?-12:12,"h"))},togglePicker:function(e){var n,o=t(e.target),a=o.closest("ul"),r=a.find(".in"),s=a.find(".collapse:not(.in)");if(r&&r.length){if(n=r.data("collapse"),n&&n.transitioning)return;r.collapse("hide"),s.collapse("show"),o.is("span")?o.toggleClass(i.icons.time+" "+i.icons.date):o.find("span").toggleClass(i.icons.time+" "+i.icons.date)}},showPicker:function(){f.find(".timepicker > div:not(.timepicker-picker)").hide(),f.find(".timepicker .timepicker-picker").show()},showHours:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-hours").show()},showMinutes:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-seconds").show()},selectHour:function(e){var n=parseInt(t(e.target).text(),10);a||(c.hours()>=12?12!==n&&(n+=12):12===n&&(n=0)),q(c.clone().hours(n)),Y.showPicker.call(u)},selectMinute:function(e){q(c.clone().minutes(parseInt(t(e.target).text(),10))),Y.showPicker.call(u)},selectSecond:function(e){q(c.clone().seconds(parseInt(t(e.target).text(),10))),Y.showPicker.call(u)},clear:function(){q(null)},today:function(){q(e())}},Z=function(e){return t(e.currentTarget).is(".disabled")?!1:(Y[t(e.currentTarget).data("action")].apply(u,arguments),!1)},K=function(){var n,a={year:function(t){return t.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(t){return t.date(1).hours(0).seconds(0).minutes(0)},day:function(t){return t.hours(0).seconds(0).minutes(0)},hour:function(t){return t.seconds(0).minutes(0)},minute:function(t){return t.seconds(0)}};return o.prop("disabled")||o.prop("readonly")||f?u:(i.useCurrent&&h&&(n=e(),"string"==typeof i.useCurrent&&(n=a[i.useCurrent](n)),q(n)),f=T(),A(),R(),f.find(".timepicker-hours").hide(),f.find(".timepicker-minutes").hide(),f.find(".timepicker-seconds").hide(),V(),I(),t(window).on("resize",P),f.on("click","[data-action]",Z),f.on("mousedown",!1),p&&p.hasClass("btn")&&p.toggleClass("active"),f.show(),P(),o.is(":focus")||o.focus(),E({type:"dp.show"}),u)},J=function(){return f?G():K()},X=function(t){return t=e.isMoment(t)||t instanceof Date?e(t):e(t,s,i.useStrict),t.locale(i.locale),t},Q=function(t){27===t.keyCode&&G()},te=function(e){var n=t(e.target).val().trim(),i=n?X(n):null;return q(i),e.stopImmediatePropagation(),!1},ee=function(){o.on({change:te,blur:G,keydown:Q}),n.is("input")?o.on({focus:K}):p&&(p.on("click",J),p.on("mousedown",!1))},ne=function(){o.off({change:te,blur:G,keydown:Q}),n.is("input")?o.off({focus:K}):p&&(p.off("click",J),p.off("mousedown",!1))},ie=function(e){var n={};return t.each(e,function(){var t=X(this);t.isValid()&&(n[t.format("YYYY-MM-DD")]=!0)}),Object.keys(n).length?n:!1},oe=function(){var t=i.format||"L LT";r=t.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){return c.localeData().longDateFormat(t)||t}),s=i.extraFormats?i.extraFormats.slice():[],s.indexOf(t)<0&&s.indexOf(r)<0&&s.push(r),a=r.toLowerCase().indexOf("a")<1&&r.indexOf("h")<1,w("y")&&(m=2),w("M")&&(m=1),w("d")&&(m=0),l=Math.max(m,l),h||q(c)};if(u.destroy=function(){G(),ne(),n.removeData("DateTimePicker"),n.removeData("date")},u.toggle=J,u.show=K,u.hide=G,u.disable=function(){return G(),p&&p.hasClass("btn")&&p.addClass("disabled"),o.prop("disabled",!0),u},u.enable=function(){return p&&p.hasClass("btn")&&p.removeClass("disabled"),o.prop("disabled",!1),u},u.options=function(e){if(0===arguments.length)return t.extend(!0,{},i);if(!(e instanceof Object))throw new TypeError("options() options parameter should be an object");return t.extend(!0,i,e),t.each(i,function(t,e){if(void 0===u[t])throw new TypeError("option "+t+" is not recognized!");u[t](e)}),u},u.date=function(t){if(0===arguments.length)return h?null:c.clone();if(!(null===t||"string"==typeof t||e.isMoment(t)||t instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return q(null===t?null:X(t)),u},u.format=function(t){if(0===arguments.length)return i.format;if("string"!=typeof t&&("boolean"!=typeof t||t!==!1))throw new TypeError("format() expects a sting or boolean:false parameter "+t);return i.format=t,r&&oe(),u},u.dayViewHeaderFormat=function(t){if(0===arguments.length)return i.dayViewHeaderFormat;if("string"!=typeof t)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return i.dayViewHeaderFormat=t,u},u.extraFormats=function(t){if(0===arguments.length)return i.extraFormats;if(t!==!1&&!(t instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return i.extraFormats=t,s&&oe(),u},u.disabledDates=function(e){if(0===arguments.length)return i.disabledDates?t.extend({},i.disabledDates):i.disabledDates;if(!e)return i.disabledDates=!1,V(),u;if(!(e instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return i.disabledDates=ie(e),i.enabledDates=!1,V(),u},u.enabledDates=function(e){if(0===arguments.length)return i.enabledDates?t.extend({},i.enabledDates):i.enabledDates;if(!e)return i.enabledDates=!1,V(),u;if(!(e instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return i.enabledDates=ie(e),i.disabledDates=!1,V(),u},u.daysOfWeekDisabled=function(t){if(0===arguments.length)return i.daysOfWeekDisabled.splice(0);if(!(t instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");return i.daysOfWeekDisabled=t.reduce(function(t,e){return e=parseInt(e,10),e>6||0>e||isNaN(e)?t:(-1===t.indexOf(e)&&t.push(e),t)},[]).sort(),V(),u},u.maxDate=function(t){if(0===arguments.length)return i.maxDate?i.maxDate.clone():i.maxDate;if("boolean"==typeof t&&t===!1)return i.maxDate=!1,V(),u;var e=X(t);if(!e.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+t);if(i.minDate&&e.isBefore(i.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+e.format(r));return i.maxDate=e,i.maxDate.isBefore(t)&&q(i.maxDate),V(),u},u.minDate=function(t){if(0===arguments.length)return i.minDate?i.minDate.clone():i.minDate;if("boolean"==typeof t&&t===!1)return i.minDate=!1,V(),u;var e=X(t);if(!e.isValid())throw new TypeError("minDate() Could not parse date parameter: "+t);if(i.maxDate&&e.isAfter(i.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+e.format(r));return i.minDate=e,i.minDate.isAfter(t)&&q(i.minDate),V(),u},u.defaultDate=function(t){if(0===arguments.length)return i.defaultDate?i.defaultDate.clone():i.defaultDate;if(!t)return i.defaultDate=!1,u;var e=X(t);if(!e.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+t);if(!N(e))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return i.defaultDate=e,i.defaultDate&&""===o.val().trim()&&q(i.defaultDate),u},u.locale=function(t){if(0===arguments.length)return i.locale;if(!e.localeData(t))throw new TypeError("locale() locale "+t+" is not loaded from moment locales!");return i.locale=t,c.locale(i.locale),d.locale(i.locale),r&&oe(),f&&(G(),K()),u},u.stepping=function(t){return 0===arguments.length?i.stepping:(t=parseInt(t,10),(isNaN(t)||1>t)&&(t=1),i.stepping=t,u)},u.useCurrent=function(t){var e=["year","month","day","hour","minute"];if(0===arguments.length)return i.useCurrent;if("boolean"!=typeof t&&"string"!=typeof t)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof t&&-1===e.indexOf(t.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+e.join(", "));return i.useCurrent=t,u},u.collapse=function(t){if(0===arguments.length)return i.collapse;if("boolean"!=typeof t)throw new TypeError("collapse() expects a boolean parameter");return i.collapse===t?u:(i.collapse=t,f&&(G(),K()),u)},u.icons=function(e){if(0===arguments.length)return t.extend({},i.icons);if(!(e instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return t.extend(i.icons,e),f&&(G(),K()),u},u.useStrict=function(t){if(0===arguments.length)return i.useStrict;if("boolean"!=typeof t)throw new TypeError("useStrict() expects a boolean parameter");return i.useStrict=t,u},u.sideBySide=function(t){if(0===arguments.length)return i.sideBySide;if("boolean"!=typeof t)throw new TypeError("sideBySide() expects a boolean parameter");return i.sideBySide=t,f&&(G(),K()),u},u.viewMode=function(t){if(0===arguments.length)return i.viewMode;if("string"!=typeof t)throw new TypeError("viewMode() expects a string parameter");if(-1===v.indexOf(t))throw new TypeError("viewMode() parameter must be one of ("+v.join(", ")+") value");return i.viewMode=t,l=Math.max(v.indexOf(t),m),I(),u},u.toolbarPlacement=function(t){if(0===arguments.length)return i.toolbarPlacement;if("string"!=typeof t)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===b.indexOf(t))throw new TypeError("toolbarPlacement() parameter must be one of ("+b.join(", ")+") value");return i.toolbarPlacement=t,f&&(G(),K()),u},u.widgetPositioning=function(e){if(0===arguments.length)return t.extend({},i.widgetPositioning);if("[object Object]"!=={}.toString.call(e))throw new TypeError("widgetPositioning() expects an object variable");if(e.horizontal){if("string"!=typeof e.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(e.horizontal=e.horizontal.toLowerCase(),-1===_.indexOf(e.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+_.join(", ")+")");i.widgetPositioning.horizontal=e.horizontal}if(e.vertical){if("string"!=typeof e.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(e.vertical=e.vertical.toLowerCase(),-1===y.indexOf(e.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+y.join(", ")+")");i.widgetPositioning.vertical=e.vertical}return V(),u},u.calendarWeeks=function(t){if(0===arguments.length)return i.calendarWeeks;if("boolean"!=typeof t)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return i.calendarWeeks=t,V(),u},u.showTodayButton=function(t){if(0===arguments.length)return i.showTodayButton;if("boolean"!=typeof t)throw new TypeError("showTodayButton() expects a boolean parameter");return i.showTodayButton=t,f&&(G(),K()),u},u.showClear=function(t){if(0===arguments.length)return i.showClear;if("boolean"!=typeof t)throw new TypeError("showClear() expects a boolean parameter");return i.showClear=t,f&&(G(),K()),u},u.widgetParent=function(e){if(0===arguments.length)return i.widgetParent;if("string"==typeof e&&(e=t(e)),null!==e&&"string"!=typeof e&&!(e instanceof jQuery))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return i.widgetParent=e,f&&(G(),K()),u},u.keepOpen=function(t){if(0===arguments.length)return i.format;if("boolean"!=typeof t)throw new TypeError("keepOpen() expects a boolean parameter");return i.keepOpen=t,u},n.is("input"))o=n;else if(o=n.find(".datepickerinput"),0===o.size())o=n.find("input");else if(!o.is("input"))throw new Error('CSS class "datepickerinput" cannot be applied to non input element');if(n.hasClass("input-group")&&(p=n.find(0===n.find(".datepickerbutton").size()?'[class^="input-group-"]':".datepickerbutton")),!o.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return t.extend(!0,i,M()),u.options(i),oe(),ee(),o.prop("disabled")&&u.disable(),0!==o.val().trim().length?q(X(o.val().trim())):i.defaultDate&&q(i.defaultDate),u};t.fn.datetimepicker=function(e){return this.each(function(){var i=t(this);i.data("DateTimePicker")||(e=t.extend(!0,{},t.fn.datetimepicker.defaults,e),i.data("DateTimePicker",n(i,e)))})},t.fn.datetimepicker.defaults={format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:e.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:[],calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,keepOpen:!1}}),function(t){t.fn.bootstrapTransfer=function(e){var n,i=t.extend({},t.fn.bootstrapTransfer.defaults,e);return this.populate_available=function(t){n.populate_available(t)},this.populate_selected=function(t){n.populate_selected(t)},this.set_values=function(t){n.set_values(t)},this.get_values=function(){return n.get_values()},this.each(function(){return n=t(this),n.append(t.fn.bootstrapTransfer.defaults.template),n.addClass("bootstrap-transfer-container"),n.$filter_input=n.find(".filter-input"),n.$remaining_select=n.find("select.remaining"),n.$target_select=n.find("select.target"),n.$add_btn=n.find(".selector-add"),n.$remove_btn=n.find(".selector-remove"),n.$choose_all_btn=n.find(".selector-chooseall"),n.$clear_all_btn=n.find(".selector-clearall"),n._remaining_list=[],n._target_list=[],""!=i.target_id&&n.$target_select.attr("id",i.target_id),n.find("select.filtered").css("height",i.height),n.$add_btn.click(function(){n.move_elems(n.$remaining_select.val(),!1,!0)}),n.$remove_btn.click(function(){n.move_elems(n.$target_select.val(),!0,!1)}),n.$choose_all_btn.click(function(){n.move_all(!1,!0)}),n.$clear_all_btn.click(function(){n.move_all(!0,!1)}),n.$filter_input.keyup(function(){n.update_lists(!0)}),n.populate_available=function(t){n.$filter_input.val("");for(var e in t){var i=t[e];n._remaining_list.push([{value:i.value,content:i.content},!0]),n._target_list.push([{value:i.value,content:i.content},!1])}n.update_lists(!0)},n.populate_selected=function(t){n.$filter_input.val("");for(var e in t){var i=t[e];n._remaining_list.push([{value:i.value,content:i.content},!1]),n._target_list.push([{value:i.value,content:i.content},!0])}n.update_lists(!0)},n.set_values=function(t){n.move_elems(t,!1,!0)},n.get_values=function(){return n.get_internal(n.$target_select)},n.get_internal=function(e){var n=[];return e.find("option").each(function(){n.push(t(this).val())}),n},n.to_dict=function(t){var e={};for(var n in t)e[t[n]]=!0;return e},n.update_lists=function(e){var o;e||(o=[n.to_dict(n.get_internal(n.$remaining_select)),n.to_dict(n.get_internal(n.$target_select))]),n.$remaining_select.empty(),n.$target_select.empty();var a=[n._remaining_list,n._target_list],r=[n.$remaining_select,n.$target_select];for(var s in a)for(var l in a[s]){var u=a[s][l];if(u[1]){var c="";e||!i.hilite_selection||o[s].hasOwnProperty(u[0].value)||(c='selected="selected"'),r[s].append("<option "+c+"value="+u[0].value+">"+u[0].content+"</option>")}}n.$remaining_select.find("option").each(function(){var e=n.$filter_input.val().toLowerCase(),i=t(this).html().toLowerCase();-1==i.indexOf(e)&&t(this).remove()})},n.move_elems=function(t,e,i){for(var o in t){val=t[o];for(var a in n._remaining_list){var r=n._remaining_list[a];r[0].value==val&&(r[1]=e,n._target_list[a][1]=i)}}n.update_lists(!1)},n.move_all=function(t,e){for(var i in n._remaining_list)n._remaining_list[i][1]=t,n._target_list[i][1]=e;n.update_lists(!1)},n.data("bootstrapTransfer",n),n})},t.fn.bootstrapTransfer.defaults={template:'<table width="100%" cellspacing="0" cellpadding="0">                <tr>                    <td width="50%">                        <div class="selector-available">                            <div class="selector-filter">                                <table width="100%" border="0">                                    <tr>                                        <td>                                            <div class="input-group" style="margin-bottom:5px;">                                                <span class="input-group-addon"><i class="fa fa-search"></i></span>                                                <input type="text" class="filter-input form-control" placeholder="Search for a user...">                                            </div>                                        </td>                                    </tr>                                </table>                            </div>                            <label class="string optional control-label" style="font-weight:normal;margin-bottom:0;">Available</label>                            <select multiple="multiple" class="form-control filtered remaining" style="margin-top: .35em;">                            </select>                            <em><a class="selector-chooseall change-contributors">Select all</a></em>                        </div>                    </td>                    <td>                        <div class="selector-chooser" style="margin:0 2px;">                            <a class="selector-add change-contributors"><i class="fa fa-plus"></i></a>                            <a class="selector-remove change-contributors"><i class="fa fa-minus"></i></a>                        </div>                    </td>                    <td width="50%" style="padding-top:3em">                        <div class="selector-chosen">                            <label class="string optional control-label" style="font-weight:normal;">Selected</label>                            <div class="selector-filter right"></div>                            <select multiple="multiple" class="form-control filtered target" style="width:100%">                            </select>                            <em><a class="selector-clearall change-contributors">Clear all</a></em>                        </div>                    </td>                </tr>            </table>',height:"10em",hilite_selection:!0,target_id:""}}(jQuery),/*! DataTables 1.10.6
 * ©2008-2014 SpryMedia Ltd - datatables.net/license
 */
/**
 * @summary     DataTables
 * @description Paginate, search and order HTML tables
 * @version     1.10.6
 * @file        jquery.dataTables.js
 * @author      SpryMedia Ltd (www.sprymedia.co.uk)
 * @contact     www.sprymedia.co.uk/contact
 * @copyright   Copyright 2008-2014 SpryMedia Ltd.
 *
 * This source file is free software, available under the following license:
 *   MIT license - http://datatables.net/license
 *
 * This source file is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.
 *
 * For details please refer to: http://www.datatables.net
 */
function(t,e,n){!function(t){"use strict";"function"==typeof define&&define.amd?define("datatables",["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):jQuery&&!jQuery.fn.dataTable&&t(jQuery)}(function(i){"use strict";function o(t){var e,n,a="a aa ai ao as b fn i m o s ",r={};i.each(t,function(i){e=i.match(/^([^A-Z]+?)([A-Z])/),e&&-1!==a.indexOf(e[1]+" ")&&(n=i.replace(e[0],e[2].toLowerCase()),r[n]=i,"o"===e[1]&&o(t[i]))}),t._hungarianMap=r}function a(t,e,r){t._hungarianMap||o(t);var s;i.each(e,function(o){s=t._hungarianMap[o],s===n||!r&&e[s]!==n||("o"===s.charAt(0)?(e[s]||(e[s]={}),i.extend(!0,e[s],e[o]),a(t[s],e[s],r)):e[s]=e[o])})}function r(t){var e=Ye.defaults.oLanguage,n=t.sZeroRecords;!t.sEmptyTable&&n&&"No data available in table"===e.sEmptyTable&&Re(t,t,"sZeroRecords","sEmptyTable"),!t.sLoadingRecords&&n&&"Loading..."===e.sLoadingRecords&&Re(t,t,"sZeroRecords","sLoadingRecords"),t.sInfoThousands&&(t.sThousands=t.sInfoThousands);var i=t.sDecimal;i&&qe(i)}function s(t){_n(t,"ordering","bSort"),_n(t,"orderMulti","bSortMulti"),_n(t,"orderClasses","bSortClasses"),_n(t,"orderCellsTop","bSortCellsTop"),_n(t,"order","aaSorting"),_n(t,"orderFixed","aaSortingFixed"),_n(t,"paging","bPaginate"),_n(t,"pagingType","sPaginationType"),_n(t,"pageLength","iDisplayLength"),_n(t,"searching","bFilter");var e=t.aoSearchCols;if(e)for(var n=0,i=e.length;i>n;n++)e[n]&&a(Ye.models.oSearch,e[n])}function l(t){_n(t,"orderable","bSortable"),_n(t,"orderData","aDataSort"),_n(t,"orderSequence","asSorting"),_n(t,"orderDataType","sortDataType");var e=t.aDataSort;e&&!i.isArray(e)&&(t.aDataSort=[e])}function u(t){var e=t.oBrowser,n=i("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(i("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(i('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),o=n.find(".test");e.bScrollOversize=100===o[0].offsetWidth,e.bScrollbarLeft=1!==Math.round(o.offset().left),n.remove()}function c(t,e,i,o,a,r){var s,l=o,u=!1;for(i!==n&&(s=i,u=!0);l!==a;)t.hasOwnProperty(l)&&(s=u?e(s,t[l],l,t):t[l],u=!0,l+=r);return s}function d(t,n){var o=Ye.defaults.column,a=t.aoColumns.length,r=i.extend({},Ye.models.oColumn,o,{nTh:n?n:e.createElement("th"),sTitle:o.sTitle?o.sTitle:n?n.innerHTML:"",aDataSort:o.aDataSort?o.aDataSort:[a],mData:o.mData?o.mData:a,idx:a});t.aoColumns.push(r);var s=t.aoPreSearchCols;s[a]=i.extend({},Ye.models.oSearch,s[a]),h(t,a,i(n).data())}function h(t,e,o){var r=t.aoColumns[e],s=t.oClasses,u=i(r.nTh);if(!r.sWidthOrig){r.sWidthOrig=u.attr("width")||null;var c=(u.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);c&&(r.sWidthOrig=c[1])}o!==n&&null!==o&&(l(o),a(Ye.defaults.column,o),o.mDataProp===n||o.mData||(o.mData=o.mDataProp),o.sType&&(r._sManualType=o.sType),o.className&&!o.sClass&&(o.sClass=o.className),i.extend(r,o),Re(r,o,"sWidth","sWidthOrig"),o.iDataSort!==n&&(r.aDataSort=[o.iDataSort]),Re(r,o,"aDataSort"));var d=r.mData,h=D(d),p=r.mRender?D(r.mRender):null,f=function(t){return"string"==typeof t&&-1!==t.indexOf("@")};r._bAttrSrc=i.isPlainObject(d)&&(f(d.sort)||f(d.type)||f(d.filter)),r.fnGetData=function(t,e,i){var o=h(t,e,n,i);return p&&e?p(o,e,t,i):o},r.fnSetData=function(t,e,n){return T(d)(t,e,n)},"number"!=typeof d&&(t._rowReadObject=!0),t.oFeatures.bSort||(r.bSortable=!1,u.addClass(s.sSortableNone));var m=-1!==i.inArray("asc",r.asSorting),g=-1!==i.inArray("desc",r.asSorting);r.bSortable&&(m||g)?m&&!g?(r.sSortingClass=s.sSortableAsc,r.sSortingClassJUI=s.sSortJUIAscAllowed):!m&&g?(r.sSortingClass=s.sSortableDesc,r.sSortingClassJUI=s.sSortJUIDescAllowed):(r.sSortingClass=s.sSortable,r.sSortingClassJUI=s.sSortJUI):(r.sSortingClass=s.sSortableNone,r.sSortingClassJUI="")}function p(t){if(t.oFeatures.bAutoWidth!==!1){var e=t.aoColumns;ye(t);for(var n=0,i=e.length;i>n;n++)e[n].nTh.style.width=e[n].sWidth}var o=t.oScroll;(""!==o.sY||""!==o.sX)&&ge(t),je(t,null,"column-sizing",[t])}function f(t,e){var n=v(t,"bVisible");return"number"==typeof n[e]?n[e]:null}function m(t,e){var n=v(t,"bVisible"),o=i.inArray(e,n);return-1!==o?o:null}function g(t){return v(t,"bVisible").length}function v(t,e){var n=[];return i.map(t.aoColumns,function(t,i){t[e]&&n.push(i)}),n}function y(t){var e,i,o,a,r,s,l,u,c,d=t.aoColumns,h=t.aoData,p=Ye.ext.type.detect;for(e=0,i=d.length;i>e;e++)if(l=d[e],c=[],!l.sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){for(o=0,a=p.length;a>o;o++){for(r=0,s=h.length;s>r&&(c[r]===n&&(c[r]=L(t,r,e,"type")),u=p[o](c[r],t),u||o===p.length-1)&&"html"!==u;r++);if(u){l.sType=u;break}}l.sType||(l.sType="string")}}function _(t,e,o,a){var r,s,l,u,c,h,p,f=t.aoColumns;if(e)for(r=e.length-1;r>=0;r--){p=e[r];var m=p.targets!==n?p.targets:p.aTargets;for(i.isArray(m)||(m=[m]),l=0,u=m.length;u>l;l++)if("number"==typeof m[l]&&m[l]>=0){for(;f.length<=m[l];)d(t);a(m[l],p)}else if("number"==typeof m[l]&&m[l]<0)a(f.length+m[l],p);else if("string"==typeof m[l])for(c=0,h=f.length;h>c;c++)("_all"==m[l]||i(f[c].nTh).hasClass(m[l]))&&a(c,p)}if(o)for(r=0,s=o.length;s>r;r++)a(r,o[r])}function b(t,e,n,o){var a=t.aoData.length,r=i.extend(!0,{},Ye.models.oRow,{src:n?"dom":"data"});r._aData=e,t.aoData.push(r);for(var s=t.aoColumns,l=0,u=s.length;u>l;l++)n&&S(t,a,l,L(t,a,l)),s[l].sType=null;return t.aiDisplayMaster.push(a),(n||!t.oFeatures.bDeferRender)&&F(t,a,n,o),a}function w(t,e){var n;return e instanceof i||(e=i(e)),e.map(function(e,i){return n=A(t,i),b(t,n.data,i,n.cells)})}function x(t,e){return e._DT_RowIndex!==n?e._DT_RowIndex:null}function C(t,e,n){return i.inArray(n,t.aoData[e].anCells)}function L(t,e,i,o){var a=t.iDraw,r=t.aoColumns[i],s=t.aoData[e]._aData,l=r.sDefaultContent,u=r.fnGetData(s,o,{settings:t,row:e,col:i});if(u===n)return t.iDrawError!=a&&null===l&&(Ne(t,0,"Requested unknown parameter "+("function"==typeof r.mData?"{function}":"'"+r.mData+"'")+" for row "+e,4),t.iDrawError=a),l;if(u!==s&&null!==u||null===l){if("function"==typeof u)return u.call(s)}else u=l;return null===u&&"display"==o?"":u}function S(t,e,n,i){var o=t.aoColumns[n],a=t.aoData[e]._aData;o.fnSetData(a,i,{settings:t,row:e,col:n})}function k(t){return i.map(t.match(/(\\.|[^\.])+/g),function(t){return t.replace(/\\./g,".")})}function D(t){if(i.isPlainObject(t)){var e={};return i.each(t,function(t,n){n&&(e[t]=D(n))}),function(t,i,o,a){var r=e[i]||e._;return r!==n?r(t,i,o,a):t}}if(null===t)return function(t){return t};if("function"==typeof t)return function(e,n,i,o){return t(e,n,i,o)};if("string"!=typeof t||-1===t.indexOf(".")&&-1===t.indexOf("[")&&-1===t.indexOf("("))return function(e){return e[t]};var o=function(t,e,i){var a,r,s,l;if(""!==i)for(var u=k(i),c=0,d=u.length;d>c;c++){if(a=u[c].match(bn),r=u[c].match(wn),a){u[c]=u[c].replace(bn,""),""!==u[c]&&(t=t[u[c]]),s=[],u.splice(0,c+1),l=u.join(".");for(var h=0,p=t.length;p>h;h++)s.push(o(t[h],e,l));var f=a[0].substring(1,a[0].length-1);t=""===f?s:s.join(f);break}if(r)u[c]=u[c].replace(wn,""),t=t[u[c]]();else{if(null===t||t[u[c]]===n)return n;t=t[u[c]]}}return t};return function(e,n){return o(e,n,t)}}function T(t){if(i.isPlainObject(t))return T(t._);if(null===t)return function(){};if("function"==typeof t)return function(e,n,i){t(e,"set",n,i)};if("string"!=typeof t||-1===t.indexOf(".")&&-1===t.indexOf("[")&&-1===t.indexOf("("))return function(e,n){e[t]=n};var e=function(t,i,o){for(var a,r,s,l,u,c=k(o),d=c[c.length-1],h=0,p=c.length-1;p>h;h++){if(r=c[h].match(bn),s=c[h].match(wn),r){c[h]=c[h].replace(bn,""),t[c[h]]=[],a=c.slice(),a.splice(0,h+1),u=a.join(".");for(var f=0,m=i.length;m>f;f++)l={},e(l,i[f],u),t[c[h]].push(l);return}s&&(c[h]=c[h].replace(wn,""),t=t[c[h]](i)),(null===t[c[h]]||t[c[h]]===n)&&(t[c[h]]={}),t=t[c[h]]}d.match(wn)?t=t[d.replace(wn,"")](i):t[d.replace(bn,"")]=i};return function(n,i){return e(n,i,t)}}function M(t){return pn(t.aoData,"_aData")}function P(t){t.aoData.length=0,t.aiDisplayMaster.length=0,t.aiDisplay.length=0}function E(t,e,i){for(var o=-1,a=0,r=t.length;r>a;a++)t[a]==e?o=a:t[a]>e&&t[a]--;-1!=o&&i===n&&t.splice(o,1)}function I(t,e,i,o){var a,r,s=t.aoData[e],l=function(n,i){for(;n.childNodes.length;)n.removeChild(n.firstChild);n.innerHTML=L(t,e,i,"display")};if("dom"!==i&&(i&&"auto"!==i||"dom"!==s.src)){var u=s.anCells;if(u)if(o!==n)l(u[o],o);else for(a=0,r=u.length;r>a;a++)l(u[a],a)}else s._aData=A(t,s,o,o===n?n:s._aData).data;s._aSortData=null,s._aFilterData=null;var c=t.aoColumns;if(o!==n)c[o].sType=null;else{for(a=0,r=c.length;r>a;a++)c[a].sType=null;O(s)}}function A(t,e,o,a){var r,s,l,u=[],c=e.firstChild,d=0,h=t.aoColumns,p=t._rowReadObject;a=a||p?{}:[];var f=function(t,e){if("string"==typeof t){var n=t.indexOf("@");if(-1!==n){var i=t.substring(n+1),o=T(t);o(a,e.getAttribute(i))}}},m=function(t){if(o===n||o===d)if(s=h[d],l=i.trim(t.innerHTML),s&&s._bAttrSrc){var e=T(s.mData._);e(a,l),f(s.mData.sort,t),f(s.mData.type,t),f(s.mData.filter,t)}else p?(s._setter||(s._setter=T(s.mData)),s._setter(a,l)):a[d]=l;d++};if(c)for(;c;)r=c.nodeName.toUpperCase(),("TD"==r||"TH"==r)&&(m(c),u.push(c)),c=c.nextSibling;else{u=e.anCells;for(var g=0,v=u.length;v>g;g++)m(u[g])}return{data:a,cells:u}}function F(t,n,i,o){var a,r,s,l,u,c=t.aoData[n],d=c._aData,h=[];if(null===c.nTr){for(a=i||e.createElement("tr"),c.nTr=a,c.anCells=h,a._DT_RowIndex=n,O(c),l=0,u=t.aoColumns.length;u>l;l++)s=t.aoColumns[l],r=i?o[l]:e.createElement(s.sCellType),h.push(r),(!i||s.mRender||s.mData!==l)&&(r.innerHTML=L(t,n,l,"display")),s.sClass&&(r.className+=" "+s.sClass),s.bVisible&&!i?a.appendChild(r):!s.bVisible&&i&&r.parentNode.removeChild(r),s.fnCreatedCell&&s.fnCreatedCell.call(t.oInstance,r,L(t,n,l),d,n,l);je(t,"aoRowCreatedCallback",null,[a,d,n])}c.nTr.setAttribute("role","row")}function O(t){var e=t.nTr,n=t._aData;if(e){if(n.DT_RowId&&(e.id=n.DT_RowId),n.DT_RowClass){var o=n.DT_RowClass.split(" ");t.__rowc=t.__rowc?yn(t.__rowc.concat(o)):o,i(e).removeClass(t.__rowc.join(" ")).addClass(n.DT_RowClass)}n.DT_RowAttr&&i(e).attr(n.DT_RowAttr),n.DT_RowData&&i(e).data(n.DT_RowData)}}function N(t){var e,n,o,a,r,s=t.nTHead,l=t.nTFoot,u=0===i("th, td",s).length,c=t.oClasses,d=t.aoColumns;for(u&&(a=i("<tr/>").appendTo(s)),e=0,n=d.length;n>e;e++)r=d[e],o=i(r.nTh).addClass(r.sClass),u&&o.appendTo(a),t.oFeatures.bSort&&(o.addClass(r.sSortingClass),r.bSortable!==!1&&(o.attr("tabindex",t.iTabIndex).attr("aria-controls",t.sTableId),Pe(t,r.nTh,e))),r.sTitle!=o.html()&&o.html(r.sTitle),He(t,"header")(t,o,r,c);if(u&&j(t.aoHeader,s),i(s).find(">tr").attr("role","row"),i(s).find(">tr>th, >tr>td").addClass(c.sHeaderTH),i(l).find(">tr>th, >tr>td").addClass(c.sFooterTH),null!==l){var h=t.aoFooter[0];for(e=0,n=h.length;n>e;e++)r=d[e],r.nTf=h[e].cell,r.sClass&&i(r.nTf).addClass(r.sClass)}}function R(t,e,o){var a,r,s,l,u,c,d,h,p,f=[],m=[],g=t.aoColumns.length;if(e){for(o===n&&(o=!1),a=0,r=e.length;r>a;a++){for(f[a]=e[a].slice(),f[a].nTr=e[a].nTr,s=g-1;s>=0;s--)t.aoColumns[s].bVisible||o||f[a].splice(s,1);m.push([])}for(a=0,r=f.length;r>a;a++){if(d=f[a].nTr)for(;c=d.firstChild;)d.removeChild(c);for(s=0,l=f[a].length;l>s;s++)if(h=1,p=1,m[a][s]===n){for(d.appendChild(f[a][s].cell),m[a][s]=1;f[a+h]!==n&&f[a][s].cell==f[a+h][s].cell;)m[a+h][s]=1,h++;for(;f[a][s+p]!==n&&f[a][s].cell==f[a][s+p].cell;){for(u=0;h>u;u++)m[a+u][s+p]=1;p++}i(f[a][s].cell).attr("rowspan",h).attr("colspan",p)}}}}function B(t){var e=je(t,"aoPreDrawCallback","preDraw",[t]);if(-1!==i.inArray(!1,e))return void fe(t,!1);var o=[],a=0,r=t.asStripeClasses,s=r.length,l=(t.aoOpenRows.length,t.oLanguage),u=t.iInitDisplayStart,c="ssp"==We(t),d=t.aiDisplay;t.bDrawing=!0,u!==n&&-1!==u&&(t._iDisplayStart=c?u:u>=t.fnRecordsDisplay()?0:u,t.iInitDisplayStart=-1);var h=t._iDisplayStart,p=t.fnDisplayEnd();if(t.bDeferLoading)t.bDeferLoading=!1,t.iDraw++,fe(t,!1);else if(c){if(!t.bDestroying&&!W(t))return}else t.iDraw++;if(0!==d.length)for(var f=c?0:h,m=c?t.aoData.length:p,v=f;m>v;v++){var y=d[v],_=t.aoData[y];null===_.nTr&&F(t,y);var b=_.nTr;if(0!==s){var w=r[a%s];_._sRowStripe!=w&&(i(b).removeClass(_._sRowStripe).addClass(w),_._sRowStripe=w)}je(t,"aoRowCallback",null,[b,_._aData,a,v]),o.push(b),a++}else{var x=l.sZeroRecords;1==t.iDraw&&"ajax"==We(t)?x=l.sLoadingRecords:l.sEmptyTable&&0===t.fnRecordsTotal()&&(x=l.sEmptyTable),o[0]=i("<tr/>",{"class":s?r[0]:""}).append(i("<td />",{valign:"top",colSpan:g(t),"class":t.oClasses.sRowEmpty}).html(x))[0]}je(t,"aoHeaderCallback","header",[i(t.nTHead).children("tr")[0],M(t),h,p,d]),je(t,"aoFooterCallback","footer",[i(t.nTFoot).children("tr")[0],M(t),h,p,d]);var C=i(t.nTBody);C.children().detach(),C.append(i(o)),je(t,"aoDrawCallback","draw",[t]),t.bSorted=!1,t.bFiltered=!1,t.bDrawing=!1}function U(t,e){var n=t.oFeatures,i=n.bSort,o=n.bFilter;i&&De(t),o?Z(t,t.oPreviousSearch):t.aiDisplay=t.aiDisplayMaster.slice(),e!==!0&&(t._iDisplayStart=0),t._drawHold=e,B(t),t._drawHold=!1}function z(t){var e=t.oClasses,n=i(t.nTable),o=i("<div/>").insertBefore(n),a=t.oFeatures,r=i("<div/>",{id:t.sTableId+"_wrapper","class":e.sWrapper+(t.nTFoot?"":" "+e.sNoFooter)});t.nHolding=o[0],t.nTableWrapper=r[0],t.nTableReinsertBefore=t.nTable.nextSibling;for(var s,l,u,c,d,h,p=t.sDom.split(""),f=0;f<p.length;f++){if(s=null,l=p[f],"<"==l){if(u=i("<div/>")[0],c=p[f+1],"'"==c||'"'==c){for(d="",h=2;p[f+h]!=c;)d+=p[f+h],h++;if("H"==d?d=e.sJUIHeader:"F"==d&&(d=e.sJUIFooter),-1!=d.indexOf(".")){var m=d.split(".");u.id=m[0].substr(1,m[0].length-1),u.className=m[1]}else"#"==d.charAt(0)?u.id=d.substr(1,d.length-1):u.className=d;f+=h}r.append(u),r=i(u)}else if(">"==l)r=r.parent();else if("l"==l&&a.bPaginate&&a.bLengthChange)s=ce(t);else if("f"==l&&a.bFilter)s=Y(t);else if("r"==l&&a.bProcessing)s=pe(t);else if("t"==l)s=me(t);else if("i"==l&&a.bInfo)s=oe(t);else if("p"==l&&a.bPaginate)s=de(t);else if(0!==Ye.ext.feature.length)for(var g=Ye.ext.feature,v=0,y=g.length;y>v;v++)if(l==g[v].cFeature){s=g[v].fnInit(t);break}if(s){var _=t.aanFeatures;_[l]||(_[l]=[]),_[l].push(s),r.append(s)}}o.replaceWith(r)}function j(t,e){var n,o,a,r,s,l,u,c,d,h,p,f=i(e).children("tr"),m=function(t,e,n){for(var i=t[e];i[n];)n++;return n};for(t.splice(0,t.length),a=0,l=f.length;l>a;a++)t.push([]);for(a=0,l=f.length;l>a;a++)for(n=f[a],c=0,o=n.firstChild;o;){if("TD"==o.nodeName.toUpperCase()||"TH"==o.nodeName.toUpperCase())for(d=1*o.getAttribute("colspan"),h=1*o.getAttribute("rowspan"),d=d&&0!==d&&1!==d?d:1,h=h&&0!==h&&1!==h?h:1,u=m(t,a,c),p=1===d?!0:!1,s=0;d>s;s++)for(r=0;h>r;r++)t[a+r][u+s]={cell:o,unique:p},t[a+r].nTr=n;o=o.nextSibling}}function $(t,e,n){var i=[];n||(n=t.aoHeader,e&&(n=[],j(n,e)));for(var o=0,a=n.length;a>o;o++)for(var r=0,s=n[o].length;s>r;r++)!n[o][r].unique||i[r]&&t.bSortCellsTop||(i[r]=n[o][r].cell);return i}function H(t,e,n){if(je(t,"aoServerParams","serverParams",[e]),e&&i.isArray(e)){var o={},a=/(.*?)\[\]$/;i.each(e,function(t,e){var n=e.name.match(a);if(n){var i=n[0];o[i]||(o[i]=[]),o[i].push(e.value)}else o[e.name]=e.value}),e=o}var r,s=t.ajax,l=t.oInstance,u=function(e){je(t,null,"xhr",[t,e]),n(e)};if(i.isPlainObject(s)&&s.data){r=s.data;var c=i.isFunction(r)?r(e,t):r;e=i.isFunction(r)&&c?c:i.extend(!0,e,c),delete s.data}var d={data:e,success:function(e){var n=e.error||e.sError;n&&t.oApi._fnLog(t,0,n),t.json=e,u(e)},dataType:"json",cache:!1,type:t.sServerMethod,error:function(e,n){var i=t.oApi._fnLog;"parsererror"==n?i(t,0,"Invalid JSON response",1):4===e.readyState&&i(t,0,"Ajax error",7),fe(t,!1)}};t.oAjaxData=e,je(t,null,"preXhr",[t,e]),t.fnServerData?t.fnServerData.call(l,t.sAjaxSource,i.map(e,function(t,e){return{name:e,value:t}}),u,t):t.sAjaxSource||"string"==typeof s?t.jqXHR=i.ajax(i.extend(d,{url:s||t.sAjaxSource})):i.isFunction(s)?t.jqXHR=s.call(l,e,u,t):(t.jqXHR=i.ajax(i.extend(d,s)),s.data=r)}function W(t){return t.bAjaxDataGet?(t.iDraw++,fe(t,!0),H(t,V(t),function(e){q(t,e)}),!1):!0}function V(t){var e,n,o,a,r=t.aoColumns,s=r.length,l=t.oFeatures,u=t.oPreviousSearch,c=t.aoPreSearchCols,d=[],h=ke(t),p=t._iDisplayStart,f=l.bPaginate!==!1?t._iDisplayLength:-1,m=function(t,e){d.push({name:t,value:e})};m("sEcho",t.iDraw),m("iColumns",s),m("sColumns",pn(r,"sName").join(",")),m("iDisplayStart",p),m("iDisplayLength",f);var g={draw:t.iDraw,columns:[],order:[],start:p,length:f,search:{value:u.sSearch,regex:u.bRegex}};for(e=0;s>e;e++)o=r[e],a=c[e],n="function"==typeof o.mData?"function":o.mData,g.columns.push({data:n,name:o.sName,searchable:o.bSearchable,orderable:o.bSortable,search:{value:a.sSearch,regex:a.bRegex}}),m("mDataProp_"+e,n),l.bFilter&&(m("sSearch_"+e,a.sSearch),m("bRegex_"+e,a.bRegex),m("bSearchable_"+e,o.bSearchable)),l.bSort&&m("bSortable_"+e,o.bSortable);l.bFilter&&(m("sSearch",u.sSearch),m("bRegex",u.bRegex)),l.bSort&&(i.each(h,function(t,e){g.order.push({column:e.col,dir:e.dir}),m("iSortCol_"+t,e.col),m("sSortDir_"+t,e.dir)}),m("iSortingCols",h.length));var v=Ye.ext.legacy.ajax;return null===v?t.sAjaxSource?d:g:v?d:g}function q(t,e){var i=function(t,i){return e[t]!==n?e[t]:e[i]},o=G(t,e),a=i("sEcho","draw"),r=i("iTotalRecords","recordsTotal"),s=i("iTotalDisplayRecords","recordsFiltered");if(a){if(1*a<t.iDraw)return;t.iDraw=1*a}P(t),t._iRecordsTotal=parseInt(r,10),t._iRecordsDisplay=parseInt(s,10);for(var l=0,u=o.length;u>l;l++)b(t,o[l]);t.aiDisplay=t.aiDisplayMaster.slice(),t.bAjaxDataGet=!1,B(t),t._bInitComplete||le(t,e),t.bAjaxDataGet=!0,fe(t,!1)}function G(t,e){var o=i.isPlainObject(t.ajax)&&t.ajax.dataSrc!==n?t.ajax.dataSrc:t.sAjaxDataProp;return"data"===o?e.aaData||e[o]:""!==o?D(o)(e):e}function Y(t){var n=t.oClasses,o=t.sTableId,a=t.oLanguage,r=t.oPreviousSearch,s=t.aanFeatures,l='<input type="search" class="'+n.sFilterInput+'"/>',u=a.sSearch;u=u.match(/_INPUT_/)?u.replace("_INPUT_",l):u+l;var c=i("<div/>",{id:s.f?null:o+"_filter","class":n.sFilter}).append(i("<label/>").append(u)),d=function(){var e=(s.f,this.value?this.value:"");e!=r.sSearch&&(Z(t,{sSearch:e,bRegex:r.bRegex,bSmart:r.bSmart,bCaseInsensitive:r.bCaseInsensitive}),t._iDisplayStart=0,B(t))},h=null!==t.searchDelay?t.searchDelay:"ssp"===We(t)?400:0,p=i("input",c).val(r.sSearch).attr("placeholder",a.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",h?_e(d,h):d).bind("keypress.DT",function(t){return 13==t.keyCode?!1:void 0}).attr("aria-controls",o);return i(t.nTable).on("search.dt.DT",function(n,i){if(t===i)try{p[0]!==e.activeElement&&p.val(r.sSearch)}catch(o){}}),c[0]}function Z(t,e,i){var o=t.oPreviousSearch,a=t.aoPreSearchCols,r=function(t){o.sSearch=t.sSearch,o.bRegex=t.bRegex,o.bSmart=t.bSmart,o.bCaseInsensitive=t.bCaseInsensitive},s=function(t){return t.bEscapeRegex!==n?!t.bEscapeRegex:t.bRegex};if(y(t),"ssp"!=We(t)){X(t,e.sSearch,i,s(e),e.bSmart,e.bCaseInsensitive),r(e);for(var l=0;l<a.length;l++)J(t,a[l].sSearch,l,s(a[l]),a[l].bSmart,a[l].bCaseInsensitive);K(t)}else r(e);t.bFiltered=!0,je(t,null,"search",[t])}function K(t){for(var e,n,i=Ye.ext.search,o=t.aiDisplay,a=0,r=i.length;r>a;a++){for(var s=[],l=0,u=o.length;u>l;l++)n=o[l],e=t.aoData[n],i[a](t,e._aFilterData,n,e._aData,l)&&s.push(n);o.length=0,o.push.apply(o,s)}}function J(t,e,n,i,o,a){if(""!==e)for(var r,s=t.aiDisplay,l=Q(e,i,o,a),u=s.length-1;u>=0;u--)r=t.aoData[s[u]]._aFilterData[n],l.test(r)||s.splice(u,1)}function X(t,e,n,i,o,a){var r,s,l,u=Q(e,i,o,a),c=t.oPreviousSearch.sSearch,d=t.aiDisplayMaster;if(0!==Ye.ext.search.length&&(n=!0),s=ee(t),e.length<=0)t.aiDisplay=d.slice();else for((s||n||c.length>e.length||0!==e.indexOf(c)||t.bSorted)&&(t.aiDisplay=d.slice()),r=t.aiDisplay,l=r.length-1;l>=0;l--)u.test(t.aoData[r[l]]._sFilterRow)||r.splice(l,1)}function Q(t,e,n,o){if(t=e?t:te(t),n){var a=i.map(t.match(/"[^"]+"|[^ ]+/g)||"",function(t){if('"'===t.charAt(0)){var e=t.match(/^"(.*)"$/);t=e?e[1]:t}return t.replace('"',"")});t="^(?=.*?"+a.join(")(?=.*?")+").*$"}return new RegExp(t,o?"i":"")}function te(t){return t.replace(an,"\\$1")}function ee(t){var e,n,i,o,a,r,s,l,u=t.aoColumns,c=Ye.ext.type.search,d=!1;for(n=0,o=t.aoData.length;o>n;n++)if(l=t.aoData[n],!l._aFilterData){for(r=[],i=0,a=u.length;a>i;i++)e=u[i],e.bSearchable?(s=L(t,n,i,"filter"),c[e.sType]&&(s=c[e.sType](s)),null===s&&(s=""),"string"!=typeof s&&s.toString&&(s=s.toString())):s="",s.indexOf&&-1!==s.indexOf("&")&&(xn.innerHTML=s,s=Cn?xn.textContent:xn.innerText),s.replace&&(s=s.replace(/[\r\n]/g,"")),r.push(s);l._aFilterData=r,l._sFilterRow=r.join("  "),d=!0}return d}function ne(t){return{search:t.sSearch,smart:t.bSmart,regex:t.bRegex,caseInsensitive:t.bCaseInsensitive}}function ie(t){return{sSearch:t.search,bSmart:t.smart,bRegex:t.regex,bCaseInsensitive:t.caseInsensitive}}function oe(t){var e=t.sTableId,n=t.aanFeatures.i,o=i("<div/>",{"class":t.oClasses.sInfo,id:n?null:e+"_info"});return n||(t.aoDrawCallback.push({fn:ae,sName:"information"}),o.attr("role","status").attr("aria-live","polite"),i(t.nTable).attr("aria-describedby",e+"_info")),o[0]}function ae(t){var e=t.aanFeatures.i;if(0!==e.length){var n=t.oLanguage,o=t._iDisplayStart+1,a=t.fnDisplayEnd(),r=t.fnRecordsTotal(),s=t.fnRecordsDisplay(),l=s?n.sInfo:n.sInfoEmpty;s!==r&&(l+=" "+n.sInfoFiltered),l+=n.sInfoPostFix,l=re(t,l);var u=n.fnInfoCallback;null!==u&&(l=u.call(t.oInstance,t,o,a,r,s,l)),i(e).html(l)}}function re(t,e){var n=t.fnFormatNumber,i=t._iDisplayStart+1,o=t._iDisplayLength,a=t.fnRecordsDisplay(),r=-1===o;return e.replace(/_START_/g,n.call(t,i)).replace(/_END_/g,n.call(t,t.fnDisplayEnd())).replace(/_MAX_/g,n.call(t,t.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(t,a)).replace(/_PAGE_/g,n.call(t,r?1:Math.ceil(i/o))).replace(/_PAGES_/g,n.call(t,r?1:Math.ceil(a/o)))}function se(t){var e,n,i,o=t.iInitDisplayStart,a=t.aoColumns,r=t.oFeatures;if(!t.bInitialised)return void setTimeout(function(){se(t)},200);for(z(t),N(t),R(t,t.aoHeader),R(t,t.aoFooter),fe(t,!0),r.bAutoWidth&&ye(t),e=0,n=a.length;n>e;e++)i=a[e],i.sWidth&&(i.nTh.style.width=Le(i.sWidth));U(t);var s=We(t);"ssp"!=s&&("ajax"==s?H(t,[],function(n){var i=G(t,n);for(e=0;e<i.length;e++)b(t,i[e]);t.iInitDisplayStart=o,U(t),fe(t,!1),le(t,n)},t):(fe(t,!1),le(t)))}function le(t,e){t._bInitComplete=!0,e&&p(t),je(t,"aoInitComplete","init",[t,e])}function ue(t,e){var n=parseInt(e,10);t._iDisplayLength=n,$e(t),je(t,null,"length",[t,n])}function ce(t){for(var e=t.oClasses,n=t.sTableId,o=t.aLengthMenu,a=i.isArray(o[0]),r=a?o[0]:o,s=a?o[1]:o,l=i("<select/>",{name:n+"_length","aria-controls":n,"class":e.sLengthSelect}),u=0,c=r.length;c>u;u++)l[0][u]=new Option(s[u],r[u]);var d=i("<div><label/></div>").addClass(e.sLength);return t.aanFeatures.l||(d[0].id=n+"_length"),d.children().append(t.oLanguage.sLengthMenu.replace("_MENU_",l[0].outerHTML)),i("select",d).val(t._iDisplayLength).bind("change.DT",function(){ue(t,i(this).val()),B(t)}),i(t.nTable).bind("length.dt.DT",function(e,n,o){t===n&&i("select",d).val(o)}),d[0]}function de(t){var e=t.sPaginationType,n=Ye.ext.pager[e],o="function"==typeof n,a=function(t){B(t)},r=i("<div/>").addClass(t.oClasses.sPaging+e)[0],s=t.aanFeatures;return o||n.fnInit(t,r,a),s.p||(r.id=t.sTableId+"_paginate",t.aoDrawCallback.push({fn:function(t){if(o){var e,i,r=t._iDisplayStart,l=t._iDisplayLength,u=t.fnRecordsDisplay(),c=-1===l,d=c?0:Math.ceil(r/l),h=c?1:Math.ceil(u/l),p=n(d,h);for(e=0,i=s.p.length;i>e;e++)He(t,"pageButton")(t,s.p[e],e,p,d,h)}else n.fnUpdate(t,a)},sName:"pagination"})),r}function he(t,e,n){var i=t._iDisplayStart,o=t._iDisplayLength,a=t.fnRecordsDisplay();0===a||-1===o?i=0:"number"==typeof e?(i=e*o,i>a&&(i=0)):"first"==e?i=0:"previous"==e?(i=o>=0?i-o:0,0>i&&(i=0)):"next"==e?a>i+o&&(i+=o):"last"==e?i=Math.floor((a-1)/o)*o:Ne(t,0,"Unknown paging action: "+e,5);var r=t._iDisplayStart!==i;return t._iDisplayStart=i,r&&(je(t,null,"page",[t]),n&&B(t)),r}function pe(t){return i("<div/>",{id:t.aanFeatures.r?null:t.sTableId+"_processing","class":t.oClasses.sProcessing}).html(t.oLanguage.sProcessing).insertBefore(t.nTable)[0]}function fe(t,e){t.oFeatures.bProcessing&&i(t.aanFeatures.r).css("display",e?"block":"none"),je(t,null,"processing",[t,e])}function me(t){var e=i(t.nTable);e.attr("role","grid");var n=t.oScroll;if(""===n.sX&&""===n.sY)return t.nTable;var o=n.sX,a=n.sY,r=t.oClasses,s=e.children("caption"),l=s.length?s[0]._captionSide:null,u=i(e[0].cloneNode(!1)),c=i(e[0].cloneNode(!1)),d=e.children("tfoot"),h="<div/>",p=function(t){return t?Le(t):null};n.sX&&"100%"===e.attr("width")&&e.removeAttr("width"),d.length||(d=null);var f=i(h,{"class":r.sScrollWrapper}).append(i(h,{"class":r.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:o?p(o):"100%"}).append(i(h,{"class":r.sScrollHeadInner}).css({"box-sizing":"content-box",width:n.sXInner||"100%"}).append(u.removeAttr("id").css("margin-left",0).append("top"===l?s:null).append(e.children("thead"))))).append(i(h,{"class":r.sScrollBody}).css({overflow:"auto",height:p(a),width:p(o)}).append(e));d&&f.append(i(h,{"class":r.sScrollFoot}).css({overflow:"hidden",border:0,width:o?p(o):"100%"}).append(i(h,{"class":r.sScrollFootInner}).append(c.removeAttr("id").css("margin-left",0).append("bottom"===l?s:null).append(e.children("tfoot")))));var m=f.children(),g=m[0],v=m[1],y=d?m[2]:null;return o&&i(v).on("scroll.DT",function(){var t=this.scrollLeft;g.scrollLeft=t,d&&(y.scrollLeft=t)}),t.nScrollHead=g,t.nScrollBody=v,t.nScrollFoot=y,t.aoDrawCallback.push({fn:ge,sName:"scrolling"}),f[0]}function ge(t){var e,n,o,a,r,s,l,u,c,d=t.oScroll,h=d.sX,p=d.sXInner,m=d.sY,g=d.iBarWidth,v=i(t.nScrollHead),y=v[0].style,_=v.children("div"),b=_[0].style,w=_.children("table"),x=t.nScrollBody,C=i(x),L=x.style,S=i(t.nScrollFoot),k=S.children("div"),D=k.children("table"),T=i(t.nTHead),M=i(t.nTable),P=M[0],E=P.style,I=t.nTFoot?i(t.nTFoot):null,A=t.oBrowser,F=A.bScrollOversize,O=[],N=[],R=[],B=function(t){var e=t.style;e.paddingTop="0",e.paddingBottom="0",e.borderTopWidth="0",e.borderBottomWidth="0",e.height=0};if(M.children("thead, tfoot").remove(),r=T.clone().prependTo(M),e=T.find("tr"),o=r.find("tr"),r.find("th, td").removeAttr("tabindex"),I&&(s=I.clone().prependTo(M),n=I.find("tr"),a=s.find("tr")),h||(L.width="100%",v[0].style.width="100%"),i.each($(t,r),function(e,n){l=f(t,e),n.style.width=t.aoColumns[l].sWidth}),I&&ve(function(t){t.style.width=""},a),d.bCollapse&&""!==m&&(L.height=C[0].offsetHeight+T[0].offsetHeight+"px"),c=M.outerWidth(),""===h?(E.width="100%",F&&(M.find("tbody").height()>x.offsetHeight||"scroll"==C.css("overflow-y"))&&(E.width=Le(M.outerWidth()-g))):""!==p?E.width=Le(p):c==C.width()&&C.height()<M.height()?(E.width=Le(c-g),M.outerWidth()>c-g&&(E.width=Le(c))):E.width=Le(c),c=M.outerWidth(),ve(B,o),ve(function(t){R.push(t.innerHTML),O.push(Le(i(t).css("width")))},o),ve(function(t,e){t.style.width=O[e]},e),i(o).height(0),I&&(ve(B,a),ve(function(t){N.push(Le(i(t).css("width")))},a),ve(function(t,e){t.style.width=N[e]},n),i(a).height(0)),ve(function(t,e){t.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+R[e]+"</div>",t.style.width=O[e]},o),I&&ve(function(t,e){t.innerHTML="",t.style.width=N[e]},a),M.outerWidth()<c?(u=x.scrollHeight>x.offsetHeight||"scroll"==C.css("overflow-y")?c+g:c,F&&(x.scrollHeight>x.offsetHeight||"scroll"==C.css("overflow-y"))&&(E.width=Le(u-g)),(""===h||""!==p)&&Ne(t,1,"Possible column misalignment",6)):u="100%",L.width=Le(u),y.width=Le(u),I&&(t.nScrollFoot.style.width=Le(u)),m||F&&(L.height=Le(P.offsetHeight+g)),m&&d.bCollapse){L.height=Le(m);var U=h&&P.offsetWidth>x.offsetWidth?g:0;P.offsetHeight<x.offsetHeight&&(L.height=Le(P.offsetHeight+U))}var z=M.outerWidth();w[0].style.width=Le(z),b.width=Le(z);var j=M.height()>x.clientHeight||"scroll"==C.css("overflow-y"),H="padding"+(A.bScrollbarLeft?"Left":"Right");b[H]=j?g+"px":"0px",I&&(D[0].style.width=Le(z),k[0].style.width=Le(z),k[0].style[H]=j?g+"px":"0px"),C.scroll(),!t.bSorted&&!t.bFiltered||t._drawHold||(x.scrollTop=0)}function ve(t,e,n){for(var i,o,a=0,r=0,s=e.length;s>r;){for(i=e[r].firstChild,o=n?n[r].firstChild:null;i;)1===i.nodeType&&(n?t(i,o,a):t(i,a),a++),i=i.nextSibling,o=n?o.nextSibling:null;r++}}function ye(e){var n,o,a,r,s,l=e.nTable,u=e.aoColumns,c=e.oScroll,d=c.sY,h=c.sX,f=c.sXInner,m=u.length,y=v(e,"bVisible"),_=i("th",e.nTHead),b=l.getAttribute("width"),w=l.parentNode,x=!1,C=l.style.width;for(C&&-1!==C.indexOf("%")&&(b=C),n=0;n<y.length;n++)o=u[y[n]],null!==o.sWidth&&(o.sWidth=be(o.sWidthOrig,w),x=!0);if(x||h||d||m!=g(e)||m!=_.length){var L=i(l).clone().empty().css("visibility","hidden").removeAttr("id").append(i(e.nTHead).clone(!1)).append(i(e.nTFoot).clone(!1)).append(i("<tbody><tr/></tbody>"));L.find("tfoot th, tfoot td").css("width","");var S=L.find("tbody tr");for(_=$(e,L.find("thead")[0]),n=0;n<y.length;n++)o=u[y[n]],_[n].style.width=null!==o.sWidthOrig&&""!==o.sWidthOrig?Le(o.sWidthOrig):"";if(e.aoData.length)for(n=0;n<y.length;n++)a=y[n],o=u[a],i(xe(e,a)).clone(!1).append(o.sContentPadding).appendTo(S);if(L.appendTo(w),h&&f?L.width(f):h?(L.css("width","auto"),L.width()<w.offsetWidth&&L.width(w.offsetWidth)):d?L.width(w.offsetWidth):b&&L.width(b),we(e,L[0]),h){var k=0;for(n=0;n<y.length;n++)o=u[y[n]],s=i(_[n]).outerWidth(),k+=null===o.sWidthOrig?s:parseInt(o.sWidth,10)+s-i(_[n]).width();L.width(Le(k)),l.style.width=Le(k)}for(n=0;n<y.length;n++)o=u[y[n]],r=i(_[n]).width(),r&&(o.sWidth=Le(r));l.style.width=Le(L.css("width")),L.remove()}else for(n=0;m>n;n++)u[n].sWidth=Le(_.eq(n).width());b&&(l.style.width=Le(b)),!b&&!h||e._reszEvt||(i(t).bind("resize.DT-"+e.sInstance,_e(function(){p(e)})),e._reszEvt=!0)}function _e(t,e){var i,o,a=e!==n?e:200;return function(){var e=this,r=+new Date,s=arguments;i&&i+a>r?(clearTimeout(o),o=setTimeout(function(){i=n,t.apply(e,s)},a)):(i=r,t.apply(e,s))}}function be(t,n){if(!t)return 0;var o=i("<div/>").css("width",Le(t)).appendTo(n||e.body),a=o[0].offsetWidth;return o.remove(),a}function we(t,e){var n=t.oScroll;if(n.sX||n.sY){var o=n.sX?0:n.iBarWidth;e.style.width=Le(i(e).outerWidth()-o)}}function xe(t,e){var n=Ce(t,e);if(0>n)return null;var o=t.aoData[n];return o.nTr?o.anCells[e]:i("<td/>").html(L(t,n,e,"display"))[0]}function Ce(t,e){for(var n,i=-1,o=-1,a=0,r=t.aoData.length;r>a;a++)n=L(t,a,e,"display")+"",n=n.replace(Ln,""),n.length>i&&(i=n.length,o=a);return o}function Le(t){return null===t?"0px":"number"==typeof t?0>t?"0px":t+"px":t.match(/\d$/)?t+"px":t}function Se(){var t=Ye.__scrollbarWidth;if(t===n){var e=i("<p/>").css({position:"absolute",top:0,left:0,width:"100%",height:150,padding:0,overflow:"scroll",visibility:"hidden"}).appendTo("body");t=e[0].offsetWidth-e[0].clientWidth,Ye.__scrollbarWidth=t,e.remove()}return t}function ke(t){var e,o,a,r,s,l,u,c=[],d=t.aoColumns,h=t.aaSortingFixed,p=i.isPlainObject(h),f=[],m=function(t){t.length&&!i.isArray(t[0])?f.push(t):f.push.apply(f,t)};for(i.isArray(h)&&m(h),p&&h.pre&&m(h.pre),m(t.aaSorting),p&&h.post&&m(h.post),e=0;e<f.length;e++)for(u=f[e][0],r=d[u].aDataSort,o=0,a=r.length;a>o;o++)s=r[o],l=d[s].sType||"string",f[e]._idx===n&&(f[e]._idx=i.inArray(f[e][1],d[s].asSorting)),c.push({src:u,col:s,dir:f[e][1],index:f[e]._idx,type:l,formatter:Ye.ext.type.order[l+"-pre"]});return c}function De(t){var e,n,i,o,a,r=[],s=Ye.ext.type.order,l=t.aoData,u=(t.aoColumns,0),c=t.aiDisplayMaster;for(y(t),a=ke(t),e=0,n=a.length;n>e;e++)o=a[e],o.formatter&&u++,Ie(t,o.col);if("ssp"!=We(t)&&0!==a.length){for(e=0,i=c.length;i>e;e++)r[c[e]]=e;c.sort(u===a.length?function(t,e){var n,i,o,s,u,c=a.length,d=l[t]._aSortData,h=l[e]._aSortData;for(o=0;c>o;o++)if(u=a[o],n=d[u.col],i=h[u.col],s=i>n?-1:n>i?1:0,0!==s)return"asc"===u.dir?s:-s;return n=r[t],i=r[e],i>n?-1:n>i?1:0}:function(t,e){var n,i,o,u,c,d,h=a.length,p=l[t]._aSortData,f=l[e]._aSortData;for(o=0;h>o;o++)if(c=a[o],n=p[c.col],i=f[c.col],d=s[c.type+"-"+c.dir]||s["string-"+c.dir],u=d(n,i),0!==u)return u;return n=r[t],i=r[e],i>n?-1:n>i?1:0})}t.bSorted=!0}function Te(t){for(var e,n,i=t.aoColumns,o=ke(t),a=t.oLanguage.oAria,r=0,s=i.length;s>r;r++){var l=i[r],u=l.asSorting,c=l.sTitle.replace(/<.*?>/g,""),d=l.nTh;d.removeAttribute("aria-sort"),l.bSortable?(o.length>0&&o[0].col==r?(d.setAttribute("aria-sort","asc"==o[0].dir?"ascending":"descending"),n=u[o[0].index+1]||u[0]):n=u[0],e=c+("asc"===n?a.sSortAscending:a.sSortDescending)):e=c,d.setAttribute("aria-label",e)}}function Me(t,e,o,a){var r,s=t.aoColumns[e],l=t.aaSorting,u=s.asSorting,c=function(t,e){var o=t._idx;return o===n&&(o=i.inArray(t[1],u)),o+1<u.length?o+1:e?null:0};if("number"==typeof l[0]&&(l=t.aaSorting=[l]),o&&t.oFeatures.bSortMulti){var d=i.inArray(e,pn(l,"0"));-1!==d?(r=c(l[d],!0),null===r&&1===l.length&&(r=0),null===r?l.splice(d,1):(l[d][1]=u[r],l[d]._idx=r)):(l.push([e,u[0],0]),l[l.length-1]._idx=0)}else l.length&&l[0][0]==e?(r=c(l[0]),l.length=1,l[0][1]=u[r],l[0]._idx=r):(l.length=0,l.push([e,u[0]]),l[0]._idx=0);U(t),"function"==typeof a&&a(t)}function Pe(t,e,n,i){var o=t.aoColumns[n];Ue(e,{},function(e){o.bSortable!==!1&&(t.oFeatures.bProcessing?(fe(t,!0),setTimeout(function(){Me(t,n,e.shiftKey,i),"ssp"!==We(t)&&fe(t,!1)},0)):Me(t,n,e.shiftKey,i))
})}function Ee(t){var e,n,o,a=t.aLastSort,r=t.oClasses.sSortColumn,s=ke(t),l=t.oFeatures;if(l.bSort&&l.bSortClasses){for(e=0,n=a.length;n>e;e++)o=a[e].src,i(pn(t.aoData,"anCells",o)).removeClass(r+(2>e?e+1:3));for(e=0,n=s.length;n>e;e++)o=s[e].src,i(pn(t.aoData,"anCells",o)).addClass(r+(2>e?e+1:3))}t.aLastSort=s}function Ie(t,e){var n,i=t.aoColumns[e],o=Ye.ext.order[i.sSortDataType];o&&(n=o.call(t.oInstance,t,e,m(t,e)));for(var a,r,s=Ye.ext.type.order[i.sType+"-pre"],l=0,u=t.aoData.length;u>l;l++)a=t.aoData[l],a._aSortData||(a._aSortData=[]),(!a._aSortData[e]||o)&&(r=o?n[l]:L(t,l,e,"sort"),a._aSortData[e]=s?s(r):r)}function Ae(t){if(t.oFeatures.bStateSave&&!t.bDestroying){var e={time:+new Date,start:t._iDisplayStart,length:t._iDisplayLength,order:i.extend(!0,[],t.aaSorting),search:ne(t.oPreviousSearch),columns:i.map(t.aoColumns,function(e,n){return{visible:e.bVisible,search:ne(t.aoPreSearchCols[n])}})};je(t,"aoStateSaveParams","stateSaveParams",[t,e]),t.oSavedState=e,t.fnStateSaveCallback.call(t.oInstance,t,e)}}function Fe(t){var e,o,a=t.aoColumns;if(t.oFeatures.bStateSave){var r=t.fnStateLoadCallback.call(t.oInstance,t);if(r&&r.time){var s=je(t,"aoStateLoadParams","stateLoadParams",[t,r]);if(-1===i.inArray(!1,s)){var l=t.iStateDuration;if(!(l>0&&r.time<+new Date-1e3*l)&&a.length===r.columns.length){for(t.oLoadedState=i.extend(!0,{},r),r.start!==n&&(t._iDisplayStart=r.start,t.iInitDisplayStart=r.start),r.length!==n&&(t._iDisplayLength=r.length),r.order!==n&&(t.aaSorting=[],i.each(r.order,function(e,n){t.aaSorting.push(n[0]>=a.length?[0,n[1]]:n)})),r.search!==n&&i.extend(t.oPreviousSearch,ie(r.search)),e=0,o=r.columns.length;o>e;e++){var u=r.columns[e];u.visible!==n&&(a[e].bVisible=u.visible),u.search!==n&&i.extend(t.aoPreSearchCols[e],ie(u.search))}je(t,"aoStateLoaded","stateLoaded",[t,r])}}}}}function Oe(t){var e=Ye.settings,n=i.inArray(t,pn(e,"nTable"));return-1!==n?e[n]:null}function Ne(e,n,i,o){if(i="DataTables warning: "+(null!==e?"table id="+e.sTableId+" - ":"")+i,o&&(i+=". For more information about this error, please see http://datatables.net/tn/"+o),n)t.console&&console.log&&console.log(i);else{var a=Ye.ext,r=a.sErrMode||a.errMode;if(je(e,null,"error",[e,o,i]),"alert"==r)alert(i);else{if("throw"==r)throw new Error(i);"function"==typeof r&&r(e,o,i)}}}function Re(t,e,o,a){return i.isArray(o)?void i.each(o,function(n,o){i.isArray(o)?Re(t,e,o[0],o[1]):Re(t,e,o)}):(a===n&&(a=o),void(e[o]!==n&&(t[a]=e[o])))}function Be(t,e,n){var o;for(var a in e)e.hasOwnProperty(a)&&(o=e[a],i.isPlainObject(o)?(i.isPlainObject(t[a])||(t[a]={}),i.extend(!0,t[a],o)):t[a]=n&&"data"!==a&&"aaData"!==a&&i.isArray(o)?o.slice():o);return t}function Ue(t,e,n){i(t).bind("click.DT",e,function(e){t.blur(),n(e)}).bind("keypress.DT",e,function(t){13===t.which&&(t.preventDefault(),n(t))}).bind("selectstart.DT",function(){return!1})}function ze(t,e,n,i){n&&t[e].push({fn:n,sName:i})}function je(t,e,n,o){var a=[];return e&&(a=i.map(t[e].slice().reverse(),function(e){return e.fn.apply(t.oInstance,o)})),null!==n&&i(t.nTable).trigger(n+".dt",o),a}function $e(t){var e=t._iDisplayStart,n=t.fnDisplayEnd(),i=t._iDisplayLength;e>=n&&(e=n-i),e-=e%i,(-1===i||0>e)&&(e=0),t._iDisplayStart=e}function He(t,e){var n=t.renderer,o=Ye.ext.renderer[e];return i.isPlainObject(n)&&n[e]?o[n[e]]||o._:"string"==typeof n?o[n]||o._:o._}function We(t){return t.oFeatures.bServerSide?"ssp":t.ajax||t.sAjaxSource?"ajax":"dom"}function Ve(t,e){var n=[],i=Gn.numbers_length,o=Math.floor(i/2);return i>=e?n=mn(0,e):o>=t?(n=mn(0,i-2),n.push("ellipsis"),n.push(e-1)):t>=e-1-o?(n=mn(e-(i-2),e),n.splice(0,0,"ellipsis"),n.splice(0,0,0)):(n=mn(t-o+2,t+o-1),n.push("ellipsis"),n.push(e-1),n.splice(0,0,"ellipsis"),n.splice(0,0,0)),n.DT_el="span",n}function qe(t){i.each({num:function(e){return Yn(e,t)},"num-fmt":function(e){return Yn(e,t,rn)},"html-num":function(e){return Yn(e,t,en)},"html-num-fmt":function(e){return Yn(e,t,en,rn)}},function(e,n){Ze.type.order[e+t+"-pre"]=n,e.match(/^html\-/)&&(Ze.type.search[e+t]=Ze.type.search.html)})}function Ge(t){return function(){var e=[Oe(this[Ye.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return Ye.ext.internal[t].apply(this,e)}}var Ye,Ze,Ke,Je,Xe,Qe={},tn=/[\r\n]/g,en=/<.*?>/g,nn=/^[\w\+\-]/,on=/[\w\+\-]$/,an=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g"),rn=/[',$\xa3\u20ac\xa5%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,sn=function(t){return t&&t!==!0&&"-"!==t?!1:!0},ln=function(t){var e=parseInt(t,10);return!isNaN(e)&&isFinite(t)?e:null},un=function(t,e){return Qe[e]||(Qe[e]=new RegExp(te(e),"g")),"string"==typeof t&&"."!==e?t.replace(/\./g,"").replace(Qe[e],"."):t},cn=function(t,e,n){var i="string"==typeof t;return sn(t)?!0:(e&&i&&(t=un(t,e)),n&&i&&(t=t.replace(rn,"")),!isNaN(parseFloat(t))&&isFinite(t))},dn=function(t){return sn(t)||"string"==typeof t},hn=function(t,e,n){if(sn(t))return!0;var i=dn(t);return i&&cn(vn(t),e,n)?!0:null},pn=function(t,e,i){var o=[],a=0,r=t.length;if(i!==n)for(;r>a;a++)t[a]&&t[a][e]&&o.push(t[a][e][i]);else for(;r>a;a++)t[a]&&o.push(t[a][e]);return o},fn=function(t,e,i,o){var a=[],r=0,s=e.length;if(o!==n)for(;s>r;r++)t[e[r]][i]&&a.push(t[e[r]][i][o]);else for(;s>r;r++)a.push(t[e[r]][i]);return a},mn=function(t,e){var i,o=[];e===n?(e=0,i=t):(i=e,e=t);for(var a=e;i>a;a++)o.push(a);return o},gn=function(t){for(var e=[],n=0,i=t.length;i>n;n++)t[n]&&e.push(t[n]);return e},vn=function(t){return t.replace(en,"")},yn=function(t){var e,n,i,o=[],a=t.length,r=0;t:for(n=0;a>n;n++){for(e=t[n],i=0;r>i;i++)if(o[i]===e)continue t;o.push(e),r++}return o},_n=function(t,e,i){t[e]!==n&&(t[i]=t[e])},bn=/\[.*?\]$/,wn=/\(\)$/,xn=i("<div>")[0],Cn=xn.textContent!==n,Ln=/<.*?>/g;Ye=function(t){this.$=function(t,e){return this.api(!0).$(t,e)},this._=function(t,e){return this.api(!0).rows(t,e).data()},this.api=function(t){return new Ke(t?Oe(this[Ze.iApiIndex]):this)},this.fnAddData=function(t,e){var o=this.api(!0),a=i.isArray(t)&&(i.isArray(t[0])||i.isPlainObject(t[0]))?o.rows.add(t):o.row.add(t);return(e===n||e)&&o.draw(),a.flatten().toArray()},this.fnAdjustColumnSizing=function(t){var e=this.api(!0).columns.adjust(),i=e.settings()[0],o=i.oScroll;t===n||t?e.draw(!1):(""!==o.sX||""!==o.sY)&&ge(i)},this.fnClearTable=function(t){var e=this.api(!0).clear();(t===n||t)&&e.draw()},this.fnClose=function(t){this.api(!0).row(t).child.hide()},this.fnDeleteRow=function(t,e,i){var o=this.api(!0),a=o.rows(t),r=a.settings()[0],s=r.aoData[a[0][0]];return a.remove(),e&&e.call(this,r,s),(i===n||i)&&o.draw(),s},this.fnDestroy=function(t){this.api(!0).destroy(t)},this.fnDraw=function(t){this.api(!0).draw(t)},this.fnFilter=function(t,e,i,o,a,r){var s=this.api(!0);null===e||e===n?s.search(t,i,o,r):s.column(e).search(t,i,o,r),s.draw()},this.fnGetData=function(t,e){var i=this.api(!0);if(t!==n){var o=t.nodeName?t.nodeName.toLowerCase():"";return e!==n||"td"==o||"th"==o?i.cell(t,e).data():i.row(t).data()||null}return i.data().toArray()},this.fnGetNodes=function(t){var e=this.api(!0);return t!==n?e.row(t).node():e.rows().nodes().flatten().toArray()},this.fnGetPosition=function(t){var e=this.api(!0),n=t.nodeName.toUpperCase();if("TR"==n)return e.row(t).index();if("TD"==n||"TH"==n){var i=e.cell(t).index();return[i.row,i.columnVisible,i.column]}return null},this.fnIsOpen=function(t){return this.api(!0).row(t).child.isShown()},this.fnOpen=function(t,e,n){return this.api(!0).row(t).child(e,n).show().child()[0]},this.fnPageChange=function(t,e){var i=this.api(!0).page(t);(e===n||e)&&i.draw(!1)},this.fnSetColumnVis=function(t,e,i){var o=this.api(!0).column(t).visible(e);(i===n||i)&&o.columns.adjust().draw()},this.fnSettings=function(){return Oe(this[Ze.iApiIndex])},this.fnSort=function(t){this.api(!0).order(t).draw()},this.fnSortListener=function(t,e,n){this.api(!0).order.listener(t,e,n)},this.fnUpdate=function(t,e,i,o,a){var r=this.api(!0);return i===n||null===i?r.row(e).data(t):r.cell(e,i).data(t),(a===n||a)&&r.columns.adjust(),(o===n||o)&&r.draw(),0},this.fnVersionCheck=Ze.fnVersionCheck;var e=this,o=t===n,c=this.length;o&&(t={}),this.oApi=this.internal=Ze.internal;for(var p in Ye.ext.internal)p&&(this[p]=Ge(p));return this.each(function(){var p,f={},m=c>1?Be(f,t,!0):t,g=0,v=this.getAttribute("id"),y=!1,x=Ye.defaults,C=i(this);if("table"!=this.nodeName.toLowerCase())return void Ne(null,0,"Non-table node initialisation ("+this.nodeName+")",2);s(x),l(x.column),a(x,x,!0),a(x.column,x.column,!0),a(x,i.extend(m,C.data()));var L=Ye.settings;for(g=0,p=L.length;p>g;g++){var S=L[g];if(S.nTable==this||S.nTHead.parentNode==this||S.nTFoot&&S.nTFoot.parentNode==this){var k=m.bRetrieve!==n?m.bRetrieve:x.bRetrieve,D=m.bDestroy!==n?m.bDestroy:x.bDestroy;if(o||k)return S.oInstance;if(D){S.oInstance.fnDestroy();break}return void Ne(S,0,"Cannot reinitialise DataTable",3)}if(S.sTableId==this.id){L.splice(g,1);break}}(null===v||""===v)&&(v="DataTables_Table_"+Ye.ext._unique++,this.id=v);var T=i.extend(!0,{},Ye.models.oSettings,{sDestroyWidth:C[0].style.width,sInstance:v,sTableId:v});T.nTable=this,T.oApi=e.internal,T.oInit=m,L.push(T),T.oInstance=1===e.length?e:C.dataTable(),s(m),m.oLanguage&&r(m.oLanguage),m.aLengthMenu&&!m.iDisplayLength&&(m.iDisplayLength=i.isArray(m.aLengthMenu[0])?m.aLengthMenu[0][0]:m.aLengthMenu[0]),m=Be(i.extend(!0,{},x),m),Re(T.oFeatures,m,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),Re(T,m,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]),Re(T.oScroll,m,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),Re(T.oLanguage,m,"fnInfoCallback"),ze(T,"aoDrawCallback",m.fnDrawCallback,"user"),ze(T,"aoServerParams",m.fnServerParams,"user"),ze(T,"aoStateSaveParams",m.fnStateSaveParams,"user"),ze(T,"aoStateLoadParams",m.fnStateLoadParams,"user"),ze(T,"aoStateLoaded",m.fnStateLoaded,"user"),ze(T,"aoRowCallback",m.fnRowCallback,"user"),ze(T,"aoRowCreatedCallback",m.fnCreatedRow,"user"),ze(T,"aoHeaderCallback",m.fnHeaderCallback,"user"),ze(T,"aoFooterCallback",m.fnFooterCallback,"user"),ze(T,"aoInitComplete",m.fnInitComplete,"user"),ze(T,"aoPreDrawCallback",m.fnPreDrawCallback,"user");var M=T.oClasses;if(m.bJQueryUI?(i.extend(M,Ye.ext.oJUIClasses,m.oClasses),m.sDom===x.sDom&&"lfrtip"===x.sDom&&(T.sDom='<"H"lfr>t<"F"ip>'),T.renderer?i.isPlainObject(T.renderer)&&!T.renderer.header&&(T.renderer.header="jqueryui"):T.renderer="jqueryui"):i.extend(M,Ye.ext.classes,m.oClasses),C.addClass(M.sTable),(""!==T.oScroll.sX||""!==T.oScroll.sY)&&(T.oScroll.iBarWidth=Se()),T.oScroll.sX===!0&&(T.oScroll.sX="100%"),T.iInitDisplayStart===n&&(T.iInitDisplayStart=m.iDisplayStart,T._iDisplayStart=m.iDisplayStart),null!==m.iDeferLoading){T.bDeferLoading=!0;var P=i.isArray(m.iDeferLoading);T._iRecordsDisplay=P?m.iDeferLoading[0]:m.iDeferLoading,T._iRecordsTotal=P?m.iDeferLoading[1]:m.iDeferLoading}var E=T.oLanguage;i.extend(!0,E,m.oLanguage),""!==E.sUrl&&(i.ajax({dataType:"json",url:E.sUrl,success:function(t){r(t),a(x.oLanguage,t),i.extend(!0,E,t),se(T)},error:function(){se(T)}}),y=!0),null===m.asStripeClasses&&(T.asStripeClasses=[M.sStripeOdd,M.sStripeEven]);var I=T.asStripeClasses,F=C.children("tbody").find("tr").eq(0);-1!==i.inArray(!0,i.map(I,function(t){return F.hasClass(t)}))&&(i("tbody tr",this).removeClass(I.join(" ")),T.asDestroyStripes=I.slice());var O,N=[],R=this.getElementsByTagName("thead");if(0!==R.length&&(j(T.aoHeader,R[0]),N=$(T)),null===m.aoColumns)for(O=[],g=0,p=N.length;p>g;g++)O.push(null);else O=m.aoColumns;for(g=0,p=O.length;p>g;g++)d(T,N?N[g]:null);if(_(T,m.aoColumnDefs,O,function(t,e){h(T,t,e)}),F.length){var B=function(t,e){return null!==t.getAttribute("data-"+e)?e:null};i.each(A(T,F[0]).cells,function(t,e){var i=T.aoColumns[t];if(i.mData===t){var o=B(e,"sort")||B(e,"order"),a=B(e,"filter")||B(e,"search");(null!==o||null!==a)&&(i.mData={_:t+".display",sort:null!==o?t+".@data-"+o:n,type:null!==o?t+".@data-"+o:n,filter:null!==a?t+".@data-"+a:n},h(T,t))}})}var U=T.oFeatures;if(m.bStateSave&&(U.bStateSave=!0,Fe(T,m),ze(T,"aoDrawCallback",Ae,"state_save")),m.aaSorting===n){var z=T.aaSorting;for(g=0,p=z.length;p>g;g++)z[g][1]=T.aoColumns[g].asSorting[0]}Ee(T),U.bSort&&ze(T,"aoDrawCallback",function(){if(T.bSorted){var t=ke(T),e={};i.each(t,function(t,n){e[n.src]=n.dir}),je(T,null,"order",[T,t,e]),Te(T)}}),ze(T,"aoDrawCallback",function(){(T.bSorted||"ssp"===We(T)||U.bDeferRender)&&Ee(T)},"sc"),u(T);var H=C.children("caption").each(function(){this._captionSide=C.css("caption-side")}),W=C.children("thead");0===W.length&&(W=i("<thead/>").appendTo(this)),T.nTHead=W[0];var V=C.children("tbody");0===V.length&&(V=i("<tbody/>").appendTo(this)),T.nTBody=V[0];var q=C.children("tfoot");if(0===q.length&&H.length>0&&(""!==T.oScroll.sX||""!==T.oScroll.sY)&&(q=i("<tfoot/>").appendTo(this)),0===q.length||0===q.children().length?C.addClass(M.sNoFooter):q.length>0&&(T.nTFoot=q[0],j(T.aoFooter,T.nTFoot)),m.aaData)for(g=0;g<m.aaData.length;g++)b(T,m.aaData[g]);else(T.bDeferLoading||"dom"==We(T))&&w(T,i(T.nTBody).children("tr"));T.aiDisplay=T.aiDisplayMaster.slice(),T.bInitialised=!0,y===!1&&se(T)}),e=null,this};var Sn=[],kn=Array.prototype,Dn=function(t){var e,n,o=Ye.settings,a=i.map(o,function(t){return t.nTable});return t?t.nTable&&t.oApi?[t]:t.nodeName&&"table"===t.nodeName.toLowerCase()?(e=i.inArray(t,a),-1!==e?[o[e]]:null):t&&"function"==typeof t.settings?t.settings().toArray():("string"==typeof t?n=i(t):t instanceof i&&(n=t),n?n.map(function(){return e=i.inArray(this,a),-1!==e?o[e]:null}).toArray():void 0):[]};Ke=function(t,e){if(!this instanceof Ke)throw"DT API must be constructed as a new object";var n=[],o=function(t){var e=Dn(t);e&&n.push.apply(n,e)};if(i.isArray(t))for(var a=0,r=t.length;r>a;a++)o(t[a]);else o(t);this.context=yn(n),e&&this.push.apply(this,e.toArray?e.toArray():e),this.selector={rows:null,cols:null,opts:null},Ke.extend(this,this,Sn)},Ye.Api=Ke,Ke.prototype={concat:kn.concat,context:[],each:function(t){for(var e=0,n=this.length;n>e;e++)t.call(this,this[e],e,this);return this},eq:function(t){var e=this.context;return e.length>t?new Ke(e[t],this[t]):null},filter:function(t){var e=[];if(kn.filter)e=kn.filter.call(this,t,this);else for(var n=0,i=this.length;i>n;n++)t.call(this,this[n],n,this)&&e.push(this[n]);return new Ke(this.context,e)},flatten:function(){var t=[];return new Ke(this.context,t.concat.apply(t,this.toArray()))},join:kn.join,indexOf:kn.indexOf||function(t,e){for(var n=e||0,i=this.length;i>n;n++)if(this[n]===t)return n;return-1},iterator:function(t,e,i,o){var a,r,s,l,u,c,d,h,p=[],f=this.context,m=this.selector;for("string"==typeof t&&(o=i,i=e,e=t,t=!1),r=0,s=f.length;s>r;r++){var g=new Ke(f[r]);if("table"===e)a=i.call(g,f[r],r),a!==n&&p.push(a);else if("columns"===e||"rows"===e)a=i.call(g,f[r],this[r],r),a!==n&&p.push(a);else if("column"===e||"column-rows"===e||"row"===e||"cell"===e)for(d=this[r],"column-rows"===e&&(c=An(f[r],m.opts)),l=0,u=d.length;u>l;l++)h=d[l],a="cell"===e?i.call(g,f[r],h.row,h.column,r,l):i.call(g,f[r],h,r,l,c),a!==n&&p.push(a)}if(p.length||o){var v=new Ke(f,t?p.concat.apply([],p):p),y=v.selector;return y.rows=m.rows,y.cols=m.cols,y.opts=m.opts,v}return this},lastIndexOf:kn.lastIndexOf||function(){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(t){var e=[];if(kn.map)e=kn.map.call(this,t,this);else for(var n=0,i=this.length;i>n;n++)e.push(t.call(this,this[n],n));return new Ke(this.context,e)},pluck:function(t){return this.map(function(e){return e[t]})},pop:kn.pop,push:kn.push,reduce:kn.reduce||function(t,e){return c(this,t,e,0,this.length,1)},reduceRight:kn.reduceRight||function(t,e){return c(this,t,e,this.length-1,-1,-1)},reverse:kn.reverse,selector:null,shift:kn.shift,sort:kn.sort,splice:kn.splice,toArray:function(){return kn.slice.call(this)},to$:function(){return i(this)},toJQuery:function(){return i(this)},unique:function(){return new Ke(this.context,yn(this))},unshift:kn.unshift},Ke.extend=function(t,e,n){if(n.length&&e&&(e instanceof Ke||e.__dt_wrapper)){var o,a,r,s=function(t,e,n){return function(){var i=e.apply(t,arguments);return Ke.extend(i,i,n.methodExt),i}};for(o=0,a=n.length;a>o;o++)r=n[o],e[r.name]="function"==typeof r.val?s(t,r.val,r):i.isPlainObject(r.val)?{}:r.val,e[r.name].__dt_wrapper=!0,Ke.extend(t,e[r.name],r.propExt)}},Ke.register=Je=function(t,e){if(i.isArray(t))for(var n=0,o=t.length;o>n;n++)Ke.register(t[n],e);else{var a,r,s,l,u=t.split("."),c=Sn,d=function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n].name===e)return t[n];return null};for(a=0,r=u.length;r>a;a++){l=-1!==u[a].indexOf("()"),s=l?u[a].replace("()",""):u[a];var h=d(c,s);h||(h={name:s,val:{},methodExt:[],propExt:[]},c.push(h)),a===r-1?h.val=e:c=l?h.methodExt:h.propExt}}},Ke.registerPlural=Xe=function(t,e,o){Ke.register(t,o),Ke.register(e,function(){var t=o.apply(this,arguments);return t===this?this:t instanceof Ke?t.length?i.isArray(t[0])?new Ke(t.context,t[0]):t[0]:n:t})};var Tn=function(t,e){if("number"==typeof t)return[e[t]];var n=i.map(e,function(t){return t.nTable});return i(n).filter(t).map(function(){var t=i.inArray(this,n);return e[t]}).toArray()};Je("tables()",function(t){return t?new Ke(Tn(t,this.context)):this}),Je("table()",function(t){var e=this.tables(t),n=e.context;return n.length?new Ke(n[0]):e}),Xe("tables().nodes()","table().node()",function(){return this.iterator("table",function(t){return t.nTable},1)}),Xe("tables().body()","table().body()",function(){return this.iterator("table",function(t){return t.nTBody},1)}),Xe("tables().header()","table().header()",function(){return this.iterator("table",function(t){return t.nTHead},1)}),Xe("tables().footer()","table().footer()",function(){return this.iterator("table",function(t){return t.nTFoot},1)}),Xe("tables().containers()","table().container()",function(){return this.iterator("table",function(t){return t.nTableWrapper},1)}),Je("draw()",function(t){return this.iterator("table",function(e){U(e,t===!1)})}),Je("page()",function(t){return t===n?this.page.info().page:this.iterator("table",function(e){he(e,t)})}),Je("page.info()",function(){if(0===this.context.length)return n;var t=this.context[0],e=t._iDisplayStart,i=t._iDisplayLength,o=t.fnRecordsDisplay(),a=-1===i;return{page:a?0:Math.floor(e/i),pages:a?1:Math.ceil(o/i),start:e,end:t.fnDisplayEnd(),length:i,recordsTotal:t.fnRecordsTotal(),recordsDisplay:o}}),Je("page.len()",function(t){return t===n?0!==this.context.length?this.context[0]._iDisplayLength:n:this.iterator("table",function(e){ue(e,t)})});var Mn=function(t,e,n){if(n){var i=new Ke(t);i.one("draw",function(){n(i.ajax.json())})}"ssp"==We(t)?U(t,e):(fe(t,!0),H(t,[],function(n){P(t);for(var i=G(t,n),o=0,a=i.length;a>o;o++)b(t,i[o]);U(t,e),fe(t,!1)}))};Je("ajax.json()",function(){var t=this.context;return t.length>0?t[0].json:void 0}),Je("ajax.params()",function(){var t=this.context;return t.length>0?t[0].oAjaxData:void 0}),Je("ajax.reload()",function(t,e){return this.iterator("table",function(n){Mn(n,e===!1,t)})}),Je("ajax.url()",function(t){var e=this.context;return t===n?0===e.length?n:(e=e[0],e.ajax?i.isPlainObject(e.ajax)?e.ajax.url:e.ajax:e.sAjaxSource):this.iterator("table",function(e){i.isPlainObject(e.ajax)?e.ajax.url=t:e.ajax=t})}),Je("ajax.url().load()",function(t,e){return this.iterator("table",function(n){Mn(n,e===!1,t)})});var Pn=function(t,e){var o,a,r,s,l,u,c=[],d=typeof t;for(t&&"string"!==d&&"function"!==d&&t.length!==n||(t=[t]),r=0,s=t.length;s>r;r++)for(a=t[r]&&t[r].split?t[r].split(","):[t[r]],l=0,u=a.length;u>l;l++)o=e("string"==typeof a[l]?i.trim(a[l]):a[l]),o&&o.length&&c.push.apply(c,o);return c},En=function(t){return t||(t={}),t.filter&&!t.search&&(t.search=t.filter),{search:t.search||"none",order:t.order||"current",page:t.page||"all"}},In=function(t){for(var e=0,n=t.length;n>e;e++)if(t[e].length>0)return t[0]=t[e],t.length=1,t.context=[t.context[e]],t;return t.length=0,t},An=function(t,e){var n,o,a,r=[],s=t.aiDisplay,l=t.aiDisplayMaster,u=e.search,c=e.order,d=e.page;if("ssp"==We(t))return"removed"===u?[]:mn(0,l.length);if("current"==d)for(n=t._iDisplayStart,o=t.fnDisplayEnd();o>n;n++)r.push(s[n]);else if("current"==c||"applied"==c)r="none"==u?l.slice():"applied"==u?s.slice():i.map(l,function(t){return-1===i.inArray(t,s)?t:null});else if("index"==c||"original"==c)for(n=0,o=t.aoData.length;o>n;n++)"none"==u?r.push(n):(a=i.inArray(n,s),(-1===a&&"removed"==u||a>=0&&"applied"==u)&&r.push(n));return r},Fn=function(t,e,n){return Pn(e,function(e){var o=ln(e);if(null!==o&&!n)return[o];var a=An(t,n);if(null!==o&&-1!==i.inArray(o,a))return[o];if(!e)return a;if("function"==typeof e)return i.map(a,function(n){var i=t.aoData[n];return e(n,i._aData,i.nTr)?n:null});var r=gn(fn(t.aoData,a,"nTr"));return e.nodeName&&-1!==i.inArray(e,r)?[e._DT_RowIndex]:i(r).filter(e).map(function(){return this._DT_RowIndex}).toArray()})};Je("rows()",function(t,e){t===n?t="":i.isPlainObject(t)&&(e=t,t=""),e=En(e);var o=this.iterator("table",function(n){return Fn(n,t,e)},1);return o.selector.rows=t,o.selector.opts=e,o}),Je("rows().nodes()",function(){return this.iterator("row",function(t,e){return t.aoData[e].nTr||n},1)}),Je("rows().data()",function(){return this.iterator(!0,"rows",function(t,e){return fn(t.aoData,e,"_aData")},1)}),Xe("rows().cache()","row().cache()",function(t){return this.iterator("row",function(e,n){var i=e.aoData[n];return"search"===t?i._aFilterData:i._aSortData},1)}),Xe("rows().invalidate()","row().invalidate()",function(t){return this.iterator("row",function(e,n){I(e,n,t)})}),Xe("rows().indexes()","row().index()",function(){return this.iterator("row",function(t,e){return e},1)}),Xe("rows().remove()","row().remove()",function(){var t=this;return this.iterator("row",function(e,n,o){var a=e.aoData;a.splice(n,1);for(var r=0,s=a.length;s>r;r++)null!==a[r].nTr&&(a[r].nTr._DT_RowIndex=r);i.inArray(n,e.aiDisplay);E(e.aiDisplayMaster,n),E(e.aiDisplay,n),E(t[o],n,!1),$e(e)})}),Je("rows.add()",function(t){var e=this.iterator("table",function(e){var n,i,o,a=[];for(i=0,o=t.length;o>i;i++)n=t[i],a.push(n.nodeName&&"TR"===n.nodeName.toUpperCase()?w(e,n)[0]:b(e,n));return a},1),n=this.rows(-1);return n.pop(),n.push.apply(n,e.toArray()),n}),Je("row()",function(t,e){return In(this.rows(t,e))}),Je("row().data()",function(t){var e=this.context;return t===n?e.length&&this.length?e[0].aoData[this[0]]._aData:n:(e[0].aoData[this[0]]._aData=t,I(e[0],this[0],"data"),this)}),Je("row().node()",function(){var t=this.context;return t.length&&this.length?t[0].aoData[this[0]].nTr||null:null}),Je("row.add()",function(t){t instanceof i&&t.length&&(t=t[0]);var e=this.iterator("table",function(e){return t.nodeName&&"TR"===t.nodeName.toUpperCase()?w(e,t)[0]:b(e,t)});return this.row(e[0])});var On=function(t,e,n,o){var a=[],r=function(e,n){if(i.isArray(e)||e instanceof i)for(var o=0,s=e.length;s>o;o++)r(e[o],n);else if(e.nodeName&&"tr"===e.nodeName.toLowerCase())a.push(e);else{var l=i("<tr><td/></tr>").addClass(n);i("td",l).addClass(n).html(e)[0].colSpan=g(t),a.push(l[0])}};r(n,o),e._details&&e._details.remove(),e._details=i(a),e._detailsShow&&e._details.insertAfter(e.nTr)},Nn=function(t,e){var i=t.context;if(i.length){var o=i[0].aoData[e!==n?e:t[0]];o._details&&(o._details.remove(),o._detailsShow=n,o._details=n)}},Rn=function(t,e){var n=t.context;if(n.length&&t.length){var i=n[0].aoData[t[0]];i._details&&(i._detailsShow=e,e?i._details.insertAfter(i.nTr):i._details.detach(),Bn(n[0]))}},Bn=function(t){var e=new Ke(t),n=".dt.DT_details",i="draw"+n,o="column-visibility"+n,a="destroy"+n,r=t.aoData;e.off(i+" "+o+" "+a),pn(r,"_details").length>0&&(e.on(i,function(n,i){t===i&&e.rows({page:"current"}).eq(0).each(function(t){var e=r[t];e._detailsShow&&e._details.insertAfter(e.nTr)})}),e.on(o,function(e,n){if(t===n)for(var i,o=g(n),a=0,s=r.length;s>a;a++)i=r[a],i._details&&i._details.children("td[colspan]").attr("colspan",o)}),e.on(a,function(n,i){if(t===i)for(var o=0,a=r.length;a>o;o++)r[o]._details&&Nn(e,o)}))},Un="",zn=Un+"row().child",jn=zn+"()";Je(jn,function(t,e){var i=this.context;return t===n?i.length&&this.length?i[0].aoData[this[0]]._details:n:(t===!0?this.child.show():t===!1?Nn(this):i.length&&this.length&&On(i[0],i[0].aoData[this[0]],t,e),this)}),Je([zn+".show()",jn+".show()"],function(){return Rn(this,!0),this}),Je([zn+".hide()",jn+".hide()"],function(){return Rn(this,!1),this}),Je([zn+".remove()",jn+".remove()"],function(){return Nn(this),this}),Je(zn+".isShown()",function(){var t=this.context;return t.length&&this.length?t[0].aoData[this[0]]._detailsShow||!1:!1});var $n=/^(.+):(name|visIdx|visible)$/,Hn=function(t,e,n,i,o){for(var a=[],r=0,s=o.length;s>r;r++)a.push(L(t,o[r],e));return a},Wn=function(t,e,n){var o=t.aoColumns,a=pn(o,"sName"),r=pn(o,"nTh");return Pn(e,function(e){var s=ln(e);if(""===e)return mn(o.length);if(null!==s)return[s>=0?s:o.length+s];if("function"==typeof e){var l=An(t,n);return i.map(o,function(n,i){return e(i,Hn(t,i,0,0,l),r[i])?i:null})}var u="string"==typeof e?e.match($n):"";if(!u)return i(r).filter(e).map(function(){return i.inArray(this,r)}).toArray();switch(u[2]){case"visIdx":case"visible":var c=parseInt(u[1],10);if(0>c){var d=i.map(o,function(t,e){return t.bVisible?e:null});return[d[d.length+c]]}return[f(t,c)];case"name":return i.map(a,function(t,e){return t===u[1]?e:null})}})},Vn=function(t,e,o,a){var r,s,l,u,c=t.aoColumns,d=c[e],h=t.aoData;if(o===n)return d.bVisible;if(d.bVisible!==o){if(o){var f=i.inArray(!0,pn(c,"bVisible"),e+1);for(s=0,l=h.length;l>s;s++)u=h[s].nTr,r=h[s].anCells,u&&u.insertBefore(r[e],r[f]||null)}else i(pn(t.aoData,"anCells",e)).detach();d.bVisible=o,R(t,t.aoHeader),R(t,t.aoFooter),(a===n||a)&&(p(t),(t.oScroll.sX||t.oScroll.sY)&&ge(t)),je(t,null,"column-visibility",[t,e,o]),Ae(t)}};Je("columns()",function(t,e){t===n?t="":i.isPlainObject(t)&&(e=t,t=""),e=En(e);var o=this.iterator("table",function(n){return Wn(n,t,e)},1);return o.selector.cols=t,o.selector.opts=e,o}),Xe("columns().header()","column().header()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].nTh},1)}),Xe("columns().footer()","column().footer()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].nTf},1)}),Xe("columns().data()","column().data()",function(){return this.iterator("column-rows",Hn,1)}),Xe("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].mData},1)}),Xe("columns().cache()","column().cache()",function(t){return this.iterator("column-rows",function(e,n,i,o,a){return fn(e.aoData,a,"search"===t?"_aFilterData":"_aSortData",n)},1)}),Xe("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(t,e,n,i,o){return fn(t.aoData,o,"anCells",e)},1)}),Xe("columns().visible()","column().visible()",function(t,e){return this.iterator("column",function(i,o){return t===n?i.aoColumns[o].bVisible:void Vn(i,o,t,e)})}),Xe("columns().indexes()","column().index()",function(t){return this.iterator("column",function(e,n){return"visible"===t?m(e,n):n},1)}),Je("columns.adjust()",function(){return this.iterator("table",function(t){p(t)},1)}),Je("column.index()",function(t,e){if(0!==this.context.length){var n=this.context[0];if("fromVisible"===t||"toData"===t)return f(n,e);if("fromData"===t||"toVisible"===t)return m(n,e)}}),Je("column()",function(t,e){return In(this.columns(t,e))});var qn=function(t,e,o){var a,r,s,l,u,c,d,h=t.aoData,p=An(t,o),f=gn(fn(h,p,"anCells")),m=i([].concat.apply([],f)),g=t.aoColumns.length;return Pn(e,function(e){var o="function"==typeof e;if(null===e||e===n||o){for(r=[],s=0,l=p.length;l>s;s++)for(a=p[s],u=0;g>u;u++)c={row:a,column:u},o?(d=t.aoData[a],e(c,L(t,a,u),d.anCells[u])&&r.push(c)):r.push(c);return r}return i.isPlainObject(e)?[e]:m.filter(e).map(function(t,e){return a=e.parentNode._DT_RowIndex,{row:a,column:i.inArray(e,h[a].anCells)}}).toArray()})};Je("cells()",function(t,e,o){if(i.isPlainObject(t)&&(t.row===n?(o=t,t=null):(o=e,e=null)),i.isPlainObject(e)&&(o=e,e=null),null===e||e===n)return this.iterator("table",function(e){return qn(e,t,En(o))});var a,r,s,l,u,c=this.columns(e,o),d=this.rows(t,o),h=this.iterator("table",function(t,e){for(a=[],r=0,s=d[e].length;s>r;r++)for(l=0,u=c[e].length;u>l;l++)a.push({row:d[e][r],column:c[e][l]});return a},1);return i.extend(h.selector,{cols:e,rows:t,opts:o}),h}),Xe("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(t,e,i){var o=t.aoData[e].anCells;return o?o[i]:n},1)}),Je("cells().data()",function(){return this.iterator("cell",function(t,e,n){return L(t,e,n)},1)}),Xe("cells().cache()","cell().cache()",function(t){return t="search"===t?"_aFilterData":"_aSortData",this.iterator("cell",function(e,n,i){return e.aoData[n][t][i]},1)}),Xe("cells().render()","cell().render()",function(t){return this.iterator("cell",function(e,n,i){return L(e,n,i,t)},1)}),Xe("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(t,e,n){return{row:e,column:n,columnVisible:m(t,n)}},1)}),Xe("cells().invalidate()","cell().invalidate()",function(t){return this.iterator("cell",function(e,n,i){I(e,n,t,i)})}),Je("cell()",function(t,e,n){return In(this.cells(t,e,n))}),Je("cell().data()",function(t){var e=this.context,i=this[0];return t===n?e.length&&i.length?L(e[0],i[0].row,i[0].column):n:(S(e[0],i[0].row,i[0].column,t),I(e[0],i[0].row,"data",i[0].column),this)}),Je("order()",function(t,e){var o=this.context;return t===n?0!==o.length?o[0].aaSorting:n:("number"==typeof t?t=[[t,e]]:i.isArray(t[0])||(t=Array.prototype.slice.call(arguments)),this.iterator("table",function(e){e.aaSorting=t.slice()}))}),Je("order.listener()",function(t,e,n){return this.iterator("table",function(i){Pe(i,t,e,n)})}),Je(["columns().order()","column().order()"],function(t){var e=this;return this.iterator("table",function(n,o){var a=[];i.each(e[o],function(e,n){a.push([n,t])}),n.aaSorting=a})}),Je("search()",function(t,e,o,a){var r=this.context;return t===n?0!==r.length?r[0].oPreviousSearch.sSearch:n:this.iterator("table",function(n){n.oFeatures.bFilter&&Z(n,i.extend({},n.oPreviousSearch,{sSearch:t+"",bRegex:null===e?!1:e,bSmart:null===o?!0:o,bCaseInsensitive:null===a?!0:a}),1)})}),Xe("columns().search()","column().search()",function(t,e,o,a){return this.iterator("column",function(r,s){var l=r.aoPreSearchCols;return t===n?l[s].sSearch:void(r.oFeatures.bFilter&&(i.extend(l[s],{sSearch:t+"",bRegex:null===e?!1:e,bSmart:null===o?!0:o,bCaseInsensitive:null===a?!0:a}),Z(r,r.oPreviousSearch,1)))})}),Je("state()",function(){return this.context.length?this.context[0].oSavedState:null}),Je("state.clear()",function(){return this.iterator("table",function(t){t.fnStateSaveCallback.call(t.oInstance,t,{})})}),Je("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),Je("state.save()",function(){return this.iterator("table",function(t){Ae(t)})}),Ye.versionCheck=Ye.fnVersionCheck=function(t){for(var e,n,i=Ye.version.split("."),o=t.split("."),a=0,r=o.length;r>a;a++)if(e=parseInt(i[a],10)||0,n=parseInt(o[a],10)||0,e!==n)return e>n;return!0},Ye.isDataTable=Ye.fnIsDataTable=function(t){var e=i(t).get(0),n=!1;return i.each(Ye.settings,function(t,o){var a=o.nScrollHead?i("table",o.nScrollHead)[0]:null,r=o.nScrollFoot?i("table",o.nScrollFoot)[0]:null;(o.nTable===e||a===e||r===e)&&(n=!0)}),n},Ye.tables=Ye.fnTables=function(t){return i.map(Ye.settings,function(e){return!t||t&&i(e.nTable).is(":visible")?e.nTable:void 0})},Ye.util={throttle:_e,escapeRegex:te},Ye.camelToHungarian=a,Je("$()",function(t,e){var n=this.rows(e).nodes(),o=i(n);return i([].concat(o.filter(t).toArray(),o.find(t).toArray()))}),i.each(["on","one","off"],function(t,e){Je(e+"()",function(){var t=Array.prototype.slice.call(arguments);t[0].match(/\.dt\b/)||(t[0]+=".dt");var n=i(this.tables().nodes());return n[e].apply(n,t),this})}),Je("clear()",function(){return this.iterator("table",function(t){P(t)})}),Je("settings()",function(){return new Ke(this.context,this.context)}),Je("init()",function(){var t=this.context;return t.length?t[0].oInit:null}),Je("data()",function(){return this.iterator("table",function(t){return pn(t.aoData,"_aData")}).flatten()}),Je("destroy()",function(e){return e=e||!1,this.iterator("table",function(n){var o,a=n.nTableWrapper.parentNode,r=n.oClasses,s=n.nTable,l=n.nTBody,u=n.nTHead,c=n.nTFoot,d=i(s),h=i(l),p=i(n.nTableWrapper),f=i.map(n.aoData,function(t){return t.nTr
});n.bDestroying=!0,je(n,"aoDestroyCallback","destroy",[n]),e||new Ke(n).columns().visible(!0),p.unbind(".DT").find(":not(tbody *)").unbind(".DT"),i(t).unbind(".DT-"+n.sInstance),s!=u.parentNode&&(d.children("thead").detach(),d.append(u)),c&&s!=c.parentNode&&(d.children("tfoot").detach(),d.append(c)),d.detach(),p.detach(),n.aaSorting=[],n.aaSortingFixed=[],Ee(n),i(f).removeClass(n.asStripeClasses.join(" ")),i("th, td",u).removeClass(r.sSortable+" "+r.sSortableAsc+" "+r.sSortableDesc+" "+r.sSortableNone),n.bJUI&&(i("th span."+r.sSortIcon+", td span."+r.sSortIcon,u).detach(),i("th, td",u).each(function(){var t=i("div."+r.sSortJUIWrapper,this);i(this).append(t.contents()),t.detach()})),!e&&a&&a.insertBefore(s,n.nTableReinsertBefore),h.children().detach(),h.append(f),d.css("width",n.sDestroyWidth).removeClass(r.sTable),o=n.asDestroyStripes.length,o&&h.children().each(function(t){i(this).addClass(n.asDestroyStripes[t%o])});var m=i.inArray(n,Ye.settings);-1!==m&&Ye.settings.splice(m,1)})}),i.each(["column","row","cell"],function(t,e){Je(e+"s().every()",function(t){return this.iterator(e,function(n,i,o){t.call(new Ke(n)[e](i,o))})})}),Ye.version="1.10.6",Ye.settings=[],Ye.models={},Ye.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},Ye.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null},Ye.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},Ye.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(t){try{return JSON.parse((-1===t.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+t.sInstance+"_"+location.pathname))}catch(e){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(t,e){try{(-1===t.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+t.sInstance+"_"+location.pathname,JSON.stringify(e))}catch(n){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:i.extend({},Ye.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null},o(Ye.defaults),Ye.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},o(Ye.defaults.column),Ye.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:n,oAjaxData:n,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==We(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==We(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var t=this._iDisplayLength,e=this._iDisplayStart,n=e+t,i=this.aiDisplay.length,o=this.oFeatures,a=o.bPaginate;return o.bServerSide?a===!1||-1===t?e+i:Math.min(e+t,this._iRecordsDisplay):!a||n>i||-1===t?i:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}},Ye.ext=Ze={buttons:{},classes:{},errMode:"alert",feature:[],search:[],internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:Ye.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:Ye.version},i.extend(Ze,{afnFiltering:Ze.search,aTypes:Ze.type.detect,ofnSearch:Ze.type.search,oSort:Ze.type.order,afnSortData:Ze.order,aoFeatures:Ze.feature,oApi:Ze.internal,oStdClasses:Ze.classes,oPagination:Ze.pager}),i.extend(Ye.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""}),function(){var t="";t="";var e=t+"ui-state-default",n=t+"css_right ui-icon ui-icon-",o=t+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";i.extend(Ye.ext.oJUIClasses,Ye.ext.classes,{sPageButton:"fg-button ui-button "+e,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:e+" sorting_asc",sSortDesc:e+" sorting_desc",sSortable:e+" sorting",sSortableAsc:e+" sorting_asc_disabled",sSortableDesc:e+" sorting_desc_disabled",sSortableNone:e+" sorting_disabled",sSortJUIAsc:n+"triangle-1-n",sSortJUIDesc:n+"triangle-1-s",sSortJUI:n+"carat-2-n-s",sSortJUIAscAllowed:n+"carat-1-n",sSortJUIDescAllowed:n+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+e,sScrollFoot:"dataTables_scrollFoot "+e,sHeaderTH:e,sFooterTH:e,sJUIHeader:o+" ui-corner-tl ui-corner-tr",sJUIFooter:o+" ui-corner-bl ui-corner-br"})}();var Gn=Ye.ext.pager;i.extend(Gn,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},simple_numbers:function(t,e){return["previous",Ve(t,e),"next"]},full_numbers:function(t,e){return["first","previous",Ve(t,e),"next","last"]},_numbers:Ve,numbers_length:7}),i.extend(!0,Ye.ext.renderer,{pageButton:{_:function(t,n,o,a,r,s){var l,u,c,d=t.oClasses,h=t.oLanguage.oPaginate,p=0,f=function(e,n){var a,c,m,g,v=function(e){he(t,e.data.action,!0)};for(a=0,c=n.length;c>a;a++)if(g=n[a],i.isArray(g)){var y=i("<"+(g.DT_el||"div")+"/>").appendTo(e);f(y,g)}else{switch(l="",u="",g){case"ellipsis":e.append('<span class="ellipsis">&#x2026;</span>');break;case"first":l=h.sFirst,u=g+(r>0?"":" "+d.sPageButtonDisabled);break;case"previous":l=h.sPrevious,u=g+(r>0?"":" "+d.sPageButtonDisabled);break;case"next":l=h.sNext,u=g+(s-1>r?"":" "+d.sPageButtonDisabled);break;case"last":l=h.sLast,u=g+(s-1>r?"":" "+d.sPageButtonDisabled);break;default:l=g+1,u=r===g?d.sPageButtonActive:""}l&&(m=i("<a>",{"class":d.sPageButton+" "+u,"aria-controls":t.sTableId,"data-dt-idx":p,tabindex:t.iTabIndex,id:0===o&&"string"==typeof g?t.sTableId+"_"+g:null}).html(l).appendTo(e),Ue(m,{action:g},v),p++)}};try{c=i(e.activeElement).data("dt-idx")}catch(m){}f(i(n).empty(),a),c&&i(n).find("[data-dt-idx="+c+"]").focus()}}}),i.extend(Ye.ext.type.detect,[function(t,e){var n=e.oLanguage.sDecimal;return cn(t,n)?"num"+n:null},function(t){if(!(!t||t instanceof Date||nn.test(t)&&on.test(t)))return null;var e=Date.parse(t);return null!==e&&!isNaN(e)||sn(t)?"date":null},function(t,e){var n=e.oLanguage.sDecimal;return cn(t,n,!0)?"num-fmt"+n:null},function(t,e){var n=e.oLanguage.sDecimal;return hn(t,n)?"html-num"+n:null},function(t,e){var n=e.oLanguage.sDecimal;return hn(t,n,!0)?"html-num-fmt"+n:null},function(t){return sn(t)||"string"==typeof t&&-1!==t.indexOf("<")?"html":null}]),i.extend(Ye.ext.type.search,{html:function(t){return sn(t)?t:"string"==typeof t?t.replace(tn," ").replace(en,""):""},string:function(t){return sn(t)?t:"string"==typeof t?t.replace(tn," "):t}});var Yn=function(t,e,n,i){return 0===t||t&&"-"!==t?(e&&(t=un(t,e)),t.replace&&(n&&(t=t.replace(n,"")),i&&(t=t.replace(i,""))),1*t):-1/0};return i.extend(Ze.type.order,{"date-pre":function(t){return Date.parse(t)||0},"html-pre":function(t){return sn(t)?"":t.replace?t.replace(/<.*?>/g,"").toLowerCase():t+""},"string-pre":function(t){return sn(t)?"":"string"==typeof t?t.toLowerCase():t.toString?t.toString():""},"string-asc":function(t,e){return e>t?-1:t>e?1:0},"string-desc":function(t,e){return e>t?1:t>e?-1:0}}),qe(""),i.extend(!0,Ye.ext.renderer,{header:{_:function(t,e,n,o){i(t.nTable).on("order.dt.DT",function(i,a,r,s){if(t===a){var l=n.idx;e.removeClass(n.sSortingClass+" "+o.sSortAsc+" "+o.sSortDesc).addClass("asc"==s[l]?o.sSortAsc:"desc"==s[l]?o.sSortDesc:n.sSortingClass)}})},jqueryui:function(t,e,n,o){i("<div/>").addClass(o.sSortJUIWrapper).append(e.contents()).append(i("<span/>").addClass(o.sSortIcon+" "+n.sSortingClassJUI)).appendTo(e),i(t.nTable).on("order.dt.DT",function(i,a,r,s){if(t===a){var l=n.idx;e.removeClass(o.sSortAsc+" "+o.sSortDesc).addClass("asc"==s[l]?o.sSortAsc:"desc"==s[l]?o.sSortDesc:n.sSortingClass),e.find("span."+o.sSortIcon).removeClass(o.sSortJUIAsc+" "+o.sSortJUIDesc+" "+o.sSortJUI+" "+o.sSortJUIAscAllowed+" "+o.sSortJUIDescAllowed).addClass("asc"==s[l]?o.sSortJUIAsc:"desc"==s[l]?o.sSortJUIDesc:n.sSortingClassJUI)}})}}}),Ye.render={number:function(t,e,n,i){return{display:function(o){if("number"!=typeof o&&"string"!=typeof o)return o;var a=0>o?"-":"";o=Math.abs(parseFloat(o));var r=parseInt(o,10),s=n?e+(o-r).toFixed(n).substring(2):"";return a+(i||"")+r.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t)+s}}}},i.extend(Ye.ext.internal,{_fnExternApiFunc:Ge,_fnBuildAjax:H,_fnAjaxUpdate:W,_fnAjaxParameters:V,_fnAjaxUpdateDraw:q,_fnAjaxDataSrc:G,_fnAddColumn:d,_fnColumnOptions:h,_fnAdjustColumnSizing:p,_fnVisibleToColumnIndex:f,_fnColumnIndexToVisible:m,_fnVisbleColumns:g,_fnGetColumns:v,_fnColumnTypes:y,_fnApplyColumnDefs:_,_fnHungarianMap:o,_fnCamelToHungarian:a,_fnLanguageCompat:r,_fnBrowserDetect:u,_fnAddData:b,_fnAddTr:w,_fnNodeToDataIndex:x,_fnNodeToColumnIndex:C,_fnGetCellData:L,_fnSetCellData:S,_fnSplitObjNotation:k,_fnGetObjectDataFn:D,_fnSetObjectDataFn:T,_fnGetDataMaster:M,_fnClearTable:P,_fnDeleteIndex:E,_fnInvalidate:I,_fnGetRowElements:A,_fnCreateTr:F,_fnBuildHead:N,_fnDrawHead:R,_fnDraw:B,_fnReDraw:U,_fnAddOptionsHtml:z,_fnDetectHeader:j,_fnGetUniqueThs:$,_fnFeatureHtmlFilter:Y,_fnFilterComplete:Z,_fnFilterCustom:K,_fnFilterColumn:J,_fnFilter:X,_fnFilterCreateSearch:Q,_fnEscapeRegex:te,_fnFilterData:ee,_fnFeatureHtmlInfo:oe,_fnUpdateInfo:ae,_fnInfoMacros:re,_fnInitialise:se,_fnInitComplete:le,_fnLengthChange:ue,_fnFeatureHtmlLength:ce,_fnFeatureHtmlPaginate:de,_fnPageChange:he,_fnFeatureHtmlProcessing:pe,_fnProcessingDisplay:fe,_fnFeatureHtmlTable:me,_fnScrollDraw:ge,_fnApplyToChildren:ve,_fnCalculateColumnWidths:ye,_fnThrottle:_e,_fnConvertToWidth:be,_fnScrollingWidthAdjust:we,_fnGetWidestNode:xe,_fnGetMaxLenString:Ce,_fnStringToCss:Le,_fnScrollBarWidth:Se,_fnSortFlatten:ke,_fnSort:De,_fnSortAria:Te,_fnSortListener:Me,_fnSortAttachListener:Pe,_fnSortingClasses:Ee,_fnSortData:Ie,_fnSaveState:Ae,_fnLoadState:Fe,_fnSettingsFromNode:Oe,_fnLog:Ne,_fnMap:Re,_fnBindAction:Ue,_fnCallbackReg:ze,_fnCallbackFire:je,_fnLengthOverflow:$e,_fnRenderer:He,_fnDataSource:We,_fnRowAttributes:O,_fnCalculateEnd:function(){}}),i.fn.dataTable=Ye,i.fn.dataTableSettings=Ye.settings,i.fn.dataTableExt=Ye.ext,i.fn.DataTable=function(t){return i(this).dataTable(t).api()},i.each(Ye,function(t,e){i.fn.DataTable[t]=e}),i.fn.dataTable})}(window,document),/*!
 * Bootstrap Colorpicker
 * http://mjolnic.github.io/bootstrap-colorpicker/
 *
 * Originally written by (c) 2012 Stefan Petre
 * Licensed under the Apache License v2.0
 * http://www.apache.org/licenses/LICENSE-2.0.txt
 *
 * @todo Update DOCS
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):window.jQuery&&!window.jQuery.fn.colorpicker&&t(window.jQuery)}(function(t){"use strict";var e=function(t){this.value={h:0,s:0,b:0,a:1},this.origFormat=null,t&&(void 0!==t.toLowerCase?(t+="",this.setColor(t)):void 0!==t.h&&(this.value=t))};e.prototype={constructor:e,colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"transparent"},_sanitizeNumber:function(t){return"number"==typeof t?t:isNaN(t)||null===t||""===t||void 0===t?1:void 0!==t.toLowerCase?parseFloat(t):1},isTransparent:function(t){return t?(t=t.toLowerCase().trim(),"transparent"==t||t.match(/#?00000000/)||t.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/)):!1},rgbaIsTransparent:function(t){return 0==t.r&&0==t.g&&0==t.b&&0==t.a},setColor:function(t){t=t.toLowerCase().trim(),t&&(this.value=this.isTransparent(t)?{h:0,s:0,b:0,a:0}:this.stringToHSB(t)||{h:0,s:0,b:0,a:1})},stringToHSB:function(e){e=e.toLowerCase();var n=this,i=!1;return t.each(this.stringParsers,function(t,o){var a=o.re.exec(e),r=a&&o.parse.apply(n,[a]),s=o.format||"rgba";return r?(i=s.match(/hsla?/)?n.RGBtoHSB.apply(n,n.HSLtoRGB.apply(n,r)):n.RGBtoHSB.apply(n,r),n.origFormat=s,!1):!0}),i},setHue:function(t){this.value.h=1-t},setSaturation:function(t){this.value.s=t},setBrightness:function(t){this.value.b=1-t},setAlpha:function(t){this.value.a=parseInt(100*(1-t),10)/100},toRGB:function(t,e,n,i){t||(t=this.value.h,e=this.value.s,n=this.value.b),t*=360;var o,a,r,s,l;return t=t%360/60,l=n*e,s=l*(1-Math.abs(t%2-1)),o=a=r=n-l,t=~~t,o+=[l,s,0,0,s,l][t],a+=[s,l,l,s,0,0][t],r+=[0,0,s,l,l,s][t],{r:Math.round(255*o),g:Math.round(255*a),b:Math.round(255*r),a:i||this.value.a}},toHex:function(t,e,n,i){var o=this.toRGB(t,e,n,i);return this.rgbaIsTransparent(o)?"transparent":"#"+(1<<24|parseInt(o.r)<<16|parseInt(o.g)<<8|parseInt(o.b)).toString(16).substr(1)},toHSL:function(t,e,n,i){t=t||this.value.h,e=e||this.value.s,n=n||this.value.b,i=i||this.value.a;var o=t,a=(2-e)*n,r=e*n;return r/=a>0&&1>=a?a:2-a,a/=2,r>1&&(r=1),{h:isNaN(o)?0:o,s:isNaN(r)?0:r,l:isNaN(a)?0:a,a:isNaN(i)?0:i}},toAlias:function(t,e,n,i){var o=this.toHex(t,e,n,i);for(var a in this.colors)if(this.colors[a]==o)return a;return!1},RGBtoHSB:function(t,e,n,i){t/=255,e/=255,n/=255;var o,a,r,s;return r=Math.max(t,e,n),s=r-Math.min(t,e,n),o=0===s?null:r===t?(e-n)/s:r===e?(n-t)/s+2:(t-e)/s+4,o=(o+360)%6*60/360,a=0===s?0:s/r,{h:this._sanitizeNumber(o),s:a,b:r,a:this._sanitizeNumber(i)}},HueToRGB:function(t,e,n){return 0>n?n+=1:n>1&&(n-=1),1>6*n?t+(e-t)*n*6:1>2*n?e:2>3*n?t+(e-t)*(2/3-n)*6:t},HSLtoRGB:function(t,e,n,i){0>e&&(e=0);var o;o=.5>=n?n*(1+e):n+e-n*e;var a=2*n-o,r=t+1/3,s=t,l=t-1/3,u=Math.round(255*this.HueToRGB(a,o,r)),c=Math.round(255*this.HueToRGB(a,o,s)),d=Math.round(255*this.HueToRGB(a,o,l));return[u,c,d,this._sanitizeNumber(i)]},toString:function(t){switch(t=t||"rgba"){case"rgb":var e=this.toRGB();return this.rgbaIsTransparent(e)?"transparent":"rgb("+e.r+","+e.g+","+e.b+")";case"rgba":var e=this.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")";case"hsl":var n=this.toHSL();return"hsl("+Math.round(360*n.h)+","+Math.round(100*n.s)+"%,"+Math.round(100*n.l)+"%)";case"hsla":var n=this.toHSL();return"hsla("+Math.round(360*n.h)+","+Math.round(100*n.s)+"%,"+Math.round(100*n.l)+"%,"+n.a+")";case"hex":return this.toHex();case"alias":return this.toAlias()||this.toHex();default:return!1}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(t){return[t[1],t[2],t[3],1]}},{re:/rgb\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/hsl\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(t){return[t[1]/360,t[2]/100,t[3]/100,t[4]]}},{re:/hsla\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(t){return[t[1]/360,t[2]/100,t[3]/100,t[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),1]}},{re:/^([a-z]{3,})$/,format:"alias",parse:function(t){var e=this.colorNameToHex(t[0])||"#000000",n=this.stringParsers[6].re.exec(e),i=n&&this.stringParsers[6].parse.apply(this,[n]);return i}}],colorNameToHex:function(t){return"undefined"!=typeof this.colors[t.toLowerCase()]?this.colors[t.toLowerCase()]:!1}};var n={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'},i=function(i,o){this.element=t(i).addClass("colorpicker-element"),this.options=t.extend({},n,this.element.data(),o),this.component=this.options.component,this.component=this.component!==!1?this.element.find(this.component):!1,this.component&&0===this.component.length&&(this.component=!1),this.container=this.options.container===!0?this.element:this.options.container,this.container=this.container!==!1?t(this.container):!1,this.input=this.element.is("input")?this.element:this.options.input?this.element.find(this.options.input):!1,this.input&&0===this.input.length&&(this.input=!1),this.color=new e(this.options.color!==!1?this.options.color:this.getValue()),this.format=this.options.format!==!1?this.options.format:this.color.origFormat,this.picker=t(this.options.template),this.picker.addClass(this.options.inline?"colorpicker-inline colorpicker-visible":"colorpicker-hidden"),this.options.horizontal&&this.picker.addClass("colorpicker-horizontal"),("rgba"===this.format||"hsla"===this.format)&&this.picker.addClass("colorpicker-with-alpha"),"right"===this.options.align&&this.picker.addClass("colorpicker-right"),this.picker.on("mousedown.colorpicker touchstart.colorpicker",t.proxy(this.mousedown,this)),this.picker.appendTo(this.container?this.container:t("body")),this.input!==!1&&(this.input.on({"keyup.colorpicker":t.proxy(this.keyup,this)}),this.component===!1&&this.element.on({"focus.colorpicker":t.proxy(this.show,this)}),this.options.inline===!1&&this.element.on({"focusout.colorpicker":t.proxy(this.hide,this)})),this.component!==!1&&this.component.on({"click.colorpicker":t.proxy(this.show,this)}),this.input===!1&&this.component===!1&&this.element.on({"click.colorpicker":t.proxy(this.show,this)}),this.input!==!1&&this.component!==!1&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":t.proxy(this.show,this),"focus.colorpicker":t.proxy(this.show,this)}),this.update(),t(t.proxy(function(){this.element.trigger("create")},this))};i.Color=e,i.prototype={constructor:i,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker").off(".colorpicker"),this.input!==!1&&this.input.off(".colorpicker"),this.component!==!1&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(this.options.inline!==!1||this.options.container)return!1;var t=this.container&&this.container[0]!==document.body?"position":"offset",e=this.component||this.element,n=e[t]();"right"===this.options.align&&(n.left-=this.picker.outerWidth()-e.outerWidth()),this.picker.css({top:n.top+e.outerHeight(),left:n.left})},show:function(e){return this.isDisabled()?!1:(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),t(window).on("resize.colorpicker",t.proxy(this.reposition,this)),!e||this.hasInput()&&"color"!==this.input.attr("type")||e.stopPropagation&&e.preventDefault&&(e.stopPropagation(),e.preventDefault()),this.options.inline===!1&&t(window.document).on({"mousedown.colorpicker":t.proxy(this.hide,this)}),void this.element.trigger({type:"showPicker",color:this.color}))},hide:function(){this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),t(window).off("resize.colorpicker",this.reposition),t(document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(t){return t=t||this.color.toString(this.format),this.element.data("color",t),t},updateInput:function(t){return t=t||this.color.toString(this.format),this.input!==!1&&this.input.prop("value",t),t},updatePicker:function(t){void 0!==t&&(this.color=new e(t));var n=this.options.horizontal===!1?this.options.sliders:this.options.slidersHorz,i=this.picker.find("i");return 0!==i.length?(this.options.horizontal===!1?(n=this.options.sliders,i.eq(1).css("top",n.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",n.alpha.maxTop*(1-this.color.value.a))):(n=this.options.slidersHorz,i.eq(1).css("left",n.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",n.alpha.maxLeft*(1-this.color.value.a))),i.eq(0).css({top:n.saturation.maxTop-this.color.value.b*n.saturation.maxTop,left:this.color.value.s*n.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format)),t):void 0},updateComponent:function(t){if(t=t||this.color.toString(this.format),this.component!==!1){var e=this.component.find("i").eq(0);e.length>0?e.css({backgroundColor:t}):this.component.css({backgroundColor:t})}return t},update:function(t){var e;return(this.getValue(!1)!==!1||t===!0)&&(e=this.updateComponent(),this.updateInput(e),this.updateData(e),this.updatePicker()),e},setValue:function(t){this.color=new e(t),this.update(),this.element.trigger({type:"changeColor",color:this.color,value:t})},getValue:function(t){t=void 0===t?"#000000":t;var e;return e=this.hasInput()?this.input.val():this.element.data("color"),(void 0===e||""===e||null===e)&&(e=t),e},hasInput:function(){return this.input!==!1},isDisabled:function(){return this.hasInput()?this.input.prop("disabled")===!0:!1},disable:function(){return this.hasInput()?(this.input.prop("disabled",!0),this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0):!1},enable:function(){return this.hasInput()?(this.input.prop("disabled",!1),this.element.trigger({type:"enable",color:this.color,value:this.getValue()}),!0):!1},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(e){e.pageX||e.pageY||!e.originalEvent||(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),e.stopPropagation(),e.preventDefault();var n=t(e.target),i=n.closest("div"),o=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!i.is(".colorpicker")){if(i.is(".colorpicker-saturation"))this.currentSlider=t.extend({},o.saturation);else if(i.is(".colorpicker-hue"))this.currentSlider=t.extend({},o.hue);else{if(!i.is(".colorpicker-alpha"))return!1;this.currentSlider=t.extend({},o.alpha)}var a=i.offset();this.currentSlider.guide=i.find("i")[0].style,this.currentSlider.left=e.pageX-a.left,this.currentSlider.top=e.pageY-a.top,this.mousePointer={left:e.pageX,top:e.pageY},t(document).on({"mousemove.colorpicker":t.proxy(this.mousemove,this),"touchmove.colorpicker":t.proxy(this.mousemove,this),"mouseup.colorpicker":t.proxy(this.mouseup,this),"touchend.colorpicker":t.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(t){t.pageX||t.pageY||!t.originalEvent||(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY),t.stopPropagation(),t.preventDefault();var e=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((t.pageX||this.mousePointer.left)-this.mousePointer.left))),n=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((t.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=e+"px",this.currentSlider.guide.top=n+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,e/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,n/this.currentSlider.maxTop),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(e){return e.stopPropagation(),e.preventDefault(),t(document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},keyup:function(t){if(38===t.keyCode)this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0);else if(40===t.keyCode)this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0);else{var n=this.input.val();this.color=new e(n),this.getValue(!1)!==!1&&(this.updateData(),this.updateComponent(),this.updatePicker())}this.element.trigger({type:"changeColor",color:this.color,value:n})}},t.colorpicker=i,t.fn.colorpicker=function(e){var n,o=arguments,a=this.each(function(){var a=t(this),r=a.data("colorpicker"),s="object"==typeof e?e:{};r||"string"==typeof e?"string"==typeof e&&(n=r[e].apply(r,Array.prototype.slice.call(o,1))):a.data("colorpicker",new i(this,s))});return"getValue"===e?n:a},t.fn.colorpicker.constructor=i}),/*! DataTables Bootstrap 3 integration
 * ©2011-2014 SpryMedia Ltd - datatables.net/license
 */
function(){var t=function(t,e){"use strict";t.extend(!0,e.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",renderer:"bootstrap"}),t.extend(e.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm"}),e.ext.renderer.pageButton.bootstrap=function(n,i,o,a,r,s){var l,u,c=new e.Api(n),d=n.oClasses,h=n.oLanguage.oPaginate,p=function(e,i){var a,f,m,g,v=function(e){e.preventDefault(),t(e.currentTarget).hasClass("disabled")||c.page(e.data.action).draw(!1)};for(a=0,f=i.length;f>a;a++)if(g=i[a],t.isArray(g))p(e,g);else{switch(l="",u="",g){case"ellipsis":l="&hellip;",u="disabled";break;case"first":l=h.sFirst,u=g+(r>0?"":" disabled");break;case"previous":l=h.sPrevious,u=g+(r>0?"":" disabled");break;case"next":l=h.sNext,u=g+(s-1>r?"":" disabled");break;case"last":l=h.sLast,u=g+(s-1>r?"":" disabled");break;default:l=g+1,u=r===g?"active":""}l&&(m=t("<li>",{"class":d.sPageButton+" "+u,"aria-controls":n.sTableId,tabindex:n.iTabIndex,id:0===o&&"string"==typeof g?n.sTableId+"_"+g:null}).append(t("<a>",{href:"#"}).html(l)).appendTo(e),n.oApi._fnBindAction(m,{action:g},v))}};p(t(i).empty().html('<ul class="pagination"/>').children("ul"),a)},e.TableTools&&(t.extend(!0,e.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn btn-default",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info"},select:{row:"active"}}),t.extend(!0,e.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}}))};"function"==typeof define&&define.amd?define(["jquery","datatables"],t):"object"==typeof exports?t(require("jquery"),require("datatables")):jQuery&&t(jQuery,jQuery.fn.dataTable)}(window,document),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n,i=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),n=t("meta[name=csrf-param]").attr("content");t('form input[name="'+n+'"]').val(e)},fire:function(e,n,i){var o=t.Event(n);return e.trigger(o,i),o.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(i){var o,a,r,s,l,u,c,d;if(n.fire(i,"ajax:before")){if(s=i.data("cross-domain"),l=s===e?null:s,u=i.data("with-credentials")||null,c=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){o=i.attr("method"),a=i.attr("action"),r=i.serializeArray();var h=i.data("ujs:submit-button");h&&(r.push(h),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(o=i.data("method"),a=i.data("url"),r=i.serialize(),i.data("params")&&(r=r+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(o=i.data("method")||"get",a=i.data("url"),r=i.serialize(),i.data("params")&&(r=r+"&"+i.data("params"))):(o=i.data("method"),a=n.href(i),r=i.data("params")||null);return d={type:o||"GET",data:r,dataType:c,beforeSend:function(t,o){return o.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),n.fire(i,"ajax:beforeSend",[t,o])?void i.trigger("ajax:send",t):!1},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:l},u&&(d.xhrFields={withCredentials:u}),a&&(d.url=a),n.ajax(d)}return!1},handleMethod:function(i){var o=n.href(i),a=i.data("method"),r=i.attr("target"),s=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),u=t('<form method="post" action="'+o+'"></form>'),c='<input name="_method" value="'+a+'" type="hidden" />';l!==e&&s!==e&&(c+='<input name="'+l+'" value="'+s+'" type="hidden" />'),r&&u.attr("target",r),u.hide().append(c).appendTo("body"),u.submit()},formElements:function(e,n){return e.is("form")?t(e[0].elements).filter(n):e.find(n)},disableFormElements:function(e){n.formElements(e,n.disableSelector).each(function(){n.disableFormElement(t(this))})},disableFormElement:function(t){var n,i;n=t.is("button")?"html":"val",i=t.data("disable-with"),t.data("ujs:enable-with",t[n]()),i!==e&&t[n](i),t.prop("disabled",!0)},enableFormElements:function(e){n.formElements(e,n.enableSelector).each(function(){n.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,i=t.data("confirm"),o=!1;return i?(n.fire(t,"confirm")&&(o=n.confirm(i),e=n.fire(t,"confirm:complete",[o])),o&&e):!0},blankInputs:function(e,n,i){var o,a,r=t(),s=n||"input,textarea",l=e.find(s);return l.each(function(){if(o=t(this),a=o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):o.val(),!a==!i){if(o.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+o.attr("name")+'"]').length)return!0;r=r.add(o)}}),r.length?r:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var i=t.data("disable-with");t.data("ujs:enable-with",t.html()),i!==e&&t.html(i),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),i.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(t(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var o=t(this),a=o.data("method"),r=o.data("params"),s=i.metaKey||i.ctrlKey;if(!n.allowAction(o))return n.stopEverything(i);if(!s&&o.is(n.linkDisableSelector)&&n.disableElement(o),o.data("remote")!==e){if(s&&(!a||"GET"===a)&&!r)return!0;var l=n.handleRemote(o);return l===!1?n.enableElement(o):l.error(function(){n.enableElement(o)}),!1}return o.data("method")?(n.handleMethod(o),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var o=n.handleRemote(i);return o===!1?n.enableFormElement(i):o.error(function(){n.enableFormElement(i)}),!1}),i.delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var o,a,r=t(this),s=r.data("remote")!==e;if(!n.allowAction(r))return n.stopEverything(i);if(r.attr("novalidate")==e&&(o=n.blankInputs(r,n.requiredInputSelector),o&&n.fire(r,"ajax:aborted:required",[o])))return n.stopEverything(i);if(s){if(a=n.nonBlankInputs(r,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(r)},13);var l=n.fire(r,"ajax:aborted:file",[a]);return l||setTimeout(function(){n.enableFormElements(r)},13),l}return n.handleRemote(r),!1}setTimeout(function(){n.disableFormElements(r)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var o=i.attr("name"),a=o?{name:o,value:i.val()}:null;i.closest("form").data("ujs:submit-button",a)}),i.delegate(n.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){n.refreshCSRFTokens()}))}(jQuery),/*!
 * jQuery UI Core 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(e,i){var o,a,r,s=e.nodeName.toLowerCase();return"area"===s?(o=e.parentNode,a=o.name,e.href&&a&&"map"===o.nodeName.toLowerCase()?(r=t("img[usemap='#"+a+"']")[0],!!r&&n(r)):!1):(/^(input|select|textarea|button|object)$/.test(s)?!e.disabled:"a"===s?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var n=this.css("position"),i="absolute"===n,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var e=t(this);return i&&"static"===e.css("position")?!1:o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==n&&a.length?a:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(n){return e(n,!isNaN(t.attr(n,"tabindex")))},tabbable:function(n){var i=t.attr(n,"tabindex"),o=isNaN(i);return(o||i>=0)&&e(n,!o)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,n){function i(e,n,i,a){return t.each(o,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),a&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var o="Width"===n?["Left","Right"]:["Top","Bottom"],a=n.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(e){return void 0===e?r["inner"+n].call(this):this.each(function(){t(this).css(a,i(this,e)+"px")})},t.fn["outer"+n]=function(e,o){return"number"!=typeof e?r["outer"+n].call(this,e):this.each(function(){t(this).css(a,i(this,e,!0,o)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var n,i,o=t(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(i=parseInt(o.css("zIndex"),10),!isNaN(i)&&0!==i))return i;o=o.parent()}return 0}}),t.ui.plugin={add:function(e,n,i){var o,a=t.ui[e].prototype;for(o in i)a.plugins[o]=a.plugins[o]||[],a.plugins[o].push([n,i[o]])},call:function(t,e,n,i){var o,a=t.plugins[e];if(a&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<a.length;o++)t.options[a[o][0]]&&a[o][1].apply(t.element,n)}}}),/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){var e=0,n=Array.prototype.slice;return t.cleanData=function(e){return function(n){var i,o,a;for(a=0;null!=(o=n[a]);a++)try{i=t._data(o,"events"),i&&i.remove&&t(o).triggerHandler("remove")}catch(r){}e(n)}}(t.cleanData),t.widget=function(e,n,i){var o,a,r,s,l={},u=e.split(".")[0];return e=e.split(".")[1],o=u+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[u]=t[u]||{},a=t[u][e],r=t[u][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new r(t,e)},t.extend(r,a,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),s=new n,s.options=t.widget.extend({},s.options),t.each(i,function(e,i){return t.isFunction(i)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},o=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,a=this._superApply;return this._super=t,this._superApply=o,e=i.apply(this,arguments),this._super=n,this._superApply=a,e}}()):void(l[e]=i)}),r.prototype=t.widget.extend(s,{widgetEventPrefix:a?s.widgetEventPrefix||e:e},l,{constructor:r,namespace:u,widgetName:e,widgetFullName:o}),a?(t.each(a._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,r,n._proto)}),delete a._childConstructors):n._childConstructors.push(r),t.widget.bridge(e,r),r},t.widget.extend=function(e){for(var i,o,a=n.call(arguments,1),r=0,s=a.length;s>r;r++)for(i in a[r])o=a[r][i],a[r].hasOwnProperty(i)&&void 0!==o&&(e[i]=t.isPlainObject(o)?t.isPlainObject(e[i])?t.widget.extend({},e[i],o):t.widget.extend({},o):o);return e},t.widget.bridge=function(e,i){var o=i.prototype.widgetFullName||e;t.fn[e]=function(a){var r="string"==typeof a,s=n.call(arguments,1),l=this;return r?this.each(function(){var n,i=t.data(this,o);return"instance"===a?(l=i,!1):i?t.isFunction(i[a])&&"_"!==a.charAt(0)?(n=i[a].apply(i,s),n!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+a+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+a+"'")}):(s.length&&(a=t.widget.extend.apply(null,[a].concat(s))),this.each(function(){var e=t.data(this,o);e?(e.option(a||{}),e._init&&e._init()):t.data(this,o,new i(a,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(n,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i,o,a,r=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(r={},i=e.split("."),e=i.shift(),i.length){for(o=r[e]=t.widget.extend({},this.options[e]),a=0;a<i.length-1;a++)o[i[a]]=o[i[a]]||{},o=o[i[a]];if(e=i.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];r[e]=n}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,n,i){var o,a=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=o=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),t.each(i,function(i,r){function s(){return e||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?a[r]:r).apply(a,arguments):void 0}"string"!=typeof r&&(s.guid=r.guid=r.guid||s.guid||t.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+a.eventNamespace,c=l[2];c?o.delegate(c,u,s):n.bind(u,s)})},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(n).undelegate(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var o,a,r=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],a=n.originalEvent)for(o in a)o in n||(n[o]=a[o]);return this.element.trigger(n,i),!(t.isFunction(r)&&r.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,o,a){"string"==typeof o&&(o={effect:o});var r,s=o?o===!0||"number"==typeof o?n:o.effect||n:e;o=o||{},"number"==typeof o&&(o={duration:o}),r=!t.isEmptyObject(o),o.complete=a,o.delay&&i.delay(o.delay),r&&t.effects&&t.effects.effect[s]?i[e](o):s!==e&&i[s]?i[s](o.duration,o.easing,a):i.queue(function(n){t(this)[e](),a&&a.call(i[0]),n()})}}),t.widget}),/*!
 * jQuery UI Position 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){return function(){function e(t,e,n){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?n/100:1)]}function n(e,n){return parseInt(t.css(e,n),10)||0}function i(e){var n=e[0];return 9===n.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,a,r=Math.max,s=Math.abs,l=Math.round,u=/left|center|right/,c=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==o)return o;var e,n,i=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=i.children()[0];return t("body").append(i),e=a.offsetWidth,i.css("overflow","scroll"),n=a.offsetWidth,e===n&&(n=i[0].clientWidth),i.remove(),o=e-n},getScrollInfo:function(e){var n=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),o="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth,a="scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight;return{width:a?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]),o=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:o,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i||o?n.width():n.outerWidth(),height:i||o?n.height():n.outerHeight()}}},t.fn.position=function(o){if(!o||!o.of)return f.apply(this,arguments);o=t.extend({},o);var p,m,g,v,y,_,b=t(o.of),w=t.position.getWithinInfo(o.within),x=t.position.getScrollInfo(w),C=(o.collision||"flip").split(" "),L={};return _=i(b),b[0].preventDefault&&(o.at="left top"),m=_.width,g=_.height,v=_.offset,y=t.extend({},v),t.each(["my","at"],function(){var t,e,n=(o[this]||"").split(" ");1===n.length&&(n=u.test(n[0])?n.concat(["center"]):c.test(n[0])?["center"].concat(n):["center","center"]),n[0]=u.test(n[0])?n[0]:"center",n[1]=c.test(n[1])?n[1]:"center",t=d.exec(n[0]),e=d.exec(n[1]),L[this]=[t?t[0]:0,e?e[0]:0],o[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===C.length&&(C[1]=C[0]),"right"===o.at[0]?y.left+=m:"center"===o.at[0]&&(y.left+=m/2),"bottom"===o.at[1]?y.top+=g:"center"===o.at[1]&&(y.top+=g/2),p=e(L.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var i,u,c=t(this),d=c.outerWidth(),h=c.outerHeight(),f=n(this,"marginLeft"),_=n(this,"marginTop"),S=d+f+n(this,"marginRight")+x.width,k=h+_+n(this,"marginBottom")+x.height,D=t.extend({},y),T=e(L.my,c.outerWidth(),c.outerHeight());"right"===o.my[0]?D.left-=d:"center"===o.my[0]&&(D.left-=d/2),"bottom"===o.my[1]?D.top-=h:"center"===o.my[1]&&(D.top-=h/2),D.left+=T[0],D.top+=T[1],a||(D.left=l(D.left),D.top=l(D.top)),i={marginLeft:f,marginTop:_},t.each(["left","top"],function(e,n){t.ui.position[C[e]]&&t.ui.position[C[e]][n](D,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:h,collisionPosition:i,collisionWidth:S,collisionHeight:k,offset:[p[0]+T[0],p[1]+T[1]],my:o.my,at:o.at,within:w,elem:c})}),o.using&&(u=function(t){var e=v.left-D.left,n=e+m-d,i=v.top-D.top,a=i+g-h,l={target:{element:b,left:v.left,top:v.top,width:m,height:g},element:{element:c,left:D.left,top:D.top,width:d,height:h},horizontal:0>n?"left":e>0?"right":"center",vertical:0>a?"top":i>0?"bottom":"middle"};d>m&&s(e+n)<m&&(l.horizontal="center"),h>g&&s(i+a)<g&&(l.vertical="middle"),l.important=r(s(e),s(n))>r(s(i),s(a))?"horizontal":"vertical",o.using.call(this,t,l)}),c.offset(t.extend(D,{using:u}))})},t.ui.position={fit:{left:function(t,e){var n,i=e.within,o=i.isWindow?i.scrollLeft:i.offset.left,a=i.width,s=t.left-e.collisionPosition.marginLeft,l=o-s,u=s+e.collisionWidth-a-o;e.collisionWidth>a?l>0&&0>=u?(n=t.left+l+e.collisionWidth-a-o,t.left+=l-n):t.left=u>0&&0>=l?o:l>u?o+a-e.collisionWidth:o:l>0?t.left+=l:u>0?t.left-=u:t.left=r(t.left-s,t.left)},top:function(t,e){var n,i=e.within,o=i.isWindow?i.scrollTop:i.offset.top,a=e.within.height,s=t.top-e.collisionPosition.marginTop,l=o-s,u=s+e.collisionHeight-a-o;e.collisionHeight>a?l>0&&0>=u?(n=t.top+l+e.collisionHeight-a-o,t.top+=l-n):t.top=u>0&&0>=l?o:l>u?o+a-e.collisionHeight:o:l>0?t.top+=l:u>0?t.top-=u:t.top=r(t.top-s,t.top)}},flip:{left:function(t,e){var n,i,o=e.within,a=o.offset.left+o.scrollLeft,r=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,u=t.left-e.collisionPosition.marginLeft,c=u-l,d=u+e.collisionWidth-r-l,h="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(n=t.left+h+p+f+e.collisionWidth-r-a,(0>n||n<s(c))&&(t.left+=h+p+f)):d>0&&(i=t.left-e.collisionPosition.marginLeft+h+p+f-l,(i>0||s(i)<d)&&(t.left+=h+p+f))},top:function(t,e){var n,i,o=e.within,a=o.offset.top+o.scrollTop,r=o.height,l=o.isWindow?o.scrollTop:o.offset.top,u=t.top-e.collisionPosition.marginTop,c=u-l,d=u+e.collisionHeight-r-l,h="top"===e.my[1],p=h?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>c?(i=t.top+p+f+m+e.collisionHeight-r-a,(0>i||i<s(c))&&(t.top+=p+f+m)):d>0&&(n=t.top-e.collisionPosition.marginTop+p+f+m-l,(n>0||s(n)<d)&&(t.top+=p+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,n,i,o,r,s=document.getElementsByTagName("body")[0],l=document.createElement("div");e=document.createElement(s?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&t.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(r in i)e.style[r]=i[r];e.appendChild(l),n=s||document.documentElement,n.insertBefore(e,n.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",o=t(l).offset().left,a=o>10&&11>o,e.innerHTML="",n.removeChild(e)}()}(),t.ui.position}),/*!
 * jQuery UI Menu 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./position"],t):t(jQuery)}(function(t){return t.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var n=t(e.target);!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&t(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var n=t(e.currentTarget);n.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(e,n)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,n)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){var n,i,o,a,r=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:r=!1,i=this.previousFilter||"",o=String.fromCharCode(e.keyCode),a=!1,clearTimeout(this.filterTimer),o===i?a=!0:o=i+o,n=this._filterMenuItems(o),n=a&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(o=String.fromCharCode(e.keyCode),n=this._filterMenuItems(o)),n.length?(this.focus(e,n),this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}r&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(t):this.select(t))},refresh:function(){var e,n,i=this,o=this.options.icons.submenu,a=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),a.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),n=e.parent(),i=t("<span>").addClass("ui-menu-icon ui-icon "+o).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(i),e.attr("aria-labelledby",n.attr("id"))}),e=a.add(this.element),n=e.find(this.options.items),n.not(".ui-menu-item").each(function(){var e=t(this);i._isDivider(e)&&e.addClass("ui-widget-content ui-menu-divider")}),n.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),n.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this._super(t,e)},focus:function(t,e){var n,i;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=e.children(".ui-menu"),n.length&&t&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var n,i,o,a,r,s;this._hasScroll()&&(n=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,o=e.offset().top-this.activeMenu.offset().top-n-i,a=this.activeMenu.scrollTop(),r=this.activeMenu.height(),s=e.outerHeight(),0>o?this.activeMenu.scrollTop(a+o):o+s>r&&this.activeMenu.scrollTop(a+o-r+s))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var n=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(e),this.activeMenu=i},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[e]()),this.focus(n,i)},nextPage:function(e){var n,i,o;return this.active?void(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=t(this),n.offset().top-i-o<0}),this.focus(e,n)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(e)},previousPage:function(e){var n,i,o;return this.active?void(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=t(this),n.offset().top-i+o>0}),this.focus(e,n)):this.focus(e,this.activeMenu.find(this.options.items).first()))):void this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,n)},_filterMenuItems:function(e){var n=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test(t.trim(t(this).text()))})}})}),/*!
 * jQuery UI Autocomplete 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./position","./menu"],t):t(jQuery)}(function(t){return t.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,n,i,o=this.element[0].nodeName.toLowerCase(),a="textarea"===o,r="input"===o;this.isMultiLine=a?!0:r?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||r?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return e=!0,i=!0,void(n=!0);e=!1,i=!1,n=!1;var a=t.ui.keyCode;switch(o.keyCode){case a.PAGE_UP:e=!0,this._move("previousPage",o);break;case a.PAGE_DOWN:e=!0,this._move("nextPage",o);break;case a.UP:e=!0,this._keyEvent("previous",o);break;case a.DOWN:e=!0,this._keyEvent("next",o);break;case a.ENTER:this.menu.active&&(e=!0,o.preventDefault(),this.menu.select(o));break;case a.TAB:this.menu.active&&this.menu.select(o);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(o),o.preventDefault());break;default:n=!0,this._searchTimeout(o)}},keypress:function(i){if(e)return e=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&i.preventDefault());if(!n){var o=t.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:this._move("previousPage",i);break;case o.PAGE_DOWN:this._move("nextPage",i);break;case o.UP:this._keyEvent("previous",i);break;case o.DOWN:this._keyEvent("next",i)}}},input:function(t){return i?(i=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(i){i.target===e.element[0]||i.target===n||t.contains(n,i.target)||e.close()})})},menufocus:function(e,n){var i,o;return this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)})):(o=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:o})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(o.value),i=n.item.attr("aria-label")||o.value,void(i&&t.trim(i).length&&(this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))))},menuselect:function(t,e){var n=e.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",t,{item:n})&&this._value(n.value),this.term=this._value(),this.close(t),this.selectedItem=n}}),this.liveRegion=t("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,n,i=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(n,i){i(t.ui.autocomplete.filter(e,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(e,o){i.xhr&&i.xhr.abort(),i.xhr=t.ajax({url:n,data:e,dataType:"json",success:function(t){o(t)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),n=this.menu.element.is(":visible"),i=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;(!e||e&&!n&&!i)&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var n=this.menu.element.empty();this._renderMenu(n,e),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,n){var i=this;t.each(n,function(t,n){i._renderItemData(e,n)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,n){return t("<li>").text(n.label).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,n){var i=new RegExp(t.ui.autocomplete.escapeRegex(n),"i");return t.grep(e,function(t){return i.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(n).appendTo(this.liveRegion))}}),t.ui.autocomplete}),/*!
 * jQuery UI Datepicker 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/datepicker/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","./core"],t):t(jQuery)}(function(t){function e(t){for(var e,n;t.length&&t[0]!==document;){if(e=t.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(n=parseInt(t.css("zIndex"),10),!isNaN(n)&&0!==n))return n;t=t.parent()}return 0}function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=i(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(e){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(n,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",o)}function o(){t.datepicker._isDisabledDatepicker(r.inline?r.dpDiv.parent()[0]:r.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function a(e,n){t.extend(e,n);for(var i in n)null==n[i]&&(e[i]=n[i]);return e}t.extend(t.ui,{datepicker:{version:"1.11.4"}});var r;return t.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return a(this._defaults,t||{}),this},_attachDatepicker:function(e,n){var i,o,a;i=e.nodeName.toLowerCase(),o="div"===i||"span"===i,e.id||(this.uuid+=1,e.id="dp"+this.uuid),a=this._newInst(t(e),o),a.settings=t.extend({},n||{}),"input"===i?this._connectDatepicker(e,a):o&&this._inlineDatepicker(e,a)},_newInst:function(e,n){var o=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:o,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?i(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,n){var i=t(e);n.append=t([]),n.trigger=t([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),t.data(e,"datepicker",n),n.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,n){var i,o,a,r=this._get(n,"appendText"),s=this._get(n,"isRTL");n.append&&n.append.remove(),r&&(n.append=t("<span class='"+this._appendClass+"'>"+r+"</span>"),e[s?"before":"after"](n.append)),e.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),i=this._get(n,"showOn"),("focus"===i||"both"===i)&&e.focus(this._showDatepicker),("button"===i||"both"===i)&&(o=this._get(n,"buttonText"),a=this._get(n,"buttonImage"),n.trigger=t(this._get(n,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:a,alt:o,title:o}):t("<button type='button'></button>").addClass(this._triggerClass).html(a?t("<img/>").attr({src:a,alt:o,title:o}):o)),e[s?"before":"after"](n.trigger),n.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,i,o,a=new Date(2009,11,20),r=this._get(t,"dateFormat");r.match(/[DM]/)&&(e=function(t){for(n=0,i=0,o=0;o<t.length;o++)t[o].length>n&&(n=t[o].length,i=o);return i},a.setMonth(e(this._get(t,r.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(e(this._get(t,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),t.input.attr("size",this._formatDate(t,a).length)}},_inlineDatepicker:function(e,n){var i=t(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),t.data(e,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(e),n.dpDiv.css("display","block"))},_dialogDatepicker:function(e,n,i,o,r){var s,l,u,c,d,h=this._dialogInst;return h||(this.uuid+=1,s="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),h=this._dialogInst=this._newInst(this._dialogInput,!1),h.settings={},t.data(this._dialogInput[0],"datepicker",h)),a(h.settings,o||{}),n=n&&n.constructor===Date?this._formatDate(h,n):n,this._dialogInput.val(n),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(l=document.documentElement.clientWidth,u=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+c,u/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",h),this},_destroyDatepicker:function(e){var n,i=t(e),o=t.data(e,"datepicker");i.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===n?(o.append.remove(),o.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===n||"span"===n)&&i.removeClass(this.markerClassName).empty(),r===o&&(r=null))},_enableDatepicker:function(e){var n,i,o=t(e),a=t.data(e,"datepicker");o.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===n||"span"===n)&&(i=o.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var n,i,o=t(e),a=t.data(e,"datepicker");o.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===n||"span"===n)&&(i=o.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,n,i){var o,r,s,l,u=this._getInst(e);return 2===arguments.length&&"string"==typeof n?"defaults"===n?t.extend({},t.datepicker._defaults):u?"all"===n?t.extend({},u.settings):this._get(u,n):null:(o=n||{},"string"==typeof n&&(o={},o[n]=i),void(u&&(this._curInst===u&&this._hideDatepicker(),r=this._getDateDatepicker(e,!0),s=this._getMinMaxDate(u,"min"),l=this._getMinMaxDate(u,"max"),a(u.settings,o),null!==s&&void 0!==o.dateFormat&&void 0===o.minDate&&(u.settings.minDate=this._formatDate(u,s)),null!==l&&void 0!==o.dateFormat&&void 0===o.maxDate&&(u.settings.maxDate=this._formatDate(u,l)),"disabled"in o&&(o.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),u),this._autoSize(u),this._setDate(u,r),this._updateAlternate(u),this._updateDatepicker(u))))},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);n&&(this._setDate(n,e),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(t,e){var n=this._getInst(t);return n&&!n.inline&&this._setDateFromField(n,e),n?this._getDate(n):null},_doKeyDown:function(e){var n,i,o,a=t.datepicker._getInst(e.target),r=!0,s=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),r=!1;break;case 13:return o=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",a.dpDiv),o[0]&&t.datepicker._selectDay(e.target,a.selectedMonth,a.selectedYear,o[0]),n=t.datepicker._get(a,"onSelect"),n?(i=t.datepicker._formatDate(a),n.apply(a.input?a.input[0]:null,[i,a])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),r=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),r=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,s?1:-1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),r=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,s?-1:1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),r=e.ctrlKey||e.metaKey;break;default:r=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):r=!1;r&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var n,i,o=t.datepicker._getInst(e.target);return t.datepicker._get(o,"constrainInput")?(n=t.datepicker._possibleChars(t.datepicker._get(o,"dateFormat")),i=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">i||!n||n.indexOf(i)>-1):void 0},_doKeyUp:function(e){var n,i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{n=t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i)),n&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(o){}return!0},_showDatepicker:function(n){if(n=n.target||n,"input"!==n.nodeName.toLowerCase()&&(n=t("input",n.parentNode)[0]),!t.datepicker._isDisabledDatepicker(n)&&t.datepicker._lastInput!==n){var i,o,r,s,l,u,c;i=t.datepicker._getInst(n),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),o=t.datepicker._get(i,"beforeShow"),r=o?o.apply(n,[n,i]):{},r!==!1&&(a(i.settings,r),i.lastVal=null,t.datepicker._lastInput=n,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(n.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(n),t.datepicker._pos[1]+=n.offsetHeight),s=!1,t(n).parents().each(function(){return s|="fixed"===t(this).css("position"),!s}),l={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),l=t.datepicker._checkOffset(i,l,s),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":s?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),i.inline||(u=t.datepicker._get(i,"showAnim"),c=t.datepicker._get(i,"duration"),i.dpDiv.css("z-index",e(t(n))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[u]?i.dpDiv.show(u,t.datepicker._get(i,"showOptions"),c):i.dpDiv[u||"show"](u?c:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,r=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n,i=this._getNumberOfMonths(e),a=i[1],s=17,l=e.dpDiv.find("."+this._dayOverClass+" a");l.length>0&&o.apply(l.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&e.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",s*a+"em"),e.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(n=e.yearshtml,setTimeout(function(){n===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),n=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,n,i){var o=e.dpDiv.outerWidth(),a=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,s=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:t(document).scrollLeft()),u=document.documentElement.clientHeight+(i?0:t(document).scrollTop());return n.left-=this._get(e,"isRTL")?o-r:0,n.left-=i&&n.left===e.input.offset().left?t(document).scrollLeft():0,n.top-=i&&n.top===e.input.offset().top+s?t(document).scrollTop():0,n.left-=Math.min(n.left,n.left+o>l&&l>o?Math.abs(n.left+o-l):0),n.top-=Math.min(n.top,n.top+a>u&&u>a?Math.abs(a+s):0),n},_findPos:function(e){for(var n,i=this._getInst(e),o=this._get(i,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[o?"previousSibling":"nextSibling"];return n=t(e).offset(),[n.left,n.top]},_hideDatepicker:function(e){var n,i,o,a,r=this._curInst;!r||e&&r!==t.data(e,"datepicker")||this._datepickerShowing&&(n=this._get(r,"showAnim"),i=this._get(r,"duration"),o=function(){t.datepicker._tidyDialog(r)},t.effects&&(t.effects.effect[n]||t.effects[n])?r.dpDiv.hide(n,t.datepicker._get(r,"showOptions"),i,o):r.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,o),n||o(),this._datepickerShowing=!1,a=this._get(r,"onClose"),a&&a.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var n=t(e.target),i=t.datepicker._getInst(n[0]);(n[0].id!==t.datepicker._mainDivId&&0===n.parents("#"+t.datepicker._mainDivId).length&&!n.hasClass(t.datepicker.markerClassName)&&!n.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||n.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==i)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,n,i){var o=t(e),a=this._getInst(o[0]);this._isDisabledDatepicker(o[0])||(this._adjustInstDate(a,n+("M"===i?this._get(a,"showCurrentAtPos"):0),i),this._updateDatepicker(a))},_gotoToday:function(e){var n,i=t(e),o=this._getInst(i[0]);this._get(o,"gotoCurrent")&&o.currentDay?(o.selectedDay=o.currentDay,o.drawMonth=o.selectedMonth=o.currentMonth,o.drawYear=o.selectedYear=o.currentYear):(n=new Date,o.selectedDay=n.getDate(),o.drawMonth=o.selectedMonth=n.getMonth(),o.drawYear=o.selectedYear=n.getFullYear()),this._notifyChange(o),this._adjustDate(i)},_selectMonthYear:function(e,n,i){var o=t(e),a=this._getInst(o[0]);a["selected"+("M"===i?"Month":"Year")]=a["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(o)},_selectDay:function(e,n,i,o){var a,r=t(e);t(o).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||(a=this._getInst(r[0]),a.selectedDay=a.currentDay=t("a",o).html(),a.selectedMonth=a.currentMonth=n,a.selectedYear=a.currentYear=i,this._selectDate(e,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(e){var n=t(e);this._selectDate(n,"")},_selectDate:function(e,n){var i,o=t(e),a=this._getInst(o[0]);n=null!=n?n:this._formatDate(a),a.input&&a.input.val(n),this._updateAlternate(a),i=this._get(a,"onSelect"),i?i.apply(a.input?a.input[0]:null,[n,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var n,i,o,a=this._get(e,"altField");a&&(n=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),o=this.formatDate(n,i,this._getFormatConfig(e)),t(a).each(function(){t(this).val(o)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(e,n,i){if(null==e||null==n)throw"Invalid arguments";if(n="object"==typeof n?n.toString():n+"",""===n)return null;var o,a,r,s,l=0,u=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof u?u:(new Date).getFullYear()%100+parseInt(u,10),d=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,h=(i?i.dayNames:null)||this._defaults.dayNames,p=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,f=(i?i.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,_=!1,b=function(t){var n=o+1<e.length&&e.charAt(o+1)===t;return n&&o++,n},w=function(t){var e=b(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,o="y"===t?i:1,a=new RegExp("^\\d{"+o+","+i+"}"),r=n.substring(l).match(a);if(!r)throw"Missing number at position "+l;return l+=r[0].length,parseInt(r[0],10)},x=function(e,i,o){var a=-1,r=t.map(b(e)?o:i,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(r,function(t,e){var i=e[1];return n.substr(l,i.length).toLowerCase()===i.toLowerCase()?(a=e[0],l+=i.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+l},C=function(){if(n.charAt(l)!==e.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;o<e.length;o++)if(_)"'"!==e.charAt(o)||b("'")?C():_=!1;else switch(e.charAt(o)){case"d":v=w("d");break;case"D":x("D",d,h);break;case"o":y=w("o");break;case"m":g=w("m");break;case"M":g=x("M",p,f);break;case"y":m=w("y");break;case"@":s=new Date(w("@")),m=s.getFullYear(),g=s.getMonth()+1,v=s.getDate();break;case"!":s=new Date((w("!")-this._ticksTo1970)/1e4),m=s.getFullYear(),g=s.getMonth()+1,v=s.getDate();break;case"'":b("'")?C():_=!0;break;default:C()}if(l<n.length&&(r=n.substr(l),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=m?0:-100)),y>-1)for(g=1,v=y;;){if(a=this._getDaysInMonth(m,g-1),a>=v)break;g++,v-=a}if(s=this._daylightSavingAdjust(new Date(m,g-1,v)),s.getFullYear()!==m||s.getMonth()+1!==g||s.getDate()!==v)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,n){if(!e)return"";var i,o=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,a=(n?n.dayNames:null)||this._defaults.dayNames,r=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,l=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},u=function(t,e,n){var i=""+e;if(l(t))for(;i.length<n;)i="0"+i;return i},c=function(t,e,n,i){return l(t)?i[e]:n[e]},d="",h=!1;if(e)for(i=0;i<t.length;i++)if(h)"'"!==t.charAt(i)||l("'")?d+=t.charAt(i):h=!1;else switch(t.charAt(i)){case"d":d+=u("d",e.getDate(),2);break;case"D":d+=c("D",e.getDay(),o,a);break;case"o":d+=u("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=u("m",e.getMonth()+1,2);break;case"M":d+=c("M",e.getMonth(),r,s);break;case"y":d+=l("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":d+=e.getTime();break;case"!":d+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":h=!0;break;default:d+=t.charAt(i)}return d},_possibleChars:function(t){var e,n="",i=!1,o=function(n){var i=e+1<t.length&&t.charAt(e+1)===n;return i&&e++,i};for(e=0;e<t.length;e++)if(i)"'"!==t.charAt(e)||o("'")?n+=t.charAt(e):i=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":o("'")?n+="'":i=!0;break;default:n+=t.charAt(e)}return n},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,o=this._getDefaultDate(t),a=o,r=this._getFormatConfig(t);try{a=this.parseDate(n,i,r)||o}catch(s){i=e?"":i}t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),t.currentDay=i?a.getDate():0,t.currentMonth=i?a.getMonth():0,t.currentYear=i?a.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,n,i){var o=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},a=function(n){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),n,t.datepicker._getFormatConfig(e))}catch(i){}for(var o=(n.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,a=o.getFullYear(),r=o.getMonth(),s=o.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=l.exec(n);u;){switch(u[2]||"d"){case"d":case"D":s+=parseInt(u[1],10);break;case"w":case"W":s+=7*parseInt(u[1],10);break;case"m":case"M":r+=parseInt(u[1],10),s=Math.min(s,t.datepicker._getDaysInMonth(a,r));break;case"y":case"Y":a+=parseInt(u[1],10),s=Math.min(s,t.datepicker._getDaysInMonth(a,r))}u=l.exec(n)}return new Date(a,r,s)},r=null==n||""===n?i:"string"==typeof n?a(n):"number"==typeof n?isNaN(n)?i:o(n):new Date(n.getTime());return r=r&&"Invalid Date"===r.toString()?i:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,n){var i=!e,o=t.selectedMonth,a=t.selectedYear,r=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=r.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=r.getMonth(),t.drawYear=t.selectedYear=t.currentYear=r.getFullYear(),o===t.selectedMonth&&a===t.selectedYear||n||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(i?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var n=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(i,-n,"M")},next:function(){t.datepicker._adjustDate(i,+n,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(i)},selectDay:function(){return t.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(i,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,i,o,a,r,s,l,u,c,d,h,p,f,m,g,v,y,_,b,w,x,C,L,S,k,D,T,M,P,E,I,A,F,O,N,R,B,U,z=new Date,j=this._daylightSavingAdjust(new Date(z.getFullYear(),z.getMonth(),z.getDate())),$=this._get(t,"isRTL"),H=this._get(t,"showButtonPanel"),W=this._get(t,"hideIfNoPrevNext"),V=this._get(t,"navigationAsDateFormat"),q=this._getNumberOfMonths(t),G=this._get(t,"showCurrentAtPos"),Y=this._get(t,"stepMonths"),Z=1!==q[0]||1!==q[1],K=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(t,"min"),X=this._getMinMaxDate(t,"max"),Q=t.drawMonth-G,te=t.drawYear;if(0>Q&&(Q+=12,te--),X)for(e=this._daylightSavingAdjust(new Date(X.getFullYear(),X.getMonth()-q[0]*q[1]+1,X.getDate())),e=J&&J>e?J:e;this._daylightSavingAdjust(new Date(te,Q,1))>e;)Q--,0>Q&&(Q=11,te--);for(t.drawMonth=Q,t.drawYear=te,n=this._get(t,"prevText"),n=V?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Q-Y,1)),this._getFormatConfig(t)):n,i=this._canAdjustMonth(t,-1,te,Q)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"e":"w")+"'>"+n+"</span></a>",o=this._get(t,"nextText"),o=V?this.formatDate(o,this._daylightSavingAdjust(new Date(te,Q+Y,1)),this._getFormatConfig(t)):o,a=this._canAdjustMonth(t,1,te,Q)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"w":"e")+"'>"+o+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"w":"e")+"'>"+o+"</span></a>",r=this._get(t,"currentText"),s=this._get(t,"gotoCurrent")&&t.currentDay?K:j,r=V?this.formatDate(r,s,this._getFormatConfig(t)):r,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",u=H?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+($?l:"")+(this._isInRange(t,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+($?"":l)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,d=this._get(t,"showWeek"),h=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),_=this._getDefaultDate(t),b="",x=0;x<q[0];x++){for(C="",this.maxRows=4,L=0;L<q[1];L++){if(S=this._daylightSavingAdjust(new Date(te,Q,t.selectedDay)),k=" ui-corner-all",D="",Z){if(D+="<div class='ui-datepicker-group",q[1]>1)switch(L){case 0:D+=" ui-datepicker-group-first",k=" ui-corner-"+($?"right":"left");break;case q[1]-1:D+=" ui-datepicker-group-last",k=" ui-corner-"+($?"left":"right");break;default:D+=" ui-datepicker-group-middle",k=""}D+="'>"}for(D+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+k+"'>"+(/all|left/.test(k)&&0===x?$?a:i:"")+(/all|right/.test(k)&&0===x?$?i:a:"")+this._generateMonthYearHeader(t,Q,te,J,X,x>0||L>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",T=d?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)M=(w+c)%7,T+="<th scope='col'"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+h[M]+"'>"+p[M]+"</span></th>";for(D+=T+"</tr></thead><tbody>",P=this._getDaysInMonth(te,Q),te===t.selectedYear&&Q===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,P)),E=(this._getFirstDayOfMonth(te,Q)-c+7)%7,I=Math.ceil((E+P)/7),A=Z&&this.maxRows>I?this.maxRows:I,this.maxRows=A,F=this._daylightSavingAdjust(new Date(te,Q,1-E)),O=0;A>O;O++){for(D+="<tr>",N=d?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(F)+"</td>":"",w=0;7>w;w++)R=g?g.apply(t.input?t.input[0]:null,[F]):[!0,""],B=F.getMonth()!==Q,U=B&&!y||!R[0]||J&&J>F||X&&F>X,N+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(F.getTime()===S.getTime()&&Q===t.selectedMonth&&t._keyEvent||_.getTime()===F.getTime()&&_.getTime()===S.getTime()?" "+this._dayOverClass:"")+(U?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!v?"":" "+R[1]+(F.getTime()===K.getTime()?" "+this._currentClass:"")+(F.getTime()===j.getTime()?" ui-datepicker-today":""))+"'"+(B&&!v||!R[2]?"":" title='"+R[2].replace(/'/g,"&#39;")+"'")+(U?"":" data-handler='selectDay' data-event='click' data-month='"+F.getMonth()+"' data-year='"+F.getFullYear()+"'")+">"+(B&&!v?"&#xa0;":U?"<span class='ui-state-default'>"+F.getDate()+"</span>":"<a class='ui-state-default"+(F.getTime()===j.getTime()?" ui-state-highlight":"")+(F.getTime()===K.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+"' href='#'>"+F.getDate()+"</a>")+"</td>",F.setDate(F.getDate()+1),F=this._daylightSavingAdjust(F);D+=N+"</tr>"}Q++,Q>11&&(Q=0,te++),D+="</tbody></table>"+(Z?"</div>"+(q[0]>0&&L===q[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),C+=D}b+=C}return b+=u,t._keyEvent=!1,b},_generateMonthYearHeader:function(t,e,n,i,o,a,r,s){var l,u,c,d,h,p,f,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),_="<div class='ui-datepicker-title'>",b="";if(a||!g)b+="<span class='ui-datepicker-month'>"+r[e]+"</span>";else{for(l=i&&i.getFullYear()===n,u=o&&o.getFullYear()===n,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!l||c>=i.getMonth())&&(!u||c<=o.getMonth())&&(b+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+s[c]+"</option>");b+="</select>"}if(y||(_+=b+(!a&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",a||!v)_+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(d=this._get(t,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?h+parseInt(t,10):parseInt(t,10);return isNaN(e)?h:e},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=i?Math.max(f,i.getFullYear()):f,m=o?Math.min(m,o.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===n?" selected='selected'":"")+">"+f+"</option>";
t.yearshtml+="</select>",_+=t.yearshtml,t.yearshtml=null}return _+=this._get(t,"yearSuffix"),y&&(_+=(!a&&g&&v?"":"&#xa0;")+b),_+="</div>"},_adjustInstDate:function(t,e,n){var i=t.drawYear+("Y"===n?e:0),o=t.drawMonth+("M"===n?e:0),a=Math.min(t.selectedDay,this._getDaysInMonth(i,o))+("D"===n?e:0),r=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,o,a)));t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),o=n&&n>e?n:e;return i&&o>i?i:o},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,i){var o=this._getNumberOfMonths(t),a=this._daylightSavingAdjust(new Date(n,i+(0>e?e:o[0]*o[1]),1));return 0>e&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(t,a)},_isInRange:function(t,e){var n,i,o=this._getMinMaxDate(t,"min"),a=this._getMinMaxDate(t,"max"),r=null,s=null,l=this._get(t,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),r=parseInt(n[0],10),s=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(r+=i),n[1].match(/[+\-].*/)&&(s+=i)),(!o||e.getTime()>=o.getTime())&&(!a||e.getTime()<=a.getTime())&&(!r||e.getFullYear()>=r)&&(!s||e.getFullYear()<=s)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,i){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var o=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(i,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),o,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(n)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n))},t.datepicker=new n,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.11.4",t.datepicker}),function(t,e,n){var i=t.L,o={};o.version="0.7.3","object"==typeof module&&"object"==typeof module.exports?module.exports=o:"function"==typeof define&&define.amd&&define(o),o.noConflict=function(){return t.L=i,this},t.L=o,o.Util={extend:function(t){var e,n,i,o,a=Array.prototype.slice.call(arguments,1);for(n=0,i=a.length;i>n;n++){o=a[n]||{};for(e in o)o.hasOwnProperty(e)&&(t[e]=o[e])}return t},bind:function(t,e){var n=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,n||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(n){return n[e]=n[e]||++t,n[e]}}(),invokeEach:function(t,e,n){var i,o;if("object"==typeof t){o=Array.prototype.slice.call(arguments,3);for(i in t)e.apply(n,[i,t[i]].concat(o));return!0}return!1},limitExecByInterval:function(t,e,n){var i,o;return function a(){var r=arguments;return i?void(o=!0):(i=!0,setTimeout(function(){i=!1,o&&(a.apply(n,r),o=!1)},e),void t.apply(n,r))}},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return o.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=o.extend({},t.options,e),t.options},getParamString:function(t,e,n){var i=[];for(var o in t)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,i){var o=e[i];if(o===n)throw new Error("No value provided for variable "+t);return"function"==typeof o&&(o=o(e)),o})},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var n,i,o=["webkit","moz","o","ms"];for(n=0;n<o.length&&!i;n++)i=t[o[n]+e];return i}function n(e){var n=+new Date,o=Math.max(0,16-(n-i));return i=n+o,t.setTimeout(e,o)}var i=0,a=t.requestAnimationFrame||e("RequestAnimationFrame")||n,r=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};o.Util.requestAnimFrame=function(e,i,r,s){return e=o.bind(e,i),r&&a===n?void e():a.call(t,e,s)},o.Util.cancelAnimFrame=function(e){e&&r.call(t,e)}}(),o.extend=o.Util.extend,o.bind=o.Util.bind,o.stamp=o.Util.stamp,o.setOptions=o.Util.setOptions,o.Class=function(){},o.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},n=function(){};n.prototype=this.prototype;var i=new n;i.constructor=e,e.prototype=i;for(var a in this)this.hasOwnProperty(a)&&"prototype"!==a&&(e[a]=this[a]);t.statics&&(o.extend(e,t.statics),delete t.statics),t.includes&&(o.Util.extend.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=o.extend({},i.options,t.options)),o.extend(i,t),i._initHooks=[];var r=this;return e.__super__=r.prototype,i.callInitHooks=function(){if(!this._initHooksCalled){r.prototype.callInitHooks&&r.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=i._initHooks.length;e>t;t++)i._initHooks[t].call(this)}},e},o.Class.include=function(t){o.extend(this.prototype,t)},o.Class.mergeOptions=function(t){o.extend(this.prototype.options,t)},o.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n)};var a="_leaflet_events";o.Mixin={},o.Mixin.Events={addEventListener:function(t,e,n){if(o.Util.invokeEach(t,this.addEventListener,this,e,n))return this;var i,r,s,l,u,c,d,h=this[a]=this[a]||{},p=n&&n!==this&&o.stamp(n);for(t=o.Util.splitWords(t),i=0,r=t.length;r>i;i++)s={action:e,context:n||this},l=t[i],p?(u=l+"_idx",c=u+"_len",d=h[u]=h[u]||{},d[p]||(d[p]=[],h[c]=(h[c]||0)+1),d[p].push(s)):(h[l]=h[l]||[],h[l].push(s));return this},hasEventListeners:function(t){var e=this[a];return!!e&&(t in e&&e[t].length>0||t+"_idx"in e&&e[t+"_idx_len"]>0)},removeEventListener:function(t,e,n){if(!this[a])return this;if(!t)return this.clearAllEventListeners();if(o.Util.invokeEach(t,this.removeEventListener,this,e,n))return this;var i,r,s,l,u,c,d,h,p,f=this[a],m=n&&n!==this&&o.stamp(n);for(t=o.Util.splitWords(t),i=0,r=t.length;r>i;i++)if(s=t[i],c=s+"_idx",d=c+"_len",h=f[c],e){if(l=m&&h?h[m]:f[s]){for(u=l.length-1;u>=0;u--)l[u].action!==e||n&&l[u].context!==n||(p=l.splice(u,1),p[0].action=o.Util.falseFn);n&&h&&0===l.length&&(delete h[m],f[d]--)}}else delete f[s],delete f[c],delete f[d];return this},clearAllEventListeners:function(){return delete this[a],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var n,i,r,s,l,u=o.Util.extend({},e,{type:t,target:this}),c=this[a];if(c[t])for(n=c[t].slice(),i=0,r=n.length;r>i;i++)n[i].action.call(n[i].context,u);s=c[t+"_idx"];for(l in s)if(n=s[l].slice())for(i=0,r=n.length;r>i;i++)n[i].action.call(n[i].context,u);return this},addOneTimeEventListener:function(t,e,n){if(o.Util.invokeEach(t,this.addOneTimeEventListener,this,e,n))return this;var i=o.bind(function(){this.removeEventListener(t,e,n).removeEventListener(t,i,n)},this);return this.addEventListener(t,e,n).addEventListener(t,i,n)}},o.Mixin.Events.on=o.Mixin.Events.addEventListener,o.Mixin.Events.off=o.Mixin.Events.removeEventListener,o.Mixin.Events.once=o.Mixin.Events.addOneTimeEventListener,o.Mixin.Events.fire=o.Mixin.Events.fireEvent,function(){var i="ActiveXObject"in t,a=i&&!e.addEventListener,r=navigator.userAgent.toLowerCase(),s=-1!==r.indexOf("webkit"),l=-1!==r.indexOf("chrome"),u=-1!==r.indexOf("phantom"),c=-1!==r.indexOf("android"),d=-1!==r.search("android [23]"),h=-1!==r.indexOf("gecko"),p=typeof orientation!=n+"",f=t.navigator&&t.navigator.msPointerEnabled&&t.navigator.msMaxTouchPoints&&!t.PointerEvent,m=t.PointerEvent&&t.navigator.pointerEnabled&&t.navigator.maxTouchPoints||f,g="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)")&&t.matchMedia("(min-resolution:144dpi)").matches,v=e.documentElement,y=i&&"transition"in v.style,_="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix&&!d,b="MozPerspective"in v.style,w="OTransition"in v.style,x=!t.L_DISABLE_3D&&(y||_||b||w)&&!u,C=!t.L_NO_TOUCH&&!u&&function(){var t="ontouchstart";if(m||t in v)return!0;var n=e.createElement("div"),i=!1;return n.setAttribute?(n.setAttribute(t,"return;"),"function"==typeof n[t]&&(i=!0),n.removeAttribute(t),n=null,i):!1}();o.Browser={ie:i,ielt9:a,webkit:s,gecko:h&&!s&&!t.opera&&!i,android:c,android23:d,chrome:l,ie3d:y,webkit3d:_,gecko3d:b,opera3d:w,any3d:x,mobile:p,mobileWebkit:p&&s,mobileWebkit3d:p&&_,mobileOpera:p&&t.opera,touch:C,msPointer:f,pointer:m,retina:g}}(),o.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},o.Point.prototype={clone:function(){return new o.Point(this.x,this.y)},add:function(t){return this.clone()._add(o.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(o.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){t=o.point(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=o.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=o.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+o.Util.formatNum(this.x)+", "+o.Util.formatNum(this.y)+")"}},o.point=function(t,e,i){return t instanceof o.Point?t:o.Util.isArray(t)?new o.Point(t[0],t[1]):t===n||null===t?t:new o.Point(t,e,i)},o.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;o>i;i++)this.extend(n[i])},o.Bounds.prototype={extend:function(t){return t=o.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new o.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new o.Point(this.min.x,this.max.y)},getTopRight:function(){return new o.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return t="number"==typeof t[0]||t instanceof o.Point?o.point(t):o.bounds(t),t instanceof o.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=o.bounds(t);var e=this.min,n=this.max,i=t.min,a=t.max,r=a.x>=e.x&&i.x<=n.x,s=a.y>=e.y&&i.y<=n.y;return r&&s},isValid:function(){return!(!this.min||!this.max)}},o.bounds=function(t,e){return!t||t instanceof o.Bounds?t:new o.Bounds(t,e)},o.Transformation=function(t,e,n,i){this._a=t,this._b=e,this._c=n,this._d=i},o.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new o.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},o.DomUtil={get:function(t){return"string"==typeof t?e.getElementById(t):t},getStyle:function(t,n){var i=t.style[n];if(!i&&t.currentStyle&&(i=t.currentStyle[n]),(!i||"auto"===i)&&e.defaultView){var o=e.defaultView.getComputedStyle(t,null);i=o?o[n]:null}return"auto"===i?null:i},getViewportOffset:function(t){var n,i=0,a=0,r=t,s=e.body,l=e.documentElement;do{if(i+=r.offsetTop||0,a+=r.offsetLeft||0,i+=parseInt(o.DomUtil.getStyle(r,"borderTopWidth"),10)||0,a+=parseInt(o.DomUtil.getStyle(r,"borderLeftWidth"),10)||0,n=o.DomUtil.getStyle(r,"position"),r.offsetParent===s&&"absolute"===n)break;if("fixed"===n){i+=s.scrollTop||l.scrollTop||0,a+=s.scrollLeft||l.scrollLeft||0;break}if("relative"===n&&!r.offsetLeft){var u=o.DomUtil.getStyle(r,"width"),c=o.DomUtil.getStyle(r,"max-width"),d=r.getBoundingClientRect();("none"!==u||"none"!==c)&&(a+=d.left+r.clientLeft),i+=d.top+(s.scrollTop||l.scrollTop||0);break}r=r.offsetParent}while(r);r=t;do{if(r===s)break;i-=r.scrollTop||0,a-=r.scrollLeft||0,r=r.parentNode}while(r);return new o.Point(a,i)},documentIsLtr:function(){return o.DomUtil._docIsLtrCached||(o.DomUtil._docIsLtrCached=!0,o.DomUtil._docIsLtr="ltr"===o.DomUtil.getStyle(e.body,"direction")),o.DomUtil._docIsLtr},create:function(t,n,i){var o=e.createElement(t);return o.className=n,i&&i.appendChild(o),o},hasClass:function(t,e){if(t.classList!==n)return t.classList.contains(e);var i=o.DomUtil._getClass(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)},addClass:function(t,e){if(t.classList!==n)for(var i=o.Util.splitWords(e),a=0,r=i.length;r>a;a++)t.classList.add(i[a]);else if(!o.DomUtil.hasClass(t,e)){var s=o.DomUtil._getClass(t);o.DomUtil._setClass(t,(s?s+" ":"")+e)}},removeClass:function(t,e){t.classList!==n?t.classList.remove(e):o.DomUtil._setClass(t,o.Util.trim((" "+o.DomUtil._getClass(t)+" ").replace(" "+e+" "," ")))},_setClass:function(t,e){t.className.baseVal===n?t.className=e:t.className.baseVal=e},_getClass:function(t){return t.className.baseVal===n?t.className:t.className.baseVal},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(o){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}},testProp:function(t){for(var n=e.documentElement.style,i=0;i<t.length;i++)if(t[i]in n)return t[i];return!1},getTranslateString:function(t){var e=o.Browser.webkit3d,n="translate"+(e?"3d":"")+"(",i=(e?",0":"")+")";return n+t.x+"px,"+t.y+"px"+i},getScaleString:function(t,e){var n=o.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),i=" scale("+t+") ";return n+i},setPosition:function(t,e,n){t._leaflet_pos=e,!n&&o.Browser.any3d?t.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},o.DomUtil.TRANSFORM=o.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),o.DomUtil.TRANSITION=o.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),o.DomUtil.TRANSITION_END="webkitTransition"===o.DomUtil.TRANSITION||"OTransition"===o.DomUtil.TRANSITION?o.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in e)o.extend(o.DomUtil,{disableTextSelection:function(){o.DomEvent.on(t,"selectstart",o.DomEvent.preventDefault)},enableTextSelection:function(){o.DomEvent.off(t,"selectstart",o.DomEvent.preventDefault)}});else{var n=o.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);o.extend(o.DomUtil,{disableTextSelection:function(){if(n){var t=e.documentElement.style;this._userSelect=t[n],t[n]="none"}},enableTextSelection:function(){n&&(e.documentElement.style[n]=this._userSelect,delete this._userSelect)}})}o.extend(o.DomUtil,{disableImageDrag:function(){o.DomEvent.on(t,"dragstart",o.DomEvent.preventDefault)},enableImageDrag:function(){o.DomEvent.off(t,"dragstart",o.DomEvent.preventDefault)}})}(),o.LatLng=function(t,e,i){if(t=parseFloat(t),e=parseFloat(e),isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=t,this.lng=e,i!==n&&(this.alt=parseFloat(i))},o.extend(o.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),o.LatLng.prototype={equals:function(t){if(!t)return!1;t=o.latLng(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return e<=o.LatLng.MAX_MARGIN},toString:function(t){return"LatLng("+o.Util.formatNum(this.lat,t)+", "+o.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=o.latLng(t);var e=6378137,n=o.LatLng.DEG_TO_RAD,i=(t.lat-this.lat)*n,a=(t.lng-this.lng)*n,r=this.lat*n,s=t.lat*n,l=Math.sin(i/2),u=Math.sin(a/2),c=l*l+u*u*Math.cos(r)*Math.cos(s);return 2*e*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))},wrap:function(t,e){var n=this.lng;return t=t||-180,e=e||180,n=(n+e)%(e-t)+(t>n||n===e?e:t),new o.LatLng(this.lat,n)}},o.latLng=function(t,e){return t instanceof o.LatLng?t:o.Util.isArray(t)?"number"==typeof t[0]||"string"==typeof t[0]?new o.LatLng(t[0],t[1],t[2]):null:t===n||null===t?t:"object"==typeof t&&"lat"in t?new o.LatLng(t.lat,"lng"in t?t.lng:t.lon):e===n?null:new o.LatLng(t,e)},o.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;o>i;i++)this.extend(n[i])},o.LatLngBounds.prototype={extend:function(t){if(!t)return this;var e=o.latLng(t);return t=null!==e?e:o.latLngBounds(t),t instanceof o.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new o.LatLng(t.lat,t.lng),this._northEast=new o.LatLng(t.lat,t.lng)):t instanceof o.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,a=Math.abs(e.lng-n.lng)*t;return new o.LatLngBounds(new o.LatLng(e.lat-i,e.lng-a),new o.LatLng(n.lat+i,n.lng+a))},getCenter:function(){return new o.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new o.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new o.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof o.LatLng?o.latLng(t):o.latLngBounds(t);var e,n,i=this._southWest,a=this._northEast;return t instanceof o.LatLngBounds?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=a.lat&&e.lng>=i.lng&&n.lng<=a.lng},intersects:function(t){t=o.latLngBounds(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),a=t.getNorthEast(),r=a.lat>=e.lat&&i.lat<=n.lat,s=a.lng>=e.lng&&i.lng<=n.lng;return r&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return t?(t=o.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},o.latLngBounds=function(t,e){return!t||t instanceof o.LatLngBounds?t:new o.LatLngBounds(t,e)},o.Projection={},o.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=o.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),a=t.lng*e,r=i*e;return r=Math.log(Math.tan(Math.PI/4+r/2)),new o.Point(a,r)},unproject:function(t){var e=o.LatLng.RAD_TO_DEG,n=t.x*e,i=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new o.LatLng(i,n)}},o.Projection.LonLat={project:function(t){return new o.Point(t.lng,t.lat)},unproject:function(t){return new o.LatLng(t.y,t.x)}},o.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var e=this.scale(t);return o.point(e,e)}},o.CRS.Simple=o.extend({},o.CRS,{projection:o.Projection.LonLat,transformation:new o.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),o.CRS.EPSG3857=o.extend({},o.CRS,{code:"EPSG:3857",projection:o.Projection.SphericalMercator,transformation:new o.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=this.projection.project(t),n=6378137;return e.multiplyBy(n)}}),o.CRS.EPSG900913=o.extend({},o.CRS.EPSG3857,{code:"EPSG:900913"}),o.CRS.EPSG4326=o.extend({},o.CRS,{code:"EPSG:4326",projection:o.Projection.LonLat,transformation:new o.Transformation(1/360,.5,-1/360,.5)}),o.Map=o.Class.extend({includes:o.Mixin.Events,options:{crs:o.CRS.EPSG3857,fadeAnimation:o.DomUtil.TRANSITION&&!o.Browser.android23,trackResize:!0,markerZoomAnimation:o.DomUtil.TRANSITION&&o.Browser.any3d},initialize:function(t,e){e=o.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=o.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==n&&this.setView(o.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return e=e===n?this.getZoom():e,this._resetView(o.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=this._limitZoom(t),this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),a=this.getSize().divideBy(2),r=t instanceof o.Point?t:this.latLngToContainerPoint(t),s=r.subtract(a).multiplyBy(1-1/i),l=this.containerPointToLatLng(a.add(s));return this.setView(l,e,{zoom:n})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():o.latLngBounds(t);var n=o.point(e.paddingTopLeft||e.padding||[0,0]),i=o.point(e.paddingBottomRight||e.padding||[0,0]),a=this.getBoundsZoom(t,!1,n.add(i)),r=i.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),a),l=this.project(t.getNorthEast(),a),u=this.unproject(s.add(l).divideBy(2).add(r),a);return a=e&&e.maxZoom?Math.min(e.maxZoom,a):a,this.setView(u,a,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(o.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=o.latLngBounds(t),this.options.maxBounds=t,t?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(t,e){var n=this.getCenter(),i=this._limitCenter(n,this._zoom,t);return n.equals(i)?this:this.panTo(i,e)},addLayer:function(t){var e=o.stamp(t);return this._layers[e]?this:(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t),this)},removeLayer:function(t){var e=o.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&this.fire("layerremove",{layer:t}),this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(t){return t?o.stamp(t)in this._layers:!1},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},invalidateSize:function(t){if(!this._loaded)return this;t=o.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var n=this.getSize(),i=e.divideBy(2).round(),a=n.divideBy(2).round(),r=i.subtract(a);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(t){this._container._leaflet=n}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new o.LatLngBounds(e,n)},getMinZoom:function(){return this.options.minZoom===n?this._layersMinZoom===n?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===n?this._layersMaxZoom===n?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=o.latLngBounds(t);var i,a=this.getMinZoom()-(e?1:0),r=this.getMaxZoom(),s=this.getSize(),l=t.getNorthWest(),u=t.getSouthEast(),c=!0;n=o.point(n||[0,0]);do a++,i=this.project(u,a).subtract(this.project(l,a)).add(n),c=e?i.x<s.x||i.y<s.y:s.contains(i);while(c&&r>=a);return c&&e?null:e?a:a-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new o.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new o.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===n?this._zoom:e,this.options.crs.latLngToPoint(o.latLng(t),e)},unproject:function(t,e){return e=e===n?this._zoom:e,this.options.crs.pointToLatLng(o.point(t),e)},layerPointToLatLng:function(t){var e=o.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(o.latLng(t))._round();return e._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return o.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return o.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(o.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)))},mouseEventToContainerPoint:function(t){return o.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=o.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;o.DomUtil.addClass(t,"leaflet-container"+(o.Browser.touch?" leaflet-touch":"")+(o.Browser.retina?" leaflet-retina":"")+(o.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=o.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(o.DomUtil.addClass(t.markerPane,e),o.DomUtil.addClass(t.shadowPane,e),o.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return o.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){t=t?o.Util.isArray(t)?t:[t]:[];for(var e=0,n=t.length;n>e;e++)this.addLayer(t[e])},_resetView:function(t,e,n,i){var a=this._zoom!==e;i||(this.fire("movestart"),a&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),n?this._initialTopLeftPoint._add(this._getMapPanePos()):o.DomUtil.setPosition(this._mapPane,new o.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var r=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!n}),r&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(a||i)&&this.fire("zoomend"),this.fire("moveend",{hard:!n})},_rawPanBy:function(t){o.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=1/0,i=-1/0,o=this._getZoomSpan();for(t in this._zoomBoundLayers){var a=this._zoomBoundLayers[t];isNaN(a.options.minZoom)||(e=Math.min(e,a.options.minZoom)),isNaN(a.options.maxZoom)||(i=Math.max(i,a.options.maxZoom))}t===n?this._layersMaxZoom=this._layersMinZoom=n:(this._layersMaxZoom=i,this._layersMinZoom=e),o!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(o.DomEvent){e=e||"on",o.DomEvent[e](this._container,"click",this._onMouseClick,this);var n,i,a=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(n=0,i=a.length;i>n;n++)o.DomEvent[e](this._container,a[n],this._fireMouseEvent,this);this.options.trackResize&&o.DomEvent[e](t,"resize",this._onResize,this)}},_onResize:function(){o.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=o.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||o.DomEvent._skipped(t)||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!o.DomEvent._skipped(t)){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&o.DomEvent.preventDefault(t);var n=this.mouseEventToContainerPoint(t),i=this.containerPointToLayerPoint(n),a=this.layerPointToLatLng(i);
this.fire(e,{latlng:a,layerPoint:i,containerPoint:n,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;e>t;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return o.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewTopLeftPoint(n,e).add(this._getMapPanePos());return this.project(t,e)._subtract(i)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),a=this.getSize().divideBy(2),r=new o.Bounds(i.subtract(a),i.add(a)),s=this._getBoundsOffset(r,n,e);return this.unproject(i.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new o.Bounds(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=this.project(e.getNorthWest(),n).subtract(t.min),a=this.project(e.getSouthEast(),n).subtract(t.max),r=this._rebound(i.x,-a.x),s=this._rebound(i.y,-a.y);return new o.Point(r,s)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom();return Math.max(e,Math.min(n,t))}}),o.map=function(t,e){return new o.Map(t,e)},o.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=o.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),a=this.R_MAJOR,r=this.R_MINOR,s=t.lng*e*a,l=i*e,u=r/a,c=Math.sqrt(1-u*u),d=c*Math.sin(l);d=Math.pow((1-d)/(1+d),.5*c);var h=Math.tan(.5*(.5*Math.PI-l))/d;return l=-a*Math.log(h),new o.Point(s,l)},unproject:function(t){for(var e,n=o.LatLng.RAD_TO_DEG,i=this.R_MAJOR,a=this.R_MINOR,r=t.x*n/i,s=a/i,l=Math.sqrt(1-s*s),u=Math.exp(-t.y/i),c=Math.PI/2-2*Math.atan(u),d=15,h=1e-7,p=d,f=.1;Math.abs(f)>h&&--p>0;)e=l*Math.sin(c),f=Math.PI/2-2*Math.atan(u*Math.pow((1-e)/(1+e),.5*l))-c,c+=f;return new o.LatLng(c*n,r)}},o.CRS.EPSG3395=o.extend({},o.CRS,{code:"EPSG:3395",projection:o.Projection.Mercator,transformation:function(){var t=o.Projection.Mercator,e=t.R_MAJOR,n=.5/(Math.PI*e);return new o.Transformation(n,.5,-n,.5)}()}),o.TileLayer=o.Class.extend({includes:o.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:o.Browser.mobile,updateWhenIdle:o.Browser.mobile},initialize:function(t,e){e=o.setOptions(this,e),e.detectRetina&&o.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=o.latLngBounds(e.bounds)),this._url=t;var n=this.options.subdomains;"string"==typeof n&&(this.options.subdomains=n.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=o.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==n&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var n,i,o,a=t.children,r=-e(1/0,-1/0);for(i=0,o=a.length;o>i;i++)a[i]!==this._container&&(n=parseInt(a[i].style.zIndex,10),isNaN(n)||(r=e(r,n)));this.options.zIndex=this._container.style.zIndex=(isFinite(r)?r:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(o.Browser.ielt9)for(t in e)o.DomUtil.setOpacity(e[t],this.options.opacity);else o.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=o.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var e="leaflet-tile-container";this._bgBuffer=o.DomUtil.create("div",e,this._container),this._tileContainer=o.DomUtil.create("div",e,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var t=this._map,e=t.getZoom()+this.options.zoomOffset,n=this.options.maxNativeZoom,i=this.options.tileSize;return n&&e>n&&(i=Math.round(t.getZoomScale(e)/t.getZoomScale(n)*i)),i},_update:function(){if(this._map){var t=this._map,e=t.getPixelBounds(),n=t.getZoom(),i=this._getTileSize();if(!(n>this.options.maxZoom||n<this.options.minZoom)){var a=o.bounds(e.min.divideBy(i)._floor(),e.max.divideBy(i)._floor());this._addTilesFromCenterOut(a),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(a)}}},_addTilesFromCenterOut:function(t){var n,i,a,r=[],s=t.getCenter();for(n=t.min.y;n<=t.max.y;n++)for(i=t.min.x;i<=t.max.x;i++)a=new o.Point(i,n),this._tileShouldBeLoaded(a)&&r.push(a);var l=r.length;if(0!==l){r.sort(function(t,e){return t.distanceTo(s)-e.distanceTo(s)});var u=e.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=l,i=0;l>i;i++)this._addTile(r[i],u);this._tileContainer.appendChild(u)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var n=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=n.x)||t.y<0||t.y>=n.y)return!1}if(e.bounds){var i=e.tileSize,o=t.multiplyBy(i),a=o.add([i,i]),r=this._map.unproject(o),s=this._map.unproject(a);if(e.continuousWorld||e.noWrap||(r=r.wrap(),s=s.wrap()),!e.bounds.intersects([r,s]))return!1}return!0},_removeOtherTiles:function(t){var e,n,i,o;for(o in this._tiles)e=o.split(":"),n=parseInt(e[0],10),i=parseInt(e[1],10),(n<t.min.x||n>t.max.x||i<t.min.y||i>t.max.y)&&this._removeTile(o)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(o.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),o.Browser.android||(e.onload=null,e.src=o.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var n=this._getTilePos(t),i=this._getTile();o.DomUtil.setPosition(i,n,o.Browser.chrome),this._tiles[t.x+":"+t.y]=i,this._loadTile(i,t),i.parentNode!==this._tileContainer&&e.appendChild(i)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getTilePos:function(t){var e=this._map.getPixelOrigin(),n=this._getTileSize();return t.multiplyBy(n).subtract(e)},getTileUrl:function(t){return o.Util.template(this._url,o.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){var t=this._map.options.crs,e=t.getSize(this._map.getZoom());return e.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e.x+e.x)%e.x),this.options.tms&&(t.y=e.y-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=o.DomUtil.create("img","leaflet-tile");return t.style.width=t.style.height=this._getTileSize()+"px",t.galleryimg="no",t.onselectstart=t.onmousemove=o.Util.falseFn,o.Browser.ielt9&&this.options.opacity!==n&&o.DomUtil.setOpacity(t,this.options.opacity),o.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden"),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e),this.fire("tileloadstart",{tile:t,url:t.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&o.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(o.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==o.Util.emptyImageUrl&&(o.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),o.tileLayer=function(t,e){return new o.TileLayer(t,e)},o.TileLayer.WMS=o.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var n=o.extend({},this.defaultWmsParams),i=e.tileSize||this.options.tileSize;n.width=n.height=e.detectRetina&&o.Browser.retina?2*i:i;for(var a in e)this.options.hasOwnProperty(a)||"crs"===a||(n[a]=e[a]);this.wmsParams=n,o.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,o.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._map,n=this.options.tileSize,i=t.multiplyBy(n),a=i.add([n,n]),r=this._crs.project(e.unproject(i,t.z)),s=this._crs.project(e.unproject(a,t.z)),l=this._wmsVersion>=1.3&&this._crs===o.CRS.EPSG4326?[s.y,r.x,r.y,s.x].join(","):[r.x,s.y,s.x,r.y].join(","),u=o.Util.template(this._url,{s:this._getSubdomain(t)});return u+o.Util.getParamString(this.wmsParams,u,!0)+"&BBOX="+l},setParams:function(t,e){return o.extend(this.wmsParams,t),e||this.redraw(),this}}),o.tileLayer.wms=function(t,e){return new o.TileLayer.WMS(t,e)},o.TileLayer.Canvas=o.TileLayer.extend({options:{async:!1},initialize:function(t){o.setOptions(this,t)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var t in this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTile:function(){var t=o.DomUtil.create("canvas","leaflet-tile");return t.width=t.height=this.options.tileSize,t.onselectstart=t.onmousemove=o.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),o.tileLayer.canvas=function(t){return new o.TileLayer.Canvas(t)},o.ImageOverlay=o.Class.extend({includes:o.Mixin.Events,options:{opacity:1},initialize:function(t,e,n){this._url=t,this._bounds=o.latLngBounds(e),o.setOptions(this,n)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&o.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},setUrl:function(t){this._url=t,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=o.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&o.Browser.any3d?o.DomUtil.addClass(this._image,"leaflet-zoom-animated"):o.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),o.extend(this._image,{galleryimg:"no",onselectstart:o.Util.falseFn,onmousemove:o.Util.falseFn,onload:o.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,n=this._image,i=e.getZoomScale(t.zoom),a=this._bounds.getNorthWest(),r=this._bounds.getSouthEast(),s=e._latLngToNewLayerPoint(a,t.zoom,t.center),l=e._latLngToNewLayerPoint(r,t.zoom,t.center)._subtract(s),u=s._add(l._multiplyBy(.5*(1-1/i)));n.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(u)+" scale("+i+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),n=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);o.DomUtil.setPosition(t,e),t.style.width=n.x+"px",t.style.height=n.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){o.DomUtil.setOpacity(this._image,this.options.opacity)}}),o.imageOverlay=function(t,e,n){return new o.ImageOverlay(t,e,n)},o.Icon=o.Class.extend({options:{className:""},initialize:function(t){o.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i;return i=e&&"IMG"===e.tagName?this._createImg(n,e):this._createImg(n),this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n,i=this.options,a=o.point(i[e+"Size"]);n=o.point("shadow"===e?i.shadowAnchor||i.iconAnchor:i.iconAnchor),!n&&a&&(n=a.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+i.className,n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),a&&(t.style.width=a.x+"px",t.style.height=a.y+"px")},_createImg:function(t,n){return n=n||e.createElement("img"),n.src=t,n},_getIconUrl:function(t){return o.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),o.icon=function(t){return new o.Icon(t)},o.Icon.Default=o.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";return this.options[e]?this.options[e]:o.Browser.retina&&"icon"===t?"/assets/marker-icon-2x-454dc479e82b487529b6b93d6a9b29ac69ca7b4f5a9d5fdf8e01871f6d216113.png":"shadow"==t?"/assets/marker-shadow-4f340d2d61746333dffe056e074ce1704ae4e47fec5a7de98322fbdbcfcb2b6d.png":"/assets/marker-icon-915e83a6fc798c599e5c9e3f759d6bc065d65151019acd0410d1f4731bcaaf72.png"}}),o.Icon.Default.imagePath=function(){var t,n,i,o,a,r=e.getElementsByTagName("script"),s=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,n=r.length;n>t;t++)if(i=r[t].src,o=i.match(s))return a=i.split(s)[0],a?a+"/":""}(),o.Marker=o.Class.extend({includes:o.Mixin.Events,options:{icon:new o.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){o.setOptions(this,e),this._latlng=o.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e=this._map,n=e.options.zoomAnimation&&e.options.markerZoomAnimation,i=n?"leaflet-zoom-animated":"leaflet-zoom-hide",a=t.icon.createIcon(this._icon),r=!1;a!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(a.title=t.title),t.alt&&(a.alt=t.alt)),o.DomUtil.addClass(a,i),t.keyboard&&(a.tabIndex="0"),this._icon=a,this._initInteraction(),t.riseOnHover&&o.DomEvent.on(a,"mouseover",this._bringToFront,this).on(a,"mouseout",this._resetZIndex,this);var s=t.icon.createShadow(this._shadow),l=!1;s!==this._shadow&&(this._removeShadow(),l=!0),s&&o.DomUtil.addClass(s,i),this._shadow=s,t.opacity<1&&this._updateOpacity();var u=this._map._panes;r&&u.markerPane.appendChild(this._icon),s&&l&&u.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&o.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){o.DomUtil.setPosition(this._icon,t),this._shadow&&o.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];o.DomUtil.addClass(t,"leaflet-clickable"),o.DomEvent.on(t,"click",this._onMouseClick,this),o.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)o.DomEvent.on(t,e[n],this._fireMouseEvent,this);o.Handler.MarkerDrag&&(this.dragging=new o.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&o.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&o.DomEvent.preventDefault(t),"mousedown"!==t.type?o.DomEvent.stopPropagation(t):o.DomEvent.preventDefault(t)},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){o.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&o.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),o.marker=function(t,e){return new o.Marker(t,e)},o.DivIcon=o.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var n=t&&"DIV"===t.tagName?t:e.createElement("div"),i=this.options;return n.innerHTML=i.html!==!1?i.html:"",i.bgPos&&(n.style.backgroundPosition=-i.bgPos.x+"px "+-i.bgPos.y+"px"),this._setIconStyles(n,"icon"),n},createShadow:function(){return null}}),o.divIcon=function(t){return new o.DivIcon(t)},o.Map.mergeOptions({closePopupOnClick:!0}),o.Popup=o.Class.extend({includes:o.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){o.setOptions(this,t),this._source=e,this._animated=o.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout();var e=t.options.fadeAnimation;e&&o.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this.update(),e&&o.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),o.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&o.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",n=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),i=this._container=o.DomUtil.create("div",n);this.options.closeButton&&(t=this._closeButton=o.DomUtil.create("a",e+"-close-button",i),t.href="#close",t.innerHTML="&#215;",o.DomEvent.disableClickPropagation(t),o.DomEvent.on(t,"click",this._onCloseButtonClick,this));var a=this._wrapper=o.DomUtil.create("div",e+"-content-wrapper",i);o.DomEvent.disableClickPropagation(a),this._contentNode=o.DomUtil.create("div",e+"-content",a),o.DomEvent.disableScrollPropagation(this._contentNode),o.DomEvent.on(a,"contextmenu",o.DomEvent.stopPropagation),this._tipContainer=o.DomUtil.create("div",e+"-tip-container",i),this._tip=o.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,a=this.options.maxHeight,r="leaflet-popup-scrolled";a&&i>a?(e.height=a+"px",o.DomUtil.addClass(t,r)):o.DomUtil.removeClass(t,r),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,n=o.point(this.options.offset);e&&o.DomUtil.setPosition(this._container,t),this._containerBottom=-n.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);o.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,n=this._containerWidth,i=new o.Point(this._containerLeft,-e-this._containerBottom);this._animated&&i._add(o.DomUtil.getPosition(this._container));var a=t.layerPointToContainerPoint(i),r=o.point(this.options.autoPanPadding),s=o.point(this.options.autoPanPaddingTopLeft||r),l=o.point(this.options.autoPanPaddingBottomRight||r),u=t.getSize(),c=0,d=0;a.x+n+l.x>u.x&&(c=a.x+n-u.x+l.x),a.x-c-s.x<0&&(c=a.x-s.x),a.y+e+l.y>u.y&&(d=a.y+e-u.y+l.y),a.y-d-s.y<0&&(d=a.y-s.y),(c||d)&&t.fire("autopanstart").panBy([c,d])}},_onCloseButtonClick:function(t){this._close(),o.DomEvent.stop(t)}}),o.popup=function(t,e){return new o.Popup(t,e)},o.Map.include({openPopup:function(t,e,n){if(this.closePopup(),!(t instanceof o.Popup)){var i=t;t=new o.Popup(n).setLatLng(e).setContent(i)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),o.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var n=o.point(this.options.icon.options.popupAnchor||[0,0]);return n=n.add(o.Popup.prototype.options.offset),e&&e.offset&&(n=n.add(e.offset)),e=o.extend({offset:n},e),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),t instanceof o.Popup?(o.setOptions(t,e),this._popup=t):this._popup=new o.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),o.LayerGroup=o.Class.extend({initialize:function(t){this._layers={};var e,n;if(t)for(e=0,n=t.length;n>e;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return t?t in this._layers||this.getLayerId(t)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)n=this._layers[e],n[t]&&n[t].apply(n,i);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o.stamp(t)}}),o.layerGroup=function(t){return new o.LayerGroup(t)},o.FeatureGroup=o.LayerGroup.extend({includes:o.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:("on"in t&&t.on(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.off(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})):this},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break}return this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new o.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof o.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t=o.extend({layer:t.target,target:this},t),this.fire(t.type,t)}}),o.featureGroup=function(t){return new o.FeatureGroup(t)},o.Path=o.Class.extend({includes:[o.Mixin.Events],statics:{CLIP_PADDING:function(){var e=o.Browser.mobile?1280:2e3,n=(e/Math.max(t.outerWidth,t.outerHeight)-1)/2;return Math.max(0,Math.min(.5,n))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){o.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,o.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return o.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),o.Map.include({_updatePathViewport:function(){var t=o.Path.CLIP_PADDING,e=this.getSize(),n=o.DomUtil.getPosition(this._mapPane),i=n.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),a=i.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new o.Bounds(i,a)}}),o.Path.SVG_NS="http://www.w3.org/2000/svg",o.Browser.svg=!(!e.createElementNS||!e.createElementNS(o.Path.SVG_NS,"svg").createSVGRect),o.Path=o.Path.extend({statics:{SVG:o.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,n=t.firstChild;return e&&n!==e&&t.insertBefore(e,n),this},getPathString:function(){},_createElement:function(t){return e.createElementNS(o.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&o.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()
},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){(o.Browser.svg||!o.Browser.vml)&&o.DomUtil.addClass(this._path,"leaflet-clickable"),o.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)o.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this.hasEventListeners(t.type)){var e=this._map,n=e.mouseEventToContainerPoint(t),i=e.containerPointToLayerPoint(n),a=e.layerPointToLatLng(i);this.fire(t.type,{latlng:a,layerPoint:i,containerPoint:n,originalEvent:t}),"contextmenu"===t.type&&o.DomEvent.preventDefault(t),"mousemove"!==t.type&&o.DomEvent.stopPropagation(t)}}}),o.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=o.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&o.Browser.any3d?(o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),n=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(n)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max,i=n.x-e.x,a=n.y-e.y,r=this._pathRoot,s=this._panes.overlayPane;o.Browser.mobileWebkit&&s.removeChild(r),o.DomUtil.setPosition(r,e),r.setAttribute("width",i),r.setAttribute("height",a),r.setAttribute("viewBox",[e.x,e.y,i,a].join(" ")),o.Browser.mobileWebkit&&s.appendChild(r)}}}),o.Path.include({bindPopup:function(t,e){return t instanceof o.Popup?this._popup=t:((!this._popup||e)&&(this._popup=new o.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),o.Browser.vml=!o.Browser.svg&&function(){try{var t=e.createElement("div");t.innerHTML='<v:shape adj="1"/>';var n=t.firstChild;return n.style.behavior="url(#default#VML)",n&&"object"==typeof n.adj}catch(i){return!1}}(),o.Path=o.Browser.svg||!o.Browser.vml?o.Path:o.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return e.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return e.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");o.DomUtil.addClass(t,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&o.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,n=this.options,i=this._container;i.stroked=n.stroke,i.filled=n.fill,n.stroke?(t||(t=this._stroke=this._createElement("stroke"),t.endcap="round",i.appendChild(t)),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,t.dashStyle=n.dashArray?o.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):"",n.lineCap&&(t.endcap=n.lineCap.replace("butt","flat")),n.lineJoin&&(t.joinstyle=n.lineJoin)):t&&(i.removeChild(t),this._stroke=null),n.fill?(e||(e=this._fill=this._createElement("fill"),i.appendChild(e)),e.color=n.fillColor||n.color,e.opacity=n.fillOpacity):e&&(i.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),o.Map.include(o.Browser.svg||!o.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=e.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),o.Browser.canvas=function(){return!!e.createElement("canvas").getContext}(),o.Path=o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?o.Path:o.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return o.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!o.Path._updateRequest&&(o.Path._updateRequest=o.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){o.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color)},_drawPath:function(){var t,e,n,i,a,r;for(this._ctx.beginPath(),t=0,n=this._parts.length;n>t;t++){for(e=0,i=this._parts[t].length;i>e;e++)a=this._parts[t][e],r=(0===e?"move":"line")+"To",this._ctx[r](a.x,a.y);this instanceof o.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill()),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(t){this._containsPoint(t.layerPoint)&&this.fire("click",t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),o.Map.include(o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?{}:{_initPathRoot:function(){var t,n=this._pathRoot;n||(n=this._pathRoot=e.createElement("canvas"),n.style.position="absolute",t=this._canvasCtx=n.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(n),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max.subtract(e),i=this._pathRoot;o.DomUtil.setPosition(i,e),i.width=n.x,i.height=n.y,i.getContext("2d").translate(-e.x,-e.y)}}}),o.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),t=this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var i=t.length,o=typeof Uint8Array!=n+""?Uint8Array:Array,a=new o(i);a[0]=a[i-1]=1,this._simplifyDPStep(t,a,e,0,i-1);var r,s=[];for(r=0;i>r;r++)a[r]&&s.push(t[r]);return s},_simplifyDPStep:function(t,e,n,i,o){var a,r,s,l=0;for(r=i+1;o-1>=r;r++)s=this._sqClosestPointOnSegment(t[r],t[i],t[o],!0),s>l&&(a=r,l=s);l>n&&(e[a]=1,this._simplifyDPStep(t,e,n,i,a),this._simplifyDPStep(t,e,n,a,o))},_reducePoints:function(t,e){for(var n=[t[0]],i=1,o=0,a=t.length;a>i;i++)this._sqDist(t[i],t[o])>e&&(n.push(t[i]),o=i);return a-1>o&&n.push(t[a-1]),n},clipSegment:function(t,e,n,i){var o,a,r,s=i?this._lastCode:this._getBitCode(t,n),l=this._getBitCode(e,n);for(this._lastCode=l;;){if(!(s|l))return[t,e];if(s&l)return!1;o=s||l,a=this._getEdgeIntersection(t,e,o,n),r=this._getBitCode(a,n),o===s?(t=a,s=r):(e=a,l=r)}},_getEdgeIntersection:function(t,e,n,i){var a=e.x-t.x,r=e.y-t.y,s=i.min,l=i.max;return 8&n?new o.Point(t.x+a*(l.y-t.y)/r,l.y):4&n?new o.Point(t.x+a*(s.y-t.y)/r,s.y):2&n?new o.Point(l.x,t.y+r*(l.x-t.x)/a):1&n?new o.Point(s.x,t.y+r*(s.x-t.x)/a):void 0},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i},_sqClosestPointOnSegment:function(t,e,n,i){var a,r=e.x,s=e.y,l=n.x-r,u=n.y-s,c=l*l+u*u;return c>0&&(a=((t.x-r)*l+(t.y-s)*u)/c,a>1?(r=n.x,s=n.y):a>0&&(r+=l*a,s+=u*a)),l=t.x-r,u=t.y-s,i?l*l+u*u:new o.Point(r,s)}},o.Polyline=o.Path.extend({initialize:function(t,e){o.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;e>t;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,n="";e>t;t++)n+=this._getPathPartStr(this._parts[t]);return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(o.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var e,n,i=1/0,a=this._parts,r=null,s=0,l=a.length;l>s;s++)for(var u=a[s],c=1,d=u.length;d>c;c++){e=u[c-1],n=u[c];var h=o.LineUtil._sqClosestPointOnSegment(t,e,n,!0);i>h&&(i=h,r=o.LineUtil._sqClosestPointOnSegment(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getBounds:function(){return new o.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var n,i,a=e?t:[];for(n=0,i=t.length;i>n;n++){if(o.Util.isArray(t[n])&&"number"!=typeof t[n][0])return;a[n]=o.latLng(t[n])}return a},_initEvents:function(){o.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,n=o.Path.VML,i=0,a=t.length,r="";a>i;i++)e=t[i],n&&e._round(),r+=(i?"L":"M")+e.x+" "+e.y;return r},_clipPoints:function(){var t,e,n,i=this._originalPoints,a=i.length;if(this.options.noClip)return void(this._parts=[i]);this._parts=[];var r=this._parts,s=this._map._pathViewport,l=o.LineUtil;for(t=0,e=0;a-1>t;t++)n=l.clipSegment(i[t],i[t+1],s,t),n&&(r[e]=r[e]||[],r[e].push(n[0]),(n[1]!==i[t+1]||t===a-2)&&(r[e].push(n[1]),e++))},_simplifyPoints:function(){for(var t=this._parts,e=o.LineUtil,n=0,i=t.length;i>n;n++)t[n]=e.simplify(t[n],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),o.Path.prototype._updatePath.call(this))}}),o.polyline=function(t,e){return new o.Polyline(t,e)},o.PolyUtil={},o.PolyUtil.clipPolygon=function(t,e){var n,i,a,r,s,l,u,c,d,h=[1,4,2,8],p=o.LineUtil;for(i=0,u=t.length;u>i;i++)t[i]._code=p._getBitCode(t[i],e);for(r=0;4>r;r++){for(c=h[r],n=[],i=0,u=t.length,a=u-1;u>i;a=i++)s=t[i],l=t[a],s._code&c?l._code&c||(d=p._getEdgeIntersection(l,s,c,e),d._code=p._getBitCode(d,e),n.push(d)):(l._code&c&&(d=p._getEdgeIntersection(l,s,c,e),d._code=p._getBitCode(d,e),n.push(d)),n.push(s));t=n}return t},o.Polygon=o.Polyline.extend({options:{fill:!0},initialize:function(t,e){o.Polyline.prototype.initialize.call(this,t,e),this._initWithHoles(t)},_initWithHoles:function(t){var e,n,i;if(t&&o.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),e=0,n=this._holes.length;n>e;e++)i=this._holes[e]=this._convertLatLngs(this._holes[e]),i[0].equals(i[i.length-1])&&i.pop();t=this._latlngs,t.length>=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){if(o.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,e,n,i;for(t=0,n=this._holes.length;n>t;t++)for(this._holePoints[t]=[],e=0,i=this._holes[t].length;i>e;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}},setLatLngs:function(t){return t&&o.Util.isArray(t[0])&&"number"!=typeof t[0][0]?(this._initWithHoles(t),this.redraw()):o.Polyline.prototype.setLatLngs.call(this,t)},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var n=0,i=this._parts.length;i>n;n++){var a=o.PolyUtil.clipPolygon(this._parts[n],this._map._pathViewport);a.length&&e.push(a)}this._parts=e}},_getPathPartStr:function(t){var e=o.Polyline.prototype._getPathPartStr.call(this,t);return e+(o.Browser.svg?"z":"x")}}),o.polygon=function(t,e){return new o.Polygon(t,e)},function(){function t(t){return o.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var n=0,i=e.length;for(this.eachLayer(function(t){i>n?t.setLatLngs(e[n++]):this.removeLayer(t)},this);i>n;)this.addLayer(new t(e[n++],this._options));return this},getLatLngs:function(){var t=[];return this.eachLayer(function(e){t.push(e.getLatLngs())}),t}})}o.MultiPolyline=t(o.Polyline),o.MultiPolygon=t(o.Polygon),o.multiPolyline=function(t,e){return new o.MultiPolyline(t,e)},o.multiPolygon=function(t,e){return new o.MultiPolygon(t,e)}}(),o.Rectangle=o.Polygon.extend({initialize:function(t,e){o.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=o.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),o.rectangle=function(t,e){return new o.Rectangle(t,e)},o.Circle=o.Path.extend({initialize:function(t,e,n){o.Path.prototype.initialize.call(this,n),this._latlng=o.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=o.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,n=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-n.x,1)},getBounds:function(){var t=this._getLngRadius(),e=this._mRadius/40075017*360,n=this._latlng;return new o.LatLngBounds([n.lat-e,n.lng-t],[n.lat+e,n.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":o.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(o.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,n=this._point;return n.x-e>t.max.x||n.y-e>t.max.y||n.x+e<t.min.x||n.y+e<t.min.y}}),o.circle=function(t,e,n){return new o.Circle(t,e,n)},o.CircleMarker=o.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){o.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){o.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(t){return o.Circle.prototype.setLatLng.call(this,t),this._popup&&this._popup._isOpen&&this._popup.setLatLng(t),this},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius}}),o.circleMarker=function(t,e){return new o.CircleMarker(t,e)},o.Polyline.include(o.Path.CANVAS?{_containsPoint:function(t,e){var n,i,a,r,s,l,u,c=this.options.weight/2;for(o.Browser.touch&&(c+=10),n=0,r=this._parts.length;r>n;n++)for(u=this._parts[n],i=0,s=u.length,a=s-1;s>i;a=i++)if((e||0!==i)&&(l=o.LineUtil.pointToSegmentDistance(t,u[a],u[i]),c>=l))return!0;return!1}}:{}),o.Polygon.include(o.Path.CANVAS?{_containsPoint:function(t){var e,n,i,a,r,s,l,u,c=!1;if(o.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(a=0,l=this._parts.length;l>a;a++)for(e=this._parts[a],r=0,u=e.length,s=u-1;u>r;s=r++)n=e[r],i=e[s],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c}}:{}),o.Circle.include(o.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,n=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+n}}:{}),o.CircleMarker.include(o.Path.CANVAS?{_updateStyle:function(){o.Path.prototype._updateStyle.call(this)}}:{}),o.GeoJSON=o.FeatureGroup.extend({initialize:function(t,e){o.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,a=o.Util.isArray(t)?t:t.features;if(a){for(e=0,n=a.length;n>e;e++)i=a[e],(i.geometries||i.geometry||i.features||i.coordinates)&&this.addData(a[e]);return this}var r=this.options;if(!r.filter||r.filter(t)){var s=o.GeoJSON.geometryToLayer(t,r.pointToLayer,r.coordsToLatLng,r);return s.feature=o.GeoJSON.asFeature(t),s.defaultOptions=s.options,this.resetStyle(s),r.onEachFeature&&r.onEachFeature(t,s),this.addLayer(s)}},resetStyle:function(t){var e=this.options.style;e&&(o.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),o.extend(o.GeoJSON,{geometryToLayer:function(t,e,n,i){var a,r,s,l,u="Feature"===t.type?t.geometry:t,c=u.coordinates,d=[];switch(n=n||this.coordsToLatLng,u.type){case"Point":return a=n(c),e?e(t,a):new o.Marker(a);case"MultiPoint":for(s=0,l=c.length;l>s;s++)a=n(c[s]),d.push(e?e(t,a):new o.Marker(a));return new o.FeatureGroup(d);case"LineString":return r=this.coordsToLatLngs(c,0,n),new o.Polyline(r,i);case"Polygon":if(2===c.length&&!c[1].length)throw new Error("Invalid GeoJSON object.");return r=this.coordsToLatLngs(c,1,n),new o.Polygon(r,i);case"MultiLineString":return r=this.coordsToLatLngs(c,1,n),new o.MultiPolyline(r,i);case"MultiPolygon":return r=this.coordsToLatLngs(c,2,n),new o.MultiPolygon(r,i);case"GeometryCollection":for(s=0,l=u.geometries.length;l>s;s++)d.push(this.geometryToLayer({geometry:u.geometries[s],type:"Feature",properties:t.properties},e,n,i));return new o.FeatureGroup(d);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new o.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,n){var i,o,a,r=[];for(o=0,a=t.length;a>o;o++)i=e?this.coordsToLatLngs(t[o],e-1,n):(n||this.coordsToLatLng)(t[o]),r.push(i);return r},latLngToCoords:function(t){var e=[t.lng,t.lat];return t.alt!==n&&e.push(t.alt),e},latLngsToCoords:function(t){for(var e=[],n=0,i=t.length;i>n;n++)e.push(o.GeoJSON.latLngToCoords(t[n]));return e},getFeature:function(t,e){return t.feature?o.extend({},t.feature,{geometry:e}):o.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var r={toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"Point",coordinates:o.GeoJSON.latLngToCoords(this.getLatLng())})}};o.Marker.include(r),o.Circle.include(r),o.CircleMarker.include(r),o.Polyline.include({toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"LineString",coordinates:o.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),o.Polygon.include({toGeoJSON:function(){var t,e,n,i=[o.GeoJSON.latLngsToCoords(this.getLatLngs())];if(i[0].push(i[0][0]),this._holes)for(t=0,e=this._holes.length;e>t;t++)n=o.GeoJSON.latLngsToCoords(this._holes[t]),n.push(n[0]),i.push(n);return o.GeoJSON.getFeature(this,{type:"Polygon",coordinates:i})}}),function(){function t(t){return function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),o.GeoJSON.getFeature(this,{type:t,coordinates:e})}}o.MultiPolyline.include({toGeoJSON:t("MultiLineString")}),o.MultiPolygon.include({toGeoJSON:t("MultiPolygon")}),o.LayerGroup.include({toGeoJSON:function(){var e,n=this.feature&&this.feature.geometry,i=[];if(n&&"MultiPoint"===n.type)return t("MultiPoint").call(this);var a=n&&"GeometryCollection"===n.type;return this.eachLayer(function(t){t.toGeoJSON&&(e=t.toGeoJSON(),i.push(a?e.geometry:o.GeoJSON.asFeature(e)))}),a?o.GeoJSON.getFeature(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}})}(),o.geoJson=function(t,e){return new o.GeoJSON(t,e)},o.DomEvent={addListener:function(t,e,n,i){var a,r,s,l=o.stamp(n),u="_leaflet_"+e+l;return t[u]?this:(a=function(e){return n.call(i||t,e||o.DomEvent._getEvent())},o.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,a,l):(o.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,a,l),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",a,!1),t.addEventListener(e,a,!1)):"mouseenter"===e||"mouseleave"===e?(r=a,s="mouseenter"===e?"mouseover":"mouseout",a=function(e){return o.DomEvent._checkMouse(t,e)?r(e):void 0},t.addEventListener(s,a,!1)):"click"===e&&o.Browser.android?(r=a,a=function(t){return o.DomEvent._filterClick(t,r)},t.addEventListener(e,a,!1)):t.addEventListener(e,a,!1):"attachEvent"in t&&t.attachEvent("on"+e,a),t[u]=a,this))},removeListener:function(t,e,n){var i=o.stamp(n),a="_leaflet_"+e+i,r=t[a];return r?(o.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,i):o.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",r,!1),t.removeEventListener(e,r,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",r,!1):t.removeEventListener(e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[a]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,o.DomEvent._skipped(t),this},disableScrollPropagation:function(t){var e=o.DomEvent.stopPropagation;return o.DomEvent.on(t,"mousewheel",e).on(t,"MozMousePixelScroll",e)},disableClickPropagation:function(t){for(var e=o.DomEvent.stopPropagation,n=o.Draggable.START.length-1;n>=0;n--)o.DomEvent.on(t,o.Draggable.START[n],e);return o.DomEvent.on(t,"click",o.DomEvent._fakeStop).on(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return o.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new o.Point(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new o.Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_skipEvents:{},_fakeStop:function(t){o.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_checkMouse:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(i){return!1}return n!==t},_getEvent:function(){var e=t.event;if(!e)for(var n=arguments.callee.caller;n&&(e=n.arguments[0],!e||t.Event!==e.constructor);)n=n.caller;return e},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent.timeStamp,i=o.DomEvent._lastClick&&n-o.DomEvent._lastClick;return i&&i>100&&500>i||t.target._simulatedClick&&!t._simulated?void o.DomEvent.stop(t):(o.DomEvent._lastClick=n,e(t))}},o.DomEvent.on=o.DomEvent.addListener,o.DomEvent.off=o.DomEvent.removeListener,o.Draggable=o.Class.extend({includes:o.Mixin.Events,statics:{START:o.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.on(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.off(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(this._moved=!1,!(t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(o.DomEvent.stopPropagation(t),o.Draggable._disabled||(o.DomUtil.disableImageDrag(),o.DomUtil.disableTextSelection(),this._moving)))){var n=t.touches?t.touches[0]:t;this._startPoint=new o.Point(n.clientX,n.clientY),this._startPos=this._newPos=o.DomUtil.getPosition(this._element),o.DomEvent.on(e,o.Draggable.MOVE[t.type],this._onMove,this).on(e,o.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var n=t.touches&&1===t.touches.length?t.touches[0]:t,i=new o.Point(n.clientX,n.clientY),a=i.subtract(this._startPoint);(a.x||a.y)&&(o.Browser.touch&&Math.abs(a.x)+Math.abs(a.y)<3||(o.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=o.DomUtil.getPosition(this._element).subtract(a),o.DomUtil.addClass(e.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,o.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(a),this._moving=!0,o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),o.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){o.DomUtil.removeClass(e.body,"leaflet-dragging"),this._lastTarget&&(o.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in o.Draggable.MOVE)o.DomEvent.off(e,o.Draggable.MOVE[t],this._onMove).off(e,o.Draggable.END[t],this._onUp);o.DomUtil.enableImageDrag(),o.DomUtil.enableTextSelection(),this._moved&&this._moving&&(o.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),o.Handler=o.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),o.Map.mergeOptions({dragging:!0,inertia:!o.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:o.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),o.Map.Drag=o.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new o.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this),t.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-e+n)%t+e-n,a=(i+e+n)%t-e-n,r=Math.abs(o+n)<Math.abs(a+n)?o:a;this._draggable._newPos.x=r},_onDragEnd:function(t){var e=this._map,n=e.options,i=+new Date-this._lastTime,a=!n.inertia||i>n.inertiaThreshold||!this._positions[0];if(e.fire("dragend",t),a)e.fire("moveend");else{var r=this._lastPos.subtract(this._positions[0]),s=(this._lastTime+i-this._times[0])/1e3,l=n.easeLinearity,u=r.multiplyBy(l/s),c=u.distanceTo([0,0]),d=Math.min(n.inertiaMaxSpeed,c),h=u.multiplyBy(d/c),p=d/(n.inertiaDeceleration*l),f=h.multiplyBy(-p/2).round();f.x&&f.y?(f=e._limitOffset(f,e.options.maxBounds),o.Util.requestAnimFrame(function(){e.panBy(f,{duration:p,easeLinearity:l,noMoveStart:!0})})):e.fire("moveend")}}}),o.Map.addInitHook("addHandler","dragging",o.Map.Drag),o.Map.mergeOptions({doubleClickZoom:!0}),o.Map.DoubleClickZoom=o.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom()+(t.originalEvent.shiftKey?-1:1);"center"===e.options.doubleClickZoom?e.setZoom(n):e.setZoomAround(t.containerPoint,n)}}),o.Map.addInitHook("addHandler","doubleClickZoom",o.Map.DoubleClickZoom),o.Map.mergeOptions({scrollWheelZoom:!0}),o.Map.ScrollWheelZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),o.DomEvent.on(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault),this._delta=0},removeHooks:function(){o.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),o.DomEvent.off(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=o.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o.bind(this._performZoom,this),n),o.DomEvent.preventDefault(t),o.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,n=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(n+e)-n,this._delta=0,this._startTime=null,e&&("center"===t.options.scrollWheelZoom?t.setZoom(n+e):t.setZoomAround(this._lastMousePos,n+e))}}),o.Map.addInitHook("addHandler","scrollWheelZoom",o.Map.ScrollWheelZoom),o.extend(o.DomEvent,{_touchstart:o.Browser.msPointer?"MSPointerDown":o.Browser.pointer?"pointerdown":"touchstart",_touchend:o.Browser.msPointer?"MSPointerUp":o.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,n,i){function a(t){var e;if(o.Browser.pointer?(f.push(t.pointerId),e=f.length):e=t.touches.length,!(e>1)){var n=Date.now(),i=n-(s||n);l=t.touches?t.touches[0]:t,u=i>0&&c>=i,s=n}}function r(t){if(o.Browser.pointer){var e=f.indexOf(t.pointerId);if(-1===e)return;f.splice(e,1)}if(u){if(o.Browser.pointer){var i,a={};for(var r in l)i=l[r],a[r]="function"==typeof i?i.bind(l):i;l=a}l.type="dblclick",n(l),s=null
}}var s,l,u=!1,c=250,d="_leaflet_",h=this._touchstart,p=this._touchend,f=[];t[d+h+i]=a,t[d+p+i]=r;var m=o.Browser.pointer?e.documentElement:t;return t.addEventListener(h,a,!1),m.addEventListener(p,r,!1),o.Browser.pointer&&m.addEventListener(o.DomEvent.POINTER_CANCEL,r,!1),this},removeDoubleTapListener:function(t,n){var i="_leaflet_";return t.removeEventListener(this._touchstart,t[i+this._touchstart+n],!1),(o.Browser.pointer?e.documentElement:t).removeEventListener(this._touchend,t[i+this._touchend+n],!1),o.Browser.pointer&&e.documentElement.removeEventListener(o.DomEvent.POINTER_CANCEL,t[i+this._touchend+n],!1),this}}),o.extend(o.DomEvent,{POINTER_DOWN:o.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:o.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:o.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:o.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(t,e,n,i){switch(e){case"touchstart":return this.addPointerListenerStart(t,e,n,i);case"touchend":return this.addPointerListenerEnd(t,e,n,i);case"touchmove":return this.addPointerListenerMove(t,e,n,i);default:throw"Unknown touch event type"}},addPointerListenerStart:function(t,n,i,a){var r="_leaflet_",s=this._pointers,l=function(t){o.DomEvent.preventDefault(t);for(var e=!1,n=0;n<s.length;n++)if(s[n].pointerId===t.pointerId){e=!0;break}e||s.push(t),t.touches=s.slice(),t.changedTouches=[t],i(t)};if(t[r+"touchstart"+a]=l,t.addEventListener(this.POINTER_DOWN,l,!1),!this._pointerDocumentListener){var u=function(t){for(var e=0;e<s.length;e++)if(s[e].pointerId===t.pointerId){s.splice(e,1);break}};e.documentElement.addEventListener(this.POINTER_UP,u,!1),e.documentElement.addEventListener(this.POINTER_CANCEL,u,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(t,e,n,i){function o(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons){for(var e=0;e<r.length;e++)if(r[e].pointerId===t.pointerId){r[e]=t;break}t.touches=r.slice(),t.changedTouches=[t],n(t)}}var a="_leaflet_",r=this._pointers;return t[a+"touchmove"+i]=o,t.addEventListener(this.POINTER_MOVE,o,!1),this},addPointerListenerEnd:function(t,e,n,i){var o="_leaflet_",a=this._pointers,r=function(t){for(var e=0;e<a.length;e++)if(a[e].pointerId===t.pointerId){a.splice(e,1);break}t.touches=a.slice(),t.changedTouches=[t],n(t)};return t[o+"touchend"+i]=r,t.addEventListener(this.POINTER_UP,r,!1),t.addEventListener(this.POINTER_CANCEL,r,!1),this},removePointerListener:function(t,e,n){var i="_leaflet_",o=t[i+e+n];switch(e){case"touchstart":t.removeEventListener(this.POINTER_DOWN,o,!1);break;case"touchmove":t.removeEventListener(this.POINTER_MOVE,o,!1);break;case"touchend":t.removeEventListener(this.POINTER_UP,o,!1),t.removeEventListener(this.POINTER_CANCEL,o,!1)}return this}}),o.Map.mergeOptions({touchZoom:o.Browser.touch&&!o.Browser.android23,bounceAtZoomLimits:!0}),o.Map.TouchZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var n=this._map;if(t.touches&&2===t.touches.length&&!n._animatingZoom&&!this._zooming){var i=n.mouseEventToLayerPoint(t.touches[0]),a=n.mouseEventToLayerPoint(t.touches[1]),r=n._getCenterLayerPoint();this._startCenter=i.add(a)._divideBy(2),this._startDist=i.distanceTo(a),this._moved=!1,this._zooming=!0,this._centerOffset=r.subtract(this._startCenter),n._panAnim&&n._panAnim.stop(),o.DomEvent.on(e,"touchmove",this._onTouchMove,this).on(e,"touchend",this._onTouchEnd,this),o.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var n=e.mouseEventToLayerPoint(t.touches[0]),i=e.mouseEventToLayerPoint(t.touches[1]);this._scale=n.distanceTo(i)/this._startDist,this._delta=n._add(i)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(e.options.bounceAtZoomLimits||!(e.getZoom()===e.getMinZoom()&&this._scale<1||e.getZoom()===e.getMaxZoom()&&this._scale>1))&&(this._moved||(o.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),o.DomEvent.preventDefault(t))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),n=t.layerPointToLatLng(e),i=t.getScaleZoom(this._scale);t._animateZoom(n,i,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var t=this._map;this._zooming=!1,o.DomUtil.removeClass(t._mapPane,"leaflet-touching"),o.Util.cancelAnimFrame(this._animRequest),o.DomEvent.off(e,"touchmove",this._onTouchMove).off(e,"touchend",this._onTouchEnd);var n=this._getScaleOrigin(),i=t.layerPointToLatLng(n),a=t.getZoom(),r=t.getScaleZoom(this._scale)-a,s=r>0?Math.ceil(r):Math.floor(r),l=t._limitZoom(a+s),u=t.getZoomScale(l)/this._scale;t._animateZoom(i,l,n,u)},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),o.Map.addInitHook("addHandler","touchZoom",o.Map.TouchZoom),o.Map.mergeOptions({tap:!0,tapTolerance:15}),o.Map.Tap=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(o.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var n=t.touches[0],i=n.target;this._startPos=this._newPos=new o.Point(n.clientX,n.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&o.DomUtil.addClass(i,"leaflet-active"),this._holdTimeout=setTimeout(o.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",n))},this),1e3),o.DomEvent.on(e,"touchmove",this._onMove,this).on(e,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),o.DomEvent.off(e,"touchmove",this._onMove,this).off(e,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var n=t.changedTouches[0],i=n.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&o.DomUtil.removeClass(i,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",n)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new o.Point(e.clientX,e.clientY)},_simulateEvent:function(n,i){var o=e.createEvent("MouseEvents");o._simulated=!0,i.target._simulatedClick=!0,o.initMouseEvent(n,!0,!0,t,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(o)}}),o.Browser.touch&&!o.Browser.pointer&&o.Map.addInitHook("addHandler","tap",o.Map.Tap),o.Map.mergeOptions({boxZoom:!0}),o.Map.BoxZoom=o.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._moved=!1},addHooks:function(){o.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){o.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(t){return this._moved=!1,!t.shiftKey||1!==t.which&&1!==t.button?!1:(o.DomUtil.disableTextSelection(),o.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),void o.DomEvent.on(e,"mousemove",this._onMouseMove,this).on(e,"mouseup",this._onMouseUp,this).on(e,"keydown",this._onKeyDown,this))},_onMouseMove:function(t){this._moved||(this._box=o.DomUtil.create("div","leaflet-zoom-box",this._pane),o.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var e=this._startLayerPoint,n=this._box,i=this._map.mouseEventToLayerPoint(t),a=i.subtract(e),r=new o.Point(Math.min(i.x,e.x),Math.min(i.y,e.y));o.DomUtil.setPosition(n,r),this._moved=!0,n.style.width=Math.max(0,Math.abs(a.x)-4)+"px",n.style.height=Math.max(0,Math.abs(a.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),o.DomUtil.enableTextSelection(),o.DomUtil.enableImageDrag(),o.DomEvent.off(e,"mousemove",this._onMouseMove).off(e,"mouseup",this._onMouseUp).off(e,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,n=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(n)){var i=new o.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(n));e.fitBounds(i),e.fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),o.Map.addInitHook("addHandler","boxZoom",o.Map.BoxZoom),o.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),o.Map.Keyboard=o.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),o.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;o.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var n=e.body,i=e.documentElement,o=n.scrollTop||i.scrollTop,a=n.scrollLeft||i.scrollLeft;this._map._container.focus(),t.scrollTo(a,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,n,i=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;n>e;e++)i[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;n>e;e++)i[o.right[e]]=[t,0];for(e=0,n=o.down.length;n>e;e++)i[o.down[e]]=[0,t];for(e=0,n=o.up.length;n>e;e++)i[o.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,n,i=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;n>e;e++)i[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;n>e;e++)i[o.zoomOut[e]]=-t},_addHooks:function(){o.DomEvent.on(e,"keydown",this._onKeyDown,this)},_removeHooks:function(){o.DomEvent.off(e,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,n=this._map;if(e in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;n.panBy(this._panKeys[e]),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else{if(!(e in this._zoomKeys))return;n.setZoom(n.getZoom()+this._zoomKeys[e])}o.DomEvent.stop(t)}}),o.Map.addInitHook("addHandler","keyboard",o.Map.Keyboard),o.Handler.MarkerDrag=o.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new o.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),o.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),o.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,n=o.DomUtil.getPosition(t._icon),i=t._map.layerPointToLatLng(n);e&&o.DomUtil.setPosition(e,n),t._latlng=i,t.fire("move",{latlng:i}).fire("drag")},_onDragEnd:function(t){this._marker.fire("moveend").fire("dragend",t)}}),o.Control=o.Class.extend({options:{position:"topright"},initialize:function(t){o.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return o.DomUtil.addClass(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},removeFrom:function(t){var e=this.getPosition(),n=t._controlCorners[e];return n.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),o.control=function(t){return new o.Control(t)},o.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,a){var r=n+t+" "+n+a;e[t+a]=o.DomUtil.create("div",r,i)}var e=this._controlCorners={},n="leaflet-",i=this._controlContainer=o.DomUtil.create("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),o.Control.Zoom=o.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=o.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,e+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,e+"-out",n,this._zoomOut,this),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,n,i,a,r){var s=o.DomUtil.create("a",n,i);s.innerHTML=t,s.href="#",s.title=e;var l=o.DomEvent.stopPropagation;return o.DomEvent.on(s,"click",l).on(s,"mousedown",l).on(s,"dblclick",l).on(s,"click",o.DomEvent.preventDefault).on(s,"click",a,r).on(s,"click",this._refocusOnMap,r),s},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";o.DomUtil.removeClass(this._zoomInButton,e),o.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&o.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&o.DomUtil.addClass(this._zoomInButton,e)}}),o.Map.mergeOptions({zoomControl:!0}),o.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new o.Control.Zoom,this.addControl(this.zoomControl))}),o.control.zoom=function(t){return new o.Control.Zoom(t)},o.Control.Attribution=o.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){o.setOptions(this,t),this._attributions={}},onAdd:function(t){this._container=o.DomUtil.create("div","leaflet-control-attribution"),o.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):void 0},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):void 0},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),o.Map.mergeOptions({attributionControl:!0}),o.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new o.Control.Attribution).addTo(this))}),o.control.attribution=function(t){return new o.Control.Attribution(t)},o.Control.Scale=o.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",n=o.DomUtil.create("div",e),i=this.options;return this._addScales(i,e,n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=o.DomUtil.create("div",e+"-line",n)),t.imperial&&(this._iScale=o.DomUtil.create("div",e+"-line",n))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,n=6378137*Math.PI*Math.cos(e*Math.PI/180),i=n*(t.getNorthEast().lng-t.getSouthWest().lng)/180,o=this._map.getSize(),a=this.options,r=0;o.x>0&&(r=i*(a.maxWidth/o.x)),this._updateScales(a,r)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=1e3>e?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,n,i,o=3.2808399*t,a=this._iScale;o>5280?(e=o/5280,n=this._getRoundNum(e),a.style.width=this._getScaleWidth(n/e)+"px",a.innerHTML=n+" mi"):(i=this._getRoundNum(o),a.style.width=this._getScaleWidth(i/o)+"px",a.innerHTML=i+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),o.control.scale=function(t){return new o.Control.Scale(t)},o.Control.Layers=o.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,n){o.setOptions(this,n),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var i in t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=o.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=o.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),o.Browser.touch?o.DomEvent.on(e,"click",o.DomEvent.stopPropagation):o.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);var n=this._form=o.DomUtil.create("form",t+"-list");if(this.options.collapsed){o.Browser.android||o.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var i=this._layersLink=o.DomUtil.create("a",t+"-toggle",e);i.href="#",i.title="Layers",o.Browser.touch?o.DomEvent.on(i,"click",o.DomEvent.stop).on(i,"click",this._expand,this):o.DomEvent.on(i,"focus",this._expand,this),o.DomEvent.on(n,"click",function(){setTimeout(o.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=o.DomUtil.create("div",t+"-base",n),this._separator=o.DomUtil.create("div",t+"-separator",n),this._overlaysList=o.DomUtil.create("div",t+"-overlays",n),e.appendChild(n)},_addLayer:function(t,e,n){var i=o.stamp(t);this._layers[i]={layer:t,name:e,overlay:n},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t,e,n=!1,i=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),i=i||e.overlay,n=n||!e.overlay;this._separator.style.display=i&&n?"":"none"}},_onLayerChange:function(t){var e=this._layers[o.stamp(t.layer)];if(e){this._handlingClick||this._update();var n=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)}},_createRadioElement:function(t,n){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';n&&(i+=' checked="checked"'),i+="/>";var o=e.createElement("div");return o.innerHTML=i,o.firstChild},_addItem:function(t){var n,i=e.createElement("label"),a=this._map.hasLayer(t.layer);t.overlay?(n=e.createElement("input"),n.type="checkbox",n.className="leaflet-control-layers-selector",n.defaultChecked=a):n=this._createRadioElement("leaflet-base-layers",a),n.layerId=o.stamp(t.layer),o.DomEvent.on(n,"click",this._onInputClick,this);var r=e.createElement("span");r.innerHTML=" "+t.name,i.appendChild(n),i.appendChild(r);var s=t.overlay?this._overlaysList:this._baseLayersList;return s.appendChild(i),i},_onInputClick:function(){var t,e,n,i=this._form.getElementsByTagName("input"),o=i.length;for(this._handlingClick=!0,t=0;o>t;t++)e=i[t],n=this._layers[e.layerId],e.checked&&!this._map.hasLayer(n.layer)?this._map.addLayer(n.layer):!e.checked&&this._map.hasLayer(n.layer)&&this._map.removeLayer(n.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){o.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),o.control.layers=function(t,e,n){return new o.Control.Layers(t,e,n)},o.PosAnimation=o.Class.extend({includes:o.Mixin.Events,run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[o.DomUtil.TRANSITION]="all "+(n||.25)+"s cubic-bezier(0,0,"+(i||.5)+",1)",o.DomEvent.on(t,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),o.DomUtil.setPosition(t,e),o.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(o.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(o.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),o.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var t=this._getPos();return t?(this._el._leaflet_pos=t,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var e,n,i,a=this._el,r=t.getComputedStyle(a);if(o.Browser.any3d){if(i=r[o.DomUtil.TRANSFORM].match(this._transformRe),!i)return;e=parseFloat(i[1]),n=parseFloat(i[2])}else e=parseFloat(r.left),n=parseFloat(r.top);return new o.Point(e,n,!0)},_onTransitionEnd:function(){o.DomEvent.off(this._el,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[o.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),o.Map.include({setView:function(t,e,i){if(e=e===n?this._zoom:this._limitZoom(e),t=this._limitCenter(o.latLng(t),e,this.options.maxBounds),i=i||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==n&&(i.zoom=o.extend({animate:i.animate},i.zoom),i.pan=o.extend({animate:i.animate},i.pan));var a=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(a)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e){if(t=o.point(t).round(),e=e||{},!t.x&&!t.y)return this;if(this._panAnim||(this._panAnim=new o.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){o.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){o.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return(e&&e.animate)===!0||this.getSize().contains(n)?(this.panBy(n,e),!0):!1}}),o.PosAnimation=o.DomUtil.TRANSITION?o.PosAnimation:o.PosAnimation.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=o.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=o.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;e>t?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));o.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){o.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),o.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),o.DomUtil.TRANSITION&&o.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&o.DomUtil.TRANSITION&&o.Browser.any3d&&!o.Browser.android23&&!o.Browser.mobileOpera,this._zoomAnimated&&o.DomEvent.on(this._mapPane,o.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),o.Map.include(o.DomUtil.TRANSITION?{_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i),a=this._getCenterLayerPoint()._add(o);return n.animate===!0||this.getSize().contains(o)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,a,i,null,!0),!0):!1},_animateZoom:function(t,e,n,i,a,r,s){s||(this._animatingZoom=!0),o.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,o.Draggable&&(o.Draggable._disabled=!0),o.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:t,zoom:e,origin:n,scale:i,delta:a,backwards:r})},this)},_onZoomTransitionEnd:function(){this._animatingZoom=!1,o.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),o.Draggable&&(o.Draggable._disabled=!1)}}:{}),o.TileLayer.include({_animateZoom:function(t){this._animating||(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,n=o.DomUtil.TRANSFORM,i=t.delta?o.DomUtil.getTranslateString(t.delta):e.style[n],a=o.DomUtil.getScaleString(t.scale,t.origin);e.style[n]=t.backwards?a+" "+i:i+" "+a},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.parentNode.appendChild(t),o.Util.falseFn(e.offsetWidth),this._animating=!1},_clearBgBuffer:function(){var t=this._map;!t||t._animatingZoom||t.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[o.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,n=this._getLoadedTilesPercentage(e),i=this._getLoadedTilesPercentage(t);return e&&n>.5&&.5>i?(t.style.visibility="hidden",void this._stopLoadingImages(t)):(e.style.visibility="hidden",e.style[o.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(t){var e,n,i=t.getElementsByTagName("img"),o=0;for(e=0,n=i.length;n>e;e++)i[e].complete&&o++;return o/n},_stopLoadingImages:function(t){var e,n,i,a=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,n=a.length;n>e;e++)i=a[e],i.complete||(i.onload=o.Util.falseFn,i.onerror=o.Util.falseFn,i.src=o.Util.emptyImageUrl,i.parentNode.removeChild(i))}}),o.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=o.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o.bind(this._handleGeolocationResponse,this),n=o.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new o.LatLng(e,n),a=180*t.coords.accuracy/40075017,r=a/Math.cos(o.LatLng.DEG_TO_RAD*e),s=o.latLngBounds([e-a,n-r],[e+a,n+r]),l=this._locateOptions;if(l.setView){var u=Math.min(this.getBoundsZoom(s),l.maxZoom);this.setView(i,u)}var c={latlng:i,bounds:s,timestamp:t.timestamp};for(var d in t.coords)"number"==typeof t.coords[d]&&(c[d]=t.coords[d]);this.fire("locationfound",c)}})}(window,document),function(){var t={};L.TileLayer.Provider=L.TileLayer.extend({initialize:function(e){var n=e.split("."),i=n[0],o=n[1];if(!t[i])throw"No such provider ("+i+")";var a={url:t[i].url,options:t[i].options};if(o&&"variants"in t[i]){if(!(o in t[i].variants))throw"No such name in provider ("+o+")";var r=t[i].variants[o];a={url:r.url||a.url,options:L.Util.extend({},a.options,r.options)}}var s=a.options.attribution;-1!=s.indexOf("{attribution.")&&(a.options.attribution=s.replace(/\{attribution.(\w*)\}/,function(e,n){return t[n].options.attribution})),L.TileLayer.prototype.initialize.call(this,a.url,a.options)}}),t={OpenStreetMap:{url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'},variants:{Mapnik:{},BlackAndWhite:{url:"http://{s}.www.toolserver.org/tiles/bw-mapnik/{z}/{x}/{y}.png"},DE:{url:"http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png"}}},OpenCycleMap:{url:"http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="http://www.opencyclemap.org">OpenCycleMap</a>, <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'}},Thunderforest:{url:"http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png",options:{attribution:"{attribution.OpenCycleMap}"},variants:{OpenCycleMap:{},Transport:{url:"http://{s}.tile2.opencyclemap.org/transport/{z}/{x}/{y}.png"},Landscape:{url:"http://{s}.tile3.opencyclemap.org/landscape/{z}/{x}/{y}.png"}}},MapQuestOpen:{url:"http://otile{s}.mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png",options:{attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"1234"},variants:{OSM:{},Aerial:{url:"http://oatile{s}.mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.jpg",options:{attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency'}}}},MapBox:{url:"http://{s}.tiles.mapbox.com/v3/mapbox.mapbox-simple/{z}/{x}/{y}.png",options:{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd"},variants:{Simple:{},Streets:{url:"http://{s}.tiles.mapbox.com/v3/mapbox.mapbox-streets/{z}/{x}/{y}.png"},Light:{url:"http://{s}.tiles.mapbox.com/v3/mapbox.mapbox-light/{z}/{x}/{y}.png"},Lacquer:{url:"http://{s}.tiles.mapbox.com/v3/mapbox.mapbox-lacquer/{z}/{x}/{y}.png"},Warden:{url:"http://{s}.tiles.mapbox.com/v3/mapbox.mapbox-warden/{z}/{x}/{y}.png"}}},Stamen:{url:"http://{s}.tile.stamen.com/toner/{z}/{x}/{y}.png",options:{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd",minZoom:0,maxZoom:20},variants:{Toner:{},TonerBackground:{url:"http://{s}.tile.stamen.com/toner-background/{z}/{x}/{y}.png"},TonerHybrid:{url:"http://{s}.tile.stamen.com/toner-hybrid/{z}/{x}/{y}.png"},TonerLines:{url:"http://{s}.tile.stamen.com/toner-lines/{z}/{x}/{y}.png"},TonerLabels:{url:"http://{s}.tile.stamen.com/toner-labels/{z}/{x}/{y}.png"},TonerLite:{url:"http://{s}.tile.stamen.com/toner-lite/{z}/{x}/{y}.png"},Terrain:{url:"http://{s}.tile.stamen.com/terrain/{z}/{x}/{y}.png",options:{minZoom:4,maxZoom:18}},Watercolor:{url:"http://{s}.tile.stamen.com/watercolor/{z}/{x}/{y}.png",options:{minZoom:3,maxZoom:16}}}},Esri:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{},DeLorme:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/Specialty/DeLorme_World_Base_Map/MapServer/tile/{z}/{y}/{x}",options:{maxZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: \xa92012 DeLorme"}},WorldTopoMap:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},OceanBasemap:{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer/tile/{z}/{y}/{x}",options:{maxZoom:11,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},NatGeoWorldMap:{url:"http://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}}}}}
}(),L.TileLayer.provider=function(t){return new L.TileLayer.Provider(t)},function(t,e){L.drawVersion="0.2.4-dev",L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes.",text:"Save"},cancel:{title:"Cancel editing, discards all changes.",text:"Cancel"}},buttons:{edit:"Edit layers.",editDisabled:"No layers to edit.",remove:"Delete layers.",removeDisabled:"No layers to delete."}},handlers:{edit:{tooltip:{text:"Drag handles, or marker to edit feature.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove"}}}}},L.Draw={},L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(t,e){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.setOptions(this,e)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:drawstart",{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire("draw:drawstop",{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(L.DomUtil.disableTextSelection(),t.getContainer().focus(),this._tooltip=new L.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire("draw:created",{layer:t,layerType:this.type})},_cancelDrawing:function(t){27===t.keyCode&&this.disable()}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,showLength:!0,zIndexOffset:2e3},initialize:function(t,e){this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mousedown",this._onMouseDown,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this).on("mouseup",this._onMouseUp,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseup",this._onMouseUp,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mousemove",this._onMouseMove,this).off("zoomend",this._onZoomEnd,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var t=this._markers.pop(),e=this._poly,n=this._poly.spliceLatLngs(e.getLatLngs().length-1,1)[0];this._markerGroup.removeLayer(t),e.getLatLngs().length<2&&this._map.removeLayer(e),this._vertexChanged(n,!1)}},addVertex:function(t){var e=this._markers.length;return e>0&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t)?void this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t)),this._poly.addLatLng(t),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),void this._vertexChanged(t,!0))},_finishShape:function(){var t=this._poly.newLatLngIntersects(this._poly.getLatLngs()[0],!0);return!this.options.allowIntersection&&t||!this._shapeIsValid()?void this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),void(this.options.repeatMode&&this.enable()))},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._updateGuide()},_onMouseMove:function(t){var e=t.layerPoint,n=t.latlng;this._currentLatLng=n,this._updateTooltip(n),this._updateGuide(e),this._mouseMarker.setLatLng(n),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._updateFinishHandler(),this._updateRunningMeasure(t,e),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(t){var e=t.originalEvent;this._mouseDownOrigin=L.point(e.clientX,e.clientY)},_onMouseUp:function(e){if(this._mouseDownOrigin){var n=L.point(e.originalEvent.clientX,e.originalEvent.clientY).distanceTo(this._mouseDownOrigin);Math.abs(n)<9*(t.devicePixelRatio||1)&&this.addVertex(e.latlng)}this._mouseDownOrigin=null},_updateFinishHandler:function(){var t=this._markers.length;t>1&&this._markers[t-1].on("click",this._finishShape,this),t>2&&this._markers[t-2].off("click",this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){var e=this._markers.length;e>0&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var n,i,o,a=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))),r=this.options.guidelineDistance,s=this.options.maxGuideLineLength,l=a>s?a-s:r;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));a>l;l+=this.options.guidelineDistance)n=l/a,i={x:Math.floor(t.x*(1-n)+n*e.x),y:Math.floor(t.y*(1-n)+n*e.y)},o=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),o.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(o,i)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,n=this._guidesContainer.childNodes.length;n>e;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,n=this.options.showLength;return 0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=n?this._getMeasurementString():"",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),t},_updateRunningMeasure:function(t,e){var n,i,o=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(n=o-(e?2:1),i=t.distanceTo(this._markers[n].getLatLng()),this._measurementRunningTotal+=i*(e?1:-1))},_getMeasurementString:function(){var t,e=this._currentLatLng,n=this._markers[this._markers.length-1].getLatLng();return t=this._measurementRunningTotal+e.distanceTo(n),L.GeometryUtil.readableDistance(t,this.options.metric)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(t,e){L.Draw.Polyline.prototype.initialize.call(this,t,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),t>2&&(this._markers[t-1].on("dblclick",this._finishShape,this),t>3&&this._markers[t-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t,e;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?t=L.drawLocal.draw.handlers.polygon.tooltip.cont:(t=L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._getMeasurementString()),{text:t,subtext:e}},_getMeasurementString:function(){var t=this._area;return t?L.GeometryUtil.readableArea(t,this.options.metric):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(t,e){var n;!this.options.allowIntersection&&this.options.showArea&&(n=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(n)),L.Draw.Polyline.prototype._vertexChanged.call(this,t,e)},_cleanUpShape:function(){var t=this._markers.length;t>0&&(this._markers[0].off("click",this._finishShape,this),t>2&&this._markers[t-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t,e){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this),L.DomEvent.off(e,"mouseup",this._onMouseUp,this),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(e,"mouseup",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0},initialize:function(t,e){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_getTooltipText:function(){var t,e,n,i=L.Draw.SimpleShape.prototype._getTooltipText.call(this),o=this._shape;return o&&(t=this._shape.getLatLngs(),e=L.GeometryUtil.geodesicArea(t),n=L.GeometryUtil.readableArea(e,this.options.metric)),{text:i.text,subtext:n}}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0},initialize:function(t,e){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){this._shape?this._shape.setRadius(this._startLatLng.distanceTo(t)):(this._shape=new L.Circle(this._startLatLng,this._startLatLng.distanceTo(t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_onMouseMove:function(t){var e,n=t.latlng,i=this.options.showRadius,o=this.options.metric;this._tooltip.updatePosition(n),this._isDrawing&&(this._drawShape(n),e=this._shape.getRadius().toFixed(1),this._tooltip.updateContent({text:this._endLabelText,subtext:i?L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(e,o):""}))}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.Marker.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._marker&&(this._marker.off("click",this._onClick,this),this._map.off("click",this._onClick,this).removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?(e=this._mouseMarker.getLatLng(),this._marker.setLatLng(e)):(this._marker=new L.Marker(e,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset}),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_fireCreatedEvent:function(){var t=new L.Marker(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(t,e){this._marker=t,L.setOptions(this,e)},addHooks:function(){var t=this._marker;t.dragging.enable(),t.on("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},removeHooks:function(){var t=this._marker;t.dragging.disable(),t.off("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},_onDragEnd:function(t){var e=t.target;e.edited=!0},_toggleMarkerHighlight:function(){if(this._icon){var t=this._icon;t.style.display="none",L.DomUtil.hasClass(t,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,-4)):(L.DomUtil.addClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,4)),t.style.display=""}},_offsetMarker:function(t,e){var n=parseInt(t.style.marginTop,10)-e,i=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=n+"px",t.style.marginLeft=i+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(t,e){this._poly=t,L.setOptions(this,e)},addHooks:function(){var t=this._poly;t instanceof L.Polygon||(t.options.editing.fill=!1),t.setStyle(t.options.editing),this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var t=this._poly;t.setStyle(t.options.original),t._map&&(t._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,n,i,o=this._poly._latlngs;for(t=0,n=o.length;n>t;t++)i=this._createMarker(o[t],t),i.on("click",this._onMarkerClick,this),this._markers.push(i);var a,r;for(t=0,e=n-1;n>t;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(a=this._markers[e],r=this._markers[t],this._createMiddleMarker(a,r),this._updatePrevNext(a,r))},_createMarker:function(t,e){var n=new L.Marker(t,{draggable:!0,icon:this.options.icon});return n._origLatLng=t,n._index=e,n.on("drag",this._onMarkerDrag,this),n.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(n),n},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._poly.spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("click",this._onMarkerClick,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit")},_onMarkerDrag:function(t){var e=t.target;L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),this._poly.redraw()},_onMarkerClick:function(t){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,n=t.target;this._poly._latlngs.length<e||(this._removeMarker(n),this._updatePrevNext(n._prev,n._next),n._middleLeft&&this._markerGroup.removeLayer(n._middleLeft),n._middleRight&&this._markerGroup.removeLayer(n._middleRight),n._prev&&n._next?this._createMiddleMarker(n._prev,n._next):n._prev?n._next||(n._prev._middleRight=null):n._next._middleLeft=null,this._fireEdit())},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(n){n._index>t&&(n._index+=e)})},_createMiddleMarker:function(t,e){var n,i,o,a=this._getMiddleLatLng(t,e),r=this._createMarker(a);r.setOpacity(.6),t._middleRight=e._middleLeft=r,i=function(){var i=e._index;r._index=i,r.off("click",n,this).on("click",this._onMarkerClick,this),a.lat=r.getLatLng().lat,a.lng=r.getLatLng().lng,this._poly.spliceLatLngs(i,0,a),this._markers.splice(i,0,r),r.setOpacity(1),this._updateIndexes(i,1),e._index++,this._updatePrevNext(t,r),this._updatePrevNext(r,e),this._poly.fire("editstart")},o=function(){r.off("dragstart",i,this),r.off("dragend",o,this),this._createMiddleMarker(t,r),this._createMiddleMarker(r,e)},n=function(){i.call(this),o.call(this),this._fireEdit()},r.on("click",n,this).on("dragstart",i,this).on("dragend",o,this),this._markerGroup.addLayer(r)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var n=this._poly._map,i=n.project(t.getLatLng()),o=n.project(e.getLatLng());return n.unproject(i._add(o)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"})},initialize:function(t,e){this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){var t=this._shape;t.setStyle(t.options.editing),t._map&&(this._map=t._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup))},removeHooks:function(){var t=this._shape;if(t.setStyle(t.options.original),t._map){this._unbindMarker(this._moveMarker);for(var e=0,n=this._resizeMarkers.length;n>e;e++)this._unbindMarker(this._resizeMarkers[e]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var n=new L.Marker(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(n),this._markerGroup.addLayer(n),n},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this)},_onMarkerDragStart:function(t){var e=t.target;e.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target,n=e.getLatLng();e===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw()},_onMarkerDragEnd:function(t){var e=t.target;e.setOpacity(1),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getBounds(),e=t.getCenter();this._moveMarker=this._createMarker(e,this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,n=t.length;n>e;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),n=t.target,i=n._cornerIndex;this._oppositeCorner=e[(i+2)%4],this._toggleCornerMarkers(0,i)},_onMarkerDragEnd:function(t){var e,n,i=t.target;i===this._moveMarker&&(e=this._shape.getBounds(),n=e.getCenter(),i.setLatLng(n)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,n=this._shape.getLatLngs(),i=this._shape.getBounds(),o=i.getCenter(),a=[],r=0,s=n.length;s>r;r++)e=[n[r].lat-o.lat,n[r].lng-o.lng],a.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(a),this._repositionCornerMarkers()},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter())},_getCorners:function(){var t=this._shape.getBounds(),e=t.getNorthWest(),n=t.getNorthEast(),i=t.getSouthEast(),o=t.getSouthWest();return[e,n,i,o]},_toggleCornerMarkers:function(t){for(var e=0,n=this._resizeMarkers.length;n>e;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,n=this._resizeMarkers.length;n>e;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getLatLng();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),n=this._map.project(t);return this._map.unproject([n.x+e,n.y-e])},_move:function(t){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e),this._shape.setLatLng(t)},_resize:function(t){var e=this._moveMarker.getLatLng(),n=e.distanceTo(t);this._shape.setRadius(n)}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.LatLngUtil={cloneLatLngs:function(t){for(var e=[],n=0,i=t.length;i>n;n++)e.push(this.cloneLatLng(t[n]));return e},cloneLatLng:function(t){return L.latLng(t.lat,t.lng)}},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t){var e,n,i=t.length,o=0,a=L.LatLng.DEG_TO_RAD;if(i>2){for(var r=0;i>r;r++)e=t[r],n=t[(r+1)%i],o+=(n.lng-e.lng)*a*(2+Math.sin(e.lat*a)+Math.sin(n.lat*a));o=6378137*o*6378137/2}return Math.abs(o)},readableArea:function(t,e){var n;return e?n=t>=1e4?(1e-4*t).toFixed(2)+" ha":t.toFixed(2)+" m&sup2;":(t/=.836127,n=t>=3097600?(t/3097600).toFixed(2)+" mi&sup2;":t>=4840?(t/4840).toFixed(2)+" acres":Math.ceil(t)+" yd&sup2;"),n},readableDistance:function(t,e){var n;return e?n=t>1e3?(t/1e3).toFixed(2)+" km":Math.ceil(t)+" m":(t*=1.09361,n=t>1760?(t/1760).toFixed(2)+" miles":Math.ceil(t)+" yd"),n}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,e,n,i){return this._checkCounterclockwise(t,n,i)!==this._checkCounterclockwise(e,n,i)&&this._checkCounterclockwise(t,e,n)!==this._checkCounterclockwise(t,e,i)},_checkCounterclockwise:function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}}),L.Polyline.include({intersects:function(){var t,e,n,i=this._originalPoints,o=i?i.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=o-1;t>=3;t--)if(e=i[t-1],n=i[t],this._lineSegmentsIntersectsRange(e,n,t-2))return!0;return!1},newLatLngIntersects:function(t,e){return this._map?this.newPointIntersects(this._map.latLngToLayerPoint(t),e):!1},newPointIntersects:function(t,e){var n=this._originalPoints,i=n?n.length:0,o=n?n[i-1]:null,a=i-2;return this._tooFewPointsForIntersection(1)?!1:this._lineSegmentsIntersectsRange(o,t,a,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._originalPoints,n=e?e.length:0;return n+=t||0,!this._originalPoints||3>=n},_lineSegmentsIntersectsRange:function(t,e,n,i){var o,a,r=this._originalPoints;i=i||0;for(var s=n;s>i;s--)if(o=r[s-1],a=r[s],L.LineUtil.segmentsIntersect(t,e,o,a))return!0;return!1}}),L.Polygon.include({intersects:function(){var t,e,n,i,o,a=this._originalPoints;return this._tooFewPointsForIntersection()?!1:(t=L.Polyline.prototype.intersects.call(this))?!0:(e=a.length,n=a[0],i=a[e-1],o=e-2,this._lineSegmentsIntersectsRange(i,n,o,1))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(t){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,t);var e;this._toolbars={},L.DrawToolbar&&this.options.draw&&(e=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=e,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(e=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=e,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this))},onAdd:function(t){var e,n=L.DomUtil.create("div","leaflet-draw"),i=!1,o="leaflet-draw-toolbar-top";for(var a in this._toolbars)this._toolbars.hasOwnProperty(a)&&(e=this._toolbars[a].addToolbar(t),e&&(i||(L.DomUtil.hasClass(e,o)||L.DomUtil.addClass(e.childNodes[0],o),i=!0),n.appendChild(e)));return n},onRemove:function(){for(var t in this._toolbars)this._toolbars.hasOwnProperty(t)&&this._toolbars[t].removeToolbar()},setDrawingOptions:function(t){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(t)},_toolbarEnabled:function(t){var e=t.target;for(var n in this._toolbars)this._toolbars[n]!==e&&this._toolbars[n].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(t){var e,n=L.DomUtil.create("div","leaflet-draw-section"),i=0,o=this._toolbarClass||"",a=this.getModeHandlers(t);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t,e=0;e<a.length;e++)a[e].enabled&&this._initModeHandler(a[e].handler,this._toolbarContainer,i++,o,a[e].title);return i?(this._lastButtonIndex=--i,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),n.appendChild(this._toolbarContainer),n.appendChild(this._actionsContainer),n):void 0},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler),this._modes[t].handler.disable(),this._modes[t].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e=0,n=this._actionButtons.length;n>e;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,e,n,i,o){var a=t.type;this._modes[a]={},this._modes[a].handler=t,this._modes[a].button=this._createButton({title:o,className:i+"-"+a,container:e,callback:this._modes[a].handler.enable,context:this._modes[a].handler}),this._modes[a].buttonIndex=n,this._modes[a].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_createButton:function(t){var e=L.DomUtil.create("a",t.className||"",t.container);return e.href="#",t.text&&(e.innerHTML=t.text),t.title&&(e.title=t.title),L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,"click",t.callback,t.context),e},_disposeButton:function(t,e){L.DomEvent.off(t,"click",L.DomEvent.stopPropagation).off(t,"mousedown",L.DomEvent.stopPropagation).off(t,"dblclick",L.DomEvent.stopPropagation).off(t,"click",L.DomEvent.preventDefault).off(t,"click",e)},_handlerActivated:function(t){this.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")
},_createActions:function(t){var e,n,i,o,a=this._actionsContainer,r=this.getActions(t),s=r.length;for(n=0,i=this._actionButtons.length;i>n;n++)this._disposeButton(this._actionButtons[n].button,this._actionButtons[n].callback);for(this._actionButtons=[];a.firstChild;)a.removeChild(a.firstChild);for(var l=0;s>l;l++)"enabled"in r[l]&&!r[l].enabled||(e=L.DomUtil.create("li","",a),o=this._createButton({title:r[l].title,text:r[l].text,container:e,callback:r[l].callback,context:r[l].context}),this._actionButtons.push({button:o,callback:r[l].callback}))},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,n=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=n+"px",0===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block"},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom")}}),L.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._container=t.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1},dispose:function(){this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container?(t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?t.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(t.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span><br />":"")+"<span>"+t.text+"</span>",this):this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),n=this._container;return this._container&&(n.style.visibility="inherit",L.DomUtil.setPosition(n,e)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(t){for(var e in this.options)this.options.hasOwnProperty(e)&&t[e]&&(t[e]=L.extend({},this.options[e],t[e]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker}]},getActions:function(t){return[{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){L.setOptions(this,t);for(var e in this._modes)this._modes.hasOwnProperty(e)&&t.hasOwnProperty(e)&&this._modes[e].handler.setOptions(t[e])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{color:"#fe57a1",opacity:.6,dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},featureGroup:null},initialize:function(t){t.edit&&("undefined"==typeof t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t.edit.selectedPathOptions)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(){return[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),e},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode.handler.disable()},_checkDisabled:function(){var t,e=this.options.featureGroup,n=0!==e.getLayers().length;this.options.edit&&(t=this._modes[L.EditToolbar.Edit.TYPE].button,n?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",n?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t=this._modes[L.EditToolbar.Delete.TYPE].button,n?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",n?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.setOptions(this,e),this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire("draw:editstart",{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire("draw:editstop",{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._featureGroup.eachLayer(function(t){this._revertLayer(t)},this)},save:function(){var t=new L.LayerGroup;this._featureGroup.eachLayer(function(e){e.edited&&(t.addLayer(e),e.edited=!1)}),this._map.fire("draw:edited",{layers:t})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:t instanceof L.Marker&&(this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())}))},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):t instanceof L.Marker&&t.setLatLng(this._uneditedLayerProps[e].latlng),t.fire("revert-edited",{layer:t}))},_enableLayerEdit:function(t){var e,n=t.layer||t.target||t;this._backupLayer(n),this.options.selectedPathOptions&&(e=L.Util.extend({},this.options.selectedPathOptions),e.maintainColor&&(e.color=n.options.color,e.fillColor=n.options.fillColor),n.options.original=L.extend({},n.options),n.options.editing=e),n.editing.enable()},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,e.editing.disable(),delete e.options.editing,delete e.options.original},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.Util.setOptions(this,e),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire("draw:deletestart",{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire("draw:deletestop",{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(t){this._deletableLayers.addLayer(t),t.fire("revert-deleted",{layer:t})},this)},save:function(){this._map.fire("draw:deleted",{layers:this._deletedLayers})},_enableLayerDelete:function(t){var e=t.layer||t.target||t;e.on("click",this._removeLayer,this)},_disableLayerDelete:function(t){var e=t.layer||t.target||t;e.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(t){var e=t.layer||t.target||t;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e),e.fire("deleted")},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})}(window,document);/**
 * @license jahashtable, a JavaScript implementation of a hash table. It creates a single constructor function called
 * Hashtable in the global scope.
 *
 * http://www.timdown.co.uk/jshashtable/
 * Copyright 2013 Tim Down.
 * Version: 3.0
 * Build date: 17 July 2013
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Hashtable=function(t){function e(t){return typeof t==f?t:""+t}function n(t){var i;return typeof t==f?t:typeof t.hashCode==p?(i=t.hashCode(),typeof i==f?i:n(i)):e(t)}function i(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function o(t,e){return t.equals(e)}function a(t,e){return typeof e.equals==p?e.equals(t):t===e}function r(e){return function(n){if(null===n)throw new Error("null is not a valid "+e);if(n===t)throw new Error(e+" must not be undefined")}}function s(t,e,n,i){this[0]=t,this.entries=[],this.addEntry(e,n),null!==i&&(this.getEqualityFunction=function(){return i})}function l(t){return function(e){for(var n,i=this.entries.length,o=this.getEqualityFunction(e);i--;)if(n=this.entries[i],o(e,n[0]))switch(t){case y:return!0;case _:return n;case b:return[i,n[1]]}return!1}}function u(t){return function(e){for(var n=e.length,i=0,o=this.entries,a=o.length;a>i;++i)e[n+i]=o[i][t]}}function c(t,e){for(var n,i=t.length;i--;)if(n=t[i],e===n[0])return i;return null}function d(t,e){var n=t[e];return n&&n instanceof s?n:null}function h(){var e=[],o={},a={replaceDuplicateKey:!0,hashCode:n,equals:null},r=arguments[0],l=arguments[1];l!==t?(a.hashCode=r,a.equals=l):r!==t&&i(a,r);var u=a.hashCode,h=a.equals;this.properties=a,this.put=function(t,n){g(t),v(n);var i,r,l=u(t),c=null;return i=d(o,l),i?(r=i.getEntryForKey(t),r?(a.replaceDuplicateKey&&(r[0]=t),c=r[1],r[1]=n):i.addEntry(t,n)):(i=new s(l,t,n,h),e.push(i),o[l]=i),c},this.get=function(t){g(t);var e=u(t),n=d(o,e);if(n){var i=n.getEntryForKey(t);if(i)return i[1]}return null},this.containsKey=function(t){g(t);var e=u(t),n=d(o,e);return n?n.containsKey(t):!1},this.containsValue=function(t){v(t);for(var n=e.length;n--;)if(e[n].containsValue(t))return!0;return!1},this.clear=function(){e.length=0,o={}},this.isEmpty=function(){return!e.length};var p=function(t){return function(){for(var n=[],i=e.length;i--;)e[i][t](n);return n}};this.keys=p("keys"),this.values=p("values"),this.entries=p("getEntries"),this.remove=function(t){g(t);var n,i=u(t),a=null,r=d(o,i);return r&&(a=r.removeEntryForKey(t),null!==a&&0==r.entries.length&&(n=c(e,i),e.splice(n,1),delete o[i])),a},this.size=function(){for(var t=0,n=e.length;n--;)t+=e[n].entries.length;return t}}var p="function",f="string",m="undefined";if(typeof encodeURIComponent==m||Array.prototype.splice===t||Object.prototype.hasOwnProperty===t)return null;var g=r("key"),v=r("value"),y=0,_=1,b=2;return s.prototype={getEqualityFunction:function(t){return typeof t.equals==p?o:a},getEntryForKey:l(_),getEntryAndIndexForKey:l(b),removeEntryForKey:function(t){var e=this.getEntryAndIndexForKey(t);return e?(this.entries.splice(e[0],1),e[1]):null},addEntry:function(t,e){this.entries.push([t,e])},keys:u(0),values:u(1),getEntries:function(t){for(var e=t.length,n=0,i=this.entries,o=i.length;o>n;++n)t[e+n]=i[n].slice(0)},containsKey:l(y),containsValue:function(t){for(var e=this.entries,n=e.length;n--;)if(t===e[n][1])return!0;return!1}},h.prototype={each:function(t){for(var e,n=this.entries(),i=n.length;i--;)e=n[i],t(e[0],e[1])},equals:function(t){var e,n,i,o=this.size();if(o==t.size()){for(e=this.keys();o--;)if(n=e[o],i=t.get(n),null===i||i!==this.get(n))return!1;return!0}return!1},putAll:function(t,e){for(var n,i,o,a,r=t.entries(),s=r.length,l=typeof e==p;s--;)n=r[s],i=n[0],o=n[1],l&&(a=this.get(i))&&(o=e(i,a,o)),this.put(i,o)},clone:function(){var t=new h(this.properties);return t.putAll(this),t}},h.prototype.toQueryString=function(){for(var t,n=this.entries(),i=n.length,o=[];i--;)t=n[i],o[i]=encodeURIComponent(e(t[0]))+"="+encodeURIComponent(e(t[1]));return o.join("&")},h}();!function(t){function e(t,e,n){this.dec=t,this.group=e,this.neg=n}function n(){for(var t=0;t<c.length;t++)for(var e=c[t],n=0;n<e.length;n++)o.put(e[n],t)}function i(t,i){0==o.size()&&n();var a=".",r=",",s="-";0==i&&(-1!=t.indexOf("_")?t=t.split("_")[1].toLowerCase():-1!=t.indexOf("-")&&(t=t.split("-")[1].toLowerCase()));var l=o.get(t);if(l){var c=u[l];c&&(a=c[0],r=c[1])}return new e(a,r,s)}var o=new Hashtable,a=["ae","au","ca","cn","eg","gb","hk","il","in","jp","sk","th","tw","us"],r=["at","br","de","dk","es","gr","it","nl","pt","tr","vn"],s=["bg","cz","fi","fr","no","pl","ru","se"],l=["ch"],u=[[".",","],[",","."],[","," "],[".","'"]],c=[a,r,s,l];t.fn.formatNumber=function(e,n,i){return this.each(function(){null==n&&(n=!0),null==i&&(i=!0);var o;o=new String(t(this).is(":input")?t(this).val():t(this).text());var a=t.formatNumber(o,e);return n&&(t(this).is(":input")?t(this).val(a):t(this).text(a)),i?a:void 0})},t.formatNumber=function(e,n){for(var n=t.extend({},t.fn.formatNumber.defaults,n),o=i(n.locale.toLowerCase(),n.isFullLocale),a=(o.dec,o.group,o.neg,"0#-,."),r="",s=!1,l=0;l<n.format.length;l++){if(-1!=a.indexOf(n.format.charAt(l))){if(0==l&&"-"==n.format.charAt(l)){s=!0;continue}break}r+=n.format.charAt(l)}for(var u="",l=n.format.length-1;l>=0&&-1==a.indexOf(n.format.charAt(l));l--)u=n.format.charAt(l)+u;n.format=n.format.substring(r.length),n.format=n.format.substring(0,n.format.length-u.length);var c=new Number(e);return t._formatNumber(c,n,u,r,s)},t._formatNumber=function(e,n,o,a,r){var n=t.extend({},t.fn.formatNumber.defaults,n),s=i(n.locale.toLowerCase(),n.isFullLocale),l=s.dec,u=s.group,c=s.neg;null!=n.overrideGroupSep&&(u=n.overrideGroupSep),null!=n.overrideDecSep&&(l=n.overrideDecSep),null!=n.overrideNegSign&&(c=n.overrideNegSign);var d=!1;if(isNaN(e)){if(1!=n.nanForceZero)return"";e=0,d=!0}(1==n.isPercentage||n.autoDetectPercentage&&"%"==o.charAt(o.length-1))&&(e=100*e);var h="";if(n.format.indexOf(".")>-1){var p=l,f=n.format.substring(n.format.lastIndexOf(".")+1);if(1==n.round)e=new Number(e.toFixed(f.length));else{var m=e.toString();m.lastIndexOf(".")>0&&(m=m.substring(0,m.lastIndexOf(".")+f.length+1)),e=new Number(m)}var g=new Number(e.toString().substring(e.toString().indexOf(".")));decimalString=new String(g.toFixed(f.length)),decimalString=decimalString.substring(decimalString.lastIndexOf(".")+1);for(var v=0;v<f.length;v++)if("#"!=f.charAt(v)||"0"==decimalString.charAt(v)){if("#"==f.charAt(v)&&"0"==decimalString.charAt(v)){var y=decimalString.substring(v);if(y.match("[1-9]")){p+=decimalString.charAt(v);continue}break}"0"==f.charAt(v)&&(p+=decimalString.charAt(v))}else p+=decimalString.charAt(v);h+=p}else e=Math.round(e);var _=Math.floor(e);0>e&&(_=Math.ceil(e));var b="";b=-1==n.format.indexOf(".")?n.format:n.format.substring(0,n.format.indexOf("."));var w="";if(0!=_||"#"!=b.substr(b.length-1)||d){var x=new String(Math.abs(_)),C=9999;-1!=b.lastIndexOf(",")&&(C=b.length-b.lastIndexOf(",")-1);for(var L=0,v=x.length-1;v>-1;v--)w=x.charAt(v)+w,L++,L==C&&0!=v&&(w=u+w,L=0);if(b.length>w.length){var S=b.indexOf("0");if(-1!=S)for(var k=b.length-S,D=b.length-w.length-1;w.length<k;){var T=b.charAt(D);","==T&&(T=u),w=T+w,D--}}}return w||-1===b.indexOf("0",b.length-1)||(w="0"),h=w+h,0>e&&r&&a.length>0?a=c+a:0>e&&(h=c+h),n.decimalSeparatorAlwaysShown||h.lastIndexOf(l)==h.length-1&&(h=h.substring(0,h.length-1)),h=a+h+o},t.fn.parseNumber=function(e,n,i){null==n&&(n=!0),null==i&&(i=!0);var o;o=new String(t(this).is(":input")?t(this).val():t(this).text());var a=t.parseNumber(o,e);return a&&(n&&(t(this).is(":input")?t(this).val(a.toString()):t(this).text(a.toString())),i)?a:void 0},t.parseNumber=function(e,n){var n=t.extend({},t.fn.parseNumber.defaults,n),o=i(n.locale.toLowerCase(),n.isFullLocale),a=o.dec,r=o.group,s=o.neg;null!=n.overrideGroupSep&&(r=n.overrideGroupSep),null!=n.overrideDecSep&&(a=n.overrideDecSep),null!=n.overrideNegSign&&(s=n.overrideNegSign);for(var l="1234567890",u=".-",c=n.strict;e.indexOf(r)>-1;)e=e.replace(r,"");e=e.replace(a,".").replace(s,"-");var d="",h=!1;(1==n.isPercentage||n.autoDetectPercentage&&"%"==e.charAt(e.length-1))&&(h=!0);for(var p=0;p<e.length;p++)if(l.indexOf(e.charAt(p))>-1)d+=e.charAt(p);else if(u.indexOf(e.charAt(p))>-1)d+=e.charAt(p),u=u.replace(e.charAt(p),"");else{if(n.allowPostfix)break;if(c){d="NaN";break}}var f=new Number(d);if(h){f/=100;var m=d.indexOf(".");if(-1!=m){var g=d.length-m-1;f=f.toFixed(g+2)}else f=f.toFixed(2)}return f},t.fn.parseNumber.defaults={locale:"us",decimalSeparatorAlwaysShown:!1,isPercentage:!1,autoDetectPercentage:!0,isFullLocale:!1,strict:!1,overrideGroupSep:null,overrideDecSep:null,overrideNegSign:null,allowPostfix:!1},t.fn.formatNumber.defaults={format:"#,###.00",locale:"us",decimalSeparatorAlwaysShown:!1,nanForceZero:!0,round:!0,isFullLocale:!1,overrideGroupSep:null,overrideDecSep:null,overrideNegSign:null,isPercentage:!1,autoDetectPercentage:!0},Number.prototype.toFixed=function(e){return t._roundNumber(this,e)},t._roundNumber=function(t,e){var n=Math.pow(10,e||0),i=String(Math.round(t*n)/n);if(e>0){var o=i.indexOf(".");for(-1==o?(i+=".",o=0):o=i.length-(o+1);e>o;)i+="0",o++}return i}}(jQuery),/*
 * File:        ColReorderWithResize.js
 * Version:     1.0.7
 * CVS:         $Id$
 * Description: Allow columns to be reordered in a DataTable
 * Author:      Allan Jardine (www.sprymedia.co.uk)
 * Author:      Christophe Battarel (www.altairis.fr)
 * Created:     Wed Sep 15 18:23:29 BST 2010
 * Modified:    July 2011 by Christophe Battarel - christophe.battarel@altairis.fr (columns resizable)
 * Modified:    February 2012 by Martin Marchetta - martin.marchetta@gmail.com
 *  1. Made the "hot area" for resizing a little wider (it was a little difficult to hit the exact border of a column for resizing)
 *  2. Resizing didn't work at all when using scroller (that plugin splits the table into 2 different tables: one for the header and another one for the body, so when you resized the header, the data columns didn't follow)
 *  3. Fixed collateral effects of sorting feature
 *  4. If sScrollX is enabled (i.e. horizontal scrolling), when resizing a column the width of the other columns is not changed, but the whole
 *     table is resized to give an Excel-like behavior (good suggestion by Allan)
 * Modified:    February 2012 by Christophe Battarel - christophe.battarel@altairis.fr (ColReorder v1.0.5 adaptation)
 * Modified:    September 16th 2012 by Hassan Kamara - h@phrmc.com
 * Language:    Javascript
 * License:     GPL v2 or BSD 3 point style
 * Project:     DataTables
 * Contact:     www.sprymedia.co.uk/contact
 * 
 * Copyright 2010-2011 Allan Jardine, all rights reserved.
 *
 * This source file is free software, under either the GPL v2 license or a
 * BSD style license, available at:
 *   http://datatables.net/license_gpl2
 *   http://datatables.net/license_bsd
 *
 */
function(t,e,n){function i(t){for(var e=[],n=0,i=t.length;i>n;n++)e[t[n]]=n;return e}function o(t,e,n){var i=t.splice(e,1)[0];t.splice(n,0,i)}t.fn.dataTableExt.oApi.fnColReorder=function(){!function(t,e,n){function i(t){for(var e=[],n=0,i=t.length;i>n;n++)e[t[n]]=n;return e}function o(t,e,n){var i=t.splice(e,1)[0];t.splice(n,0,i)}function a(t,e,n){for(var i=[],o=0,a=t.childNodes.length;a>o;o++)1==t.childNodes[o].nodeType&&i.push(t.childNodes[o]);var r=i[e];null!==n?t.insertBefore(r,i[n]):t.appendChild(r)}var r=function(t){"use strict";t.fn.dataTableExt.oApi.fnColReorder=function(e,n,r){var s,l,u,c,d,h,p=t.fn.dataTable.Api?!0:!1,f=e.aoColumns.length,m=function(t,e,n){if(t[e]){var i=t[e].split("."),o=i.shift();isNaN(1*o)||(t[e]=n[1*o]+"."+i.join("."))}};if(n!=r){if(0>n||n>=f)return void this.oApi._fnLog(e,1,"ColReorder 'from' index is out of bounds: "+n);if(0>r||r>=f)return void this.oApi._fnLog(e,1,"ColReorder 'to' index is out of bounds: "+r);var g=[];for(s=0,l=f;l>s;s++)g[s]=s;o(g,n,r);var v=i(g);for(s=0,l=e.aaSorting.length;l>s;s++)e.aaSorting[s][0]=v[e.aaSorting[s][0]];if(null!==e.aaSortingFixed)for(s=0,l=e.aaSortingFixed.length;l>s;s++)e.aaSortingFixed[s][0]=v[e.aaSortingFixed[s][0]];for(s=0,l=f;l>s;s++){for(h=e.aoColumns[s],u=0,c=h.aDataSort.length;c>u;u++)h.aDataSort[u]=v[h.aDataSort[u]];p&&(h.idx=v[h.idx])}for(p&&t.each(e.aLastSort,function(t,n){e.aLastSort[t].src=v[n.src]}),s=0,l=f;l>s;s++)h=e.aoColumns[s],"number"==typeof h.mData?(h.mData=v[h.mData],e.oApi._fnColumnOptions(e,s,{})):t.isPlainObject(h.mData)&&(m(h.mData,"_",v),m(h.mData,"filter",v),m(h.mData,"sort",v),m(h.mData,"type",v),e.oApi._fnColumnOptions(e,s,{}));if(e.aoColumns[n].bVisible){var y=this.oApi._fnColumnIndexToVisible(e,n),_=null;for(s=n>r?r:r+1;null===_&&f>s;)_=this.oApi._fnColumnIndexToVisible(e,s),s++;for(d=e.nTHead.getElementsByTagName("tr"),s=0,l=d.length;l>s;s++)a(d[s],y,_);if(null!==e.nTFoot)for(d=e.nTFoot.getElementsByTagName("tr"),s=0,l=d.length;l>s;s++)a(d[s],y,_);for(s=0,l=e.aoData.length;l>s;s++)null!==e.aoData[s].nTr&&a(e.aoData[s].nTr,y,_)}for(o(e.aoColumns,n,r),o(e.aoPreSearchCols,n,r),s=0,l=e.aoData.length;l>s;s++){var b=e.aoData[s];p?(b.anCells&&o(b.anCells,n,r),"dom"!==b.src&&t.isArray(b._aData)&&o(b._aData,n,r)):(t.isArray(b._aData)&&o(b._aData,n,r),o(b._anHidden,n,r))}for(s=0,l=e.aoHeader.length;l>s;s++)o(e.aoHeader[s],n,r);if(null!==e.aoFooter)for(s=0,l=e.aoFooter.length;l>s;s++)o(e.aoFooter[s],n,r);if(p){var w=new t.fn.dataTable.Api(e);w.rows().invalidate()}for(s=0,l=f;l>s;s++)t(e.aoColumns[s].nTh).off("click.DT"),this.oApi._fnSortAttachListener(e,e.aoColumns[s].nTh,s);t(e.oInstance).trigger("column-reorder",[e,{iFrom:n,iTo:r,aiInvertMapping:v}])}};var r=function(e,n){var i;t.fn.dataTable.Api?i=new t.fn.dataTable.Api(e).settings()[0]:e.fnSettings?i=e.fnSettings():"string"==typeof e?t.fn.dataTable.fnIsDataTable(t(e)[0])&&(i=t(e).eq(0).dataTable().fnSettings()):e.nodeName&&"table"===e.nodeName.toLowerCase()?t.fn.dataTable.fnIsDataTable(e.nodeName)&&(i=t(e.nodeName).dataTable().fnSettings()):e instanceof jQuery?t.fn.dataTable.fnIsDataTable(e[0])&&(i=e.eq(0).dataTable().fnSettings()):i=e;var o=t.fn.dataTable.camelToHungarian;return o&&(o(r.defaults,r.defaults,!0),o(r.defaults,n||{})),this.s={dt:null,init:t.extend(!0,{},r.defaults,n),fixed:0,fixedRight:0,dropCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]},this.dom={drag:null,pointer:null},this.s.dt=i.oInstance.fnSettings(),this.s.dt._colReorder=this,this._fnConstruct(),i.oApi._fnCallbackReg(i,"aoDestroyCallback",t.proxy(this._fnDestroy,this),"ColReorder"),this};return r.prototype={fnReset:function(){for(var t=[],e=0,n=this.s.dt.aoColumns.length;n>e;e++)t.push(this.s.dt.aoColumns[e]._ColReorder_iOrigCol);return this._fnOrderColumns(t),this},fnGetCurrentOrder:function(){return this.fnOrder()},fnOrder:function(t){if(t===n){for(var e=[],o=0,a=this.s.dt.aoColumns.length;a>o;o++)e.push(this.s.dt.aoColumns[o]._ColReorder_iOrigCol);return e}return this._fnOrderColumns(i(t)),this},_fnConstruct:function(){var t,e=this,n=this.s.dt.aoColumns.length;for(this.s.init.iFixedColumns&&(this.s.fixed=this.s.init.iFixedColumns),this.s.fixedRight=this.s.init.iFixedColumnsRight?this.s.init.iFixedColumnsRight:0,this.s.init.fnReorderCallback&&(this.s.dropCallback=this.s.init.fnReorderCallback),t=0;n>t;t++)t>this.s.fixed-1&&t<n-this.s.fixedRight&&this._fnMouseListener(t,this.s.dt.aoColumns[t].nTh),this.s.dt.aoColumns[t]._ColReorder_iOrigCol=t;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(t,n){e._fnStateSave.call(e,n)},"ColReorder_State");var o=null;if(this.s.init.aiOrder&&(o=this.s.init.aiOrder.slice()),this.s.dt.oLoadedState&&"undefined"!=typeof this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length&&(o=this.s.dt.oLoadedState.ColReorder),o)if(e.s.dt._bInitComplete){var a=i(o);e._fnOrderColumns.call(e,a)}else{var r=!1;this.s.dt.aoDrawCallback.push({fn:function(){if(!e.s.dt._bInitComplete&&!r){r=!0;var t=i(o);e._fnOrderColumns.call(e,t)}},sName:"ColReorder_Pre"})}else this._fnSetColumnIndexes()},_fnOrderColumns:function(e){if(e.length!=this.s.dt.aoColumns.length)return void this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.");for(var n=0,i=e.length;i>n;n++){var a=t.inArray(n,e);n!=a&&(o(e,a,n),this.s.dt.oInstance.fnColReorder(a,n))}(""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),this._fnSetColumnIndexes()},_fnStateSave:function(e){var n,i,o,a=this.s.dt,r=a.aoColumns;if(e.ColReorder=[],e.aaSorting){for(n=0;n<e.aaSorting.length;n++)e.aaSorting[n][0]=r[e.aaSorting[n][0]]._ColReorder_iOrigCol;var s=t.extend(!0,[],e.aoSearchCols);for(n=0,i=r.length;i>n;n++)o=r[n]._ColReorder_iOrigCol,e.aoSearchCols[o]=s[n],e.abVisCols[o]=r[n].bVisible,e.ColReorder.push(o)}else if(e.order){for(n=0;n<e.order.length;n++)e.order[n][0]=r[e.order[n][0]]._ColReorder_iOrigCol;var l=t.extend(!0,[],e.columns);for(n=0,i=r.length;i>n;n++)o=r[n]._ColReorder_iOrigCol,e.columns[o]=l[n],e.ColReorder.push(o)}},_fnMouseListener:function(e,n){var i=this;t(n).on("mousedown.ColReorder",function(t){t.preventDefault(),i._fnMouseDown.call(i,t,n)})},_fnMouseDown:function(i,o){var a=this,r=t(i.target).closest("th, td"),s=r.offset(),l=parseInt(t(o).attr("data-column-index"),10);l!==n&&(this.s.mouse.startX=i.pageX,this.s.mouse.startY=i.pageY,this.s.mouse.offsetX=i.pageX-s.left,this.s.mouse.offsetY=i.pageY-s.top,this.s.mouse.target=this.s.dt.aoColumns[l].nTh,this.s.mouse.targetIndex=l,this.s.mouse.fromIndex=l,this._fnRegions(),t(e).on("mousemove.ColReorder",function(t){a._fnMouseMove.call(a,t)}).on("mouseup.ColReorder",function(t){a._fnMouseUp.call(a,t)}))},_fnMouseMove:function(t){if(null===this.dom.drag){if(Math.pow(Math.pow(t.pageX-this.s.mouse.startX,2)+Math.pow(t.pageY-this.s.mouse.startY,2),.5)<5)return;this._fnCreateDragNode()}this.dom.drag.css({left:t.pageX-this.s.mouse.offsetX,top:t.pageY-this.s.mouse.offsetY});for(var e=!1,n=this.s.mouse.toIndex,i=1,o=this.s.aoTargets.length;o>i;i++)if(t.pageX<this.s.aoTargets[i-1].x+(this.s.aoTargets[i].x-this.s.aoTargets[i-1].x)/2){this.dom.pointer.css("left",this.s.aoTargets[i-1].x),this.s.mouse.toIndex=this.s.aoTargets[i-1].to,e=!0;break}e||(this.dom.pointer.css("left",this.s.aoTargets[this.s.aoTargets.length-1].x),this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-1].to),this.s.init.bRealtime&&n!==this.s.mouse.toIndex&&(this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex),this.s.mouse.fromIndex=this.s.mouse.toIndex,this._fnRegions())},_fnMouseUp:function(){t(e).off("mousemove.ColReorder mouseup.ColReorder"),null!==this.dom.drag&&(this.dom.drag.remove(),this.dom.pointer.remove(),this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex),this._fnSetColumnIndexes(),(""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(),null!==this.s.dropCallback&&this.s.dropCallback.call(this),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt))},_fnRegions:function(){var e=this.s.dt.aoColumns;this.s.aoTargets.splice(0,this.s.aoTargets.length),this.s.aoTargets.push({x:t(this.s.dt.nTable).offset().left,to:0});for(var n=0,i=0,o=e.length;o>i;i++)i!=this.s.mouse.fromIndex&&n++,e[i].bVisible&&this.s.aoTargets.push({x:t(e[i].nTh).offset().left+t(e[i].nTh).outerWidth(),to:n});0!==this.s.fixedRight&&this.s.aoTargets.splice(this.s.aoTargets.length-this.s.fixedRight),0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed)},_fnCreateDragNode:function(){var e=""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY,n=this.s.dt.aoColumns[this.s.mouse.targetIndex].nTh,i=n.parentNode,o=i.parentNode,a=o.parentNode,r=t(n).clone();this.dom.drag=t(a.cloneNode(!1)).addClass("DTCR_clonedTable").append(o.cloneNode(!1).appendChild(i.cloneNode(!1).appendChild(r[0]))).css({position:"absolute",top:0,left:0,width:t(n).outerWidth(),height:t(n).outerHeight()}).appendTo("body"),this.dom.pointer=t("<div></div>").addClass("DTCR_pointer").css({position:"absolute",top:e?t("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top:t(this.s.dt.nTable).offset().top,height:e?t("div.dataTables_scroll",this.s.dt.nTableWrapper).height():t(this.s.dt.nTable).height()}).appendTo("body")},_fnDestroy:function(){var e,n;for(e=0,n=this.s.dt.aoDrawCallback.length;n>e;e++)if("ColReorder_Pre"===this.s.dt.aoDrawCallback[e].sName){this.s.dt.aoDrawCallback.splice(e,1);break}t(this.s.dt.nTHead).find("*").off(".ColReorder"),t.each(this.s.dt.aoColumns,function(e,n){t(n.nTh).removeAttr("data-column-index")}),this.s.dt._colReorder=null,this.s=null},_fnSetColumnIndexes:function(){t.each(this.s.dt.aoColumns,function(e,n){t(n.nTh).attr("data-column-index",e)})}},r.defaults={aiOrder:null,bRealtime:!1,iFixedColumns:0,iFixedColumnsRight:0,fnReorderCallback:null},r.version="1.1.3-dev",t.fn.dataTable.ColReorder=r,t.fn.DataTable.ColReorder=r,"function"==typeof t.fn.dataTable&&"function"==typeof t.fn.dataTableExt.fnVersionCheck&&t.fn.dataTableExt.fnVersionCheck("1.9.3")?t.fn.dataTableExt.aoFeatures.push({fnInit:function(t){var e=t.oInstance;if(t._colReorder)e.oApi._fnLog(t,1,"ColReorder attempted to initialise twice. Ignoring second");else{var n=t.oInit,i=n.colReorder||n.oColReorder||{};new r(t,i)}return null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.9.3 or greater - www.datatables.net/download"),t.fn.dataTable.Api&&(t.fn.dataTable.Api.register("colReorder.reset()",function(){return this.iterator("table",function(t){t._colReorder.fnReset()})}),t.fn.dataTable.Api.register("colReorder.order()",function(t){return t?this.iterator("table",function(e){e._colReorder.fnOrder(t)}):this.context.length?this.context[0]._colReorder.fnOrder():null})),r};"function"==typeof define&&define.amd?define(["jquery","datatables"],r):"object"==typeof exports?r(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.ColReorder&&r(jQuery,jQuery.fn.dataTable)}(e,n)},ColReorder=function(t,e){return this.CLASS&&"ColReorder"==this.CLASS||alert("Warning: ColReorder must be initialised with the keyword 'new'"),"undefined"==typeof e&&(e={}),this.s={dt:null,init:e,allowReorder:!0,allowResize:!0,fixed:0,dropCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]},this.dom={drag:null,resize:null,pointer:null},this.table_size=-1,this.s.dt=t.oInstance.fnSettings(),this._fnConstruct(),t.oApi._fnCallbackReg(t,"aoDestroyCallback",jQuery.proxy(this._fnDestroy,this),"ColReorder"),ColReorder.aoInstances.push(this),this},ColReorder.prototype={fnReset:function(){for(var t=[],e=0,n=this.s.dt.aoColumns.length;n>e;e++)t.push(this.s.dt.aoColumns[e]._ColReorder_iOrigCol);this._fnOrderColumns(t)},_fnConstruct:function(){var t,e,n=this;for("undefined"!=typeof this.s.init.allowReorder&&(this.s.allowReorder=this.s.init.allowReorder),"undefined"!=typeof this.s.init.allowResize&&(this.s.allowResize=this.s.init.allowResize),"undefined"!=typeof this.s.init.iFixedColumns&&(this.s.fixed=this.s.init.iFixedColumns),"undefined"!=typeof this.s.init.fnReorderCallback&&(this.s.dropCallback=this.s.init.fnReorderCallback),t=0,e=this.s.dt.aoColumns.length;e>t;t++)t>this.s.fixed-1&&this._fnMouseListener(t,this.s.dt.aoColumns[t].nTh),this.s.dt.aoColumns[t]._ColReorder_iOrigCol=t;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(t,e){n._fnStateSave.call(n,e)},"ColReorder_State");var o=null;if("undefined"!=typeof this.s.init.aiOrder&&(o=this.s.init.aiOrder.slice()),this.s.dt.oLoadedState&&"undefined"!=typeof this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length&&(o=this.s.dt.oLoadedState.ColReorder),o)if(n.s.dt._bInitComplete){var a=i(o);n._fnOrderColumns.call(n,a)}else{var r=!1;this.s.dt.aoDrawCallback.push({fn:function(){if(!n.s.dt._bInitComplete&&!r){r=!0;var t=i(o);n._fnOrderColumns.call(n,t)}},sName:"ColReorder_Pre"})}},_fnOrderColumns:function(e){if(e.length!=this.s.dt.aoColumns.length)return void this.s.dt.oInstance.oApi._fnLog(oDTSettings,1,"ColReorder - array reorder does not match known number of columns. Skipping.");for(var n=0,i=e.length;i>n;n++){var a=t.inArray(n,e);n!=a&&(o(e,a,n),this.s.dt.oInstance.fnColReorder(a,n))}(""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt)},_fnStateSave:function(e){var n,i,o,a=this.s.dt;for(n=0;n<e.aaSorting.length;n++)e.aaSorting[n][0]=a.aoColumns[e.aaSorting[n][0]]._ColReorder_iOrigCol;for(aSearchCopy=t.extend(!0,[],e.aoSearchCols),e.ColReorder=[],n=0,i=a.aoColumns.length;i>n;n++)o=a.aoColumns[n]._ColReorder_iOrigCol,e.aoSearchCols[o]=aSearchCopy[n],e.abVisCols[o]=a.aoColumns[n].bVisible,e.ColReorder.push(o)},_fnMouseListener:function(e,n){var i=this;t(n).unbind("mousemove.ColReorder"),t(n).unbind("mousedown.ColReorder"),this.s.allowResize&&t(n).bind("mousemove.ColReorder",function(e){if(null===i.dom.drag&&null===i.dom.resize){var n="TH"==e.target.nodeName?e.target:t(e.target).parents("TH")[0],o=t(n).offset(),a=t(n).innerWidth();t(n).css(Math.abs(e.pageX-Math.round(o.left+a))<=5?{cursor:"col-resize"}:{cursor:"pointer"})}}),t(n).bind("mousedown.ColReorder",function(t){return i._fnMouseDown.call(i,t,n,e),!1})},_fnMouseDown:function(e,i,o){var a=this,r=this.s.dt.aoColumns;if("col-resize"==t(i).css("cursor")){this.s.mouse.startX=e.pageX,this.s.mouse.startWidth=t(i).width(),this.s.mouse.resizeElem=t(i);var s=t(i).next();this.s.mouse.nextStartWidth=t(s).width(),a.dom.resize=!0,this.s.dt.aoColumns[o].bSortable=!1,this.s.dt.oFeatures.bAutoWidth=!1}else if(this.s.allowReorder){a.dom.resize=null;var l="TH"==e.target.nodeName?e.target:t(e.target).parents("TH")[0],u=t(l).offset();this.s.mouse.startX=e.pageX,this.s.mouse.startY=e.pageY,this.s.mouse.offsetX=e.pageX-u.left,this.s.mouse.offsetY=e.pageY-u.top,this.s.mouse.target=i,this.s.mouse.targetIndex=t("th",i.parentNode).index(i),this.s.mouse.fromIndex=this.s.dt.oInstance.oApi._fnVisibleToColumnIndex(this.s.dt,this.s.mouse.targetIndex),this.s.aoTargets.splice(0,this.s.aoTargets.length),this.s.aoTargets.push({x:t(this.s.dt.nTable).offset().left,to:0});for(var c=0,o=0,d=r.length;d>o;o++)o!=this.s.mouse.fromIndex&&c++,r[o].bVisible&&this.s.aoTargets.push({x:t(r[o].nTh).offset().left+t(r[o].nTh).outerWidth(),to:c});0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed)}t(n).bind("mousemove.ColReorder",function(t){a._fnMouseMove.call(a,t,o)}),t(n).bind("mouseup.ColReorder",function(t){setTimeout(function(){a._fnMouseUp.call(a,t,o)},10)})},_fnMouseMove:function(e,n){var i;if(i=""===this.s.dt.oInit.sScrollX?!1:!0,this.table_size<0&&i&&void 0!=t("div.dataTables_scrollHead",this.s.dt.nTableWrapper)&&t("div.dataTables_scrollHead",this.s.dt.nTableWrapper).length>0&&(this.table_size=t(t("div.dataTables_scrollHead",this.s.dt.nTableWrapper)[0].childNodes[0].childNodes[0]).width()),this.dom.resize){var o=this.s.mouse.resizeElem,a=t(o).next(),r=e.pageX-this.s.mouse.startX;0==r||i||t(a).width(this.s.mouse.nextStartWidth-r),t(o).width(this.s.mouse.startWidth+r),i&&void 0!=t("div.dataTables_scrollHead",this.s.dt.nTableWrapper)&&t("div.dataTables_scrollHead",this.s.dt.nTableWrapper).length>0&&t(t("div.dataTables_scrollHead",this.s.dt.nTableWrapper)[0].childNodes[0].childNodes[0]).width(this.table_size+r);var s;if(null!=t("div.dataTables_scrollBody")&&t("div.dataTables_scrollBody").length>0){var l;for(s=-1,l=-1;l<this.s.dt.aoColumns.length-1&&l!=n;l++)this.s.dt.aoColumns[l+1].bVisible&&s++;tableScroller=t("div.dataTables_scrollBody",this.s.dt.nTableWrapper)[0],scrollingTableHead=t(tableScroller)[0].childNodes[0].childNodes[0].childNodes[0],0==r||i||t(t(scrollingTableHead)[0].childNodes[s+1]).width(this.s.mouse.nextStartWidth-r),t(t(scrollingTableHead)[0].childNodes[s]).width(this.s.mouse.startWidth+r),i&&t(t(tableScroller)[0].childNodes[0]).width(this.table_size+r)}}else if(this.s.allowReorder){if(null===this.dom.drag){if(Math.pow(Math.pow(e.pageX-this.s.mouse.startX,2)+Math.pow(e.pageY-this.s.mouse.startY,2),.5)<5)return;this._fnCreateDragNode()}this.dom.drag.style.left=e.pageX-this.s.mouse.offsetX+"px",this.dom.drag.style.top=e.pageY-this.s.mouse.offsetY+"px";for(var u=!1,c=1,d=this.s.aoTargets.length;d>c;c++)if(e.pageX<this.s.aoTargets[c-1].x+(this.s.aoTargets[c].x-this.s.aoTargets[c-1].x)/2){this.dom.pointer.style.left=this.s.aoTargets[c-1].x+"px",this.s.mouse.toIndex=this.s.aoTargets[c-1].to,u=!0;break}u||(this.dom.pointer.style.left=this.s.aoTargets[this.s.aoTargets.length-1].x+"px",this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-1].to)}},_fnMouseUp:function(e,i){if(t(n).unbind("mousemove.ColReorder"),t(n).unbind("mouseup.ColReorder"),null!==this.dom.drag)n.body.removeChild(this.dom.drag),n.body.removeChild(this.dom.pointer),this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex),(""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(),null!==this.s.dropCallback&&this.s.dropCallback.call(this),this._fnConstruct(),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt);else if(null!==this.dom.resize){var o,a,r,s,l;if(this.s.dt.aoColumns[i].bSortable=!0,this.s.dt.aoColumns[i].sWidth=t(this.s.mouse.resizeElem).innerWidth()+"px",l=""===this.s.dt.oInit.sScrollX?!1:!0,!l){for(r=i+1;r<this.s.dt.aoColumns.length&&!this.s.dt.aoColumns[r].bVisible;r++);for(s=i-1;s>=0&&!this.s.dt.aoColumns[s].bVisible;s--);if(this.s.dt.aoColumns.length>r)this.s.dt.aoColumns[r].sWidth=t(this.s.mouse.resizeElem).next().innerWidth()+"px";else for(a=this.s.mouse.resizeElem,o=s;o>0;o--)this.s.dt.aoColumns[o].bVisible&&(a=t(a).prev(),this.s.dt.aoColumns[o].sWidth=t(a).innerWidth()+"px")}l&&void 0!=t("div.dataTables_scrollHead",this.s.dt.nTableWrapper)&&t("div.dataTables_scrollHead",this.s.dt.nTableWrapper).length>0&&(this.table_size=t(t("div.dataTables_scrollHead",this.s.dt.nTableWrapper)[0].childNodes[0].childNodes[0]).width()),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt)}this.dom.resize=null},_fnCreateDragNode:function(){var e=this;for(this.dom.drag=t(this.s.dt.nTHead.parentNode).clone(!0)[0],this.dom.drag.className+=" DTCR_clonedTable";this.dom.drag.getElementsByTagName("caption").length>0;)this.dom.drag.removeChild(this.dom.drag.getElementsByTagName("caption")[0]);for(;this.dom.drag.getElementsByTagName("tbody").length>0;)this.dom.drag.removeChild(this.dom.drag.getElementsByTagName("tbody")[0]);for(;this.dom.drag.getElementsByTagName("tfoot").length>0;)this.dom.drag.removeChild(this.dom.drag.getElementsByTagName("tfoot")[0]);t("thead tr:eq(0)",this.dom.drag).each(function(){t("th:not(:eq("+e.s.mouse.targetIndex+"))",this).remove()}),t("tr",this.dom.drag).height(t("tr:eq(0)",e.s.dt.nTHead).height()),t("thead tr:gt(0)",this.dom.drag).remove(),t("thead th:eq(0)",this.dom.drag).each(function(){this.style.width=t("th:eq("+e.s.mouse.targetIndex+")",e.s.dt.nTHead).width()+"px"}),this.dom.drag.style.position="absolute",this.dom.drag.style.zIndex=1200,this.dom.drag.style.top="0px",this.dom.drag.style.left="0px",this.dom.drag.style.width=t("th:eq("+e.s.mouse.targetIndex+")",e.s.dt.nTHead).outerWidth()+"px",this.dom.pointer=n.createElement("div"),this.dom.pointer.className="DTCR_pointer",this.dom.pointer.style.position="absolute",""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY?(this.dom.pointer.style.top=t(this.s.dt.nTable).offset().top+"px",this.dom.pointer.style.height=t(this.s.dt.nTable).height()+"px"):(this.dom.pointer.style.top=t("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top+"px",this.dom.pointer.style.height=t("div.dataTables_scroll",this.s.dt.nTableWrapper).height()+"px"),n.body.appendChild(this.dom.pointer),n.body.appendChild(this.dom.drag)},_fnDestroy:function(){for(var e=0,n=ColReorder.aoInstances.length;n>e;e++)if(ColReorder.aoInstances[e]===this){ColReorder.aoInstances.splice(e,1);break}t(this.s.dt.nTHead).find("*").unbind(".ColReorder"),this.s.dt.oInstance._oPluginColReorder=null,this.s=null}},ColReorder.aoInstances=[],ColReorder.fnReset=function(t){for(var e=0,n=ColReorder.aoInstances.length;n>e;e++)ColReorder.aoInstances[e].s.dt.oInstance==t&&ColReorder.aoInstances[e].fnReset()},ColReorder.prototype.CLASS="ColReorder",ColReorder.VERSION="1.0.7",ColReorder.prototype.VERSION=ColReorder.VERSION,"function"==typeof t.fn.dataTable&&"function"==typeof t.fn.dataTableExt.fnVersionCheck&&t.fn.dataTableExt.fnVersionCheck("1.9.3")?t.fn.dataTableExt.aoFeatures.push({fnInit:function(t){var e=t.oInstance;if("undefined"==typeof e._oPluginColReorder){var n="undefined"!=typeof t.oInit.oColReorder?t.oInit.oColReorder:{};e._oPluginColReorder=new ColReorder(t,n)}else e.oApi._fnLog(t,1,"ColReorder attempted to initialise twice. Ignoring second");return null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.9.3 or greater - www.datatables.net/download")}(jQuery,window,document),/*
 * File:        ColVis.js
 * Version:     1.1.0-dev
 * CVS:         $Id$
 * Description: Controls for column visibility in DataTables
 * Author:      Allan Jardine (www.sprymedia.co.uk)
 * Created:     Wed Sep 15 18:23:29 BST 2010
 * Modified:    $Date$ by $Author$
 * Language:    Javascript
 * License:     GPL v2 or BSD 3 point style
 * Project:     Just a little bit of fun :-)
 * Contact:     www.sprymedia.co.uk/contact
 *
 * Copyright 2010-2011 Allan Jardine, all rights reserved.
 *
 * This source file is free software, under either the GPL v2 license or a
 * BSD style license, available at:
 *   http://datatables.net/license_gpl2
 *   http://datatables.net/license_bsd
 */
function(t){var e=function(n,i){return this.CLASS&&"ColVis"==this.CLASS||alert("Warning: ColVis must be initialised with the keyword 'new'"),"undefined"==typeof i&&(i={}),this.s={dt:null,oInit:i,hidden:!0,abOriginal:[]},this.dom={wrapper:null,button:null,collection:null,background:null,catcher:null,buttons:[],groupButtons:[],restore:null},e.aInstances.push(this),this.s.dt=t.fn.dataTable.Api?new t.fn.dataTable.Api(n).settings()[0]:n,console.log(this.s.dt),this._fnConstruct(i),this};e.prototype={button:function(){return this.dom.wrapper},fnRebuild:function(){this.rebuild()},rebuild:function(){for(var t=this.dom.buttons.length-1;t>=0;t--)this.dom.collection.removeChild(this.dom.buttons[t]);this.dom.buttons.splice(0,this.dom.buttons.length),this.dom.restore&&this.dom.restore.parentNode(this.dom.restore),this._fnAddGroups(),this._fnAddButtons(),this._fnDrawCallback()},_fnConstruct:function(e){this._fnApplyCustomisation(e);var n,i,o=this;for(this.dom.wrapper=document.createElement("div"),this.dom.wrapper.className="ColVis",this.dom.button=t("<button />",{"class":this.s.dt.bJUI?"ColVis_Button ColVis_MasterButton ui-button ui-state-default":"ColVis_Button ColVis_MasterButton"}).append("<span>"+this.s.buttonText+"</span>").bind("mouseover"==this.s.activate?"mouseover":"click",function(t){t.preventDefault(),o._fnCollectionShow()}).appendTo(this.dom.wrapper)[0],this.dom.catcher=this._fnDomCatcher(),this.dom.collection=this._fnDomCollection(),this.dom.background=this._fnDomBackground(),this._fnAddGroups(),this._fnAddButtons(),n=0,i=this.s.dt.aoColumns.length;i>n;n++)this.s.abOriginal.push(this.s.dt.aoColumns[n].bVisible);this.s.dt.aoDrawCallback.push({fn:function(){o._fnDrawCallback.call(o)},sName:"ColVis"}),t(this.s.dt.oInstance).bind("column-reorder",function(t,e,a){for(n=0,i=o.s.aiExclude.length;i>n;n++)o.s.aiExclude[n]=a.aiInvertMapping[o.s.aiExclude[n]];var r=o.s.abOriginal.splice(a.iFrom,1)[0];o.s.abOriginal.splice(a.iTo,0,r),o.fnRebuild()})},_fnApplyCustomisation:function(n){t.extend(!0,this.s,e.defaults,n),!this.s.showAll&&this.s.bShowAll&&(this.s.showAll=this.s.sShowAll),!this.s.restore&&this.s.bRestore&&(this.s.restore=this.s.sRestore)},_fnDrawCallback:function(){for(var e,n=this.s.dt.aoColumns,i=this.dom.buttons,o=this.s.aoGroups,a=0,r=i.length;r>a;a++)e=i[a],void 0!==e.__columnIdx&&t("input",e).prop("checked",n[e.__columnIdx].bVisible);for(var s=function(t){for(var e=0,i=t.length;i>e;e++)if(n[t[e]].bVisible===!1)return!1;return!0},l=function(t){for(var e=0,i=t.length;i>e;e++)if(n[t[e]].bVisible===!0)return!1;return!0},u=0,c=o.length;c>u;u++)s(o[u].aiColumns)?(t("input",this.dom.groupButtons[u]).prop("checked",!0),t("input",this.dom.groupButtons[u]).prop("indeterminate",!1)):l(o[u].aiColumns)?(t("input",this.dom.groupButtons[u]).prop("checked",!1),t("input",this.dom.groupButtons[u]).prop("indeterminate",!1)):t("input",this.dom.groupButtons[u]).prop("indeterminate",!0)},_fnAddGroups:function(){var t;if("undefined"!=typeof this.s.aoGroups)for(var e=0,n=this.s.aoGroups.length;n>e;e++)t=this._fnDomGroupButton(e),this.dom.groupButtons.push(t),this.dom.buttons.push(t),this.dom.collection.appendChild(t)},_fnAddButtons:function(){var e,n=this.s.dt.aoColumns;if(-1===t.inArray("all",this.s.aiExclude))for(var i=0,o=n.length;o>i;i++)-1===t.inArray(i,this.s.aiExclude)&&(e=this._fnDomColumnButton(i),e.__columnIdx=i,this.dom.buttons.push(e));"alpha"===this.s.order&&this.dom.buttons.sort(function(t,e){var i=n[t.__columnIdx].sTitle,o=n[e.__columnIdx].sTitle;return i===o?0:o>i?-1:1}),this.s.restore&&(e=this._fnDomRestoreButton(),e.className+=" ColVis_Restore",this.dom.buttons.push(e)),this.s.showAll&&(e=this._fnDomShowAllButton(),e.className+=" ColVis_ShowAll",this.dom.buttons.push(e)),t(this.dom.collection).append(this.dom.buttons)},_fnDomRestoreButton:function(){var e=this,n=this.s.dt;return t('<li class="ColVis_Special '+(n.bJUI?"ui-button ui-state-default":"")+'">'+this.s.restore+"</li>").click(function(){for(var t=0,n=e.s.abOriginal.length;n>t;t++)e.s.dt.oInstance.fnSetColumnVis(t,e.s.abOriginal[t],!1);e._fnAdjustOpenRows(),e.s.dt.oInstance.fnAdjustColumnSizing(!1),e.s.dt.oInstance.fnDraw(!1)})[0]},_fnDomShowAllButton:function(){var e=this,n=this.s.dt;return t('<li class="ColVis_Special '+(n.bJUI?"ui-button ui-state-default":"")+'">'+this.s.showAll+"</li>").click(function(){for(var t=0,n=e.s.abOriginal.length;n>t;t++)-1===e.s.aiExclude.indexOf(t)&&e.s.dt.oInstance.fnSetColumnVis(t,!0,!1);e._fnAdjustOpenRows(),e.s.dt.oInstance.fnAdjustColumnSizing(!1),e.s.dt.oInstance.fnDraw(!1)})[0]},_fnDomGroupButton:function(e){var n=this,i=this.s.dt,o=this.s.aoGroups[e];return t('<li class="ColVis_Special '+(i.bJUI?"ui-button ui-state-default":"")+'"><label><input type="checkbox" /><span>'+o.sTitle+"</span></label></li>").click(function(e){var i=!t("input",this).is(":checked");"li"!==e.target.nodeName.toLowerCase()&&(i=!i);for(var a=0;a<o.aiColumns.length;a++)n.s.dt.oInstance.fnSetColumnVis(o.aiColumns[a],i)})[0]},_fnDomColumnButton:function(e){var n=this,i=this.s.dt.aoColumns[e],o=this.s.dt,a=null===this.s.fnLabel?i.sTitle:this.s.fnLabel(e,i.sTitle,i.nTh);return t("<li "+(o.bJUI?'class="ui-button ui-state-default"':"")+'><label><input type="checkbox" /><span>'+a+"</span></label></li>").click(function(i){var a=!t("input",this).is(":checked");"li"!==i.target.nodeName.toLowerCase()&&(a=!a);var r=t.fn.dataTableExt.iApiIndex;t.fn.dataTableExt.iApiIndex=n._fnDataTablesApiIndex.call(n),o.oFeatures.bServerSide?(n.s.dt.oInstance.fnSetColumnVis(e,a,!1),n.s.dt.oInstance.fnAdjustColumnSizing(!1),(""!==o.oScroll.sX||""!==o.oScroll.sY)&&n.s.dt.oInstance.oApi._fnScrollDraw(n.s.dt),n._fnDrawCallback()):n.s.dt.oInstance.fnSetColumnVis(e,a),t.fn.dataTableExt.iApiIndex=r,null!==n.s.fnStateChange&&n.s.fnStateChange.call(n,e,a)})[0]},_fnDataTablesApiIndex:function(){for(var t=0,e=this.s.dt.oInstance.length;e>t;t++)if(this.s.dt.oInstance[t]==this.s.dt.nTable)return t;return 0},_fnDomCollection:function(){return t("<ul />",{"class":this.s.dt.bJUI?"ColVis_collection ui-buttonset ui-buttonset-multi":"ColVis_collection"}).css({display:"none",opacity:0,position:this.s.bCssPosition?"":"absolute"})[0]},_fnDomCatcher:function(){var e=this,n=document.createElement("div");return n.className="ColVis_catcher",t(n).click(function(){e._fnCollectionHide.call(e,null,null)}),n},_fnDomBackground:function(){var e=this,n=t("<div></div>").addClass("ColVis_collectionBackground").css("opacity",0).click(function(){e._fnCollectionHide.call(e,null,null)});return"mouseover"==this.s.activate&&n.mouseover(function(){e.s.overcollection=!1,e._fnCollectionHide.call(e,null,null)}),n[0]},_fnCollectionShow:function(){var e,n=this,i=t(this.dom.button).offset(),o=this.dom.collection,a=this.dom.background,r=parseInt(i.left,10),s=parseInt(i.top+t(this.dom.button).outerHeight(),10);this.s.bCssPosition||(o.style.top=s+"px",o.style.left=r+"px"),t(o).css({display:"block",opacity:0}),a.style.bottom="0px",a.style.right="0px";var l=this.dom.catcher.style;if(l.height=t(this.dom.button).outerHeight()+"px",l.width=t(this.dom.button).outerWidth()+"px",l.top=i.top+"px",l.left=r+"px",document.body.appendChild(a),document.body.appendChild(o),document.body.appendChild(this.dom.catcher),t(o).animate({opacity:1},n.s.iOverlayFade),t(a).animate({opacity:.1},n.s.iOverlayFade,"linear",function(){t.browser&&t.browser.msie&&"6.0"==t.browser.version&&n._fnDrawCallback()}),!this.s.bCssPosition){e="left"==this.s.sAlign?r:r-t(o).outerWidth()+t(this.dom.button).outerWidth(),o.style.left=e+"px";var u=t(o).outerWidth(),c=(t(o).outerHeight(),t(document).width());e+u>c&&(o.style.left=c-u+"px")}this.s.hidden=!1},_fnCollectionHide:function(){var e=this;this.s.hidden||null===this.dom.collection||(this.s.hidden=!0,t(this.dom.collection).animate({opacity:0},e.s.iOverlayFade,function(){this.style.display="none"}),t(this.dom.background).animate({opacity:0},e.s.iOverlayFade,function(){document.body.removeChild(e.dom.background),document.body.removeChild(e.dom.catcher)}))},_fnAdjustOpenRows:function(){for(var t=this.s.dt.aoOpenRows,e=this.s.dt.oApi._fnVisbleColumns(this.s.dt),n=0,i=t.length;i>n;n++)t[n].nTr.getElementsByTagName("td")[0].colSpan=e}},e.fnRebuild=function(t){var n=null;"undefined"!=typeof t&&(n=t.fnSettings().nTable);for(var i=0,o=e.aInstances.length;o>i;i++)("undefined"==typeof t||n==e.aInstances[i].s.dt.nTable)&&e.aInstances[i].fnRebuild()},e.defaults={active:"click",buttonText:"Show / hide columns",aiExclude:[],bRestore:!1,sRestore:"Restore original",bShowAll:!1,sShowAll:"Show All",sAlign:"left",fnStateChange:null,iOverlayFade:500,fnLabel:null,bCssPosition:!1,aoGroups:[],order:"column"},e.aInstances=[],e.prototype.CLASS="ColVis",e.VERSION="1.1.0-dev",e.prototype.VERSION=e.VERSION,"function"==typeof t.fn.dataTable&&"function"==typeof t.fn.dataTableExt.fnVersionCheck&&t.fn.dataTableExt.fnVersionCheck("1.7.0")?t.fn.dataTableExt.aoFeatures.push({fnInit:function(t){var n="undefined"==typeof t.oInit.oColVis?{}:t.oInit.oColVis,i=new e(t,n);return i.dom.wrapper},cFeature:"C",sFeature:"ColVis"}):alert("Warning: ColVis requires DataTables 1.7 or greater - www.datatables.net/download"),t.fn.dataTable.ColVis=e}(jQuery),function(){var t=this,e=t._,n={},i=Array.prototype,o=Object.prototype,a=Function.prototype,r=i.push,s=i.slice,l=i.concat,u=o.toString,c=o.hasOwnProperty,d=i.forEach,h=i.map,p=i.reduce,f=i.reduceRight,m=i.filter,g=i.every,v=i.some,y=i.indexOf,_=i.lastIndexOf,b=Array.isArray,w=Object.keys,x=a.bind,C=function(t){return t instanceof C?t:this instanceof C?void(this._wrapped=t):new C(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):t._=C,C.VERSION="1.6.0";var L=C.each=C.forEach=function(t,e,i){if(null==t)return t;if(d&&t.forEach===d)t.forEach(e,i);else if(t.length===+t.length){for(var o=0,a=t.length;a>o;o++)if(e.call(i,t[o],o,t)===n)return}else for(var r=C.keys(t),o=0,a=r.length;a>o;o++)if(e.call(i,t[r[o]],r[o],t)===n)return;return t};C.map=C.collect=function(t,e,n){var i=[];return null==t?i:h&&t.map===h?t.map(e,n):(L(t,function(t,o,a){i.push(e.call(n,t,o,a))}),i)};var S="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return i&&(e=C.bind(e,i)),o?t.reduce(e,n):t.reduce(e);if(L(t,function(t,a,r){o?n=e.call(i,n,t,a,r):(n=t,o=!0)}),!o)throw new TypeError(S);return n},C.reduceRight=C.foldr=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return i&&(e=C.bind(e,i)),o?t.reduceRight(e,n):t.reduceRight(e);var a=t.length;if(a!==+a){var r=C.keys(t);a=r.length}if(L(t,function(s,l,u){l=r?r[--a]:--a,o?n=e.call(i,n,t[l],l,u):(n=t[l],o=!0)}),!o)throw new TypeError(S);return n},C.find=C.detect=function(t,e,n){var i;return k(t,function(t,o,a){return e.call(n,t,o,a)?(i=t,!0):void 0}),i},C.filter=C.select=function(t,e,n){var i=[];return null==t?i:m&&t.filter===m?t.filter(e,n):(L(t,function(t,o,a){e.call(n,t,o,a)&&i.push(t)}),i)},C.reject=function(t,e,n){return C.filter(t,function(t,i,o){return!e.call(n,t,i,o)},n)},C.every=C.all=function(t,e,i){e||(e=C.identity);var o=!0;return null==t?o:g&&t.every===g?t.every(e,i):(L(t,function(t,a,r){return(o=o&&e.call(i,t,a,r))?void 0:n}),!!o)};var k=C.some=C.any=function(t,e,i){e||(e=C.identity);var o=!1;return null==t?o:v&&t.some===v?t.some(e,i):(L(t,function(t,a,r){return o||(o=e.call(i,t,a,r))?n:void 0}),!!o)};C.contains=C.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):k(t,function(t){return t===e})},C.invoke=function(t,e){var n=s.call(arguments,2),i=C.isFunction(e);return C.map(t,function(t){return(i?e:t[e]).apply(t,n)})},C.pluck=function(t,e){return C.map(t,C.property(e))},C.where=function(t,e){return C.filter(t,C.matches(e))},C.findWhere=function(t,e){return C.find(t,C.matches(e))},C.max=function(t,e,n){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var i=-1/0,o=-1/0;return L(t,function(t,a,r){var s=e?e.call(n,t,a,r):t;s>o&&(i=t,o=s)}),i},C.min=function(t,e,n){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var i=1/0,o=1/0;return L(t,function(t,a,r){var s=e?e.call(n,t,a,r):t;o>s&&(i=t,o=s)}),i},C.shuffle=function(t){var e,n=0,i=[];return L(t,function(t){e=C.random(n++),i[n-1]=i[e],i[e]=t}),i},C.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=C.values(t)),t[C.random(t.length-1)]):C.shuffle(t).slice(0,Math.max(0,e))};var D=function(t){return null==t?C.identity:C.isFunction(t)?t:C.property(t)};C.sortBy=function(t,e,n){return e=D(e),C.pluck(C.map(t,function(t,i,o){return{value:t,index:i,criteria:e.call(n,t,i,o)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var T=function(t){return function(e,n,i){var o={};return n=D(n),L(e,function(a,r){var s=n.call(i,a,r,e);t(o,s,a)}),o}};C.groupBy=T(function(t,e,n){C.has(t,e)?t[e].push(n):t[e]=[n]}),C.indexBy=T(function(t,e,n){t[e]=n}),C.countBy=T(function(t,e){C.has(t,e)?t[e]++:t[e]=1}),C.sortedIndex=function(t,e,n,i){n=D(n);for(var o=n.call(i,e),a=0,r=t.length;r>a;){var s=a+r>>>1;n.call(i,t[s])<o?a=s+1:r=s}return a},C.toArray=function(t){return t?C.isArray(t)?s.call(t):t.length===+t.length?C.map(t,C.identity):C.values(t):[]},C.size=function(t){return null==t?0:t.length===+t.length?t.length:C.keys(t).length},C.first=C.head=C.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:s.call(t,0,e)},C.initial=function(t,e,n){return s.call(t,0,t.length-(null==e||n?1:e))},C.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:s.call(t,Math.max(t.length-e,0))},C.rest=C.tail=C.drop=function(t,e,n){return s.call(t,null==e||n?1:e)},C.compact=function(t){return C.filter(t,C.identity)};var M=function(t,e,n){return e&&C.every(t,C.isArray)?l.apply(n,t):(L(t,function(t){C.isArray(t)||C.isArguments(t)?e?r.apply(n,t):M(t,e,n):n.push(t)}),n)};C.flatten=function(t,e){return M(t,e,[])},C.without=function(t){return C.difference(t,s.call(arguments,1))},C.partition=function(t,e){var n=[],i=[];return L(t,function(t){(e(t)?n:i).push(t)}),[n,i]},C.uniq=C.unique=function(t,e,n,i){C.isFunction(e)&&(i=n,n=e,e=!1);var o=n?C.map(t,n,i):t,a=[],r=[];return L(o,function(n,i){(e?i&&r[r.length-1]===n:C.contains(r,n))||(r.push(n),a.push(t[i]))}),a},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(t){var e=s.call(arguments,1);return C.filter(C.uniq(t),function(t){return C.every(e,function(e){return C.contains(e,t)})})},C.difference=function(t){var e=l.apply(i,s.call(arguments,1));return C.filter(t,function(t){return!C.contains(e,t)})},C.zip=function(){for(var t=C.max(C.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=C.pluck(arguments,""+n);return e},C.object=function(t,e){if(null==t)return{};for(var n={},i=0,o=t.length;o>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},C.indexOf=function(t,e,n){if(null==t)return-1;var i=0,o=t.length;if(n){if("number"!=typeof n)return i=C.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,o+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;o>i;i++)if(t[i]===e)return i;return-1},C.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(_&&t.lastIndexOf===_)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var o=i?n:t.length;o--;)if(t[o]===e)return o;return-1},C.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),o=0,a=new Array(i);i>o;)a[o++]=t,t+=n;return a};var P=function(){};C.bind=function(t,e){var n,i;if(x&&t.bind===x)return x.apply(t,s.call(arguments,1));if(!C.isFunction(t))throw new TypeError;return n=s.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(s.call(arguments)));P.prototype=t.prototype;var o=new P;P.prototype=null;var a=t.apply(o,n.concat(s.call(arguments)));return Object(a)===a?a:o}},C.partial=function(t){var e=s.call(arguments,1);return function(){for(var n=0,i=e.slice(),o=0,a=i.length;a>o;o++)i[o]===C&&(i[o]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},C.bindAll=function(t){var e=s.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return L(e,function(e){t[e]=C.bind(t[e],t)}),t},C.memoize=function(t,e){var n={};return e||(e=C.identity),function(){var i=e.apply(this,arguments);return C.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},C.delay=function(t,e){var n=s.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},C.defer=function(t){return C.delay.apply(C,[t,1].concat(s.call(arguments,1)))},C.throttle=function(t,e,n){var i,o,a,r=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:C.now(),r=null,a=t.apply(i,o),i=o=null};return function(){var u=C.now();s||n.leading!==!1||(s=u);var c=e-(u-s);return i=this,o=arguments,0>=c?(clearTimeout(r),r=null,s=u,a=t.apply(i,o),i=o=null):r||n.trailing===!1||(r=setTimeout(l,c)),a}},C.debounce=function(t,e,n){var i,o,a,r,s,l=function(){var u=C.now()-r;e>u?i=setTimeout(l,e-u):(i=null,n||(s=t.apply(a,o),a=o=null))};return function(){a=this,o=arguments,r=C.now();var u=n&&!i;return i||(i=setTimeout(l,e)),u&&(s=t.apply(a,o),a=o=null),s}},C.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},C.wrap=function(t,e){return C.partial(e,t)},C.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},C.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},C.keys=function(t){if(!C.isObject(t))return[];if(w)return w(t);var e=[];for(var n in t)C.has(t,n)&&e.push(n);return e},C.values=function(t){for(var e=C.keys(t),n=e.length,i=new Array(n),o=0;n>o;o++)i[o]=t[e[o]];return i},C.pairs=function(t){for(var e=C.keys(t),n=e.length,i=new Array(n),o=0;n>o;o++)i[o]=[e[o],t[e[o]]];return i},C.invert=function(t){for(var e={},n=C.keys(t),i=0,o=n.length;o>i;i++)e[t[n[i]]]=n[i];return e},C.functions=C.methods=function(t){var e=[];for(var n in t)C.isFunction(t[n])&&e.push(n);return e.sort()},C.extend=function(t){return L(s.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},C.pick=function(t){var e={},n=l.apply(i,s.call(arguments,1));return L(n,function(n){n in t&&(e[n]=t[n])}),e},C.omit=function(t){var e={},n=l.apply(i,s.call(arguments,1));for(var o in t)C.contains(n,o)||(e[o]=t[o]);return e},C.defaults=function(t){return L(s.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},C.clone=function(t){return C.isObject(t)?C.isArray(t)?t.slice():C.extend({},t):t},C.tap=function(t,e){return e(t),t};var E=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof C&&(t=t._wrapped),e instanceof C&&(e=e._wrapped);var o=u.call(t);if(o!=u.call(e))return!1;switch(o){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var a=n.length;a--;)if(n[a]==t)return i[a]==e;var r=t.constructor,s=e.constructor;if(r!==s&&!(C.isFunction(r)&&r instanceof r&&C.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),i.push(e);var l=0,c=!0;if("[object Array]"==o){if(l=t.length,c=l==e.length)for(;l--&&(c=E(t[l],e[l],n,i)););}else{for(var d in t)if(C.has(t,d)&&(l++,!(c=C.has(e,d)&&E(t[d],e[d],n,i))))break;if(c){for(d in e)if(C.has(e,d)&&!l--)break;c=!l}}return n.pop(),i.pop(),c};C.isEqual=function(t,e){return E(t,e,[],[])},C.isEmpty=function(t){if(null==t)return!0;if(C.isArray(t)||C.isString(t))return 0===t.length;for(var e in t)if(C.has(t,e))return!1;return!0},C.isElement=function(t){return!(!t||1!==t.nodeType)},C.isArray=b||function(t){return"[object Array]"==u.call(t)},C.isObject=function(t){return t===Object(t)},L(["Arguments","Function","String","Number","Date","RegExp"],function(t){C["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),C.isArguments(arguments)||(C.isArguments=function(t){return!(!t||!C.has(t,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(t){return"function"==typeof t}),C.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},C.isNaN=function(t){return C.isNumber(t)&&t!=+t},C.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==u.call(t)},C.isNull=function(t){return null===t},C.isUndefined=function(t){return void 0===t},C.has=function(t,e){return c.call(t,e)},C.noConflict=function(){return t._=e,this},C.identity=function(t){return t},C.constant=function(t){return function(){return t}},C.property=function(t){return function(e){return e[t]}},C.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},C.times=function(t,e,n){for(var i=Array(Math.max(0,t)),o=0;t>o;o++)i[o]=e.call(n,o);return i},C.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},C.now=Date.now||function(){return(new Date).getTime()};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=C.invert(I.escape);var A={escape:new RegExp("["+C.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(I.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(t){C[t]=function(e){return null==e?"":(""+e).replace(A[t],function(e){return I[t][e]})}}),C.result=function(t,e){if(null==t)return void 0;var n=t[e];return C.isFunction(n)?n.call(t):n},C.mixin=function(t){L(C.functions(t),function(e){var n=C[e]=t[e];C.prototype[e]=function(){var t=[this._wrapped];return r.apply(t,arguments),B.call(this,n.apply(C,t))}})};var F=0;C.uniqueId=function(t){var e=++F+"";return t?t+e:e},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(t,e,n){var i;n=C.defaults({},n,C.templateSettings);var o=new RegExp([(n.escape||O).source,(n.interpolate||O).source,(n.evaluate||O).source].join("|")+"|$","g"),a=0,r="__p+='";t.replace(o,function(e,n,i,o,s){return r+=t.slice(a,s).replace(R,function(t){return"\\"+N[t]}),n&&(r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(r+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),o&&(r+="';\n"+o+"\n__p+='"),a=s+e.length,e}),r+="';\n",n.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{i=new Function(n.variable||"obj","_",r)}catch(s){throw s.source=r,s}if(e)return i(e,C);var l=function(t){return i.call(this,t,C)};return l.source="function("+(n.variable||"obj")+"){\n"+r+"}",l},C.chain=function(t){return C(t).chain()};var B=function(t){return this._chain?C(t).chain():t};C.mixin(C),L(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];C.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],B.call(this,n)}}),L(["concat","join","slice"],function(t){var e=i[t];C.prototype[t]=function(){return B.call(this,e.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return C})}.call(this),function(){L.labelVersion="0.2.1-dev",L.Label=L.Class.extend({includes:L.Mixin.Events,options:{className:"",clickable:!1,direction:"right",noHide:!1,offset:[12,-15],opacity:1,zoomAnimation:!0},initialize:function(t,e){L.setOptions(this,t),this._source=e,this._animated=L.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._pane=this._source instanceof L.Marker?t._panes.markerPane:t._panes.popupPane,this._container||this._initLayout(),this._pane.appendChild(this._container),this._initInteraction(),this._update(),this.setOpacity(this.options.opacity),t.on("moveend",this._onMoveEnd,this).on("viewreset",this._onViewReset,this),this._animated&&t.on("zoomanim",this._zoomAnimation,this),L.Browser.touch&&!this.options.noHide&&L.DomEvent.on(this._container,"click",this.close,this)},onRemove:function(t){this._pane.removeChild(this._container),t.off({zoomanim:this._zoomAnimation,moveend:this._onMoveEnd,viewreset:this._onViewReset},this),this._removeInteraction(),this._map=null},setLatLng:function(t){return this._latlng=L.latLng(t),this._map&&this._updatePosition(),this},setContent:function(t){return this._previousContent=this._content,this._content=t,this._updateContent(),this},close:function(){var t=this._map;t&&(L.Browser.touch&&!this.options.noHide&&L.DomEvent.off(this._container,"click",this.close),t.removeLayer(this))},updateZIndex:function(t){this._zIndex=t,this._container&&this._zIndex&&(this._container.style.zIndex=t)},setOpacity:function(t){this.options.opacity=t,this._container&&L.DomUtil.setOpacity(this._container,t)},_initLayout:function(){this._container=L.DomUtil.create("div","leaflet-label "+this.options.className+" leaflet-zoom-animated"),this.updateZIndex(this._zIndex)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updatePosition(),this._container.style.visibility="")},_updateContent:function(){this._content&&this._map&&this._prevContent!==this._content&&"string"==typeof this._content&&(this._container.innerHTML=this._content,this._prevContent=this._content,this._labelWidth=this._container.offsetWidth)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},_setPosition:function(t){var e=this._map,n=this._container,i=e.latLngToContainerPoint(e.getCenter()),o=e.layerPointToContainerPoint(t),a=this.options.direction,r=this._labelWidth,s=L.point(this.options.offset);"right"===a||"auto"===a&&o.x<i.x?(L.DomUtil.addClass(n,"leaflet-label-right"),L.DomUtil.removeClass(n,"leaflet-label-left"),t=t.add(s)):(L.DomUtil.addClass(n,"leaflet-label-left"),L.DomUtil.removeClass(n,"leaflet-label-right"),t=t.add(L.point(-s.x-r,s.y))),L.DomUtil.setPosition(n,t)},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPosition(e)},_onMoveEnd:function(){this._animated&&"auto"!==this.options.direction||this._updatePosition()},_onViewReset:function(t){t&&t.hard&&this._update()},_initInteraction:function(){if(this.options.clickable){var t=this._container,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];L.DomUtil.addClass(t,"leaflet-clickable"),L.DomEvent.on(t,"click",this._onMouseClick,this);for(var n=0;e.length>n;n++)L.DomEvent.on(t,e[n],this._fireMouseEvent,this)}},_removeInteraction:function(){if(this.options.clickable){var t=this._container,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];L.DomUtil.removeClass(t,"leaflet-clickable"),L.DomEvent.off(t,"click",this._onMouseClick,this);for(var n=0;e.length>n;n++)L.DomEvent.off(t,e[n],this._fireMouseEvent,this)}},_onMouseClick:function(t){this.hasEventListeners(t.type)&&L.DomEvent.stopPropagation(t),this.fire(t.type,{originalEvent:t})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&L.DomEvent.preventDefault(t),"mousedown"!==t.type?L.DomEvent.stopPropagation(t):L.DomEvent.preventDefault(t)}}),L.BaseMarkerMethods={showLabel:function(){return this.label&&this._map&&(this.label.setLatLng(this._latlng),this._map.showLabel(this.label)),this},hideLabel:function(){return this.label&&this.label.close(),this},setLabelNoHide:function(t){this._labelNoHide!==t&&(this._labelNoHide=t,t?(this._removeLabelRevealHandlers(),this.showLabel()):(this._addLabelRevealHandlers(),this.hideLabel()))},bindLabel:function(t,e){var n=this.options.icon?this.options.icon.options.labelAnchor:this.options.labelAnchor,i=L.point(n)||L.point(0,0);return i=i.add(L.Label.prototype.options.offset),e&&e.offset&&(i=i.add(e.offset)),e=L.Util.extend({offset:i},e),this._labelNoHide=e.noHide,this.label||(this._labelNoHide||this._addLabelRevealHandlers(),this.on("remove",this.hideLabel,this).on("move",this._moveLabel,this).on("add",this._onMarkerAdd,this),this._hasLabelHandlers=!0),this.label=new L.Label(e,this).setContent(t),this},unbindLabel:function(){return this.label&&(this.hideLabel(),this.label=null,this._hasLabelHandlers&&(this._labelNoHide||this._removeLabelRevealHandlers(),this.off("remove",this.hideLabel,this).off("move",this._moveLabel,this).off("add",this._onMarkerAdd,this)),this._hasLabelHandlers=!1),this},updateLabelContent:function(t){this.label&&this.label.setContent(t)},getLabel:function(){return this.label},_onMarkerAdd:function(){this._labelNoHide&&this.showLabel()},_addLabelRevealHandlers:function(){this.on("mouseover",this.showLabel,this).on("mouseout",this.hideLabel,this),L.Browser.touch&&this.on("click",this.showLabel,this)},_removeLabelRevealHandlers:function(){this.off("mouseover",this.showLabel,this).off("mouseout",this.hideLabel,this),L.Browser.touch&&this.off("click",this.showLabel,this)},_moveLabel:function(t){this.label.setLatLng(t.latlng)}},L.Icon.Default.mergeOptions({labelAnchor:new L.Point(9,-20)}),L.Marker.mergeOptions({icon:new L.Icon.Default}),L.Marker.include(L.BaseMarkerMethods),L.Marker.include({_originalUpdateZIndex:L.Marker.prototype._updateZIndex,_updateZIndex:function(t){var e=this._zIndex+t;this._originalUpdateZIndex(t),this.label&&this.label.updateZIndex(e)},_originalSetOpacity:L.Marker.prototype.setOpacity,setOpacity:function(t,e){this.options.labelHasSemiTransparency=e,this._originalSetOpacity(t)},_originalUpdateOpacity:L.Marker.prototype._updateOpacity,_updateOpacity:function(){var t=0===this.options.opacity?0:1;this._originalUpdateOpacity(),this.label&&this.label.setOpacity(this.options.labelHasSemiTransparency?this.options.opacity:t)},_originalSetLatLng:L.Marker.prototype.setLatLng,setLatLng:function(t){return this.label&&!this._labelNoHide&&this.hideLabel(),this._originalSetLatLng(t)}}),L.CircleMarker.mergeOptions({labelAnchor:new L.Point(0,0)}),L.CircleMarker.include(L.BaseMarkerMethods),L.Path.include({bindLabel:function(t,e){return this.label&&this.label.options===e||(this.label=new L.Label(e,this)),this.label.setContent(t),this._showLabelAdded||(this.on("mouseover",this._showLabel,this).on("mousemove",this._moveLabel,this).on("mouseout remove",this._hideLabel,this),L.Browser.touch&&this.on("click",this._showLabel,this),this._showLabelAdded=!0),this},unbindLabel:function(){return this.label&&(this._hideLabel(),this.label=null,this._showLabelAdded=!1,this.off("mouseover",this._showLabel,this).off("mousemove",this._moveLabel,this).off("mouseout remove",this._hideLabel,this)),this},updateLabelContent:function(t){this.label&&this.label.setContent(t)},_showLabel:function(t){this.label.setLatLng(t.latlng),this._map.showLabel(this.label)},_moveLabel:function(t){this.label.setLatLng(t.latlng)},_hideLabel:function(){this.label.close()}}),L.Map.include({showLabel:function(t){return this.addLayer(t)}}),L.FeatureGroup.include({clearLayers:function(){return this.unbindLabel(),this.eachLayer(this.removeLayer,this),this},bindLabel:function(t,e){return this.invoke("bindLabel",t,e)},unbindLabel:function(){return this.invoke("unbindLabel")},updateLabelContent:function(t){this.invoke("updateLabelContent",t)}})}(this,document),function(){L.Control.FullScreen=L.Control.extend({options:{position:"topleft",title:"Full Screen",forceSeparateButton:!1,forcePseudoFullscreen:!1,fullScreenEl:null},onAdd:function(t){var e,n="leaflet-control-zoom-fullscreen";return e=t.zoomControl&&!this.options.forceSeparateButton?t.zoomControl._container:L.DomUtil.create("div","leaflet-bar"),this._createButton(this.options.title,n,e,this.toggleFullScreen,this),e},_createButton:function(e,n,i,o,a){var r=L.DomUtil.create("a",n,i);return r.href="#",r.title=e,L.DomEvent.addListener(r,"click",L.DomEvent.stopPropagation).addListener(r,"click",L.DomEvent.preventDefault).addListener(r,"click",o,a),L.DomEvent.addListener(i,t.fullScreenEventName,L.DomEvent.stopPropagation).addListener(i,t.fullScreenEventName,L.DomEvent.preventDefault).addListener(i,t.fullScreenEventName,this._handleEscKey,a),L.DomEvent.addListener(document,t.fullScreenEventName,L.DomEvent.stopPropagation).addListener(document,t.fullScreenEventName,L.DomEvent.preventDefault).addListener(document,t.fullScreenEventName,this._handleEscKey,a),r},toggleFullScreen:function(){var e=this._map,n=this.options.fullScreenEl||e._container;e._exitFired=!1,e._isFullscreen?(t.supportsFullScreen&&!this.options.forcePseudoFullscreen?t.cancelFullScreen(n):L.DomUtil.removeClass(n,"leaflet-pseudo-fullscreen"),e.invalidateSize(),e.fire("exitFullscreen"),e._exitFired=!0,e._isFullscreen=!1):(t.supportsFullScreen&&!this.options.forcePseudoFullscreen?t.requestFullScreen(n):L.DomUtil.addClass(n,"leaflet-pseudo-fullscreen"),e.invalidateSize(),e.fire("enterFullscreen"),e._isFullscreen=!0)
},_handleEscKey:function(){var e=this._map;t.isFullScreen(e)||e._exitFired||(e.fire("exitFullscreen"),e._exitFired=!0,e._isFullscreen=!1)}}),L.Map.addInitHook(function(){this.options.fullscreenControl&&(this.fullscreenControl=L.control.fullscreen(this.options.fullscreenControlOptions),this.addControl(this.fullscreenControl))}),L.control.fullscreen=function(t){return new L.Control.FullScreen(t)};var t={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},e="webkit moz o ms khtml".split(" ");if("undefined"!=typeof document.exitFullscreen)t.supportsFullScreen=!0;else for(var n=0,i=e.length;i>n;n++)if(t.prefix=e[n],"undefined"!=typeof document[t.prefix+"CancelFullScreen"]){t.supportsFullScreen=!0;break}t.supportsFullScreen&&(t.fullScreenEventName=t.prefix+"fullscreenchange",t.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},t.requestFullScreen=function(t){return""===this.prefix?t.requestFullscreen():t[this.prefix+"RequestFullScreen"]()},t.cancelFullScreen=function(){return""===this.prefix?document.exitFullscreen():document[this.prefix+"CancelFullScreen"]()}),"undefined"!=typeof jQuery&&(jQuery.fn.requestFullScreen=function(){return this.each(function(){var e=jQuery(this);t.supportsFullScreen&&t.requestFullScreen(e)})}),window.fullScreenApi=t}(),L.Control.Sidebar=L.Control.extend({includes:L.Mixin.Events,initialize:function(t,e){var n,i;for(L.setOptions(this,e),this._sidebar=L.DomUtil.get(t),L.Browser.touch&&L.DomUtil.addClass(this._sidebar,"leaflet-touch"),n=this._sidebar.children.length-1;n>=0;n--)i=this._sidebar.children[n],"UL"==i.tagName&&L.DomUtil.hasClass(i,"sidebar-tabs")?this._tabs=i:"DIV"==i.tagName&&L.DomUtil.hasClass(i,"sidebar-content")&&(this._container=i);for(this._tabitems=[],n=this._tabs.children.length-1;n>=0;n--)i=this._tabs.children[n],"LI"==i.tagName&&(this._tabitems.push(i),i._sidebar=this);for(this._panes=[],n=this._container.children.length-1;n>=0;n--)i=this._container.children[n],"DIV"==i.tagName&&L.DomUtil.hasClass(i,"sidebar-pane")&&this._panes.push(i);this._hasTouchStart=L.Browser.touch&&"ontouchstart"in document.documentElement},addTo:function(t){this._map=t;for(var e=this._hasTouchStart?"touchstart":"click",n=this._tabitems.length-1;n>=0;n--){var i=this._tabitems[n];L.DomEvent.on(i.firstChild,e,this._onClick,i)}return this},removeFrom:function(){this._map=null;for(var t=this._hasTouchStart?"touchstart":"click",e=this._tabitems.length-1;e>=0;e--){var n=this._tabitems[e];L.DomEvent.off(n.firstChild,t,this._onClick)}return this},open:function(t){var e,n;for(e=this._panes.length-1;e>=0;e--)n=this._panes[e],n.id==t?L.DomUtil.addClass(n,"active"):L.DomUtil.hasClass(n,"active")&&L.DomUtil.removeClass(n,"active");for(e=this._tabitems.length-1;e>=0;e--)n=this._tabitems[e],n.firstChild.hash=="#"+t?L.DomUtil.addClass(n,"active"):L.DomUtil.hasClass(n,"active")&&L.DomUtil.removeClass(n,"active");return this.fire("content",{id:t}),L.DomUtil.hasClass(this._sidebar,"collapsed")&&(this.fire("opening"),L.DomUtil.removeClass(this._sidebar,"collapsed")),this},close:function(){for(var t=this._tabitems.length-1;t>=0;t--){var e=this._tabitems[t];L.DomUtil.hasClass(e,"active")&&L.DomUtil.removeClass(e,"active")}return L.DomUtil.hasClass(this._sidebar,"collapsed")||(this.fire("closing"),L.DomUtil.addClass(this._sidebar,"collapsed")),this},_onClick:function(){L.DomUtil.hasClass(this,"active")?this._sidebar.close():this._sidebar.open(this.firstChild.hash.slice(1))}}),L.control.sidebar=function(t,e){return new L.Control.Sidebar(t,e)},function(){L.Control.NavBar=L.Control.extend({options:{position:"topleft",forwardTitle:"Go forward in map view history",backTitle:"Go back in map view history",homeTitle:"Go to home map view"},onAdd:function(t){this.options.center||(this.options.center=t.getCenter()),this.options.zoom||(this.options.zoom=t.getZoom()),options=this.options;var e="leaflet-control-navbar",n=L.DomUtil.create("div",e+" leaflet-bar");return this._homeButton=this._createButton(options.homeTitle,e+"-home",n,this._goHome),this._fwdButton=this._createButton(options.forwardTitle,e+"-fwd",n,this._goFwd),this._backButton=this._createButton(options.backTitle,e+"-back",n,this._goBack),this._viewHistory=[{center:this.options.center,zoom:this.options.zoom}],this._curIndx=0,this._updateDisabled(),t.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this),t.setView(options.center,options.zoom),n},onRemove:function(t){t.off("moveend",this._updateHistory,this)},_goHome:function(){this.options.home_center&&this.options.home_zoom?this._map.setView(this.options.home_center,this.options.home_zoom):this._map.setView(this.options.center,this.options.zoom)},_goBack:function(){if(0!==this._curIndx){this._map.off("moveend",this._updateHistory,this),this._map.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this),this._curIndx--,this._updateDisabled();var t=this._viewHistory[this._curIndx];this._map.setView(t.center,t.zoom)}},_goFwd:function(){if(this._curIndx!=this._viewHistory.length-1){this._map.off("moveend",this._updateHistory,this),this._map.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this),this._curIndx++,this._updateDisabled();var t=this._viewHistory[this._curIndx];this._map.setView(t.center,t.zoom)}},_createButton:function(t,e,n,i){var o=L.DomUtil.create("a",e,n);return o.href="#",o.title=t,L.DomEvent.on(o,"mousedown dblclick",L.DomEvent.stopPropagation).on(o,"click",L.DomEvent.stop).on(o,"click",i,this).on(o,"click",this._refocusOnMap,this),o},_updateHistory:function(){var t={center:this._map.getCenter(),zoom:this._map.getZoom()},e=this._curIndx+1;this._viewHistory.splice(e,this._viewHistory.length-e,t),this._curIndx++,this._updateDisabled()},_setFwdEnabled:function(t){var e="leaflet-disabled",n="leaflet-control-navbar-fwd-disabled";t===!0?(L.DomUtil.removeClass(this._fwdButton,n),L.DomUtil.removeClass(this._fwdButton,e)):(L.DomUtil.addClass(this._fwdButton,n),L.DomUtil.addClass(this._fwdButton,e))},_setBackEnabled:function(t){var e="leaflet-disabled",n="leaflet-control-navbar-back-disabled";t===!0?(L.DomUtil.removeClass(this._backButton,n),L.DomUtil.removeClass(this._backButton,e)):(L.DomUtil.addClass(this._backButton,n),L.DomUtil.addClass(this._backButton,e))},_updateDisabled:function(){this._setFwdEnabled(this._curIndx==this._viewHistory.length-1?!1:!0),this._setBackEnabled(this._curIndx<=0?!1:!0)}}),L.control.navbar=function(t){return new L.Control.NavBar(t)}}(),!function t(e,n,i){function o(r,s){if(!n[r]){if(!e[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[r]={exports:{}};e[r][0].call(c.exports,function(t){var n=e[r][1][t];return o(n?n:t)},c,c.exports,t,e,n,i)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(t,e){"use strict";function n(t){var e;t&&t.length&&(e=t,t=e.length);var n=new Uint8Array(t||0);return e&&n.set(e),n.readUInt32LE=o.readUInt32LE,n.writeUInt32LE=o.writeUInt32LE,n.readInt32LE=o.readInt32LE,n.writeInt32LE=o.writeInt32LE,n.readFloatLE=o.readFloatLE,n.writeFloatLE=o.writeFloatLE,n.readDoubleLE=o.readDoubleLE,n.writeDoubleLE=o.writeDoubleLE,n.toString=o.toString,n.write=o.write,n.slice=o.slice,n.copy=o.copy,n._isBuffer=!0,n}function i(t){for(var e,n,i=t.length,o=[],a=0;i>a;a++){if(e=t.charCodeAt(a),e>55295&&57344>e){if(!n){e>56319||a+1===i?o.push(239,191,189):n=e;continue}if(56320>e){o.push(239,191,189),n=e;continue}e=n-55296<<10|e-56320|65536,n=null}else n&&(o.push(239,191,189),n=null);128>e?o.push(e):2048>e?o.push(e>>6|192,63&e|128):65536>e?o.push(e>>12|224,e>>6&63|128,63&e|128):o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}return o}e.exports=n;var o,a,r,s=t("ieee754");o={readUInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},writeUInt32LE:function(t,e){this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24},readInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+(this[t+3]<<24)},readFloatLE:function(t){return s.read(this,t,!0,23,4)},readDoubleLE:function(t){return s.read(this,t,!0,52,8)},writeFloatLE:function(t,e){return s.write(this,t,e,!0,23,4)},writeDoubleLE:function(t,e){return s.write(this,t,e,!0,52,8)},toString:function(t,e,n){var i="",o="";e=e||0,n=Math.min(this.length,n||this.length);for(var a=e;n>a;a++){var r=this[a];127>=r?(i+=decodeURIComponent(o)+String.fromCharCode(r),o=""):o+="%"+r.toString(16)}return i+=decodeURIComponent(o)},write:function(t,e){for(var n=t===a?r:i(t),o=0;o<n.length;o++)this[e+o]=n[o]},slice:function(t,e){return this.subarray(t,e)},copy:function(t,e){e=e||0;for(var n=0;n<this.length;n++)t[e+n]=this[n]}},o.writeInt32LE=o.writeUInt32LE,n.byteLength=function(t){return a=t,r=i(t),r.length},n.isBuffer=function(t){return!(!t||!t._isBuffer)}},{ieee754:3}],2:[function(t,e){(function(n){"use strict";function i(t){this.buf=p.isBuffer(t)?t:new p(t||0),this.pos=0,this.length=this.buf.length}function o(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function a(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function r(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function s(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function l(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function u(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function c(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function h(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}e.exports=i;var p=n.Buffer||t("./buffer");i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var f=4294967296,m=1/f,g=Math.pow(2,63);i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),o=i>>3,a=this.pos;t(o,e,this),this.pos===a&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=this.buf.readUInt32LE(this.pos);return this.pos+=4,t},readSFixed32:function(){var t=this.buf.readInt32LE(this.pos);return this.pos+=4,t},readFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*f;return this.pos+=8,t},readSFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*f;return this.pos+=8,t},readFloat:function(){var t=this.buf.readFloatLE(this.pos);return this.pos+=4,t},readDouble:function(){var t=this.buf.readDoubleLE(this.pos);return this.pos+=8,t},readVarint:function(){var t,e,n,i,o,a,r=this.buf;if(n=r[this.pos++],128>n)return n;if(n=127&n,i=r[this.pos++],128>i)return n|i<<7;if(i=(127&i)<<7,o=r[this.pos++],128>o)return n|i|o<<14;if(o=(127&o)<<14,a=r[this.pos++],128>a)return n|i|o|a<<21;if(t=n|i|o|(127&a)<<21,e=r[this.pos++],t+=268435456*(127&e),128>e)return t;if(e=r[this.pos++],t+=34359738368*(127&e),128>e)return t;if(e=r[this.pos++],t+=4398046511104*(127&e),128>e)return t;if(e=r[this.pos++],t+=562949953421312*(127&e),128>e)return t;if(e=r[this.pos++],t+=72057594037927940*(127&e),128>e)return t;if(e=r[this.pos++],t+=0x8000000000000000*(127&e),128>e)return t;throw new Error("Expected varint not more than 10 bytes")},readVarint64:function(){var t=this.pos,e=this.readVarint();if(g>e)return e;for(var n=this.pos-2;255===this.buf[n];)n--;t>n&&(n=t),e=0;for(var i=0;n-t+1>i;i++){var o=127&~this.buf[t+i];e+=4>i?o<<7*i:o*Math.pow(2,7*i)}return-e-1},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.buf.toString("utf8",this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.slice(this.pos,t);return this.pos=t,e},readPackedVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readVarint());return e},readPackedSVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new p(e);this.buf.copy(n),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(t){this.realloc(4),this.buf.writeUInt32LE(t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),this.buf.writeInt32LE(t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(-1&t,this.pos),this.buf.writeUInt32LE(Math.floor(t*m),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(-1&t,this.pos),this.buf.writeInt32LE(Math.floor(t*m),this.pos+4),this.pos+=8},writeVarint:function(t){if(t=+t,127>=t)this.realloc(1),this.buf[this.pos++]=t;else if(16383>=t)this.realloc(2),this.buf[this.pos++]=t>>>0&127|128,this.buf[this.pos++]=t>>>7&127;else if(2097151>=t)this.realloc(3),this.buf[this.pos++]=t>>>0&127|128,this.buf[this.pos++]=t>>>7&127|128,this.buf[this.pos++]=t>>>14&127;else if(268435455>=t)this.realloc(4),this.buf[this.pos++]=t>>>0&127|128,this.buf[this.pos++]=t>>>7&127|128,this.buf[this.pos++]=t>>>14&127|128,this.buf[this.pos++]=t>>>21&127;else{for(var e=this.pos;t>=128;)this.realloc(1),this.buf[this.pos++]=255&t|128,t/=128;if(this.realloc(1),this.buf[this.pos++]=0|t,this.pos-e>10)throw new Error("Given varint doesn't fit into 10 bytes")}},writeSVarint:function(t){this.writeVarint(0>t?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t);var e=p.byteLength(t);this.writeVarint(e),this.realloc(e),this.buf.write(t,this.pos),this.pos+=e},writeFloat:function(t){this.realloc(4),this.buf.writeFloatLE(t,this.pos),this.pos+=4},writeDouble:function(t){this.realloc(8),this.buf.writeDoubleLE(t,this.pos),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;e>n;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n,o=127>=i?1:16383>=i?2:2097151>=i?3:268435455>=i?4:Math.ceil(Math.log(i)/(7*Math.LN2));if(o>1){this.realloc(o-1);for(var a=this.pos-1;a>=n;a--)this.buf[a+o-1]=this.buf[a]}this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,i.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,o,e)},writePackedSVarint:function(t,e){this.writeMessage(t,a,e)},writePackedBoolean:function(t,e){this.writeMessage(t,l,e)},writePackedFloat:function(t,e){this.writeMessage(t,r,e)},writePackedDouble:function(t,e){this.writeMessage(t,s,e)},writePackedFixed32:function(t,e){this.writeMessage(t,u,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,c,e)},writePackedFixed64:function(t,e){this.writeMessage(t,d,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,h,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./buffer":1}],3:[function(t,e,n){n.read=function(t,e,n,i,o){var a,r,s=8*o-i-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?o-1:0,h=n?-1:1,p=t[e+d];for(d+=h,a=p&(1<<-c)-1,p>>=-c,c+=s;c>0;a=256*a+t[e+d],d+=h,c-=8);for(r=a&(1<<-c)-1,a>>=-c,c+=i;c>0;r=256*r+t[e+d],d+=h,c-=8);if(0===a)a=1-u;else{if(a===l)return r?0/0:(p?-1:1)*(1/0);r+=Math.pow(2,i),a-=u}return(p?-1:1)*r*Math.pow(2,a-i)},n.write=function(t,e,n,i,o,a){var r,s,l,u=8*a-o-1,c=(1<<u)-1,d=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:a-1,f=i?1:-1,m=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,r=c):(r=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-r))<1&&(r--,l*=2),e+=r+d>=1?h/l:h*Math.pow(2,1-d),e*l>=2&&(r++,l/=2),r+d>=c?(s=0,r=c):r+d>=1?(s=(e*l-1)*Math.pow(2,o),r+=d):(s=e*Math.pow(2,d-1)*Math.pow(2,o),r=0));o>=8;t[n+p]=255&s,p+=f,s/=256,o-=8);for(r=r<<o|s,u+=o;u>0;t[n+p]=255&r,p+=f,r/=256,u-=8);t[n+p-f]|=128*m}},{}],4:[function(t,e){"use strict";function n(t,e){this.x=t,this.y=e}e.exports=n,n.prototype={clone:function(){return new n(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.x-n*this.y,o=n*this.x+e*this.y;return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(t){return t instanceof n?t:Array.isArray(t)?new n(t[0],t[1]):t}},{}],5:[function(t,e){e.exports.VectorTile=t("./lib/vectortile.js"),e.exports.VectorTileFeature=t("./lib/vectortilefeature.js"),e.exports.VectorTileLayer=t("./lib/vectortilelayer.js")},{"./lib/vectortile.js":6,"./lib/vectortilefeature.js":7,"./lib/vectortilelayer.js":8}],6:[function(t,e){"use strict";function n(t,e){this.layers=t.readFields(i,{},e)}function i(t,e,n){if(3===t){var i=new o(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}var o=t("./vectortilelayer");e.exports=n},{"./vectortilelayer":8}],7:[function(t,e){"use strict";function n(t,e,n,o,a){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=o,this._values=a,t.readFields(i,this,e)}function i(t,e,n){1==t?e._id=n.readVarint():2==t?o(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function o(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],o=e._values[t.readVarint()];e.properties[i]=o}}var a=t("point-geometry");e.exports=n,n.types=["Unknown","Point","LineString","Polygon"],n.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,o=0,r=0,s=0,l=[];t.pos<n;){if(!o){var u=t.readVarint();i=7&u,o=u>>3}if(o--,1===i||2===i)r+=t.readSVarint(),s+=t.readSVarint(),1===i&&(e&&l.push(e),e=[]),e.push(new a(r,s));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&l.push(e),l},n.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,o=0,a=0,r=1/0,s=-(1/0),l=1/0,u=-(1/0);t.pos<e;){if(!i){var c=t.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)o+=t.readSVarint(),a+=t.readSVarint(),r>o&&(r=o),o>s&&(s=o),l>a&&(l=a),a>u&&(u=a);else if(7!==n)throw new Error("unknown command "+n)}return[r,l,s,u]},n.prototype.toGeoJSON=function(t,e,i){for(var o=this.extent*Math.pow(2,i),a=this.extent*t,r=this.extent*e,s=this.loadGeometry(),l=n.types[this.type],u=0;u<s.length;u++)for(var c=s[u],d=0;d<c.length;d++){var h=c[d],p=180-360*(h.y+r)/o;c[d]=[360*(h.x+a)/o-180,360/Math.PI*Math.atan(Math.exp(p*Math.PI/180))-90]}return"Point"===l&&1===s.length?s=s[0][0]:"Point"===l?(s=s[0],l="MultiPoint"):"LineString"===l&&1===s.length?s=s[0]:"LineString"===l&&(l="MultiLineString"),{type:"Feature",geometry:{type:l,coordinates:s},properties:this.properties}}},{"point-geometry":4}],8:[function(t,e){"use strict";function n(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(i,this,e),this.length=this._features.length}function i(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(o(n))}function o(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}var a=t("./vectortilefeature.js");e.exports=n,n.prototype.feature=function(t){if(0>t||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,e,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":7}],9:[function(t,e){function n(t,e,n,i,a){if(!e)return null;for(var r in e)this[r]=e[r];this.mvtLayer=t,this.mvtSource=t.mvtSource,this.map=t.mvtSource.map,this.id=i,this.layerLink=this.mvtSource.layerLink,this.toggleEnabled=!0,this.selected=!1,this.divisor=e.extent/n.tileSize,this.extent=e.extent,this.tileSize=n.tileSize,this.tiles={},this.style=a,this.addTileFeature(e,n);var s=this;this.map.on("zoomend",function(){s.staticLabel=null}),a&&a.dynamicLabel&&"function"==typeof a.dynamicLabel&&(this.dynamicLabel=this.mvtSource.dynamicLabel.createFeature(this)),o(s)}function o(t){var e=t.style;if(e&&e.ajaxSource&&"function"==typeof e.ajaxSource){var n=e.ajaxSource(t);n&&s.getJSON(n,function(e,n){if(e)throw["ajaxSource AJAX Error",e];return a(t,n),!0})}return!1}function a(t,e){t.ajaxData=e,"function"==typeof t.ajaxDataReceived&&t.ajaxDataReceived(t,e),t._setStyle(t.mvtLayer.style),r(t)}function r(t){var e=t.tiles,n=t.mvtLayer;for(var i in e){var o=parseInt(i.split(":")[0]),a=t.map.getZoom();o===a&&n.redrawTile(i)}}var s=t("./MVTUtil"),l=t("./StaticLabel/StaticLabel.js");e.exports=n,n.prototype._setStyle=function(t){this.style=t(this,this.ajaxData),this.removeLabel()},n.prototype.setStyle=function(t){this.ajaxData=null,this.style=t(this,null);var e=o(this);e||this.removeLabel()},n.prototype.draw=function(t){var e=this.tiles[t],n=e.vtf,i=e.ctx,o=t.split(":").slice(1,3).join(":");if(i.canvas=this.mvtLayer._tiles[o],this.selected)var a=this.style.selected||this.style;else var a=this.style;switch(n.type){case 1:if(this._drawPoint(i,n.coordinates,a),!this.staticLabel&&"function"==typeof this.style.staticLabel){if(this.style.ajaxSource&&!this.ajaxData)break;this._drawStaticLabel(i,n.coordinates,a)}break;case 2:this._drawLineString(i,n.coordinates,a);break;case 3:this._drawPolygon(i,n.coordinates,a);break;default:throw new Error("Unmanaged type: "+n.type)}},n.prototype.getPathsForTile=function(t){return this.tiles[t].paths},n.prototype.addTileFeature=function(t,e){var n=this.map.getZoom();e.zoom==n&&(this.clearTileFeatures(n),this.tiles[e.id]={ctx:e,vtf:t,paths:[]})},n.prototype.clearTileFeatures=function(t){for(var e in this.tiles)e.split(":")[0]!=t&&delete this.tiles[e]},n.prototype.toggle=function(){this.selected?this.deselect():this.select()},n.prototype.select=function(){this.selected=!0,this.mvtSource.featureSelected(this),r(this);var t=this.linkedFeature();t&&t.staticLabel&&!t.staticLabel.selected&&t.staticLabel.select()},n.prototype.deselect=function(){this.selected=!1,this.mvtSource.featureDeselected(this),r(this);var t=this.linkedFeature();t&&t.staticLabel&&t.staticLabel.selected&&t.staticLabel.deselect()},n.prototype.on=function(t,e){this._eventHandlers[t]=e},n.prototype._drawPoint=function(t,e,n){if(n&&t&&t.canvas){var i=this.tiles[t.id],o=1;o="function"==typeof n.radius?n.radius(t.zoom):n.radius;var a,r=this._tilePoint(e[0][0]),s=t.canvas;try{a=s.getContext("2d")}catch(l){return void console.log("_drawPoint error: "+l)}a.beginPath(),a.fillStyle=n.color,a.arc(r.x,r.y,o,0,2*Math.PI),a.closePath(),a.fill(),n.lineWidth&&n.strokeStyle&&(a.lineWidth=n.lineWidth,a.strokeStyle=n.strokeStyle,a.stroke()),a.restore(),i.paths.push([r])}},n.prototype._drawLineString=function(t,e,n){if(n&&t&&t.canvas){var o=t.canvas.getContext("2d");o.strokeStyle=n.color,o.lineWidth=n.size,o.beginPath();var a=[],r=this.tiles[t.id];for(var s in e){var l=e[s];for(i=0;i<l.length;i++){var u=(0===i?"move":"line")+"To",c=this._tilePoint(l[i]);a.push(c),o[u](c.x,c.y)}}o.stroke(),o.restore(),r.paths.push(a)}},n.prototype._drawPolygon=function(t,e,n){if(n&&t&&t.canvas){var i=t.canvas.getContext("2d"),o=n.outline;i.fillStyle="function"==typeof n.color?n.color(i):n.color,o&&(i.strokeStyle=o.color,i.lineWidth=o.size),i.beginPath();var a=[],r=this.tiles[t.id],s=this.dynamicLabel;s&&s.addTilePolys(t,e);for(var l=0,u=e.length;u>l;l++)for(var c=e[l],d=0;d<c.length;d++){var h=(c[d],(0===d?"move":"line")+"To"),p=this._tilePoint(c[d]);a.push(p),i[h](p.x,p.y)}i.closePath(),i.fill(),o&&i.stroke(),r.paths.push(a)}},n.prototype._drawStaticLabel=function(t,e,n){if(n&&t&&this.mvtLayer._map){var i=this._tilePoint(e[0][0]),o=this._project(i,t.tile.x,t.tile.y,this.extent,this.tileSize),a=L.point(o.x,o.y),r=this.map.unproject(a);this.staticLabel=new l(this,t,r,n),this.mvtLayer.featureWithLabelAdded(this)}},n.prototype.removeLabel=function(){this.staticLabel&&(this.staticLabel.remove(),this.staticLabel=null)},n.prototype._project=function(t,e,n,i,o){var a=e*o,r=n*o;return{x:Math.floor(t.x+a),y:Math.floor(t.y+r)}},n.prototype._tilePoint=function(t){return new L.Point(t.x/this.divisor,t.y/this.divisor)},n.prototype.linkedFeature=function(){var t=this.mvtLayer.linkedLayer();if(t){var e=t.features[this.id];return e}return null}},{"./MVTUtil":12,"./StaticLabel/StaticLabel.js":13}],10:[function(require,module,exports){function removeLabels(t){for(var e=t.featuresWithLabels,n=0,i=e.length;i>n;n++){var o=e[n];o.removeLabel()}t.featuresWithLabels=[]}function in_circle(t,e,n,i,o){var a=Math.pow(t-i,2)+Math.pow(e-o,2);return a<=Math.pow(n,2)}function waitFor(testFx,onReady,timeOutMillis){var maxtimeOutMillis=timeOutMillis?timeOutMillis:3e3,start=(new Date).getTime(),condition="string"==typeof testFx?eval(testFx):testFx(),interval=setInterval(function(){(new Date).getTime()-start<maxtimeOutMillis&&!condition?condition="string"==typeof testFx?eval(testFx):testFx():condition?(console.log("'waitFor()' finished in "+((new Date).getTime()-start)+"ms."),clearInterval(interval),"string"==typeof onReady?eval(onReady):onReady("success")):(console.log("'waitFor()' timeout"),clearInterval(interval),"string"==typeof onReady?eval(onReady):onReady("timeout"))},50)}var MVTFeature=require("./MVTFeature"),Util=require("./MVTUtil");module.exports=L.TileLayer.Canvas.extend({options:{debug:!1,isHiddenLayer:!1,getIDForLayerFeature:function(){},tileSize:256,lineClickTolerance:2},_featureIsClicked:{},_isPointInPoly:function(t,e){if(e&&e.length){for(var n=!1,i=-1,o=e.length,a=o-1;++i<o;a=i)(e[i].y<=t.y&&t.y<e[a].y||e[a].y<=t.y&&t.y<e[i].y)&&t.x<(e[a].x-e[i].x)*(t.y-e[i].y)/(e[a].y-e[i].y)+e[i].x&&(n=!n);return n}},_getDistanceFromLine:function(t,e){var n=Number.POSITIVE_INFINITY;if(e&&e.length>1){t=L.point(t.x,t.y);for(var i=0,o=e.length-1;o>i;i++){var a=this._projectPointOnLineSegment(t,e[i],e[i+1]);a.distance<=n&&(n=a.distance)}}return n},_projectPointOnLineSegment:function(t,e,n){var i=e.distanceTo(n);if(1>i)return{distance:t.distanceTo(e),coordinate:e};var o=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/Math.pow(i,2);if(1e-7>o)return{distance:t.distanceTo(e),coordinate:e};if(o>.9999999)return{distance:t.distanceTo(n),coordinate:n};var a=L.point(e.x+o*(n.x-e.x),e.y+o*(n.y-e.y));return{distance:t.distanceTo(a),point:a}},initialize:function(t,e){var n=this;n.mvtSource=t,L.Util.setOptions(this,e),this.style=e.style,this.name=e.name,this._canvasIDToFeatures={},this.features={},this.featuresWithLabels=[],this._highestCount=0},onAdd:function(t){var e=this;e.map=t,L.TileLayer.Canvas.prototype.onAdd.call(this,t),t.on("layerremove",function(t){t.layer._leaflet_id===e._leaflet_id&&removeLabels(e)})},drawTile:function(t,e,n){var i={canvas:t,tile:e,zoom:n,tileSize:this.options.tileSize};i.id=Util.getContextID(i),this._canvasIDToFeatures[i.id]||this._initializeFeaturesHash(i),this.features||(this.features={})},_initializeFeaturesHash:function(t){this._canvasIDToFeatures[t.id]={},this._canvasIDToFeatures[t.id].features=[],this._canvasIDToFeatures[t.id].canvas=t.canvas},_draw:function(){},getCanvas:function(t){var e=t.tile,n=this._tiles[e.x+":"+e.y];if(n)return t.canvas=n,void this.redrawTile(t.id);var i=this;waitFor(function(){return n=i._tiles[e.x+":"+e.y],n?!0:void 0},function(){n=i._tiles[e.x+":"+e.y],t.canvas=n,i.redrawTile(t.id)},2e3)},parseVectorTileLayer:function(t,e){var n=this,i=e.tile,o={canvas:null,id:e.id,tile:e.tile,zoom:e.zoom,tileSize:e.tileSize};o.canvas=n._tiles[i.x+":"+i.y],this._canvasIDToFeatures[o.id]?this.clearTileFeatureHash(o.id):this._initializeFeaturesHash(o);for(var a=t.parsedFeatures,r=0,s=a.length;s>r;r++){var l=a[r];l.layer=t;var u=n.options.filter;if("function"!=typeof u||u(l,o)!==!1){var c;c="function"==typeof n.options.getIDForLayerFeature?n.options.getIDForLayerFeature:Util.getIDForLayerFeature;var d=n.options.getIDForLayerFeature(l)||r,h=n.features[d],p=n.options.layerOrdering;if("function"==typeof p&&p(l,o),h)h.addTileFeature(l,o);else{var f=n.style(l);n.features[d]=h=new MVTFeature(n,l,o,d,f),f&&f.dynamicLabel&&"function"==typeof f.dynamicLabel&&n.featuresWithLabels.push(h)}o&&o.id&&n._canvasIDToFeatures[o.id].features.push(h)}}var p=n.options.layerOrdering;p&&(n._canvasIDToFeatures[o.id].features=n._canvasIDToFeatures[o.id].features.sort(function(t,e){return-(e.properties.zIndex-t.properties.zIndex)})),n.redrawTile(o.id)},setStyle:function(t){this._highestCount=0,this._lowestCount=null,this.style=t;for(var e in this.features){var n=this.features[e];n.setStyle(t)}var i=this.map.getZoom();for(var e in this._tiles){var o=i+":"+e;this.redrawTile(o)}},setHighestCount:function(t){t>this._highestCount&&(this._highestCount=t)},getHighestCount:function(){return this._highestCount},setLowestCount:function(t){(!this._lowestCount||t<this._lowestCount)&&(this._lowestCount=t)},getLowestCount:function(){return this._lowestCount},setCountRange:function(t){this.setHighestCount(t),this.setLowestCount(t)},handleClickEvent:function(t,e){var n=t.tileID.split(":").slice(1,3).join(":"),i=t.tileID.split(":")[0],o=this._tiles[n];
o||e(t);for(var a,r,s,l=t.layerPoint.x-o._leaflet_pos.x,u=t.layerPoint.y-o._leaflet_pos.y,c={x:l,y:u},d=this._canvasIDToFeatures[t.tileID].features,h=Number.POSITIVE_INFINITY,p=null,f=0;f<d.length;f++){var m=d[f];switch(m.type){case 1:var g=3;for(g="function"==typeof m.style.radius?m.style.radius(i):m.style.radius,r=m.getPathsForTile(t.tileID),a=0;a<r.length;a++)in_circle(r[a][0].x,r[a][0].y,g,l,u)&&(p=m,h=0);break;case 2:for(r=m.getPathsForTile(t.tileID),a=0;a<r.length;a++)if(m.style){var s=this._getDistanceFromLine(c,r[a]),v=m.selected&&m.style.selected?m.style.selected.size:m.style.size;s<v/2+this.options.lineClickTolerance&&h>s&&(p=m,h=s)}break;case 3:for(r=m.getPathsForTile(t.tileID),a=0;a<r.length;a++)this._isPointInPoly(c,r[a])&&(p=m,h=0)}if(0==h)break}p&&p.toggleEnabled&&p.toggle(),t.feature=p,e(t)},clearTile:function(t){var e=t.split(":"),n=e[1]+":"+e[2];if("undefined"==typeof this._tiles[n])return void console.error("typeof this._tiles[canvasId] === 'undefined'");var i=this._tiles[n],o=i.getContext("2d");o.clearRect(0,0,i.width,i.height)},clearTileFeatureHash:function(t){this._canvasIDToFeatures[t]={features:[]}},clearLayerFeatureHash:function(){this.features={}},redrawTile:function(t){this.clearTile(t);var e=this._canvasIDToFeatures[t];if(e){for(var n=e.features,i=[],o=0;o<n.length;o++){var a=n[o];a.selected?i.push(a):a.draw(t)}for(var r=0,s=i.length;s>r;r++){var l=i[r];l.draw(t)}}},_resetCanvasIDToFeatures:function(t,e){this._canvasIDToFeatures[t]={},this._canvasIDToFeatures[t].features=[],this._canvasIDToFeatures[t].canvas=e},linkedLayer:function(){if(this.mvtSource.layerLink){var t=this.mvtSource.layerLink(this.name);return this.mvtSource.layers[t]}return null},featureWithLabelAdded:function(t){this.featuresWithLabels.push(t)}})},{"./MVTFeature":9,"./MVTUtil":12}],11:[function(t,e){function n(t,e,n){var i=parseInt(Math.floor((e+180)/360*(1<<n))),o=parseInt(Math.floor((1-Math.log(Math.tan(t.toRad())+1/Math.cos(t.toRad()))/Math.PI)/2*(1<<n)));return""+n+":"+i+":"+o}function i(t,e){t.loadedTiles[e.id]=e}function o(t){for(var e in t.layers){var n=t.layers[e];a(n)}return t}function a(t){t.parsedFeatures=[];for(var e=t._features,n=0,i=e.length;i>n;n++){var o=t.feature(n);o.coordinates=o.loadGeometry(),t.parsedFeatures.push(o)}return t}var r=t("vector-tile").VectorTile,s=t("pbf"),l=(t("point-geometry"),t("./MVTUtil")),u=t("./MVTLayer");e.exports=L.TileLayer.MVTSource=L.TileLayer.Canvas.extend({options:{debug:!1,url:"",getIDForLayerFeature:function(){},tileSize:256,visibleLayers:[]},layers:{},processedTiles:{},_eventHandlers:{},_triggerOnTilesLoadedEvent:!0,_url:"",style:function(t){var e={},n=t.type;switch(n){case 1:e.color="rgba(49,79,79,1)",e.radius=5,e.selected={color:"rgba(255,255,0,0.5)",radius:6};break;case 2:e.color="rgba(161,217,155,0.8)",e.size=3,e.selected={color:"rgba(255,25,0,0.5)",size:4};break;case 3:e.color="rgba(49,79,79,1)",e.outline={color:"rgba(161,217,155,0.8)",size:1},e.selected={color:"rgba(255,140,0,0.3)",outline:{color:"rgba(255,140,0,1)",size:2}}}return e},initialize:function(t){L.Util.setOptions(this,t),this.layers={},this.activeTiles={},this.loadedTiles={},this._url=this.options.url,this.zIndex=t.zIndex,"function"==typeof t.style&&(this.style=t.style),"function"==typeof t.ajaxSource&&(this.ajaxSource=t.ajaxSource),this.layerLink=t.layerLink,this._eventHandlers={},this._tilesToProcess=0},redraw:function(t){t===!1&&(this._triggerOnTilesLoadedEvent=!1),L.TileLayer.Canvas.prototype.redraw.call(this)},onAdd:function(t){var e=this;e.map=t,L.TileLayer.Canvas.prototype.onAdd.call(this,t);var n=function(t){e._onClick(t)};t.on("click",n),t.on("layerremove",function(i){i.layer._leaflet_id===e._leaflet_id&&i.layer.removeChildLayers&&(i.layer.removeChildLayers(t),t.off("click",n))}),e.addChildLayers(t),"function"==typeof DynamicLabel&&(this.dynamicLabel=new DynamicLabel(t,this,{}))},drawTile:function(t,e,n){var i={id:[n,e.x,e.y].join(":"),canvas:t,tile:e,zoom:n,tileSize:this.options.tileSize};this._tilesToProcess<this._tilesToLoad&&(this._tilesToProcess=this._tilesToLoad);var o=i.id=l.getContextID(i);this.activeTiles[o]=i,this.processedTiles[i.zoom]||(this.processedTiles[i.zoom]={}),this.options.debug&&this._drawDebugInfo(i),this._draw(i)},setOpacity:function(t){this._setVisibleLayersStyle("opacity",t)},setZIndex:function(t){this._setVisibleLayersStyle("zIndex",t)},_setVisibleLayersStyle:function(t,e){for(var n in this.layers)this.layers[n]._tileContainer.style[t]=e},_drawDebugInfo:function(t){var e=this.options.tileSize,n=t.canvas.getContext("2d");n.strokeStyle="#000000",n.fillStyle="#FFFF00",n.strokeRect(0,0,e,e),n.font="12px Arial",n.fillRect(0,0,5,5),n.fillRect(0,e-5,5,5),n.fillRect(e-5,0,5,5),n.fillRect(e-5,e-5,5,5),n.fillRect(e/2-5,e/2-5,10,10),n.strokeText(t.zoom+" "+t.tile.x+" "+t.tile.y,e/2-30,e/2-10)},_draw:function(t){var e=this;if(this._url){var n=this.getTileUrl({x:t.tile.x,y:t.tile.y,z:t.zoom}),a=new XMLHttpRequest;a.onload=function(){if("200"==a.status){if(!a.response)return;var n=new Uint8Array(a.response),l=new s(n),u=new r(l);if(e.map&&e.map.getZoom()!=t.zoom)return void console.log("Fetched tile for zoom level "+t.zoom+". Map is at zoom level "+e._map.getZoom());e.checkVectorTileLayers(o(u),t),i(e,t)}e.reduceTilesToProcessCount()},a.onerror=function(){console.log("xhr error: "+a.status)},a.open("GET",n,!0),a.responseType="arraybuffer",a.send()}},reduceTilesToProcessCount:function(){this._tilesToProcess--,this._tilesToProcess||(this._eventHandlers.PBFLoad&&this._eventHandlers.PBFLoad(),this._pbfLoaded())},checkVectorTileLayers:function(t,e,n){var i=this;if(i.options.visibleLayers&&i.options.visibleLayers.length>0)for(var o=0;o<i.options.visibleLayers.length;o++){var a=i.options.visibleLayers[o];t.layers[a]&&i.prepareMVTLayers(t.layers[a],a,e,n)}else for(var r in t.layers)i.prepareMVTLayers(t.layers[r],r,e,n)},prepareMVTLayers:function(t,e,n,i){var o=this;o.layers[e]||(o.layers[e]=o.createMVTLayer(e,t.parsedFeatures[0].type||null)),i?o.layers[e].getCanvas(n,t):o.layers[e].parseVectorTileLayer(t,n)},createMVTLayer:function(t){var e,n=this;e="function"==typeof n.options.getIDForLayerFeature?n.options.getIDForLayerFeature:l.getIDForLayerFeature;var i={getIDForLayerFeature:e,filter:n.options.filter,layerOrdering:n.options.layerOrdering,style:n.style,name:t,asynch:!0};n.options.zIndex&&(i.zIndex=n.zIndex);var o=new u(n,i).addTo(n.map);return o},getLayers:function(){return this.layers},hideLayer:function(t){this.layers[t]&&(this._map.removeLayer(this.layers[t]),this.options.visibleLayers.indexOf("id")>-1&&this.visibleLayers.splice(this.options.visibleLayers.indexOf("id"),1))},showLayer:function(t){this.layers[t]&&(this._map.addLayer(this.layers[t]),-1==this.options.visibleLayers.indexOf("id")&&this.visibleLayers.push(t)),this.bringToFront()},removeChildLayers:function(t){for(var e in this.layers){var n=this.layers[e];t.removeLayer(n)}},addChildLayers:function(t){var e=this;if(e.options.visibleLayers.length>0)for(var n=0;n<e.options.visibleLayers.length;n++){var i=e.options.visibleLayers[n],o=this.layers[i];o&&t.addLayer(o)}else for(var a in this.layers){var o=this.layers[a];o._map||t.addLayer(o)}},bind:function(t,e){this._eventHandlers[t]=e},_onClick:function(t){var e=this,i=e.options.onClick,o=e.options.clickableLayers,a=e.layers;if(t.tileID=n(t.latlng.lat,t.latlng.lng,this.map.getZoom()),o||(o=Object.keys(e.layers)),o&&o.length>0)for(var r=0,s=o.length;s>r;r++){var l=o[r],u=a[l];u&&u.handleClickEvent(t,function(t){"function"==typeof i&&i(t)})}else"function"==typeof i&&i(t)},setFilter:function(t,e){for(var n in this.layers){var i=this.layers[n];e?n.toLowerCase()==e.toLowerCase()&&(i.options.filter=t,i.clearLayerFeatureHash()):(i.options.filter=t,i.clearLayerFeatureHash())}},setStyle:function(t,e){for(var n in this.layers){var i=this.layers[n];e?n.toLowerCase()==e.toLowerCase()&&i.setStyle(t):i.setStyle(t)}},featureSelected:function(t){this.options.mutexToggle&&(this._selectedFeature&&this._selectedFeature.deselect(),this._selectedFeature=t),this.options.onSelect&&this.options.onSelect(t)},featureDeselected:function(t){this.options.mutexToggle&&this._selectedFeature&&(this._selectedFeature=null),this.options.onDeselect&&this.options.onDeselect(t)},_pbfLoaded:function(){this.bringToFront();var t=this,e=t.options.onTilesLoaded;e&&"function"==typeof e&&this._triggerOnTilesLoadedEvent===!0&&e(this),t._triggerOnTilesLoadedEvent=!0}}),"undefined"==typeof Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*Math.PI/180})},{"./MVTLayer":10,"./MVTUtil":12,pbf:2,"point-geometry":4,"vector-tile":5}],12:[function(t,e){var n=e.exports={};n.getContextID=function(t){return[t.zoom,t.tile.x,t.tile.y].join(":")},n.getIDForLayerFeature=function(t){return t.properties.id},n.getJSON=function(t,e){var n="undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.onreadystatechange=function(){var t=n.status;if(4===n.readyState&&t>=200&&300>t){var i=JSON.parse(n.responseText);e(null,i)}else e({error:!0,status:t})},n.open("GET",t,!0),n.send()}},{}],13:[function(t,e){function n(t,e,n,o){var a=this;if(this.mvtFeature=t,this.map=t.map,this.zoom=e.zoom,this.latLng=n,this.selected=!1,t.linkedFeature){var r=t.linkedFeature();r&&r.selected&&(a.selected=!0)}i(a,t,e,n,o)}function i(t,e,n,i,o){var a=e.ajaxData,r=t.style=o.staticLabel(e,a),s=t.icon=L.divIcon({className:r.cssClass||"label-icon-text",html:r.html,iconSize:r.iconSize||[50,50]});t.marker=L.marker(i,{icon:s}).addTo(t.map),t.selected&&t.marker._icon.classList.add(t.style.cssSelectedClass||"label-icon-text-selected"),t.marker.on("click",function(){t.toggle()}),t.map.on("zoomend",function(e){var n=e.target.getZoom();t.zoom!==n&&t.map.removeLayer(t.marker)})}t("../MVTUtil"),e.exports=n,n.prototype.toggle=function(){this.selected?this.deselect():this.select()},n.prototype.select=function(){this.selected=!0,this.marker._icon.classList.add(this.style.cssSelectedClass||"label-icon-text-selected");var t=this.mvtFeature.linkedFeature();t.selected||t.select()},n.prototype.deselect=function(){this.selected=!1,this.marker._icon.classList.remove(this.style.cssSelectedClass||"label-icon-text-selected");var t=this.mvtFeature.linkedFeature();t.selected&&t.deselect()},n.prototype.remove=function(){this.map&&this.marker&&this.map.removeLayer(this.marker)}},{"../MVTUtil":12}],14:[function(t,e){/**
 * Copyright (c) 2014, Spatial Development International
 * All rights reserved.
 *
 * Source code can be found at:
 * https://github.com/SpatialServer/Leaflet.MapboxVectorTile
 *
 * @license ISC
 */
e.exports=t("./MVTSource")},{"./MVTSource":11}]},{},[14]),function(t){var e;if("function"==typeof define&&define.amd)define(["leaflet"],t);else if("undefined"!=typeof module)e=require("leaflet"),module.exports=t(e);else{if("undefined"==typeof window.L)throw new Error("Leaflet must be loaded first");t(window.L)}}(function(t){"use strict";t.Control.Zoomslider=function(){var e=t.Draggable.extend({initialize:function(e,n,i){t.Draggable.prototype.initialize.call(this,e,e),this._element=e,this._stepHeight=n,this._knobHeight=i,this.on("predrag",function(){this._newPos.x=0,this._newPos.y=this._adjust(this._newPos.y)},this)},_adjust:function(t){var e=Math.round(this._toValue(t));return e=Math.max(0,Math.min(this._maxValue,e)),this._toY(e)},_toY:function(t){return this._k*t+this._m},_toValue:function(t){return(t-this._m)/this._k},setSteps:function(t){var e=t*this._stepHeight;this._maxValue=t-1,this._k=-this._stepHeight,this._m=e-(this._stepHeight+this._knobHeight)/2},setPosition:function(e){t.DomUtil.setPosition(this._element,t.point(0,this._adjust(e)))},setValue:function(t){this.setPosition(this._toY(t))},getValue:function(){return this._toValue(t.DomUtil.getPosition(this._element).y)}}),n=t.Control.extend({options:{position:"topleft",stepHeight:6,knobHeight:4,styleNS:"leaflet-control-zoomslider"},onAdd:function(t){return this._map=t,this._ui=this._createUI(),this._knob=new e(this._ui.knob,this.options.stepHeight,this.options.knobHeight),t.whenReady(this._initKnob,this).whenReady(this._initEvents,this).whenReady(this._updateSize,this).whenReady(this._updateKnobValue,this).whenReady(this._updateDisabled,this),this._ui.bar},onRemove:function(t){t.off("zoomlevelschange",this._updateSize,this).off("zoomend zoomlevelschange",this._updateKnobValue,this).off("zoomend zoomlevelschange",this._updateDisabled,this)},_createUI:function(){var e={},n=this.options.styleNS;return e.bar=t.DomUtil.create("div",n+" leaflet-bar"),e.zoomIn=this._createZoomBtn("in","top",e.bar),e.wrap=t.DomUtil.create("div",n+"-wrap leaflet-bar-part",e.bar),e.zoomOut=this._createZoomBtn("out","bottom",e.bar),e.body=t.DomUtil.create("div",n+"-body",e.wrap),e.knob=t.DomUtil.create("div",n+"-knob"),t.DomEvent.disableClickPropagation(e.bar),t.DomEvent.disableClickPropagation(e.knob),e},_createZoomBtn:function(e,n,i){var o=this.options.styleNS+"-"+e+" leaflet-bar-part leaflet-bar-part-"+n,a=t.DomUtil.create("a",o,i);return a.href="#",a.title="Zoom "+e,t.DomEvent.on(a,"click",t.DomEvent.preventDefault),a},_initKnob:function(){this._knob.enable(),this._ui.body.appendChild(this._ui.knob)},_initEvents:function(){this._map.on("zoomlevelschange",this._updateSize,this).on("zoomend zoomlevelschange",this._updateKnobValue,this).on("zoomend zoomlevelschange",this._updateDisabled,this),t.DomEvent.on(this._ui.body,"click",this._onSliderClick,this),t.DomEvent.on(this._ui.zoomIn,"click",this._zoomIn,this),t.DomEvent.on(this._ui.zoomOut,"click",this._zoomOut,this),this._knob.on("dragend",this._updateMapZoom,this)},_onSliderClick:function(e){var n=e.touches&&1===e.touches.length?e.touches[0]:e,i=t.DomEvent.getMousePosition(n,this._ui.body).y;this._knob.setPosition(i),this._updateMapZoom()},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_zoomLevels:function(){var t=this._map.getMaxZoom()-this._map.getMinZoom()+1;return 1/0>t?t:0},_toZoomLevel:function(t){return t+this._map.getMinZoom()},_toValue:function(t){return t-this._map.getMinZoom()},_updateSize:function(){var t=this._zoomLevels();this._ui.body.style.height=this.options.stepHeight*t+"px",this._knob.setSteps(t)},_updateMapZoom:function(){this._map.setZoom(this._toZoomLevel(this._knob.getValue()))},_updateKnobValue:function(){this._knob.setValue(this._toValue(this._map.getZoom()))},_updateDisabled:function(){var e=this._map.getZoom(),n=this.options.styleNS+"-disabled";t.DomUtil.removeClass(this._ui.zoomIn,n),t.DomUtil.removeClass(this._ui.zoomOut,n),e===this._map.getMinZoom()&&t.DomUtil.addClass(this._ui.zoomOut,n),e===this._map.getMaxZoom()&&t.DomUtil.addClass(this._ui.zoomIn,n)}});return n}(),t.Map.addInitHook(function(){this.options.zoomsliderControl&&(this.zoomsliderControl=new t.Control.Zoomslider,this.addControl(this.zoomsliderControl))}),t.control.zoomslider=function(e){return new t.Control.Zoomslider(e)}}),!function(){var t,e,n,i,o,a,r,s,l,u,c,d,h,p,f,m,g,v,y,_,b,w,x,C,L,S,k,D,T,M,P,E,I,A,F,O,N,R,B,U,z;u=function(e,n,i,o){return new t(e,n,i,o)},"undefined"!=typeof module&&null!==module&&null!=module.exports&&(module.exports=u),"function"==typeof define&&define.amd?define([],function(){return u}):(O="undefined"!=typeof exports&&null!==exports?exports:this,O.chroma=u),u.color=function(e,n,i,o){return new t(e,n,i,o)},u.hsl=function(e,n,i,o){return new t(e,n,i,o,"hsl")},u.hsv=function(e,n,i,o){return new t(e,n,i,o,"hsv")},u.rgb=function(e,n,i,o){return new t(e,n,i,o,"rgb")},u.hex=function(e){return new t(e)},u.css=function(e){return new t(e)},u.lab=function(e,n,i){return new t(e,n,i,"lab")},u.lch=function(e,n,i){return new t(e,n,i,"lch")},u.hsi=function(e,n,i){return new t(e,n,i,"hsi")},u.gl=function(e,n,i,o){return new t(255*e,255*n,255*i,o,"gl")},u.num=function(e){return new t(e,"num")},u.random=function(){var e,n,i,o;for(n="0123456789abcdef",e="#",i=o=0;6>o;i=++o)e+=n.charAt(Math.floor(16*Math.random()));return new t(e)},u.interpolate=function(e,n,i,o){var a,r;return null==e||null==n?"#000":(("string"===(a=N(e))||"number"===a)&&(e=new t(e)),("string"===(r=N(n))||"number"===r)&&(n=new t(n)),e.interpolate(i,n,o))},u.mix=u.interpolate,u.contrast=function(e,n){var i,o,a,r;return("string"===(a=N(e))||"number"===a)&&(e=new t(e)),("string"===(r=N(n))||"number"===r)&&(n=new t(n)),i=e.luminance(),o=n.luminance(),i>o?(i+.05)/(o+.05):(o+.05)/(i+.05)},u.luminance=function(t){return u(t).luminance()},u._Color=t,t=function(){function t(){var t,e,n,i,o,a,r,s,l,u,d,h,p,y,b,w;for(o=this,n=[],u=0,d=arguments.length;d>u;u++)e=arguments[u],null!=e&&n.push(e);if(0===n.length)h=[255,0,255,1,"rgb"],r=h[0],s=h[1],l=h[2],t=h[3],i=h[4];else if("array"===N(n[0])){if(3===n[0].length)p=n[0],r=p[0],s=p[1],l=p[2],t=1;else{if(4!==n[0].length)throw"unknown input argument";y=n[0],r=y[0],s=y[1],l=y[2],t=y[3]}i=null!=(b=n[1])?b:"rgb"}else"string"===N(n[0])?(r=n[0],i="hex"):"object"===N(n[0])?(w=n[0]._rgb,r=w[0],s=w[1],l=w[2],t=w[3],i="rgb"):n.length<=2&&"number"===N(n[0])?(r=n[0],i="num"):n.length>=3&&(r=n[0],s=n[1],l=n[2]);3===n.length?(i="rgb",t=1):4===n.length?"string"===N(n[3])?(i=n[3],t=1):"number"===N(n[3])&&(i="rgb",t=n[3]):5===n.length&&(t=n[3],i=n[4]),null==t&&(t=1),"rgb"===i?o._rgb=[r,s,l,t]:"gl"===i?o._rgb=[255*r,255*s,255*l,t]:"hsl"===i?(o._rgb=g(r,s,l),o._rgb[3]=t):"hsv"===i?(o._rgb=v(r,s,l),o._rgb[3]=t):"hex"===i?o._rgb=f(r):"lab"===i?(o._rgb=_(r,s,l),o._rgb[3]=t):"lch"===i?(o._rgb=x(r,s,l),o._rgb[3]=t):"hsi"===i?(o._rgb=m(r,s,l),o._rgb[3]=t):"num"===i&&(o._rgb=k(r)),a=c(o._rgb)}return t.prototype.rgb=function(){return this._rgb.slice(0,3)},t.prototype.rgba=function(){return this._rgb},t.prototype.hex=function(){return D(this._rgb)},t.prototype.toString=function(){return this.name()},t.prototype.hsl=function(){return M(this._rgb)},t.prototype.hsv=function(){return P(this._rgb)},t.prototype.lab=function(){return E(this._rgb)},t.prototype.lch=function(){return I(this._rgb)},t.prototype.hsi=function(){return T(this._rgb)},t.prototype.gl=function(){return[this._rgb[0]/255,this._rgb[1]/255,this._rgb[2]/255,this._rgb[3]]},t.prototype.num=function(){return A(this._rgb)},t.prototype.luminance=function(e,n){var i,o,a,r;return null==n&&(n="rgb"),arguments.length?(0===e&&(this._rgb=[0,0,0,this._rgb[3]]),1===e&&(this._rgb=[255,255,255,this._rgb[3]]),i=L(this._rgb),o=1e-7,a=20,r=function(t,i){var s,l;return l=t.interpolate(.5,i,n),s=l.luminance(),Math.abs(e-s)<o||!a--?l:s>e?r(t,l):r(l,i)},this._rgb=(i>e?r(new t("black"),this):r(this,new t("white"))).rgba(),this):L(this._rgb)},t.prototype.name=function(){var t,e;t=this.hex();for(e in u.colors)if(t===u.colors[e])return e;return t},t.prototype.alpha=function(t){return arguments.length?(this._rgb[3]=t,this):this._rgb[3]},t.prototype.css=function(t){var e,n,i,o;return null==t&&(t="rgb"),n=this,i=n._rgb,3===t.length&&i[3]<1&&(t+="a"),"rgb"===t?t+"("+i.slice(0,3).map(Math.round).join(",")+")":"rgba"===t?t+"("+i.slice(0,3).map(Math.round).join(",")+","+i[3]+")":"hsl"===t||"hsla"===t?(e=n.hsl(),o=function(t){return Math.round(100*t)/100},e[0]=o(e[0]),e[1]=o(100*e[1])+"%",e[2]=o(100*e[2])+"%",4===t.length&&(e[3]=i[3]),t+"("+e.join(",")+")"):void 0},t.prototype.interpolate=function(e,n,i){var o,a,r,s,l,u,c,d,h,p,f,m,g,v;if(d=this,null==i&&(i="rgb"),"string"===N(n)&&(n=new t(n)),"hsl"===i||"hsv"===i||"lch"===i||"hsi"===i)"hsl"===i?(g=d.hsl(),v=n.hsl()):"hsv"===i?(g=d.hsv(),v=n.hsv()):"hsi"===i?(g=d.hsi(),v=n.hsi()):"lch"===i&&(g=d.lch(),v=n.lch()),"h"===i.substr(0,1)?(r=g[0],f=g[1],u=g[2],s=v[0],m=v[1],c=v[2]):(u=g[0],f=g[1],r=g[2],c=v[0],m=v[1],s=v[2]),isNaN(r)||isNaN(s)?isNaN(r)?isNaN(s)?a=Number.NaN:(a=s,1!==u&&0!==u||"hsv"===i||(p=m)):(a=r,1!==c&&0!==c||"hsv"===i||(p=f)):(o=s>r&&s-r>180?s-(r+360):r>s&&r-s>180?s+360-r:s-r,a=r+e*o),null==p&&(p=f+e*(m-f)),l=u+e*(c-u),h="h"===i.substr(0,1)?new t(a,p,l,i):new t(l,p,a,i);else if("rgb"===i)g=d._rgb,v=n._rgb,h=new t(g[0]+e*(v[0]-g[0]),g[1]+e*(v[1]-g[1]),g[2]+e*(v[2]-g[2]),i);else if("num"===i)n instanceof t||(n=new t(n,i)),g=d._rgb,v=n._rgb,h=new t((g[0]+e*(v[0]-g[0])<<16)+(g[1]+e*(v[1]-g[1])<<8)+(g[2]+e*(v[2]-g[2])&255),i);else{if("lab"!==i)throw"color mode "+i+" is not supported";g=d.lab(),v=n.lab(),h=new t(g[0]+e*(v[0]-g[0]),g[1]+e*(v[1]-g[1]),g[2]+e*(v[2]-g[2]),i)}return h.alpha(d.alpha()+e*(n.alpha()-d.alpha())),h},t.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),u(e[0]*t,e[1]*t,e[2]*t,t)},t.prototype.darken=function(t){var e,n;return null==t&&(t=20),n=this,e=n.lch(),e[0]-=t,u.lch(e).alpha(n.alpha())},t.prototype.darker=function(t){return this.darken(t)},t.prototype.brighten=function(t){return null==t&&(t=20),this.darken(-t)},t.prototype.brighter=function(t){return this.brighten(t)},t.prototype.saturate=function(t){var e,n;return null==t&&(t=20),n=this,e=n.lch(),e[1]+=t,u.lch(e).alpha(n.alpha())},t.prototype.desaturate=function(t){return null==t&&(t=20),this.saturate(-t)},t}(),c=function(t){var e;for(e in t)3>e?(t[e]<0&&(t[e]=0),t[e]>255&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),t[e]>1&&(t[e]=1));return t},p=function(t){var e,n,i,o,a,r,s,l;if(t=t.toLowerCase(),null!=u.colors&&u.colors[t])return f(u.colors[t]);if(i=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(o=i.slice(1,4),n=a=0;2>=a;n=++a)o[n]=+o[n];o[3]=1}else if(i=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(o=i.slice(1,5),n=r=0;3>=r;n=++r)o[n]=+o[n];else if(i=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(o=i.slice(1,4),n=s=0;2>=s;n=++s)o[n]=Math.round(2.55*o[n]);o[3]=1}else if(i=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(o=i.slice(1,5),n=l=0;2>=l;n=++l)o[n]=Math.round(2.55*o[n]);o[3]=+o[3]}else(i=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(e=i.slice(1,4),e[1]*=.01,e[2]*=.01,o=g(e),o[3]=1):(i=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(e=i.slice(1,4),e[1]*=.01,e[2]*=.01,o=g(e),o[3]=+i[4]);return o},f=function(t){var e,n,i,o,a,r;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return(4===t.length||7===t.length)&&(t=t.substr(1)),3===t.length&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),r=parseInt(t,16),o=r>>16,i=r>>8&255,n=255&r,[o,i,n,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),r=parseInt(t,16),o=r>>24&255,i=r>>16&255,n=r>>8&255,e=255&r,[o,i,n,e];if(a=p(t))return a;throw"unknown color: "+t},m=function(t,e,o){var a,r,s,l;return l=R(arguments),t=l[0],e=l[1],o=l[2],t/=360,1/3>t?(a=(1-e)/3,s=(1+e*h(i*t)/h(n-i*t))/3,r=1-(a+s)):2/3>t?(t-=1/3,s=(1-e)/3,r=(1+e*h(i*t)/h(n-i*t))/3,a=1-(s+r)):(t-=2/3,r=(1-e)/3,a=(1+e*h(i*t)/h(n-i*t))/3,s=1-(r+a)),s=C(o*s*3),r=C(o*r*3),a=C(o*a*3),[255*s,255*r,255*a]},g=function(){var t,e,n,i,o,a,r,s,l,u,c,d,h,p;if(h=R(arguments),i=h[0],s=h[1],a=h[2],0===s)r=n=t=255*a;else{for(c=[0,0,0],e=[0,0,0],u=.5>a?a*(1+s):a+s-a*s,l=2*a-u,i/=360,c[0]=i+1/3,c[1]=i,c[2]=i-1/3,o=d=0;2>=d;o=++d)c[o]<0&&(c[o]+=1),c[o]>1&&(c[o]-=1),e[o]=6*c[o]<1?l+6*(u-l)*c[o]:2*c[o]<1?u:3*c[o]<2?l+(u-l)*(2/3-c[o])*6:l;p=[Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])],r=p[0],n=p[1],t=p[2]}return[r,n,t]},v=function(){var t,e,n,i,o,a,r,s,l,u,c,d,h,p,f,m,g,v;if(d=R(arguments),i=d[0],l=d[1],c=d[2],c*=255,0===l)s=n=t=c;else switch(360===i&&(i=0),i>360&&(i-=360),0>i&&(i+=360),i/=60,o=Math.floor(i),e=i-o,a=c*(1-l),r=c*(1-l*e),u=c*(1-l*(1-e)),o){case 0:h=[c,u,a],s=h[0],n=h[1],t=h[2];break;case 1:p=[r,c,a],s=p[0],n=p[1],t=p[2];break;case 2:f=[a,c,u],s=f[0],n=f[1],t=f[2];break;case 3:m=[a,r,c],s=m[0],n=m[1],t=m[2];break;case 4:g=[u,a,c],s=g[0],n=g[1],t=g[2];break;case 5:v=[c,a,r],s=v[0],n=v[1],t=v[2]}return s=Math.round(s),n=Math.round(n),t=Math.round(t),[s,n,t]},e=18,o=.95047,a=1,r=1.08883,y=function(){var t,e,n,i,o,a;return a=R(arguments),o=a[0],t=a[1],e=a[2],n=Math.sqrt(t*t+e*e),i=(Math.atan2(e,t)/Math.PI*180+360)%360,[o,n,i]},_=function(t,e,n){var i,s,l,u,c,d,h;return void 0!==t&&3===t.length&&(d=t,t=d[0],e=d[1],n=d[2]),void 0!==t&&3===t.length&&(h=t,t=h[0],e=h[1],n=h[2]),u=(t+16)/116,l=u+e/500,c=u-n/200,l=b(l)*o,u=b(u)*a,c=b(c)*r,s=U(3.2404542*l-1.5371385*u-.4985314*c),i=U(-.969266*l+1.8760108*u+.041556*c),n=U(.0556434*l-.2040259*u+1.0572252*c),[C(s,0,255),C(i,0,255),C(n,0,255),1]},b=function(t){return t>.206893034?t*t*t:(t-4/29)/7.787037},U=function(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))},w=function(){var t,e,n,i;return i=R(arguments),n=i[0],t=i[1],e=i[2],e=e*Math.PI/180,[n,Math.cos(e)*t,Math.sin(e)*t]},x=function(t,e,n){var i,o,a,r,s,l,u;return l=w(t,e,n),i=l[0],o=l[1],a=l[2],u=_(i,o,a),s=u[0],r=u[1],a=u[2],[C(s,0,255),C(r,0,255),C(a,0,255)]},L=function(t,e,n){var i;return i=R(arguments),t=i[0],e=i[1],n=i[2],t=S(t),e=S(e),n=S(n),.2126*t+.7152*e+.0722*n},S=function(t){return t/=255,.03928>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)},k=function(t){var e,n,i;if("number"===N(t)&&t>=0&&16777215>=t)return i=t>>16,n=t>>8&255,e=255&t,[i,n,e,1];throw"unknown num color: "+t},D=function(){var t,e,n,i,o,a;return a=R(arguments),n=a[0],e=a[1],t=a[2],o=n<<16|e<<8|t,i="000000"+o.toString(16),"#"+i.substr(i.length-6)},T=function(){var t,e,n,i,o,a,r,s,l;return l=R(arguments),r=l[0],n=l[1],e=l[2],t=2*Math.PI,r/=255,n/=255,e/=255,a=Math.min(r,n,e),o=(r+n+e)/3,s=1-a/o,0===s?i=0:(i=(r-n+(r-e))/2,i/=Math.sqrt((r-n)*(r-n)+(r-e)*(n-e)),i=Math.acos(i),e>n&&(i=t-i),i/=t),[360*i,s,o]},M=function(t,e,n){var i,o,a,r,s,l;return void 0!==t&&t.length>=3&&(l=t,t=l[0],e=l[1],n=l[2]),t/=255,e/=255,n/=255,r=Math.min(t,e,n),a=Math.max(t,e,n),o=(a+r)/2,a===r?(s=0,i=Number.NaN):s=.5>o?(a-r)/(a+r):(a-r)/(2-a-r),t===a?i=(e-n)/(a-r):e===a?i=2+(n-t)/(a-r):n===a&&(i=4+(t-e)/(a-r)),i*=60,0>i&&(i+=360),[i,s,o]},P=function(){var t,e,n,i,o,a,r,s,l,u;return u=R(arguments),r=u[0],n=u[1],t=u[2],a=Math.min(r,n,t),o=Math.max(r,n,t),e=o-a,l=o/255,0===o?(i=Number.NaN,s=0):(s=e/o,r===o&&(i=(n-t)/e),n===o&&(i=2+(t-r)/e),t===o&&(i=4+(r-n)/e),i*=60,0>i&&(i+=360)),[i,s,l]},E=function(){var t,e,n,i,s,l,u;return u=R(arguments),n=u[0],e=u[1],t=u[2],n=F(n),e=F(e),t=F(t),i=B((.4124564*n+.3575761*e+.1804375*t)/o),s=B((.2126729*n+.7151522*e+.072175*t)/a),l=B((.0193339*n+.119192*e+.9503041*t)/r),[116*s-16,500*(i-s),200*(s-l)]},F=function(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},B=function(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29},I=function(){var t,e,n,i,o,a,r;return a=R(arguments),o=a[0],n=a[1],e=a[2],r=E(o,n,e),i=r[0],t=r[1],e=r[2],y(i,t,e)},A=function(){var t,e,n,i;return i=R(arguments),n=i[0],e=i[1],t=i[2],(n<<16)+(e<<8)+t},u.scale=function(t,e){var n,i,o,a,r,s,l,c,d,h,p,f,m,g,v,y,_,b,w,x,C;return y="rgb",_=u("#ccc"),C=0,m=!1,f=[0,1],h=[],w=!1,x=[],v=0,g=1,p=!1,b=0,d={},s=function(t,e){var n,i,o,a,s,l,c;if(null==t&&(t=["#ddd","#222"]),null!=t&&"string"===N(t)&&null!=(null!=(s=u.brewer)?s[t]:void 0)&&(t=u.brewer[t]),"array"===N(t)){for(t=t.slice(0),n=o=0,l=t.length-1;l>=0?l>=o:o>=l;n=l>=0?++o:--o)i=t[n],"string"===N(i)&&(t[n]=u(i));if(null!=e)x=e;else for(x=[],n=a=0,c=t.length-1;c>=0?c>=a:a>=c;n=c>=0?++a:--a)x.push(n/(t.length-1))}return r(),h=t},l=function(t){return null==t&&(t=[]),f=t,v=t[0],g=t[t.length-1],r(),b=2===t.length?0:t.length-1},o=function(t){var e,n;if(null!=f){for(n=f.length-1,e=0;n>e&&t>=f[e];)e++;return e-1}return 0},c=function(t){return t},n=function(t){var e,n,i,a,r;return r=t,f.length>2&&(a=f.length-1,e=o(t),i=f[0]+(f[1]-f[0])*(0+.5*C),n=f[a-1]+(f[a]-f[a-1])*(1-.5*C),r=v+(f[e]+.5*(f[e+1]-f[e])-i)/(n-i)*(g-v)),r},a=function(t,e){var n,i,a,r,s,l,p,m,w;if(null==e&&(e=!1),isNaN(t))return _;if(e?p=t:f.length>2?(n=o(t),p=n/(b-1)):(p=a=v!==g?(t-v)/(g-v):0,p=a=(t-v)/(g-v),p=Math.min(1,Math.max(0,p))),e||(p=c(p)),s=Math.floor(1e4*p),d[s])i=d[s];else{if("array"===N(h))for(r=m=0,w=x.length-1;w>=0?w>=m:m>=w;r=w>=0?++m:--m){if(l=x[r],l>=p){i=h[r];break}if(p>=l&&r===x.length-1){i=h[r];break}if(p>l&&p<x[r+1]){p=(p-l)/(x[r+1]-l),i=u.interpolate(h[r],h[r+1],p,y);break}}else"function"===N(h)&&(i=h(p));d[s]=i}return i},r=function(){return d={}},s(t,e),i=function(t){var e;return e=a(t),w&&e[w]?e[w]():e},i.domain=function(t,e,n,o){var a;return null==n&&(n="e"),arguments.length?(null!=e&&(a=u.analyze(t,o),t=0===e?[a.min,a.max]:u.limits(a,n,e)),l(t),i):f},i.mode=function(t){return arguments.length?(y=t,r(),i):y},i.range=function(t,e){return s(t,e),i},i.out=function(t){return w=t,i},i.spread=function(t){return arguments.length?(C=t,i):C},i.correctLightness=function(t){return arguments.length?(p=t,r(),c=p?function(t){var e,n,i,o,r,s,l,u,c;for(e=a(0,!0).lab()[0],n=a(1,!0).lab()[0],l=e>n,i=a(t,!0).lab()[0],r=e+(n-e)*t,o=i-r,u=0,c=1,s=20;Math.abs(o)>.01&&s-->0;)!function(){return l&&(o*=-1),0>o?(u=t,t+=.5*(c-t)):(c=t,t+=.5*(u-t)),i=a(t,!0).lab()[0],o=i-r}();return t}:function(t){return t},i):p},i.colors=function(e){var n,o,a,r,s,l;if(null==e&&(e="hex"),t=[],o=[],f.length>2)for(n=a=1,l=f.length;l>=1?l>a:a>l;n=l>=1?++a:--a)o.push(.5*(f[n-1]+f[n]));else o=f;for(r=0,s=o.length;s>r;r++)n=o[r],t.push(i(n)[e]());return t},i},null==(z=u.scales)&&(u.scales={}),u.scales.cool=function(){return u.scale([u.hsl(180,1,.9),u.hsl(250,.7,.4)])},u.scales.hot=function(){return u.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},u.analyze=function(t,e,n){var i,o,a,r,s,l,c;if(a={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==n&&(n=function(){return!0}),i=function(t){null==t||isNaN(t)||(a.values.push(t),a.sum+=t,t<a.min&&(a.min=t),t>a.max&&(a.max=t),a.count+=1)},s=function(t,o){return n(t,o)?i(null!=e&&"function"===N(e)?e(t):null!=e&&"string"===N(e)||"number"===N(e)?t[e]:t):void 0},"array"===N(t))for(l=0,c=t.length;c>l;l++)r=t[l],s(r);else for(o in t)r=t[o],s(r,o);return a.domain=[a.min,a.max],a.limits=function(t,e){return u.limits(a,t,e)},a},u.limits=function(t,e,n){var i,o,a,r,s,l,c,d,h,p,f,m,g,v,y,_,b,w,x,C,L,S,k,D,T,M,P,E,I,A,F,O,R,B,U,z,j,$,H,W,V,q,G,Y,Z,K,J,X,Q,te,ee,ne,ie,oe,ae,re;if(null==e&&(e="equal"),null==n&&(n=7),"array"===N(t)&&(t=u.analyze(t)),g=t.min,f=t.max,k=t.sum,M=t.values.sort(function(t,e){return t-e}),p=[],"c"===e.substr(0,1)&&(p.push(g),p.push(f)),"e"===e.substr(0,1)){for(p.push(g),c=P=1,j=n-1;j>=1?j>=P:P>=j;c=j>=1?++P:--P)p.push(g+c/n*(f-g));p.push(f)}else if("l"===e.substr(0,1)){if(0>=g)throw"Logarithmic scales are only possible for values > 0";for(v=Math.LOG10E*Math.log(g),m=Math.LOG10E*Math.log(f),p.push(g),c=E=1,Y=n-1;Y>=1?Y>=E:E>=Y;c=Y>=1?++E:--E)p.push(Math.pow(10,v+c/n*(m-v)));p.push(f)}else if("q"===e.substr(0,1)){for(p.push(g),c=I=1,Z=n-1;Z>=1?Z>=I:I>=Z;c=Z>=1?++I:--I)x=M.length*c/n,C=Math.floor(x),C===x?p.push(M[C]):(L=x-C,p.push(M[C]*L+M[C+1]*(1-L)));p.push(f)}else if("k"===e.substr(0,1)){for(_=M.length,i=new Array(_),s=new Array(n),S=!0,b=0,a=null,a=[],a.push(g),c=A=1,K=n-1;K>=1?K>=A:A>=K;c=K>=1?++A:--A)a.push(g+c/n*(f-g));for(a.push(f);S;){for(d=F=0,J=n-1;J>=0?J>=F:F>=J;d=J>=0?++F:--F)s[d]=0;for(c=O=0,X=_-1;X>=0?X>=O:O>=X;c=X>=0?++O:--O){for(T=M[c],y=Number.MAX_VALUE,d=R=0,Q=n-1;Q>=0?Q>=R:R>=Q;d=Q>=0?++R:--R)l=Math.abs(a[d]-T),y>l&&(y=l,o=d);s[o]++,i[c]=o}for(w=new Array(n),d=B=0,te=n-1;te>=0?te>=B:B>=te;d=te>=0?++B:--B)w[d]=null;for(c=U=0,ee=_-1;ee>=0?ee>=U:U>=ee;c=ee>=0?++U:--U)r=i[c],null===w[r]?w[r]=M[c]:w[r]+=M[c];for(d=z=0,$=n-1;$>=0?$>=z:z>=$;d=$>=0?++z:--z)w[d]*=1/s[d];for(S=!1,d=ne=0,H=n-1;H>=0?H>=ne:ne>=H;d=H>=0?++ne:--ne)if(w[d]!==a[c]){S=!0;break}a=w,b++,b>200&&(S=!1)}for(h={},d=ie=0,W=n-1;W>=0?W>=ie:ie>=W;d=W>=0?++ie:--ie)h[d]=[];for(c=oe=0,V=_-1;V>=0?V>=oe:oe>=V;c=V>=0?++oe:--oe)r=i[c],h[r].push(M[c]);for(D=[],d=ae=0,q=n-1;q>=0?q>=ae:ae>=q;d=q>=0?++ae:--ae)D.push(h[d][0]),D.push(h[d][h[d].length-1]);for(D=D.sort(function(t,e){return t-e}),p.push(D[0]),c=re=1,G=D.length-1;G>=re;c=re+=2)isNaN(D[c])||p.push(D[c])}return p},/**
  	ColorBrewer colors for chroma.js
  
  	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
  	Pennsylvania State University.
  
  	Licensed under the Apache License, Version 2.0 (the "License"); 
  	you may not use this file except in compliance with the License.
  	You may obtain a copy of the License at	
  	http://www.apache.org/licenses/LICENSE-2.0
  
  	Unless required by applicable law or agreed to in writing, software distributed
  	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
  	CONDITIONS OF ANY KIND, either express or implied. See the License for the
  	specific language governing permissions and limitations under the License.
  
      @preserve
  */
u.brewer=l={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},u.colors=d={indigo:"#4b0082",gold:"#ffd700",hotpink:"#ff69b4",firebrick:"#b22222",indianred:"#cd5c5c",yellow:"#ffff00",mistyrose:"#ffe4e1",darkolivegreen:"#556b2f",olive:"#808000",darkseagreen:"#8fbc8f",pink:"#ffc0cb",tomato:"#ff6347",lightcoral:"#f08080",orangered:"#ff4500",navajowhite:"#ffdead",lime:"#00ff00",palegreen:"#98fb98",darkslategrey:"#2f4f4f",greenyellow:"#adff2f",burlywood:"#deb887",seashell:"#fff5ee",mediumspringgreen:"#00fa9a",fuchsia:"#ff00ff",papayawhip:"#ffefd5",blanchedalmond:"#ffebcd",chartreuse:"#7fff00",dimgray:"#696969",black:"#000000",peachpuff:"#ffdab9",springgreen:"#00ff7f",aquamarine:"#7fffd4",white:"#ffffff",orange:"#ffa500",lightsalmon:"#ffa07a",darkslategray:"#2f4f4f",brown:"#a52a2a",ivory:"#fffff0",dodgerblue:"#1e90ff",peru:"#cd853f",lawngreen:"#7cfc00",chocolate:"#d2691e",crimson:"#dc143c",forestgreen:"#228b22",darkgrey:"#a9a9a9",lightseagreen:"#20b2aa",cyan:"#00ffff",mintcream:"#f5fffa",silver:"#c0c0c0",antiquewhite:"#faebd7",mediumorchid:"#ba55d3",skyblue:"#87ceeb",gray:"#808080",darkturquoise:"#00ced1",goldenrod:"#daa520",darkgreen:"#006400",floralwhite:"#fffaf0",darkviolet:"#9400d3",darkgray:"#a9a9a9",moccasin:"#ffe4b5",saddlebrown:"#8b4513",grey:"#808080",darkslateblue:"#483d8b",lightskyblue:"#87cefa",lightpink:"#ffb6c1",mediumvioletred:"#c71585",slategrey:"#708090",red:"#ff0000",deeppink:"#ff1493",limegreen:"#32cd32",darkmagenta:"#8b008b",palegoldenrod:"#eee8aa",plum:"#dda0dd",turquoise:"#40e0d0",lightgrey:"#d3d3d3",lightgoldenrodyellow:"#fafad2",darkgoldenrod:"#b8860b",lavender:"#e6e6fa",maroon:"#800000",yellowgreen:"#9acd32",sandybrown:"#f4a460",thistle:"#d8bfd8",violet:"#ee82ee",navy:"#000080",magenta:"#ff00ff",dimgrey:"#696969",tan:"#d2b48c",rosybrown:"#bc8f8f",olivedrab:"#6b8e23",blue:"#0000ff",lightblue:"#add8e6",ghostwhite:"#f8f8ff",honeydew:"#f0fff0",cornflowerblue:"#6495ed",slateblue:"#6a5acd",linen:"#faf0e6",darkblue:"#00008b",powderblue:"#b0e0e6",seagreen:"#2e8b57",darkkhaki:"#bdb76b",snow:"#fffafa",sienna:"#a0522d",mediumblue:"#0000cd",royalblue:"#4169e1",lightcyan:"#e0ffff",green:"#008000",mediumpurple:"#9370db",midnightblue:"#191970",cornsilk:"#fff8dc",paleturquoise:"#afeeee",bisque:"#ffe4c4",slategray:"#708090",darkcyan:"#008b8b",khaki:"#f0e68c",wheat:"#f5deb3",teal:"#008080",darkorchid:"#9932cc",deepskyblue:"#00bfff",salmon:"#fa8072",darkred:"#8b0000",steelblue:"#4682b4",palevioletred:"#db7093",lightslategray:"#778899",aliceblue:"#f0f8ff",lightslategrey:"#778899",lightgreen:"#90ee90",orchid:"#da70d6",gainsboro:"#dcdcdc",mediumseagreen:"#3cb371",lightgray:"#d3d3d3",mediumturquoise:"#48d1cc",lemonchiffon:"#fffacd",cadetblue:"#5f9ea0",lightyellow:"#ffffe0",lavenderblush:"#fff0f5",coral:"#ff7f50",purple:"#800080",aqua:"#00ffff",whitesmoke:"#f5f5f5",mediumslateblue:"#7b68ee",darkorange:"#ff8c00",mediumaquamarine:"#66cdaa",darksalmon:"#e9967a",beige:"#f5f5dc",blueviolet:"#8a2be2",azure:"#f0ffff",lightsteelblue:"#b0c4de",oldlace:"#fdf5e6"},N=function(){var t,e,n,i,o;for(t={},o="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),n=0,i=o.length;i>n;n++)e=o[n],t["[object "+e+"]"]=e.toLowerCase();return function(e){var n;return n=Object.prototype.toString.call(e),t[n]||"object"}}(),C=function(t,e,n){return null==e&&(e=0),null==n&&(n=1),e>t&&(t=e),t>n&&(t=n),t},R=function(t){return t.length>=3?t:t[0]},i=2*Math.PI,n=Math.PI/3,h=Math.cos,s=function(t){var e,n,i,o,a,r,l,c,d,h,p;return t=function(){var e,n,i;for(i=[],e=0,n=t.length;n>e;e++)o=t[e],i.push(u(o));return i}(),2===t.length?(d=function(){var e,n,i;for(i=[],e=0,n=t.length;n>e;e++)o=t[e],i.push(o.lab());return i}(),a=d[0],r=d[1],e=function(t){var e,n;return n=function(){var n,i;for(i=[],e=n=0;2>=n;e=++n)i.push(a[e]+t*(r[e]-a[e]));return i}(),u.lab.apply(u,n)}):3===t.length?(h=function(){var e,n,i;for(i=[],e=0,n=t.length;n>e;e++)o=t[e],i.push(o.lab());return i}(),a=h[0],r=h[1],l=h[2],e=function(t){var e,n;return n=function(){var n,i;for(i=[],e=n=0;2>=n;e=++n)i.push((1-t)*(1-t)*a[e]+2*(1-t)*t*r[e]+t*t*l[e]);return i}(),u.lab.apply(u,n)}):4===t.length?(p=function(){var e,n,i;for(i=[],e=0,n=t.length;n>e;e++)o=t[e],i.push(o.lab());return i}(),a=p[0],r=p[1],l=p[2],c=p[3],e=function(t){var e,n;return n=function(){var n,i;for(i=[],e=n=0;2>=n;e=++n)i.push((1-t)*(1-t)*(1-t)*a[e]+3*(1-t)*(1-t)*t*r[e]+3*(1-t)*t*t*l[e]+t*t*t*c[e]);return i}(),u.lab.apply(u,n)}):5===t.length&&(n=s(t.slice(0,3)),i=s(t.slice(2,5)),e=function(t){return.5>t?n(2*t):i(2*(t-.5))}),e},u.interpolate.bezier=s}.call(this),/**
 * Copyright (c) 2011-2013 Felix Gnass
 * Licensed under the MIT license
 */
function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var n,i=document.createElement(t||"div");for(n in e)i[n]=e[n];return i}function e(t){for(var e=1,n=arguments.length;n>e;e++)t.appendChild(arguments[e]);return t}function n(t,e,n,i){var o=["opacity",e,~~(100*t),n,i].join("-"),a=.01+n/i*100,r=Math.max(1-(1-t)/e*(100-a),t),s=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=s&&"-"+s+"-"||"";return h[o]||(p.insertRule("@"+l+"keyframes "+o+"{0%{opacity:"+r+"}"+a+"%{opacity:"+t+"}"+(a+.01)+"%{opacity:1}"+(a+e)%100+"%{opacity:"+t+"}100%{opacity:"+r+"}}",p.cssRules.length),h[o]=1),o}function i(t,e){var n,i,o=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<d.length;i++)if(n=d[i]+e,void 0!==o[n])return n;return void 0!==o[e]?e:void 0}function o(t,e){for(var n in e)t.style[i(t,n)||n]=e[n];return t}function a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)void 0===t[i]&&(t[i]=n[i])}return t}function r(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function s(t,e){return"string"==typeof t?t:t[e%t.length]}function l(t){return"undefined"==typeof this?new l(t):void(this.opts=a(t||{},l.defaults,f))}function u(){function n(e,n){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}p.addRule(".spin-vml","behavior:url(#default#VML)"),l.prototype.lines=function(t,i){function a(){return o(n("group",{coordsize:c+" "+c,coordorigin:-u+" "+-u}),{width:c,height:c})}function r(t,r,l){e(h,e(o(a(),{rotation:360/i.lines*t+"deg",left:~~r}),e(o(n("roundrect",{arcsize:i.corners}),{width:u,height:i.width,left:i.radius,top:-i.width>>1,filter:l}),n("fill",{color:s(i.color,t),opacity:i.opacity}),n("stroke",{opacity:0}))))}var l,u=i.length+i.width,c=2*u,d=2*-(i.width+i.length)+"px",h=o(a(),{position:"absolute",top:d,left:d});if(i.shadow)for(l=1;l<=i.lines;l++)r(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=i.lines;l++)r(l);return e(t,h)},l.prototype.opacity=function(t,e,n,i){var o=t.firstChild;i=i.shadow&&i.lines||0,o&&e+i<o.childNodes.length&&(o=o.childNodes[e+i],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=n))}}var c,d=["webkit","Moz","ms","O"],h={},p=function(){var n=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};l.defaults={},a(l.prototype,{spin:function(e){this.stop();var n,i,a=this,s=a.opts,l=a.el=o(t(0,{className:s.className}),{position:s.position,width:0,zIndex:s.zIndex}),u=s.radius+s.length+s.width;if(e&&(e.insertBefore(l,e.firstChild||null),i=r(e),n=r(l),o(l,{left:("auto"==s.left?i.x-n.x+(e.offsetWidth>>1):parseInt(s.left,10)+u)+"px",top:("auto"==s.top?i.y-n.y+(e.offsetHeight>>1):parseInt(s.top,10)+u)+"px"})),l.setAttribute("role","progressbar"),a.lines(l,a.opts),!c){var d,h=0,p=(s.lines-1)*(1-s.direction)/2,f=s.fps,m=f/s.speed,g=(1-s.opacity)/(m*s.trail/100),v=m/s.lines;!function y(){h++;for(var t=0;t<s.lines;t++)d=Math.max(1-(h+(s.lines-t)*v)%m*g,s.opacity),a.opacity(l,t*s.direction+p,d,s);a.timeout=a.el&&setTimeout(y,~~(1e3/f))}()}return a},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(i,a){function r(e,n){return o(t(),{position:"absolute",width:a.length+a.width+"px",height:a.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/a.lines*u+a.rotate)+"deg) translate("+a.radius+"px,0)",borderRadius:(a.corners*a.width>>1)+"px"})}for(var l,u=0,d=(a.lines-1)*(1-a.direction)/2;u<a.lines;u++)l=o(t(),{position:"absolute",top:1+~(a.width/2)+"px",transform:a.hwaccel?"translate3d(0,0,0)":"",opacity:a.opacity,animation:c&&n(a.opacity,a.trail,d+u*a.direction,a.lines)+" "+1/a.speed+"s linear infinite"}),a.shadow&&e(l,o(r("#000","0 0 4px #000"),{top:"2px"})),e(i,e(l,r(s(a.color,u),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}});var m=o(t("group"),{behavior:"url(#default#VML)"});return!i(m,"transform")&&m.adj?u():c=i(m,"animation"),l}),/**
 * Copyright (c) 2011-2013 Felix Gnass
 * Licensed under the MIT license
 */
function(t){if("object"==typeof exports)t(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define(["jquery","spin"],t);else{if(!window.Spinner)throw new Error("Spin.js not present");t(window.jQuery,window.Spinner)}}(function(t,e){t.fn.spin=function(n,i){return this.each(function(){var o=t(this),a=o.data();a.spinner&&(a.spinner.stop(),delete a.spinner),n!==!1&&(n=t.extend({color:i||o.css("color")},t.fn.spin.presets[n]||n),a.spinner=new e(n).spin(this))})},t.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),L.SpinMapMixin={spin:function(t,e){t?(this._spinner||(this._spinner=new Spinner(e).spin(this._container),this._spinning=0),this._spinning++):(this._spinning--,this._spinning<=0&&this._spinner&&(this._spinner.stop(),this._spinner=null))}},L.Map.include(L.SpinMapMixin),L.Map.addInitHook(function(){this.on("layeradd",function(t){t.layer.loading&&this.spin(!0),"function"==typeof t.layer.on&&(t.layer.on("data:loading",function(){this.spin(!0)},this),t.layer.on("data:loaded",function(){this.spin(!1)},this))},this),this.on("layerremove",function(t){t.layer.loading&&this.spin(!1),"function"==typeof t.layer.on&&(t.layer.off("data:loaded"),t.layer.off("data:loading"))},this)});/** @license
 *
 *  Copyright (C) 2012 K. Arthur Endsley (kaendsle@mtu.edu)
 *  Michigan Tech Research Institute (MTRI)
 *  3600 Green Court, Suite 100, Ann Arbor, MI, 48105
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License
 *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 */
var Wkt=function(){var t,e;return t=function(t,e){return t.substring(0,e.length)===e},e=function(t,e){return t.substring(t.length-e.length)===e},{delimiter:" ",isArray:function(t){return!(!t||t.constructor!==Array)},trim:function(n,i){for(i=i||" ";t(n,i);)n=n.substring(1);for(;e(n,i);)n=n.substring(0,n.length-1);return n},Wkt:function(t){this.delimiter=Wkt.delimiter||" ",this.wrapVertices=!0,this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+|\+/,numeric:/-*\d+(\.*\d+)?/,comma:/\s*,\s*/,parenComma:/\)\s*,\s*\(/,coord:/-*\d+\.*\d+ -*\d+\.*\d+/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/,ogcTypes:/^(multi)?(point|line|polygon|box)?(string)?$/i,crudeJson:/^{.*"(type|coordinates|geometries|features)":.*}$/},this.components=void 0,t&&"string"==typeof t?this.read(t):t&&void 0!==typeof t&&this.fromObject(t)}}}();Wkt.Wkt.prototype.isCollection=function(){switch(this.type.slice(0,5)){case"multi":return!0;case"polyg":return!0;default:return!1}},Wkt.Wkt.prototype.sameCoords=function(t,e){return t.x===e.x&&t.y===e.y},Wkt.Wkt.prototype.fromObject=function(t){var e;return e=t.hasOwnProperty("type")&&t.hasOwnProperty("coordinates")?this.fromJson(t):this.deconstruct.call(this,t),this.components=e.components,this.isRectangle=e.isRectangle||!1,this.type=e.type,this},Wkt.Wkt.prototype.toObject=function(t){return this.construct[this.type].call(this,t)},Wkt.Wkt.prototype.toString=function(){return this.write()},Wkt.Wkt.prototype.fromJson=function(t){var e,n,i,o,a,r;if(this.type=t.type.toLowerCase(),this.components=[],o=t.coordinates,Wkt.isArray(o[0])){for(e in o)if(o.hasOwnProperty(e))if(Wkt.isArray(o[e][0])){r=[];for(n in o[e])if(o[e].hasOwnProperty(n))if(Wkt.isArray(o[e][n][0])){a=[];for(i in o[e][n])o[e][n].hasOwnProperty(i)&&a.push({x:o[e][n][i][0],y:o[e][n][i][1]});r.push(a)}else r.push({x:o[e][n][0],y:o[e][n][1]});this.components.push(r)}else this.components.push("multipoint"===this.type?[{x:o[e][0],y:o[e][1]}]:{x:o[e][0],y:o[e][1]})}else this.components.push({x:o[0],y:o[1]});return this},Wkt.Wkt.prototype.toJson=function(){var t,e,n,i,o,a,r;if(t=this.components,e={coordinates:[],type:function(){var t,e,n;e=this.regExes.ogcTypes.exec(this.type).slice(1),n=[];for(t in e)e.hasOwnProperty(t)&&void 0!==e[t]&&n.push(e[t].toLowerCase().slice(0,1).toUpperCase()+e[t].toLowerCase().slice(1));return n}.call(this).join("")},"box"===this.type.toLowerCase()){e.type="Polygon",e.bbox=[];for(n in t)t.hasOwnProperty(n)&&(e.bbox=e.bbox.concat([t[n].x,t[n].y]));return e.coordinates=[[[t[0].x,t[0].y],[t[0].x,t[1].y],[t[1].x,t[1].y],[t[1].x,t[0].y],[t[0].x,t[0].y]]],e}for(n in t)if(t.hasOwnProperty(n))if(Wkt.isArray(t[n])){r=[];for(i in t[n])if(t[n].hasOwnProperty(i))if(Wkt.isArray(t[n][i])){a=[];for(o in t[n][i])t[n][i].hasOwnProperty(o)&&a.push([t[n][i][o].x,t[n][i][o].y]);r.push(a)}else t[n].length>1?r.push([t[n][i].x,t[n][i].y]):r=r.concat([t[n][i].x,t[n][i].y]);e.coordinates.push(r)}else t.length>1?e.coordinates.push([t[n].x,t[n].y]):e.coordinates=e.coordinates.concat([t[n].x,t[n].y]);return e},Wkt.Wkt.prototype.merge=function(t){var e=this.type.slice(0,5);if(this.type!==t.type&&this.type.slice(5,this.type.length)!==t.type)throw TypeError("The input geometry types must agree or the calling Wkt.Wkt instance must be a multigeometry of the other");switch(e){case"point":this.components=[this.components.concat(t.components)];break;case"multi":this.components=this.components.concat("multi"===t.type.slice(0,5)?t.components:[t.components]);break;default:this.components=[this.components,t.components]}"multi"!==e&&(this.type="multi"+this.type)},Wkt.Wkt.prototype.read=function(t){var e;if(e=this.regExes.typeStr.exec(t))this.type=e[1].toLowerCase(),this.base=e[2],this.ingest[this.type]&&(this.components=this.ingest[this.type].apply(this,[this.base]));else{if(!this.regExes.crudeJson.test(t))throw console.log("Invalid WKT string provided to read()"),{name:"WKTError",message:"Invalid WKT string provided to read()"};if("object"!=typeof JSON||"function"!=typeof JSON.parse)throw console.log("JSON.parse() is not available; cannot parse GeoJSON strings"),{name:"JSONError",message:"JSON.parse() is not available; cannot parse GeoJSON strings"};this.fromJson(JSON.parse(t))}return this.components},Wkt.Wkt.prototype.write=function(t){var e,n,i;for(t=t||this.components,n=[],n.push(this.type.toUpperCase()+"("),e=0;e<t.length;e+=1){if(this.isCollection()&&e>0&&n.push(","),!this.extract[this.type])return null;i=this.extract[this.type].apply(this,[t[e]]),this.isCollection()&&"multipoint"!==this.type?n.push("("+i+")"):(n.push(i),e!==t.length-1&&"multipoint"!==this.type&&n.push(","))}return n.push(")"),n.join("")},Wkt.Wkt.prototype.extract={point:function(t){return String(t.x)+this.delimiter+String(t.y)},multipoint:function(t){var e,n,i=[];for(e=0;e<t.length;e+=1)n=this.extract.point.apply(this,[t[e]]),this.wrapVertices&&(n="("+n+")"),i.push(n);return i.join(",")},linestring:function(t){return this.extract.point.apply(this,[t])},multilinestring:function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(this.extract.linestring.apply(this,[t[e]]));return n.join(",")},polygon:function(t){return this.extract.multilinestring.apply(this,[t])},multipolygon:function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push("("+this.extract.polygon.apply(this,[t[e]])+")");return n.join(",")},box:function(t){return this.extract.linestring.apply(this,[t])},geometrycollection:function(){console.log("The geometrycollection WKT type is not yet supported.")}},Wkt.Wkt.prototype.ingest={point:function(t){var e=Wkt.trim(t).split(this.regExes.spaces);return[{x:parseFloat(this.regExes.numeric.exec(e[0])[0]),y:parseFloat(this.regExes.numeric.exec(e[1])[0])}]},multipoint:function(t){var e,n,i;for(n=[],i=Wkt.trim(t).split(this.regExes.comma),e=0;e<i.length;e+=1)n.push(this.ingest.point.apply(this,[i[e]]));return n},linestring:function(t){var e,n,i;for(n=this.ingest.multipoint.apply(this,[t]),i=[],e=0;e<n.length;e+=1)i=i.concat(n[e]);return i},multilinestring:function(t){var e,n,i,o;for(n=[],o=Wkt.trim(t).split(this.regExes.doubleParenComma),1===o.length&&(o=Wkt.trim(t).split(this.regExes.parenComma)),e=0;e<o.length;e+=1)i=o[e].replace(this.regExes.trimParens,"$1"),n.push(this.ingest.linestring.apply(this,[i]));return n},polygon:function(t){var e,n,i,o,a,r;for(r=Wkt.trim(t).split(this.regExes.parenComma),i=[],e=0;e<r.length;e+=1){for(a=r[e].replace(this.regExes.trimParens,"$1").split(this.regExes.comma),o=[],n=0;n<a.length;n+=1)o.push({x:parseFloat(a[n].split(this.regExes.spaces)[0]),y:parseFloat(a[n].split(this.regExes.spaces)[1])});i.push(o)}return i},box:function(t){var e,n,i;for(n=this.ingest.multipoint.apply(this,[t]),i=[],e=0;e<n.length;e+=1)i=i.concat(n[e]);return i},multipolygon:function(t){var e,n,i,o;for(n=[],o=Wkt.trim(t).split(this.regExes.doubleParenComma),e=0;e<o.length;e+=1)i=o[e].replace(this.regExes.trimParens,"$1"),n.push(this.ingest.polygon.apply(this,[i]));return n},geometrycollection:function(){console.log("The geometrycollection WKT type is not yet supported.")}},/** @license
 *
 *  Copyright (C) 2012 K. Arthur Endsley (kaendsle@mtu.edu)
 *  Michigan Tech Research Institute (MTRI)
 *  3600 Green Court, Suite 100, Ann Arbor, MI, 48105
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License
 *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 */
Wkt.Wkt.prototype.isRectangle=!1,Wkt.Wkt.prototype.trunc=function(t){var e,n=[];for(e=0;e<t.length;e+=1)Wkt.isArray(t[e])?n.push(this.trunc(t[e])):0!==e&&this.sameCoords(t[0],t[e])||n.push(t[e]);return n},Wkt.Wkt.prototype.construct={point:function(t,e){var n=e||this.components;return n instanceof Array&&(n=n[0]),L.marker(this.coordsToLatLng(n),t)},multipoint:function(t){var e,n=[],i=this.components;for(e=0;e<i.length;e+=1)n.push(this.construct.point.call(this,t,i[e]));return L.featureGroup(n,t)},linestring:function(t,e){var n=e||this.components,i=this.coordsToLatLngs(n);return L.polyline(i,t)},multilinestring:function(t){var e=this.components,n=this.coordsToLatLngs(e,1);return L.multiPolyline(n,t)},polygon:function(t){var e=this.trunc(this.components),n=this.coordsToLatLngs(e,1);return L.polygon(n,t)},multipolygon:function(t){var e=this.trunc(this.components),n=this.coordsToLatLngs(e,2);return L.multiPolygon(n,t)},geometrycollection:function(t){var e,n,i;for(e=this.trunc(this.components),i=[],n=0;n<this.components.length;n+=1)i.push(this.construct[e[n].type].call(this,e[n]));return L.featureGroup(i,t)}},L.Util.extend(Wkt.Wkt.prototype,{coordsToLatLngs:L.GeoJSON.coordsToLatLngs,coordsToLatLng:function(t,e){var n=e?t.x:t.y,i=e?t.y:t.x;return L.latLng(n,i,!0)}}),Wkt.Wkt.prototype.deconstruct=function(t){var e,n,i,o,a,r,s;if(n=function(t){var e,i;for(i=[],e=0;e<t.length;e+=1)i.push(Wkt.isArray(t[e])?n(t[e]):{x:t[e].lng,y:t[e].lat});return i},t.constructor===L.Marker||t.constructor===L.marker)return{type:"point",components:[{x:t.getLatLng().lng,y:t.getLatLng().lat}]};if(t.constructor===L.Rectangle||t.constructor===L.rectangle)return s=t.getBounds(),{type:"polygon",isRectangle:!0,components:[[{x:s.getSouthWest().lng,y:s.getNorthEast().lat},{x:s.getNorthEast().lng,y:s.getNorthEast().lat},{x:s.getNorthEast().lng,y:s.getSouthWest().lat},{x:s.getSouthWest().lng,y:s.getSouthWest().lat},{x:s.getSouthWest().lng,y:s.getNorthEast().lat}]]};if((t.constructor===L.Polyline||t.constructor===L.polyline)&&(a=[],s=t.getLatLngs(),!s[0].equals(s[s.length-1]))){for(o=0;o<s.length;o+=1)a.push({x:s[o].lng,y:s[o].lat});return{type:"linestring",components:a}}if(t.constructor===L.Polygon||t.constructor===L.polygon){for(r=[],a=[],s=t.getLatLngs(),o=0;o<t._latlngs.length;o+=1)a.push({x:s[o].lng,y:s[o].lat});if(a.push({x:s[0].lng,y:s[0].lat}),r.push(a),t._holes&&t._holes.length>0)for(a=n(t._holes),o=0;o<a.length;o++)a[o].push(a[o][0]),r.push(a[o]);return{type:"polygon",components:r}}if(t.constructor===L.MultiPolyline||t.constructor===L.MultiPolygon||t.constructor===L.LayerGroup||t.constructor===L.FeatureGroup){i=[],s=t._layers;for(e in s)s.hasOwnProperty(e)&&(s[e].getLatLngs||s[e].getLatLng)&&i.push(this.deconstruct(s[e]));return{type:function(){switch(t.constructor){case L.MultiPolyline:return"multilinestring";case L.MultiPolygon:return"multipolygon";case L.FeatureGroup:return function(){var e,n,i,o;n=!0,i=!0,o=!0;for(e in t._layers)t._layers.hasOwnProperty(e)&&(t._layers[e].constructor!==L.Marker&&(o=!1),t._layers[e].constructor!==L.Polyline&&(i=!1),t._layers[e].constructor!==L.Polygon&&(n=!1));return o?"multipoint":i?"multilinestring":n?"multipolygon":"geometrycollection"}();default:return"geometrycollection"}}(),components:function(){var t,e;for(e=[],t=0;t<i.length;t+=1)i[t].components&&e.push(i[t].components);return e}()}}console.log(t.constructor===L.Rectangle||t.constructor===L.rectangle?"Deconstruction of L.Circle objects is not yet supported":"The passed object does not have any recognizable properties.")},"function"!=typeof Object.create&&(Object.create=function(t){var e=function(){};return e.prototype=t,new e});var CsLeaflet=CsLeaflet||{};CsLeaflet.Leaflet={_options:null,LMmarkers:new Array,LMcircles:new Array,LMpolylines:new Array,LMmultipolygons:new Array,LMmap:null,LMbounds:null,LMcacheBounds:null,LMcurrent_popup:null,LMsidewalk_feedback_tool:null,OPENSTREETMAP_URL:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",OPENSTREETMAP_ATTRIB:"Map data \xa9 OpenStreetMap contributors",CLOUDMADE_URL:"http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/{styleId}/256/{z}/{x}/{y}.png",CLOUDMADE_ATTRIB:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery \xa9 <a href="http://cloudmade.com">CloudMade</a>',STREET_VIEW:"streetView",CURRENT_LOCATION:"currentLocation",LOCATION_SELECT:"locationSelect",SIDEWALK_FEEDBACK:"sidewalkFeedback",init:function(t,e){this._options=e;var n={zoomControl:e.show_default_zoom_control,scrollWheelZoom:e.scroll_wheel_zoom,zoomAnimation:e.zoom_animation};if("number"==typeof e.min_zoom&&(n.minZoom=e.min_zoom),"number"==typeof e.max_zoom&&(n.maxZoom=e.max_zoom),this.LMmap=L.map(t,n),"OPENSTREETMAP"==e.tile_provider){var i=this.OPENSTREETMAP_URL,o=this.OPENSTREETMAP_ATTRIB;L.tileLayer(i,{minZoom:e.min_zoom,maxZoom:e.max_zoom,attribution:o}).addTo(this.LMmap)}else if("GOOGLEMAP"==e.tile_provider){var a=new L.Google("ROADMAP");this.LMmap.addLayer(a)}else if("CLOUDMADE"==e.tile_provider){var i=this.CLOUDMADE_URL,o=this.CLOUDMADE_ATTRIB;L.tileLayer(i,{minZoom:e.min_zoom,maxZoom:e.max_zoom,attribution:o,styleId:e.tile_style_id}).addTo(this.LMmap)}if(e.show_my_location&&this.addCurrentLocationControl(),e.show_street_view&&this.addStreetViewControl(),e.show_location_select&&this.addLocationSelectControl(),e.show_sidewalk_feedback&&CsLeaflet.SidewalkFeedbackTool){var r=Object.create(CsLeaflet.SidewalkFeedbackTool);r.init(this,e.sidewalk_feedback_options),this.LMsidewalk_feedback_tool=r}this.registerMapClickEvent(),this.registerPopupOpenEvent()},centerOnMarker:function(t){var e=findMarkerById(t);if(e){var n=e.getLatLng();this.panTo(n.lat,n.lng)}},panTo:function(t,e){var n=new L.LatLng(t,e);this.LMmap.panTo(n)},showMap:function(){for(var t=0;t<this.LMmarkers.length;t++)this.LMmap.addLayer(this.LMmarkers[t]);for(var t=0;t<this.LMcircles.length;t++)this.LMmap.addLayer(this.LMcircles[t]);for(var t=0;t<this.LMpolylines.length;t++)this.LMmap.addLayer(this.LMpolylines[t]);for(var t=0;t<this.LMmultipolygons.length;t++)this.LMmap.addLayer(this.LMmultipolygons[t]);var e;e=this.LMmarkers.length>0?this.calcMapBounds(this.LMmarkers):this.LMbounds,this.LMmap.fitBounds(e)},showMapOriginal:function(){mapBounds=this.LMcacheBounds,this.LMmap.fitBounds(mapBounds)},replaceMarkers:function(t,e){if(this.removeMarkers(),this.addMarkers(t),e)this.showMap();else for(var n=0;n<this.LMmarkers.length;n++)this.LMmap.addLayer(this.LMmarkers[n])},replaceSidewalkFeedbackMarkers:function(t,e){var n=this.LMsidewalk_feedback_tool;n&&(n.removeSidewalkFeedbackMarkers(),n.addSidewalkFeedbackMarkers(t),e?this.showMap():this.LMmap.addLayer(n.LMsidewalk_feedback_layergroup))},refreshMarkers:function(){for(var t=0;t<this.LMmarkers.length;t++)this.LMmap.removeLayer(this.LMmarkers[t]);for(var t=0;t<this.LMmarkers.length;t++)this.LMmap.addLayer(this.LMmarkers[t])},replaceCircles:function(t,e){if(this.removeCircles(),this.addCircles(t),e)this.showMap();else for(var n=0;n<this.LMcircles.length;n++)this.LMmap.addLayer(this.LMcircles[n])},replacePolylines:function(t,e){if(this.removePolylines(),this.addPolylines(t),e)this.showMap();else for(var n=0;n<this.LMpolylines.length;n++)this.LMmap.addLayer(this.LMpolylines[n])},removeMarkersKeepCache:function(){for(var t=0;t<this.LMmarkers.length;t++)this.LMmap.removeLayer(this.LMmarkers[t])},removeMarkers:function(){for(var t=0;t<this.LMmarkers.length;t++)this.LMmap.removeLayer(this.LMmarkers[t]);this.LMmarkers=new Array},removeCircles:function(){for(var t=0;t<this.LMcircles.length;t++)this.LMmap.removeLayer(this.LMcircles[t]);this.LMcircles=new Array},removePolylines:function(){for(var t=0;t<this.LMpolylines.length;t++)this.LMmap.removeLayer(this.LMpolylines[t]);this.LMpolylines=new Array},addMarkers:function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null!=n.lat&&null!=n.lng){var i=n.id,o=n.lat,a=n.lng,r=n.iconClass,s=n.description,l=n.title,u=n.open;marker=this.createMarker(i,o,a,r,s,l,u),this.LMmarkers.push(marker)}}},addMarkerToMap:function(t,e){e&&this.LMmarkers.push(t),this.LMmap.addLayer(t)},removeMarkerFromMap:function(t){match_marker=null,markers=new Array;for(var e=0;e<this.LMmarkers.length;e++)t.id!=this.LMmarkers[e].id?markers.push(this.LMmarkers[e]):match_marker=this.LMmarkers[e];this.LMmarkers=markers,match_marker&&this.LMmap.removeLayer(match_marker)},removeMatchingMarkers:function(t){markers=new Array;for(var e=0;e<this.LMmarkers.length;e++){var n=this.LMmarkers[e],i=n.id;null==i||-1==i.indexOf(t)?markers.push(n):this.LMmap.removeLayer(n)}this.LMmarkers=markers},addCircles:function(t){for(var e=0;e<t.length;e++){var n=t[e],i=n.lat,o=n.lng,a=n.radius,r={};n.options&&(r=n.options),this.addCircle(i,o,a,r)}},addMultipolygons:function(t){for(var e=0;e<t.length;e++){var n=t[e],i=(n.id,n.geom),o={};n.options&&(o=n.options),this.addMultipolygon(i,o)}},addPolylines:function(t){for(var e=0;e<t.length;e++){var n=t[e],i=(n.id,n.geom),o={};n.options&&(o=n.options),this.addPolyline(i,o)}},selectMarkerById:function(t){marker=this.findMarkerById(t),marker&&this.selectMarker(marker)},selectMarkerByName:function(t){marker=this.findMarkerByName(t),marker&&this.selectMarker(marker)},findMarkerInStorage:function(t){var e=localStorage.getItem("marker:"+t);if(e){var n=JSON.parse(e);return this.createMarker(n.id,n.lat,n.lng,n.iconClass,n.popupText,n.name,n.open)}},findMarkerById:function(t){var e;return this.LMmarkers.forEach(function(e){return e.id==t?e:void 0}),(e=this.findMarkerInStorage(t))?e:void 0},findMarkerByName:function(t){for(var e=0;e<this.LMmarkers.length;e++)if(this.LMmarkers[e].name===t)return this.LMmarkers[e]},createMarker:function(id,lat,lng,iconClass,popupText,name,open,options){options&&"object"==typeof options||(options={}),name&&(options.title=name);var latlng=new L.LatLng(lat,lng),marker=L.marker(latlng,options);return marker.id=id,marker.name=name,iconClass&&marker.setIcon(eval(iconClass)),popupText&&(marker.bindPopup(popupText).openPopup(),open&&marker.openPopup()),localStorage.setItem("marker:"+id,JSON.stringify({id:id,lat:lat,lng:lng,iconClass:iconClass,popupText:popupText,name:name,open:open})),marker},addPolyline:function(t,e){for(var n=new Array,i=0;i<t.length;i++){var o=t[i],a=new L.LatLng(o[0],o[1]);n.push(a)}var r=L.polyline(n,e);this.LMpolylines.push(r)},addCircle:function(t,e,n,i){var o=new L.LatLng(t,e),a=L.circle(o,n,i);this.LMcircles.push(a)},addMultipolygon:function(t,e){for(var n=new Array,i=0;i<t.length;i++){for(var o=new Array,a=0;a<t[i].length;a++){for(var r=new Array,s=0;s<t[i][a].length;s++){var l=t[i][a][s],u=new L.LatLng(l[0],l[1]);r.push(u)}o.push(r)}n.push(o)}var c=L.multiPolygon(n,e);this.LMmultipolygons.push(c)},selectMarker:function(t){t&&(t.openPopup(),this.LMmap.panTo(t.getLatLng()))},calcMapBounds:function(t){if(null==t||t.length<1||null==t[0])return nil;var e=t[0].getLatLng().lat,n=t[0].getLatLng().lng,i=t[0].getLatLng().lat,o=t[0].getLatLng().lng;if(t.length>1)for(var a=1;a<t.length;a++)e=e<t[a].getLatLng().lat?e:t[a].getLatLng().lat,n=n<t[a].getLatLng().lng?n:t[a].getLatLng().lng,i=i>t[a].getLatLng().lat?i:t[a].getLatLng().lat,o=o>t[a].getLatLng().lng?o:t[a].getLatLng().lng;return[[e,n],[i,o]]},calcMarkerBounds:function(t){return null==t?nil:[[t.getLatLng().lat,t.getLatLng().lng],[t.getLatLng().lat,t.getLatLng().lng]]},setMapToBounds:function(t){null==t&&(t=this.LMmarkers),t.length>0&&(this.LMbounds=this.calcMapBounds(t),this.LMmap.fitBounds(this.LMbounds))},setMapToMarkerBounds:function(t){t&&this.LMmap.fitBounds(this.calcMarkerBounds(t))},setMapBounds:function(t,e,n,i){this.LMbounds=[[t,e],[n,i]]},cacheMapBounds:function(t,e,n,i){this.LMcacheBounds=[[t,e],[n,i]]},closePopup:function(){this.LMcurrent_popup&&this.LMcurrent_popup._source.closePopup()},invalidateMap:function(){this.LMmap.invalidateSize(!1)},resetMap:function(){this.removeMarkers(),this.removeCircles(),this.removePolylines()},resetMapView:function(){this.LMmap._resetView(this.LMmap.getCenter(),this.LMmap.getZoom(),!0)},getFormattedAddrForMarker:function(t){return"<div class='well well-small'><div class='row'><div class='col-sm-3'><i class='fa fa-3x fa-building-o'></i></div><div class='col-sm-9'><div class='caption'><h4>"+t+"</h4></div></div></div></div>"},refresh:function(){this.LMmap.invalidateSize(!1),this.LMmap.fitBounds(this.LMbounds)},getMapControlTooltips:function(){var t=this._options?this._options:{};return t.map_control_tooltips||{}},addZoomControl:function(){var t=this.getMapControlTooltips();new L.Control.Zoom({zoomInTitle:t.zoom_in,zoomOutTitle:t.zoom_out}).addTo(this.LMmap)},registerCustomControl:function(){L.Control.CustomButton=L.Control.extend({_pressed:!1,_button:null,options:{position:"topleft",title:"",iconCls:"",toggleable:!1,ignorePopupWhenClick:!1,pressedCls:"leaflet-button-pressed",depressedCursorType:"",pressedCursorType:"crosshair",disabled:!1,disabledCls:"leaflet-disabled",clickCallback:function(){}},initialize:function(t,e){this.id=t,L.Util.setOptions(this,e)},checkIfIgnorePopupWhenClick:function(){return this.options.ignorePopupWhenClick},getToggleable:function(){return this.options.toggleable},getDisabled:function(){return this._disabled===!0||!1},setDisabled:function(t){t=t===!0||!1,this._disabled=t;var e=this._button||{};t?L.DomUtil.addClass(e,this.options.disabledCls):L.DomUtil.removeClass(e,this.options.disabledCls)},getPressed:function(){return this._pressed},setPressed:function(t){if(this.getToggleable()){this._pressed=t;var e=this._map;if(this._pressed){if(L.DomUtil.addClass(this._button,this.options.pressedCls),e){var n=e.customControls;if(n instanceof Array){var i=n.indexOf(this);n.forEach(function(t){i!=n.indexOf(t)&&t.setPressed(!1)})}L.DomUtil.get(e.getContainer().id).style.cursor=this.options.pressedCursorType||"crosshair"}}else L.DomUtil.removeClass(this._button,this.options.pressedCls),e&&(L.DomUtil.get(e.getContainer().id).style.cursor=this.options.depressedCursorType||"")}},onAdd:function(t){var e=L.DomUtil.create("div","leaflet-bar leaflet-control");return this._button=L.DomUtil.create("a","leaflet-bar-part",e),L.DomUtil.create("i",this.options.iconCls,this._button),this._button.href="#",this._button.title=this.options.title,L.DomEvent.on(this._button,"click",this._click,this),this.setDisabled(this.options.disabled),t.customControls||(t.customControls=[]),t.customControls.push(this),e},_click:function(t){L.DomEvent.stopPropagation(t),L.DomEvent.preventDefault(t),this.getDisabled()||(this.options.toggleable&&this.setPressed(!this._pressed),this.options.clickCallback())}})},addCurrentLocationControl:function(){if("geolocation"in navigator){L.Control.CustomButton||this.registerCustomControl();var t=this.getMapControlTooltips(),e=this.LMmap,n=new L.Control.CustomButton(this.CURRENT_LOCATION,{title:t.my_location,iconCls:"fa fa-lg fa-location-arrow",clickCallback:function(){e.locate({setView:!0})}});n.addTo(e)}},addStreetViewControl:function(){L.Control.CustomButton||this.registerCustomControl();var t=this.getMapControlTooltips(),e=this.LMmap,n=new L.Control.CustomButton(this.STREET_VIEW,{title:t.display_street_view,iconCls:"fa fa-lg leaflet-street-view-icon",toggleable:!0,ignorePopupWhenClick:!0});n.addTo(e)},openStreetView:function(t){var e=this._options?this._options:{},n=e.street_view_url||"",t=t||{};window.open(n+"?lat="+t.lat+"&lng="+t.lng,"_blank")},addLocationSelectControl:function(){L.Control.CustomButton||this.registerCustomControl();var t=this.getMapControlTooltips(),e=this.LMmap,n=new L.Control.CustomButton(this.LOCATION_SELECT,{title:t.select_location_on_map,iconCls:"fa fa-lg fa-map-marker",toggleable:!0});n.addTo(e)},getActiveCustomControl:function(){var t=this.LMmap,e=t.customControls;if(e instanceof Array)for(var n=0,i=e.length;i>n;n++){var o=e[n];if(o.getToggleable()&&o.getPressed())return o}return null},executeActiveCustomControl:function(t){var e=this.LMmap,n=(e.customControls,this.getActiveCustomControl());if(n)switch(n.id){case this.STREET_VIEW:this.openStreetView(t);break;case this.LOCATION_SELECT:e.fire("placechange",{latlng:t});break;case this.SIDEWALK_FEEDBACK:e.fire("newsidewalkfeedback",{latlng:t})}},registerMapClickEvent:function(){var t=this,e=t.LMmap,n=0;e.on("click",function(e){n++,setTimeout(function(){1===n&&t.executeActiveCustomControl(e.latlng),n=0},200)})},registerPopupOpenEvent:function(){var t=this;t.LMmap.on("popupopen",function(e){t.LMcurrent_popup=e.popup;var n=t.getActiveCustomControl();n&&n.checkIfIgnorePopupWhenClick()&&t.executeActiveCustomControl(e.popup.getLatLng())})}},CsLeaflet.Leaflet.prototype=CsLeaflet.Leaflet,L.Google=L.Class.extend({includes:L.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1},initialize:function(t,e){L.Util.setOptions(this,e),this._type=google.maps.MapTypeId[t||"SATELLITE"]},onAdd:function(t,e){this._map=t,this._insertAtTheBottom=e,this._initContainer(),this._initMapObject(),t.on("viewreset",this._resetCallback,this),this._limitedUpdate=L.Util.limitExecByInterval(this._update,150,this),t.on("move",this._update,this),this._reset(),this._update()},onRemove:function(){this._map._container.removeChild(this._container),this._map.off("viewreset",this._resetCallback,this),this._map.off("move",this._update,this)},getAttribution:function(){return this.options.attribution},setOpacity:function(t){this.options.opacity=t,1>t&&L.DomUtil.setOpacity(this._container,t)},_initContainer:function(){var t=this._map._container;first=t.firstChild,this._container||(this._container=L.DomUtil.create("div","leaflet-google-layer leaflet-top leaflet-left"),this._container.id="_GMapContainer"),t.insertBefore(this._container,first),this.setOpacity(this.options.opacity);var e=this._map.getSize();this._container.style.width=e.x+"px",this._container.style.height=e.y+"px",this._container.style.zIndex=0},_initMapObject:function(){this._google_center=new google.maps.LatLng(0,0);var t=new google.maps.Map(this._container,{center:this._google_center,zoom:0,mapTypeId:this._type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1}),e=this;this._reposition=google.maps.event.addListenerOnce(t,"center_changed",function(){e.onReposition()}),t.backgroundColor="#ff0000",this._google=t},_resetCallback:function(t){this._reset(t.hard)},_reset:function(){this._initContainer()},_update:function(){this._resize();var t=this._map.getBounds(),e=t.getNorthEast(),n=t.getSouthWest(),i=(new google.maps.LatLngBounds(new google.maps.LatLng(n.lat,n.lng),new google.maps.LatLng(e.lat,e.lng)),this._map.getCenter()),o=new google.maps.LatLng(i.lat,i.lng);this._google.setCenter(o),this._google.setZoom(this._map.getZoom())},_resize:function(){var t=this._map.getSize();(this._container.style.width!=t.x||this._container.style.height!=t.y)&&(this._container.style.width=t.x+"px",this._container.style.height=t.y+"px",google.maps.event.trigger(this._google,"resize"))},onReposition:function(){}});var baseIcon=L.Icon.extend({options:{shadowUrl:"http://maps.google.com/intl/en_us/mapfiles/ms/micons/msmarker.shadow.png",iconSize:[32,32],iconAnchor:[16,32],shadowAnchor:[16,32],popupAnchor:[0,-24]}}),redIcon=new baseIcon({iconUrl:"http://maps.google.com/intl/en_us/mapfiles/ms/micons/red-dot.png"}),blueIcon=new baseIcon({iconUrl:"http://maps.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.pngg"}),purpleIcon=new baseIcon({iconUrl:"http://maps.google.com/intl/en_us/mapfiles/ms/micons/purple-dot.png"}),yellowIcon=new baseIcon({iconUrl:"http://maps.google.com/intl/en_us/mapfiles/ms/micons/yellow-dot.png"}),greenIcon=new baseIcon({iconUrl:"http://maps.google.com/intl/en_us/mapfiles/ms/micons/green-dot.png"}),orangeIcon=new baseIcon({iconUrl:"http://maps.google.com/intl/en_us/mapfiles/ms/micons/orange-dot.png"}),baseRouteIcon=L.Icon.extend({options:{shadowUrl:"http://maps.google.com/mapfiles/shadow50.png",iconSize:[24,34],iconAnchor:[12,34],shadowAnchor:[12,34],popupAnchor:[0,-24]}}),startIcon=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/dd-start.png"}),stopIcon=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/dd-end.png"}),startCandidateA=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenA.png"}),startCandidateB=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenB.png"}),startCandidateC=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenC.png"}),startCandidateD=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenD.png"}),startCandidateE=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenE.png"}),startCandidateF=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenF.png"}),startCandidateG=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenG.png"}),startCandidateH=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenH.png"}),startCandidateI=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenI.png"}),startCandidateJ=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenJ.png"}),startCandidateK=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenK.png"}),startCandidateL=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenL.png"}),startCandidateM=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenK.png"}),startCandidateN=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenN.png"}),startCandidateO=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenO.png"}),startCandidateP=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenP.png"}),startCandidateQ=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenQ.png"}),startCandidateR=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenR.png"}),startCandidateS=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenS.png"}),startCandidateT=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_greenT.png"}),stopCandidateA=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerA.png"}),stopCandidateB=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerB.png"}),stopCandidateC=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerC.png"}),stopCandidateD=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerD.png"}),stopCandidateE=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerE.png"}),stopCandidateF=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerF.png"}),stopCandidateG=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerG.png"}),stopCandidateH=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerH.png"}),stopCandidateI=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerI.png"}),stopCandidateJ=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerJ.png"}),stopCandidateK=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerK.png"}),stopCandidateL=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerL.png"}),stopCandidateM=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerK.png"}),stopCandidateN=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerN.png"}),stopCandidateO=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerO.png"}),stopCandidateP=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerP.png"}),stopCandidateQ=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerQ.png"}),stopCandidateR=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerR.png"}),stopCandidateS=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerS.png"}),stopCandidateT=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/markerT.png"}),placeCandidateA=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowA.png"}),placeCandidateB=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowB.png"}),placeCandidateC=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowC.png"}),placeCandidateD=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowD.png"}),placeCandidateE=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowE.png"}),placeCandidateF=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowF.png"}),placeCandidateG=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowG.png"}),placeCandidateH=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowH.png"}),placeCandidateI=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowI.png"}),placeCandidateJ=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowJ.png"}),placeCandidateK=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowK.png"}),placeCandidateL=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowL.png"}),placeCandidateM=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowM.png"}),placeCandidateN=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowN.png"}),placeCandidateO=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowO.png"}),placeCandidateP=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowP.png"}),placeCandidateQ=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowQ.png"}),placeCandidateR=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowR.png"}),placeCandidateS=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowS.png"}),placeCandidateT=new baseRouteIcon({iconUrl:"http://maps.google.com/mapfiles/marker_yellowT.png"}),baseMiniIcon=L.Icon.extend({options:{iconSize:[7,7],iconAnchor:[3,7],popupAnchor:[0,-5]}}),blueMiniIcon=new baseMiniIcon({iconUrl:"https://maps.gstatic.com/intl/en_us/mapfiles/markers2/measle_blue.png"}),sidewalkFeedbackIcon=new L.icon({iconUrl:"/init-assets/map/warning.png",iconSize:[16,16]}),GatewayMapUtil=function(){var t=function(t,e){$.ajax({url:t}).done(e)},e=function(t){if("object"!=typeof t)return{};var e={};for(var n in t)e[n]=t[n];return e},n=function(t,e,n,i){if(t instanceof Array&&3==t.length&&e instanceof Array&&3==e.length&&"number"==typeof n&&!(1>n)){for(var o,a,r,s=t[0],l=t[1],u=t[2],c=e[0],d=e[1],h=e[2],p=(c-s)/n,f=(d-l)/n,m=(h-u)/n,g=function(t,e,n){return i&&0!=i?"rgba("+t+","+e+","+n+","+i+")":"rgb("+t+","+e+","+n+")"},v=[],y=0;n>y;y++)0===y?(o=s,a=l,r=u):y===n-1?(o=c,a=d,r=h):(o+=p,a+=f,r+=m),v.push(g(parseInt(o),parseInt(a),parseInt(r)));return v}},i=function(t,e){if("number"!=typeof t)return t;e=e||{};var n=e.format,i=e.options||{},o=t;switch(n){case"number":o=$.formatNumber(t,i);break;case"currency":o="$"+$.formatNumber(t,i);break;case"percent":var a=i.decimal||0;o=(100*t).toFixed(a)+"%"}return o},o=function(t){t||(t=5);for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;t>i;i++)e+=n.charAt(Math.floor(Math.random()*n.length));return e};return{getData:t,getColorsFromStartEnd:n,cloneObject:e,formatNumber:i,randString:o}}(),CsLeaflet=CsLeaflet||{};CsLeaflet.Leaflet=CsLeaflet.Leaflet||function(){},CsLeaflet.Leaflet.prototype.exportParameters=function(){var t={},e=this.LMmap._layers;if(this.layerControl){var n=this.layerControl._layers;for(var i in n){var o=n[i];if(!o.overlay&&e[i]){t.basemap=o.name;break}}}t.zoom=this.LMmap.getZoom();var a=this.LMmap.getCenter();t.lat=a.lat,t.lng=a.lng;var r=this.LMmap.getBounds();return t.bounds={ymin:r.getWest(),ymax:r.getEast(),xmin:r.getSouth(),xmax:r.getNorth()},visible_baseoverlays=[],this.baseOverlayIds&&this.baseOverlayIds.length>0&&this.baseOverlayIds.forEach(function(t){e[t]&&visible_baseoverlays.push(e[t].name)}),t.visible_baseoverlays=visible_baseoverlays,t},CsLeaflet.Leaflet.prototype.setZoomExtent=function(t,e,n){this.LMmap.setView([t,e],n)},CsLeaflet.Leaflet.prototype.zoomToWKT=function(t){var e,n=new Wkt.Wkt;n.read(t),e=n.toObject(),"function"==typeof e.getBounds?this.LMmap.fitBounds(e.getBounds()):(this.LMmap.setZoom(15),this.LMmap.panTo(e.getLatLng()))},CsLeaflet.Leaflet.prototype.addSidebar=function(t){L.control.sidebar&&(this.sidebarControl=L.control.sidebar(t).addTo(this.LMmap))},CsLeaflet.Leaflet.prototype.addNavbar=function(t){L.control.navbar&&(t=t||{},this.navbarControl=L.control.navbar(t).addTo(this.LMmap))},CsLeaflet.Leaflet.prototype.addFullscreenControl=function(t){L.control.fullscreen&&(this.fullscreenControl=L.control.fullscreen({title:"Show map in fullscreen",fullScreenEl:t}).addTo(this.LMmap))},CsLeaflet.Leaflet.prototype.addZoomSliderControl=function(){L.control.zoomslider&&($(".leaflet-control-zoom").remove(),this.zoomSliderControl=L.control.zoomslider().addTo(this.LMmap))},CsLeaflet.Leaflet.prototype.addStudyAreaControl=function(){if(L.Control.Draw){L.drawLocal.draw.toolbar.buttons.polygon="Define study area";var t=this.LMmap,e=new L.FeatureGroup;t.addLayer(e);var n=new L.Control.Draw({draw:{polyline:!1,marker:!1,circle:!1,rectangle:!1},edit:!1,remove:!1});t.addControl(n),this.studyAreaEditingLayer=e,this.studyAreaControl=n}},CsLeaflet.Leaflet.prototype.addLayerControl=function(){this.layerControl=L.control.layers().addTo(this.LMmap)},CsLeaflet.Leaflet.prototype.getLayerControl=function(){return this.layerControl||this.addLayerControl(),this.layerControl},CsLeaflet.Leaflet.prototype.getLegends=function(){return this.legends||(this.legends={}),this.legends},CsLeaflet.Leaflet.prototype.getLabels=function(){return this.labels||(this.labels={}),this.labels},CsLeaflet.Leaflet.prototype.registerAddOverlayEvent=function(){var t=this,e=t.LMmap,n=t.getLabels();e.on("overlayadd",function(i){var o=i.layer.layerId,a="#layer-legend-"+o;$(a).length>0&&$(a).show(),t.baseOverlayIds&&t.baseOverlayIds.indexOf(o)>=0&&i.layer.bringToBack();var r=i.name,s=n[r];if(s instanceof Array)for(var l=0,u=s.length;u>l;l++)e.showLabel(s[l])})},CsLeaflet.Leaflet.prototype.registerRemoveOverlayEvent=function(){var t=this.LMmap,e=this.getLabels();t.on("overlayremove",function(t){var n=t.layer.layerId,i="#layer-legend-"+n;$(i).length>0&&$(i).hide();var o=t.name,a=e[o];if(a instanceof Array)for(var r=0,s=a.length;s>r;r++)a[r].close()})},CsLeaflet.Leaflet.prototype.zoomToExtent=function(t,e,n){this.LMmap.setView([t,e],n)},CsLeaflet.Leaflet.prototype.addAttribution=function(t,e){if(t){var n="";(e||0===e)&&(n="id='attribution-"+e+"'"),$("#attribution").append("<p "+n+">"+t+"</p>")}},CsLeaflet.Leaflet.prototype.deleteLayerAttribution=function(t){(t||0===t)&&$("#attribution-"+t).remove()},CsLeaflet.Leaflet.prototype.addBasemaps=function(t,e){if(t instanceof Array)for(var n=this,i=n.LMmap,o=n.getLayerControl(),a=function(t){var e=null;switch(t.type){case"OpenStreetMap":e=new L.TileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png");break;case"CloudMade":e=new L.TileLayer("http://{s}.tile.cloudmade.com/"+t.key+"/{styleId}/"+t.resolution+"/{z}/{x}/{y}.png",{styleId:t.styleId});break;case"Google":e=new L.Google(t.layerName);break;case"Esri":e=new L.esri.BasemapLayer(t.layerName)}return n.addAttribution(t.attribution),e},r=!1,s=0,l=t.length;l>s;s++){var u=t[s];if(u.hasOwnProperty("type")){var c=u.name;e||(e=c);var d=a(u);d&&(r||c!==e||(i.addLayer(d),r=!0),o.addBaseLayer(d,c))}}},CsLeaflet.Leaflet.prototype.addBaseOverlay=function(t){this.baseOverlayIds=this.baseOverlayIds||[];var e=this,n=this.LMmap;n.spin(!0),t.non_clickable=!0,this.addOverlayLayer(t,function(t){n.spin(!1);var i=t.layerId;"number"!=typeof i&&(i=t._leaflet_id),e.baseOverlayIds.indexOf(i)<0&&e.baseOverlayIds.push(i)})},CsLeaflet.Leaflet.prototype.overwriteLayerStyleFromLegend=function(t,e,n){if(t=t||{},e=e||{},e.field&&e.colors&&"unique_value"===e.symbology_type){var i=t;t=function(t){return n?i.fillColor=e.colors[t.properties[e.field]]:i.color=e.colors[t.properties[e.field]],i}}return t},CsLeaflet.Leaflet.prototype.addOverlayLayer=function(t,e){if(t.hasOwnProperty("type"))switch(t.type){case"Geojson":this.addGeojsonLayer(t,e);break;case"PBF_TILE":this.addVectorTilePBF(t,e)}},CsLeaflet.Leaflet.prototype.addGeojsonLayer=function(t,e){var n=this.LMmap,i=this.getLayerControl(),o=(this.overlayers,this),a=t.name,r=(t.viewId,"POLYGON"===t.geometry_type),s=t.style;t.predefined_symbology&&(s=o.overwriteLayerStyleFromLegend(s,t.predefined_symbology,r));var l=L.geoJson([],{style:s});t.turn_off_by_default||n.addLayer(l),l.layerId=l._leaflet_id||GatewayMapUtil.randString(6),l.name=a,l.geometryType=t.geometry_type,t.predefined_symbology&&o.addSimpleLegend(l,[{subject:a}],a,t.predefined_symbology.colors,t.predefined_symbology.labels,t.turn_off_by_default),i.addOverlay(l,a),"string"==typeof t.attribution&&o.addAttribution(t.attribution,l.layerId);
var u=function(t){l.clearLayers(),l.addData(t),"function"==typeof e&&e.apply(this,[l]),n.spin(!1)};n.spin(!0),t.url?GatewayMapUtil&&GatewayMapUtil.getData(t.url,u):u(t.data)},CsLeaflet.Leaflet.prototype.getColumnIndex=function(t,e){for(var n=null,t=t||[],i=0,o=t.length;o>i;i++){var a=t[i];if(a.name===e){n=a.index;break}}return n},CsLeaflet.Leaflet.prototype.getDisplayColumnConfig=function(t,e){for(var n=null,t=t||[],i=0,o=t.length;o>i;i++){var a=t[i];if(a.index===e){n=a;break}}return n},CsLeaflet.Leaflet.prototype.getLayerDisplayColumnConfig=function(t,e){return t.displayConfig||this.setLayerDisplayColumnConfig(t,e),t.displayConfig},CsLeaflet.Leaflet.prototype.setLayerDisplayColumnConfig=function(t,e){var n=t.symbology||e||{},i=t.displayColumnIndex;i||0==i||(i=n.default_column_index),t.displayConfig=this.getDisplayColumnConfig(n.columns,i)},CsLeaflet.Leaflet.prototype.calculateNaturalValueBreaks=function(t,e,n){for(var i=[],o=(e-t)/(n-1),a=t;e>=a;)i.push(a),a+=o;return i},CsLeaflet.Leaflet.prototype.calculateEqualValueBreaks=function(t,e,n){for(var i=[],o=t-t%n;e>o;)i.push(o),o+=n;return o>=e&&i.push(o),i},CsLeaflet.Leaflet.prototype.calculateQuantileBreaks=function(t,e){if(!t||0==t.totalCount)return[];var n=Math.round(t.totalCount/e),i=t.minValue,o=[i],a=t.valueCounts,r=a.length,s=a[0][1],l=!1;s>=n&&(l=!0,o.push(i),n=Math.round((t.totalCount-s)/(e-1)));for(var u=0,c=0;r>c;c++){var d=a[c],h=d[0];if(!l||h!=i){var p=d[1];if(u+=p,u>=n&&(o.push(h),u=0),o.length==e)break}}return o.indexOf(t.maxValue)<0&&o.push(t.maxValue),o},CsLeaflet.Leaflet.prototype.calculateGeometricBreaks=function(t,e,n,i){for(var o=[],a=t-t%n,r=i;e>=a;)o.push(a),a=n*r,r*=i;return a>e&&o.push(a),o},CsLeaflet.Leaflet.prototype.calculateTileFeatureValueBounds=function(t){function e(t,e){return t-e}var n=t.options.features;if(!n)return null;var o=t.symbology,a=o.columns;switch(o.symbology_type){case"geometric_breaks":case"natural_breaks":var r,s;for(var l in n)for(var u=n[l],c=0,d=a.length;d>c;c++){var h=a[c].name,p=parseFloat(u[h]);isNaN(p)||(("number"!=typeof r||r>p)&&(r=p),("number"!=typeof s||p>s)&&(s=p))}"number"==typeof r&&"number"==typeof s&&(o.minValue=r,o.maxValue=s);break;case"quantile_breaks":var f=[];for(var l in n)for(var u=n[l],c=0,d=a.length;d>c;c++){var h=a[c].name,p=parseFloat(u[h]);isNaN(p)||f.push(p)}var m={},g=[],v=f.length;for(i=0;i<v;++i){var y=f[i];m[y]||(g.push(y),m[y]=0),++m[y]}g=g.sort(e);var _=[];g.forEach(function(t){_.push([t,m[t]])}),o.values={totalCount:v,minValue:g[0],maxValue:g[g.length-1],valueCounts:_}}},CsLeaflet.Leaflet.prototype.prepareLayerSymbologyValues=function(t,e){var n=e.color_scheme;if(n){var i=e.symbology_type;switch(i){case"quantile_breaks":e.breaks=this.calculateQuantileBreaks(e.values,n.class_count);var o=e.breaks.slice();o.length>1&&o[0]==o[1]&&(o[0]=o[1]-1),e.scale=chroma.scale([n.start_color,n.end_color]).domain(o).mode("hsv"),e.colors=e.scale.colors();break;case"geometric_breaks":var a=n.gap_value,r=n.multiplier;e.breaks=r?this.calculateGeometricBreaks(0,e.maxValue,a,r):this.calculateEqualValueBreaks(0,e.maxValue,a),e.scale=chroma.scale([n.start_color,n.end_color]).domain(e.breaks).mode("hsv"),e.colors=e.scale.colors();break;case"natural_breaks":e.breaks=this.calculateNaturalValueBreaks(0,maxValue,n.class_count),e.scale=chroma.scale([n.start_color,n.end_color]).domain(e.breaks).mode("hsv"),e.colors=e.scale.colors()}}},CsLeaflet.Leaflet.prototype.addVectorTilePBF=function(t,e){var n=this.LMmap,i=this.getLayerControl(),o=(this.overlayers,this),a=function(a){a=a||[];var r={},s=!1,l=t.referenceColumn;$.grep(a,function(t){s||(s=!0),r[t[l]]=t});var u=t.name,c=t.viewId,d=t.geomReferenceColumn,h=t.symbology||{},p=[];t.non_clickable||p.push(t.tileName);var f=new L.TileLayer.MVTSource({features:r,url:t.url,clickableLayers:p,mutexToggle:!0,onSelect:function(e){if(e&&s){var i=f.symbology||h,a=o.getLayerDisplayColumnConfig(f,h),p="n/a",m="",g="",v=r[e.properties[d]];a&&(g=a.title,m=v[a.name]),(0==m||m)&&(p=GatewayMapUtil.formatNumber(m,i.number_formatter)),n.fireEvent("updateDisplayInfo",{info:{layerName:u,viewId:c,title:g,attributes:v,key:v[l],type:v.area_type,column:a.name,value:p,showDemoStats:t.is_demo,showTMCStats:t.is_tmc,showLinkStats:t.is_link}})}f.fireEvent("featureSelected",{feature:e})},onDeselect:function(){n.fireEvent("updateDisplayInfo")},onClick:function(t){!t.feature&&f._selectedFeature&&f._selectedFeature.deselect()},getIDForLayerFeature:function(t){return t.properties[d]},filter:function(e){var n=!0;if(s){var i=r[e.properties[d]];n=i||!1}return!t.showLabel&&e.layer.name.indexOf("_LabelPoint")>-1&&(n=!1),n},layerLink:function(t){return returnedLayerName=t.indexOf("_LabelPoint")>-1?t.replace("_LabelPoint",""):t+"_LabelPoint",returnedLayerName},style:function(e){f.hasOwnProperty("showAreaBoundary")||(f.showAreaBoundary=t.showAreaBoundary);var n=GatewayMapUtil.cloneObject(t.style)||{};t.highlightStyle&&(n.selected=GatewayMapUtil.cloneObject(t.highlightStyle));var i=t.predefined_symbology;if(i)i.field&&i.colors&&"unique_value"===i.symbology_type&&(n.color=i.colors[e.properties[i.field]]);else if(!t.non_clickable){var a=o.getLayerDisplayColumnConfig(f,h),l=null,u=null;if(s&&(u=r[e.properties[d]]),u&&a&&(l=u[a.name]),!l&&0!=l)return{color:"transparent",fillColor:"transparent",size:0,radius:0,outline:{color:"transparent",size:0}};var c=f.symbology||h;f.displayColumnIndex||0==f.displayColumnIndex||(o.calculateTileFeatureValueBounds(f),o.prepareLayerSymbologyValues(f,c),f.displayColumnIndex=c.default_column_index);var p=o.getDisplayColumnConfig(c.columns,f.displayColumnIndex||c.default_column_index);if(!p)return{};var m=o.findColor(f,c,u[p.name],.5);if(!m)return{};n.color=m}return 3===e.type&&(n.outline=f.showAreaBoundary?{color:"rgb(119,119,119)",size:.8}:{color:"transparent",size:.1},n.selected={color:m,outline:{color:"rgb(0,0,0)",size:1.5}}),t.showLabel&&t.labelColumnName&&e.layer.name.indexOf("_LabelPoint")>-1&&(n.staticLabel=function(){n.radius=0;var i={html:e.properties[t.labelColumnName],iconSize:[125,30]};return i}),n}});if(t.turn_off_by_default||n.addLayer(f),f.layerId=f._leaflet_id||GatewayMapUtil.randString(6),f.name=u,f.geometryType=t.geometry_type,t.predefined_symbology){var m=t.predefined_symbology;o.addSimpleLegend(f,[{subject:u}],u,m.colors,m.labels,t.turn_off_by_default)}else f.symbology=h,f.displayColumnIndex||0==f.displayColumnIndex||(o.calculateTileFeatureValueBounds(f),o.prepareLayerSymbologyValues(f,h),f.displayColumnIndex=h.default_column_index);i.addOverlay(f,u),"string"==typeof t.attribution&&o.addAttribution(t.attribution,f.layerId),"function"==typeof e&&e.apply(this,[f]),n.spin(!1)};n.spin(!0),a(t.data)},CsLeaflet.Leaflet.prototype.showLabel=function(t,e,n){if(t&&"string"==typeof e&&e){var i=this.LMmap;if(i){for(var o=[],a=t.getLayers(),r=0,s=a.length;s>r;r++){var l=a[r],u=new L.Label(n);u.setContent(l.feature.properties[e]),u.setLatLng(l.getBounds().getCenter()),i.showLabel(u),o.push(u)}this.getLabels()[t.name]=o}}},CsLeaflet.Leaflet.prototype.updateLayerDisplayProperties=function(t,e,n){t&&"string"==typeof e&&(t[e]=n)},CsLeaflet.Leaflet.prototype.registerEventsForLayer=function(t,e){function n(e){if(e){var n=t.symbology.number_formatter;l&&e.setStyle(l),L.Browser.ie||L.Browser.opera||e.bringToFront();var i=e.feature;if("object"==typeof i&&i.hasOwnProperty("properties")){var o="n/a";if(0==e.displayValue||e.displayValue){o=GatewayMapUtil.formatNumber(e.displayValue,n);var a=s.getLayerDisplayColumnConfig(t);r.fireEvent("updateDisplayInfo",{info:{layerName:t.name,title:t.displayTitle,attributes:i.properties,key:i.properties[t.displayLabelPropertyName],type:featProp.properties.area_type,column:a.name,value:o}})}}}}function i(e){e&&(e.hasOwnProperty("prevStyle")?e.setStyle(e.prevStyle):t.resetStyle(e),r.fireEvent("updateDisplayInfo",{}))}function o(t){t&&r.fitBounds(t.getBounds())}function a(t){t.on({click:c,mouseover:d,mouseout:h})}var r=this.LMmap,s=(r.displayInfo,this),l=e.highlightStyle,u=(e.displayInfoConfig,null),c=function(t){i(u),u=t.target,n(u),o(u)};r.on("click",function(){i(u)});for(var d=function(t){n(t.target)},h=function(t){i(t.target)},p=t.getLayers(),f=0,m=p.length;m>f;f++)a(p[f])},CsLeaflet.Leaflet.prototype.setAreaColumnNameForLayer=function(t,e){t&&"string"==typeof e&&(t.areaColumnName=e)},CsLeaflet.Leaflet.prototype.setExternalDataForLayer=function(t,e){t&&(t.externalData=e)},CsLeaflet.Leaflet.prototype.setDisplayColumnIndexForLayer=function(t,e){t&&(t.displayColumnIndex=e,this.setLayerDisplayColumnConfig(t))},CsLeaflet.Leaflet.prototype.setValueLocaterForLayer=function(t,e){t&&"function"==typeof e&&(t.valueLocatorFn=e)},CsLeaflet.Leaflet.prototype.findColor=function(t,e,n,i){var o=t.symbology||e,a=o.color_scheme,r=null;switch(o.symbology_type){case"quantile_breaks":r=n==e.breaks[0]?chroma.color(e.colors[0]).alpha(i).css():e.scale(n).alpha(i).css();break;case"geometric_breaks":case"natural_breaks":r=e.scale(n).alpha(i).css();break;case"custom_breaks":for(var s=a,l=0,u=s.length;u>l;l++){var c=s[l],d=c.min_value,h=c.max_value;if((!d&&0!=d||n>=d)&&(!h&&0!=h||h>n)){r=c.color;break}}break;case"unique_value":for(var s=a,l=0,u=s.length;u>l;l++){var c=s[l];if(c.value==n){r=c.color;break}}}return r},CsLeaflet.Leaflet.prototype.renderThematicColor=function(t,e){if(GatewayMapUtil&&t&&"function"==typeof t.getLayers){var n=t.options.style;n||(n={});var i=t.valueLocatorFn;if("function"==typeof i)for(var o="POLYGON"===t.geometryType,a=t.areaColumnName,r=t.getLayers(),s=0,l=r.length;l>s;s++){var u=GatewayMapUtil.cloneObject(n),c=r[s],d=c.feature.properties,h=(d[a],i(d,t.displayColumnIndex));color=this.findColor(t,e,h,.5),o?(u.fillColor=color,null!=color?u.fillOpacity=.4:u.opacity=.2):(u.color=color,null===color&&(u.opacity=.2)),c.setStyle(u),c.displayValue=h,c.prevStyle=u}}},CsLeaflet.Leaflet.prototype.deleteLayerLegendContainer=function(t){var e="layer-legend-"+t;$("#legend #"+e).remove()},CsLeaflet.Leaflet.prototype.addLayerLegendContainer=function(t,e,n,i){var o="layer-legend-"+t.layerId;if(0===$("#legend #"+o).length){var a="";i&&(a='style="display: none;"');var r=(t.geometryType||"").toLowerCase(),s="info legend "+r,l="<div id='"+o+"' data-layer-id='"+t.layerId+"' class='"+s+"' "+a+"><h4><b>"+t.name+"</b></h4><div class='legend-title'></div><div class='legend-body'></div></div>";$("#legend").append(l),$("#"+o+" .legend-title").append("<h5><b>"+n+"</b></h5>")}},CsLeaflet.Leaflet.prototype.addColorGradientLegend=function(t,e,n){this.addLayerLegendContainer(t,e,t.symbology.subject,n);var i=t.symbology,o=i.number_formatter,a="",r=[],s=i.symbology_type;switch(s){case"quantile_breaks":var l=(i.colors||[]).slice(),u=(i.breaks||[]).slice();u.length>1&&u[0]==u[1]&&(r.push('<h5><i style="background:'+l[0]+'"></i> '+GatewayMapUtil.formatNumber(u[0],o)+"</h5>"),u.shift(),l.shift());for(var c=0;c<u.length-1;c++){var d=u[c],h=u[c+1];r.push('<h5><i style="background:'+l[c]+'"></i> '+GatewayMapUtil.formatNumber(d,o)+" &ndash; "+GatewayMapUtil.formatNumber(h,o)+"</h5>")}break;case"geometric_breaks":case"natural_breaks":var l=i.colors||[],u=i.breaks||[];if(l.length!=u.length-1)return;for(var c=0;c<u.length-1;c++){var d=u[c],h=u[c+1];r.push('<h5><i style="background:'+l[c]+'"></i> '+GatewayMapUtil.formatNumber(d,o)+"&ndash;"+GatewayMapUtil.formatNumber(h,o)+"</h5>")}break;case"unique_value":case"custom_breaks":for(var p=i.color_scheme,c=0,f=p.length;f>c;c++){var m=p[c];r.push('<h5><i style="background:'+m.color+'"></i> '+m.label+"</h5>")}}a+=r.join("");var g="layer-legend-"+t.layerId;$("#legend #"+g+" .legend-body").empty(),$("#legend #"+g+" .legend-body").append(a),$("#"+g+" .legend-title").empty(),$("#"+g+" .legend-title").append("<h5><b>"+i.subject+"</b></h5>")},CsLeaflet.Leaflet.prototype.addSimpleLegend=function(t,e,n,i,o,a,r,s){this.addLayerLegendContainer(t,e,n,a);var l="",u=[];for(var c in i){var d=c;o&&(d=o[c]);var h="";h=r?'style="background:transparent; border: 2px solid '+i[c]+'"':'style="background:'+i[c]+'"';var p=null;s&&(p=s[c]),u.push("<h5><i "+h+"></i> "+(p?'<div class="'+p.options.className+' image-legend"></div>':"")+d+"</h5>")}l+=u.join("")+"</div>";var f="layer-legend-"+t.layerId;$("#legend #"+f+" .legend-body").empty(),$("#legend #"+f+" .legend-body").append(l)},CsLeaflet.Leaflet.prototype.addRTPWkt=function(t,e,n,i,o){var a=n.default_column_index,r=this.LMmap;e=e||[];var s,l=new Wkt.Wkt,u={},c={};n.color_scheme.forEach(function(t){u[t.value]=t.color,c[t.label]=t.color});var d={};for(var h in u)d[h]=L.divIcon({className:h.replace(/\s+/g,"-")+"-div-image",iconSize:null});d.fallback=L.divIcon({className:"project-div-icon",iconSize:null});var p=L.layerGroup(),f=[];return e.forEach(function(t){if("MULTILINESTRING EMPTY"!=t.geography){if(""==t.geography)return console.log("WARNING: empty geography."),void console.log(t);var e=d[t[a]];null==e&&(e=d.fallback),l.read(t.geography),s=l.toObject({riseOnHover:!0,icon:e,weight:4,color:u[t[a]],lineCap:"butt"}),s.properties=t;var n=function(t,e){return'<tr><td style="text-align: right;"><b>'+t+'</b> </td><td style="text-align:left; padding-left: 10px;">'+e+"</span></td></tr>"},r=function(t){return"<a target='_blank' href="+t+">View in Table</a>"},c="";if(t.rtp_id){var h=i+"?search="+t.rtp_id,m=t.estimated_cost;m&&(m="$"+m+"M"),c=r(h)+"<table>"+n("Project ID:",t.rtp_id)+n("Year:",t.year)+n("Plan Portion:",t.plan_portion)+n("Sponsor:",t.sponsor)+n("Project Type:",t.ptype)+n("Cost:",m)+n("Description:",t.description)+"</table>"}else if(t.tip_id){var h=i+"?search="+t.tip_id,m=t.cost;m&&(m="$"+m+"M"),c=r(h)+"<table>"+n("Project ID:",t.tip_id)+n("Sponsor:",t.sponsor)+n("MPO:",t.mpo)+n("Project Type:",t.ptype)+n("Cost:",m)+n("Description:",t.description)+"</table>"}s.bindPopup(c),p.addLayer(s),!o||o!=t.rtp_id&&o!=t.tip_id||f.push(s)}}),p.name=t,p.layerId=p._leaflet_id||GatewayMapUtil.randString(6),this.layerControl.addOverlay(p,p.name),p.addTo(r),p.geometryType="MULTIPLE",f.length>0&&r.fitBounds(new L.featureGroup(f).getBounds().pad(.25)),this.addSimpleLegend(p,[{subject:n.subject}],n.subject,c,null,!1,!1,d),this.addAttribution('Project data &copy; <a href="http://nymtc.org/">NY Metropolitan Transportation Council</a>',p.layerId),[p]},CsLeaflet.Leaflet.prototype.addCountFactPoints=function(t,e,n,i,o,a){var r=this.LMmap,s=L.layerGroup();t=t||[],a=a||{},direction=a.direction,transit_mode=a.transit_mode,year=a.year,hour=a.hour;var l={},u={};e.color_scheme.forEach(function(t){l[t.value]=t.color,u[t.label]=t.color});var c=this.getLayerDisplayColumnConfig(s,e),d={};t.forEach(function(t){var e=t.loc_id;d[e]||(d[e]={location_name:t.loc_name,sector_name:t.sector_name,mode_name:t.mode_name,lat:t.lat,lng:t.lng,routes:{},route_count:0});var n=d[e].routes,i=t.route_name,o={};n[i]?o=n[i]:(n[i]=o,d[e].route_count++);var a=t.var_name,r=parseFloat(t.count.toString().split(",").join(""));if("Occupancy Rates"==a)if(o[a]){var s=o[a],l=s.counter+1,u=s.total+r,c=u/l;o[a]={value:c,total:u,counter:l}}else o[a]={value:r,total:r,counter:1};else o[a]?o[a]+=r:o[a]=r});var h="Inbound"==direction,p=c.name;for(var f in d){var m=d[f],g=l[m[p]],v=L.circleMarker(new L.LatLng(m.lat,m.lng),{fill:!0,radius:h?4:5,fillColor:h?g:"transparent",fillOpacity:1,opacity:1,weight:2,color:g}),y=function(t,e){return'<tr><td style="text-align: right;"><b>'+t+'</b> </td><td style="text-align:left; padding-left: 10px;">'+e+"</span></td></tr>"},_=n+"?year="+year+"&hour="+hour+"&transit_mode="+encodeURIComponent(transit_mode)+"&direction="+direction+"&location="+encodeURIComponent(m.location_name),b="<a target='_blank' href="+_+">View in Table</a>",w=b+"<table>"+y("Facility Name:",m.location_name)+y("Sector:",m.sector_name)+y("Mode:",m.mode_name)+"</table>";if(m.route_count>7)w+="<p><b style='margin-top: 10px;'>Too many routes to display. Please </b>"+b+"</p>";else for(var x in m.routes){w+='<table style="margin-top: 10px;">',w+=y(" "," "),w+=y("Route:",x);var C=m.routes[x];for(var S in C){var k=C[S];"Occupancy Rates"==S&&(k=k.value.toFixed(2)),w+=y(S+":",GatewayMapUtil.formatNumber(k,{type:"number",options:{format:"#,##0.##",locale:"us"}}))}w+="</table>"}v.bindPopup(w),s.addLayer(v)}s.name=i,s.layerId=s._leaflet_id||GatewayMapUtil.randString(6),s.symbology=e,this.layerControl.addOverlay(s,i);var D=!(0==o);return D&&s.addTo(r),s.geometryType="POINT",this.addSimpleLegend(s,[{subject:i}],e.subject+" ("+direction+")",u,null,!D,!h),this.addAttribution(i+' data &copy; <a href="http://nymtc.org/">NY Metropolitan Transportation Council</a>',s.layerId),[s]},CsLeaflet.Leaflet.prototype.getBoundsInWKT=function(){var t=this.LMmap.getBounds(),e=t.getWest(),n=t.getEast(),i=t.getSouth(),o=t.getNorth(),a=e+" "+i+", "+e+" "+o+", "+n+" "+o+", "+n+" "+i+", "+e+" "+i;return"POLYGON (("+a+"))"},CsLeaflet.Leaflet.prototype.addAreaBoundaryLayerFromWKT=function(t){try{var e,n=new Wkt.Wkt;n.read(t),e=n.toObject({fill:!1,color:"red",weight:2,clickable:!1,className:"area-boundary"});var i=this.LMmap,o=L.layerGroup();o.addLayer(e),o.name="Area Boundary",o.layerId=o._leaflet_id||GatewayMapUtil.randString(6),this.layerControl.addOverlay(o,o.name),o.addTo(i),o.geometryType="POLYGON"}catch(a){console.log(a)}},/*! =========================================================
 * bootstrap-slider.js
 *
 * Maintainers:
 *		Kyle Kemp
 *			- Twitter: @seiyria
 *			- Github:  seiyria
 *		Rohit Kalkur
 *			- Twitter: @Rovolutionary
 *			- Github:  rovolution
 *
 * =========================================================
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
function(t,e){if("function"==typeof define&&define.amd)define(["jquery"],e);else if("object"==typeof module&&module.exports){var n;try{n=require("jquery")}catch(i){n=null}module.exports=e(n)}else t.Slider=e(t.jQuery)}(this,function(t){var e;return function(t){"use strict";function e(){}function n(t){function n(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function o(e,n){t.fn[e]=function(o){if("string"==typeof o){for(var r=i.call(arguments,1),s=0,l=this.length;l>s;s++){var u=this[s],c=t.data(u,e);if(c)if(t.isFunction(c[o])&&"_"!==o.charAt(0)){var d=c[o].apply(c,r);if(void 0!==d&&d!==c)return d}else a("no such method '"+o+"' for "+e+" instance");else a("cannot call methods on "+e+" prior to initialization; attempted to call '"+o+"'")}return this}var h=this.map(function(){var i=t.data(this,e);return i?(i.option(o),i._init()):(i=new n(this,o),t.data(this,e,i)),t(this)});return!h||h.length>1?h:h[0]}}if(t){var a="undefined"==typeof console?e:function(t){console.error(t)};return t.bridget=function(t,e){n(e),o(t,e)},t.bridget}}var i=Array.prototype.slice;n(t)}(t),function(t){function n(e,n){function i(t,e){var n="data-slider-"+e.replace(/_/g,"-"),i=t.getAttribute(n);try{return JSON.parse(i)}catch(o){return i}}this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},"string"==typeof e?this.element=document.querySelector(e):e instanceof HTMLElement&&(this.element=e),n=n?n:{};for(var a=Object.keys(this.defaultOptions),r=0;r<a.length;r++){var s=a[r],l=n[s];l="undefined"!=typeof l?l:i(this.element,s),l=null!==l?l:this.defaultOptions[s],this.options||(this.options={}),this.options[s]=l}"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position="right";var u,c,d,h,p,f=this.element.style.width,m=!1,g=this.element.parentNode;if(this.sliderElem)m=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var v=document.createElement("div");if(v.className="slider-track",c=document.createElement("div"),c.className="slider-track-low",u=document.createElement("div"),u.className="slider-selection",d=document.createElement("div"),d.className="slider-track-high",h=document.createElement("div"),h.className="slider-handle min-slider-handle",p=document.createElement("div"),p.className="slider-handle max-slider-handle",v.appendChild(c),v.appendChild(u),v.appendChild(d),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(r=0;r<this.options.ticks.length;r++){var y=document.createElement("div");y.className="slider-tick",this.ticks.push(y),v.appendChild(y)}u.className+=" tick-slider-selection"}if(v.appendChild(h),v.appendChild(p),this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",r=0;r<this.options.ticks_labels.length;r++){var _=document.createElement("div"),b=0===this.options.ticks_positions.length,w=this.options.reversed&&b?this.options.ticks_labels.length-(r+1):r;_.className="slider-tick-label",_.innerHTML=this.options.ticks_labels[w],this.tickLabels.push(_),this.tickLabelContainer.appendChild(_)}var x=function(t){var e=document.createElement("div");e.className="tooltip-arrow";var n=document.createElement("div");n.className="tooltip-inner",t.appendChild(e),t.appendChild(n)},C=document.createElement("div");C.className="tooltip tooltip-main",x(C);var L=document.createElement("div");L.className="tooltip tooltip-min",x(L);var S=document.createElement("div");S.className="tooltip tooltip-max",x(S),this.sliderElem.appendChild(v),this.sliderElem.appendChild(C),this.sliderElem.appendChild(L),this.sliderElem.appendChild(S),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),g.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(t&&(this.$element=t(this.element),this.$sliderElem=t(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),o[this.options.scale]&&(this.options.scale=o[this.options.scale]),m===!0&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","top","width","height"].forEach(function(t){this._removeProperty(this.trackLow,t),this._removeProperty(this.trackSelection,t),this._removeProperty(this.trackHigh,t)},this),[this.handle1,this.handle2].forEach(function(t){this._removeProperty(t,"left"),this._removeProperty(t,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(t){this._removeProperty(t,"left"),this._removeProperty(t,"top"),this._removeProperty(t,"margin-left"),this._removeProperty(t,"margin-top"),this._removeClass(t,"right"),this._removeClass(t,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=f,this.options.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this._state.value=this.options.range?[this.options.value,this.options.max]:this.options.value,this.trackLow=c||this.trackLow,this.trackSelection=u||this.trackSelection,this.trackHigh=d||this.trackHigh,"none"===this.options.selection&&(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")),this.handle1=h||this.handle1,this.handle2=p||this.handle2,m===!0)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),r=0;r<this.ticks.length;r++)this._removeClass(this.ticks[r],"round triangle hide");var k=["round","triangle","custom"],D=-1!==k.indexOf(this.options.handle);if(D)for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),r=0;r<this.ticks.length;r++)this._addClass(this.ticks[r],this.options.handle);this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchCapable&&this.sliderElem.addEventListener("touchstart",this.mousedown,!1),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)),this.options.enabled?this.enable():this.disable()}var i={formatInvalidInputErrorMsg:function(t){return"Invalid input value '"+t+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},o={linear:{toValue:function(t){var e=t/100*(this.options.max-this.options.min);if(this.options.ticks_positions.length>0){for(var n,i,o,a=0,r=0;r<this.options.ticks_positions.length;r++)if(t<=this.options.ticks_positions[r]){n=r>0?this.options.ticks[r-1]:0,o=r>0?this.options.ticks_positions[r-1]:0,i=this.options.ticks[r],a=this.options.ticks_positions[r];break}if(r>0){var s=(t-o)/(a-o);e=n+s*(i-n)}}var l=this.options.min+Math.round(e/this.options.step)*this.options.step;return l<this.options.min?this.options.min:l>this.options.max?this.options.max:l},toPercentage:function(t){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var e,n,i,o=0,a=0;a<this.options.ticks.length;a++)if(t<=this.options.ticks[a]){e=a>0?this.options.ticks[a-1]:0,i=a>0?this.options.ticks_positions[a-1]:0,n=this.options.ticks[a],o=this.options.ticks_positions[a];break}if(a>0){var r=(t-e)/(n-e);return i+r*(o-i)}}return 100*(t-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(t){var e=0===this.options.min?0:Math.log(this.options.min),n=Math.log(this.options.max),i=Math.exp(e+(n-e)*t/100);return i=this.options.min+Math.round((i-this.options.min)/this.options.step)*this.options.step,i<this.options.min?this.options.min:i>this.options.max?this.options.max:i},toPercentage:function(t){if(this.options.max===this.options.min)return 0;var e=Math.log(this.options.max),n=0===this.options.min?0:Math.log(this.options.min),i=0===t?0:Math.log(t);return 100*(i-n)/(e-n)}}};if(e=function(t,e){return n.call(this,t,e),this},e.prototype={_init:function(){},constructor:e,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formatter:function(t){return Array.isArray(t)?t[0]+" : "+t[1]:t},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,scale:"linear",focus:!1,tooltip_position:null},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(t,e,n){t||(t=0);var i=this.getValue();this._state.value=this._validateInputValue(t);var o=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=o(this._state.value[0]),this._state.value[1]=o(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=o(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),this._state.value[1]="after"===this.options.selection?this.options.max:this.options.min),this._state.percentage=this.options.max>this.options.min?[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:[0,0,100],this._layout();var a=this.options.range?this._state.value:this._state.value[0];return e===!0&&this._trigger("slide",a),i!==a&&n===!0&&this._trigger("change",{oldValue:i,newValue:a}),this._setDataVal(a),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),t&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(t,e){return this._bindNonQueryEventHandler(t,e),this},off:function(e,n){t?(this.$element.off(e,n),this.$sliderElem.off(e,n)):this._unbindNonQueryEventHandler(e,n)},getAttribute:function(t){return t?this.options[t]:this.options},setAttribute:function(t,e){return this.options[t]=e,this},refresh:function(){return this._removeSliderEventHandlers(),n.call(this,this.element,this.options),t&&t.data(this.element,"slider",this),this},relayout:function(){return this._layout(),this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.showTooltip&&(this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle2.removeEventListener("focus",this.showTooltip,!1)),this.hideTooltip&&(this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("blur",this.hideTooltip,!1)),this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.mousedown,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1)},_bindNonQueryEventHandler:function(t,e){void 0===this.eventToCallbackMap[t]&&(this.eventToCallbackMap[t]=[]),this.eventToCallbackMap[t].push(e)},_unbindNonQueryEventHandler:function(t,e){var n=this.eventToCallbackMap[t];if(void 0!==n)for(var i=0;i<n.length;i++)if(n[i]===e){n.splice(i,1);break}},_cleanUpEventCallbacksMap:function(){for(var t=Object.keys(this.eventToCallbackMap),e=0;e<t.length;e++){var n=t[e];this.eventToCallbackMap[n]=null}},_showTooltip:function(){this.options.tooltip_split===!1?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){this._state.inDrag===!1&&this.alwaysShowTooltip!==!0&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_layout:function(){var t;if(t=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=t[0]+"%",this.handle2.style[this.stylePos]=t[1]+"%",Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var e="vertical"===this.options.orientation?"height":"width",n="vertical"===this.options.orientation?"marginTop":"marginLeft",i=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var o=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[n]=-i/2+"px"),o=this.tickLabelContainer.offsetHeight;else for(a=0;a<this.tickLabelContainer.childNodes.length;a++)this.tickLabelContainer.childNodes[a].offsetHeight>o&&(o=this.tickLabelContainer.childNodes[a].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=o+"px")}for(var a=0;a<this.options.ticks.length;a++){var r=this.options.ticks_positions[a]||this._toPercentage(this.options.ticks[a]);this.options.reversed&&(r=100-r),this.ticks[a].style[this.stylePos]=r+"%",this._removeClass(this.ticks[a],"in-selection"),this.options.range?r>=t[0]&&r<=t[1]&&this._addClass(this.ticks[a],"in-selection"):"after"===this.options.selection&&r>=t[0]?this._addClass(this.ticks[a],"in-selection"):"before"===this.options.selection&&r<=t[0]&&this._addClass(this.ticks[a],"in-selection"),this.tickLabels[a]&&(this.tickLabels[a].style[e]=i+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[a]?(this.tickLabels[a].style.position="absolute",this.tickLabels[a].style[this.stylePos]=r+"%",this.tickLabels[a].style[n]=-i/2+"px"):"vertical"===this.options.orientation&&(this.tickLabels[a].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style.marginTop=this.sliderElem.offsetWidth/2*-1+"px"))}}var s;if(this.options.range){s=this.options.formatter(this._state.value),this._setText(this.tooltipInner,s),this.tooltip.style[this.stylePos]=(t[1]+t[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),"vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");var l=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,l);var u=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,u),this.tooltip_min.style[this.stylePos]=t[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=t[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")}else s=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,s),this.tooltip.style[this.stylePos]=t[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(t[0],t[1])+"%",this.trackSelection.style.top=Math.min(t[0],t[1])+"%",this.trackSelection.style.height=Math.abs(t[0]-t[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(t[0],t[1])-Math.abs(t[0]-t[1])+"%";else{this.trackLow.style.left="0",this.trackLow.style.width=Math.min(t[0],t[1])+"%",this.trackSelection.style.left=Math.min(t[0],t[1])+"%",this.trackSelection.style.width=Math.abs(t[0]-t[1])+"%",this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(t[0],t[1])-Math.abs(t[0]-t[1])+"%";var c=this.tooltip_min.getBoundingClientRect(),d=this.tooltip_max.getBoundingClientRect();c.right>d.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_removeProperty:function(t,e){t.style.removeProperty?t.style.removeProperty(e):t.style.removeAttribute(e)},_mousedown:function(t){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var e=this._getPercentage(t);if(this.options.range){var n=Math.abs(this._state.percentage[0]-e),i=Math.abs(this._state.percentage[1]-e);this._state.dragged=i>n?0:1}else this._state.dragged=0;this._state.percentage[this._state.dragged]=e,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var o=this._calculateValue();return this._trigger("slideStart",o),this._setDataVal(o),this.setValue(o,!1,!0),this._pauseEvent(t),this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_triggerFocusOnHandle:function(t){0===t&&this.handle1.focus(),1===t&&this.handle2.focus()},_keydown:function(t,e){if(!this._state.enabled)return!1;var n;switch(e.keyCode){case 37:case 40:n=-1;break;case 39:case 38:n=1}if(n){if(this.options.natural_arrow_keys){var i="vertical"===this.options.orientation&&!this.options.reversed,o="horizontal"===this.options.orientation&&this.options.reversed;(i||o)&&(n=-n)}var a=this._state.value[t]+n*this.options.step;return this.options.range&&(a=[t?this._state.value[0]:a,t?a:this._state.value[1]]),this._trigger("slideStart",a),this._setDataVal(a),this.setValue(a,!0,!0),this._setDataVal(a),this._trigger("slideStop",a),this._layout(),this._pauseEvent(e),!1}},_pauseEvent:function(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1},_mousemove:function(t){if(!this._state.enabled)return!1;var e=this._getPercentage(t);this._adjustPercentageForRangeSliders(e),this._state.percentage[this._state.dragged]=e,this._layout();var n=this._calculateValue(!0);return this.setValue(n,!0,!0),!1},_adjustPercentageForRangeSliders:function(t){if(this.options.range){var e=this._getNumDigitsAfterDecimalPlace(t);e=e?e-1:0;var n=this._applyToFixedAndParseFloat(t,e);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],e)<n?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],e)>n&&(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0)}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,this._state.over===!1&&this._hideTooltip();var t=this._calculateValue(!0);return this._layout(),this._setDataVal(t),this._trigger("slideStop",t),!1},_calculateValue:function(t){var e;if(this.options.range?(e=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(e[0]=this._toValue(this._state.percentage[0]),e[0]=this._applyPrecision(e[0])),100!==this._state.percentage[1]&&(e[1]=this._toValue(this._state.percentage[1]),e[1]=this._applyPrecision(e[1]))):(e=this._toValue(this._state.percentage[0]),e=parseFloat(e),e=this._applyPrecision(e)),t){for(var n=[e,1/0],i=0;i<this.options.ticks.length;i++){var o=Math.abs(this.options.ticks[i]-e);o<=n[1]&&(n=[this.options.ticks[i],o])}if(n[1]<=this.options.ticks_snap_bounds)return n[0]}return e},_applyPrecision:function(t){var e=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(t,e)},_getNumDigitsAfterDecimalPlace:function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},_applyToFixedAndParseFloat:function(t,e){var n=t.toFixed(e);return parseFloat(n)},_getPercentage:function(t){!this.touchCapable||"touchstart"!==t.type&&"touchmove"!==t.type||(t=t.touches[0]);var e=t[this.mousePos],n=this._state.offset[this.stylePos],i=e-n,o=i/this._state.size*100;return o=Math.round(o/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(o=100-o),Math.max(0,Math.min(100,o))},_validateInputValue:function(t){if("number"==typeof t)return t;if(Array.isArray(t))return this._validateArray(t),t;throw new Error(i.formatInvalidInputErrorMsg(t))},_validateArray:function(t){for(var e=0;e<t.length;e++){var n=t[e];if("number"!=typeof n)throw new Error(i.formatInvalidInputErrorMsg(n))}},_setDataVal:function(t){this.element.setAttribute("data-value",t),this.element.setAttribute("value",t),this.element.value=t},_trigger:function(e,n){n=n||0===n?n:void 0;var i=this.eventToCallbackMap[e];if(i&&i.length)for(var o=0;o<i.length;o++){var a=i[o];a(n)}t&&this._triggerJQueryEvent(e,n)},_triggerJQueryEvent:function(t,e){var n={type:t,value:e};this.$element.trigger(n),this.$sliderElem.trigger(n)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(t,e){"undefined"!=typeof t.innerText?t.innerText=e:"undefined"!=typeof t.textContent&&(t.textContent=e)},_removeClass:function(t,e){for(var n=e.split(" "),i=t.className,o=0;o<n.length;o++){var a=n[o],r=new RegExp("(?:\\s|^)"+a+"(?:\\s|$)");i=i.replace(r," ")}t.className=i.trim()},_addClass:function(t,e){for(var n=e.split(" "),i=t.className,o=0;o<n.length;o++){var a=n[o],r=new RegExp("(?:\\s|^)"+a+"(?:\\s|$)"),s=r.test(i);s||(i+=" "+a)}t.className=i.trim()},_offsetLeft:function(t){return t.getBoundingClientRect().left},_offsetTop:function(t){for(var e=t.offsetTop;(t=t.offsetParent)&&!isNaN(t.offsetTop);)e+=t.offsetTop;return e},_offset:function(t){return{left:this._offsetLeft(t),top:this._offsetTop(t)}},_css:function(e,n,i){if(t)t.style(e,n,i);else{var o=n.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()});e.style[o]=i}},_toValue:function(t){return this.options.scale.toValue.apply(this,[t])},_toPercentage:function(t){return this.options.scale.toPercentage.apply(this,[t])},_setTooltipPosition:function(){var t=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var e=this.options.tooltip_position||"right",n="left"===e?"right":"left";t.forEach(function(t){this._addClass(t,e),t.style[n]="100%"}.bind(this))}else t.forEach("bottom"===this.options.tooltip_position?function(t){this._addClass(t,"bottom"),t.style.top="22px"}.bind(this):function(t){this._addClass(t,"top"),t.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},t){var a=t.fn.slider?"bootstrapSlider":"slider";t.bridget(a,e)}}(t),e}),/**
 * Bootstrap Multiselect v0.9.8 (https://github.com/davidstutz/bootstrap-multiselect)
 * 
 * Copyright 2012 - 2014 David Stutz
 * 
 * Dual licensed under the BSD-3-Clause and the Apache License, Version 2.0.
 */
!function(t){"use strict";function e(t){return ko.isObservable(t)&&!(void 0===t.destroyAll)}function n(t,e){for(var n=0;n<t.length;++n)e(t[n])}function i(e,n){this.options=this.mergeOptions(n),this.$select=t(e),this.originalOptions=this.$select.clone()[0].options,this.query="",this.searchTimeout=null,this.options.multiple="multiple"===this.$select.attr("multiple"),this.options.onChange=t.proxy(this.options.onChange,this),this.options.onDropdownShow=t.proxy(this.options.onDropdownShow,this),this.options.onDropdownHide=t.proxy(this.options.onDropdownHide,this),this.options.onDropdownShown=t.proxy(this.options.onDropdownShown,this),this.options.onDropdownHidden=t.proxy(this.options.onDropdownHidden,this),this.buildContainer(),this.buildButton(),this.buildDropdown(),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(),this.options.disableIfEmpty&&this.disableIfEmpty(),this.$select.hide().after(this.$container)}"undefined"!=typeof ko&&ko.bindingHandlers&&!ko.bindingHandlers.multiselect&&(ko.bindingHandlers.multiselect={init:function(i,o,a){var r=a().selectedOptions,s=ko.utils.unwrapObservable(o());t(i).multiselect(s),e(r)&&(t(i).multiselect("select",ko.utils.unwrapObservable(r)),r.subscribe(function(e){var o=[],a=[];n(e,function(t){switch(t.status){case"added":o.push(t.value);break;case"deleted":a.push(t.value)}}),o.length>0&&t(i).multiselect("select",o),a.length>0&&t(i).multiselect("deselect",a)},null,"arrayChange"))},update:function(n,i,o){var a=o().options,r=t(n).data("multiselect"),s=ko.utils.unwrapObservable(i());e(a)&&a.subscribe(function(){t(n).multiselect("rebuild")}),r?r.updateOriginalOptions():t(n).multiselect(s)}}),i.prototype={defaults:{buttonText:function(e){if(0===e.length)return this.nonSelectedText+' <b class="caret"></b>';if(e.length>this.numberDisplayed)return e.length+" "+this.nSelectedText+' <b class="caret"></b>';var n="";return e.each(function(){var e=void 0!==t(this).attr("label")?t(this).attr("label"):t(this).html();n+=e+", "}),n.substr(0,n.length-2)+' <b class="caret"></b>'},buttonTitle:function(e){if(0===e.length)return this.nonSelectedText;var n="";return e.each(function(){n+=t(this).text()+", "}),n.substr(0,n.length-2)},label:function(e){return t(e).attr("label")||t(e).html()},onChange:function(){},onDropdownShow:function(){},onDropdownHide:function(){},onDropdownShown:function(){},onDropdownHidden:function(){},buttonClass:"btn btn-default",dropRight:!1,selectedClass:"active",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',maxHeight:!1,checkboxName:!1,includeSelectAllOption:!1,includeSelectAllIfMoreThan:0,selectAllText:" Select all",selectAllValue:"multiselect-all",enableFiltering:!1,enableCaseInsensitiveFiltering:!1,filterPlaceholder:"Search",filterBehavior:"text",preventInputChangeEvent:!1,nonSelectedText:"None selected",nSelectedText:"selected",numberDisplayed:3,disableIfEmpty:!1,templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown"></button>',ul:'<ul class="multiselect-container dropdown-menu"></ul>',filter:'<li class="multiselect-item filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div></li>',li:'<li><a href="javascript:void(0);"><label></label></a></li>',divider:'<li class="multiselect-item divider"></li>',liGroup:'<li class="multiselect-item group"><label class="multiselect-group"></label></li>'}},constructor:i,buildContainer:function(){this.$container=t(this.options.buttonContainer),this.$container.on("show.bs.dropdown",this.options.onDropdownShow),this.$container.on("hide.bs.dropdown",this.options.onDropdownHide),this.$container.on("shown.bs.dropdown",this.options.onDropdownShown),this.$container.on("hidden.bs.dropdown",this.options.onDropdownHidden)},buildButton:function(){this.$button=t(this.options.templates.button).addClass(this.options.buttonClass),this.$select.prop("disabled")?this.disable():this.enable(),this.options.buttonWidth&&"auto"!==this.options.buttonWidth&&(this.$button.css({width:this.options.buttonWidth}),this.$container.css({width:this.options.buttonWidth}));var e=this.$select.attr("tabindex");e&&this.$button.attr("tabindex",e),this.$container.prepend(this.$button)},buildDropdown:function(){this.$ul=t(this.options.templates.ul),this.options.dropRight&&this.$ul.addClass("pull-right"),this.options.maxHeight&&this.$ul.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"}),this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each(t.proxy(function(e,n){var i=t(n).prop("tagName").toLowerCase();t(n).prop("value")!==this.options.selectAllValue&&("optgroup"===i?this.createOptgroup(n):"option"===i&&("divider"===t(n).data("role")?this.createDivider():this.createOptionValue(n)))},this)),t("li input",this.$ul).on("change",t.proxy(function(e){var n=t(e.target),i=n.prop("checked")||!1,o=n.val()===this.options.selectAllValue;this.options.selectedClass&&(i?n.parents("li").addClass(this.options.selectedClass):n.parents("li").removeClass(this.options.selectedClass));var a=n.val(),r=this.getOptionByValue(a),s=t("option",this.$select).not(r),l=t("input",this.$container).not(n);return o&&(i?this.selectAll():this.deselectAll()),o||(i?(r.prop("selected",!0),this.options.multiple?r.prop("selected",!0):(this.options.selectedClass&&t(l).parents("li").removeClass(this.options.selectedClass),t(l).prop("checked",!1),s.prop("selected",!1),this.$button.click()),"active"===this.options.selectedClass&&s.parents("a").css("outline","")):r.prop("selected",!1)),this.$select.change(),this.updateButtonText(),this.updateSelectAll(),this.options.onChange(r,i),this.options.preventInputChangeEvent?!1:void 0},this)),t("li a",this.$ul).on("touchstart click",function(e){e.stopPropagation();var n=t(e.target);if(e.shiftKey){var i=n.prop("checked")||!1;if(i){var o=n.parents("li:last").siblings('li[class="active"]:first'),a=n.parents("li").index(),r=o.index();a>r?n.parents("li:last").prevUntil(o).each(function(){t(this).find("input:first").prop("checked",!0).trigger("change")}):n.parents("li:last").nextUntil(o).each(function(){t(this).find("input:first").prop("checked",!0).trigger("change")})}}n.blur()}),this.$container.off("keydown.multiselect").on("keydown.multiselect",t.proxy(function(e){if(!t('input[type="text"]',this.$container).is(":focus"))if(9!==e.keyCode&&27!==e.keyCode||!this.$container.hasClass("open")){var n=t(this.$container).find("li:not(.divider):not(.disabled) a").filter(":visible");if(!n.length)return;var i=n.index(n.filter(":focus"));38===e.keyCode&&i>0?i--:40===e.keyCode&&i<n.length-1?i++:~i||(i=0);var o=n.eq(i);if(o.focus(),32===e.keyCode||13===e.keyCode){var a=o.find("input");a.prop("checked",!a.prop("checked")),a.change()}e.stopPropagation(),e.preventDefault()}else this.$button.click()},this))},createOptionValue:function(e){t(e).is(":selected")&&t(e).prop("selected",!0);var n=this.options.label(e),i=t(e).val(),o=this.options.multiple?"checkbox":"radio",a=t(this.options.templates.li);t("label",a).addClass(o),t("label",a).append(this.options.checkboxName?'<input type="'+o+'" name="'+this.options.checkboxName+'" />':'<input type="'+o+'" />');var r=t(e).prop("selected")||!1,s=t("input",a);s.val(i),i===this.options.selectAllValue&&(a.addClass("multiselect-item multiselect-all"),s.parent().parent().addClass("multiselect-all")),t("label",a).append(" "+n),this.$ul.append(a),t(e).is(":disabled")&&s.attr("disabled","disabled").prop("disabled",!0).parents("a").attr("tabindex","-1").parents("li").addClass("disabled"),s.prop("checked",r),r&&this.options.selectedClass&&s.parents("li").addClass(this.options.selectedClass)},createDivider:function(){var e=t(this.options.templates.divider);this.$ul.append(e)},createOptgroup:function(e){var n=t(e).prop("label"),i=t(this.options.templates.liGroup);t("label",i).text(n),this.$ul.append(i),t(e).is(":disabled")&&i.addClass("disabled"),t("option",e).each(t.proxy(function(t,e){this.createOptionValue(e)},this))},buildSelectAll:function(){var e=this.hasSelectAll();if(!e&&this.options.includeSelectAllOption&&this.options.multiple&&t("option",this.$select).length>this.options.includeSelectAllIfMoreThan){this.options.includeSelectAllDivider&&this.$ul.prepend(t(this.options.templates.divider));var n=t(this.options.templates.li);t("label",n).addClass("checkbox"),t("label",n).append(this.options.checkboxName?'<input type="checkbox" name="'+this.options.checkboxName+'" />':'<input type="checkbox" />');var i=t("input",n);i.val(this.options.selectAllValue),n.addClass("multiselect-item multiselect-all"),i.parent().parent().addClass("multiselect-all"),t("label",n).append(" "+this.options.selectAllText),this.$ul.prepend(n),i.prop("checked",!1)}},buildFilter:function(){if(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering){var e=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering);this.$select.find("option").length>=e&&(this.$filter=t(this.options.templates.filter),t("input",this.$filter).attr("placeholder",this.options.filterPlaceholder),this.$ul.prepend(this.$filter),this.$filter.val(this.query).on("click",function(t){t.stopPropagation()}).on("input keydown",t.proxy(function(e){clearTimeout(this.searchTimeout),this.searchTimeout=this.asyncFunction(t.proxy(function(){this.query!==e.target.value&&(this.query=e.target.value,t.each(t("li",this.$ul),t.proxy(function(e,n){var i=t("input",n).val(),o=t("label",n).text(),a="";if("text"===this.options.filterBehavior?a=o:"value"===this.options.filterBehavior?a=i:"both"===this.options.filterBehavior&&(a=o+"\n"+i),i!==this.options.selectAllValue&&o){var r=!1;this.options.enableCaseInsensitiveFiltering&&a.toLowerCase().indexOf(this.query.toLowerCase())>-1?r=!0:a.indexOf(this.query)>-1&&(r=!0),r?t(n).show().removeClass("filter-hidden"):t(n).hide().addClass("filter-hidden")}},this))),this.updateSelectAll()},this),300,this)},this)))}},destroy:function(){this.$container.remove(),this.$select.show(),this.$select.data("multiselect",null)},refresh:function(){t("option",this.$select).each(t.proxy(function(e,n){var i=t("li input",this.$ul).filter(function(){return t(this).val()===t(n).val()});t(n).is(":selected")?(i.prop("checked",!0),this.options.selectedClass&&i.parents("li").addClass(this.options.selectedClass)):(i.prop("checked",!1),this.options.selectedClass&&i.parents("li").removeClass(this.options.selectedClass)),t(n).is(":disabled")?i.attr("disabled","disabled").prop("disabled",!0).parents("li").addClass("disabled"):i.prop("disabled",!1).parents("li").removeClass("disabled")},this)),this.updateButtonText(),this.updateSelectAll()},select:function(e,n){t.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var o=e[i],a=this.getOptionByValue(o),r=this.getInputByValue(o);void 0!==a&&void 0!==r&&(this.options.multiple||this.deselectAll(!1),this.options.selectedClass&&r.parents("li").addClass(this.options.selectedClass),r.prop("checked",!0),a.prop("selected",!0))}this.updateButtonText(),n&&1===e.length&&this.options.onChange(a,!0)},clearSelection:function(){this.deselectAll(!1),this.updateButtonText(),this.updateSelectAll()},deselect:function(e,n){t.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var o=e[i],a=this.getOptionByValue(o),r=this.getInputByValue(o);void 0!==a&&void 0!==r&&(this.options.selectedClass&&r.parents("li").removeClass(this.options.selectedClass),r.prop("checked",!1),a.prop("selected",!1))}this.updateButtonText(),n&&1===e.length&&this.options.onChange(a,!1)},selectAll:function(){var e=t("li input[type='checkbox']:enabled",this.$ul),n=e.filter(":visible"),i=e.length,o=n.length;if(n.prop("checked",!0),t("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").addClass(this.options.selectedClass),i===o)t("option:enabled",this.$select).prop("selected",!0);else{var a=n.map(function(){return t(this).val()}).get();t("option:enabled",this.$select).filter(function(){return-1!==t.inArray(t(this).val(),a)}).prop("selected",!0)}},deselectAll:function(e){var e="undefined"==typeof e?!0:e;if(e){var n=t("li input[type='checkbox']:enabled",this.$ul).filter(":visible");n.prop("checked",!1);var i=n.map(function(){return t(this).val()}).get();t("option:enabled",this.$select).filter(function(){return-1!==t.inArray(t(this).val(),i)}).prop("selected",!1),this.options.selectedClass&&t("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").removeClass(this.options.selectedClass)}else t("li input[type='checkbox']:enabled",this.$ul).prop("checked",!1),t("option:enabled",this.$select).prop("selected",!1),this.options.selectedClass&&t("li:not(.divider):not(.disabled)",this.$ul).removeClass(this.options.selectedClass)},rebuild:function(){this.$ul.html(""),this.options.multiple="multiple"===this.$select.attr("multiple"),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(),this.options.disableIfEmpty&&this.disableIfEmpty(),this.options.dropRight&&this.$ul.addClass("pull-right")},dataprovider:function(e){var i="",o=0;t.each(e,function(e,a){t.isArray(a.children)?(o++,i+='<optgroup label="'+(a.title||"Group "+o)+'">',n(a.children,function(t){i+='<option value="'+t.value+'">'+(t.label||t.value)+"</option>"}),i+="</optgroup>"):i+='<option value="'+a.value+'">'+(a.label||a.value)+"</option>"}),this.$select.html(i),this.rebuild()},enable:function(){this.$select.prop("disabled",!1),this.$button.prop("disabled",!1).removeClass("disabled")},disable:function(){this.$select.prop("disabled",!0),this.$button.prop("disabled",!0).addClass("disabled")},disableIfEmpty:function(){t("option",this.$select).length<=0?this.disable():this.enable()},setOptions:function(t){this.options=this.mergeOptions(t)},mergeOptions:function(e){return t.extend(!0,{},this.defaults,e)},hasSelectAll:function(){return t("li."+this.options.selectAllValue,this.$ul).length>0},updateSelectAll:function(){if(this.hasSelectAll()){var e=t("li:not(.multiselect-item):not(.filter-hidden) input:enabled",this.$ul),n=e.length,i=e.filter(":checked").length,o=t("li."+this.options.selectAllValue,this.$ul),a=o.find("input");i>0&&i===n?(a.prop("checked",!0),o.addClass(this.options.selectedClass)):(a.prop("checked",!1),o.removeClass(this.options.selectedClass))}},updateButtonText:function(){var e=this.getSelected();t("button.multiselect",this.$container).html(this.options.buttonText(e,this.$select)),t("button.multiselect",this.$container).attr("title",this.options.buttonTitle(e,this.$select))},getSelected:function(){return t("option",this.$select).filter(":selected")},getOptionByValue:function(e){for(var n=t("option",this.$select),i=e.toString(),o=0;o<n.length;o+=1){var a=n[o];if(a.value===i)return t(a)}},getInputByValue:function(e){for(var n=t("li input",this.$ul),i=e.toString(),o=0;o<n.length;o+=1){var a=n[o];if(a.value===i)return t(a)}},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(t,e,n){var i=Array.prototype.slice.call(arguments,3);return setTimeout(function(){t.apply(n||window,i)},e)}},t.fn.multiselect=function(e,n,o){return this.each(function(){var a=t(this).data("multiselect"),r="object"==typeof e&&e;a||(a=new i(this,r),t(this).data("multiselect",a)),"string"==typeof e&&(a[e](n,o),"destroy"===e&&t(this).data("multiselect",!1))})},t.fn.multiselect.Constructor=i,t(function(){t("select[data-role=multiselect]").multiselect()})}(window.jQuery),/**
 * sifter.js
 * Copyright (c) 2013 Brian Reavis & contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 * file except in compliance with the License. You may obtain a copy of the License at:
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
 * ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 *
 * @author Brian Reavis <brian@thirdroute.com>
 */
function(t,e){"function"==typeof define&&define.amd?define("sifter",e):"object"==typeof exports?module.exports=e():t.Sifter=e()}(this,function(){var t=function(t,e){this.items=t,this.settings=e||{diacritics:!0}};t.prototype.tokenize=function(t){if(t=i(String(t||"").toLowerCase()),!t||!t.length)return[];var e,n,a,s,l=[],u=t.split(/ +/);for(e=0,n=u.length;n>e;e++){if(a=o(u[e]),this.settings.diacritics)for(s in r)r.hasOwnProperty(s)&&(a=a.replace(new RegExp(s,"g"),r[s]));l.push({string:u[e],regex:new RegExp(a,"i")})}return l},t.prototype.iterator=function(t,e){var n;n=a(t)?Array.prototype.forEach||function(t){for(var e=0,n=this.length;n>e;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)},n.apply(t,[e])},t.prototype.getScoreFunction=function(t,e){var n,i,o,a;n=this,t=n.prepareSearch(t,e),o=t.tokens,i=t.options.fields,a=o.length;var r=function(t,e){var n,i;return t?(t=String(t||""),i=t.search(e.regex),-1===i?0:(n=e.string.length/t.length,0===i&&(n+=.5),n)):0},s=function(){var t=i.length;return t?1===t?function(t,e){return r(e[i[0]],t)}:function(e,n){for(var o=0,a=0;t>o;o++)a+=r(n[i[o]],e);return a/t}:function(){return 0}}();return a?1===a?function(t){return s(o[0],t)}:"and"===t.options.conjunction?function(t){for(var e,n=0,i=0;a>n;n++){if(e=s(o[n],t),0>=e)return 0;i+=e}return i/a}:function(t){for(var e=0,n=0;a>e;e++)n+=s(o[e],t);return n/a}:function(){return 0}},t.prototype.getSortFunction=function(t,n){var i,o,a,r,s,l,u,c,d,h,p;if(a=this,t=a.prepareSearch(t,n),p=!t.query&&n.sort_empty||n.sort,d=function(t,e){return"$score"===t?e.score:a.items[e.id][t]},s=[],p)for(i=0,o=p.length;o>i;i++)(t.query||"$score"!==p[i].field)&&s.push(p[i]);if(t.query){for(h=!0,i=0,o=s.length;o>i;i++)if("$score"===s[i].field){h=!1;break}h&&s.unshift({field:"$score",direction:"desc"})}else for(i=0,o=s.length;o>i;i++)if("$score"===s[i].field){s.splice(i,1);break}for(c=[],i=0,o=s.length;o>i;i++)c.push("desc"===s[i].direction?-1:1);return l=s.length,l?1===l?(r=s[0].field,u=c[0],function(t,n){return u*e(d(r,t),d(r,n))}):function(t,n){var i,o,a;for(i=0;l>i;i++)if(a=s[i].field,o=c[i]*e(d(a,t),d(a,n)))return o;return 0}:null},t.prototype.prepareSearch=function(t,e){if("object"==typeof t)return t;e=n({},e);var i=e.fields,o=e.sort,r=e.sort_empty;return i&&!a(i)&&(e.fields=[i]),o&&!a(o)&&(e.sort=[o]),r&&!a(r)&&(e.sort_empty=[r]),{options:e,query:String(t||"").toLowerCase(),tokens:this.tokenize(t),total:0,items:[]}},t.prototype.search=function(t,e){var n,i,o,a,r=this;return i=this.prepareSearch(t,e),e=i.options,t=i.query,a=e.score||r.getScoreFunction(i),t.length?r.iterator(r.items,function(t,o){n=a(t),(e.filter===!1||n>0)&&i.items.push({score:n,id:o})}):r.iterator(r.items,function(t,e){i.items.push({score:1,id:e})}),o=r.getSortFunction(i,e),o&&i.items.sort(o),i.total=i.items.length,"number"==typeof e.limit&&(i.items=i.items.slice(0,e.limit)),i};var e=function(t,e){return"number"==typeof t&&"number"==typeof e?t>e?1:e>t?-1:0:(t=s(String(t||"")),e=s(String(e||"")),t>e?1:e>t?-1:0)},n=function(t){var e,n,i,o;for(e=1,n=arguments.length;n>e;e++)if(o=arguments[e])for(i in o)o.hasOwnProperty(i)&&(t[i]=o[i]);return t},i=function(t){return(t+"").replace(/^\s+|\s+$|/g,"")},o=function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},a=Array.isArray||$&&$.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},r={a:"[a\xc0\xc1\xc2\xc3\xc4\xc5\xe0\xe1\xe2\xe3\xe4\xe5\u0100\u0101\u0105\u0104]",c:"[c\xc7\xe7\u0107\u0106\u010d\u010c]",d:"[d\u0111\u0110\u010f\u010e]",e:"[e\xc8\xc9\xca\xcb\xe8\xe9\xea\xeb\u011b\u011a\u0112\u0113\u0119\u0118]",i:"[i\xcc\xcd\xce\xcf\xec\xed\xee\xef\u012a\u012b]",l:"[l\u0142\u0141]",n:"[n\xd1\xf1\u0148\u0147\u0144\u0143]",o:"[o\xd2\xd3\xd4\xd5\xd5\xd6\xd8\xf2\xf3\xf4\xf5\xf6\xf8\u014c\u014d]",r:"[r\u0159\u0158]",s:"[s\u0160\u0161\u015b\u015a]",t:"[t\u0165\u0164]",u:"[u\xd9\xda\xdb\xdc\xf9\xfa\xfb\xfc\u016f\u016e\u016a\u016b]",y:"[y\u0178\xff\xfd\xdd]",z:"[z\u017d\u017e\u017c\u017b\u017a\u0179]"},s=function(){var t,e,n,i,o="",a={};for(n in r)if(r.hasOwnProperty(n))for(i=r[n].substring(2,r[n].length-1),o+=i,t=0,e=i.length;e>t;t++)a[i.charAt(t)]=n;var s=new RegExp("["+o+"]","g");return function(t){return t.replace(s,function(t){return a[t]}).toLowerCase()}}();return t}),/**
 * microplugin.js
 * Copyright (c) 2013 Brian Reavis & contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 * file except in compliance with the License. You may obtain a copy of the License at:
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
 * ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 *
 * @author Brian Reavis <brian@thirdroute.com>
 */
function(t,e){"function"==typeof define&&define.amd?define("microplugin",e):"object"==typeof exports?module.exports=e():t.MicroPlugin=e()}(this,function(){var t={};t.mixin=function(t){t.plugins={},t.prototype.initializePlugins=function(t){var n,i,o,a=this,r=[];if(a.plugins={names:[],settings:{},requested:{},loaded:{}},e.isArray(t))for(n=0,i=t.length;i>n;n++)"string"==typeof t[n]?r.push(t[n]):(a.plugins.settings[t[n].name]=t[n].options,r.push(t[n].name));else if(t)for(o in t)t.hasOwnProperty(o)&&(a.plugins.settings[o]=t[o],r.push(o));for(;r.length;)a.require(r.shift())},t.prototype.loadPlugin=function(e){var n=this,i=n.plugins,o=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');i.requested[e]=!0,i.loaded[e]=o.fn.apply(n,[n.plugins.settings[e]||{}]),i.names.push(e)},t.prototype.require=function(t){var e=this,n=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(n.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return n.loaded[t]},t.define=function(e,n){t.plugins[e]={name:e,fn:n}}};var e={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}};return t}),/**
 * selectize.js (v0.12.1)
 * Copyright (c) 2013–2015 Brian Reavis & contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 * file except in compliance with the License. You may obtain a copy of the License at:
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
 * ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 *
 * @author Brian Reavis <brian@thirdroute.com>
 */
function(t,e){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("sifter"),require("microplugin")):t.Selectize=e(t.jQuery,t.Sifter,t.MicroPlugin)}(this,function(t,e,n){"use strict";var i=function(t,e){if("string"!=typeof e||e.length){var n="string"==typeof e?new RegExp(e,"i"):e,i=function(t){var e=0;if(3===t.nodeType){var o=t.data.search(n);if(o>=0&&t.data.length>0){var a=t.data.match(n),r=document.createElement("span");r.className="highlight";var s=t.splitText(o),l=(s.splitText(a[0].length),s.cloneNode(!0));r.appendChild(l),s.parentNode.replaceChild(r,s),e=1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName))for(var u=0;u<t.childNodes.length;++u)u+=i(t.childNodes[u]);return e};return t.each(function(){i(this)})}},o=function(){};o.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},off:function(t,e){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[t]:(this._events=this._events||{},void(t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(e),1)))},trigger:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},o.mixin=function(t){for(var e=["on","off","trigger"],n=0;n<e.length;n++)t.prototype[e[n]]=o.prototype[e[n]]};var a=/Mac/.test(navigator.userAgent),r=65,s=13,l=27,u=37,c=38,d=80,h=39,p=40,f=78,m=8,g=46,v=16,y=a?91:17,_=a?18:17,b=9,w=1,x=2,C=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,L=function(t){return"undefined"!=typeof t},S=function(t){return"undefined"==typeof t||null===t?null:"boolean"==typeof t?t?"1":"0":t+""},k=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},D=function(t){return(t+"").replace(/\$/g,"$$$$")},T={};T.before=function(t,e,n){var i=t[e];t[e]=function(){return n.apply(t,arguments),i.apply(t,arguments)}},T.after=function(t,e,n){var i=t[e];t[e]=function(){var e=i.apply(t,arguments);return n.apply(t,arguments),e}};var M=function(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}},P=function(t,e){var n;return function(){var i=this,o=arguments;window.clearTimeout(n),n=window.setTimeout(function(){t.apply(i,o)},e)}},E=function(t,e,n){var i,o=t.trigger,a={};t.trigger=function(){var n=arguments[0];return-1===e.indexOf(n)?o.apply(t,arguments):void(a[n]=arguments)},n.apply(t,[]),t.trigger=o;for(i in a)a.hasOwnProperty(i)&&o.apply(t,a[i])},I=function(t,e,n,i){t.on(e,n,function(e){for(var n=e.target;n&&n.parentNode!==t[0];)n=n.parentNode;return e.currentTarget=n,i.apply(this,[e])})},A=function(t){var e={};if("selectionStart"in t)e.start=t.selectionStart,e.length=t.selectionEnd-e.start;else if(document.selection){t.focus();var n=document.selection.createRange(),i=document.selection.createRange().text.length;n.moveStart("character",-t.value.length),e.start=n.text.length-i,e.length=i}return e},F=function(t,e,n){var i,o,a={};if(n)for(i=0,o=n.length;o>i;i++)a[n[i]]=t.css(n[i]);else a=t.css();e.css(a)},O=function(e,n){if(!e)return 0;var i=t("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(e).appendTo("body");F(n,i,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var o=i.width();return i.remove(),o},N=function(t){var e=null,n=function(n,i){var o,a,r,s,l,u,c,d;n=n||window.event||{},i=i||{},n.metaKey||n.altKey||(i.force||t.data("grow")!==!1)&&(o=t.val(),n.type&&"keydown"===n.type.toLowerCase()&&(a=n.keyCode,r=a>=97&&122>=a||a>=65&&90>=a||a>=48&&57>=a||32===a,a===g||a===m?(d=A(t[0]),d.length?o=o.substring(0,d.start)+o.substring(d.start+d.length):a===m&&d.start?o=o.substring(0,d.start-1)+o.substring(d.start+1):a===g&&"undefined"!=typeof d.start&&(o=o.substring(0,d.start)+o.substring(d.start+1))):r&&(u=n.shiftKey,c=String.fromCharCode(n.keyCode),c=u?c.toUpperCase():c.toLowerCase(),o+=c)),s=t.attr("placeholder"),!o&&s&&(o=s),l=O(o,t)+4,l!==e&&(e=l,t.width(l),t.triggerHandler("resize")))};t.on("keydown keyup update blur",n),n()},R=function(n,i){var o,a,r,s,l=this;s=n[0],s.selectize=l;var u=window.getComputedStyle&&window.getComputedStyle(s,null);if(r=u?u.getPropertyValue("direction"):s.currentStyle&&s.currentStyle.direction,r=r||n.parents("[dir]:first").attr("dir")||"",t.extend(l,{order:0,settings:i,$input:n,tabIndex:n.attr("tabindex")||"",tagType:"select"===s.tagName.toLowerCase()?w:x,rtl:/rtl/i.test(r),eventNS:".selectize"+ ++R.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:n.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===i.loadThrottle?l.onSearchChange:P(l.onSearchChange,i.loadThrottle)}),l.sifter=new e(this.options,{diacritics:i.diacritics}),l.settings.options){for(o=0,a=l.settings.options.length;a>o;o++)l.registerOption(l.settings.options[o]);delete l.settings.options}if(l.settings.optgroups){for(o=0,a=l.settings.optgroups.length;a>o;o++)l.registerOptionGroup(l.settings.optgroups[o]);delete l.settings.optgroups}l.settings.mode=l.settings.mode||(1===l.settings.maxItems?"single":"multi"),"boolean"!=typeof l.settings.hideSelected&&(l.settings.hideSelected="multi"===l.settings.mode),l.initializePlugins(l.settings.plugins),l.setupCallbacks(),l.setupTemplates(),l.setup()};return o.mixin(R),n.mixin(R),t.extend(R.prototype,{setup:function(){var e,n,i,o,r,s,l,u,c,d=this,h=d.settings,p=d.eventNS,f=t(window),m=t(document),g=d.$input;if(l=d.settings.mode,u=g.attr("class")||"",e=t("<div>").addClass(h.wrapperClass).addClass(u).addClass(l),n=t("<div>").addClass(h.inputClass).addClass("items").appendTo(e),i=t('<input type="text" autocomplete="off" />').appendTo(n).attr("tabindex",g.is(":disabled")?"-1":d.tabIndex),s=t(h.dropdownParent||e),o=t("<div>").addClass(h.dropdownClass).addClass(l).hide().appendTo(s),r=t("<div>").addClass(h.dropdownContentClass).appendTo(o),d.settings.copyClassesToDropdown&&o.addClass(u),e.css({width:g[0].style.width}),d.plugins.names.length&&(c="plugin-"+d.plugins.names.join(" plugin-"),e.addClass(c),o.addClass(c)),(null===h.maxItems||h.maxItems>1)&&d.tagType===w&&g.attr("multiple","multiple"),d.settings.placeholder&&i.attr("placeholder",h.placeholder),!d.settings.splitOn&&d.settings.delimiter){var b=d.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");d.settings.splitOn=new RegExp("\\s*"+b+"+\\s*")}g.attr("autocorrect")&&i.attr("autocorrect",g.attr("autocorrect")),g.attr("autocapitalize")&&i.attr("autocapitalize",g.attr("autocapitalize")),d.$wrapper=e,d.$control=n,d.$control_input=i,d.$dropdown=o,d.$dropdown_content=r,o.on("mouseenter","[data-selectable]",function(){return d.onOptionHover.apply(d,arguments)}),o.on("mousedown click","[data-selectable]",function(){return d.onOptionSelect.apply(d,arguments)}),I(n,"mousedown","*:not(input)",function(){return d.onItemSelect.apply(d,arguments)}),N(i),n.on({mousedown:function(){return d.onMouseDown.apply(d,arguments)},click:function(){return d.onClick.apply(d,arguments)}}),i.on({mousedown:function(t){t.stopPropagation()},keydown:function(){return d.onKeyDown.apply(d,arguments)},keyup:function(){return d.onKeyUp.apply(d,arguments)},keypress:function(){return d.onKeyPress.apply(d,arguments)},resize:function(){d.positionDropdown.apply(d,[])},blur:function(){return d.onBlur.apply(d,arguments)},focus:function(){return d.ignoreBlur=!1,d.onFocus.apply(d,arguments)},paste:function(){return d.onPaste.apply(d,arguments)}}),m.on("keydown"+p,function(t){d.isCmdDown=t[a?"metaKey":"ctrlKey"],d.isCtrlDown=t[a?"altKey":"ctrlKey"],d.isShiftDown=t.shiftKey}),m.on("keyup"+p,function(t){t.keyCode===_&&(d.isCtrlDown=!1),t.keyCode===v&&(d.isShiftDown=!1),t.keyCode===y&&(d.isCmdDown=!1)}),m.on("mousedown"+p,function(t){if(d.isFocused){if(t.target===d.$dropdown[0]||t.target.parentNode===d.$dropdown[0])return!1;d.$control.has(t.target).length||t.target===d.$control[0]||d.blur(t.target)}}),f.on(["scroll"+p,"resize"+p].join(" "),function(){d.isOpen&&d.positionDropdown.apply(d,arguments)}),f.on("mousemove"+p,function(){d.ignoreHover=!1}),this.revertSettings={$children:g.children().detach(),tabindex:g.attr("tabindex")},g.attr("tabindex",-1).hide().after(d.$wrapper),t.isArray(h.items)&&(d.setValue(h.items),delete h.items),C&&g.on("invalid"+p,function(t){t.preventDefault(),d.isInvalid=!0,d.refreshState()}),d.updateOriginalInput(),d.refreshItems(),d.refreshState(),d.updatePlaceholder(),d.isSetup=!0,g.is(":disabled")&&d.disable(),d.on("change",this.onChange),g.data("selectize",d),g.addClass("selectized"),d.trigger("initialize"),h.preload===!0&&d.onSearchChange("")},setupTemplates:function(){var e=this,n=e.settings.labelField,i=e.settings.optgroupLabelField,o={optgroup:function(t){return'<div class="optgroup">'+t.html+"</div>"},optgroup_header:function(t,e){return'<div class="optgroup-header">'+e(t[i])+"</div>"},option:function(t,e){return'<div class="option">'+e(t[n])+"</div>"},item:function(t,e){return'<div class="item">'+e(t[n])+"</div>"},option_create:function(t,e){return'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>"}};e.settings.render=t.extend({},o,e.settings.render)},setupCallbacks:function(){var t,e,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in n)n.hasOwnProperty(t)&&(e=this.settings[n[t]],e&&this.on(t,e))},onClick:function(t){var e=this;e.isFocused||(e.focus(),t.preventDefault())},onMouseDown:function(e){{var n=this,i=e.isDefaultPrevented();t(e.target)}if(n.isFocused){if(e.target!==n.$control_input[0])return"single"===n.settings.mode?n.isOpen?n.close():n.open():i||n.setActiveItem(null),!1}else i||window.setTimeout(function(){n.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(e){var n=this;n.isFull()||n.isInputHidden||n.isLocked?e.preventDefault():n.settings.splitOn&&setTimeout(function(){for(var e=t.trim(n.$control_input.val()||"").split(n.settings.splitOn),i=0,o=e.length;o>i;i++)n.createItem(e[i])},0)},onKeyPress:function(t){if(this.isLocked)return t&&t.preventDefault();var e=String.fromCharCode(t.keyCode||t.which);return this.settings.create&&"multi"===this.settings.mode&&e===this.settings.delimiter?(this.createItem(),t.preventDefault(),!1):void 0},onKeyDown:function(t){var e=(t.target===this.$control_input[0],this);if(e.isLocked)return void(t.keyCode!==b&&t.preventDefault());switch(t.keyCode){case r:if(e.isCmdDown)return void e.selectAll();break;case l:return void(e.isOpen&&(t.preventDefault(),t.stopPropagation(),e.close()));case f:if(!t.ctrlKey||t.altKey)break;case p:if(!e.isOpen&&e.hasOptions)e.open();else if(e.$activeOption){e.ignoreHover=!0;var n=e.getAdjacentOption(e.$activeOption,1);n.length&&e.setActiveOption(n,!0,!0)}return void t.preventDefault();case d:if(!t.ctrlKey||t.altKey)break;case c:if(e.$activeOption){e.ignoreHover=!0;var i=e.getAdjacentOption(e.$activeOption,-1);i.length&&e.setActiveOption(i,!0,!0)}return void t.preventDefault();case s:return void(e.isOpen&&e.$activeOption&&(e.onOptionSelect({currentTarget:e.$activeOption}),t.preventDefault()));case u:return void e.advanceSelection(-1,t);case h:return void e.advanceSelection(1,t);case b:return e.settings.selectOnTab&&e.isOpen&&e.$activeOption&&(e.onOptionSelect({currentTarget:e.$activeOption}),e.isFull()||t.preventDefault()),void(e.settings.create&&e.createItem()&&t.preventDefault());case m:case g:return void e.deleteSelection(t)}return!e.isFull()&&!e.isInputHidden||(a?t.metaKey:t.ctrlKey)?void 0:void t.preventDefault()},onKeyUp:function(t){var e=this;if(e.isLocked)return t&&t.preventDefault();var n=e.$control_input.val()||"";e.lastValue!==n&&(e.lastValue=n,e.onSearchChange(n),e.refreshOptions(),e.trigger("type",n))},onSearchChange:function(t){var e=this,n=e.settings.load;n&&(e.loadedSearches.hasOwnProperty(t)||(e.loadedSearches[t]=!0,e.load(function(i){n.apply(e,[t,i])})))},onFocus:function(t){var e=this,n=e.isFocused;return e.isDisabled?(e.blur(),t&&t.preventDefault(),!1):void(e.ignoreFocus||(e.isFocused=!0,"focus"===e.settings.preload&&e.onSearchChange(""),n||e.trigger("focus"),e.$activeItems.length||(e.showInput(),e.setActiveItem(null),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState()))},onBlur:function(t,e){var n=this;if(n.isFocused&&(n.isFocused=!1,!n.ignoreFocus)){if(!n.ignoreBlur&&document.activeElement===n.$dropdown_content[0])return n.ignoreBlur=!0,void n.onFocus(t);var i=function(){n.close(),n.setTextboxValue(""),n.setActiveItem(null),n.setActiveOption(null),n.setCaret(n.items.length),n.refreshState(),(e||document.body).focus(),n.ignoreFocus=!1,n.trigger("blur")};n.ignoreFocus=!0,n.settings.create&&n.settings.createOnBlur?n.createItem(null,!1,i):i()}},onOptionHover:function(t){this.ignoreHover||this.setActiveOption(t.currentTarget,!1)},onOptionSelect:function(e){var n,i,o=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),i=t(e.currentTarget),i.hasClass("create")?o.createItem(null,function(){o.settings.closeAfterSelect&&o.close()}):(n=i.attr("data-value"),"undefined"!=typeof n&&(o.lastQuery=null,o.setTextboxValue(""),o.addItem(n),o.settings.closeAfterSelect?o.close():!o.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&o.setActiveOption(o.getOption(n))))},onItemSelect:function(t){var e=this;e.isLocked||"multi"===e.settings.mode&&(t.preventDefault(),e.setActiveItem(t.currentTarget,t))},load:function(t){var e=this,n=e.$wrapper.addClass(e.settings.loadingClass);e.loading++,t.apply(e,[function(t){e.loading=Math.max(e.loading-1,0),t&&t.length&&(e.addOption(t),e.refreshOptions(e.isFocused&&!e.isInputHidden)),e.loading||n.removeClass(e.settings.loadingClass),e.trigger("load",t)}])},setTextboxValue:function(t){var e=this.$control_input,n=e.val()!==t;n&&(e.val(t).triggerHandler("update"),this.lastValue=t)},getValue:function(){return this.tagType===w&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(t,e){var n=e?[]:["change"];E(this,n,function(){this.clear(e),this.addItems(t,e)})},setActiveItem:function(e,n){var i,o,a,r,s,l,u,c,d=this;if("single"!==d.settings.mode){if(e=t(e),!e.length)return t(d.$activeItems).removeClass("active"),d.$activeItems=[],void(d.isFocused&&d.showInput());if(i=n&&n.type.toLowerCase(),"mousedown"===i&&d.isShiftDown&&d.$activeItems.length){for(c=d.$control.children(".active:last"),r=Array.prototype.indexOf.apply(d.$control[0].childNodes,[c[0]]),s=Array.prototype.indexOf.apply(d.$control[0].childNodes,[e[0]]),r>s&&(u=r,r=s,s=u),o=r;s>=o;o++)l=d.$control[0].childNodes[o],-1===d.$activeItems.indexOf(l)&&(t(l).addClass("active"),d.$activeItems.push(l));n.preventDefault()}else"mousedown"===i&&d.isCtrlDown||"keydown"===i&&this.isShiftDown?e.hasClass("active")?(a=d.$activeItems.indexOf(e[0]),d.$activeItems.splice(a,1),e.removeClass("active")):d.$activeItems.push(e.addClass("active")[0]):(t(d.$activeItems).removeClass("active"),d.$activeItems=[e.addClass("active")[0]]);d.hideInput(),this.isFocused||d.focus()}},setActiveOption:function(e,n,i){var o,a,r,s,l,u=this;u.$activeOption&&u.$activeOption.removeClass("active"),u.$activeOption=null,e=t(e),e.length&&(u.$activeOption=e.addClass("active"),(n||!L(n))&&(o=u.$dropdown_content.height(),a=u.$activeOption.outerHeight(!0),n=u.$dropdown_content.scrollTop()||0,r=u.$activeOption.offset().top-u.$dropdown_content.offset().top+n,s=r,l=r-o+a,r+a>o+n?u.$dropdown_content.stop().animate({scrollTop:l},i?u.settings.scrollDuration:0):n>r&&u.$dropdown_content.stop().animate({scrollTop:s},i?u.settings.scrollDuration:0)))},selectAll:function(){var t=this;"single"!==t.settings.mode&&(t.$activeItems=Array.prototype.slice.apply(t.$control.children(":not(input)").addClass("active")),t.$activeItems.length&&(t.hideInput(),t.close()),t.focus())},hideInput:function(){var t=this;t.setTextboxValue(""),t.$control_input.css({opacity:0,position:"absolute",left:t.rtl?1e4:-1e4}),t.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var t=this;t.isDisabled||(t.ignoreFocus=!0,t.$control_input[0].focus(),window.setTimeout(function(){t.ignoreFocus=!1,t.onFocus()},0))},blur:function(t){this.$control_input[0].blur(),this.onBlur(null,t)},getScoreFunction:function(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())},getSearchOptions:function(){var t=this.settings,e=t.sortField;return"string"==typeof e&&(e=[{field:e}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e}},search:function(e){var n,i,o,a=this,r=a.settings,s=this.getSearchOptions();if(r.score&&(o=a.settings.score.apply(this,[e]),"function"!=typeof o))throw new Error('Selectize "score" setting must be a function that returns a function');if(e!==a.lastQuery?(a.lastQuery=e,i=a.sifter.search(e,t.extend(s,{score:o})),a.currentResults=i):i=t.extend(!0,{},a.currentResults),r.hideSelected)for(n=i.items.length-1;n>=0;n--)-1!==a.items.indexOf(S(i.items[n].id))&&i.items.splice(n,1);return i},refreshOptions:function(e){var n,o,a,r,s,l,u,c,d,h,p,f,m,g,v,y;"undefined"==typeof e&&(e=!0);var _=this,b=t.trim(_.$control_input.val()),w=_.search(b),x=_.$dropdown_content,C=_.$activeOption&&S(_.$activeOption.attr("data-value"));for(r=w.items.length,"number"==typeof _.settings.maxOptions&&(r=Math.min(r,_.settings.maxOptions)),s={},l=[],n=0;r>n;n++)for(u=_.options[w.items[n].id],c=_.render("option",u),d=u[_.settings.optgroupField]||"",h=t.isArray(d)?d:[d],o=0,a=h&&h.length;a>o;o++)d=h[o],_.optgroups.hasOwnProperty(d)||(d=""),s.hasOwnProperty(d)||(s[d]=[],l.push(d)),s[d].push(c);for(this.settings.lockOptgroupOrder&&l.sort(function(t,e){var n=_.optgroups[t].$order||0,i=_.optgroups[e].$order||0;return n-i}),p=[],n=0,r=l.length;r>n;n++)d=l[n],_.optgroups.hasOwnProperty(d)&&s[d].length?(f=_.render("optgroup_header",_.optgroups[d])||"",f+=s[d].join(""),p.push(_.render("optgroup",t.extend({},_.optgroups[d],{html:f})))):p.push(s[d].join(""));if(x.html(p.join("")),_.settings.highlight&&w.query.length&&w.tokens.length)for(n=0,r=w.tokens.length;r>n;n++)i(x,w.tokens[n].regex);if(!_.settings.hideSelected)for(n=0,r=_.items.length;r>n;n++)_.getOption(_.items[n]).addClass("selected");m=_.canCreate(b),m&&(x.prepend(_.render("option_create",{input:b})),y=t(x[0].childNodes[0])),_.hasOptions=w.items.length>0||m,_.hasOptions?(w.items.length>0?(v=C&&_.getOption(C),v&&v.length?g=v:"single"===_.settings.mode&&_.items.length&&(g=_.getOption(_.items[0])),g&&g.length||(g=y&&!_.settings.addPrecedence?_.getAdjacentOption(y,1):x.find("[data-selectable]:first"))):g=y,_.setActiveOption(g),e&&!_.isOpen&&_.open()):(_.setActiveOption(null),e&&_.isOpen&&_.close())},addOption:function(e){var n,i,o,a=this;if(t.isArray(e))for(n=0,i=e.length;i>n;n++)a.addOption(e[n]);else(o=a.registerOption(e))&&(a.userOptions[o]=!0,a.lastQuery=null,a.trigger("option_add",o,e))},registerOption:function(t){var e=S(t[this.settings.valueField]);return!e||this.options.hasOwnProperty(e)?!1:(t.$order=t.$order||++this.order,this.options[e]=t,e)},registerOptionGroup:function(t){var e=S(t[this.settings.optgroupValueField]);return e?(t.$order=t.$order||++this.order,this.optgroups[e]=t,e):!1},addOptionGroup:function(t,e){e[this.settings.optgroupValueField]=t,(t=this.registerOptionGroup(e))&&this.trigger("optgroup_add",t,e)},removeOptionGroup:function(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.renderCache={},this.trigger("optgroup_remove",t))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,n){var i,o,a,r,s,l,u,c=this;if(e=S(e),a=S(n[c.settings.valueField]),null!==e&&c.options.hasOwnProperty(e)){if("string"!=typeof a)throw new Error("Value must be set in option data");u=c.options[e].$order,a!==e&&(delete c.options[e],r=c.items.indexOf(e),-1!==r&&c.items.splice(r,1,a)),n.$order=n.$order||u,c.options[a]=n,s=c.renderCache.item,l=c.renderCache.option,s&&(delete s[e],delete s[a]),l&&(delete l[e],delete l[a]),-1!==c.items.indexOf(a)&&(i=c.getItem(e),o=t(c.render("item",n)),i.hasClass("active")&&o.addClass("active"),i.replaceWith(o)),c.lastQuery=null,c.isOpen&&c.refreshOptions(!1)}},removeOption:function(t,e){var n=this;t=S(t);var i=n.renderCache.item,o=n.renderCache.option;i&&delete i[t],o&&delete o[t],delete n.userOptions[t],delete n.options[t],n.lastQuery=null,n.trigger("option_remove",t),n.removeItem(t,e)},clearOptions:function(){var t=this;t.loadedSearches={},t.userOptions={},t.renderCache={},t.options=t.sifter.items={},t.lastQuery=null,t.trigger("option_clear"),t.clear()},getOption:function(t){return this.getElementWithValue(t,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(e,n){var i=this.$dropdown.find("[data-selectable]"),o=i.index(e)+n;return o>=0&&o<i.length?i.eq(o):t()},getElementWithValue:function(e,n){if(e=S(e),"undefined"!=typeof e&&null!==e)for(var i=0,o=n.length;o>i;i++)if(n[i].getAttribute("data-value")===e)return t(n[i]);return t()},getItem:function(t){return this.getElementWithValue(t,this.$control.children())},addItems:function(e,n){for(var i=t.isArray(e)?e:[e],o=0,a=i.length;a>o;o++)this.isPending=a-1>o,this.addItem(i[o],n)},addItem:function(e,n){var i=n?[]:["change"];E(this,i,function(){var i,o,a,r,s,l=this,u=l.settings.mode;return e=S(e),-1!==l.items.indexOf(e)?void("single"===u&&l.close()):void(l.options.hasOwnProperty(e)&&("single"===u&&l.clear(n),"multi"===u&&l.isFull()||(i=t(l.render("item",l.options[e])),s=l.isFull(),l.items.splice(l.caretPos,0,e),l.insertAtCaret(i),(!l.isPending||!s&&l.isFull())&&l.refreshState(),l.isSetup&&(a=l.$dropdown_content.find("[data-selectable]"),l.isPending||(o=l.getOption(e),r=l.getAdjacentOption(o,1).attr("data-value"),l.refreshOptions(l.isFocused&&"single"!==u),r&&l.setActiveOption(l.getOption(r))),!a.length||l.isFull()?l.close():l.positionDropdown(),l.updatePlaceholder(),l.trigger("item_add",e,i),l.updateOriginalInput({silent:n})))))})},removeItem:function(t,e){var n,i,o,a=this;n="object"==typeof t?t:a.getItem(t),t=S(n.attr("data-value")),i=a.items.indexOf(t),-1!==i&&(n.remove(),n.hasClass("active")&&(o=a.$activeItems.indexOf(n[0]),a.$activeItems.splice(o,1)),a.items.splice(i,1),a.lastQuery=null,!a.settings.persist&&a.userOptions.hasOwnProperty(t)&&a.removeOption(t,e),i<a.caretPos&&a.setCaret(a.caretPos-1),a.refreshState(),a.updatePlaceholder(),a.updateOriginalInput({silent:e}),a.positionDropdown(),a.trigger("item_remove",t,n))},createItem:function(e,n){var i=this,o=i.caretPos;e=e||t.trim(i.$control_input.val()||"");var a=arguments[arguments.length-1];if("function"!=typeof a&&(a=function(){}),"boolean"!=typeof n&&(n=!0),!i.canCreate(e))return a(),!1;i.lock();var r="function"==typeof i.settings.create?this.settings.create:function(t){var e={};return e[i.settings.labelField]=t,e[i.settings.valueField]=t,e},s=M(function(t){if(i.unlock(),!t||"object"!=typeof t)return a();var e=S(t[i.settings.valueField]);return"string"!=typeof e?a():(i.setTextboxValue(""),i.addOption(t),i.setCaret(o),i.addItem(e),i.refreshOptions(n&&"single"!==i.settings.mode),void a(t))}),l=r.apply(this,[e,s]);return"undefined"!=typeof l&&s(l),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var t,e=this;e.isRequired&&(e.items.length&&(e.isInvalid=!1),e.$control_input.prop("required",t)),e.refreshClasses()},refreshClasses:function(){var e=this,n=e.isFull(),i=e.isLocked;e.$wrapper.toggleClass("rtl",e.rtl),e.$control.toggleClass("focus",e.isFocused).toggleClass("disabled",e.isDisabled).toggleClass("required",e.isRequired).toggleClass("invalid",e.isInvalid).toggleClass("locked",i).toggleClass("full",n).toggleClass("not-full",!n).toggleClass("input-active",e.isFocused&&!e.isInputHidden).toggleClass("dropdown-active",e.isOpen).toggleClass("has-options",!t.isEmptyObject(e.options)).toggleClass("has-items",e.items.length>0),e.$control_input.data("grow",!n&&!i)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(t){var e,n,i,o,a=this;if(t=t||{},a.tagType===w){for(i=[],e=0,n=a.items.length;n>e;e++)o=a.options[a.items[e]][a.settings.labelField]||"",i.push('<option value="'+k(a.items[e])+'" selected="selected">'+k(o)+"</option>");i.length||this.$input.attr("multiple")||i.push('<option value="" selected="selected"></option>'),a.$input.html(i.join(""))}else a.$input.val(a.getValue()),a.$input.attr("value",a.$input.val());a.isSetup&&(t.silent||a.trigger("change",a.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var t=this.$control_input;this.items.length?t.removeAttr("placeholder"):t.attr("placeholder",this.settings.placeholder),t.triggerHandler("update",{force:!0})}},open:function(){var t=this;t.isLocked||t.isOpen||"multi"===t.settings.mode&&t.isFull()||(t.focus(),t.isOpen=!0,t.refreshState(),t.$dropdown.css({visibility:"hidden",display:"block"}),t.positionDropdown(),t.$dropdown.css({visibility:"visible"}),t.trigger("dropdown_open",t.$dropdown))},close:function(){var t=this,e=t.isOpen;"single"===t.settings.mode&&t.items.length&&t.hideInput(),t.isOpen=!1,t.$dropdown.hide(),t.setActiveOption(null),t.refreshState(),e&&t.trigger("dropdown_close",t.$dropdown)},positionDropdown:function(){var t=this.$control,e="body"===this.settings.dropdownParent?t.offset():t.position();e.top+=t.outerHeight(!0),this.$dropdown.css({width:t.outerWidth(),top:e.top,left:e.left})},clear:function(t){var e=this;e.items.length&&(e.$control.children(":not(input)").remove(),e.items=[],e.lastQuery=null,e.setCaret(0),e.setActiveItem(null),e.updatePlaceholder(),e.updateOriginalInput({silent:t}),e.refreshState(),e.showInput(),e.trigger("clear"))},insertAtCaret:function(e){var n=Math.min(this.caretPos,this.items.length);0===n?this.$control.prepend(e):t(this.$control[0].childNodes[n]).before(e),this.setCaret(n+1)},deleteSelection:function(e){var n,i,o,a,r,s,l,u,c,d=this;if(o=e&&e.keyCode===m?-1:1,a=A(d.$control_input[0]),d.$activeOption&&!d.settings.hideSelected&&(l=d.getAdjacentOption(d.$activeOption,-1).attr("data-value")),r=[],d.$activeItems.length){for(c=d.$control.children(".active:"+(o>0?"last":"first")),s=d.$control.children(":not(input)").index(c),o>0&&s++,n=0,i=d.$activeItems.length;i>n;n++)r.push(t(d.$activeItems[n]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(d.isFocused||"single"===d.settings.mode)&&d.items.length&&(0>o&&0===a.start&&0===a.length?r.push(d.items[d.caretPos-1]):o>0&&a.start===d.$control_input.val().length&&r.push(d.items[d.caretPos]));if(!r.length||"function"==typeof d.settings.onDelete&&d.settings.onDelete.apply(d,[r])===!1)return!1;for("undefined"!=typeof s&&d.setCaret(s);r.length;)d.removeItem(r.pop());return d.showInput(),d.positionDropdown(),d.refreshOptions(!0),l&&(u=d.getOption(l),u.length&&d.setActiveOption(u)),!0},advanceSelection:function(t,e){var n,i,o,a,r,s,l=this;0!==t&&(l.rtl&&(t*=-1),n=t>0?"last":"first",i=A(l.$control_input[0]),l.isFocused&&!l.isInputHidden?(a=l.$control_input.val().length,r=0>t?0===i.start&&0===i.length:i.start===a,r&&!a&&l.advanceCaret(t,e)):(s=l.$control.children(".active:"+n),s.length&&(o=l.$control.children(":not(input)").index(s),l.setActiveItem(null),l.setCaret(t>0?o+1:o))))},advanceCaret:function(t,e){var n,i,o=this;0!==t&&(n=t>0?"next":"prev",o.isShiftDown?(i=o.$control_input[n](),i.length&&(o.hideInput(),o.setActiveItem(i),e&&e.preventDefault())):o.setCaret(o.caretPos+t))},setCaret:function(e){var n=this;if(e="single"===n.settings.mode?n.items.length:Math.max(0,Math.min(n.items.length,e)),!n.isPending){var i,o,a,r;for(a=n.$control.children(":not(input)"),i=0,o=a.length;o>i;i++)r=t(a[i]).detach(),e>i?n.$control_input.before(r):n.$control.append(r)}n.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var t=this;t.$input.prop("disabled",!0),t.$control_input.prop("disabled",!0).prop("tabindex",-1),t.isDisabled=!0,t.lock()},enable:function(){var t=this;t.$input.prop("disabled",!1),t.$control_input.prop("disabled",!1).prop("tabindex",t.tabIndex),t.isDisabled=!1,t.unlock()},destroy:function(){var e=this,n=e.eventNS,i=e.revertSettings;e.trigger("destroy"),e.off(),e.$wrapper.remove(),e.$dropdown.remove(),e.$input.html("").append(i.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:i.tabindex}).show(),e.$control_input.removeData("grow"),e.$input.removeData("selectize"),t(window).off(n),t(document).off(n),t(document.body).off(n),delete e.$input[0].selectize},render:function(t,e){var n,i,o="",a=!1,r=this,s=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===t||"item"===t)&&(n=S(e[r.settings.valueField]),a=!!n),a&&(L(r.renderCache[t])||(r.renderCache[t]={}),r.renderCache[t].hasOwnProperty(n))?r.renderCache[t][n]:(o=r.settings.render[t].apply(this,[e,k]),("option"===t||"option_create"===t)&&(o=o.replace(s,"<$1 data-selectable")),"optgroup"===t&&(i=e[r.settings.optgroupValueField]||"",o=o.replace(s,'<$1 data-group="'+D(k(i))+'"')),("option"===t||"item"===t)&&(o=o.replace(s,'<$1 data-value="'+D(k(n||""))+'"')),a&&(r.renderCache[t][n]=o),o)},clearCache:function(t){var e=this;"undefined"==typeof t?e.renderCache={}:delete e.renderCache[t]},canCreate:function(t){var e=this;if(!e.settings.create)return!1;var n=e.settings.createFilter;return!(!t.length||"function"==typeof n&&!n.apply(e,[t])||"string"==typeof n&&!new RegExp(n).test(t)||n instanceof RegExp&&!n.test(t))}}),R.count=0,R.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},t.fn.selectize=function(e){var n=t.fn.selectize.defaults,i=t.extend({},n,e),o=i.dataAttr,a=i.labelField,r=i.valueField,s=i.optgroupField,l=i.optgroupLabelField,u=i.optgroupValueField,c=function(e,n){var s,l,u,c,d=e.attr(o);if(d)for(n.options=JSON.parse(d),s=0,l=n.options.length;l>s;s++)n.items.push(n.options[s][r]);else{var h=t.trim(e.val()||"");if(!i.allowEmptyOption&&!h.length)return;for(u=h.split(i.delimiter),s=0,l=u.length;l>s;s++)c={},c[a]=u[s],c[r]=u[s],n.options.push(c);n.items=u}},d=function(e,n){var c,d,h,p,f=n.options,m={},g=function(t){var e=o&&t.attr(o);return"string"==typeof e&&e.length?JSON.parse(e):null},v=function(e,o){e=t(e);var l=S(e.attr("value"));if(l||i.allowEmptyOption)if(m.hasOwnProperty(l)){if(o){var u=m[l][s];u?t.isArray(u)?u.push(o):m[l][s]=[u,o]:m[l][s]=o}}else{var c=g(e)||{};c[a]=c[a]||e.text(),c[r]=c[r]||l,c[s]=c[s]||o,m[l]=c,f.push(c),e.is(":selected")&&n.items.push(l)}},y=function(e){var i,o,a,r,s;for(e=t(e),a=e.attr("label"),a&&(r=g(e)||{},r[l]=a,r[u]=a,n.optgroups.push(r)),s=t("option",e),i=0,o=s.length;o>i;i++)v(s[i],a)};for(n.maxItems=e.attr("multiple")?null:1,p=e.children(),c=0,d=p.length;d>c;c++)h=p[c].tagName.toLowerCase(),"optgroup"===h?y(p[c]):"option"===h&&v(p[c])};return this.each(function(){if(!this.selectize){var o,a=t(this),r=this.tagName.toLowerCase(),s=a.attr("placeholder")||a.attr("data-placeholder");s||i.allowEmptyOption||(s=a.children('option[value=""]').text());var l={placeholder:s,options:[],optgroups:[],items:[]};"select"===r?d(a,l):c(a,l),o=new R(a,t.extend(!0,{},n,l,e))}})},t.fn.selectize.defaults=R.defaults,t.fn.selectize.support={validity:C},R.define("drag_drop",function(){if(!t.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');
if("multi"===this.settings.mode){var e=this;e.lock=function(){var t=e.lock;return function(){var n=e.$control.data("sortable");return n&&n.disable(),t.apply(e,arguments)}}(),e.unlock=function(){var t=e.unlock;return function(){var n=e.$control.data("sortable");return n&&n.enable(),t.apply(e,arguments)}}(),e.setup=function(){var n=e.setup;return function(){n.apply(this,arguments);var i=e.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:e.isLocked,start:function(t,e){e.placeholder.css("width",e.helper.css("width")),i.css({overflow:"visible"})},stop:function(){i.css({overflow:"hidden"});var n=e.$activeItems?e.$activeItems.slice():null,o=[];i.children("[data-value]").each(function(){o.push(t(this).attr("data-value"))}),e.setValue(o),e.setActiveItem(n)}})}}()}}),R.define("dropdown_header",function(e){var n=this;e=t.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(t){return'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a href="javascript:void(0)" class="'+t.closeClass+'">&times;</a></div></div>'}},e),n.setup=function(){var i=n.setup;return function(){i.apply(n,arguments),n.$dropdown_header=t(e.html(e)),n.$dropdown.prepend(n.$dropdown_header)}}()}),R.define("optgroup_columns",function(e){var n=this;e=t.extend({equalizeWidth:!0,equalizeHeight:!0},e),this.getAdjacentOption=function(e,n){var i=e.closest("[data-group]").find("[data-selectable]"),o=i.index(e)+n;return o>=0&&o<i.length?i.eq(o):t()},this.onKeyDown=function(){var t=n.onKeyDown;return function(e){var i,o,a,r;return!this.isOpen||e.keyCode!==u&&e.keyCode!==h?t.apply(this,arguments):(n.ignoreHover=!0,r=this.$activeOption.closest("[data-group]"),i=r.find("[data-selectable]").index(this.$activeOption),r=e.keyCode===u?r.prev("[data-group]"):r.next("[data-group]"),a=r.find("[data-selectable]"),o=a.eq(Math.min(a.length-1,i)),void(o.length&&this.setActiveOption(o)))}}();var i=function(){var t,e=i.width,n=document;return"undefined"==typeof e&&(t=n.createElement("div"),t.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',t=t.firstChild,n.body.appendChild(t),e=i.width=t.offsetWidth-t.clientWidth,n.body.removeChild(t)),e},o=function(){var o,a,r,s,l,u,c;if(c=t("[data-group]",n.$dropdown_content),a=c.length,a&&n.$dropdown_content.width()){if(e.equalizeHeight){for(r=0,o=0;a>o;o++)r=Math.max(r,c.eq(o).height());c.css({height:r})}e.equalizeWidth&&(u=n.$dropdown_content.innerWidth()-i(),s=Math.round(u/a),c.css({width:s}),a>1&&(l=u-s*(a-1),c.eq(a-1).css({width:l})))}};(e.equalizeHeight||e.equalizeWidth)&&(T.after(this,"positionDropdown",o),T.after(this,"refreshOptions",o))}),R.define("remove_button",function(e){if("single"!==this.settings.mode){e=t.extend({label:"&times;",title:"Remove",className:"remove",append:!0},e);var n=this,i='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+k(e.title)+'">'+e.label+"</a>",o=function(t,e){var n=t.search(/(<\/[^>]+>\s*)$/);return t.substring(0,n)+e+t.substring(n)};this.setup=function(){var a=n.setup;return function(){if(e.append){var r=n.settings.render.item;n.settings.render.item=function(){return o(r.apply(this,arguments),i)}}a.apply(this,arguments),this.$control.on("click","."+e.className,function(e){if(e.preventDefault(),!n.isLocked){var i=t(e.currentTarget).parent();n.setActiveItem(i),n.deleteSelection()&&n.setCaret(n.items.length)}})}}()}}),R.define("restore_on_backspace",function(t){var e=this;t.text=t.text||function(t){return t[this.settings.labelField]},this.onKeyDown=function(){var n=e.onKeyDown;return function(e){var i,o;return e.keyCode===m&&""===this.$control_input.val()&&!this.$activeItems.length&&(i=this.caretPos-1,i>=0&&i<this.items.length)?(o=this.options[this.items[i]],this.deleteSelection(e)&&(this.setTextboxValue(t.text.apply(this,[o])),this.refreshOptions(!0)),void e.preventDefault()):n.apply(this,arguments)}}()}),R}),function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.download=e()}(this,function(){return function(t,e,n){function i(t){var e=t.split(/[:;,]/),n=e[1],i="base64"==e[2]?atob:decodeURIComponent,o=i(e.pop()),a=o.length,r=0,s=new Uint8Array(a);for(r;a>r;++r)s[r]=o.charCodeAt(r);return new h([s],{type:n})}function o(t,e){if("download"in c)return c.href=t,c.setAttribute("download",m),c.innerHTML="downloading...",u.body.appendChild(c),setTimeout(function(){c.click(),u.body.removeChild(c),e===!0&&setTimeout(function(){a.URL.revokeObjectURL(c.href)},250)},66),!0;if("undefined"!=typeof safari)return t="data:"+t.replace(/^data:([\w\/\-\+]+)/,r),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=u.createElement("iframe");u.body.appendChild(n),e||(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,r)),n.src=t,setTimeout(function(){u.body.removeChild(n)},333)}var a=window,r="application/octet-stream",s=n||r,l=t,u=document,c=u.createElement("a"),d=function(t){return String(t)},h=a.Blob||a.MozBlob||a.WebKitBlob||d;h=h.call?h.bind(a):Blob;var p,f,m=e||"download";if("true"===String(this)&&(l=[l,s],s=l[0],l=l[1]),String(l).match(/^data\:[\w+\-]+\/[\w+\-]+[,;]/))return navigator.msSaveBlob?navigator.msSaveBlob(i(l),m):o(l);if(p=l instanceof h?l:new h([l],{type:s}),navigator.msSaveBlob)return navigator.msSaveBlob(p,m);if(a.URL)o(a.URL.createObjectURL(p),!0);else{if("string"==typeof p||p.constructor===d)try{return o("data:"+s+";base64,"+a.btoa(p))}catch(g){return o("data:"+s+","+encodeURIComponent(p))}f=new FileReader,f.onload=function(){o(this.result)},f.readAsDataURL(p)}return!0}}),/*! jQuery Migrate v1.2.1 | (c) 2005, 2013 jQuery Foundation, Inc. and other contributors | jquery.org/license */
void 0===jQuery.migrateMute&&(jQuery.migrateMute=!0),function(t,e,n){function i(n){var i=e.console;a[n]||(a[n]=!0,t.migrateWarnings.push(n),i&&i.warn&&!t.migrateMute&&(i.warn("JQMIGRATE: "+n),t.migrateTrace&&i.trace&&i.trace()))}function o(e,o,a,r){if(Object.defineProperty)try{return Object.defineProperty(e,o,{configurable:!0,enumerable:!0,get:function(){return i(r),a},set:function(t){i(r),a=t}}),n}catch(s){}t._definePropertyBroken=!0,e[o]=a}var a={};t.migrateWarnings=[],!t.migrateMute&&e.console&&e.console.log&&e.console.log("JQMIGRATE: Logging is active"),t.migrateTrace===n&&(t.migrateTrace=!0),t.migrateReset=function(){a={},t.migrateWarnings.length=0},"BackCompat"===document.compatMode&&i("jQuery is not compatible with Quirks Mode");var r=t("<input/>",{size:1}).attr("size")&&t.attrFn,s=t.attr,l=t.attrHooks.value&&t.attrHooks.value.get||function(){return null},u=t.attrHooks.value&&t.attrHooks.value.set||function(){return n},c=/^(?:input|button)$/i,d=/^[238]$/,h=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,p=/^(?:checked|selected)$/i;o(t,"attrFn",r||{},"jQuery.attrFn is deprecated"),t.attr=function(e,o,a,l){var u=o.toLowerCase(),f=e&&e.nodeType;return l&&(4>s.length&&i("jQuery.fn.attr( props, pass ) is deprecated"),e&&!d.test(f)&&(r?o in r:t.isFunction(t.fn[o])))?t(e)[o](a):("type"===o&&a!==n&&c.test(e.nodeName)&&e.parentNode&&i("Can't change the 'type' of an input or button in IE 6/7/8"),!t.attrHooks[u]&&h.test(u)&&(t.attrHooks[u]={get:function(e,i){var o,a=t.prop(e,i);return a===!0||"boolean"!=typeof a&&(o=e.getAttributeNode(i))&&o.nodeValue!==!1?i.toLowerCase():n},set:function(e,n,i){var o;return n===!1?t.removeAttr(e,i):(o=t.propFix[i]||i,o in e&&(e[o]=!0),e.setAttribute(i,i.toLowerCase())),i}},p.test(u)&&i("jQuery.fn.attr('"+u+"') may use property instead of attribute")),s.call(t,e,o,a))},t.attrHooks.value={get:function(t,e){var n=(t.nodeName||"").toLowerCase();return"button"===n?l.apply(this,arguments):("input"!==n&&"option"!==n&&i("jQuery.fn.attr('value') no longer gets properties"),e in t?t.value:null)},set:function(t,e){var o=(t.nodeName||"").toLowerCase();return"button"===o?u.apply(this,arguments):("input"!==o&&"option"!==o&&i("jQuery.fn.attr('value', val) no longer sets properties"),t.value=e,n)}};var f,m,g=t.fn.init,v=t.parseJSON,y=/^([^<]*)(<[\w\W]+>)([^>]*)$/;t.fn.init=function(e,n,o){var a;return e&&"string"==typeof e&&!t.isPlainObject(n)&&(a=y.exec(t.trim(e)))&&a[0]&&("<"!==e.charAt(0)&&i("$(html) HTML strings must start with '<' character"),a[3]&&i("$(html) HTML text after last tag is ignored"),"#"===a[0].charAt(0)&&(i("HTML string cannot start with a '#' character"),t.error("JQMIGRATE: Invalid selector string (XSS)")),n&&n.context&&(n=n.context),t.parseHTML)?g.call(this,t.parseHTML(a[2],n,!0),n,o):g.apply(this,arguments)},t.fn.init.prototype=t.fn,t.parseJSON=function(t){return t||null===t?v.apply(this,arguments):(i("jQuery.parseJSON requires a valid JSON string"),null)},t.uaMatch=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||0>t.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},t.browser||(f=t.uaMatch(navigator.userAgent),m={},f.browser&&(m[f.browser]=!0,m.version=f.version),m.chrome?m.webkit=!0:m.webkit&&(m.safari=!0),t.browser=m),o(t,"browser",t.browser,"jQuery.browser is deprecated"),t.sub=function(){function e(t,n){return new e.fn.init(t,n)}t.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(i,o){return o&&o instanceof t&&!(o instanceof e)&&(o=e(o)),t.fn.init.call(this,i,o,n)},e.fn.init.prototype=e.fn;var n=e(document);return i("jQuery.sub() is deprecated"),e},t.ajaxSetup({converters:{"text json":t.parseJSON}});var _=t.fn.data;t.fn.data=function(e){var o,a,r=this[0];return!r||"events"!==e||1!==arguments.length||(o=t.data(r,e),a=t._data(r,e),o!==n&&o!==a||a===n)?_.apply(this,arguments):(i("Use of jQuery.fn.data('events') is deprecated"),a)};var b=/\/(java|ecma)script/i,w=t.fn.andSelf||t.fn.addBack;t.fn.andSelf=function(){return i("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),w.apply(this,arguments)},t.clean||(t.clean=function(e,o,a,r){o=o||document,o=!o.nodeType&&o[0]||o,o=o.ownerDocument||o,i("jQuery.clean() is deprecated");var s,l,u,c,d=[];if(t.merge(d,t.buildFragment(e,o).childNodes),a)for(u=function(t){return!t.type||b.test(t.type)?r?r.push(t.parentNode?t.parentNode.removeChild(t):t):a.appendChild(t):n},s=0;null!=(l=d[s]);s++)t.nodeName(l,"script")&&u(l)||(a.appendChild(l),l.getElementsByTagName!==n&&(c=t.grep(t.merge([],l.getElementsByTagName("script")),u),d.splice.apply(d,[s+1,0].concat(c)),s+=c.length));return d});var x=t.event.add,C=t.event.remove,L=t.event.trigger,S=t.fn.toggle,k=t.fn.live,D=t.fn.die,T="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",M=RegExp("\\b(?:"+T+")\\b"),P=/(?:^|\s)hover(\.\S+|)\b/,E=function(e){return"string"!=typeof e||t.event.special.hover?e:(P.test(e)&&i("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),e&&e.replace(P,"mouseenter$1 mouseleave$1"))};t.event.props&&"attrChange"!==t.event.props[0]&&t.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),t.event.dispatch&&o(t.event,"handle",t.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),t.event.add=function(t,e,n,o,a){t!==document&&M.test(e)&&i("AJAX events should be attached to document: "+e),x.call(this,t,E(e||""),n,o,a)},t.event.remove=function(t,e,n,i,o){C.call(this,t,E(e)||"",n,i,o)},t.fn.error=function(){var t=Array.prototype.slice.call(arguments,0);return i("jQuery.fn.error() is deprecated"),t.splice(0,0,"error"),arguments.length?this.bind.apply(this,t):(this.triggerHandler.apply(this,t),this)},t.fn.toggle=function(e,n){if(!t.isFunction(e)||!t.isFunction(n))return S.apply(this,arguments);i("jQuery.fn.toggle(handler, handler...) is deprecated");var o=arguments,a=e.guid||t.guid++,r=0,s=function(n){var i=(t._data(this,"lastToggle"+e.guid)||0)%r;return t._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),o[i].apply(this,arguments)||!1};for(s.guid=a;o.length>r;)o[r++].guid=a;return this.click(s)},t.fn.live=function(e,n,o){return i("jQuery.fn.live() is deprecated"),k?k.apply(this,arguments):(t(this.context).on(e,this.selector,n,o),this)},t.fn.die=function(e,n){return i("jQuery.fn.die() is deprecated"),D?D.apply(this,arguments):(t(this.context).off(e,this.selector||"**",n),this)},t.event.trigger=function(t,e,n,o){return n||M.test(t)||i("Global events are undocumented and deprecated"),L.call(this,t,e,n||document,o)},t.each(T.split("|"),function(e,n){t.event.special[n]={setup:function(){var e=this;return e!==document&&(t.event.add(document,n+"."+t.guid,function(){t.event.trigger(n,null,e,!0)}),t._data(this,n,t.guid++)),!1},teardown:function(){return this!==document&&t.event.remove(document,n+"."+t._data(this,n)),!1}}})}(jQuery,window);/*!
* Yet Another DataTables Column Filter - (yadcf)
* 
* File:        jquery.dataTables.yadcf.js
* Version:     0.8.8
*  
* Author:      Daniel Reznick
* Info:        https://github.com/vedmack/yadcf
* Contact:     vedmack@gmail.com
* Twitter:	   @danielreznick
* Q&A		   https://groups.google.com/forum/#!forum/daniels_code	
*
* Copyright 2014 Daniel Reznick, all rights reserved.
* Copyright 2014 Released under the MIT License
* 
* This source file is distributed in the hope that it will be useful, but 
* WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY 
* or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.
*/
var yadcf=function(t){"use strict";function e(e){var n;return t.fn.dataTable.Api?n=new t.fn.dataTable.Api(e).settings()[0]:e.fnSettings?n=e.fnSettings():"string"==typeof e?t.fn.dataTable.fnIsDataTable(t(e)[0])&&(n=t(e).eq(0).dataTable().fnSettings()):e.nodeName&&"table"===e.nodeName.toLowerCase()?t.fn.dataTable.fnIsDataTable(e.nodeName)&&(n=t(e.nodeName).dataTable().fnSettings()):e instanceof jQuery?t.fn.dataTable.fnIsDataTable(e[0])&&(n=e.eq(0).dataTable().fnSettings()):n=e,n}function n(t){var e,n=[];for(e=0;e<t.length;e++)n[t[e]]=e;return n}function i(t,e){void 0!=t&&void 0!==t.ColReorder&&void 0===xe[e]&&(xe[e]={},xe[e].ColReorder=n(t.ColReorder))}function o(t){xe[t]=void 0}function a(t){var e={};return void 0!==t?t instanceof Array?e.column_number_str=t.join("_"):(e.column_number_str=t,t=[],t.push(e.column_number_str)):e.column_number_str="global",e.column_number=t,e}function r(t){return we[t]}function s(t){return void 0===t.target&&(t.target=t.srcElement),t}function l(t,e){var n=0;for(e=e.split("."),n=0;n<e.length;n++)t=t[e[n]];return t}function u(e,n,i){var o,a,r={},s={filter_type:"select",enable_auto_complete:!1,sort_as:"alpha",sort_order:"asc",date_format:"mm/dd/yyyy",ignore_char:void 0,filter_match_mode:"contains",select_type:void 0,select_type_options:{},case_insensitive:!0,column_data_type:"text",html_data_type:"text",exclude_label:"exclude",style_class:""},l=function(){return""};if(t.extend(!0,s,i),void 0===n.length)return void(we[e]=n);for(o=0;o<n.length;o++){if("select2"===n[o].select_type&&(s.select_type_options={adaptContainerCssClass:l}),s.externally_triggered===!0&&(n[o].filter_reset_button_text=!1),void 0!==n[o].filter_type&&-1!==n[o].filter_type.indexOf("custom_func")&&void 0===n[o].custom_func)return void alert('You are trying to use filter_type: "custom_func / multi_select_custom_func" for column '+n[o].column_number+' but there is no such custom_func attribute provided (custom_func: "function reference goes here...")');a=+n[o].column_number,isNaN(a)?r[n[o].column_number_str]=t.extend(!0,{},s,n[o]):r[a]=t.extend(!0,{},s,n[o])}we[e]=r}function c(e){var n,i,o,a,r=t.fn.dataTable.ext.sVersion.split("."),s=e.split(".");for(o=0,a=s.length;a>o;o++)if(n=parseInt(r[o],10)||0,i=parseInt(s[o],10)||0,n!==i)return n>i;return!0}function d(){t.fn.dataTableExt.iApiIndex=0}function h(t){return t.replace(":","-").replace("(","").replace(")","").replace(".","-").replace("#","-")}function p(t){return t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function f(t,e,n){return t.replace(new RegExp(p(e),"g"),n)}function m(t){return t=f(t,":","-"),t=f(t,"(",""),t=f(t,")",""),t=f(t,",",""),t=f(t,".","-"),t=f(t,"#","-")}function g(t,e,n,i,o){var a,r=yadcf.getOptions(t.selector)[e].case_insensitive;return t.fnSettings().aoPreSearchCols[e].bSmart=!1,t.fnSettings().aoPreSearchCols[e].bRegex=!0,t.fnSettings().aoPreSearchCols[e].bCaseInsensitive=r,void 0===o||o===!1?"contains"===i?(t.fnSettings().aoPreSearchCols[e].bSmart=!0,t.fnSettings().aoPreSearchCols[e].bRegex=!1,a=n):"exact"===i?a="^"+n+"$":"startsWith"===i?a="^"+n:"regex"===i&&(a=n):"contains"===i?a=n.join("|"):"exact"===i?a="^("+n.join("|")+")$":"startsWith"===i?a="^("+n.join("|")+")":"regex"===i&&(a=n),a}function v(t,e,n,i,o){var a=yadcf.getOptions(t.selector)[i].case_insensitive;if(o!==!0){if("contains"===n)t.fnFilter(e,i,!1,!0,!0,a);else if("exact"===n)e=p(e),t.fnFilter("^"+e+"$",i,!0,!1,!0,a);else if("startsWith"===n)e=p(e),t.fnFilter("^"+e,i,!0,!1,!0,a);else if("regex"===n){try{new RegExp(e)}catch(r){return}t.fnFilter(e,i,!0,!1,!0,a)}}else t.fnFilter("^((?!"+e+").)*$",i,!0,!1,!0,a)}function y(t,e){var n;return"contains"===e?n=t:"exact"===e?(n=t.substring(1,t.length-1),n=n.replace(/([\\])/g,"")):"startsWith"===e?(n=t.substring(1,t.length),n=n.replace(/([\\])/g,"")):"regex"===e&&(n=t),n}function _(e,n,i){var o,a=_e[n],s=r(a.selector)[i];if("clear"===e||"-1"===e.value){if(""===de(a,i))return;t("#yadcf-filter-"+n+"-"+i).val("-1").focus(),t("#yadcf-filter-"+n+"-"+i).removeClass("inuse"),"chosen"===s.select_type?t("#yadcf-filter-"+n+"-"+i).trigger("chosen:updated"):void 0!==s.select_type&&"select2"===s.select_type&&t("#yadcf-filter-"+n+"-"+i).select2("val","-1")}else t("#yadcf-filter-"+n+"-"+i).addClass("inuse");a.fnSettings().oLoadedState||(a.fnSettings().oLoadedState={},a.fnSettings().oApi._fnSaveState(a.fnSettings())),a.fnSettings().oFeatures.bStateSave===!0&&(void 0!==a.fnSettings().oLoadedState.yadcfState&&void 0!==a.fnSettings().oLoadedState.yadcfState[n]?a.fnSettings().oLoadedState.yadcfState[n][i]={from:e.value}:(o={},o[n]=[],o[n][i]={from:e.value},a.fnSettings().oLoadedState.yadcfState=o),a.fnSettings().oApi._fnSaveState(a.fnSettings())),a.fnDraw()}function b(n,o,a,s){t.fn.dataTableExt.iApiIndex=be[o];var l,u,c,h=_e[o],p=e(h);if(void 0!=p.oSavedState&&void 0!==p.oSavedState.ColReorder||void 0!==xe[o]&&void 0!==xe[o].ColReorder?(i(p.oSavedState,o),u=xe[o].ColReorder[a]):u=a,c=r(h.selector)[a],"clear"===n){if(""===de(h,a))return;return t("#yadcf-filter-"+o+"-"+a).val("-1").focus(),t("#yadcf-filter-"+o+"-"+a).removeClass("inuse"),t(document).data("#yadcf-filter-"+o+"-"+a+"_val","-1"),h.fnFilter("",u),d(),void("chosen"===r(h.selector)[a].select_type?t("#yadcf-filter-"+o+"-"+a).trigger("chosen:updated"):void 0!==c.select_type&&"select2"===c.select_type&&t("#yadcf-filter-"+o+"-"+a).select2("val","-1"))}t("#yadcf-filter-"+o+"-"+a).addClass("inuse"),t(document).data("#yadcf-filter-"+o+"-"+a+"_val",n.value),l=t.trim(t(n).find("option:selected").val()),"-1"!==n.value?v(h,l,s,u):(h.fnFilter("",u),t("#yadcf-filter-"+o+"-"+a).removeClass("inuse")),d()}function w(n,o,a,r){t.fn.dataTableExt.iApiIndex=be[o];var s,l,u,c=_e[o],h=t(n).val(),p=[],f=e(c);if(void 0!=f.oSavedState&&void 0!==f.oSavedState.ColReorder||void 0!==xe[o]&&void 0!==xe[o].ColReorder?(i(f.oSavedState,o),u=xe[o].ColReorder[a]):u=a,t(document).data("#yadcf-filter-"+o+"-"+a+"_val",h),null!==h){for(s=h.length-1;s>=0;s--)if("-1"===h[s]){h.splice(s,1);break}for(s=0;s<h.length;s++)p.push(t.trim(h[s]));0!==p.length?(l=p.join("narutouzomaki"),l=l.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),l=l.split("narutouzomaki").join("|"),"contains"===r?c.fnFilter(l,u,!0,!1,!0):"exact"===r?c.fnFilter("^("+l+")$",u,!0,!1,!0):"startsWith"===r?c.fnFilter("^("+l+")",u,!0,!1,!0):"regex"===r&&c.fnFilter(l,u,!0,!1,!0)):c.fnFilter("",u)}else c.fnFilter("",u);d()}function x(t,e){var n;return"contains"===e?n=t:"exact"===e?(n=t.substring(1,t.length-1),n=n.substring(1,n.length-1)):"startsWith"===e?(n=t.substring(1,t.length),n=n.substring(1,n.length-1)):"regex"===e&&(n=t),n}function C(n,o,a,r){t.fn.dataTableExt.iApiIndex=be[o];var s,l=_e[o],u=e(l);if(void 0!=u.oSavedState&&void 0!==u.oSavedState.ColReorder||void 0!==xe[o]&&void 0!==xe[o].ColReorder?(i(u.oSavedState,o),s=xe[o].ColReorder[a]):s=a,"clear"===n){if(""===de(l,a))return;return t("#yadcf-filter-"+o+"-"+a).val("").focus(),t("#yadcf-filter-"+o+"-"+a).removeClass("inuse"),t(document).removeData("#yadcf-filter-"+o+"-"+a+"_val"),l.fnFilter("",s),void d()}t("#yadcf-filter-"+o+"-"+a).addClass("inuse"),t(document).data("#yadcf-filter-"+o+"-"+a+"_val",n.value),v(l,n.value,r,s),d()}function L(e,n){e=s(e);var i=e.target.id.replace("yadcf-filter-",""),o=i.lastIndexOf("-"),a=i.substring(0,o),r=parseInt(i.substring(o+1),10),l=t(e.target).attr("filter_match_mode");C(n.item,a,r,l)}function S(t,e){return t-e}function k(t,e){return e-t}function D(t,e){var n,i,o=[];for(n=0;n<t.length;n++)null!==t[n]&&(void 0!==e&&(t[n]=t[n].toString().replace(e,"")),i=+t[n],isNaN(i)||o.push(i));return Math.min.apply(Math,o)}function T(t,e){var n,i,o=[];for(n=0;n<t.length;n++)null!==t[n]&&(void 0!==e&&(t[n]=t[n].toString().replace(e,"")),i=+t[n],isNaN(i)||o.push(i));return Math.max.apply(Math,o)}function M(e,n,o,a,s){t.fn.dataTableExt.afnFiltering.push(function(u,c,d,h){var p,f,m,g,v,y,_,b=!1,w=e,x=yadcf.generateTableSelectorJQFriendly(u.oInstance.selector),C=s;if(w!==x)return!0;if(y=r(u.oInstance.selector)[a],"range_number_slider"===y.filter_type?(p=t("#"+n).text(),f=t("#"+o).text()):(p=document.getElementById(n).value,f=document.getElementById(o).value),void 0!=u.oSavedState&&void 0!==u.oSavedState.ColReorder||void 0!==xe[e]&&void 0!==xe[e].ColReorder?(i(u.oSavedState,e),_=xe[e].ColReorder[a]):_=a,void 0!==h?(c=h,void 0!==y.column_number_data?(_=y.column_number_data,m=l(c,_)):m=c[_]):m=c[_],!isFinite(p)||!isFinite(f))return!0;if(g=y.column_data_type,v=y.html_data_type,"html"===g||"rendered_html"===g){if(void 0===v&&(v="text"),0!==t(m).length)switch(v){case"text":m=t(m).text();break;case"value":m=t(m).val();break;case"id":m=m.id;break;case"selector":m=t(m).find(y.html_data_selector).text()}}else"object"==typeof m&&void 0!==y.html5_data&&(m=m["@"+y.html5_data]);return void 0!==C&&(p=p.replace(C,""),f=f.replace(C,""),m=m?m.toString().replace(C,""):""),p=""!==p?+p:p,f=""!==f?+f:f,m=""!==m?+m:m,""===p&&""===f?b=!0:""===p&&f>=m?b=!0:m>=p&&""===f?b=!0:m>=p&&f>=m?b=!0:(""===m||isNaN(m))&&(b=!0),b})}function P(e,n,o){t.fn.dataTableExt.afnFiltering.push(function(a,s){var l,u,c,d=t("#"+n).val(),h=!1,p=e,f=yadcf.generateTableSelectorJQFriendly(a.oInstance.selector);return p!==f?!0:(void 0!=a.oSavedState&&void 0!==a.oSavedState.ColReorder||void 0!==xe[e]&&void 0!==xe[e].ColReorder?(i(a.oSavedState,e),c=xe[e].ColReorder[o]):c=o,l="-"===s[c]?0:s[c],u=r(a.oInstance.selector)[o].custom_func,h=u(d,l,s))})}function E(e,n,o,a,s){t.fn.dataTableExt.afnFiltering.push(function(u,c,d,h){var p,f,m,g,v,y=null!==document.getElementById(n)?document.getElementById(n).value:"",_=null!==document.getElementById(o)?document.getElementById(o).value:"",b=!1,w=e,x=yadcf.generateTableSelectorJQFriendly(u.oInstance.selector);if(w!==x)return!0;if(g=r(u.oInstance.selector)[a],void 0!=u.oSavedState&&void 0!==u.oSavedState.ColReorder||void 0!==xe[e]&&void 0!==xe[e].ColReorder?(i(u.oSavedState,e),v=xe[e].ColReorder[a]):v=a,void 0!==h?(c=h,void 0!==g.column_number_data?(v=g.column_number_data,p=l(c,v)):p=c[v]):p=c[v],f=g.column_data_type,m=g.html_data_type,"html"===f||"rendered_html"===f){if(void 0===m&&(m="text"),0!==t(p).length)switch(m){case"text":p=t(p).text();break;case"value":p=t(p).val();break;case"id":p=p.id;break;case"selector":p=t(p).find(g.html_data_selector).text()}}else"object"==typeof p&&void 0!==g.html5_data&&(p=p["@"+g.html5_data]);try{y.length===s.length+2&&(y=""!==y?t.datepicker.parseDate(s,y):y)}catch(C){}try{_.length===s.length+2&&(_=""!==_?t.datepicker.parseDate(s,_):_)}catch(L){}try{p=""!==p?t.datepicker.parseDate(s,p):p}catch(S){}return""!==y&&y instanceof Date||""!==_&&_ instanceof Date?""===y&&_>=p?b=!0:p>=y&&""===_?b=!0:p>=y&&_>=p&&(b=!0):b=!0,b})}function I(e,n,i,o,a,s){var l,u,c,h,p,f="yadcf-filter-"+n+"-from-"+i,m="yadcf-filter-"+n+"-to-"+i;u="yadcf-filter-wrapper-"+n+"-"+i,t("#"+u).length>0||(t.fn.dataTableExt.iApiIndex=be[n],c=_e[n],h=r(c.selector)[i],t(e).append('<div onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);"  id="'+u+'" class="yadcf-filter-wrapper"></div>'),e+=" div.yadcf-filter-wrapper",l=e,t(e).append('<div id="yadcf-filter-wrapper-inner-'+n+"-"+i+'" class="yadcf-filter-wrapper-inner"></div>'),e+=" div.yadcf-filter-wrapper-inner",p="onkeyup=\"yadcf.rangeNumberKeyUP('"+n+"',event);\"",h.externally_triggered===!0&&(p=""),t(e).append('<input placeholder="'+a[0]+'" id="'+f+'" class="yadcf-filter-range-number yadcf-filter-range" '+p+"></input>"),t(e).append('<span class="yadcf-filter-range-number-seperator" ></span>'),t(e).append('<input placeholder="'+a[1]+'" id="'+m+'" class="yadcf-filter-range-number yadcf-filter-range" '+p+"></input>"),o!==!1&&t(l).append('<button type="button" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.rangeClear(\''+n+'\',event); return false;" class="yadcf-filter-reset-button">'+o+"</button>"),c.fnSettings().oFeatures.bStateSave===!0&&c.fnSettings().oLoadedState&&c.fnSettings().oLoadedState.yadcfState&&c.fnSettings().oLoadedState.yadcfState[n]&&c.fnSettings().oLoadedState.yadcfState[n][i]&&(t("#"+f).val(c.fnSettings().oLoadedState.yadcfState[n][i].from),""!==c.fnSettings().oLoadedState.yadcfState[n][i].from&&t("#"+f).addClass("inuse"),t("#"+m).val(c.fnSettings().oLoadedState.yadcfState[n][i].to),""!==c.fnSettings().oLoadedState.yadcfState[n][i].to&&t("#"+m).addClass("inuse")),d(),c.fnSettings().oFeatures.bServerSide!==!0&&M(n,f,m,i,s))}function A(n,o,a){var r,s,l,u,c=t(o).attr("id").replace("yadcf-filter-","").replace("-date","").replace("-reset",""),h=c.lastIndexOf("-"),p=c.substring(0,h);if(c=c.substring(h+1),t.fn.dataTableExt.iApiIndex=be[p],r=_e[p],u=e(r),void 0!=u.oSavedState&&void 0!==u.oSavedState.ColReorder||void 0!==xe[p]&&void 0!==xe[p].ColReorder?(i(u.oSavedState,p),l=xe[p].ColReorder[c]):l=c,void 0===a)s=document.getElementById(t(o).attr("id")).value,r.fnFilter(n,l),t("#yadcf-filter-"+p+"-"+c).addClass("inuse");else if("clear"===a){if(""===de(r,c))return;r.fnFilter("",l),t("#yadcf-filter-"+p+"-"+c).val("").removeClass("inuse")}d()}function F(e,n){var i,o,a,r,s,l=t(n).attr("id").replace("yadcf-filter-","").replace("-from-date","").replace("-to-date",""),u=l.lastIndexOf("-"),c=l.substring(0,u);l=l.substring(u+1),t.fn.dataTableExt.iApiIndex=be[c],i=_e[c],s=yadcf.getOptions(i.selector)[l].date_format,s=s.replace("yyyy","yy"),t("#"+t(n).attr("id")).addClass("inuse"),-1!==t(n).attr("id").indexOf("-from-")?(a=document.getElementById(t(n).attr("id")).value,r=document.getElementById(t(n).attr("id").replace("-from-","-to-")).value):(r=document.getElementById(t(n).attr("id")).value,a=document.getElementById(t(n).attr("id").replace("-to-","-from-")).value),i.fnSettings().oFeatures.bServerSide!==!0?i.fnDraw():i.fnFilter(a+"-yadcf_delim-"+r,l),i.fnSettings().oLoadedState||(i.fnSettings().oLoadedState={},i.fnSettings().oApi._fnSaveState(i.fnSettings())),i.fnSettings().oFeatures.bStateSave===!0&&(void 0!==i.fnSettings().oLoadedState.yadcfState&&void 0!==i.fnSettings().oLoadedState.yadcfState[c]?i.fnSettings().oLoadedState.yadcfState[c][l]={from:a,to:r}:(o={},o[c]=[],o[c][l]={from:a,to:r},i.fnSettings().oLoadedState.yadcfState=o),i.fnSettings().oApi._fnSaveState(i.fnSettings())),d()}function O(e,n,i,o,a,s){var l,u,c,h,p,f="yadcf-filter-"+n+"-from-date-"+i,m="yadcf-filter-"+n+"-to-date-"+i,g={};u="yadcf-filter-wrapper-"+n+"-"+i,t("#"+u).length>0||(t(e).append('<div onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);"  id="'+u+'" class="yadcf-filter-wrapper"></div>'),e+=" div.yadcf-filter-wrapper",l=e,t(e).append('<div id="yadcf-filter-wrapper-inner-'+n+"-"+i+'" class="yadcf-filter-wrapper-inner"></div>'),e+=" div.yadcf-filter-wrapper-inner",t.fn.dataTableExt.iApiIndex=be[n],c=_e[n],h=r(c.selector)[i],p="onkeyup=\"yadcf.rangeDateKeyUP('"+n+"','"+s+"',event);\"",h.externally_triggered===!0&&(p=""),t(e).append('<input placeholder="'+a[0]+'" id="'+f+'" class="yadcf-filter-range-date yadcf-filter-range" '+p+"></input>"),t(e).append('<span class="yadcf-filter-range-date-seperator" ></span>'),t(e).append('<input placeholder="'+a[1]+'" id="'+m+'" class="yadcf-filter-range-date yadcf-filter-range" '+p+"></input>"),o!==!1&&t(l).append('<button type="button" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.rangeClear(\''+n+'\',event); return false;" class="yadcf-filter-reset-button">'+o+"</button>"),g.dateFormat=s,h.externally_triggered!==!0&&(g.onSelect=F),t("#"+f).datepicker(g),t("#"+m).datepicker(g),c.fnSettings().oFeatures.bStateSave===!0&&c.fnSettings().oLoadedState&&c.fnSettings().oLoadedState.yadcfState&&c.fnSettings().oLoadedState.yadcfState[n]&&c.fnSettings().oLoadedState.yadcfState[n][i]&&(t("#"+f).val(c.fnSettings().oLoadedState.yadcfState[n][i].from),""!==c.fnSettings().oLoadedState.yadcfState[n][i].from&&t("#"+f).addClass("inuse"),t("#"+m).val(c.fnSettings().oLoadedState.yadcfState[n][i].to),""!==c.fnSettings().oLoadedState.yadcfState[n][i].to&&t("#"+m).addClass("inuse")),c.fnSettings().oFeatures.bServerSide!==!0&&E(n,f,m,i,s),d())}function N(e,n,i,o,a,s){var l,u,c,h,p,f="yadcf-filter-"+n+"-"+i,m={};u="yadcf-filter-wrapper-"+n+"-"+i,t("#"+u).length>0||(t.fn.dataTableExt.iApiIndex=be[n],c=_e[n],h=r(c.selector)[i],t(e).append('<div onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);"  id="'+u+'" class="yadcf-filter-wrapper"></div>'),e+=" div.yadcf-filter-wrapper",l=e,p="onkeyup=\"yadcf.dateKeyUP('"+n+"','"+s+"',event);\"",h.externally_triggered===!0&&(p=""),t(e).append('<input placeholder="'+a+'" id="'+f+'" class="yadcf-filter-date" '+p+"></input>"),o!==!1&&t(l).append('<button type="button" id="'+f+'-reset" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.dateSelectSingle(\''+n+"',yadcf.eventTargetFixUp(event).target, 'clear'); return false;\" class=\"yadcf-filter-reset-button\">"+o+"</button>"),m.dateFormat=s,h.externally_triggered!==!0&&(m.onSelect=A),t("#"+f).datepicker(m),""!==c.fnSettings().aoPreSearchCols[i].sSearch&&t("#yadcf-filter-"+n+"-"+i).val(c.fnSettings().aoPreSearchCols[i].sSearch).addClass("inuse"),d())}function R(e,n,i,o,a,r){var s,l,u=t("#yadcf-filter-wrapper-inner-"+a+"-"+r+" .ui-slider-handle:first"),c=t("#yadcf-filter-wrapper-inner-"+a+"-"+r+" .ui-slider-handle:last");s='<div id="'+i+'" class="yadcf-filter-range-number-slider-min-tip-inner">'+e+"</div>",l='<div id="'+o+'" class="yadcf-filter-range-number-slider-max-tip-inner">'+n+"</div>",t(u).addClass("yadcf-filter-range-number-slider-min-tip").html(s),t(c).addClass("yadcf-filter-range-number-slider-max-tip").html(l)}function B(e,n,i){n=s(n);var o,a,l,u,c,h,p,f=t(n.target).attr("id").replace("yadcf-filter-","").replace(e,"").replace("-slider-","");o=_e[e],h=r(o.selector)[f],p=function(){t.fn.dataTableExt.iApiIndex=be[e],o.fnSettings().oFeatures.bServerSide!==!0?o.fnDraw():o.fnFilter(i.values[0]+"-yadcf_delim-"+i.values[1],f),a=+t(t(n.target).parent().find(".yadcf-filter-range-number-slider-min-tip-hidden")).text(),l=+t(t(n.target).parent().find(".yadcf-filter-range-number-slider-max-tip-hidden")).text(),a!==i.values[0]?(t(t(n.target).find(".ui-slider-handle")[0]).addClass("inuse"),u=!0):t(t(n.target).find(".ui-slider-handle")[0]).removeClass("inuse"),l!==i.values[1]?(t(t(n.target).find(".ui-slider-handle")[1]).addClass("inuse"),u=!0):t(t(n.target).find(".ui-slider-handle")[1]).removeClass("inuse"),u===!0?t(n.target).find(".ui-slider-range").addClass("inuse"):t(n.target).find(".ui-slider-range").removeClass("inuse"),o.fnSettings().oLoadedState||(o.fnSettings().oLoadedState={},o.fnSettings().oApi._fnSaveState(o.fnSettings())),o.fnSettings().oFeatures.bStateSave===!0&&(void 0!==o.fnSettings().oLoadedState.yadcfState&&void 0!==o.fnSettings().oLoadedState.yadcfState[e]?o.fnSettings().oLoadedState.yadcfState[e][f]={from:i.values[0],to:i.values[1]}:(c={},c[e]=[],c[e][f]={from:i.values[0],to:i.values[1]},o.fnSettings().oLoadedState.yadcfState=c),o.fnSettings().oApi._fnSaveState(o.fnSettings())),d()},void 0===h.filter_delay?p():ve(function(){p()},h.filter_delay)}function U(e,n,i,o,a,s,l){var u,c,h,p,f,m,g="yadcf-filter-"+n+"-slider-"+i,v="yadcf-filter-"+n+"-min_tip-"+i,y="yadcf-filter-"+n+"-max_tip-"+i,_=a,b=s;c="yadcf-filter-wrapper-"+n+"-"+i,t("#"+c).length>0||(t.fn.dataTableExt.iApiIndex=be[n],h=_e[n],p=r(h.selector)[i],h.fnSettings().oFeatures.bStateSave===!0&&h.fnSettings().oLoadedState&&h.fnSettings().oLoadedState.yadcfState&&h.fnSettings().oLoadedState.yadcfState[n]&&h.fnSettings().oLoadedState.yadcfState[n][i]&&(a!==h.fnSettings().oLoadedState.yadcfState[n][i].from&&(_=h.fnSettings().oLoadedState.yadcfState[n][i].from),s!==h.fnSettings().oLoadedState.yadcfState[n][i].to&&(b=h.fnSettings().oLoadedState.yadcfState[n][i].to)),isFinite(a)&&isFinite(s)&&isFinite(_)&&isFinite(b)&&(t(e).append('<div onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);"  id="'+c+'" class="yadcf-filter-wrapper"></div>'),e+=" div.yadcf-filter-wrapper",u=e,t(e).append('<div id="yadcf-filter-wrapper-inner-'+n+"-"+i+'" class="yadcf-number-slider-filter-wrapper-inner"></div>'),e+=" div.yadcf-number-slider-filter-wrapper-inner",t(e).append('<div id="'+g+'" class="yadcf-filter-range-number-slider"></div>'),e=e+" #"+g,t(e).append('<span class="yadcf-filter-range-number-slider-min-tip-hidden hide">'+a+"</span>"),t(e).append('<span class="yadcf-filter-range-number-slider-max-tip-hidden hide">'+s+"</span>"),p.externally_triggered!==!0?(f=function(t,e){R(e.values[0],e.values[1],v,y,n,i),B(n,t,e)},m=function(e,o){R(o.values[0],o.values[1],v,y,n,i),(e.originalEvent||t(e.target).slider("option","yadcf-reset")===!0)&&(t(e.target).slider("option","yadcf-reset",!1),B(n,e,o))}):(f=function(t,e){R(e.values[0],e.values[1],v,y,n,i)},m=function(t,e){R(e.values[0],e.values[1],v,y,n,i)}),t("#"+g).slider({range:!0,min:a,max:s,values:[_,b],create:function(){R(_,b,v,y,n,i)},slide:f,change:m}),o!==!1&&t(u).append('<button type="button" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.rangeNumberSliderClear(\''+n+'\',event); return false;" class="yadcf-filter-reset-button range-number-slider-reset-button">'+o+"</button>")),t.fn.dataTableExt.iApiIndex=be[n],h=_e[n],h.fnSettings().oFeatures.bStateSave===!0&&h.fnSettings().oLoadedState&&h.fnSettings().oLoadedState.yadcfState&&h.fnSettings().oLoadedState.yadcfState[n]&&h.fnSettings().oLoadedState.yadcfState[n][i]&&(isFinite(a)&&a!==h.fnSettings().oLoadedState.yadcfState[n][i].from&&t(t(e).find(".ui-slider-handle")[0]).addClass("inuse"),isFinite(s)&&s!==h.fnSettings().oLoadedState.yadcfState[n][i].to&&t(t(e).find(".ui-slider-handle")[1]).addClass("inuse"),isFinite(a)&&isFinite(s)&&(a!==h.fnSettings().oLoadedState.yadcfState[n][i].from||s!==h.fnSettings().oLoadedState.yadcfState[n][i].to)&&t(t(e).find(".ui-slider-range")).addClass("inuse")),d(),h.fnSettings().oFeatures.bServerSide!==!0&&M(n,v,y,i,l))}function z(e){t(".yadcf-filter-wrapper").remove(),c("1.10")?(t(document).off("draw.dt",e.selector),t(document).off("xhr.dt",e.selector),t(document).off("column-visibility.dt",e.selector),t(document).off("destroy.dt",e.selector)):(t(document).off("draw",e.selector),t(document).off("destroy",e.selector))}function j(t,e){var n,i,o=t.replace(Le,""),a=e.replace(Le,"");return o===a?(n=parseInt(t.replace(Se,""),10),i=parseInt(e.replace(Se,""),10),n===i?0:n>i?1:-1):o>a?1:-1}function $(t,e){return("select"===e.filter_type||"auto_complete"===e.filter_type||"multi_select"===e.filter_type||"multi_select_custom_func"===e.filter_type||"custom_func"===e.filter_type)&&("alpha"===e.sort_as?"asc"===e.sort_order?t.sort():"desc"===e.sort_order&&(t.sort(),t.reverse()):"num"===e.sort_as?"asc"===e.sort_order?t.sort(S):"desc"===e.sort_order&&t.sort(k):"alphaNum"===e.sort_as?"asc"===e.sort_order?t.sort(j):"desc"===e.sort_order&&(t.sort(j),t.reverse()):"custom"===e.sort_as&&t.sort(e.sort_as_custom_func)),t}function H(n,o,a){var r,s,u,c,d,h,p={},f=[],m=n.fnSettings().aoData,g=m.length;for(d=e(n),void 0!==o.col_filter_array&&(p=o.col_filter_array),(void 0!=d.oSavedState&&void 0!==d.oSavedState.ColReorder||void 0!==xe[a]&&void 0!==xe[a].ColReorder)&&i(d.oSavedState,a),h=void 0!==xe[a]&&void 0!==xe[a].ColReorder?xe[a].ColReorder[o.column_number]:o.column_number,isNaN(n.fnSettings().aoColumns[h].mData)&&"object"!=typeof n.fnSettings().aoColumns[h].mData&&(o.column_number_data=n.fnSettings().aoColumns[h].mData),u=0;g>u;u++)if("html"===o.column_data_type)if(void 0===o.column_number_data?r=t(m[u]._aData[h]):(r=l(m[u]._aData,o.column_number_data),r=t(r)),r.length>0)for(c=0;c<r.length;c++){switch(o.html_data_type){case"text":s=t(r[c]).text();break;case"value":s=t(r[c]).val();break;case"id":s=r[c].id;break;case"selector":s=t(r[c]).find(o.html_data_selector).text()}""===t.trim(s)||p.hasOwnProperty(s)||(p[s]=s,f.push(s))}else s=r.selector,""===t.trim(s)||p.hasOwnProperty(s)||(p[s]=s,f.push(s));else if("text"===o.column_data_type)if(void 0!==o.text_data_delimiter)for(void 0===o.column_number_data?r=m[u]._aData[h].split(o.text_data_delimiter):(r=l(m[u]._aData,o.column_number_data),r=(r+"").split(o.text_data_delimiter)),c=0;c<r.length;c++)s=r[c],""===t.trim(s)||p.hasOwnProperty(s)||(p[s]=s,f.push(s));else{if(void 0===o.column_number_data){if(s=m[u]._aData[h],"object"==typeof s){if(void 0===o.html5_data)return void alert("Looks like you have forgot to define the html5_data attribute for the "+o.column_number+" column");s=s["@"+o.html5_data]}}else s=void 0!==m[u]._aFilterData&&null!==m[u]._aFilterData?m[u]._aFilterData[h]:l(m[u]._aData,o.column_number_data);""===t.trim(s)||p.hasOwnProperty(s)||(p[s]=s,f.push(s))}else if("rendered_html"===o.column_data_type){if(r=m[u]._aFilterData[h],r=t(r),r.length>0)for(c=0;c<r.length;c++)switch(o.html_data_type){case"text":s=t(r[c]).text();break;case"value":s=t(r[c]).val();break;case"id":s=r[c].id;break;case"selector":s=t(r[c]).find(o.html_data_selector).text()}else s=r.selector;""===t.trim(s)||p.hasOwnProperty(s)||(p[s]=s,f.push(s))}return o.col_filter_array=p,f}function W(n,o,a){var s,l,u,c,d,h,p,f,m,g,v,_,b,w,C,S,k,M,E,A,F,R,B,z,j,W,V,q,G,Y,Z,K,J,X,Q,te,ee;J=e(n),B=yadcf.generateTableSelectorJQFriendly(a),ee=ye[B],i(J.oSavedState,B),Z=t(document).data(a+"_filters_position"),(""!==J.oScroll.sX||""!==J.oScroll.sY)&&(a=".yadcf-datatables-table-"+B),void 0!==n._fnGetUniqueThs()&&(K=n._fnGetUniqueThs());for(G in o)if(o.hasOwnProperty(G)){if(Y=o[G],q="",u=Y.data,E=[],A=[],c=Y.filter_container_id,h=Y.column_number,h=+h,p=h,void 0!==xe[B]&&void 0!==xe[B]&&void 0!==xe[B].ColReorder&&(p=xe[B].ColReorder[h]),Y.column_number=h,d=void 0,isNaN(J.aoColumns[p].mData)&&"object"!=typeof J.aoColumns[p].mData&&(d=J.aoColumns[p].mData,Y.column_number_data=d),f=Y.column_data_type,m=Y.html_data_type,g=Y.text_data_delimiter,v=Y.filter_default_label,_=Y.filter_reset_button_text,b=Y.enable_auto_complete,w=Y.sort_as,C=Y.sort_order,S=Y.date_format,S=S.replace("yyyy","yy"),Y.date_format=S,void 0===Y.ignore_char||Y.ignore_char instanceof RegExp||(k=new RegExp(Y.ignore_char,"g"),Y.ignore_char=k),M=Y.filter_match_mode,void 0===h)return void alert("You must specify column number");if(b===!0&&(Y.filter_type="auto_complete"),void 0===v&&("select"===Y.filter_type||"custom_func"===Y.filter_type?v="Select value":"multi_select"===Y.filter_type||"multi_select_custom_func"===Y.filter_type?v="Select values":"auto_complete"===Y.filter_type||"text"===Y.filter_type?v="Type to filter":"range_number"===Y.filter_type||"range_date"===Y.filter_type?v=["from","to"]:"date"===Y.filter_type&&(v="Select a date"),Y.filter_default_label=v),void 0===_&&(_="x"),void 0!==u)for(R=0;R<u.length;R++)E.push(u[R]);if((void 0===u||void 0!==Y.append_data_to_table_data)&&(Y.col_filter_array=void 0,A=H(n,Y,B),"before"!==Y.append_data_to_table_data?E=E.concat(A):(A=$(A,Y),E=E.concat(A))),(void 0===Y.append_data_to_table_data||"sorted"===Y.append_data_to_table_data)&&(E=$(E,Y)),"range_number_slider"===Y.filter_type&&(z=D(E,k),j=T(E,k)),void 0===c){if(J.aoColumns[p].bVisible===!1)continue;if("thead"!==Z)if(void 0===K){for(W=p,V=0;V<J.aoColumns.length&&p>V;V++)J.aoColumns[V].bVisible===!1&&W--;p=W,l=a+" "+Z+" th:eq("+p+")"}else l=a+" "+Z+" th:eq("+t(K[p]).index()+")";else l=a+" "+Z+" tr:eq("+t(K[p]).parent().index()+") th:eq("+t(K[p]).index()+")";s=t(l).find(".yadcf-filter")}else{if(0===t("#"+c).length)return void alert("Filter container could not be found.");l="#"+c,s=t(l).find(".yadcf-filter")}if("select"===Y.filter_type||"custom_func"===Y.filter_type?(F='<option value="-1">'+v+"</option>","select2"===Y.select_type&&void 0!==Y.select_type_options.placeholder&&Y.select_type_options.allowClear===!0&&(F='<option value=""></option>')):("multi_select"===Y.filter_type||"multi_select_custom_func"===Y.filter_type)&&(F=void 0===Y.select_type?'<option data-placeholder="true" value="-1">'+v+"</option>":""),void 0===Y.append_data_to_table_data)if("object"==typeof E[0])for(R=0;R<E.length;R++)F+='<option value="'+E[R].value+'">'+E[R].label+"</option>";else for(R=0;R<E.length;R++)F+='<option value="'+E[R]+'">'+E[R]+"</option>";else for(R=0;R<E.length;R++)F+="object"==typeof E[R]?'<option value="'+E[R].value+'">'+E[R].label+"</option>":'<option value="'+E[R]+'">'+E[R]+"</option>";E=F,1===s.length?"select"===Y.filter_type||"multi_select"===Y.filter_type||"custom_func"===Y.filter_type||"multi_select_custom_func"===Y.filter_type?(("custom_func"===Y.filter_type||"multi_select_custom_func"===Y.filter_type)&&(Q=t("#yadcf-filter-"+B+"-"+h).val()),s.empty(),s.append(E),""!==J.aoPreSearchCols[p].sSearch&&(q=J.aoPreSearchCols[p].sSearch,"select"===Y.filter_type?(q=y(q,r(n.selector)[h].filter_match_mode),t("#yadcf-filter-"+B+"-"+h).val(q).addClass("inuse")):"multi_select"===Y.filter_type&&(q=x(q,r(n.selector)[h].filter_match_mode),q=q.replace(/\\/g,""),q=q.split("|"),t("#yadcf-filter-"+B+"-"+h).val(q))),("custom_func"===Y.filter_type||"multi_select_custom_func"===Y.filter_type)&&(q=Q,"-1"===q||void 0===q?t("#yadcf-filter-"+B+"-"+h).val(q):t("#yadcf-filter-"+B+"-"+h).val(q).addClass("inuse")),"chosen"===Y.select_type?t("#yadcf-filter-"+B+"-"+h).trigger("chosen:updated"):void 0!==Y.select_type&&"select2"===Y.select_type&&t("#yadcf-filter-"+B+"-"+h).select2("val",q)):"auto_complete"===Y.filter_type&&t(document).data("yadcf-filter-"+B+"-"+h,E):(void 0===c?t(l+" div.DataTables_sort_wrapper").length>0&&t(l+" div.DataTables_sort_wrapper").css("display","inline-block"):(0===t("#yadcf-filter-wrapper-"+c).length&&t("#"+c).append('<div id="yadcf-filter-wrapper-'+c+'"></div>'),l="#yadcf-filter-wrapper-"+c),"select"===Y.filter_type||"custom_func"===Y.filter_type?(t(l).append('<div id="yadcf-filter-wrapper-'+B+"-"+h+'" class="yadcf-filter-wrapper"></div>'),l+=" div.yadcf-filter-wrapper","select"===Y.filter_type?(X="onchange=\"yadcf.doFilter(this, '"+B+"', "+h+", '"+M+"');\"",Y.externally_triggered===!0&&(X=""),t(l).append('<select id="yadcf-filter-'+B+"-"+h+'" class="yadcf-filter '+Y.style_class+'" '+X+" onmousedown=\"yadcf.stopPropagation(event);\" onclick='yadcf.stopPropagation(event);'>"+E+"</select>"),_!==!1&&t(l).find(".yadcf-filter").after('<button type="button" id="yadcf-filter-'+B+"-"+h+'-reset" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.doFilter(\'clear\', \''+B+"', "+h+'); return false;" class="yadcf-filter-reset-button">'+_+"</button>")):(X="onchange=\"yadcf.doFilterCustomDateFunc(this, '"+B+"', "+h+');"',Y.externally_triggered===!0&&(X=""),t(l).append('<select id="yadcf-filter-'+B+"-"+h+'" class="yadcf-filter '+Y.style_class+'" '+X+" onmousedown=\"yadcf.stopPropagation(event);\" onclick='yadcf.stopPropagation(event);'>"+E+"</select>"),_!==!1&&t(l).find(".yadcf-filter").after('<button type="button" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.doFilterCustomDateFunc(\'clear\', \''+B+"', "+h+'); return false;" class="yadcf-filter-reset-button">'+_+"</button>"),J.oFeatures.bStateSave===!0&&J.oLoadedState&&J.oLoadedState.yadcfState&&J.oLoadedState.yadcfState[B]&&J.oLoadedState.yadcfState[B][h]&&(q=J.oLoadedState.yadcfState[B][h].from,"-1"===q||void 0===q?t("#yadcf-filter-"+B+"-"+h).val(q):t("#yadcf-filter-"+B+"-"+h).val(q).addClass("inuse")),J.oFeatures.bServerSide!==!0&&P(B,"yadcf-filter-"+B+"-"+h,h)),""!==J.aoPreSearchCols[p].sSearch&&(q=J.aoPreSearchCols[p].sSearch,q=y(q,r(n.selector)[h].filter_match_mode),t("#yadcf-filter-"+B+"-"+h).val(q).addClass("inuse")),void 0!==Y.select_type&&"chosen"===Y.select_type?(t("#yadcf-filter-"+B+"-"+h).chosen(Y.select_type_options),t("#yadcf-filter-"+B+"-"+h).next().attr("onclick","yadcf.stopPropagation(event);").attr("onmousedown","yadcf.stopPropagation(event);")):void 0!==Y.select_type&&"select2"===Y.select_type&&(t("#yadcf-filter-"+B+"-"+h).select2(Y.select_type_options),t("#yadcf-filter-"+B+"-"+h).next().hasClass("select2-container")&&t("#yadcf-filter-"+B+"-"+h).next().attr("onclick","yadcf.stopPropagation(event);").attr("onmousedown","yadcf.stopPropagation(event);"))):"multi_select"===Y.filter_type||"multi_select_custom_func"===Y.filter_type?(t(l).append('<div id="yadcf-filter-wrapper-'+B+"-"+h+'" class="yadcf-filter-wrapper"></div>'),l+=" div.yadcf-filter-wrapper","multi_select"===Y.filter_type?(X="onchange=\"yadcf.doFilterMultiSelect(this, '"+B+"', "+h+", '"+M+"');\"",Y.externally_triggered===!0&&(X=""),t(l).append('<select multiple data-placeholder="'+v+'" id="yadcf-filter-'+B+"-"+h+'" class="yadcf-filter '+Y.style_class+'" '+X+" onmousedown=\"yadcf.stopPropagation(event);\" onclick='yadcf.stopPropagation(event);'>"+E+"</select>"),_!==!1&&t(l).find(".yadcf-filter").after('<button type="button" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.doFilter(\'clear\', \''+B+"', "+h+'); return false;" class="yadcf-filter-reset-button">'+_+"</button>"),""!==J.aoPreSearchCols[p].sSearch&&(q=J.aoPreSearchCols[p].sSearch,q=x(q,r(n.selector)[h].filter_match_mode),q=q.replace(/\\/g,""),q=q.split("|"),t("#yadcf-filter-"+B+"-"+h).val(q))):(X="onchange=\"yadcf.doFilterCustomDateFunc(this, '"+B+"', "+h+');"',Y.externally_triggered===!0&&(X=""),t(l).append('<select multiple data-placeholder="'+v+'" id="yadcf-filter-'+B+"-"+h+'" class="yadcf-filter '+Y.style_class+'" '+X+" onmousedown=\"yadcf.stopPropagation(event);\" onclick='yadcf.stopPropagation(event);'>"+E+"</select>"),_!==!1&&t(l).find(".yadcf-filter").after('<button type="button" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.doFilterCustomDateFunc(\'clear\', \''+B+"', "+h+'); return false;" class="yadcf-filter-reset-button">'+_+"</button>"),J.oFeatures.bStateSave===!0&&J.oLoadedState&&J.oLoadedState.yadcfState&&J.oLoadedState.yadcfState[B]&&J.oLoadedState.yadcfState[B][h]&&(q=J.oLoadedState.yadcfState[B][h].from,"-1"===q||void 0===q?t("#yadcf-filter-"+B+"-"+h).val(q):t("#yadcf-filter-"+B+"-"+h).val(q).addClass("inuse")),J.oFeatures.bServerSide!==!0&&P(B,"yadcf-filter-"+B+"-"+h,h)),void 0===Y.filter_container_id&&void 0===Y.select_type_options.width&&(Y.select_type_options=t.extend(Y.select_type_options,{width:t(l).closest("th").width()+"px"})),void 0!==Y.filter_container_id&&void 0===Y.select_type_options.width&&(Y.select_type_options=t.extend(Y.select_type_options,{width:t(l).closest("#"+Y.filter_container_id).width()+"px"})),void 0!==Y.select_type&&"chosen"===Y.select_type?(t("#yadcf-filter-"+B+"-"+h).chosen(Y.select_type_options),t("#yadcf-filter-"+B+"-"+h).next().attr("onclick","yadcf.stopPropagation(event);").attr("onmousedown","yadcf.stopPropagation(event);")):void 0!==Y.select_type&&"select2"===Y.select_type&&(t("#yadcf-filter-"+B+"-"+h).select2(Y.select_type_options),t("#yadcf-filter-"+B+"-"+h).next().hasClass("select2-container")&&t("#yadcf-filter-"+B+"-"+h).next().attr("onclick","yadcf.stopPropagation(event);").attr("onmousedown","yadcf.stopPropagation(event);"))):"auto_complete"===Y.filter_type?(t(l).append('<div id="yadcf-filter-wrapper-'+B+"-"+h+'" class="yadcf-filter-wrapper"></div>'),l+=" div.yadcf-filter-wrapper",X="onkeyup=\"yadcf.autocompleteKeyUP('"+B+"',event);\"",Y.externally_triggered===!0&&(X=""),t(l).append('<input id="yadcf-filter-'+B+"-"+h+'" class="yadcf-filter" onmousedown="yadcf.stopPropagation(event);" onclick=\'yadcf.stopPropagation(event);\' placeholder=\''+v+"' filter_match_mode='"+M+"' "+X+"></input>"),t(document).data("yadcf-filter-"+B+"-"+h,E),_!==!1&&t(l).find(".yadcf-filter").after('<button type="button" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.doFilterAutocomplete(\'clear\', \''+B+"', "+h+'); return false;" class="yadcf-filter-reset-button">'+_+"</button>")):"text"===Y.filter_type?(t(l).append('<div id="yadcf-filter-wrapper-'+B+"-"+h+'" class="yadcf-filter-wrapper"></div>'),l+=" div.yadcf-filter-wrapper",X="onkeyup=\"yadcf.textKeyUP('"+B+"', "+h+');"',Y.externally_triggered===!0&&(X=""),te="",Y.exclude===!0&&(te='<span class="yadcf-exclude-wrapper" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);"><div class="yadcf-label small">'+Y.exclude_label+'</div><input type="checkbox" title="'+Y.exclude_label+'" onclick="yadcf.stopPropagation(event);yadcf.textKeyUP(\''+B+"',"+h+');"></span>'),t(l).append(te+'<input type="text" id="yadcf-filter-'+B+"-"+h+'" class="yadcf-filter '+Y.style_class+"\" onmousedown=\"yadcf.stopPropagation(event);\" onclick='yadcf.stopPropagation(event);' placeholder='"+v+"' filter_match_mode='"+M+"' "+X+"></input>"),_!==!1&&t(l).find(".yadcf-filter").after('<button type="button"  id="yadcf-filter-'+B+"-"+h+'-reset" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.textKeyUP(\''+B+"', '"+h+"', 'clear'); return false;\" class=\"yadcf-filter-reset-button\">"+_+"</button>"),""!==J.aoPreSearchCols[p].sSearch&&(q=J.aoPreSearchCols[p].sSearch,Y.exclude===!0&&(-1!==q.indexOf("^((?!")&&t("#yadcf-filter-wrapper-"+B+"-"+h).find(":checkbox").prop("checked",!0),q=q.substring(5,q.indexOf(").)"))),q=y(q,r(n.selector)[h].filter_match_mode),t("#yadcf-filter-"+B+"-"+h).val(q).addClass("inuse"))):"date"===Y.filter_type?N(l,B,h,_,v,S):"range_number"===Y.filter_type?I(l,B,h,_,v,k):"range_number_slider"===Y.filter_type?U(l,B,h,_,z,j,k):"range_date"===Y.filter_type&&O(l,B,h,_,v,S)),void 0!==t(document).data("#yadcf-filter-"+B+"-"+h+"_val")&&"-1"!==t(document).data("#yadcf-filter-"+B+"-"+h+"_val")&&t(l).find(".yadcf-filter").val(t(document).data("#yadcf-filter-"+B+"-"+h+"_val")),"auto_complete"===Y.filter_type&&(void 0!==Y.filter_plugin_options?void 0!==Y.filter_plugin_options.source?Y.filter_plugin_options.select=L:(Y.filter_plugin_options.source=t(document).data("yadcf-filter-"+B+"-"+h),Y.filter_plugin_options.select=L):Y.filter_plugin_options={source:t(document).data("yadcf-filter-"+B+"-"+h),select:L},Y.externally_triggered===!0&&delete Y.filter_plugin_options.select,t("#yadcf-filter-"+B+"-"+h).autocomplete(Y.filter_plugin_options),""!==J.aoPreSearchCols[p].sSearch&&(q=J.aoPreSearchCols[p].sSearch,q=y(q,r(n.selector)[h].filter_match_mode),t("#yadcf-filter-"+B+"-"+h).val(q).addClass("inuse")))
}Ce.length>0&&Ce.shift()()}function V(n,o){o=s(o),t.fn.dataTableExt.iApiIndex=be[n];var a,r,l,u,c,h=_e[n];r=e(h),l=parseInt(t(o.target).parent().attr("id").replace("yadcf-filter-wrapper-"+n+"-",""),10),void 0!=r.oSavedState&&void 0!==r.oSavedState.ColReorder||void 0!==xe[n]&&void 0!==xe[n].ColReorder?(i(r.oSavedState,n),u=xe[n].ColReorder[l]):u=l,c=de(h,l),(""!==c.from||""!==c.to)&&(t(o.target).parent().find(".yadcf-filter-range").val(""),t(o.target).parent().find(".yadcf-filter-range-number").length>0&&t(t(o.target).parent().find(".yadcf-filter-range")[0]).focus(),h.fnSettings().oFeatures.bServerSide!==!0?h.fnDraw():h.fnFilter("-yadcf_delim-",u),h.fnSettings().oLoadedState||(h.fnSettings().oLoadedState={},h.fnSettings().oApi._fnSaveState(h.fnSettings())),h.fnSettings().oFeatures.bStateSave===!0&&(void 0!==h.fnSettings().oLoadedState.yadcfState&&void 0!==h.fnSettings().oLoadedState.yadcfState[n]?h.fnSettings().oLoadedState.yadcfState[n][l]={from:"",to:""}:(a={},a[n]=[],a[n][l]={from:"",to:""},h.fnSettings().oLoadedState.yadcfState=a),h.fnSettings().oApi._fnSaveState(h.fnSettings())),d(),t(o.target).parent().find(".yadcf-filter-range").removeClass("inuse"))}function q(e,n){n=s(n),t.fn.dataTableExt.iApiIndex=be[e];var i,o,a,r,l=_e[e];r=parseInt(t(n.target).prev().find(".yadcf-filter-range-number-slider").attr("id").replace("yadcf-filter-"+e+"-slider-",""),10),i=+t(t(n.target).parent().find(".yadcf-filter-range-number-slider-min-tip-hidden")).text(),o=+t(t(n.target).parent().find(".yadcf-filter-range-number-slider-max-tip-hidden")).text(),a=de(l,r),(+a.from!==i||+a.to!==o)&&(t("#"+t(n.target).prev().find(".yadcf-filter-range-number-slider").attr("id")).slider("option","yadcf-reset",!0),t("#"+t(n.target).prev().find(".yadcf-filter-range-number-slider").attr("id")).slider("option","values",[i,o]),t(t(n.target).prev().find(".ui-slider-handle")[0]).attr("tabindex",-1).focus(),t(t(n.target).prev().find(".ui-slider-handle")[0]).removeClass("inuse"),t(t(n.target).prev().find(".ui-slider-handle")[1]).removeClass("inuse"),t(n.target).prev().find(".ui-slider-range").removeClass("inuse"),l.fnDraw(),d())}function G(e,n,i){var o,a,r,l;i=s(i),r=i.target.id,a=document.getElementById(r).value;try{a.length===n.length+2&&(a=""!==a?t.datepicker.parseDate(n,a):a)}catch(u){}a instanceof Date||""===a?(t.fn.dataTableExt.iApiIndex=be[e],o=_e[e],l=parseInt(r.replace("yadcf-filter-"+e+"-",""),10),a instanceof Date?(t("#"+r).addClass("inuse"),o.fnFilter(document.getElementById(r).value,l)):t("#"+r).removeClass("inuse"),""===t.trim(i.target.value)&&t(i.target).hasClass("inuse")&&(t("#"+i.target.id).removeClass("inuse"),o.fnFilter("",l)),d()):t(i.target).hasClass("inuse")&&(t.fn.dataTableExt.iApiIndex=be[e],o=_e[e],l=parseInt(r.replace("yadcf-filter-"+e+"-",""),10),t("#"+r).removeClass("inuse"),o.fnFilter("",l),d())}function Y(e,n,i){i=s(i),t.fn.dataTableExt.iApiIndex=be[e];var o,a,l,u,c,h,p,f=_e[e];c=parseInt(t(i.target).attr("id").replace("-from-date-","").replace("-to-date-","").replace("yadcf-filter-"+e,""),10),h=r(f.selector)[c],p=function(){-1!==i.target.id.indexOf("-from-")?(l=i.target.id,u=i.target.id.replace("-from-","-to-"),o=document.getElementById(l).value,a=document.getElementById(u).value):(u=i.target.id,l=i.target.id.replace("-to-","-from-"),a=document.getElementById(u).value,o=document.getElementById(l).value);try{o.length===n.length+2&&(o=""!==o?t.datepicker.parseDate(n,o):o)}catch(e){}try{a.length===n.length+2&&(a=""!==a?t.datepicker.parseDate(n,a):a)}catch(r){}(a instanceof Date&&o instanceof Date&&a>=o||""===o||""===a)&&(f.fnSettings().oFeatures.bServerSide!==!0?f.fnDraw():f.fnFilter(document.getElementById(l).value+"-yadcf_delim-"+document.getElementById(u).value,c),o instanceof Date?t("#"+l).addClass("inuse"):t("#"+l).removeClass("inuse"),a instanceof Date?t("#"+u).addClass("inuse"):t("#"+u).removeClass("inuse"),""===t.trim(i.target.value)&&t(i.target).hasClass("inuse")&&t("#"+i.target.id).removeClass("inuse")),d()},void 0===h.filter_delay?p(e,i):ve(function(){p(e,i)},h.filter_delay)}function Z(e,n){n=s(n),t.fn.dataTableExt.iApiIndex=be[e];var i,o,a,l,u,c,h,p,f=_e[e];c=parseInt(t(n.target).attr("id").replace("-from-","").replace("-to-","").replace("yadcf-filter-"+e,""),10),h=r(f.selector)[c],p=function(){-1!==n.target.id.indexOf("-from-")?(a=n.target.id,l=n.target.id.replace("-from-","-to-"),i=document.getElementById(a).value,o=document.getElementById(l).value):(l=n.target.id,a=n.target.id.replace("-to-","-from-"),o=document.getElementById(l).value,i=document.getElementById(a).value),void 0!==h.ignore_char&&(i=i.replace(h.ignore_char,""),o=o.replace(h.ignore_char,"")),i=""!==i?+i:i,o=""!==o?+o:o,(!isNaN(o)&&!isNaN(i)&&o>=i||""===i||""===o)&&(f.fnSettings().oFeatures.bServerSide!==!0?f.fnDraw():f.fnFilter(i+"-yadcf_delim-"+o,c),""!==document.getElementById(a).value&&t("#"+a).addClass("inuse"),""!==document.getElementById(l).value&&t("#"+l).addClass("inuse"),""===t.trim(n.target.value)&&t(n.target).hasClass("inuse")&&t("#"+n.target.id).removeClass("inuse"),f.fnSettings().oLoadedState||(f.fnSettings().oLoadedState={},f.fnSettings().oApi._fnSaveState(f.fnSettings())),f.fnSettings().oFeatures.bStateSave===!0&&(void 0!==f.fnSettings().oLoadedState.yadcfState&&void 0!==f.fnSettings().oLoadedState.yadcfState[e]?f.fnSettings().oLoadedState.yadcfState[e][c]={from:i,to:o}:(u={},u[e]=[],u[e][c]={from:i,to:o},f.fnSettings().oLoadedState.yadcfState=u),f.fnSettings().oApi._fnSaveState(f.fnSettings()))),d()},void 0===h.filter_delay?p():ve(function(){p()},h.filter_delay)}function K(e,n,i,o){var a,l,u=r(e+"_"+i)[i],c=!1,d=!0,h=!0,p=_e[e],f=t(n.target).val();if(n=s(n),a=new t.fn.dataTable.Api(p),void 0!==o||void 0==f||0===f.length)return void 0!==o&&(t(n.target).parent().find("select").val("-1").focus(),t(n.target).parent().find("select").removeClass("inuse")),u.column_number instanceof Array?a.columns(u.column_number).search("").draw():a.search("").draw(),void("chosen"===u.select_type?t("#"+u.filter_container_id+" select").trigger("chosen:updated"):"select2"===u.select_type&&t("#"+u.filter_container_id+" select").select2("val","-1"));if(t(n.target).addClass("inuse"),c=!0,d=!1,h=u.case_insensitive,null!==f){for(l=f.length-1;l>=0;l--)if("-1"===f[l]){f.splice(l,1);break}0!==f.length&&(f=f.join("narutouzomaki"),f=f.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),f=f.split("narutouzomaki").join("|"))}"exact"===u.filter_match_mode?f="^"+f+"$":"startsWith"===u.filter_match_mode&&(f="^"+f),u.column_number instanceof Array?a.columns(u.column_number).search(f,c,d,h).draw():a.search(f,c,d,h).draw()}function J(e,n,i,o){var a,l,u=r(e+"_"+i)[i],c=!1,d=!0,h=!0,p=_e[e];return n=s(n),l=new t.fn.dataTable.Api(p),void 0!==o||"-1"===n.target.value?(void 0!==o&&(t(n.target).parent().find("select").val("-1").focus(),t(n.target).parent().find("select").removeClass("inuse")),u.column_number instanceof Array?l.columns(u.column_number).search("").draw():l.search("").draw(),void("chosen"===u.select_type?t("#"+u.filter_container_id+" select").trigger("chosen:updated"):"select2"===u.select_type&&t("#"+u.filter_container_id+" select").select2("val","-1"))):(t(n.target).addClass("inuse"),a=n.target.value,d=!1,h=u.case_insensitive,void(u.column_number instanceof Array?l.columns(u.column_number).search(a,c,d,h).draw():l.search(a,c,d,h).draw()))}function X(e,n,i,o){var a,l,u,c=r(e+"_"+i)[i],d=!1,h=!0,p=!0,f=_e[e];n=s(n),u=new t.fn.dataTable.Api(f),a=function(e,n,i){return void 0!==i||""===n.target.value?(void 0!==i?(t(n.target).prev().val("").focus(),t(n.target).prev().removeClass("inuse")):(t(n.target).val("").focus(),t(n.target).removeClass("inuse")),void(c.column_number instanceof Array?e.columns(c.column_number).search("").draw():e.search("").draw())):(t(n.target).addClass("inuse"),l=n.target.value,h=!1,p=c.case_insensitive,void(c.column_number instanceof Array?e.columns(c.column_number).search(l,d,h,p).draw():e.search(l,d,h,p).draw()))},void 0===c.filter_delay?a(u,n,o):ve(function(){a(u,n,o)},c.filter_delay)}function Q(n,o,a){var s,l,u,c,h=_e[n],p=e(h);void 0!=p.oSavedState&&void 0!==p.oSavedState.ColReorder||void 0!==xe[n]&&void 0!==xe[n].ColReorder?(i(p.oSavedState,n),s=xe[n].ColReorder[o]):s=o,u=r(h.selector)[o],l=function(e,n,i){if(t.fn.dataTableExt.iApiIndex=be[e],"clear"===i||""===t("#yadcf-filter-"+e+"-"+n).val()){if("clear"===i&&""===de(h,n))return;return t("#yadcf-filter-"+e+"-"+n).val("").focus(),t("#yadcf-filter-"+e+"-"+n).removeClass("inuse"),h.fnFilter("",s),void d()}u.exclude===!0&&(c=t("#yadcf-filter-"+e+"-"+n).closest(".yadcf-filter-wrapper").find(".yadcf-exclude-wrapper :checkbox").prop("checked")),t("#yadcf-filter-"+e+"-"+n).addClass("inuse"),v(h,t("#yadcf-filter-"+e+"-"+n).val(),u.filter_match_mode,s,c),d()},void 0===u.filter_delay?l(n,o,a):ve(function(){l(n,o,a)},u.filter_delay)}function te(e,n){if(n=s(n),""===n.target.value&&8===n.keyCode&&t(n.target).hasClass("inuse")){t.fn.dataTableExt.iApiIndex=be[e];var i=_e[e],o=parseInt(t(n.target).attr("id").replace("yadcf-filter-"+e+"-",""),10);t("#yadcf-filter-"+e+"-"+o).removeClass("inuse"),t(document).removeData("#yadcf-filter-"+e+"-"+o+"_val"),i.fnFilter("",o),d()}}function ee(t){return void 0==t.fnSettings().sAjaxSource&&void 0==t.fnSettings().ajax?!0:!1}function ne(e,n){var i,o=t(document).data(n+"_filters_position"),a=yadcf.generateTableSelectorJQFriendly(n);o="thead"===o?".dataTables_scrollHead":".dataTables_scrollFoot",(""!==e.fnSettings().oScroll.sX||""!==e.fnSettings().oScroll.sY)&&(i=t(n).closest(".dataTables_scroll").find(o+" table"),i.addClass("yadcf-datatables-table-"+a))}function ie(e,n,a,r){var s,l=yadcf.generateTableSelectorJQFriendly(n);_e[l]=e,ye[l]=r,be[l]=a,ne(e,n),ee(e)?(s=n,-1!==n.indexOf(":eq")&&(s=n.substring(0,n.lastIndexOf(":eq"))),W(e,yadcf.getOptions(s),n)):(W(e,yadcf.getOptions(n),n),c("1.10")?(t(document).off("draw.dt",e.selector).on("draw.dt",e.selector,function(t,n){W(e,yadcf.getOptions(n.oInstance.selector),n.oInstance.selector)}),t(document).off("xhr.dt",e.selector).on("xhr.dt",e.selector,function(t,n,o){var a,r,s=h(e.selector);null!==n.oSavedState&&i(n.oSavedState,s);for(a in yadcf.getOptions(n.oInstance.selector))yadcf.getOptions(n.oInstance.selector).hasOwnProperty(a)&&void 0!==o["yadcf_data_"+a]&&(r=a,(null!==n.oSavedState&&void 0!==n.oSavedState.ColReorder||void 0!==xe[s]&&void 0!==xe[s].ColReorder)&&(r=xe[s].ColReorder[a]),yadcf.getOptions(n.oInstance.selector)[a].data=o["yadcf_data_"+r])}),t(document).off("column-visibility.dt",e.selector).on("column-visibility.dt",e.selector,function(t,e,n,i){var o={};i===!0&&(void 0!==xe[l]&&void 0!==xe[l].ColReorder?n=xe[l].ColReorder[n]:void 0!=e.oSavedState&&void 0!==e.oSavedState.ColReorder&&(n=e.oSavedState.ColReorder[n]),o[n]=yadcf.getOptions(e.oInstance.selector)[n],o[n].column_number=n,void 0!==o[n]&&W(_e[yadcf.generateTableSelectorJQFriendly(e.oInstance.selector)],o,e.oInstance.selector))}),t(document).off("destroy.dt",e.selector).on("destroy.dt",e.selector,function(t,n){z(e,yadcf.getOptions(n.oInstance.selector),n.oInstance.selector)})):(t(document).off("draw",e.selector).on("draw",e.selector,function(t,n){W(e,yadcf.getOptions(n.oInstance.selector),n.oInstance.selector)}),t(document).off("destroy",e.selector).on("destroy",e.selector,function(t,n){z(e,yadcf.getOptions(n.oInstance.selector),n.oInstance.selector)}))),c("1.10")?t(document).off("destroy.dt",e.selector).on("destroy.dt",e.selector,function(t,n){z(e,yadcf.getOptions(n.oInstance.selector),n.oInstance.selector)}):t(document).off("destroy",e.selector).on("destroy",e.selector,function(t,n){z(e,yadcf.getOptions(n.oInstance.selector),n.oInstance.selector)}),t(document).off("column-reorder.dt",e.selector).on("column-reorder.dt",e.selector,function(){var t=h(e.selector);o(t)}),e.fnSettings().oFeatures.bStateSave===!0&&(c("1.10")?t(e.selector).off("stateSaveParams.dt").on("stateSaveParams.dt",function(t,e,n){e.oLoadedState&&void 0!==e.oLoadedState.yadcfState?n.yadcfState=e.oLoadedState.yadcfState:n.naruto="kurama"}):t(e.selector).off("stateSaveParams").on("stateSaveParams",function(t,e,n){e.oLoadedState&&void 0!==e.oLoadedState.yadcfState?n.yadcfState=e.oLoadedState.yadcfState:n.naruto="kurama"}),ee(e)&&(e.fnSettings().oApi._fnSaveState(e.fnSettings()),e.fnDraw(!1)))}function oe(e,n,i){var o,a,r=e.settings()[0].oInstance,s=0;if(void 0===i&&(i={}),"string"==typeof i&&(a=i,i={},i.filters_position=a),i.filters_position=void 0===i.filters_position||"header"===i.filters_position?"thead":"tfoot",t(document).data(r.selector+"_filters_position",i.filters_position),1===t(r.selector).length)u(r.selector,n,i),ie(r,r.selector,0,e);else{for(s;s<t(r.selector).length;s++)t.fn.dataTableExt.iApiIndex=s,o=r.selector+":eq("+s+")",u(r.selector,n,i),ie(r,o,s,e);t.fn.dataTableExt.iApiIndex=0}}function ae(e,n,i){var o,s,l,u,c,d,h,p="#"+i.filter_container_id,f=(t(p).find(".yadcf-filter"),yadcf.generateTableSelectorJQFriendlyNew(n)),m=a(i.column_number).column_number_str,g=r(n+"_"+m)[m];switch(t(p).append('<div id="yadcf-filter-wrapper-'+f+"-"+m+'" class="yadcf-filter-wrapper"></div>'),p+=" div.yadcf-filter-wrapper",g.filter_type){case"text":t(p).append('<input type="text" id="yadcf-filter-'+f+"-"+m+'" class="yadcf-filter" onmousedown="yadcf.stopPropagation(event);" onclick=\'yadcf.stopPropagation(event);\' placeholder=\''+g.filter_default_label+"' onkeyup=\"yadcf.textKeyUpMultiTables('"+n+"',event,'"+m+"');\"></input>"),g.filter_reset_button_text!==!1&&t(p).find(".yadcf-filter").after('<button type="button"  id="yadcf-filter-'+f+"-"+m+'-reset" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.textKeyUpMultiTables(\''+n+"', event,'"+m+"','clear'); return false;\" class=\"yadcf-filter-reset-button\">"+g.filter_reset_button_text+"</button>");break;case"select":case"multi_select":if(o=void 0===g.select_type?'<option data-placeholder="true" value="-1">'+g.filter_default_label+"</option>":"","select2"===g.select_type&&void 0!==g.select_type_options.placeholder&&g.select_type_options.allowClear===!0&&(o='<option value=""></option>'),void 0===g.data)for(g.data=[],u=n.split(","),c=0;c<u.length;c++)if(l=t("#"+e[c].table().node().id).dataTable(),ee(l)){for(h=g.column_number,d=0;d<h.length;d++)g.column_number=h[d],g.data=g.data.concat(H(l,g,f));g.column_number=h}else t(document).off("draw.dt","#"+e[c].table().node().id).on("draw.dt","#"+e[c].table().node().id,function(){var e,n="";for(h=g.column_number,d=0;d<h.length;d++)g.column_number=h[d],g.data=g.data.concat(H(l,g,f));for(g.column_number=h,g.data=$(g.data,g),e=0;e<g.data.length;e++)n+='<option value="'+g.data[e]+'">'+g.data[e]+"</option>";t("#"+g.filter_container_id+" select").empty().append(n),void 0!==g.select_type&&"chosen"===g.select_type?(t("#"+g.filter_container_id+" select").chosen(g.select_type_options),t("#"+g.filter_container_id+" select").next().attr("onclick","yadcf.stopPropagation(event);").attr("onmousedown","yadcf.stopPropagation(event);")):void 0!==g.select_type&&"select2"===g.select_type&&(t("#"+g.filter_container_id+" select").select2(g.select_type_options),t("#"+g.filter_container_id+" select").next().hasClass("select2-container")&&t("#"+g.filter_container_id+" select").next().attr("onclick","yadcf.stopPropagation(event);").attr("onmousedown","yadcf.stopPropagation(event);"))});if(g.data=$(g.data,g),"object"==typeof g.data[0])for(s=0;s<g.data.length;s++)o+='<option value="'+g.data[s].value+'">'+g.data[s].label+"</option>";else for(s=0;s<g.data.length;s++)o+='<option value="'+g.data[s]+'">'+g.data[s]+"</option>";"select"===g.filter_type?t(p).append('<select id="yadcf-filter-'+f+"-"+m+'" class="yadcf-filter" onchange="yadcf.doFilterMultiTables(\''+n+"',event,'"+m+"')\" onmousedown=\"yadcf.stopPropagation(event);\" onclick='yadcf.stopPropagation(event);'>"+o+"</select>"):"multi_select"===g.filter_type&&t(p).append('<select multiple data-placeholder="'+g.filter_default_label+'" id="yadcf-filter-'+f+"-"+m+'" class="yadcf-filter" onchange="yadcf.doFilterMultiTablesMultiSelect(\''+n+"',event,'"+m+"')\" onmousedown=\"yadcf.stopPropagation(event);\" onclick='yadcf.stopPropagation(event);'>"+o+"</select>"),"select"===g.filter_type?g.filter_reset_button_text!==!1&&t(p).find(".yadcf-filter").after('<button type="button"  id="yadcf-filter-'+f+"-"+m+'-reset" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.doFilterMultiTables(\''+n+"', event,'"+m+"','clear'); return false;\" class=\"yadcf-filter-reset-button\">"+g.filter_reset_button_text+"</button>"):"multi_select"===g.filter_type&&g.filter_reset_button_text!==!1&&t(p).find(".yadcf-filter").after('<button type="button"  id="yadcf-filter-'+f+"-"+m+'-reset" onmousedown="yadcf.stopPropagation(event);" onclick="yadcf.stopPropagation(event);yadcf.doFilterMultiTablesMultiSelect(\''+n+"', event,'"+m+"','clear'); return false;\" class=\"yadcf-filter-reset-button\">"+g.filter_reset_button_text+"</button>"),void 0!==g.select_type&&"chosen"===g.select_type?(t("#yadcf-filter-"+f+"-"+m).chosen(g.select_type_options),t("#yadcf-filter-"+f+"-"+m).next().attr("onclick","yadcf.stopPropagation(event);").attr("onmousedown","yadcf.stopPropagation(event);")):void 0!==g.select_type&&"select2"===g.select_type&&(t("#yadcf-filter-"+f+"-"+m).select2(g.select_type_options),t("#yadcf-filter-"+f+"-"+m).next().hasClass("select2-container")&&t("#yadcf-filter-"+f+"-"+m).next().attr("onclick","yadcf.stopPropagation(event);").attr("onmousedown","yadcf.stopPropagation(event);"));break;default:alert("Filters Multiple Tables does not support "+g.filter_type)}}function re(e,n){var i,o,r,s,l,c="",d={filter_type:"text",filter_container_id:"",filter_reset_button_text:"x",case_insensitive:!0};for(r=0;r<n.length;r++){for(l=[],o=n[r],void 0===o.filter_default_label&&("select"===o.filter_type||"custom_func"===o.filter_type?o.filter_default_label="Select value":"multi_select"===o.filter_type||"multi_select_custom_func"===o.filter_type?o.filter_default_label="Select values":"auto_complete"===o.filter_type||"text"===o.filter_type?o.filter_default_label="Type to filter":"range_number"===o.filter_type||"range_date"===o.filter_type?o.filter_default_label=["from","to"]:"date"===o.filter_type&&(o.filter_default_label="Select a date")),o=t.extend({},d,o),s=a(o.column_number).column_number_str,o.column_number_str=s,l.push(o),c="",i=0;i<e.length;i++)c+=e[i].table().node().id+",";c=c.substring(0,c.length-1),u(c+"_"+s,l),_e[c]=e,ae(e,c,o)}}function se(t,e){var n=[];n.push(t),re(n,e)}function le(t){void 0!==t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function ue(t,e){return function(){ce(t,e,!0)}}function ce(e,n,i){var o,a,s,l,u,c,d,h,p,f,m,v;if(void 0!==e.settings&&(e=e.settings()[0].oInstance),o=yadcf.generateTableSelectorJQFriendly(e.selector),ee(e)||i===!0){for(a=0;a<n.length;a++)switch(l=n[a][0],u=l,void 0!==xe[o]&&void 0!==xe[o]&&void 0!==xe[o].ColReorder&&(u=xe[o].ColReorder[l]),f=r(e.selector)[l],c=n[a][1],f.filter_type){case"auto_complete":case"text":case"date":t("#yadcf-filter-"+o+"-"+l).val(c).addClass("inuse"),s=g(e,u,c,f.filter_match_mode,!1),e.fnSettings().aoPreSearchCols[u].sSearch=s;break;case"select":t("#yadcf-filter-"+o+"-"+l).val(c).addClass("inuse"),s=g(e,u,c,f.filter_match_mode,!1),e.fnSettings().aoPreSearchCols[u].sSearch=s,void 0!==f.select_type&&("chosen"===f.select_type?t("#yadcf-filter-"+o+"-"+l).trigger("chosen:updated"):"select2"===f.select_type&&t("#yadcf-filter-"+o+"-"+l).select2("val",c));break;case"multi_select":t("#yadcf-filter-"+o+"-"+l).val(c),s=g(e,u,c,f.filter_match_mode,!0),e.fnSettings().aoPreSearchCols[u].sSearch=s,void 0!==f.select_type&&("chosen"===f.select_type?t("#yadcf-filter-"+o+"-"+l).trigger("chosen:updated"):"select2"===f.select_type&&t("#yadcf-filter-"+o+"-"+l).select2("val",c));break;case"range_date":d="yadcf-filter-"+o+"-from-date-"+l,h="yadcf-filter-"+o+"-to-date-"+l,""!==c.from&&(t("#"+d).val(c.from),t("#"+d).addClass("inuse")),""!==c.to&&(t("#"+h).val(c.to),t("#"+h).addClass("inuse")),e.fnSettings().oFeatures.bServerSide===!0&&(m=c.from,v=c.to,e.fnSettings().aoPreSearchCols[u].sSearch=m+"-yadcf_delim-"+v),pe(e,l,o,c.from,c.to);break;case"range_number":d="yadcf-filter-"+o+"-from-"+l,h="yadcf-filter-"+o+"-to-"+l,""!==c.from&&(t("#"+d).val(c.from),t("#"+d).addClass("inuse")),""!==c.to&&(t("#"+h).val(c.to),t("#"+h).addClass("inuse")),e.fnSettings().oFeatures.bServerSide===!0&&(e.fnSettings().aoPreSearchCols[u].sSearch=c.from+"-yadcf_delim-"+c.to),pe(e,l,o,c.from,c.to);break;case"range_number_slider":p="yadcf-filter-"+o+"-slider-"+l,d="yadcf-filter-"+o+"-min_tip-"+l,h="yadcf-filter-"+o+"-max_tip-"+l,""!==c.from&&(m=t("#"+d).closest(".yadcf-filter-range-number-slider").find(".yadcf-filter-range-number-slider-min-tip-hidden").text(),v=t("#"+d).closest(".yadcf-filter-range-number-slider").find(".yadcf-filter-range-number-slider-max-tip-hidden").text(),t("#"+d).text(c.from),m!==c.from&&(t("#"+d).parent().addClass("inuse"),t("#"+d).parent().parent().find("ui-slider-range").addClass("inuse")),t("#"+p).slider("values",0,c.from)),""!==c.to&&(t("#"+h).text(c.to),v!==c.to&&(t("#"+h).parent().addClass("inuse"),t("#"+h).parent().parent().find(".ui-slider-range").addClass("inuse")),t("#"+p).slider("values",1,c.to)),e.fnSettings().oFeatures.bServerSide===!0&&(e.fnSettings().aoPreSearchCols[u].sSearch=c.from+"-yadcf_delim-"+c.to),pe(e,l,o,c.from,c.to);break;case"custom_func":case"multi_select_custom_func":t("#yadcf-filter-"+o+"-"+l).val(c).addClass("inuse"),e.fnSettings().oFeatures.bServerSide===!0&&(e.fnSettings().aoPreSearchCols[u].sSearch=c),void 0!==f.select_type&&("chosen"===f.select_type?t("#yadcf-filter-"+o+"-"+l).trigger("chosen:updated"):"select2"===f.select_type&&t("#yadcf-filter-"+o+"-"+l).select2("val",c)),pe(e,l,o,c,"")}e.fnSettings().oFeatures.bServerSide!==!0?e.fnDraw():setTimeout(function(){e.fnDraw()},10)}else Ce.push(ue(e,n))}function de(e,n){var i,o,a,s,l;switch(void 0!==e.settings&&(e=e.settings()[0].oInstance),l=r(e.selector)[n],s=yadcf.generateTableSelectorJQFriendly(e.selector),l.filter_type){case"select":case"custom_func":i=t("#yadcf-filter-"+s+"-"+n).val(),"-1"===i&&(i="");break;case"auto_complete":case"text":case"date":i=t("#yadcf-filter-"+s+"-"+n).val();break;case"multi_select":i=t("#yadcf-filter-"+s+"-"+n).val(),null===i&&(i="");break;case"range_date":i={},o="yadcf-filter-"+s+"-from-date-"+n,a="yadcf-filter-"+s+"-to-date-"+n,i.from=t("#"+o).val(),i.to=t("#"+a).val();break;case"range_number":i={},o="yadcf-filter-"+s+"-from-"+n,a="yadcf-filter-"+s+"-to-"+n,i.from=t("#"+o).val(),i.to=t("#"+a).val();break;case"range_number_slider":i={},o="yadcf-filter-"+s+"-min_tip-"+n,a="yadcf-filter-"+s+"-max_tip-"+n,i.from=t("#"+o).text(),i.to=t("#"+a).text();break;default:console.log("exGetColumnFilterVal error: no such filter_type: "+l.filter_type)}return i}function he(t,e,n){var i;t.fnSettings().oFeatures.bStateSave===!0&&(t.fnSettings().oLoadedState||(t.fnSettings().oLoadedState={},t.fnSettings().oApi._fnSaveState(t.fnSettings())),void 0!==t.fnSettings().oLoadedState.yadcfState&&void 0!==t.fnSettings().oLoadedState.yadcfState[n]?t.fnSettings().oLoadedState.yadcfState[n][e]=void 0:(i={},i[n]=[],i[n][e]=void 0,t.fnSettings().oLoadedState.yadcfState=i),t.fnSettings().oApi._fnSaveState(t.fnSettings()))}function pe(t,e,n,i,o){var a;t.fnSettings().oFeatures.bStateSave===!0&&(t.fnSettings().oLoadedState||(t.fnSettings().oLoadedState={}),void 0!==t.fnSettings().oLoadedState.yadcfState&&void 0!==t.fnSettings().oLoadedState.yadcfState[n]?t.fnSettings().oLoadedState.yadcfState[n][e]={from:i,to:o}:(a={},a[n]=[],a[n][e]={from:i,to:o},t.fnSettings().oLoadedState.yadcfState=a),t.fnSettings().oApi._fnSaveState(t.fnSettings()))}function fe(n,i,o){var a,s,l,u,c,d,h,p,f,m=e(n);void 0!==n.settings&&(n=n.settings()[0].oInstance),d=r(n.selector),a=yadcf.generateTableSelectorJQFriendly(n.selector),m=e(n);for(p in d)if(d.hasOwnProperty(p)){if(h=d[p],s=h.column_number,void 0!==o&&-1===t.inArray(s,o))continue;switch(t(document).removeData("#yadcf-filter-"+a+"-"+s+"_val"),h.filter_type){case"select":case"custom_func":t("#yadcf-filter-"+a+"-"+s).val("-1").removeClass("inuse"),n.fnSettings().aoPreSearchCols[s].sSearch="",void 0!==h.select_type&&("chosen"===h.select_type?t("#yadcf-filter-"+a+"-"+s).trigger("chosen:updated"):"select2"===h.select_type&&t("#yadcf-filter-"+a+"-"+s).select2("val","-1"));break;case"auto_complete":case"text":case"date":t("#yadcf-filter-"+a+"-"+s).val("").removeClass("inuse"),n.fnSettings().aoPreSearchCols[s].sSearch="";break;case"multi_select":case"multi_select_custom_func":t("#yadcf-filter-"+a+"-"+s).val("-1"),t(document).data("#yadcf-filter-"+a+"-"+s+"_val",void 0),n.fnSettings().aoPreSearchCols[s].sSearch="",void 0!==h.select_type&&("chosen"===h.select_type?t("#yadcf-filter-"+a+"-"+s).trigger("chosen:updated"):"select2"===h.select_type&&t("#yadcf-filter-"+a+"-"+s).select2("val","-1"));break;case"range_date":l="yadcf-filter-"+a+"-from-date-"+s,u="yadcf-filter-"+a+"-to-date-"+s,t("#"+l).val(""),t("#"+l).removeClass("inuse"),t("#"+u).val(""),t("#"+u).removeClass("inuse"),n.fnSettings().oFeatures.bServerSide===!0&&(n.fnSettings().aoPreSearchCols[s].sSearch=""),he(n,s,a);break;case"range_number":l="yadcf-filter-"+a+"-from-"+s,u="yadcf-filter-"+a+"-to-"+s,t("#"+l).val(""),t("#"+l).removeClass("inuse"),t("#"+u).val(""),t("#"+u).removeClass("inuse"),n.fnSettings().oFeatures.bServerSide===!0&&(n.fnSettings().aoPreSearchCols[s].sSearch=""),he(n,s,a);break;case"range_number_slider":c="yadcf-filter-"+a+"-slider-"+s,l="yadcf-filter-"+a+"-min_tip-"+s,u="yadcf-filter-"+a+"-max_tip-"+s,t("#"+l).text(""),t("#"+l).parent().removeClass("inuse"),t("#"+l).parent().parent().find("ui-slider-range").removeClass("inuse"),t("#"+u).text(""),t("#"+u).parent().removeClass("inuse"),t("#"+u).parent().parent().find(".ui-slider-range").removeClass("inuse"),t("#"+c).slider("option","values",[t("#"+l).parent().parent().find(".yadcf-filter-range-number-slider-min-tip-hidden").text(),t("#"+l).parent().parent().find(".yadcf-filter-range-number-slider-max-tip-hidden").text()]),n.fnSettings().oFeatures.bServerSide===!0&&(n.fnSettings().aoPreSearchCols[s].sSearch=""),he(n,s,a)}}if(i!==!0){if(m.oPreviousSearch.sSearch="","undefined"!==m.aanFeatures.f)for(f=0;f<m.aanFeatures.f.length;f++)t("input",m.aanFeatures.f[f]).val("");n.fnDraw(m)}}function me(t,e){fe(t,!1,e)}function ge(t){var e,n,i,o,a,s=[];void 0!==t.settings&&(t=t.settings()[0].oInstance),e=r(t.selector);for(n in e)e.hasOwnProperty(n)&&(i=e[n],o=de(t,i.column_number),("string"==typeof o&&""!==o||"object"==typeof o&&(""!==o.from||""!==o.to))&&(a=[],a.push(i.column_number),a.push(o),s.push(a)));ce(t,s,!0)}var ve,ye={},_e={},be={},we={},xe={},Ce=[],Le=/[^a-zA-Z]/g,Se=/[^0-9]/g;return ve=function(){var t=0;return function(e,n,i){return clearTimeout(t),t=setTimeout(function(){e(i)},n)}}(),t.fn.yadcf=function(e,n){var i,o,a=0;if(void 0===n&&(n={}),"string"==typeof n&&(i=n,n={},n.filters_position=i),n.filters_position=void 0===n.filters_position||"header"===n.filters_position?"thead":"tfoot",t(document).data(this.selector+"_filters_position",n.filters_position),1===t(this.selector).length)u(this.selector,e,n),ie(this,this.selector,0);else{for(a;a<t(this.selector).length;a++)t.fn.dataTableExt.iApiIndex=a,o=this.selector+":eq("+a+")",u(this.selector,e,n),ie(this,o,a);t.fn.dataTableExt.iApiIndex=0}return this},{init:oe,doFilter:b,doFilterMultiSelect:w,doFilterAutocomplete:C,autocompleteKeyUP:te,getOptions:r,rangeNumberKeyUP:Z,rangeDateKeyUP:Y,rangeClear:V,rangeNumberSliderClear:q,stopPropagation:le,generateTableSelectorJQFriendly:h,exFilterColumn:ce,exGetColumnFilterVal:de,exResetAllFilters:fe,dateKeyUP:G,dateSelectSingle:A,textKeyUP:Q,doFilterCustomDateFunc:_,eventTargetFixUp:s,initMultipleTables:re,initMultipleColumns:se,textKeyUpMultiTables:X,doFilterMultiTables:J,doFilterMultiTablesMultiSelect:K,generateTableSelectorJQFriendlyNew:m,exFilterExternallyTriggered:ge,exResetFilters:me}}(jQuery),waitForFinalEvent=function(){var t={};return function(e,n,i){i||(i="Don't call this twice without a uniqueId"),t[i]&&clearTimeout(t[i]),t[i]=setTimeout(e,n)}}();$(document).ready(function(){$(".breadcrumb_link:has(span.dropdown)")&&($(".breadcrumb_link:has(span.dropdown)").css("padding","0"),$(".breadcrumb_link:has(span.dropdown) > .dropdown > .dropdown-toggle").css("margin-top","-0.15em"))});var checkForRangeChange=function(t){var e=function(e,n){e.split(" ").length>2&&(newTxt=e.replace(/\d*/g,""),$("."+t+"_limit").html(newTxt)),n&&("upper"===t?null!==n.match(/(to)\s+\d*/)&&(newTxt=n.replace(/(to)\s+\d*/,"to "),$(".map_range label").html(newTxt)):null!==n.match(/(from)\s+\d*/)&&(newTxt=n.replace(/(from)\s+\d*/,"from "),$(".map_range label").html(newTxt)))};$("#"+t).change(function(){var n=$("."+t+"_limit").html(),i=$(".map_range label").html();$(this).val()?(e(n,i),$("."+t+"_limit").append(" "+$(this).val()).show(),i&&("upper"===t?(newTxt=$(".map_range label").html().replace(/(to\s*)/,"to "+$(this).val()),$(".map_range label").html(newTxt)):(newTxt=$(".map_range label").html().replace(/(from\s*)/,"from "+$(this).val()+" "),$(".map_range label").html(newTxt)),$(".map_range").show())):(e(n,i),$("#lower").val()||$("#upper").val()||$(".map_range").css("display","none"),$("."+t+"_limit").css("display","none")),"upper"===t?$("#snapshot_range_high").val($("#"+t).val()):$("#snapshot_range_low").val($("#"+t).val())})},checkForMapFilterChange=function(){$("#filters").change(function(t){"upper"!==t.target.name&&"lower"!==t.target.name&&(key=":"+t.target.id+"=>",regex=new RegExp(key+'(")?(\\d*\\s?)*(")?'),$("#snapshot_filters").val("day_of_week"==t.target.id?$("#snapshot_filters").val().replace(regex,key+'"'+t.target.value+'"'):$("#snapshot_filters").val().replace(regex,key+t.target.value)))})},checkForChartSliderChange=function(t){0!=$("#snapshot_filters").length&&(key=":slider_value=>",regex=new RegExp(key+'(")?(\\d*\\s?)*(")?'),$("#snapshot_filters").val($("#snapshot_filters").val().replace(regex,key+t)))},getAdditionalFilterValues=function(t){var e={};for(i=0;i<t.length;i++)key=$(t[i]).closest(".checkbox").attr("data-view-id"),$("#filter-form-"+key)&&(lowVal=$("#filter-form-"+key).find(".number_range_filter#lower").val(),highVal=$("#filter-form-"+key).find(".number_range_filter#upper").val(),$("#filter-form-"+key+" #vehicle_class")&&(year=$("#filter-form-"+key).find("#year").val(),month=$("#filter-form-"+key).find("#month").val(),hour=$("#filter-form-"+key).find("#hour").val(),day_of_week=$("#filter-form-"+key).find("#day_of_week").val(),vehicle_class=$("#filter-form-"+key).find("#vehicle_class").val(),e["year"+key]=year,e["month"+key]=month,e["hour"+key]=hour,e["day_of_week"+key]=day_of_week,e["vehicle_class"+key]=vehicle_class),$("#filter-form-"+key+" #transit_mode")&&(year=$("#filter-form-"+key).find("#year").val(),hour=$("#filter-form-"+key).find("#hour").val(),transit_mode=$("#filter-form-"+key).find("#transit_mode").val(),transit_direction=$("#filter-form-"+key).find("#transit_direction").val(),e["year"+key]=year,e["hour"+key]=hour,e["transit_mode"+key]=transit_mode,e["transit_direction"+key]=transit_direction),e["lower"+key]=lowVal,e["upper"+key]=highVal),$("#yearSlider")&&(e.year=$("#yearSlider").val());$("#snapshot_filters").val(JSON.stringify(e))},getUrlParam=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e="[\\?&]"+t+"=([^&#]*)",n=new RegExp(e),i=n.exec(window.location.href);return null==i?"":i[1].replace("+"," ")};window.console&&console.log||(console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}});